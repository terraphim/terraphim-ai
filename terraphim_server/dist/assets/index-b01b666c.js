import{aa as nt,S as Qe,i as Ze,s as Je,q as f,Y,b as T,y as r,Z as _e,I as he,j as C,ak as ke,au as mt,r as le,a as b,v as u,z as ne,t as O,d as H,B as oe,av as Kn,aw as St,H as Ee,U as Pe,V as je,ax as Bt,ay as Wn,F as it,g as Le,e as Ne,O as Xe,az as ll,l as x,E as ze,aA as wt,aB as yn,aC as zn,a1 as Ce,C as ot,aD as De,aE as Sn,D as Et,G as Ot,aF as Cn,a2 as qn,aG as Bn,x as Jt,ac as Jn,m as nl,af as At,W as yt,a7 as Vn,a9 as Yn,n as Qn,w as gl}from"./vendor-ui-cd3d2b6a.js";import{R as dt,S as Yt}from"./vendor-utils-1b347ea1.js";import{J as Tn,_ as Zn,o as Xn}from"./vendor-editor-992829d3.js";import{P as Rn,T as Vt,u as Ln,y as xn,A as eo,S as to,q as lo}from"./vendor-atomic-1ea13e29.js";import{E as no}from"./novel-editor-b32024cb.js";import{s as Zt,z as oo,a as so,l as ro,m as io,c as ao,b as uo,B as co,d as fo}from"./vendor-charts-e6a4a6c9.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const lt={ServerURL:location.protocol+"//"+window.location.host||"/"},xt=nt([]),po={id:"Desktop",global_shortcut:"",roles:{},default_role:{original:"",lowercase:""},selected_role:{original:"",lowercase:""}},jt=nt("spacelab"),gt=nt("selected"),Be=nt(!1),_o=nt(`${lt.ServerURL}/documents/search`),Ye=nt(po),hl=nt([]);let Xt=nt("");const Pt=nt(!1);let $t=null;function mo(l){if(typeof document>"u")return;const e=`/assets/bulmaswatch/${l}/bulmaswatch.min.css`;if($t!=null&&$t.href.endsWith(e))return;const t=document.createElement("link");t.rel="stylesheet",t.href=e,t.id="bulma-theme",t.onload=()=>{$t&&$t!==t&&$t.remove(),$t=t},document.head.appendChild(t);const n=document.head.querySelector('meta[name="color-scheme"]');n&&n.setAttribute("content",l)}jt.subscribe(mo);function go(l){let e,t;return{c(){e=f("option"),t=Y(l[1]),e.__value=l[0],e.value=e.__value},m(n,o){T(n,e,o),r(e,t)},p(n,[o]){o&2&&_e(t,n[1]),o&1&&(e.__value=n[0],e.value=e.__value)},i:he,o:he,d(n){n&&C(e)}}}function ho(l,e,t){let n,{subject:o}=e;const i=Rn(o),s=Vt(i,Ln.properties.name);return ke(l,s,a=>t(1,n=a)),Vt(i,"http://localhost:9883/property/theme"),l.$$set=a=>{"subject"in a&&t(0,o=a.subject)},[o,n,s]}class vo extends Qe{constructor(e){super(),Ze(this,e,ho,go,Je,{subject:0})}}function bo(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function el(l,e=!1){const t=bo(),n=`_${t}`;return Object.defineProperty(window,n,{value:o=>(e&&Reflect.deleteProperty(window,n),l==null?void 0:l(o)),writable:!1,configurable:!0}),t}async function Me(l,e={}){return new Promise((t,n)=>{const o=el(s=>{t(s),Reflect.deleteProperty(window,`_${i}`)},!0),i=el(s=>{n(s),Reflect.deleteProperty(window,`_${o}`)},!0);window.__TAURI_IPC__({cmd:l,callback:o,error:i,...e})})}function vl(l,e,t){const n=l.slice();return n[25]=e[t],n}function ko(l){let e,t,n;function o(s){l[13](s)}let i={};return l[5]!==void 0&&(i.value=l[5]),e=new St({props:i}),Ee.push(()=>Pe(e,"value",o)),{c(){le(e.$$.fragment)},m(s,a){ne(e,s,a),n=!0},p(s,a){const c={};!t&&a&32&&(t=!0,c.value=s[5],je(()=>t=!1)),e.$set(c)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){oe(e,s)}}}function $o(l){let e,t,n;function o(s){l[14](s)}let i={type:"password",placeholder:"secret",icon:"fas fa-lock",expanded:!0};return l[6]!==void 0&&(i.value=l[6]),e=new St({props:i}),Ee.push(()=>Pe(e,"value",o)),{c(){le(e.$$.fragment)},m(s,a){ne(e,s,a),n=!0},p(s,a){const c={};!t&&a&64&&(t=!0,c.value=s[6],je(()=>t=!1)),e.$set(c)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){oe(e,s)}}}function wo(l){let e;return{c(){e=Y("Save")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function yo(l){let e,t;return e=new Bt({props:{type:"is-success",class:"is-right",iconPack:"fa",iconLeft:"check",$$slots:{default:[wo]},$$scope:{ctx:l}}}),e.$on("click",l[8]),e.$on("submit",l[8]),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,o){const i={};o&268435456&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function So(l){let e,t,n,o,i,s;return e=new mt({props:{$$slots:{default:[ko]},$$scope:{ctx:l}}}),n=new mt({props:{grouped:!0,$$slots:{default:[$o]},$$scope:{ctx:l}}}),i=new mt({props:{grouped:!0,$$slots:{default:[yo]},$$scope:{ctx:l}}}),{c(){le(e.$$.fragment),t=b(),le(n.$$.fragment),o=b(),le(i.$$.fragment)},m(a,c){ne(e,a,c),T(a,t,c),ne(n,a,c),T(a,o,c),ne(i,a,c),s=!0},p(a,c){const p={};c&268435488&&(p.$$scope={dirty:c,ctx:a}),e.$set(p);const m={};c&268435520&&(m.$$scope={dirty:c,ctx:a}),n.$set(m);const d={};c&268435456&&(d.$$scope={dirty:c,ctx:a}),i.$set(d)},i(a){s||(O(e.$$.fragment,a),O(n.$$.fragment,a),O(i.$$.fragment,a),s=!0)},o(a){H(e.$$.fragment,a),H(n.$$.fragment,a),H(i.$$.fragment,a),s=!1},d(a){oe(e,a),a&&C(t),oe(n,a),a&&C(o),oe(i,a)}}}function Co(l){let e,t,n;function o(s){l[15](s)}let i={type:"search",placeholder:"Fetch JSON",icon:"search"};return l[3]!==void 0&&(i.value=l[3]),e=new St({props:i}),Ee.push(()=>Pe(e,"value",o)),{c(){le(e.$$.fragment)},m(s,a){ne(e,s,a),n=!0},p(s,a){const c={};!t&&a&8&&(t=!0,c.value=s[3],je(()=>t=!1)),e.$set(c)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){oe(e,s)}}}function To(l){let e;return{c(){e=Y("WikiPage")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Ro(l){let e,t,n,o,i,s;function a(d){l[16](d)}let c={type:"search",placeholder:"Post JSON",icon:"search"};l[4]!==void 0&&(c.value=l[4]),e=new St({props:c}),Ee.push(()=>Pe(e,"value",a));function p(d){l[17](d)}let m={$$slots:{default:[To]},$$scope:{ctx:l}};return l[2]!==void 0&&(m.checked=l[2]),o=new Wn({props:m}),Ee.push(()=>Pe(o,"checked",p)),{c(){le(e.$$.fragment),n=b(),le(o.$$.fragment)},m(d,_){ne(e,d,_),T(d,n,_),ne(o,d,_),s=!0},p(d,_){const h={};!t&&_&16&&(t=!0,h.value=d[4],je(()=>t=!1)),e.$set(h);const g={};_&268435456&&(g.$$scope={dirty:_,ctx:d}),!i&&_&4&&(i=!0,g.checked=d[2],je(()=>i=!1)),o.$set(g)},i(d){s||(O(e.$$.fragment,d),O(o.$$.fragment,d),s=!0)},o(d){H(e.$$.fragment,d),H(o.$$.fragment,d),s=!1},d(d){oe(e,d),d&&C(n),oe(o,d)}}}function Lo(l){let e;return{c(){e=Y("Fetch")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function No(l){let e,t;return e=new Bt({props:{type:"is-primary",$$slots:{default:[Lo]},$$scope:{ctx:l}}}),e.$on("click",l[9]),e.$on("submit",l[9]),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,o){const i={};o&268435456&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Ao(l){let e,t,n,o,i,s;return e=new mt({props:{grouped:!0,$$slots:{default:[Co]},$$scope:{ctx:l}}}),n=new mt({props:{grouped:!0,$$slots:{default:[Ro]},$$scope:{ctx:l}}}),i=new mt({props:{grouped:!0,$$slots:{default:[No]},$$scope:{ctx:l}}}),{c(){le(e.$$.fragment),t=b(),le(n.$$.fragment),o=b(),le(i.$$.fragment)},m(a,c){ne(e,a,c),T(a,t,c),ne(n,a,c),T(a,o,c),ne(i,a,c),s=!0},p(a,c){const p={};c&268435464&&(p.$$scope={dirty:c,ctx:a}),e.$set(p);const m={};c&268435476&&(m.$$scope={dirty:c,ctx:a}),n.$set(m);const d={};c&268435456&&(d.$$scope={dirty:c,ctx:a}),i.$set(d)},i(a){s||(O(e.$$.fragment,a),O(n.$$.fragment,a),O(i.$$.fragment,a),s=!0)},o(a){H(e.$$.fragment,a),H(n.$$.fragment,a),H(i.$$.fragment,a),s=!1},d(a){oe(e,a),a&&C(t),oe(n,a),a&&C(o),oe(i,a)}}}function Eo(l){let e,t,n,o,i;return o=new Tn({props:{content:l[1],onChange:l[7]}}),{c(){e=f("p"),e.innerHTML=`<i>The best editing experience is to configure Atomic Server, in the
        meantime use editor below. You will need to refresh page via Command R
        or Ctrl-R to see changes</i>`,t=b(),n=f("div"),le(o.$$.fragment),u(n,"class","editor")},m(s,a){T(s,e,a),T(s,t,a),T(s,n,a),ne(o,n,null),i=!0},p(s,a){const c={};a&2&&(c.content=s[1]),o.$set(c)},i(s){i||(O(o.$$.fragment,s),i=!0)},o(s){H(o.$$.fragment,s),i=!1},d(s){s&&C(e),s&&C(t),s&&C(n),oe(o)}}}function bl(l){let e,t;return e=new vo({props:{subject:l[25]}}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,o){const i={};o&1&&(i.subject=n[25]),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Oo(l){let e,t,n=l[0]??[],o=[];for(let s=0;s<n.length;s+=1)o[s]=bl(vl(l,n,s));const i=s=>H(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=it()},m(s,a){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,a);T(s,e,a),t=!0},p(s,a){if(a&1){n=s[0]??[];let c;for(c=0;c<n.length;c+=1){const p=vl(s,n,c);o[c]?(o[c].p(p,a),O(o[c],1)):(o[c]=bl(p),o[c].c(),O(o[c],1),o[c].m(e.parentNode,e))}for(Le(),c=n.length;c<o.length;c+=1)i(c);Ne()}},i(s){if(!t){for(let a=0;a<n.length;a+=1)O(o[a]);t=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)H(o[a]);t=!1},d(s){Xe(o,s),s&&C(e)}}}function Uo(l){let e,t;return e=new Kn({props:{$$slots:{default:[Oo]},$$scope:{ctx:l}}}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,o){const i={};o&268435457&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Do(l){let e,t,n,o,i,s,a,c,p,m,d,_,h;return t=new dt({props:{path:"/atomic",$$slots:{default:[So]},$$scope:{ctx:l}}}),o=new dt({props:{path:"/json",$$slots:{default:[Ao]},$$scope:{ctx:l}}}),s=new dt({props:{path:"/editor",$$slots:{default:[Eo]},$$scope:{ctx:l}}}),m=new mt({props:{grouped:!0,position:"is-right",$$slots:{default:[Uo]},$$scope:{ctx:l}}}),{c(){e=f("div"),le(t.$$.fragment),n=b(),le(o.$$.fragment),i=b(),le(s.$$.fragment),a=b(),c=f("hr"),p=b(),le(m.$$.fragment),d=b(),_=f("nav"),_.innerHTML=`<div class="navbar-brand"><a class="navbar-item" href="/"><span class="icon" style="color: #333;"><i class="fas fa-home"></i></span></a> 
    <a class="navbar-item" href="/fetch/json">Fetch JSON Data</a> 
    <a class="navbar-item" href="/fetch/atomic">Set Atomic Server</a> 
    <a class="navbar-item" href="/fetch/editor">Edit JSON config</a></div>`,u(e,"class","box"),u(_,"class","navbar")},m(g,$){T(g,e,$),ne(t,e,null),r(e,n),ne(o,e,null),r(e,i),ne(s,e,null),T(g,a,$),T(g,c,$),T(g,p,$),ne(m,g,$),T(g,d,$),T(g,_,$),h=!0},p(g,[$]){const y={};$&268435552&&(y.$$scope={dirty:$,ctx:g}),t.$set(y);const v={};$&268435484&&(v.$$scope={dirty:$,ctx:g}),o.$set(v);const k={};$&268435458&&(k.$$scope={dirty:$,ctx:g}),s.$set(k);const R={};$&268435457&&(R.$$scope={dirty:$,ctx:g}),m.$set(R)},i(g){h||(O(t.$$.fragment,g),O(o.$$.fragment,g),O(s.$$.fragment,g),O(m.$$.fragment,g),h=!0)},o(g){H(t.$$.fragment,g),H(o.$$.fragment,g),H(s.$$.fragment,g),H(m.$$.fragment,g),h=!1},d(g){g&&C(e),oe(t),oe(o),oe(s),g&&C(a),g&&C(c),g&&C(p),oe(m,g),g&&C(d),g&&C(_)}}}function Mo(l,e,t){let n,o,i,s,a;ke(l,xn,M=>t(19,i=M)),ke(l,Be,M=>t(20,s=M)),ke(l,Ye,M=>t(21,a=M));let c={json:a};function p(M){if(console.log("contents changed:",M),console.log("is tauri",s),Ye.update(S=>(S=M.json,S)),Be)console.log("Updating config on server"),Me("update_config",{configNew:M.json}).then(S=>{console.log(`Message: ${S}`)}).catch(S=>console.error(S));else{let S=`${lt.ServerURL}/config/`;fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M.json)})}t(1,c=M)}let m=!1,d="https://raw.githubusercontent.com/terraphim/terraphim-cloud-fastapi/main/data/ref_arch.json",_="http://localhost:8000/documents/",h="http://localhost:9883/",g;const $=async()=>{console.log("Updating atomic server configuration");const M=eo.fromSecret(g);i.setServerUrl(h),console.log("Server set.Setting agent"),i.setAgent(M)},y=async()=>{R()},v=({data:{msg:M,data:S}})=>{console.log(M,S)};let k;const R=async()=>{const M=await Zn(()=>import("./fetcher.worker-7e58969a.js"),[]);k=new M.default,k.onmessage=v;const S={msg:"fetcher",data:{url:d,postUrl:_,isWiki:m}};k.postMessage(S)},E=Rn("http://localhost:9883/config/y3zx5wtm0bq"),G=Vt(E,Ln.properties.name);ke(l,G,M=>t(12,o=M));const F=Vt(E,"http://localhost:9883/property/role");ke(l,F,M=>t(0,n=M));function w(M){h=M,t(5,h)}function L(M){g=M,t(6,g)}function I(M){d=M,t(3,d)}function J(M){_=M,t(4,_)}function V(M){m=M,t(2,m)}return l.$$.update=()=>{l.$$.dirty&4096&&console.log("Print name",o),l.$$.dirty&1&&console.log("Print roles",n)},[n,c,m,d,_,h,g,p,$,y,G,F,o,w,L,I,J,V]}class Po extends Qe{constructor(e){super(),Ze(this,e,Mo,Do,Je,{})}}function jo(l){let e,t;return e=new no({props:{defaultValue:l[0],isEditable:!l[1],disableLocalStorage:!0,onUpdate:l[2],extensions:[Xn]}}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,[o]){const i={};o&1&&(i.defaultValue=n[0]),o&2&&(i.isEditable=!n[1]),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Ho(l,e,t){let{html:n=""}=e,{readOnly:o=!1}=e,{outputFormat:i="html"}=e;const s=a=>{i==="markdown"?t(0,n=a.storage.markdown.getMarkdown()):t(0,n=a.getHTML())};return l.$$set=a=>{"html"in a&&t(0,n=a.html),"readOnly"in a&&t(1,o=a.readOnly),"outputFormat"in a&&t(3,i=a.outputFormat)},[n,o,s,i]}class Io extends Qe{constructor(e){super(),Ze(this,e,Ho,jo,Je,{html:0,readOnly:1,outputFormat:3})}}function kl(l){let e,t,n,o,i,s,a,c,p,m,d;return{c(){e=f("div"),t=f("h3"),n=f("span"),n.textContent="Knowledge Graph",o=Y(`
          Term: `),i=f("strong"),s=Y(l[2]),a=Y(" | Rank: "),c=f("strong"),p=Y(l[3]),m=b(),d=f("hr"),u(n,"class","tag is-info svelte-329px1"),u(t,"class","subtitle is-6 svelte-329px1"),u(d,"class","svelte-329px1"),u(e,"class","kg-context svelte-329px1")},m(_,h){T(_,e,h),r(e,t),r(t,n),r(t,o),r(t,i),r(i,s),r(t,a),r(t,c),r(c,p),r(e,m),r(e,d)},p(_,h){h&4&&_e(s,_[2]),h&8&&_e(p,_[3])},d(_){_&&C(e)}}}function Fo(l){let e,t,n,o,i,s,a,c;const p=[Wo,Ko],m=[];function d(_,h){return _[5]?0:1}return t=d(l),n=m[t]=p[t](l),{c(){e=f("div"),n.c(),o=b(),i=f("div"),i.innerHTML='<span class="hint-text svelte-329px1">Double-click to edit • Ctrl+E to edit • Ctrl+S to save • Click KG links to explore</span>',u(i,"class","edit-hint svelte-329px1"),u(e,"class","content-viewer svelte-329px1"),u(e,"tabindex","0"),u(e,"role","button"),u(e,"aria-label","Double-click to edit article content")},m(_,h){T(_,e,h),m[t].m(e,null),r(e,o),r(e,i),l[20](e),s=!0,a||(c=[x(e,"dblclick",l[14]),x(e,"keydown",l[15]),x(e,"click",l[13])],a=!0)},p(_,h){let g=t;t=d(_),t===g?m[t].p(_,h):(Le(),H(m[g],1,1,()=>{m[g]=null}),Ne(),n=m[t],n?n.p(_,h):(n=m[t]=p[t](_),n.c()),O(n,1),n.m(e,o))},i(_){s||(O(n),s=!0)},o(_){H(n),s=!1},d(_){_&&C(e),m[t].d(),l[20](null),a=!1,ze(c)}}}function Go(l){let e,t,n,o,i,s,a,c,p,m;function d(h){l[18](h)}let _={outputFormat:l[11]};return l[1].body!==void 0&&(_.html=l[1].body),e=new Io({props:_}),Ee.push(()=>Pe(e,"html",d)),{c(){le(e.$$.fragment),n=b(),o=f("div"),i=f("button"),i.textContent="Save",s=b(),a=f("button"),a.textContent="Cancel",u(i,"class","button is-primary"),u(a,"class","button is-light"),u(o,"class","edit-controls svelte-329px1")},m(h,g){ne(e,h,g),T(h,n,g),T(h,o,g),r(o,i),r(o,s),r(o,a),c=!0,p||(m=[x(i,"click",l[12]),x(a,"click",l[19])],p=!0)},p(h,g){const $={};g&2048&&($.outputFormat=h[11]),!t&&g&2&&(t=!0,$.html=h[1].body,je(()=>t=!1)),e.$set($)},i(h){c||(O(e.$$.fragment,h),c=!0)},o(h){H(e.$$.fragment,h),c=!1},d(h){oe(e,h),h&&C(n),h&&C(o),p=!1,ze(m)}}}function Ko(l){let e,t,n;return t=new Yt({props:{source:l[1].body}}),{c(){e=f("div"),le(t.$$.fragment),u(e,"class","markdown-content svelte-329px1")},m(o,i){T(o,e,i),ne(t,e,null),n=!0},p(o,i){const s={};i&2&&(s.source=o[1].body),t.$set(s)},i(o){n||(O(t.$$.fragment,o),n=!0)},o(o){H(t.$$.fragment,o),n=!1},d(o){o&&C(e),oe(t)}}}function Wo(l){let e,t=l[1].body+"";return{c(){e=f("div"),u(e,"class","prose svelte-329px1")},m(n,o){T(n,e,o),e.innerHTML=t},p(n,o){o&2&&t!==(t=n[1].body+"")&&(e.innerHTML=t)},i:he,o:he,d(n){n&&C(e)}}}function zo(l){let e,t,n,o,i,s=l[1].title+"",a,c,p,m,d,_,h,g=l[2]&&l[3]!==null&&kl(l);const $=[Go,Fo],y=[];function v(k,R){return k[4]?0:1}return p=v(l),m=y[p]=$[p](l),{c(){e=f("div"),t=f("button"),n=b(),g&&g.c(),o=b(),i=f("h2"),a=Y(s),c=b(),m.c(),u(t,"class","delete is-large modal-close-btn svelte-329px1"),u(t,"aria-label","close"),u(i,"class","svelte-329px1"),u(e,"class","box wrapper svelte-329px1")},m(k,R){T(k,e,R),r(e,t),r(e,n),g&&g.m(e,null),r(e,o),r(e,i),r(i,a),r(e,c),y[p].m(e,null),d=!0,_||(h=x(t,"click",l[17]),_=!0)},p(k,R){k[2]&&k[3]!==null?g?g.p(k,R):(g=kl(k),g.c(),g.m(e,o)):g&&(g.d(1),g=null),(!d||R&2)&&s!==(s=k[1].title+"")&&_e(a,s);let E=p;p=v(k),p===E?y[p].p(k,R):(Le(),H(y[E],1,1,()=>{y[E]=null}),Ne(),m=y[p],m?m.p(k,R):(m=y[p]=$[p](k),m.c()),O(m,1),m.m(e,null))},i(k){d||(O(m),d=!0)},o(k){H(m),d=!1},d(k){k&&C(e),g&&g.d(),y[p].d(),_=!1,h()}}}function $l(l){let e,t,n;function o(s){l[23](s)}let i={$$slots:{default:[Jo]},$$scope:{ctx:l}};return l[7]!==void 0&&(i.active=l[7]),e=new ll({props:i}),Ee.push(()=>Pe(e,"active",o)),{c(){le(e.$$.fragment)},m(s,a){ne(e,s,a),n=!0},p(s,a){const c={};a&536872832&&(c.$$scope={dirty:a,ctx:s}),!t&&a&128&&(t=!0,c.active=s[7],je(()=>t=!1)),e.$set(c)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){oe(e,s)}}}function wl(l){let e,t,n,o,i,s,a,c,p,m,d;return{c(){e=f("div"),t=f("h3"),n=f("span"),n.textContent="Knowledge Graph",o=Y(`
            Term: `),i=f("strong"),s=Y(l[9]),a=Y(" | Rank: "),c=f("strong"),p=Y(l[10]),m=b(),d=f("hr"),u(n,"class","tag is-info svelte-329px1"),u(t,"class","subtitle is-6 svelte-329px1"),u(d,"class","svelte-329px1"),u(e,"class","kg-context svelte-329px1")},m(_,h){T(_,e,h),r(e,t),r(t,n),r(t,o),r(t,i),r(i,s),r(t,a),r(t,c),r(c,p),r(e,m),r(e,d)},p(_,h){h&512&&_e(s,_[9]),h&1024&&_e(p,_[10])},d(_){_&&C(e)}}}function qo(l){let e,t,n;return t=new Yt({props:{source:l[8].body}}),{c(){e=f("div"),le(t.$$.fragment),u(e,"class","markdown-content svelte-329px1")},m(o,i){T(o,e,i),ne(t,e,null),n=!0},p(o,i){const s={};i&256&&(s.source=o[8].body),t.$set(s)},i(o){n||(O(t.$$.fragment,o),n=!0)},o(o){H(t.$$.fragment,o),n=!1},d(o){o&&C(e),oe(t)}}}function Bo(l){let e,t=l[8].body+"";return{c(){e=f("div"),u(e,"class","prose svelte-329px1")},m(n,o){T(n,e,o),e.innerHTML=t},p(n,o){o&256&&t!==(t=n[8].body+"")&&(e.innerHTML=t)},i:he,o:he,d(n){n&&C(e)}}}function Jo(l){let e,t,n,o,i,s=l[8].title+"",a,c,p,m,d,_,h,g,$,y,v,k=l[9]&&l[10]!==null&&wl(l);const R=[Bo,qo],E=[];function G(F,w){return w&256&&(m=null),m==null&&(m=!!(F[8].body&&(/<html/i.test(F[8].body)||/<body/i.test(F[8].body)||/<head/i.test(F[8].body)))),m?0:1}return d=G(l,-1),_=E[d]=R[d](l),{c(){e=f("div"),t=f("button"),n=b(),k&&k.c(),o=b(),i=f("h2"),a=Y(s),c=b(),p=f("div"),_.c(),h=b(),g=f("div"),g.innerHTML='<span class="hint-text svelte-329px1">Knowledge Graph document • Click KG links to explore further</span>',u(t,"class","delete is-large modal-close-btn svelte-329px1"),u(t,"aria-label","close"),u(i,"class","svelte-329px1"),u(g,"class","edit-hint svelte-329px1"),u(p,"class","content-viewer svelte-329px1"),u(p,"tabindex","0"),u(p,"role","button"),u(p,"aria-label","KG document content - click KG links to explore further"),u(e,"class","box wrapper svelte-329px1")},m(F,w){T(F,e,w),r(e,t),r(e,n),k&&k.m(e,null),r(e,o),r(e,i),r(i,a),r(e,c),r(e,p),E[d].m(p,null),r(p,h),r(p,g),$=!0,y||(v=[x(t,"click",l[22]),x(p,"click",l[13])],y=!0)},p(F,w){F[9]&&F[10]!==null?k?k.p(F,w):(k=wl(F),k.c(),k.m(e,o)):k&&(k.d(1),k=null),(!$||w&256)&&s!==(s=F[8].title+"")&&_e(a,s);let L=d;d=G(F,w),d===L?E[d].p(F,w):(Le(),H(E[L],1,1,()=>{E[L]=null}),Ne(),_=E[d],_?_.p(F,w):(_=E[d]=R[d](F),_.c()),O(_,1),_.m(p,h))},i(F){$||(O(_),$=!0)},o(F){H(_),$=!1},d(F){F&&C(e),k&&k.d(),E[d].d(),y=!1,ze(v)}}}function Vo(l){let e,t,n,o,i;function s(p){l[21](p)}let a={$$slots:{default:[zo]},$$scope:{ctx:l}};l[0]!==void 0&&(a.active=l[0]),e=new ll({props:a}),Ee.push(()=>Pe(e,"active",s));let c=l[8]&&$l(l);return{c(){le(e.$$.fragment),n=b(),c&&c.c(),o=it()},m(p,m){ne(e,p,m),T(p,n,m),c&&c.m(p,m),T(p,o,m),i=!0},p(p,[m]){const d={};m&536873087&&(d.$$scope={dirty:m,ctx:p}),!t&&m&1&&(t=!0,d.active=p[0],je(()=>t=!1)),e.$set(d),p[8]?c?(c.p(p,m),m&256&&O(c,1)):(c=$l(p),c.c(),O(c,1),c.m(o.parentNode,o)):c&&(Le(),H(c,1,1,()=>{c=null}),Ne())},i(p){i||(O(e.$$.fragment,p),O(c),i=!0)},o(p){H(e.$$.fragment,p),H(c),i=!1},d(p){oe(e,p),p&&C(n),c&&c.d(p),p&&C(o)}}}function Yo(l,e,t){let n,o,i,s;ke(l,Be,A=>t(25,i=A)),ke(l,gt,A=>t(26,s=A));let{active:a=!1}=e,{item:c}=e,{initialEdit:p=!1}=e,{kgTerm:m=null}=e,{kgRank:d=null}=e,_=!1,h,g=!1,$=null,y=null,v=null;async function k(){if(i)try{const A=await Me("get_document",{documentId:c.id});A!=null&&A.document&&t(1,c=A.document)}catch(A){console.error("Failed to load document",A)}}async function R(){if(!i){t(4,_=!1);return}try{await Me("create_document",{document:c}),t(4,_=!1)}catch(A){console.error("Failed to save document",A)}}async function E(A){var j,N,P,q,K;t(9,y=A),console.log("🔍 KG Link Click Debug Info:"),console.log("  Term clicked:",A),console.log("  Current role:",s),console.log("  Is Tauri mode:",i);try{if(i){console.log("  Making Tauri invoke call..."),console.log("  Tauri command: find_documents_for_kg_term"),console.log("  Tauri params:",{roleName:s,term:A});const B=await Me("find_documents_for_kg_term",{roleName:s,term:A});console.log("  📥 Tauri response received:"),console.log("    Status:",B.status),console.log("    Results count:",((j=B.results)==null?void 0:j.length)||0),console.log("    Total:",B.total||0),console.log("    Full response:",JSON.stringify(B,null,2)),B.status==="success"&&B.results&&B.results.length>0?(t(8,$=B.results[0]),t(10,v=$.rank||0),console.log("  ✅ Found KG document:"),console.log("    Title:",$.title),console.log("    Rank:",v),console.log("    Body length:",((N=$.body)==null?void 0:N.length)||0,"characters"),t(7,g=!0)):(console.warn(`  ⚠️  No KG documents found for term: "${A}" in role: "${s}"`),console.warn("    This could indicate:"),console.warn("    1. Knowledge graph not built for this role"),console.warn("    2. Term not found in knowledge graph"),console.warn("    3. Role not configured with TerraphimGraph relevance function"),console.warn("    Suggestion: Check server logs for KG building status"))}else{console.log("  Making HTTP fetch call...");const B=lt.ServerURL,Q=encodeURIComponent(s),U=encodeURIComponent(A),z=`${B}/roles/${Q}/kg_search?term=${U}`;console.log("  📤 HTTP Request details:"),console.log("    Base URL:",B),console.log("    Role (encoded):",Q),console.log("    Term (encoded):",U),console.log("    Full URL:",z);const X=await fetch(z);if(console.log("  📥 HTTP Response received:"),console.log("    Status code:",X.status),console.log("    Status text:",X.statusText),console.log("    Headers:",Object.fromEntries(X.headers.entries())),!X.ok)throw new Error(`HTTP error! Status: ${X.status} - ${X.statusText}`);const ue=await X.json();console.log("  📄 Response data:"),console.log("    Status:",ue.status),console.log("    Results count:",((P=ue.results)==null?void 0:P.length)||0),console.log("    Total:",ue.total||0),console.log("    Full response:",JSON.stringify(ue,null,2)),ue.status==="success"&&ue.results&&ue.results.length>0?(t(8,$=ue.results[0]),t(10,v=$.rank||0),console.log("  ✅ Found KG document:"),console.log("    Title:",$.title),console.log("    Rank:",v),console.log("    Body length:",((q=$.body)==null?void 0:q.length)||0,"characters"),t(7,g=!0)):(console.warn(`  ⚠️  No KG documents found for term: "${A}" in role: "${s}"`),console.warn("    This could indicate:"),console.warn("    1. Server not configured with Terraphim Engineer role"),console.warn("    2. Knowledge graph not built on server"),console.warn("    3. Term not found in knowledge graph"),console.warn("    Suggestion: Check server logs at startup for KG building status"),console.warn("    API URL tested:",z))}}catch(B){console.error("❌ Error fetching KG document:"),console.error("  Error type:",B.constructor.name),console.error("  Error message:",B.message||B),console.error("  Request details:",{term:A,role:s,isTauri:i,timestamp:new Date().toISOString()}),!i&&((K=B.message)!=null&&K.includes("Failed to fetch"))&&(console.error("  💡 Network error suggestions:"),console.error("    1. Check if server is running on expected port"),console.error("    2. Check CORS configuration"),console.error("    3. Verify server URL in CONFIG.ServerURL"))}finally{}}function G(A){const j=A.target;if(j.tagName==="A"){const N=j.getAttribute("href");if(N&&N.startsWith("kg:")){A.preventDefault();const P=N.substring(3);E(P)}}}function F(){t(4,_=!0)}function w(A){A.type!=="dblclick"&&((A.ctrlKey||A.metaKey)&&A.key==="e"&&(A.preventDefault(),t(4,_=!0)),_&&(A.ctrlKey||A.metaKey)&&A.key==="s"&&(A.preventDefault(),R()),A.key==="Escape"&&(A.preventDefault(),_?t(4,_=!1):t(0,a=!1)))}const L=()=>t(0,a=!1);function I(A){l.$$.not_equal(c.body,A)&&(c.body=A,t(1,c))}const J=()=>t(4,_=!1);function V(A){Ee[A?"unshift":"push"](()=>{h=A,t(6,h)})}function M(A){a=A,t(0,a)}const S=()=>t(7,g=!1);function Z(A){g=A,t(7,g)}return l.$$set=A=>{"active"in A&&t(0,a=A.active),"item"in A&&t(1,c=A.item),"initialEdit"in A&&t(16,p=A.initialEdit),"kgTerm"in A&&t(2,m=A.kgTerm),"kgRank"in A&&t(3,d=A.kgRank)},l.$$.update=()=>{l.$$.dirty&65537&&a&&p&&t(4,_=!0),l.$$.dirty&19&&a&&c&&!_&&k(),l.$$.dirty&2&&t(5,n=c!=null&&c.body?/<html/i.test(c.body)||/<body/i.test(c.body)||/<head/i.test(c.body)||/^\s*<(!DOCTYPE|html|head|body|div|p|span)/i.test(c.body.trim()):!1),l.$$.dirty&32&&t(11,o=n?"html":"markdown")},[a,c,m,d,_,n,h,g,$,y,v,o,R,G,F,w,p,L,I,J,V,M,S,Z]}class ol extends Qe{constructor(e){super(),Ze(this,e,Yo,Vo,Je,{active:0,item:1,initialEdit:16,kgTerm:2,kgRank:3})}}function yl(l,e,t){const n=l.slice();return n[33]=e[t],n}function Sl(l,e,t){const n=l.slice();return n[36]=e[t],n}function Cl(l,e,t){const n=l.slice();return n[39]=e[t],n}function Tl(l){let e,t;return e=new yn({props:{type:"is-success",$$slots:{default:[Qo]},$$scope:{ctx:l}}}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Qo(l){let e,t,n;return{c(){e=f("p"),e.innerHTML="<strong>Success!</strong> Article saved to atomic server successfully.",t=b(),n=f("p"),n.textContent="The modal will close automatically..."},m(o,i){T(o,e,i),T(o,t,i),T(o,n,i)},p:he,d(o){o&&C(e),o&&C(t),o&&C(n)}}}function Rl(l){let e,t;return e=new yn({props:{type:"is-danger",$$slots:{default:[Zo]},$$scope:{ctx:l}}}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,o){const i={};o[0]&8|o[1]&2048&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Zo(l){let e,t,n,o;return{c(){e=f("p"),t=f("strong"),t.textContent="Error:",n=b(),o=Y(l[3])},m(i,s){T(i,e,s),r(e,t),r(e,n),r(e,o)},p(i,s){s[0]&8&&_e(o,i[3])},d(i){i&&C(e)}}}function Ll(l){var Z,A,j,N;let e,t,n,o,i,s=(((Z=l[1])==null?void 0:Z.title)||"Untitled")+"",a,c,p,m,d,_,h=(((A=l[1])==null?void 0:A.rank)||0)+"",g,$,y,v,k,R,E,G,F,w,L=((j=l[1])==null?void 0:j.description)&&Nl(l),I=((N=l[1])==null?void 0:N.tags)&&Al(l);function J(P,q){return P[10].length>0?xo:Xo}let V=J(l),M=V(l),S=l[10].length>0&&Ul(l);return{c(){e=f("div"),t=f("label"),t.textContent="Document to Save",n=b(),o=f("div"),i=f("h5"),a=Y(s),c=b(),L&&L.c(),p=b(),m=f("div"),d=f("span"),_=Y("Rank: "),g=Y(h),$=b(),I&&I.c(),y=b(),v=f("div"),k=f("label"),k.textContent="Atomic Server",R=b(),E=f("div"),M.c(),G=b(),S&&S.c(),F=it(),u(t,"class","label"),u(i,"class","title is-6"),u(d,"class","tag is-info svelte-48g63o"),u(m,"class","tags svelte-48g63o"),u(o,"class","box document-preview svelte-48g63o"),u(e,"class","field"),u(k,"class","label"),u(k,"for","atomic-server-select"),u(E,"class","control"),u(v,"class","field")},m(P,q){T(P,e,q),r(e,t),r(e,n),r(e,o),r(o,i),r(i,a),r(o,c),L&&L.m(o,null),r(o,p),r(o,m),r(m,d),r(d,_),r(d,g),r(m,$),I&&I.m(m,null),T(P,y,q),T(P,v,q),r(v,k),r(v,R),r(v,E),M.m(E,null),T(P,G,q),S&&S.m(P,q),T(P,F,q),w=!0},p(P,q){var K,B,Q,U;(!w||q[0]&2)&&s!==(s=(((K=P[1])==null?void 0:K.title)||"Untitled")+"")&&_e(a,s),(B=P[1])!=null&&B.description?L?L.p(P,q):(L=Nl(P),L.c(),L.m(o,p)):L&&(L.d(1),L=null),(!w||q[0]&2)&&h!==(h=(((Q=P[1])==null?void 0:Q.rank)||0)+"")&&_e(g,h),(U=P[1])!=null&&U.tags?I?I.p(P,q):(I=Al(P),I.c(),I.m(m,null)):I&&(I.d(1),I=null),V===(V=J(P))&&M?M.p(P,q):(M.d(1),M=V(P),M&&(M.c(),M.m(E,null))),P[10].length>0?S?(S.p(P,q),q[0]&1024&&O(S,1)):(S=Ul(P),S.c(),O(S,1),S.m(F.parentNode,F)):S&&(Le(),H(S,1,1,()=>{S=null}),Ne())},i(P){w||(O(S),w=!0)},o(P){H(S),w=!1},d(P){P&&C(e),L&&L.d(),I&&I.d(),P&&C(y),P&&C(v),M.d(),P&&C(G),S&&S.d(P),P&&C(F)}}}function Nl(l){let e,t=l[1].description+"",n;return{c(){e=f("p"),n=Y(t),u(e,"class","content")},m(o,i){T(o,e,i),r(e,n)},p(o,i){i[0]&2&&t!==(t=o[1].description+"")&&_e(n,t)},d(o){o&&C(e)}}}function Al(l){let e,t=l[1].tags,n=[];for(let o=0;o<t.length;o+=1)n[o]=El(Cl(l,t,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=it()},m(o,i){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(o,i);T(o,e,i)},p(o,i){if(i[0]&2){t=o[1].tags;let s;for(s=0;s<t.length;s+=1){const a=Cl(o,t,s);n[s]?n[s].p(a,i):(n[s]=El(a),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(o){Xe(n,o),o&&C(e)}}}function El(l){let e,t=l[39]+"",n;return{c(){e=f("span"),n=Y(t),u(e,"class","tag svelte-48g63o")},m(o,i){T(o,e,i),r(e,n)},p(o,i){i[0]&2&&t!==(t=o[39]+"")&&_e(n,t)},d(o){o&&C(e)}}}function Xo(l){let e,t,n,o,i,s,a,c,p;return{c(){e=f("div"),t=f("p"),t.innerHTML="<strong>No atomic servers available</strong>",n=b(),o=f("p"),i=Y('Your current role "'),s=Y(l[12]),a=Y(`" doesn't have any writable atomic server configurations.`),c=b(),p=f("p"),p.textContent="Please configure an atomic server haystack in your role settings.",u(e,"class","notification is-warning")},m(m,d){T(m,e,d),r(e,t),r(e,n),r(e,o),r(o,i),r(o,s),r(o,a),r(e,c),r(e,p)},p(m,d){d[0]&4096&&_e(s,m[12])},d(m){m&&C(e)}}}function xo(l){let e,t,n,o,i,s,a=l[10],c=[];for(let p=0;p<a.length;p+=1)c[p]=Ol(Sl(l,a,p));return{c(){e=f("div"),t=f("select");for(let p=0;p<c.length;p+=1)c[p].c();n=b(),o=f("p"),o.textContent=`Select the atomic server from your current role configuration.
              🔐 = Authenticated, ⚠️ = Anonymous access`,u(t,"id","atomic-server-select"),t.disabled=l[2],l[11]===void 0&&ot(()=>l[18].call(t)),u(e,"class","select is-fullwidth"),u(o,"class","help svelte-48g63o")},m(p,m){T(p,e,m),r(e,t);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(t,null);De(t,l[11],!0),T(p,n,m),T(p,o,m),i||(s=x(t,"change",l[18]),i=!0)},p(p,m){if(m[0]&1024){a=p[10];let d;for(d=0;d<a.length;d+=1){const _=Sl(p,a,d);c[d]?c[d].p(_,m):(c[d]=Ol(_),c[d].c(),c[d].m(t,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}m[0]&4&&(t.disabled=p[2]),m[0]&3072&&De(t,p[11])},d(p){p&&C(e),Xe(c,p),p&&C(n),p&&C(o),i=!1,s()}}}function es(l){let e;return{c(){e=f("span"),e.textContent="⚠️ No Auth",u(e,"class","has-text-warning")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function ts(l){let e;return{c(){e=f("span"),e.textContent="🔐",u(e,"class","has-text-success")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Ol(l){let e,t=l[36].location+"",n,o,i,s;function a(m,d){return m[36].atomic_server_secret?ts:es}let c=a(l),p=c(l);return{c(){e=f("option"),n=Y(t),o=b(),p.c(),i=b(),e.__value=s=l[36].location,e.value=e.__value},m(m,d){T(m,e,d),r(e,n),r(e,o),p.m(e,null),r(e,i)},p(m,d){d[0]&1024&&t!==(t=m[36].location+"")&&_e(n,t),c!==(c=a(m))&&(p.d(1),p=c(m),p&&(p.c(),p.m(e,i))),d[0]&1024&&s!==(s=m[36].location)&&(e.__value=s,e.value=e.__value)},d(m){m&&C(e),p.d()}}}function Ul(l){var ht,Ie;let e,t,n,o,i,s,a,c,p,m,d,_,h,g,$,y,v,k,R,E,G,F,w,L,I,J,V,M,S,Z,A,j,N,P,q,K,B,Q,U,z,X,ue,ce,ve=(l[8]||"Untitled")+"",Ke,Oe,$e,fe,He,Ae=(((Ie=(ht=l[1])==null?void 0:ht.body)==null?void 0:Ie.length)||0)+"",D,te,ie,me,ae,se,Te=l[14]()+"",be,Se,ge,Re,xe,we=l[15]()+"",ye,W,re,et,at;function Ve(ee){l[19](ee)}let ut={id:"article-title",placeholder:"Enter article title",disabled:l[2],required:!0};l[8]!==void 0&&(ut.value=l[8]),i=new St({props:ut}),Ee.push(()=>Pe(i,"value",Ve));const Ut=[ns,ls],qe=[];function Dt(ee,pe){return ee[7]?1:0}return J=Dt(l),V=qe[J]=Ut[J](l),A=new Bt({props:{type:"is-primary",loading:l[2],disabled:l[2]||!l[8].trim()||!l[11],$$slots:{default:[os]},$$scope:{ctx:l}}}),A.$on("click",l[16]),P=new Bt({props:{type:"is-light",disabled:l[2],$$slots:{default:[ss]},$$scope:{ctx:l}}}),P.$on("click",l[17]),re=zn(l[22][0]),{c(){e=f("div"),t=f("label"),t.textContent="Article Title",n=b(),o=f("div"),le(i.$$.fragment),a=b(),c=f("div"),p=f("label"),p.textContent="Description",m=b(),d=f("div"),_=f("textarea"),h=b(),g=f("div"),$=f("label"),$.textContent="Parent Collection",y=b(),v=f("div"),k=f("label"),R=f("input"),E=Y(`
              Use predefined collection`),G=b(),F=f("label"),w=f("input"),L=Y(`
              Custom parent URL/path`),I=b(),V.c(),M=b(),S=f("div"),Z=f("div"),le(A.$$.fragment),j=b(),N=f("div"),le(P.$$.fragment),q=b(),K=f("div"),B=f("div"),Q=f("p"),Q.innerHTML="<strong>What will be saved:</strong>",U=b(),z=f("ul"),X=f("li"),ue=f("strong"),ue.textContent="Title:",ce=b(),Ke=Y(ve),Oe=b(),$e=f("li"),fe=f("strong"),fe.textContent="Body:",He=Y(" Original document content ("),D=Y(Ae),te=Y(" characters)"),ie=b(),me=f("li"),ae=f("strong"),ae.textContent="Parent:",se=b(),be=Y(Te),Se=b(),ge=f("li"),Re=f("strong"),Re.textContent="Subject URL:",xe=b(),ye=Y(we),u(t,"class","label"),u(t,"for","article-title"),u(o,"class","control"),u(e,"class","field"),u(p,"class","label"),u(p,"for","article-description"),u(_,"id","article-description"),u(_,"class","textarea"),u(_,"placeholder","Brief description of the article"),_.disabled=l[2],u(_,"rows","3"),u(d,"class","control"),u(c,"class","field"),u($,"class","label"),u(R,"type","radio"),R.__value=!1,R.value=R.__value,R.disabled=l[2],u(k,"class","radio svelte-48g63o"),u(w,"type","radio"),w.__value=!0,w.value=w.__value,w.disabled=l[2],u(F,"class","radio svelte-48g63o"),u(v,"class","control"),u(g,"class","field"),u(Z,"class","control"),u(N,"class","control"),u(S,"class","field is-grouped"),u(X,"class","svelte-48g63o"),u($e,"class","svelte-48g63o"),u(me,"class","svelte-48g63o"),u(ge,"class","svelte-48g63o"),u(z,"class","svelte-48g63o"),u(B,"class","notification is-info is-light svelte-48g63o"),u(K,"class","field"),re.p(R,w)},m(ee,pe){T(ee,e,pe),r(e,t),r(e,n),r(e,o),ne(i,o,null),T(ee,a,pe),T(ee,c,pe),r(c,p),r(c,m),r(c,d),r(d,_),Ce(_,l[9]),T(ee,h,pe),T(ee,g,pe),r(g,$),r(g,y),r(g,v),r(v,k),r(k,R),R.checked=R.__value===l[7],r(k,E),r(v,G),r(v,F),r(F,w),w.checked=w.__value===l[7],r(F,L),T(ee,I,pe),qe[J].m(ee,pe),T(ee,M,pe),T(ee,S,pe),r(S,Z),ne(A,Z,null),r(S,j),r(S,N),ne(P,N,null),T(ee,q,pe),T(ee,K,pe),r(K,B),r(B,Q),r(B,U),r(B,z),r(z,X),r(X,ue),r(X,ce),r(X,Ke),r(z,Oe),r(z,$e),r($e,fe),r($e,He),r($e,D),r($e,te),r(z,ie),r(z,me),r(me,ae),r(me,se),r(me,be),r(z,Se),r(z,ge),r(ge,Re),r(ge,xe),r(ge,ye),W=!0,et||(at=[x(_,"input",l[20]),x(R,"change",l[21]),x(w,"change",l[23])],et=!0)},p(ee,pe){var vt,Mt;const pt={};pe[0]&4&&(pt.disabled=ee[2]),!s&&pe[0]&256&&(s=!0,pt.value=ee[8],je(()=>s=!1)),i.$set(pt),(!W||pe[0]&4)&&(_.disabled=ee[2]),pe[0]&512&&Ce(_,ee[9]),(!W||pe[0]&4)&&(R.disabled=ee[2]),pe[0]&128&&(R.checked=R.__value===ee[7]),(!W||pe[0]&4)&&(w.disabled=ee[2]),pe[0]&128&&(w.checked=w.__value===ee[7]);let st=J;J=Dt(ee),J===st?qe[J].p(ee,pe):(Le(),H(qe[st],1,1,()=>{qe[st]=null}),Ne(),V=qe[J],V?V.p(ee,pe):(V=qe[J]=Ut[J](ee),V.c()),O(V,1),V.m(M.parentNode,M));const tt={};pe[0]&4&&(tt.loading=ee[2]),pe[0]&2308&&(tt.disabled=ee[2]||!ee[8].trim()||!ee[11]),pe[1]&2048&&(tt.$$scope={dirty:pe,ctx:ee}),A.$set(tt);const Ct={};pe[0]&4&&(Ct.disabled=ee[2]),pe[1]&2048&&(Ct.$$scope={dirty:pe,ctx:ee}),P.$set(Ct),(!W||pe[0]&256)&&ve!==(ve=(ee[8]||"Untitled")+"")&&_e(Ke,ve),(!W||pe[0]&2)&&Ae!==(Ae=(((Mt=(vt=ee[1])==null?void 0:vt.body)==null?void 0:Mt.length)||0)+"")&&_e(D,Ae)},i(ee){W||(O(i.$$.fragment,ee),O(V),O(A.$$.fragment,ee),O(P.$$.fragment,ee),W=!0)},o(ee){H(i.$$.fragment,ee),H(V),H(A.$$.fragment,ee),H(P.$$.fragment,ee),W=!1},d(ee){ee&&C(e),oe(i),ee&&C(a),ee&&C(c),ee&&C(h),ee&&C(g),ee&&C(I),qe[J].d(ee),ee&&C(M),ee&&C(S),oe(A),oe(P),ee&&C(q),ee&&C(K),re.r(),et=!1,ze(at)}}}function ls(l){let e,t,n,o,i,s,a;function c(m){l[25](m)}let p={placeholder:"e.g., my-collection or http://server/custom-parent",disabled:l[2]};return l[6]!==void 0&&(p.value=l[6]),n=new St({props:p}),Ee.push(()=>Pe(n,"value",c)),{c(){e=f("div"),t=f("div"),le(n.$$.fragment),i=b(),s=f("p"),s.textContent=`Enter a collection name (e.g., "my-articles") or full URL. 
              If the collection doesn't exist, it will be created.`,u(t,"class","control"),u(s,"class","help svelte-48g63o"),u(e,"class","field")},m(m,d){T(m,e,d),r(e,t),ne(n,t,null),r(e,i),r(e,s),a=!0},p(m,d){const _={};d[0]&4&&(_.disabled=m[2]),!o&&d[0]&64&&(o=!0,_.value=m[6],je(()=>o=!1)),n.$set(_)},i(m){a||(O(n.$$.fragment,m),a=!0)},o(m){H(n.$$.fragment,m),a=!1},d(m){m&&C(e),oe(n)}}}function ns(l){let e,t,n,o,i,s,a=l[13],c=[];for(let p=0;p<a.length;p+=1)c[p]=Dl(yl(l,a,p));return{c(){e=f("div"),t=f("div"),n=f("div"),o=f("select");for(let p=0;p<c.length;p+=1)c[p].c();o.disabled=l[2],l[5]===void 0&&ot(()=>l[24].call(o)),u(n,"class","select is-fullwidth"),u(t,"class","control"),u(e,"class","field")},m(p,m){T(p,e,m),r(e,t),r(t,n),r(n,o);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(o,null);De(o,l[5],!0),i||(s=x(o,"change",l[24]),i=!0)},p(p,m){if(m[0]&8192){a=p[13];let d;for(d=0;d<a.length;d+=1){const _=yl(p,a,d);c[d]?c[d].p(_,m):(c[d]=Dl(_),c[d].c(),c[d].m(o,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}m[0]&4&&(o.disabled=p[2]),m[0]&8224&&De(o,p[5])},i:he,o:he,d(p){p&&C(e),Xe(c,p),i=!1,s()}}}function Dl(l){let e,t=l[33].label+"",n;return{c(){e=f("option"),n=Y(t),e.__value=l[33].value,e.value=e.__value},m(o,i){T(o,e,i),r(e,n)},p:he,d(o){o&&C(e)}}}function os(l){let e,t,n;return{c(){e=f("span"),e.innerHTML='<i class="fas fa-cloud-upload-alt"></i>',t=b(),n=f("span"),n.textContent="Save to Atomic Server",u(e,"class","icon")},m(o,i){T(o,e,i),T(o,t,i),T(o,n,i)},p:he,d(o){o&&C(e),o&&C(t),o&&C(n)}}}function ss(l){let e;return{c(){e=Y("Cancel")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function rs(l){let e,t,n,o,i,s,a,c,p,m,d,_,h,g=l[4]&&Tl(l),$=l[3]&&Rl(l),y=!l[4]&&Ll(l);return{c(){e=f("div"),t=f("div"),n=f("div"),n.innerHTML=`<div class="level-item"><h3 class="title is-4"><span class="icon"><i class="fas fa-save"></i></span>
            Save to Atomic Server</h3></div>`,o=b(),i=f("div"),s=f("div"),a=f("button"),c=b(),g&&g.c(),p=b(),$&&$.c(),m=b(),y&&y.c(),u(n,"class","level-left"),u(a,"class","delete is-large"),a.disabled=l[2],u(a,"aria-label","close"),u(s,"class","level-item"),u(i,"class","level-right"),u(t,"class","level svelte-48g63o"),u(e,"class","box")},m(v,k){T(v,e,k),r(e,t),r(t,n),r(t,o),r(t,i),r(i,s),r(s,a),r(e,c),g&&g.m(e,null),r(e,p),$&&$.m(e,null),r(e,m),y&&y.m(e,null),d=!0,_||(h=x(a,"click",l[17]),_=!0)},p(v,k){(!d||k[0]&4)&&(a.disabled=v[2]),v[4]?g?k[0]&16&&O(g,1):(g=Tl(v),g.c(),O(g,1),g.m(e,p)):g&&(Le(),H(g,1,1,()=>{g=null}),Ne()),v[3]?$?($.p(v,k),k[0]&8&&O($,1)):($=Rl(v),$.c(),O($,1),$.m(e,m)):$&&(Le(),H($,1,1,()=>{$=null}),Ne()),v[4]?y&&(Le(),H(y,1,1,()=>{y=null}),Ne()):y?(y.p(v,k),k[0]&16&&O(y,1)):(y=Ll(v),y.c(),O(y,1),y.m(e,null))},i(v){d||(O(g),O($),O(y),d=!0)},o(v){H(g),H($),H(y),d=!1},d(v){v&&C(e),g&&g.d(),$&&$.d(),y&&y.d(),_=!1,h()}}}function is(l){let e,t,n;function o(s){l[26](s)}let i={$$slots:{default:[rs]},$$scope:{ctx:l}};return l[0]!==void 0&&(i.active=l[0]),e=new ll({props:i}),Ee.push(()=>Pe(e,"active",o)),e.$on("close",l[17]),{c(){le(e.$$.fragment)},m(s,a){ne(e,s,a),n=!0},p(s,a){const c={};a[0]&8190|a[1]&2048&&(c.$$scope={dirty:a,ctx:s}),!t&&a[0]&1&&(t=!0,c.active=s[0],je(()=>t=!1)),e.$set(c)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){oe(e,s)}}}function as(l,e,t){let n,o,i;ke(l,Be,K=>t(27,n=K)),ke(l,Ye,K=>t(28,o=K)),ke(l,gt,K=>t(12,i=K));let{active:s=!1}=e,{document:a}=e,c=!1,p=null,m=!1,d="",_="",h=!1,g="",$="",y=[],v="";const k=[{label:"Root (Server Root)",value:""},{label:"Articles Collection",value:"articles"},{label:"Documents Collection",value:"documents"},{label:"Knowledge Base",value:"knowledge-base"},{label:"Research",value:"research"},{label:"Projects",value:"projects"}];function R(){t(2,c=!1),t(3,p=null),t(4,m=!1),t(5,d=""),t(6,_=""),t(7,h=!1),t(8,g=(a==null?void 0:a.title)||""),t(9,$=(a==null?void 0:a.description)||`Article saved from Terraphim search: ${a==null?void 0:a.title}`),t(10,y=[]),t(11,v="")}function E(){var U;const K=i,B=o;if(!(B!=null&&B.roles)||!K){console.warn("No role configuration found");return}let Q=null;try{for(const[z,X]of Object.entries(B.roles)){const ue=X,ce=typeof ue.name=="object"?ue.name.original:String(ue.name);if(z===K||ce===K){Q=ue;break}}}catch(z){console.warn("Error checking role configuration:",z);return}if(!Q){console.warn(`Role "${K}" not found in configuration`);return}t(10,y=((U=Q.haystacks)==null?void 0:U.filter(z=>z.service==="Atomic"&&z.location&&!z.read_only))||[]),y.length>0&&t(11,v=y[0].location),console.log("Loaded atomic servers:",y)}function G(){const K=y.find(B=>B.location===v);return K==null?void 0:K.atomic_server_secret}function F(){const K=v.replace(/\/$/,"");if(h&&_.trim()){const B=_.trim();return B.startsWith("http://")||B.startsWith("https://")?B:`${K}/${B.replace(/^\//,"")}`}else return d?`${K}/${d}`:K}function w(){return g.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,50)}function L(){const K=v.replace(/\/$/,""),B=w(),Q=Date.now();return`${K}/${B}-${Q}`}async function I(){if(!v||!g.trim()){t(3,p="Please select an atomic server and provide a title");return}t(2,c=!0),t(3,p=null);try{const K=L(),B=F(),Q=G();console.log("🔄 Saving article to atomic server:",{subject:K,parent:B,server:v,hasSecret:!!Q});const U={subject:K,title:g.trim(),description:$.trim(),body:a.body,parent:B,shortname:w(),original_id:a.id,original_url:a.url,original_rank:a.rank,tags:a.tags||[]};if(n)await Me("save_article_to_atomic",{article:U,serverUrl:v,atomicSecret:Q});else{const z=await fetch(`${lt.ServerURL}/atomic/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({article:U,server_url:v,atomic_secret:Q})});if(!z.ok){const X=await z.json().catch(()=>({error:z.statusText}));throw new Error(X.error||`HTTP ${z.status}: ${z.statusText}`)}}t(4,m=!0),console.log("✅ Article saved successfully to atomic server"),setTimeout(()=>{t(0,s=!1)},2e3)}catch(K){console.error("❌ Failed to save article to atomic server:",K),t(3,p=K.message||"Failed to save article to atomic server")}finally{t(2,c=!1)}}function J(){c||t(0,s=!1)}const V=[[]];function M(){v=wt(this),t(11,v),t(10,y)}function S(K){g=K,t(8,g)}function Z(){$=this.value,t(9,$)}function A(){h=this.__value,t(7,h)}function j(){h=this.__value,t(7,h)}function N(){d=wt(this),t(5,d),t(13,k)}function P(K){_=K,t(6,_)}function q(K){s=K,t(0,s)}return l.$$set=K=>{"active"in K&&t(0,s=K.active),"document"in K&&t(1,a=K.document)},l.$$.update=()=>{l.$$.dirty[0]&3&&s&&a&&(R(),E())},[s,a,c,p,m,d,_,h,g,$,y,v,i,k,F,L,I,J,M,S,Z,A,V,j,N,P,q]}class us extends Qe{constructor(e){super(),Ze(this,e,as,is,Je,{active:0,document:1},null,[-1,-1])}}async function Nn(l){return Me("tauri",l)}async function cs(l,e){return Nn({__tauriModule:"Event",message:{cmd:"unlisten",event:l,eventId:e}})}async function fs(l,e,t){return Nn({__tauriModule:"Event",message:{cmd:"listen",event:l,windowLabel:e,handler:el(t)}}).then(n=>async()=>cs(l,n))}var Ml;(function(l){l.WINDOW_RESIZED="tauri://resize",l.WINDOW_MOVED="tauri://move",l.WINDOW_CLOSE_REQUESTED="tauri://close-requested",l.WINDOW_CREATED="tauri://window-created",l.WINDOW_DESTROYED="tauri://destroyed",l.WINDOW_FOCUS="tauri://focus",l.WINDOW_BLUR="tauri://blur",l.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",l.WINDOW_THEME_CHANGED="tauri://theme-changed",l.WINDOW_FILE_DROP="tauri://file-drop",l.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",l.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",l.MENU="tauri://menu",l.CHECK_UPDATE="tauri://update",l.UPDATE_AVAILABLE="tauri://update-available",l.INSTALL_UPDATE="tauri://update-install",l.STATUS_UPDATE="tauri://update-status",l.DOWNLOAD_PROGRESS="tauri://update-download-progress"})(Ml||(Ml={}));async function ds(l,e){return fs(l,null,e)}function Pl(l,e,t){const n=l.slice();return n[9]=e[t],n}function jl(l){let e,t=l[9].name+"",n,o;return{c(){e=f("option"),n=Y(t),e.__value=o=l[9].name,e.value=e.__value},m(i,s){T(i,e,s),r(e,n)},p(i,s){s&1&&t!==(t=i[9].name+"")&&_e(n,t),s&1&&o!==(o=i[9].name)&&(e.__value=o,e.value=e.__value)},d(i){i&&C(e)}}}function ps(l){let e,t,n,o,i,s,a=l[0],c=[];for(let p=0;p<a.length;p+=1)c[p]=jl(Pl(l,a,p));return{c(){e=f("div"),t=f("div"),n=f("div"),o=f("select");for(let p=0;p<c.length;p+=1)c[p].c();u(n,"class","select"),u(t,"class","control"),u(e,"class","field is-grouped is-grouped-right")},m(p,m){T(p,e,m),r(e,t),r(t,n),r(n,o);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(o,null);De(o,l[1]),i||(s=x(o,"change",l[2]),i=!0)},p(p,[m]){if(m&1){a=p[0];let d;for(d=0;d<a.length;d+=1){const _=Pl(p,a,d);c[d]?c[d].p(_,m):(c[d]=jl(_),c[d].c(),c[d].m(o,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}m&3&&De(o,p[1])},i:he,o:he,d(p){p&&C(e),Xe(c,p),i=!1,s()}}}function _s(l,e,t){let n,o,i,s;ke(l,Ye,_=>t(5,n=_)),ke(l,Be,_=>t(6,o=_)),ke(l,hl,_=>t(0,i=_)),ke(l,gt,_=>t(1,s=_));let a="";async function c(){try{Be.set(window.__TAURI__!==void 0),o?(console.log("Loading config from Tauri"),Me("get_config").then(_=>{console.log("get_config response",_),_&&_.status==="success"&&p(_.config)}).catch(_=>console.error("Error fetching config in Tauri:",_))):(console.log("Loading config from server"),a=`${lt.ServerURL}/config/`,fetch(a).then(_=>_.json()).then(_=>{console.log("Config received",_),_&&_.status==="success"&&p(_.config)}).catch(_=>console.error("Error fetching config:",_)))}catch(_){console.error("Unhandled error in loadConfig:",_)}}function p(_){var y;console.log("Updating stores from config:",_);const h={default_role:_.selected_role,..._};Ye.set(h);const g=Object.entries(_.roles).map(([v,k])=>({name:v,...k}));hl.set(g),gt.set(_.selected_role);const $=_.roles[_.selected_role];if(console.log("Selected role settings:",$),$){const v=$.theme||"spacelab";console.log("Setting theme to:",v),jt.set(v),(y=$.kg)!=null&&y.publish?o&&Me("publish_thesaurus",{roleName:_.selected_role}).then(k=>{console.log("publish_thesaurus response",k),xt.set(k),Pt.set(!0)}):Pt.set(!1)}else console.warn("No role settings found for:",_.selected_role),jt.set("spacelab")}typeof window<"u"&&window.__TAURI__&&ds("role_changed",_=>{console.log("Role changed event received from backend:",_.payload),p(_.payload)});async function m(){await c()}m(),console.log("Using Terraphim Server URL:",lt.ServerURL);function d(_){var v;const g=_.target.value;console.log("Role change requested:",g),gt.set(g);const $=i.find(k=>k.name===g);if(!$){console.error(`No role settings found for role: ${g}.`);return}const y=$.theme||"spacelab";jt.set(y),console.log(`Theme changed to ${y}`),Ye.update(k=>(k.selected_role=g,k)),o?(Me("select_role",{roleName:g}).catch(k=>console.error("Error selecting role:",k)),(v=$.kg)!=null&&v.publish?(console.log("Publishing thesaurus for role",g),Me("publish_thesaurus",{roleName:g}).then(k=>{xt.set(k),Pt.set(!0)})):Pt.set(!1)):fetch(`${lt.ServerURL}/config/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).catch(k=>console.error("Error updating config on server:",k))}return[i,s,d,c]}class qt extends Qe{constructor(e){super(),Ze(this,e,_s,ps,Je,{loadConfig:3})}get loadConfig(){return this.$$.ctx[3]}}function Hl(l,e,t){const n=l.slice();return n[29]=e[t],n}function Il(l){let e,t;return e=new Sn({props:{$$slots:{default:[gs]},$$scope:{ctx:l}}}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,o){const i={};o[0]&129|o[1]&2&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function ms(l){let e=l[29]+"",t;return{c(){t=Y(e)},m(n,o){T(n,t,o)},p(n,o){o[0]&1&&e!==(e=n[29]+"")&&_e(t,e)},d(n){n&&C(t)}}}function Fl(l){let e,t,n,o,i,s;t=new Cn({props:{rounded:!0,$$slots:{default:[ms]},$$scope:{ctx:l}}});function a(){return l[18](l[29])}return{c(){e=f("button"),le(t.$$.fragment),n=b(),u(e,"class","tag-button svelte-2smypa"),e.disabled=l[7],u(e,"title","Click to view knowledge graph document")},m(c,p){T(c,e,p),ne(t,e,null),r(e,n),o=!0,i||(s=x(e,"click",a),i=!0)},p(c,p){l=c;const m={};p[0]&1|p[1]&2&&(m.$$scope={dirty:p,ctx:l}),t.$set(m),(!o||p[0]&128)&&(e.disabled=l[7])},i(c){o||(O(t.$$.fragment,c),o=!0)},o(c){H(t.$$.fragment,c),o=!1},d(c){c&&C(e),oe(t),i=!1,s()}}}function gs(l){let e,t,n=l[0].tags,o=[];for(let s=0;s<n.length;s+=1)o[s]=Fl(Hl(l,n,s));const i=s=>H(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=it()},m(s,a){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,a);T(s,e,a),t=!0},p(s,a){if(a[0]&65665){n=s[0].tags;let c;for(c=0;c<n.length;c+=1){const p=Hl(s,n,c);o[c]?(o[c].p(p,a),O(o[c],1)):(o[c]=Fl(p),o[c].c(),O(o[c],1),o[c].m(e.parentNode,e))}for(Le(),c=n.length;c<o.length;c+=1)i(c);Ne()}},i(s){if(!t){for(let a=0;a<n.length;a+=1)O(o[a]);t=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)H(o[a]);t=!1},d(s){Xe(o,s),s&&C(e)}}}function hs(l){let e,t=l[0].rank+"",n;return{c(){e=Y("Rank "),n=Y(t)},m(o,i){T(o,e,i),T(o,n,i)},p(o,i){i[0]&1&&t!==(t=o[0].rank+"")&&_e(n,t)},d(o){o&&C(e),o&&C(n)}}}function vs(l){let e,t;return e=new Cn({props:{rounded:!0,$$slots:{default:[hs]},$$scope:{ctx:l}}}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,o){const i={};o[0]&1|o[1]&2&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function bs(l){let e;return{c(){e=f("small"),e.textContent="No description available",u(e,"class","no-description svelte-2smypa")},m(t,n){T(t,e,n)},p:he,i:he,o:he,d(t){t&&C(e)}}}function ks(l){let e,t;return e=new Yt({props:{source:l[0].description}}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,o){const i={};o[0]&1&&(i.source=n[0].description),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Gl(l){let e,t,n,o,i,s;return{c(){e=f("button"),t=f("span"),t.innerHTML='<i class="fas fa-magic" aria-hidden="true"></i>',n=b(),o=f("span"),o.textContent="AI Summary",u(t,"class","icon is-small"),u(e,"class","button is-small is-info is-outlined ai-summary-button svelte-2smypa"),e.disabled=l[9],u(e,"title","Generate AI-powered summary using OpenRouter")},m(a,c){T(a,e,c),r(e,t),r(e,n),r(e,o),i||(s=x(e,"click",l[17]),i=!0)},p(a,c){c[0]&512&&(e.disabled=a[9])},d(a){a&&C(e),i=!1,s()}}}function Kl(l){let e;return{c(){e=f("div"),e.innerHTML=`<span class="icon"><i class="fas fa-spinner fa-spin" aria-hidden="true"></i></span> 
                <small>Generating AI summary...</small>`,u(e,"class","ai-summary-loading svelte-2smypa")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Wl(l){let e,t,n,o,i,s,a,c,p,m;return{c(){e=f("div"),t=f("span"),t.innerHTML='<i class="fas fa-exclamation-triangle" aria-hidden="true"></i>',n=b(),o=f("small"),i=Y("Summary error: "),s=Y(l[10]),a=b(),c=f("button"),c.textContent="Retry",u(t,"class","icon has-text-danger"),u(o,"class","has-text-danger"),u(c,"class","button is-small is-text svelte-2smypa"),u(c,"title","Retry generating summary"),u(e,"class","ai-summary-error svelte-2smypa")},m(d,_){T(d,e,_),r(e,t),r(e,n),r(e,o),r(o,i),r(o,s),r(e,a),r(e,c),p||(m=x(c,"click",l[19]),p=!0)},p(d,_){_[0]&1024&&_e(s,d[10])},d(d){d&&C(e),p=!1,m()}}}function zl(l){let e,t,n,o,i,s,a,c,p,m,d,_,h,g,$,y,v,k,R,E;function G(L,I){return L[12]?ws:$s}let F=G(l),w=F(l);return m=new Yt({props:{source:l[8]}}),{c(){e=f("div"),t=f("div"),n=f("small"),o=f("span"),o.innerHTML='<i class="fas fa-robot" aria-hidden="true"></i>',i=Y(`
                    AI Summary
                    `),w.c(),s=b(),a=f("button"),a.innerHTML='<span class="icon is-small"><i class="fas fa-times" aria-hidden="true"></i></span>',c=b(),p=f("div"),le(m.$$.fragment),d=b(),_=f("div"),h=f("button"),g=f("span"),g.innerHTML='<i class="fas fa-redo" aria-hidden="true"></i>',$=b(),y=f("span"),y.textContent="Regenerate",u(o,"class","icon is-small"),u(n,"class","ai-summary-label svelte-2smypa"),u(a,"class","button is-small is-text svelte-2smypa"),u(a,"title","Hide AI summary"),u(t,"class","ai-summary-header svelte-2smypa"),u(p,"class","ai-summary-content svelte-2smypa"),u(g,"class","icon is-small"),u(h,"class","button is-small is-text svelte-2smypa"),h.disabled=l[9],u(h,"title","Regenerate summary"),u(_,"class","ai-summary-actions svelte-2smypa"),u(e,"class","ai-summary svelte-2smypa")},m(L,I){T(L,e,I),r(e,t),r(t,n),r(n,o),r(n,i),w.m(n,null),r(t,s),r(t,a),r(e,c),r(e,p),ne(m,p,null),r(e,d),r(e,_),r(_,h),r(h,g),r(h,$),r(h,y),k=!0,R||(E=[x(a,"click",l[20]),x(h,"click",l[21])],R=!0)},p(L,I){F!==(F=G(L))&&(w.d(1),w=F(L),w&&(w.c(),w.m(n,null)));const J={};I[0]&256&&(J.source=L[8]),m.$set(J),(!k||I[0]&512)&&(h.disabled=L[9])},i(L){k||(O(m.$$.fragment,L),ot(()=>{k&&(v||(v=Et(e,Ot,{},!0)),v.run(1))}),k=!0)},o(L){H(m.$$.fragment,L),v||(v=Et(e,Ot,{},!1)),v.run(0),k=!1},d(L){L&&C(e),w.d(),oe(m),L&&v&&v.end(),R=!1,ze(E)}}}function $s(l){let e;return{c(){e=f("span"),e.textContent="fresh",u(e,"class","tag is-small is-success")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function ws(l){let e;return{c(){e=f("span"),e.textContent="cached",u(e,"class","tag is-small is-light")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function ql(l){let e,t,n;return{c(){e=f("a"),t=f("span"),t.innerHTML='<i class="fas fa-link"></i>',u(t,"class","icon is-medium"),u(e,"href",n=l[0].url),u(e,"target","_blank"),u(e,"class","level-item"),u(e,"aria-label","URL")},m(o,i){T(o,e,i),r(e,t)},p(o,i){i[0]&1&&n!==(n=o[0].url)&&u(e,"href",n)},d(o){o&&C(e)}}}function Bl(l){let e,t,n;return{c(){e=f("button"),e.innerHTML='<span class="icon is-medium has-text-primary"><i class="fas fa-cloud-upload-alt" aria-hidden="true"></i></span>',u(e,"type","button"),u(e,"class","level-item button is-ghost svelte-2smypa"),u(e,"aria-label","Save to Atomic Server"),u(e,"title","Save article to Atomic Server")},m(o,i){T(o,e,i),t||(n=x(e,"click",l[15]),t=!0)},p:he,d(o){o&&C(e),t=!1,n()}}}function Jl(l){let e,t,n;function o(s){l[23](s)}let i={item:l[4],kgTerm:l[5],kgRank:l[6]};return l[2]!==void 0&&(i.active=l[2]),e=new ol({props:i}),Ee.push(()=>Pe(e,"active",o)),{c(){le(e.$$.fragment)},m(s,a){ne(e,s,a),n=!0},p(s,a){const c={};a[0]&16&&(c.item=s[4]),a[0]&32&&(c.kgTerm=s[5]),a[0]&64&&(c.kgRank=s[6]),!t&&a[0]&4&&(t=!0,c.active=s[2],je(()=>t=!1)),e.$set(c)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){oe(e,s)}}}function Vl(l){let e,t,n;function o(s){l[24](s)}let i={document:l[0]};return l[3]!==void 0&&(i.active=l[3]),e=new us({props:i}),Ee.push(()=>Pe(e,"active",o)),{c(){le(e.$$.fragment)},m(s,a){ne(e,s,a),n=!0},p(s,a){const c={};a[0]&1&&(c.document=s[0]),!t&&a[0]&8&&(t=!0,c.active=s[3],je(()=>t=!1)),e.$set(c)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){oe(e,s)}}}function ys(l){let e,t,n,o,i,s,a,c,p,m,d,_,h=l[0].title+"",g,$,y,v,k,R,E,G,F,w,L,I,J,V,M,S,Z,A,j,N,P,q,K,B,Q,U,z,X,ue,ce,ve,Ke,Oe,$e,fe,He,Ae,D=l[0].tags&&Il(l);c=new Sn({props:{$$slots:{default:[vs]},$$scope:{ctx:l}}});const te=[ks,bs],ie=[];function me(W,re){return W[0].description?0:1}E=me(l),G=ie[E]=te[E](l);let ae=!l[11]&&!l[9]&&!l[10]&&Gl(l),se=l[9]&&Kl(),Te=l[10]&&Wl(l),be=l[11]&&l[8]&&zl(l),Se="url"in l[0]&&ql(l),ge=l[13]&&Bl(l);function Re(W){l[22](W)}let xe={item:l[0]};l[1]!==void 0&&(xe.active=l[1]),ce=new ol({props:xe}),Ee.push(()=>Pe(ce,"active",Re));let we=l[4]&&Jl(l),ye=l[13]&&Vl(l);return{c(){e=f("div"),t=f("article"),n=f("div"),o=f("div"),i=f("div"),D&&D.c(),s=b(),a=f("div"),le(c.$$.fragment),p=b(),m=f("div"),d=f("button"),_=f("h2"),g=Y(h),$=b(),y=f("div"),v=f("small"),v.textContent="Description:",k=b(),R=f("div"),G.c(),F=b(),w=f("div"),ae&&ae.c(),L=b(),se&&se.c(),I=b(),Te&&Te.c(),J=b(),be&&be.c(),V=b(),M=f("br"),Z=b(),A=f("div"),j=f("nav"),N=f("div"),Se&&Se.c(),P=b(),q=f("button"),q.innerHTML='<span class="icon is-medium"><i class="fas fa-plus" aria-hidden="true"></i></span>',K=b(),ge&&ge.c(),B=b(),Q=f("a"),U=f("span"),U.innerHTML='<i class="fas fa-code" aria-hidden="true"></i>',ue=b(),le(ce.$$.fragment),Ke=b(),we&&we.c(),Oe=b(),ye&&ye.c(),$e=it(),u(i,"class","level-right"),u(a,"class","level-right"),u(_,"class","title svelte-2smypa"),u(d,"class","svelte-2smypa"),u(v,"class","description-label svelte-2smypa"),u(R,"class","description-content svelte-2smypa"),u(y,"class","description svelte-2smypa"),u(w,"class","ai-summary-section svelte-2smypa"),u(o,"class","content"),u(q,"type","button"),u(q,"class","level-item button is-ghost svelte-2smypa"),u(q,"aria-label","Add to favorites"),u(U,"class","icon is-medium"),u(Q,"href",z=`vscode://${encodeURIComponent(l[0].title)}.md?${encodeURIComponent(l[0].body)}`),u(Q,"class","level-item"),u(Q,"aria-label","Open in VSCode"),u(N,"class","level-right"),u(j,"class","level is-mobile"),u(A,"class","level-right"),u(n,"class","media-content"),u(t,"class","media"),u(e,"class","box")},m(W,re){T(W,e,re),r(e,t),r(t,n),r(n,o),r(o,i),D&&D.m(i,null),r(o,s),r(o,a),ne(c,a,null),r(o,p),r(o,m),r(m,d),r(d,_),r(_,g),r(m,$),r(m,y),r(y,v),r(y,k),r(y,R),ie[E].m(R,null),r(m,F),r(m,w),ae&&ae.m(w,null),r(w,L),se&&se.m(w,null),r(w,I),Te&&Te.m(w,null),r(w,J),be&&be.m(w,null),r(m,V),r(m,M),r(n,Z),r(n,A),r(A,j),r(j,N),Se&&Se.m(N,null),r(N,P),r(N,q),r(N,K),ge&&ge.m(N,null),r(N,B),r(N,Q),r(Q,U),T(W,ue,re),ne(ce,W,re),T(W,Ke,re),we&&we.m(W,re),T(W,Oe,re),ye&&ye.m(W,re),T(W,$e,re),fe=!0,He||(Ae=[x(d,"click",l[14]),x(q,"click",Ss)],He=!0)},p(W,re){W[0].tags?D?(D.p(W,re),re[0]&1&&O(D,1)):(D=Il(W),D.c(),O(D,1),D.m(i,null)):D&&(Le(),H(D,1,1,()=>{D=null}),Ne());const et={};re[0]&1|re[1]&2&&(et.$$scope={dirty:re,ctx:W}),c.$set(et),(!fe||re[0]&1)&&h!==(h=W[0].title+"")&&_e(g,h);let at=E;E=me(W),E===at?ie[E].p(W,re):(Le(),H(ie[at],1,1,()=>{ie[at]=null}),Ne(),G=ie[E],G?G.p(W,re):(G=ie[E]=te[E](W),G.c()),O(G,1),G.m(R,null)),!W[11]&&!W[9]&&!W[10]?ae?ae.p(W,re):(ae=Gl(W),ae.c(),ae.m(w,L)):ae&&(ae.d(1),ae=null),W[9]?se||(se=Kl(),se.c(),se.m(w,I)):se&&(se.d(1),se=null),W[10]?Te?Te.p(W,re):(Te=Wl(W),Te.c(),Te.m(w,J)):Te&&(Te.d(1),Te=null),W[11]&&W[8]?be?(be.p(W,re),re[0]&2304&&O(be,1)):(be=zl(W),be.c(),O(be,1),be.m(w,null)):be&&(Le(),H(be,1,1,()=>{be=null}),Ne()),"url"in W[0]?Se?Se.p(W,re):(Se=ql(W),Se.c(),Se.m(N,P)):Se&&(Se.d(1),Se=null),W[13]?ge?ge.p(W,re):(ge=Bl(W),ge.c(),ge.m(N,B)):ge&&(ge.d(1),ge=null),(!fe||re[0]&1&&z!==(z=`vscode://${encodeURIComponent(W[0].title)}.md?${encodeURIComponent(W[0].body)}`))&&u(Q,"href",z);const Ve={};re[0]&1&&(Ve.item=W[0]),!ve&&re[0]&2&&(ve=!0,Ve.active=W[1],je(()=>ve=!1)),ce.$set(Ve),W[4]?we?(we.p(W,re),re[0]&16&&O(we,1)):(we=Jl(W),we.c(),O(we,1),we.m(Oe.parentNode,Oe)):we&&(Le(),H(we,1,1,()=>{we=null}),Ne()),W[13]?ye?(ye.p(W,re),re[0]&8192&&O(ye,1)):(ye=Vl(W),ye.c(),O(ye,1),ye.m($e.parentNode,$e)):ye&&(Le(),H(ye,1,1,()=>{ye=null}),Ne())},i(W){fe||(O(D),O(c.$$.fragment,W),O(G),O(be),ot(()=>{fe&&(S||(S=Et(m,Ot,{},!0)),S.run(1))}),ot(()=>{fe&&(X||(X=Et(j,Ot,{},!0)),X.run(1))}),O(ce.$$.fragment,W),O(we),O(ye),fe=!0)},o(W){H(D),H(c.$$.fragment,W),H(G),H(be),S||(S=Et(m,Ot,{},!1)),S.run(0),X||(X=Et(j,Ot,{},!1)),X.run(0),H(ce.$$.fragment,W),H(we),H(ye),fe=!1},d(W){W&&C(e),D&&D.d(),oe(c),ie[E].d(),ae&&ae.d(),se&&se.d(),Te&&Te.d(),be&&be.d(),W&&S&&S.end(),Se&&Se.d(),ge&&ge.d(),W&&X&&X.end(),W&&C(ue),oe(ce,W),W&&C(Ke),we&&we.d(W),W&&C(Oe),ye&&ye.d(W),W&&C($e),He=!1,ze(Ae)}}}const Ss=()=>{};function Cs(l,e,t){let n,o,i,s;ke(l,gt,j=>t(25,o=j)),ke(l,Be,j=>t(26,i=j)),ke(l,Ye,j=>t(27,s=j));let{document:a}=e,c=!1,p=!1,m=!1,d=null,_=null,h=null,g=!1,$=null,y=!1,v=null,k=!1,R=!1;function E(){var K;const j=o,N=s;if(!(N!=null&&N.roles)||!j)return!1;let P=null;try{for(const[B,Q]of Object.entries(N.roles)){const U=Q,z=typeof U.name=="object"?U.name.original:String(U.name);if(B===j||z===j){P=U;break}}}catch(B){return console.warn("Error checking role configuration:",B),!1}return P?(((K=P.haystacks)==null?void 0:K.filter(B=>B.service==="Atomic"&&B.location&&!B.read_only))||[]).length>0:!1}const G=()=>{t(1,c=!0)},F=()=>{console.log("🔄 Opening atomic save modal for document:",a.title),t(3,m=!0)};async function w(j){var N,P,q,K,B;t(7,g=!0),t(5,_=j),console.log("🔍 KG Search Debug Info:"),console.log("  Tag clicked:",j),console.log("  Current role:",o),console.log("  Is Tauri mode:",i);try{if(i){console.log("  Making Tauri invoke call..."),console.log("  Tauri command: find_documents_for_kg_term"),console.log("  Tauri params:",{roleName:o,term:j});const Q=await Me("find_documents_for_kg_term",{roleName:o,term:j});console.log("  📥 Tauri response received:"),console.log("    Status:",Q.status),console.log("    Results count:",((N=Q.results)==null?void 0:N.length)||0),console.log("    Total:",Q.total||0),console.log("    Full response:",JSON.stringify(Q,null,2)),Q.status==="success"&&Q.results&&Q.results.length>0?(t(4,d=Q.results[0]),t(6,h=d.rank||0),console.log("  ✅ Found KG document:"),console.log("    Title:",d.title),console.log("    Rank:",h),console.log("    Body length:",((P=d.body)==null?void 0:P.length)||0,"characters"),t(2,p=!0)):(console.warn(`  ⚠️  No KG documents found for term: "${j}" in role: "${o}"`),console.warn("    This could indicate:"),console.warn("    1. Knowledge graph not built for this role"),console.warn("    2. Term not found in knowledge graph"),console.warn("    3. Role not configured with TerraphimGraph relevance function"),console.warn("    Suggestion: Check server logs for KG building status"))}else{console.log("  Making HTTP fetch call...");const Q=lt.ServerURL,U=encodeURIComponent(o),z=encodeURIComponent(j),X=`${Q}/roles/${U}/kg_search?term=${z}`;console.log("  📤 HTTP Request details:"),console.log("    Base URL:",Q),console.log("    Role (encoded):",U),console.log("    Term (encoded):",z),console.log("    Full URL:",X);const ue=await fetch(X);if(console.log("  📥 HTTP Response received:"),console.log("    Status code:",ue.status),console.log("    Status text:",ue.statusText),console.log("    Headers:",Object.fromEntries(ue.headers.entries())),!ue.ok)throw new Error(`HTTP error! Status: ${ue.status} - ${ue.statusText}`);const ce=await ue.json();console.log("  📄 Response data:"),console.log("    Status:",ce.status),console.log("    Results count:",((q=ce.results)==null?void 0:q.length)||0),console.log("    Total:",ce.total||0),console.log("    Full response:",JSON.stringify(ce,null,2)),ce.status==="success"&&ce.results&&ce.results.length>0?(t(4,d=ce.results[0]),t(6,h=d.rank||0),console.log("  ✅ Found KG document:"),console.log("    Title:",d.title),console.log("    Rank:",h),console.log("    Body length:",((K=d.body)==null?void 0:K.length)||0,"characters"),t(2,p=!0)):(console.warn(`  ⚠️  No KG documents found for term: "${j}" in role: "${o}"`),console.warn("    This could indicate:"),console.warn("    1. Server not configured with Terraphim Engineer role"),console.warn("    2. Knowledge graph not built on server"),console.warn("    3. Term not found in knowledge graph"),console.warn("    Suggestion: Check server logs at startup for KG building status"),console.warn("    API URL tested:",X))}}catch(Q){console.error("❌ Error fetching KG document:"),console.error("  Error type:",Q.constructor.name),console.error("  Error message:",Q.message||Q),console.error("  Request details:",{tag:j,role:o,isTauri:i,timestamp:new Date().toISOString()}),!i&&((B=Q.message)!=null&&B.includes("Failed to fetch"))&&(console.error("  💡 Network error suggestions:"),console.error("    1. Check if server is running on expected port"),console.error("    2. Check CORS configuration"),console.error("    3. Verify server URL in CONFIG.ServerURL"))}finally{t(7,g=!1)}}async function L(){var j;if(!(y||!a.id||!o)){t(9,y=!0),t(10,v=null),console.log("🤖 AI Summary Debug Info:"),console.log("  Document ID:",a.id),console.log("  Current role:",o),console.log("  Is Tauri mode:",i);try{const N={document_id:a.id,role:o,max_length:250,force_regenerate:!1};console.log("  📤 Summarization request:",N);let P;if(i){const B=`${lt.ServerURL}/documents/summarize`;P=await fetch(B,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})}else{const B=`${lt.ServerURL}/documents/summarize`;P=await fetch(B,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})}if(console.log("  📥 Summary response received:"),console.log("    Status code:",P.status),console.log("    Status text:",P.statusText),!P.ok)throw new Error(`HTTP error! Status: ${P.status} - ${P.statusText}`);const q=await P.json();console.log("  📄 Summary response data:",q),q.status==="Success"&&q.summary?(t(8,$=q.summary),t(12,R=q.from_cache||!1),t(11,k=!0),console.log("  ✅ Summary generated successfully"),console.log("    Summary length:",$.length,"characters"),console.log("    From cache:",R),console.log("    Model used:",q.model_used)):(t(10,v=q.error||"Failed to generate summary"),console.error("  ❌ Summary generation failed:",v))}catch(N){console.error("❌ Error generating summary:"),console.error("  Error type:",N.constructor.name),console.error("  Error message:",N.message||N),console.error("  Request details:",{document_id:a.id,role:o,isTauri:i,timestamp:new Date().toISOString()}),t(10,v=N.message||"Network error occurred"),(j=N.message)!=null&&j.includes("Failed to fetch")&&(console.error("  💡 Network error suggestions:"),console.error("    1. Check if server is running on expected port"),console.error("    2. Verify OpenRouter is enabled for this role"),console.error("    3. Check OPENROUTER_KEY environment variable"),console.error("    4. Verify server URL in CONFIG.ServerURL"))}finally{t(9,y=!1)}}}qt[o]!==void 0&&(console.log("Have attribute",qt[o]),qt[o].hasOwnProperty("enableLogseq")?console.log("enable logseq True"):console.log("Didn't make it"));const I=j=>w(j),J=()=>{t(10,v=null),L()},V=()=>t(11,k=!1),M=()=>{L()};function S(j){c=j,t(1,c)}function Z(j){p=j,t(2,p)}function A(j){m=j,t(3,m)}return l.$$set=j=>{"document"in j&&t(0,a=j.document)},t(13,n=E()),[a,c,p,m,d,_,h,g,$,y,v,k,R,n,G,F,w,L,I,J,V,M,S,Z,A]}class Ts extends Qe{constructor(e){super(),Ze(this,e,Cs,ys,Je,{document:0},null,[-1,-1])}}const Rs="/assets/terraphim_gray.png";function Yl(l,e,t){const n=l.slice();return n[20]=e[t],n}function Ql(l,e,t){const n=l.slice();return n[23]=e[t],n[25]=t,n}function Zl(l){let e,t=l[2],n=[];for(let o=0;o<t.length;o+=1)n[o]=Xl(Ql(l,t,o));return{c(){e=f("ul");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","suggestions svelte-13t09eu")},m(o,i){T(o,e,i);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(o,i){if(i&524){t=o[2];let s;for(s=0;s<t.length;s+=1){const a=Ql(o,t,s);n[s]?n[s].p(a,i):(n[s]=Xl(a),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(o){o&&C(e),Xe(n,o)}}}function Xl(l){let e,t=l[23]+"",n,o,i,s,a,c;function p(){return l[13](l[23])}function m(...d){return l[14](l[23],...d)}return{c(){e=f("li"),n=Y(t),o=b(),u(e,"tabindex","0"),u(e,"role","option"),u(e,"aria-selected",i=l[25]===l[3]),u(e,"aria-label",s=`Apply suggestion: ${l[23]}`),u(e,"class","svelte-13t09eu"),Jt(e,"active",l[25]===l[3])},m(d,_){T(d,e,_),r(e,n),r(e,o),a||(c=[x(e,"click",p),x(e,"keydown",m)],a=!0)},p(d,_){l=d,_&4&&t!==(t=l[23]+"")&&_e(n,t),_&8&&i!==(i=l[25]===l[3])&&u(e,"aria-selected",i),_&4&&s!==(s=`Apply suggestion: ${l[23]}`)&&u(e,"aria-label",s),_&8&&Jt(e,"active",l[25]===l[3])},d(d){d&&C(e),a=!1,ze(c)}}}function Ls(l){let e,t,n,o,i;function s(p){l[12](p)}let a={type:"search",placeholder:l[6]?`Search over Knowledge graph for ${l[4]}`:"Search",icon:"search",expanded:!0,autofocus:!0};l[5]!==void 0&&(a.value=l[5]),t=new St({props:a}),Ee.push(()=>Pe(t,"value",s)),t.$on("click",l[10]),t.$on("submit",l[10]),t.$on("keydown",l[8]),t.$on("input",l[7]);let c=l[2].length>0&&Zl(l);return{c(){e=f("div"),le(t.$$.fragment),o=b(),c&&c.c(),u(e,"class","input-wrapper svelte-13t09eu")},m(p,m){T(p,e,m),ne(t,e,null),r(e,o),c&&c.m(e,null),i=!0},p(p,m){const d={};m&80&&(d.placeholder=p[6]?`Search over Knowledge graph for ${p[4]}`:"Search"),!n&&m&32&&(n=!0,d.value=p[5],je(()=>n=!1)),t.$set(d),p[2].length>0?c?c.p(p,m):(c=Zl(p),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(p){i||(O(t.$$.fragment,p),i=!0)},o(p){H(t.$$.fragment,p),i=!1},d(p){p&&C(e),oe(t),c&&c.d()}}}function Ns(l){let e,t,n,o,i,s,a,c,p,m;return{c(){e=f("section"),t=f("div"),n=f("img"),i=b(),s=f("p"),s.textContent="I am Terraphim, your personal assistant.",a=b(),c=f("button"),c.innerHTML=`<span class="icon"><i class="fas fa-magic"></i></span> 
        <span>Configuration Wizard</span>`,Jn(n.src,o=Rs)||u(n,"src",o),u(n,"alt","Terraphim Logo"),u(n,"class","svelte-13t09eu"),u(c,"class","button is-primary"),u(c,"data-testid","wizard-start"),u(t,"class","content has-text-grey has-text-centered svelte-13t09eu"),u(e,"class","section")},m(d,_){T(d,e,_),r(e,t),r(t,n),r(t,i),r(t,s),r(t,a),r(t,c),p||(m=x(c,"click",l[15]),p=!0)},p:he,i:he,o:he,d(d){d&&C(e),p=!1,m()}}}function As(l){let e,t,n=l[0],o=[];for(let s=0;s<n.length;s+=1)o[s]=xl(Yl(l,n,s));const i=s=>H(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=it()},m(s,a){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,a);T(s,e,a),t=!0},p(s,a){if(a&1){n=s[0];let c;for(c=0;c<n.length;c+=1){const p=Yl(s,n,c);o[c]?(o[c].p(p,a),O(o[c],1)):(o[c]=xl(p),o[c].c(),O(o[c],1),o[c].m(e.parentNode,e))}for(Le(),c=n.length;c<o.length;c+=1)i(c);Ne()}},i(s){if(!t){for(let a=0;a<n.length;a+=1)O(o[a]);t=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)H(o[a]);t=!1},d(s){Xe(o,s),s&&C(e)}}}function Es(l){let e,t;return{c(){e=f("p"),t=Y(l[1]),u(e,"class","error svelte-13t09eu")},m(n,o){T(n,e,o),r(e,t)},p(n,o){o&2&&_e(t,n[1])},i:he,o:he,d(n){n&&C(e)}}}function xl(l){let e,t;return e=new Ts({props:{document:l[20]}}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},p(n,o){const i={};o&1&&(i.document=n[20]),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Os(l){let e,t,n,o,i,s,a,c,p;t=new mt({props:{$$slots:{default:[Ls]},$$scope:{ctx:l}}});const m=[Es,As,Ns],d=[];function _(h,g){return h[1]?0:h[0].length?1:2}return o=_(l),i=d[o]=m[o](l),{c(){e=f("form"),le(t.$$.fragment),n=b(),i.c(),s=it()},m(h,g){T(h,e,g),ne(t,e,null),T(h,n,g),d[o].m(h,g),T(h,s,g),a=!0,c||(p=x(e,"submit",qn(l[10])),c=!0)},p(h,[g]){const $={};g&67108988&&($.$$scope={dirty:g,ctx:h}),t.$set($);let y=o;o=_(h),o===y?d[o].p(h,g):(Le(),H(d[y],1,1,()=>{d[y]=null}),Ne(),i=d[o],i?i.p(h,g):(i=d[o]=m[o](h),i.c()),O(i,1),i.m(s.parentNode,s))},i(h){a||(O(t.$$.fragment,h),O(i),a=!0)},o(h){H(t.$$.fragment,h),H(i),a=!1},d(h){h&&C(e),oe(t),h&&C(n),d[o].d(h),h&&C(s),c=!1,p()}}}function Us(l,e,t){let n,o,i,s,a,c,p;ke(l,_o,w=>t(17,o=w)),ke(l,gt,w=>t(4,i=w)),ke(l,Xt,w=>t(5,s=w)),ke(l,Be,w=>t(18,a=w)),ke(l,xt,w=>t(11,c=w)),ke(l,Pt,w=>t(6,p=w));let m=[],d=null,_=[],h=-1;function g(w){const L=w.trim().toLowerCase();return L.length===0?[]:n.filter(([J])=>J.toLowerCase().includes(L)).map(([J])=>J).slice(0,5)}function $(w){const L=w.target;if(!L||L.selectionStart==null)return;const I=L.selectionStart,V=s.slice(0,I).split(/\s+/),M=V[V.length-1];t(2,_=g(M)),t(3,h=-1)}function y(w){_.length!==0&&(w.key==="ArrowDown"?(w.preventDefault(),t(3,h=(h+1)%_.length)):w.key==="ArrowUp"?(w.preventDefault(),t(3,h=(h-1+_.length)%_.length)):(w.key==="Enter"||w.key==="Tab")&&h!==-1&&(w.preventDefault(),v(_[h])))}function v(w){var S;const L=document.querySelector('input[type="search"]'),I=(L==null?void 0:L.selectionStart)??0,J=s.slice(0,I),V=s.slice(I),M=J.split(/\s+/);M[M.length-1]=w,Bn(Xt,s=[...M,V].join(" "),s),(S=L==null?void 0:L.setSelectionRange)==null||S.call(L,I+w.length,I+w.length),t(2,_=[]),t(3,h=-1)}async function k(){if(t(1,d=null),a)try{const w=await Me("search",{searchQuery:{search_term:s,skip:0,limit:10,role:i}});w.status==="success"?(t(0,m=w.results),console.log("Response results"),console.log(m)):(t(1,d=`Search failed: ${w.status}`),console.error("Search failed:",w))}catch(w){t(1,d=`Error in Tauri search: ${w}`),console.error("Error in Tauri search:",w)}else{if(!s.trim())return;const w=JSON.stringify({search_term:s,skip:0,limit:10,role:i});try{const L=await fetch(o,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:w}),I=await L.json();if(!L.ok)throw new Error(`HTTP error! Status: ${L.status}`);t(0,m=I.results)}catch(L){console.error("Error fetching data:",L),t(1,d=`Error fetching data: ${L}`)}}}function R(w){s=w,Xt.set(s)}const E=w=>v(w),G=(w,L)=>{(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),v(w))},F=()=>window.location.href="/config/wizard";return l.$$.update=()=>{l.$$.dirty&2048&&(n=Object.entries(c))},[m,d,_,h,i,s,p,$,y,v,k,c,R,E,G,F]}class Ds extends Qe{constructor(e){super(),Ze(this,e,Us,Os,Je,{})}}function en(l,e,t){const n=l.slice();return n[48]=e[t],n[53]=t,n}function tn(l,e,t){const n=l.slice();return n[51]=e[t],n[52]=e,n[53]=t,n}function ln(l,e,t){const n=l.slice();return n[54]=e[t],n[55]=e,n[56]=t,n}function nn(l,e,t){const n=l.slice();return n[57]=e[t][0],n[58]=e[t][1],n[59]=e,n[60]=t,n}function on(l,e,t){const n=l.slice();return n[48]=e[t],n}function sn(l){let e,t,n,o,i;return{c(){e=f("div"),t=f("button"),n=Y(`
      Configuration saved successfully!`),u(t,"class","delete"),u(e,"class","notification is-success"),u(e,"data-testid","wizard-success")},m(s,a){T(s,e,a),r(e,t),r(e,n),o||(i=x(t,"click",l[14]),o=!0)},p:he,d(s){s&&C(e),o=!1,i()}}}function rn(l){let e,t,n,o,i;return{c(){e=f("div"),t=f("button"),n=Y(`
      Failed to save configuration. Please try again.`),u(t,"class","delete"),u(e,"class","notification is-danger"),u(e,"data-testid","wizard-error")},m(s,a){T(s,e,a),r(e,t),r(e,n),o||(i=x(t,"click",l[15]),o=!0)},p:he,d(s){s&&C(e),o=!1,i()}}}function Ms(l){let e,t,n,o,i,s,a,c,p,m=l[2].id+"",d,_,h,g,$,y=l[2].global_shortcut+"",v,k,R,E,G,F=l[2].default_theme+"",w,L,I,J,V,M=l[2].default_role+"",S,Z,A,j,N,P,q=JSON.stringify(l[2],null,2)+"",K,B=l[2].roles,Q=[];for(let U=0;U<B.length;U+=1)Q[U]=an(en(l,B,U));return{c(){e=f("h4"),e.textContent="Review",t=b(),n=f("div"),o=f("h5"),o.textContent="Configuration Summary:",i=b(),s=f("ul"),a=f("li"),c=f("strong"),c.textContent="Configuration ID:",p=b(),d=Y(m),_=b(),h=f("li"),g=f("strong"),g.textContent="Global Shortcut:",$=b(),v=Y(y),k=b(),R=f("li"),E=f("strong"),E.textContent="Default Theme:",G=b(),w=Y(F),L=b(),I=f("li"),J=f("strong"),J.textContent="Default Role:",V=b(),S=Y(M),Z=b(),A=f("h5"),A.textContent="Roles:",j=b();for(let U=0;U<Q.length;U+=1)Q[U].c();N=b(),P=f("pre"),K=Y(q),u(e,"class","title is-5"),u(n,"class","content"),yt(P,"max-height","300px"),yt(P,"overflow","auto")},m(U,z){T(U,e,z),T(U,t,z),T(U,n,z),r(n,o),r(n,i),r(n,s),r(s,a),r(a,c),r(a,p),r(a,d),r(s,_),r(s,h),r(h,g),r(h,$),r(h,v),r(s,k),r(s,R),r(R,E),r(R,G),r(R,w),r(s,L),r(s,I),r(I,J),r(I,V),r(I,S),r(n,Z),r(n,A),r(n,j);for(let X=0;X<Q.length;X+=1)Q[X]&&Q[X].m(n,null);T(U,N,z),T(U,P,z),r(P,K)},p(U,z){if(z[0]&4&&m!==(m=U[2].id+"")&&_e(d,m),z[0]&4&&y!==(y=U[2].global_shortcut+"")&&_e(v,y),z[0]&4&&F!==(F=U[2].default_theme+"")&&_e(w,F),z[0]&4&&M!==(M=U[2].default_role+"")&&_e(S,M),z[0]&5){B=U[2].roles;let X;for(X=0;X<B.length;X+=1){const ue=en(U,B,X);Q[X]?Q[X].p(ue,z):(Q[X]=an(ue),Q[X].c(),Q[X].m(n,null))}for(;X<Q.length;X+=1)Q[X].d(1);Q.length=B.length}z[0]&4&&q!==(q=JSON.stringify(U[2],null,2)+"")&&_e(K,q)},d(U){U&&C(e),U&&C(t),U&&C(n),Xe(Q,U),U&&C(N),U&&C(P)}}}function Ps(l){let e,t,n=[],o=new Map,i,s,a,c,p=l[2].roles;const m=d=>d[51].name;for(let d=0;d<p.length;d+=1){let _=tn(l,p,d),h=m(_);o.set(h,n[d]=_n(h,_))}return{c(){e=f("h4"),e.textContent="Roles",t=b();for(let d=0;d<n.length;d+=1)n[d].c();i=b(),s=f("button"),s.textContent="Add Role",u(e,"class","title is-5"),u(s,"class","button is-link is-light"),u(s,"data-testid","add-role")},m(d,_){T(d,e,_),T(d,t,_);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(d,_);T(d,i,_),T(d,s,_),a||(c=x(s,"click",l[6]),a=!0)},p(d,_){_[0]&8068&&(p=d[2].roles,n=Vn(n,_,m,1,d,p,o,i.parentNode,Yn,_n,i,tn))},d(d){d&&C(e),d&&C(t);for(let _=0;_<n.length;_+=1)n[_].d(d);d&&C(i),d&&C(s),a=!1,c()}}}function js(l){let e,t,n,o,i,s,a,c,p,m,d,_,h,g,$,y,v,k,R,E,G,F,w,L,I,J,V,M,S,Z,A=l[2].roles,j=[];for(let N=0;N<A.length;N+=1)j[N]=mn(on(l,A,N));return{c(){e=f("div"),t=f("label"),t.textContent="Configuration ID",n=b(),o=f("div"),i=f("div"),s=f("select"),a=f("option"),a.textContent="Desktop",c=f("option"),c.textContent="Server",p=f("option"),p.textContent="Embedded",m=b(),d=f("div"),_=f("label"),_.textContent="Global shortcut",h=b(),g=f("div"),$=f("input"),y=b(),v=f("div"),k=f("label"),k.textContent="Default theme",R=b(),E=f("div"),G=f("input"),F=b(),w=f("div"),L=f("label"),L.textContent="Default Role",I=b(),J=f("div"),V=f("div"),M=f("select");for(let N=0;N<j.length;N+=1)j[N].c();u(t,"class","label"),u(t,"for","config-id"),a.__value="Desktop",a.value=a.__value,c.__value="Server",c.value=c.__value,p.__value="Embedded",p.value=p.__value,u(s,"id","config-id"),l[2].id===void 0&&ot(()=>l[16].call(s)),u(i,"class","select"),u(o,"class","control"),u(e,"class","field"),u(_,"class","label"),u(_,"for","global-shortcut"),u($,"class","input"),u($,"id","global-shortcut"),u($,"type","text"),u(g,"class","control"),u(d,"class","field"),u(k,"class","label"),u(k,"for","default-theme"),u(G,"class","input"),u(G,"id","default-theme"),u(G,"type","text"),u(E,"class","control"),u(v,"class","field"),u(L,"class","label"),u(L,"for","default-role"),u(M,"id","default-role"),l[2].default_role===void 0&&ot(()=>l[19].call(M)),u(V,"class","select"),u(J,"class","control"),u(w,"class","field")},m(N,P){T(N,e,P),r(e,t),r(e,n),r(e,o),r(o,i),r(i,s),r(s,a),r(s,c),r(s,p),De(s,l[2].id,!0),T(N,m,P),T(N,d,P),r(d,_),r(d,h),r(d,g),r(g,$),Ce($,l[2].global_shortcut),T(N,y,P),T(N,v,P),r(v,k),r(v,R),r(v,E),r(E,G),Ce(G,l[2].default_theme),T(N,F,P),T(N,w,P),r(w,L),r(w,I),r(w,J),r(J,V),r(V,M);for(let q=0;q<j.length;q+=1)j[q]&&j[q].m(M,null);De(M,l[2].default_role,!0),S||(Z=[x(s,"change",l[16]),x($,"input",l[17]),x(G,"input",l[18]),x(M,"change",l[19])],S=!0)},p(N,P){if(P[0]&4&&De(s,N[2].id),P[0]&4&&$.value!==N[2].global_shortcut&&Ce($,N[2].global_shortcut),P[0]&4&&G.value!==N[2].default_theme&&Ce(G,N[2].default_theme),P[0]&4){A=N[2].roles;let q;for(q=0;q<A.length;q+=1){const K=on(N,A,q);j[q]?j[q].p(K,P):(j[q]=mn(K),j[q].c(),j[q].m(M,null))}for(;q<j.length;q+=1)j[q].d(1);j.length=A.length}P[0]&4&&De(M,N[2].default_role)},d(N){N&&C(e),N&&C(m),N&&C(d),N&&C(y),N&&C(v),N&&C(F),N&&C(w),Xe(j,N),S=!1,ze(Z)}}}function an(l){let e,t,n=l[48].name+"",o,i,s,a,c,p=l[48].shortname+"",m,d,_,h,g,$=l[48].theme+"",y,v,k,R,E,G=l[48].relevance_function+"",F,w,L,I,J,V;return{c(){e=f("div"),t=f("h6"),o=Y(n),i=b(),s=f("p"),a=f("strong"),a.textContent="Shortname:",c=b(),m=Y(p),d=b(),_=f("p"),h=f("strong"),h.textContent="Theme:",g=b(),y=Y($),v=b(),k=f("p"),R=f("strong"),R.textContent="Relevance Function:",E=b(),F=Y(G),w=b(),L=f("button"),L.textContent="Edit Role",I=b(),u(t,"data-testid","review-role-name-"+l[53]),u(L,"class","button is-small"),u(L,"data-testid","edit-role-"+l[53]),u(e,"class","box")},m(M,S){T(M,e,S),r(e,t),r(t,o),r(e,i),r(e,s),r(s,a),r(s,c),r(s,m),r(e,d),r(e,_),r(_,h),r(_,g),r(_,y),r(e,v),r(e,k),r(k,R),r(k,E),r(k,F),r(e,w),r(e,L),r(e,I),J||(V=x(L,"click",l[45]),J=!0)},p(M,S){S[0]&4&&n!==(n=M[48].name+"")&&_e(o,n),S[0]&4&&p!==(p=M[48].shortname+"")&&_e(m,p),S[0]&4&&$!==($=M[48].theme+"")&&_e(y,$),S[0]&4&&G!==(G=M[48].relevance_function+"")&&_e(F,G)},d(M){M&&C(e),J=!1,V()}}}function Hs(l){let e;return{c(){e=Y("Directory Path")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Is(l){let e;return{c(){e=Y("Server URL")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function un(l){let e,t,n,o,i,s,a,c,p,m,d,_;function h(){l[26].call(a,l[53],l[56])}return{c(){e=f("div"),t=f("label"),n=Y("Atomic Server Secret"),i=b(),s=f("div"),a=f("input"),p=b(),m=f("p"),m.textContent="Leave empty for anonymous access",u(t,"class","label"),u(t,"for",o=`haystack-secret-${l[53]}-${l[56]}`),u(a,"class","input"),u(a,"id",c=`haystack-secret-${l[53]}-${l[56]}`),u(a,"type","password"),u(a,"placeholder","Base64 encoded secret (optional)"),u(s,"class","control"),u(m,"class","help"),u(e,"class","field")},m(g,$){T(g,e,$),r(e,t),r(t,n),r(e,i),r(e,s),r(s,a),Ce(a,l[2].roles[l[53]].haystacks[l[56]].atomic_server_secret),r(e,p),r(e,m),d||(_=x(a,"input",h),d=!0)},p(g,$){l=g,$[0]&4&&o!==(o=`haystack-secret-${l[53]}-${l[56]}`)&&u(t,"for",o),$[0]&4&&c!==(c=`haystack-secret-${l[53]}-${l[56]}`)&&u(a,"id",c),$[0]&4&&a.value!==l[2].roles[l[53]].haystacks[l[56]].atomic_server_secret&&Ce(a,l[2].roles[l[53]].haystacks[l[56]].atomic_server_secret)},d(g){g&&C(e),d=!1,_()}}}function cn(l){let e,t,n,o,i,s,a,c,p,m,d,_,h,g,$,y,v,k=Object.entries(l[2].roles[l[53]].haystacks[l[56]].extra_parameters||{}),R=[];for(let w=0;w<k.length;w+=1)R[w]=fn(nn(l,k,w));function E(){return l[30](l[53],l[56])}function G(){return l[31](l[53],l[56])}function F(){return l[32](l[53],l[56])}return{c(){e=f("div"),t=f("label"),t.textContent="Extra Parameters (for filtering)",n=b();for(let w=0;w<R.length;w+=1)R[w].c();o=b(),i=f("div"),s=f("div"),a=f("button"),a.textContent="+ Tag Filter",c=b(),p=f("div"),m=f("button"),m.textContent="+ Max Results",d=b(),_=f("div"),h=f("button"),h.textContent="+ Custom Parameter",g=b(),$=f("p"),$.innerHTML=`Common parameters: <code>tag</code> (e.g., &quot;#rust&quot;), <code>glob</code> (e.g., &quot;*.md&quot;), 
                  <code>max_count</code> (e.g., &quot;10&quot;), <code>context</code> (e.g., &quot;5&quot;)`,u(t,"class","label"),u(a,"class","button is-small is-link is-light"),u(s,"class","control"),u(m,"class","button is-small is-link is-light"),u(p,"class","control"),u(h,"class","button is-small is-link is-light"),u(_,"class","control"),u(i,"class","field is-grouped"),u($,"class","help"),u(e,"class","field")},m(w,L){T(w,e,L),r(e,t),r(e,n);for(let I=0;I<R.length;I+=1)R[I]&&R[I].m(e,null);r(e,o),r(e,i),r(i,s),r(s,a),r(i,c),r(i,p),r(p,m),r(i,d),r(i,_),r(_,h),r(e,g),r(e,$),y||(v=[x(a,"click",E),x(m,"click",G),x(h,"click",F)],y=!0)},p(w,L){if(l=w,L[0]&6148){k=Object.entries(l[2].roles[l[53]].haystacks[l[56]].extra_parameters||{});let I;for(I=0;I<k.length;I+=1){const J=nn(l,k,I);R[I]?R[I].p(J,L):(R[I]=fn(J),R[I].c(),R[I].m(e,o))}for(;I<R.length;I+=1)R[I].d(1);R.length=k.length}},d(w){w&&C(e),Xe(R,w),y=!1,ze(v)}}}function fn(l){let e,t,n,o,i,s,a,c,p,m,d,_,h;function g(...v){return l[27](l[53],l[56],l[57],...v)}function $(){l[28].call(a,l[53],l[56],l[57])}function y(){return l[29](l[53],l[56],l[57])}return{c(){e=f("div"),t=f("div"),n=f("input"),i=b(),s=f("div"),a=f("input"),c=b(),p=f("div"),m=f("button"),m.textContent="×",d=b(),u(n,"class","input"),u(n,"type","text"),u(n,"placeholder","Parameter name"),n.value=o=l[57],u(t,"class","control"),u(a,"class","input"),u(a,"type","text"),u(a,"placeholder","Parameter value"),u(s,"class","control is-expanded"),u(m,"class","button is-small is-danger"),u(p,"class","control"),u(e,"class","field is-grouped")},m(v,k){T(v,e,k),r(e,t),r(t,n),r(e,i),r(e,s),r(s,a),Ce(a,l[2].roles[l[53]].haystacks[l[56]].extra_parameters[l[57]]),r(e,c),r(e,p),r(p,m),r(e,d),_||(h=[x(n,"blur",g),x(a,"input",$),x(m,"click",y)],_=!0)},p(v,k){l=v,k[0]&4&&o!==(o=l[57])&&n.value!==o&&(n.value=o),k[0]&4&&a.value!==l[2].roles[l[53]].haystacks[l[56]].extra_parameters[l[57]]&&Ce(a,l[2].roles[l[53]].haystacks[l[56]].extra_parameters[l[57]])},d(v){v&&C(e),_=!1,ze(h)}}}function dn(l){let e,t,n,o,i,s,a,c,p,m,d,_,h,g,$,y,v,k,R,E,G,F,w,L,I,J,V,M,S,Z,A,j,N,P,q,K,B;function Q(){l[24].call(p,l[53],l[56])}function U($e,fe){return $e[2].roles[$e[53]].haystacks[$e[56]].service==="Atomic"?Is:Hs}let z=U(l),X=z(l);function ue(){l[25].call(R,l[53],l[56])}let ce=l[2].roles[l[53]].haystacks[l[56]].service==="Atomic"&&un(l),ve=l[2].roles[l[53]].haystacks[l[56]].service==="Ripgrep"&&cn(l);function Ke(){l[33].call(V,l[53],l[56])}function Oe(){return l[34](l[53],l[56])}return{c(){e=f("div"),t=f("div"),n=f("label"),o=Y("Service Type"),s=b(),a=f("div"),c=f("div"),p=f("select"),m=f("option"),m.textContent="Ripgrep (File Search)",d=f("option"),d.textContent="Atomic Server",h=b(),g=f("div"),$=f("label"),X.c(),v=b(),k=f("div"),R=f("input"),F=b(),ce&&ce.c(),w=b(),ve&&ve.c(),L=b(),I=f("div"),J=f("label"),V=f("input"),S=Y(`
                 Read-only`),A=b(),j=f("div"),N=f("button"),P=Y("Remove Haystack"),u(n,"class","label"),u(n,"for",i=`haystack-service-${l[53]}-${l[56]}`),m.__value="Ripgrep",m.value=m.__value,d.__value="Atomic",d.value=d.__value,u(p,"id",_=`haystack-service-${l[53]}-${l[56]}`),l[2].roles[l[53]].haystacks[l[56]].service===void 0&&ot(Q),u(c,"class","select"),u(a,"class","control"),u(t,"class","field"),u($,"class","label"),u($,"for",y=`haystack-path-${l[53]}-${l[56]}`),u(R,"class","input"),u(R,"id",E=`haystack-path-${l[53]}-${l[56]}`),u(R,"type","text"),u(R,"placeholder",G=l[2].roles[l[53]].haystacks[l[56]].service==="Atomic"?"https://localhost:9883":"/path/to/documents"),u(k,"class","control"),u(g,"class","field"),u(V,"id",M=`haystack-readonly-${l[53]}-${l[56]}`),u(V,"type","checkbox"),u(J,"class","checkbox"),u(J,"for",Z=`haystack-readonly-${l[53]}-${l[56]}`),u(I,"class","field"),u(N,"class","button is-small is-danger"),u(N,"data-testid",q="remove-haystack-"+l[53]+"-"+l[56]),u(j,"class","field"),u(e,"class","box is-light")},m($e,fe){T($e,e,fe),r(e,t),r(t,n),r(n,o),r(t,s),r(t,a),r(a,c),r(c,p),r(p,m),r(p,d),De(p,l[2].roles[l[53]].haystacks[l[56]].service,!0),r(e,h),r(e,g),r(g,$),X.m($,null),r(g,v),r(g,k),r(k,R),Ce(R,l[2].roles[l[53]].haystacks[l[56]].path),r(e,F),ce&&ce.m(e,null),r(e,w),ve&&ve.m(e,null),r(e,L),r(e,I),r(I,J),r(J,V),V.checked=l[2].roles[l[53]].haystacks[l[56]].read_only,r(J,S),r(e,A),r(e,j),r(j,N),r(N,P),K||(B=[x(p,"change",Q),x(R,"input",ue),x(V,"change",Ke),x(N,"click",Oe)],K=!0)},p($e,fe){l=$e,fe[0]&4&&i!==(i=`haystack-service-${l[53]}-${l[56]}`)&&u(n,"for",i),fe[0]&4&&_!==(_=`haystack-service-${l[53]}-${l[56]}`)&&u(p,"id",_),fe[0]&4&&De(p,l[2].roles[l[53]].haystacks[l[56]].service),z!==(z=U(l))&&(X.d(1),X=z(l),X&&(X.c(),X.m($,null))),fe[0]&4&&y!==(y=`haystack-path-${l[53]}-${l[56]}`)&&u($,"for",y),fe[0]&4&&E!==(E=`haystack-path-${l[53]}-${l[56]}`)&&u(R,"id",E),fe[0]&4&&G!==(G=l[2].roles[l[53]].haystacks[l[56]].service==="Atomic"?"https://localhost:9883":"/path/to/documents")&&u(R,"placeholder",G),fe[0]&4&&R.value!==l[2].roles[l[53]].haystacks[l[56]].path&&Ce(R,l[2].roles[l[53]].haystacks[l[56]].path),l[2].roles[l[53]].haystacks[l[56]].service==="Atomic"?ce?ce.p(l,fe):(ce=un(l),ce.c(),ce.m(e,w)):ce&&(ce.d(1),ce=null),l[2].roles[l[53]].haystacks[l[56]].service==="Ripgrep"?ve?ve.p(l,fe):(ve=cn(l),ve.c(),ve.m(e,L)):ve&&(ve.d(1),ve=null),fe[0]&4&&M!==(M=`haystack-readonly-${l[53]}-${l[56]}`)&&u(V,"id",M),fe[0]&4&&(V.checked=l[2].roles[l[53]].haystacks[l[56]].read_only),fe[0]&4&&Z!==(Z=`haystack-readonly-${l[53]}-${l[56]}`)&&u(J,"for",Z),fe[0]&4&&q!==(q="remove-haystack-"+l[53]+"-"+l[56])&&u(N,"data-testid",q)},d($e){$e&&C(e),X.d(),ce&&ce.d(),ve&&ve.d(),K=!1,ze(B)}}}function pn(l){let e,t,n,o,i,s,a,c,p,m,d,_,h,g,$,y,v,k,R,E,G,F,w,L,I,J,V,M,S;function Z(){l[37].call(a,l[53])}function A(){l[38].call(R,l[53])}return{c(){e=f("div"),t=f("label"),n=Y("OpenRouter API Key"),i=b(),s=f("div"),a=f("input"),p=b(),m=f("p"),m.innerHTML='Get your API key from <a href="https://openrouter.ai" target="_blank" rel="noopener">OpenRouter</a>',d=b(),_=f("div"),h=f("label"),g=Y("Model"),y=b(),v=f("div"),k=f("div"),R=f("select"),E=f("option"),E.textContent="GPT-3.5 Turbo (Fast & Affordable)",G=f("option"),G.textContent="GPT-4 (High Quality)",F=f("option"),F.textContent="Claude 3 Sonnet (Balanced)",w=f("option"),w.textContent="Claude 3 Haiku (Fast)",L=f("option"),L.textContent="Mixtral 8x7B (Open Source)",J=b(),V=f("p"),V.textContent="Choose the language model for generating summaries. Different models offer different speed/quality tradeoffs.",u(t,"class","label"),u(t,"for",o=`openrouter-api-key-${l[53]}`),u(a,"class","input"),u(a,"id",c=`openrouter-api-key-${l[53]}`),u(a,"type","password"),u(a,"placeholder","sk-or-v1-..."),u(s,"class","control"),u(m,"class","help"),u(e,"class","field"),u(h,"class","label"),u(h,"for",$=`openrouter-model-${l[53]}`),E.__value="openai/gpt-3.5-turbo",E.value=E.__value,G.__value="openai/gpt-4",G.value=G.__value,F.__value="anthropic/claude-3-sonnet",F.value=F.__value,w.__value="anthropic/claude-3-haiku",w.value=w.__value,L.__value="mistralai/mixtral-8x7b-instruct",L.value=L.__value,u(R,"id",I=`openrouter-model-${l[53]}`),l[2].roles[l[53]].openrouter_model===void 0&&ot(A),u(k,"class","select is-fullwidth"),u(v,"class","control"),u(V,"class","help"),u(_,"class","field")},m(j,N){T(j,e,N),r(e,t),r(t,n),r(e,i),r(e,s),r(s,a),Ce(a,l[2].roles[l[53]].openrouter_api_key),r(e,p),r(e,m),T(j,d,N),T(j,_,N),r(_,h),r(h,g),r(_,y),r(_,v),r(v,k),r(k,R),r(R,E),r(R,G),r(R,F),r(R,w),r(R,L),De(R,l[2].roles[l[53]].openrouter_model,!0),r(_,J),r(_,V),M||(S=[x(a,"input",Z),x(R,"change",A)],M=!0)},p(j,N){l=j,N[0]&4&&o!==(o=`openrouter-api-key-${l[53]}`)&&u(t,"for",o),N[0]&4&&c!==(c=`openrouter-api-key-${l[53]}`)&&u(a,"id",c),N[0]&4&&a.value!==l[2].roles[l[53]].openrouter_api_key&&Ce(a,l[2].roles[l[53]].openrouter_api_key),N[0]&4&&$!==($=`openrouter-model-${l[53]}`)&&u(h,"for",$),N[0]&4&&I!==(I=`openrouter-model-${l[53]}`)&&u(R,"id",I),N[0]&4&&De(R,l[2].roles[l[53]].openrouter_model)},d(j){j&&C(e),j&&C(d),j&&C(_),M=!1,ze(S)}}}function _n(l,e){let t,n,o,i,s,a,c,p,m,d,_,h,g,$,y,v,k,R,E,G,F,w,L,I,J,V,M,S,Z,A,j,N,P,q,K,B,Q,U,z,X,ue,ce,ve,Ke,Oe,$e,fe,He,Ae,D,te,ie,me,ae,se,Te,be,Se,ge,Re,xe,we,ye,W,re,et,at,Ve,ut,Ut,qe,Dt,ht,Ie,ee,pe,pt,st,tt,Ct,vt,Mt,Ht,rt,Tt,Rt,It,sl,Lt,_t,ct,Ft,rl,Gt,il,bt,ft,Kt,al,Wt,ul,cl,fl,kt,dl,zt,Qt,pl;function En(){e[20].call(p,e[53])}function On(){e[21].call(k,e[53])}function Un(){e[22].call(V,e[53])}function Dn(){e[23].call(K,e[53])}let Nt=e[51].haystacks,Fe=[];for(let Ge=0;Ge<Nt.length;Ge+=1)Fe[Ge]=dn(ln(e,Nt,Ge));function Mn(){return e[35](e[53])}function Pn(){e[36].call(Ae,e[53])}let We=e[2].roles[e[53]].openrouter_enabled&&pn(e);function jn(){e[39].call(re,e[53])}function Hn(){e[40].call(Ie,e[53])}function _l(){e[41].call(rt,e[53])}function In(){e[42].call(ct,e[53])}function Fn(){e[43].call(ft,e[53])}function Gn(){return e[44](e[53])}return{key:l,first:null,c(){t=f("div"),n=f("div"),o=f("label"),i=Y("Role name"),a=b(),c=f("div"),p=f("input"),d=b(),_=f("div"),h=f("label"),g=Y("Short name"),y=b(),v=f("div"),k=f("input"),E=b(),G=f("div"),F=f("label"),w=Y("Theme"),I=b(),J=f("div"),V=f("input"),S=b(),Z=f("div"),A=f("label"),j=Y("Relevance function"),P=b(),q=f("div"),K=f("input"),Q=b(),U=f("h5"),U.textContent="Haystacks",z=b();for(let Ge=0;Ge<Fe.length;Ge+=1)Fe[Ge].c();X=b(),ue=f("button"),ce=Y("Add Haystack"),Ke=b(),Oe=f("h5"),Oe.textContent="AI-Enhanced Summaries (OpenRouter)",$e=b(),fe=f("div"),He=f("label"),Ae=f("input"),te=Y(`
             Enable AI-generated article summaries`),me=b(),ae=f("p"),ae.textContent="Generate intelligent summaries using OpenRouter's language models",se=b(),We&&We.c(),Te=b(),be=f("h5"),be.textContent="Knowledge Graph",Se=b(),ge=f("div"),Re=f("label"),xe=Y("Remote automata URL"),ye=b(),W=f("div"),re=f("input"),at=b(),Ve=f("div"),ut=f("label"),Ut=Y("Local KG path"),Dt=b(),ht=f("div"),Ie=f("input"),pe=b(),pt=f("div"),st=f("div"),tt=f("label"),Ct=Y("Local KG type"),Mt=b(),Ht=f("div"),rt=f("select"),Tt=f("option"),Tt.textContent="markdown",Rt=f("option"),Rt.textContent="json",sl=b(),Lt=f("div"),_t=f("label"),ct=f("input"),rl=Y(`
             Public`),il=b(),bt=f("label"),ft=f("input"),al=Y(`
             Publish`),ul=b(),cl=f("hr"),fl=b(),kt=f("button"),dl=Y("Remove Role"),u(o,"class","label"),u(o,"for",s=`role-name-${e[53]}`),u(p,"class","input"),u(p,"id",m=`role-name-${e[53]}`),u(p,"type","text"),u(c,"class","control"),u(n,"class","field"),u(h,"class","label"),u(h,"for",$=`role-shortname-${e[53]}`),u(k,"class","input"),u(k,"id",R=`role-shortname-${e[53]}`),u(k,"type","text"),u(v,"class","control"),u(_,"class","field"),u(F,"class","label"),u(F,"for",L=`role-theme-${e[53]}`),u(V,"class","input"),u(V,"id",M=`role-theme-${e[53]}`),u(V,"type","text"),u(J,"class","control"),u(G,"class","field"),u(A,"class","label"),u(A,"for",N=`role-relevance-${e[53]}`),u(K,"class","input"),u(K,"id",B=`role-relevance-${e[53]}`),u(K,"type","text"),u(q,"class","control"),u(Z,"class","field"),u(U,"class","title is-6"),u(ue,"class","button is-small"),u(ue,"data-testid",ve="add-haystack-"+e[53]),u(Oe,"class","title is-6"),u(Ae,"id",D=`openrouter-enabled-${e[53]}`),u(Ae,"type","checkbox"),u(He,"class","checkbox"),u(He,"for",ie=`openrouter-enabled-${e[53]}`),u(ae,"class","help"),u(fe,"class","field"),u(be,"class","title is-6"),u(Re,"class","label"),u(Re,"for",we=`kg-url-${e[53]}`),u(re,"class","input"),u(re,"id",et=`kg-url-${e[53]}`),u(re,"type","text"),u(re,"placeholder","https://example.com/thesaurus.json"),u(W,"class","control"),u(ge,"class","field"),u(ut,"class","label"),u(ut,"for",qe=`kg-local-path-${e[53]}`),u(Ie,"class","input"),u(Ie,"id",ee=`kg-local-path-${e[53]}`),u(Ie,"type","text"),u(Ie,"placeholder","/path/to/markdown"),u(ht,"class","control"),u(Ve,"class","field"),u(tt,"class","label"),u(tt,"for",vt=`kg-local-type-${e[53]}`),Tt.__value="markdown",Tt.value=Tt.__value,Rt.__value="json",Rt.value=Rt.__value,u(rt,"id",It=`kg-local-type-${e[53]}`),e[2].roles[e[53]].kg.local_type===void 0&&ot(_l),u(Ht,"class","select"),u(st,"class","control"),u(pt,"class","field is-grouped"),u(ct,"id",Ft=`kg-public-${e[53]}`),u(ct,"type","checkbox"),u(_t,"class","checkbox"),u(_t,"for",Gt=`kg-public-${e[53]}`),yt(_t,"margin-right","1rem"),u(ft,"id",Kt=`kg-publish-${e[53]}`),u(ft,"type","checkbox"),u(bt,"class","checkbox"),u(bt,"for",Wt=`kg-publish-${e[53]}`),u(Lt,"class","field is-grouped"),u(kt,"class","button is-small is-danger"),u(kt,"data-testid",zt="remove-role-"+e[53]),u(t,"class","box"),this.first=t},m(Ge,de){T(Ge,t,de),r(t,n),r(n,o),r(o,i),r(n,a),r(n,c),r(c,p),Ce(p,e[2].roles[e[53]].name),r(t,d),r(t,_),r(_,h),r(h,g),r(_,y),r(_,v),r(v,k),Ce(k,e[2].roles[e[53]].shortname),r(t,E),r(t,G),r(G,F),r(F,w),r(G,I),r(G,J),r(J,V),Ce(V,e[2].roles[e[53]].theme),r(t,S),r(t,Z),r(Z,A),r(A,j),r(Z,P),r(Z,q),r(q,K),Ce(K,e[2].roles[e[53]].relevance_function),r(t,Q),r(t,U),r(t,z);for(let Ue=0;Ue<Fe.length;Ue+=1)Fe[Ue]&&Fe[Ue].m(t,null);r(t,X),r(t,ue),r(ue,ce),r(t,Ke),r(t,Oe),r(t,$e),r(t,fe),r(fe,He),r(He,Ae),Ae.checked=e[2].roles[e[53]].openrouter_enabled,r(He,te),r(fe,me),r(fe,ae),r(t,se),We&&We.m(t,null),r(t,Te),r(t,be),r(t,Se),r(t,ge),r(ge,Re),r(Re,xe),r(ge,ye),r(ge,W),r(W,re),Ce(re,e[2].roles[e[53]].kg.url),r(t,at),r(t,Ve),r(Ve,ut),r(ut,Ut),r(Ve,Dt),r(Ve,ht),r(ht,Ie),Ce(Ie,e[2].roles[e[53]].kg.local_path),r(t,pe),r(t,pt),r(pt,st),r(st,tt),r(tt,Ct),r(st,Mt),r(st,Ht),r(Ht,rt),r(rt,Tt),r(rt,Rt),De(rt,e[2].roles[e[53]].kg.local_type,!0),r(t,sl),r(t,Lt),r(Lt,_t),r(_t,ct),ct.checked=e[2].roles[e[53]].kg.public,r(_t,rl),r(Lt,il),r(Lt,bt),r(bt,ft),ft.checked=e[2].roles[e[53]].kg.publish,r(bt,al),r(t,ul),r(t,cl),r(t,fl),r(t,kt),r(kt,dl),Qt||(pl=[x(p,"input",En),x(k,"input",On),x(V,"input",Un),x(K,"input",Dn),x(ue,"click",Mn),x(Ae,"change",Pn),x(re,"input",jn),x(Ie,"input",Hn),x(rt,"change",_l),x(ct,"change",In),x(ft,"change",Fn),x(kt,"click",Gn)],Qt=!0)},p(Ge,de){if(e=Ge,de[0]&4&&s!==(s=`role-name-${e[53]}`)&&u(o,"for",s),de[0]&4&&m!==(m=`role-name-${e[53]}`)&&u(p,"id",m),de[0]&4&&p.value!==e[2].roles[e[53]].name&&Ce(p,e[2].roles[e[53]].name),de[0]&4&&$!==($=`role-shortname-${e[53]}`)&&u(h,"for",$),de[0]&4&&R!==(R=`role-shortname-${e[53]}`)&&u(k,"id",R),de[0]&4&&k.value!==e[2].roles[e[53]].shortname&&Ce(k,e[2].roles[e[53]].shortname),de[0]&4&&L!==(L=`role-theme-${e[53]}`)&&u(F,"for",L),de[0]&4&&M!==(M=`role-theme-${e[53]}`)&&u(V,"id",M),de[0]&4&&V.value!==e[2].roles[e[53]].theme&&Ce(V,e[2].roles[e[53]].theme),de[0]&4&&N!==(N=`role-relevance-${e[53]}`)&&u(A,"for",N),de[0]&4&&B!==(B=`role-relevance-${e[53]}`)&&u(K,"id",B),de[0]&4&&K.value!==e[2].roles[e[53]].relevance_function&&Ce(K,e[2].roles[e[53]].relevance_function),de[0]&7684){Nt=e[51].haystacks;let Ue;for(Ue=0;Ue<Nt.length;Ue+=1){const ml=ln(e,Nt,Ue);Fe[Ue]?Fe[Ue].p(ml,de):(Fe[Ue]=dn(ml),Fe[Ue].c(),Fe[Ue].m(t,X))}for(;Ue<Fe.length;Ue+=1)Fe[Ue].d(1);Fe.length=Nt.length}de[0]&4&&ve!==(ve="add-haystack-"+e[53])&&u(ue,"data-testid",ve),de[0]&4&&D!==(D=`openrouter-enabled-${e[53]}`)&&u(Ae,"id",D),de[0]&4&&(Ae.checked=e[2].roles[e[53]].openrouter_enabled),de[0]&4&&ie!==(ie=`openrouter-enabled-${e[53]}`)&&u(He,"for",ie),e[2].roles[e[53]].openrouter_enabled?We?We.p(e,de):(We=pn(e),We.c(),We.m(t,Te)):We&&(We.d(1),We=null),de[0]&4&&we!==(we=`kg-url-${e[53]}`)&&u(Re,"for",we),de[0]&4&&et!==(et=`kg-url-${e[53]}`)&&u(re,"id",et),de[0]&4&&re.value!==e[2].roles[e[53]].kg.url&&Ce(re,e[2].roles[e[53]].kg.url),de[0]&4&&qe!==(qe=`kg-local-path-${e[53]}`)&&u(ut,"for",qe),de[0]&4&&ee!==(ee=`kg-local-path-${e[53]}`)&&u(Ie,"id",ee),de[0]&4&&Ie.value!==e[2].roles[e[53]].kg.local_path&&Ce(Ie,e[2].roles[e[53]].kg.local_path),de[0]&4&&vt!==(vt=`kg-local-type-${e[53]}`)&&u(tt,"for",vt),de[0]&4&&It!==(It=`kg-local-type-${e[53]}`)&&u(rt,"id",It),de[0]&4&&De(rt,e[2].roles[e[53]].kg.local_type),de[0]&4&&Ft!==(Ft=`kg-public-${e[53]}`)&&u(ct,"id",Ft),de[0]&4&&(ct.checked=e[2].roles[e[53]].kg.public),de[0]&4&&Gt!==(Gt=`kg-public-${e[53]}`)&&u(_t,"for",Gt),de[0]&4&&Kt!==(Kt=`kg-publish-${e[53]}`)&&u(ft,"id",Kt),de[0]&4&&(ft.checked=e[2].roles[e[53]].kg.publish),de[0]&4&&Wt!==(Wt=`kg-publish-${e[53]}`)&&u(bt,"for",Wt),de[0]&4&&zt!==(zt="remove-role-"+e[53])&&u(kt,"data-testid",zt)},d(Ge){Ge&&C(t),Xe(Fe,Ge),We&&We.d(),Qt=!1,ze(pl)}}}function mn(l){let e,t=l[48].name+"",n,o;return{c(){e=f("option"),n=Y(t),e.__value=o=l[48].name,e.value=e.__value},m(i,s){T(i,e,s),r(e,n)},p(i,s){s[0]&4&&t!==(t=i[48].name+"")&&_e(n,t),s[0]&4&&o!==(o=i[48].name)&&(e.__value=o,e.value=e.__value)},d(i){i&&C(e)}}}function gn(l){let e,t,n;return{c(){e=f("button"),e.textContent="Back",u(e,"class","button"),u(e,"data-testid","wizard-back")},m(o,i){T(o,e,i),t||(n=x(e,"click",l[5]),t=!0)},p:he,d(o){o&&C(e),t=!1,n()}}}function Fs(l){let e,t,n;return{c(){e=f("button"),e.textContent="Save",u(e,"class","button is-success"),u(e,"data-testid","wizard-save")},m(o,i){T(o,e,i),t||(n=x(e,"click",l[13]),t=!0)},p:he,d(o){o&&C(e),t=!1,n()}}}function Gs(l){let e,t,n;return{c(){e=f("button"),e.textContent="Next",u(e,"class","button is-primary"),u(e,"data-testid","wizard-next")},m(o,i){T(o,e,i),t||(n=x(e,"click",l[4]),t=!0)},p:he,d(o){o&&C(e),t=!1,n()}}}function Ks(l){let e,t,n,o,i,s,a,c,p,m,d=l[1]==="success"&&sn(l),_=l[1]==="error"&&rn(l);function h(E,G){return E[0]===1?js:E[0]===2?Ps:Ms}let g=h(l),$=g(l),y=l[0]>1&&gn(l);function v(E,G){return E[0]<An?Gs:Fs}let k=v(l),R=k(l);return{c(){e=f("div"),t=f("h3"),t.textContent="Configuration Wizard",n=b(),d&&d.c(),o=b(),_&&_.c(),i=b(),$.c(),s=b(),a=f("nav"),c=f("div"),y&&y.c(),p=b(),m=f("div"),R.c(),u(t,"class","title is-4"),u(c,"class","level-left"),u(m,"class","level-right"),u(a,"class","level"),u(e,"class","box")},m(E,G){T(E,e,G),r(e,t),r(e,n),d&&d.m(e,null),r(e,o),_&&_.m(e,null),r(e,i),$.m(e,null),r(e,s),r(e,a),r(a,c),y&&y.m(c,null),r(a,p),r(a,m),R.m(m,null)},p(E,G){E[1]==="success"?d?d.p(E,G):(d=sn(E),d.c(),d.m(e,o)):d&&(d.d(1),d=null),E[1]==="error"?_?_.p(E,G):(_=rn(E),_.c(),_.m(e,i)):_&&(_.d(1),_=null),g===(g=h(E))&&$?$.p(E,G):($.d(1),$=g(E),$&&($.c(),$.m(e,s))),E[0]>1?y?y.p(E,G):(y=gn(E),y.c(),y.m(c,null)):y&&(y.d(1),y=null),k===(k=v(E))&&R?R.p(E,G):(R.d(1),R=k(E),R&&(R.c(),R.m(m,null)))},i:he,o:he,d(E){E&&C(e),d&&d.d(),_&&_.d(),$.d(),y&&y.d(),R.d()}}}const An=3;function Ws(l,e,t){let n;const o=nt(null),i=nt({id:"Desktop",global_shortcut:"Ctrl+X",default_theme:"spacelab",default_role:"Default",roles:[]});ke(l,i,D=>t(2,n=D)),nl(async()=>{try{let D;At(Be)?D=await Me("get_config_schema"):D=await(await fetch("/config/schema")).json(),o.set(D);const te=At(Ye);te&&te.id&&i.update(ie=>{var me;return{...ie,id:te.id,global_shortcut:te.global_shortcut,default_theme:((me=te.roles[te.default_role])==null?void 0:me.theme)??"spacelab",default_role:te.default_role,roles:Object.values(te.roles).map(ae=>{var Se,ge,Re,xe,we,ye,W;const se=(Se=ae.kg)==null?void 0:Se.automata_path,Te=(se==null?void 0:se.Remote)??"",be=((Re=(ge=ae.kg)==null?void 0:ge.knowledge_graph_local)==null?void 0:Re.path)??"";return{name:ae.name,shortname:ae.shortname,relevance_function:ae.relevance_function,theme:ae.theme,haystacks:(ae.haystacks??[]).map(re=>({path:re.location||re.path||"",read_only:re.read_only??!1,service:re.service||"Ripgrep",atomic_server_secret:re.atomic_server_secret||"",extra_parameters:re.extra_parameters||{}})),kg:{url:Te,local_path:be,local_type:((we=(xe=ae.kg)==null?void 0:xe.knowledge_graph_local)==null?void 0:we.input_type)??"markdown",public:((ye=ae.kg)==null?void 0:ye.public)??!1,publish:((W=ae.kg)==null?void 0:W.publish)??!1},openrouter_enabled:ae.openrouter_enabled??!1,openrouter_api_key:ae.openrouter_api_key??"",openrouter_model:ae.openrouter_model??"openai/gpt-3.5-turbo"}})}})}catch(D){console.error("Failed to load schema",D)}});let s=1,a="";function c(){s<An&&t(0,s+=1)}function p(){s>1&&t(0,s-=1)}function m(){i.update(D=>({...D,roles:[...D.roles,{name:"New Role",shortname:"new",relevance_function:"title-scorer",theme:"spacelab",haystacks:[],kg:{url:"",local_path:"",local_type:"markdown",public:!1,publish:!1},openrouter_enabled:!1,openrouter_api_key:"",openrouter_model:"openai/gpt-3.5-turbo"}]}))}function d(D){i.update(te=>({...te,roles:te.roles.filter((ie,me)=>me!==D)}))}function _(D){i.update(te=>(te.roles[D].haystacks.push({path:"",read_only:!1,service:"Ripgrep",atomic_server_secret:"",extra_parameters:{}}),te))}function h(D,te){i.update(ie=>(ie.roles[D].haystacks=ie.roles[D].haystacks.filter((me,ae)=>ae!==te),ie))}function g(D,te,ie="",me=""){i.update(ae=>{ae.roles[D].haystacks[te].extra_parameters||(ae.roles[D].haystacks[te].extra_parameters={});const se=ie||`param_${Date.now()}`;return ae.roles[D].haystacks[te].extra_parameters[se]=me,ae})}function $(D,te,ie){i.update(me=>(delete me.roles[D].haystacks[te].extra_parameters[ie],me))}function y(D,te,ie,me){i.update(ae=>{const se=ae.roles[D].haystacks[te].extra_parameters;return se[ie]!==void 0&&ie!==me&&(se[me]=se[ie],delete se[ie]),ae})}function v(D,te,ie,me){const ae=me.target.value;y(D,te,ie,ae)}async function k(){var ae;const D=At(i),te=At(Ye);let ie={...te};ie.id=D.id,ie.global_shortcut=D.global_shortcut,ie.default_role=D.default_role;const me={};D.roles.forEach(se=>{var Se,ge;const Te=se.name,be=Te.replace(/^"|"$/g,"");me[be]={extra:((ge=(Se=te.roles)==null?void 0:Se[Te])==null?void 0:ge.extra)??{},name:se.name,shortname:se.shortname,theme:se.theme,relevance_function:se.relevance_function,haystacks:se.haystacks.map(Re=>({location:Re.path,service:Re.service,read_only:Re.read_only,atomic_server_secret:Re.service==="Atomic"?Re.atomic_server_secret:void 0,extra_parameters:Re.extra_parameters||{}})),kg:se.kg.url||se.kg.local_path?{automata_path:se.kg.url?{Remote:se.kg.url}:null,knowledge_graph_local:se.kg.local_path?{input_type:se.kg.local_type,path:se.kg.local_path}:null,public:se.kg.public,publish:se.kg.publish}:null,...se.openrouter_enabled&&{openrouter_enabled:se.openrouter_enabled,openrouter_api_key:se.openrouter_api_key,openrouter_model:se.openrouter_model}}}),ie.roles=me,(!ie.default_role||!me[ie.default_role])&&(ie.default_role=((ae=D.roles[0])==null?void 0:ae.name)??"Default"),ie.selected_role=ie.default_role;try{if(At(Be))await Me("update_config",{configNew:ie});else{const se=await fetch("/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!se.ok)throw new Error(`HTTP ${se.status}: ${se.statusText}`)}Ye.set(ie),t(1,a="success"),setTimeout(()=>{t(1,a="")},3e3)}catch(se){console.error(se),t(1,a="error"),setTimeout(()=>{t(1,a="")},3e3)}}const R=()=>t(1,a=""),E=()=>t(1,a="");function G(){n.id=wt(this),i.set(n)}function F(){n.global_shortcut=this.value,i.set(n)}function w(){n.default_theme=this.value,i.set(n)}function L(){n.default_role=wt(this),i.set(n)}function I(D){n.roles[D].name=this.value,i.set(n)}function J(D){n.roles[D].shortname=this.value,i.set(n)}function V(D){n.roles[D].theme=this.value,i.set(n)}function M(D){n.roles[D].relevance_function=this.value,i.set(n)}function S(D,te){n.roles[D].haystacks[te].service=wt(this),i.set(n)}function Z(D,te){n.roles[D].haystacks[te].path=this.value,i.set(n)}function A(D,te){n.roles[D].haystacks[te].atomic_server_secret=this.value,i.set(n)}const j=(D,te,ie,me)=>v(D,te,ie,me);function N(D,te,ie){n.roles[D].haystacks[te].extra_parameters[ie]=this.value,i.set(n)}const P=(D,te,ie)=>$(D,te,ie),q=(D,te)=>g(D,te,"tag","#rust"),K=(D,te)=>g(D,te,"max_count","10"),B=(D,te)=>g(D,te,"","");function Q(D,te){n.roles[D].haystacks[te].read_only=this.checked,i.set(n)}const U=(D,te)=>h(D,te),z=D=>_(D);function X(D){n.roles[D].openrouter_enabled=this.checked,i.set(n)}function ue(D){n.roles[D].openrouter_api_key=this.value,i.set(n)}function ce(D){n.roles[D].openrouter_model=wt(this),i.set(n)}function ve(D){n.roles[D].kg.url=this.value,i.set(n)}function Ke(D){n.roles[D].kg.local_path=this.value,i.set(n)}function Oe(D){n.roles[D].kg.local_type=wt(this),i.set(n)}function $e(D){n.roles[D].kg.public=this.checked,i.set(n)}function fe(D){n.roles[D].kg.publish=this.checked,i.set(n)}return[s,a,n,i,c,p,m,d,_,h,g,$,v,k,R,E,G,F,w,L,I,J,V,M,S,Z,A,j,N,P,q,K,B,Q,U,z,X,ue,ce,ve,Ke,Oe,$e,fe,D=>d(D),()=>{t(0,s=2)}]}class zs extends Qe{constructor(e){super(),Ze(this,e,Ws,Ks,Je,{},null,[-1,-1])}}function qs(l){let e,t,n,o,i,s;return i=new Tn({props:{content:l[0],onChange:l[1]}}),{c(){e=f("div"),t=f("p"),t.innerHTML="<i>The best editing experience is to configure Atomic Server, in the meantime use editor below. You will need to refresh page via Command R or Ctrl-R to see changes</i>",n=b(),o=f("div"),le(i.$$.fragment),u(o,"class","editor"),u(e,"class","box")},m(a,c){T(a,e,c),r(e,t),r(e,n),r(e,o),ne(i,o,null),s=!0},p(a,[c]){const p={};c&1&&(p.content=a[0]),i.$set(p)},i(a){s||(O(i.$$.fragment,a),s=!0)},o(a){H(i.$$.fragment,a),s=!1},d(a){a&&C(e),oe(i)}}}function Bs(l,e,t){let n,o;ke(l,Ye,a=>t(2,n=a)),ke(l,Be,a=>t(3,o=a));let i={json:n};function s(a){if(console.log("contents changed:",a),console.log("is tauri",o),Ye.update(c=>(c=a.json,c)),At(Be))console.log("Updating config on server"),Me("update_config",{configNew:a.json}).then(c=>{console.log(`Message: ${c}`)}).catch(c=>console.error(c));else{let c=`${lt.ServerURL}/config/`;fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.json)})}t(0,i=a)}return nl(()=>{t(0,i={json:n})}),[i,s]}class Js extends Qe{constructor(e){super(),Ze(this,e,Bs,qs,Je,{})}}const{window:tl}=Qn;function Vs(l){let e,t,n,o,i,s,a,c,p,m;return{c(){e=f("div"),t=f("div"),n=f("h3"),n.textContent="Error loading graph",o=b(),i=f("p"),s=Y(l[3]),a=b(),c=f("button"),c.textContent="Retry",u(c,"class","button is-primary"),u(t,"class","error-content svelte-1ry9pkl"),u(e,"class","error-overlay svelte-1ry9pkl")},m(d,_){T(d,e,_),r(e,t),r(t,n),r(t,o),r(t,i),r(i,s),r(t,a),r(t,c),p||(m=x(c,"click",l[11]),p=!0)},p(d,_){_&8&&_e(s,d[3])},d(d){d&&C(e),p=!1,m()}}}function Ys(l){let e;return{c(){e=f("div"),e.innerHTML=`<div class="loading-content svelte-1ry9pkl"><div class="loader svelte-1ry9pkl"></div> 
        <p>Loading knowledge graph...</p></div>`,u(e,"class","loading-overlay svelte-1ry9pkl")},m(t,n){T(t,e,n)},p:he,d(t){t&&C(e)}}}function hn(l){let e,t,n;return{c(){e=f("button"),e.innerHTML='<i class="fas fa-times svelte-1ry9pkl"></i>',u(e,"class","close-button svelte-1ry9pkl"),u(e,"title","Close Graph")},m(o,i){T(o,e,i),t||(n=x(e,"click",l[17]),t=!0)},p:he,d(o){o&&C(e),t=!1,n()}}}function vn(l){let e;return{c(){e=f("div"),e.innerHTML="<span><strong>Left-click:</strong> View node • <strong>Right-click:</strong> Edit node • <strong>Drag:</strong> Move • <strong>Scroll:</strong> Zoom</span>",u(e,"class","controls-info svelte-1ry9pkl")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function bn(l){let e,t;return{c(){e=f("div"),t=Y(l[8]),u(e,"class","debug-message svelte-1ry9pkl")},m(n,o){T(n,e,o),r(e,t)},p(n,o){o&256&&_e(t,n[8])},d(n){n&&C(e)}}}function kn(l){let e=l[5].id,t,n,o=$n(l);return{c(){o.c(),t=it()},m(i,s){o.m(i,s),T(i,t,s),n=!0},p(i,s){s&32&&Je(e,e=i[5].id)?(Le(),H(o,1,1,he),Ne(),o=$n(i),o.c(),O(o,1),o.m(t.parentNode,t)):o.p(i,s)},i(i){n||(O(o),n=!0)},o(i){H(o),n=!1},d(i){i&&C(t),o.d(i)}}}function $n(l){let e,t,n;function o(s){l[18](s)}let i={item:l[5],initialEdit:l[7]};return l[6]!==void 0&&(i.active=l[6]),e=new ol({props:i}),Ee.push(()=>Pe(e,"active",o)),e.$on("close",l[12]),e.$on("save",l[13]),{c(){le(e.$$.fragment)},m(s,a){ne(e,s,a),n=!0},p(s,a){const c={};a&32&&(c.item=s[5]),a&128&&(c.initialEdit=s[7]),!t&&a&64&&(t=!0,c.active=s[6],je(()=>t=!1)),e.$set(c)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){oe(e,s)}}}function Qs(l){let e,t,n,o,i,s,a,c,p;ot(l[15]);function m(v,k){if(v[2])return Ys;if(v[3])return Vs}let d=m(l),_=d&&d(l),h=l[0]&&hn(l),g=!l[2]&&!l[3]&&l[4].length>0&&vn(),$=l[8]&&bn(l),y=l[5]&&kn(l);return{c(){e=f("div"),_&&_.c(),t=b(),h&&h.c(),n=b(),g&&g.c(),o=b(),$&&$.c(),i=b(),y&&y.c(),s=it(),u(e,"class","graph-container svelte-1ry9pkl"),yt(e,"width",l[0]?"100vw":"600px"),yt(e,"height",l[0]?"100vh":"400px"),Jt(e,"fullscreen",l[0])},m(v,k){T(v,e,k),_&&_.m(e,null),l[16](e),T(v,t,k),h&&h.m(v,k),T(v,n,k),g&&g.m(v,k),T(v,o,k),$&&$.m(v,k),T(v,i,k),y&&y.m(v,k),T(v,s,k),a=!0,c||(p=x(tl,"resize",l[15]),c=!0)},p(v,[k]){d===(d=m(v))&&_?_.p(v,k):(_&&_.d(1),_=d&&d(v),_&&(_.c(),_.m(e,null))),(!a||k&1)&&yt(e,"width",v[0]?"100vw":"600px"),(!a||k&1)&&yt(e,"height",v[0]?"100vh":"400px"),(!a||k&1)&&Jt(e,"fullscreen",v[0]),v[0]?h?h.p(v,k):(h=hn(v),h.c(),h.m(n.parentNode,n)):h&&(h.d(1),h=null),!v[2]&&!v[3]&&v[4].length>0?g||(g=vn(),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null),v[8]?$?$.p(v,k):($=bn(v),$.c(),$.m(i.parentNode,i)):$&&($.d(1),$=null),v[5]?y?(y.p(v,k),k&32&&O(y,1)):(y=kn(v),y.c(),O(y,1),y.m(s.parentNode,s)):y&&(Le(),H(y,1,1,()=>{y=null}),Ne())},i(v){a||(O(y),a=!0)},o(v){H(y),a=!1},d(v){v&&C(e),_&&_.d(),l[16](null),v&&C(t),h&&h.d(v),v&&C(n),g&&g.d(v),v&&C(o),$&&$.d(v),v&&C(i),y&&y.d(v),v&&C(s),c=!1,p()}}}function wn(l){return{id:`kg-node-${l.id}`,url:`#/graph/node/${l.id}`,title:l.label,body:`# ${l.label}

**Knowledge Graph Node**

ID: ${l.id}
Rank: ${l.rank}

This is a concept node from the knowledge graph. You can edit this content to add more information about "${l.label}".`,description:`Knowledge graph concept: ${l.label}`,tags:["knowledge-graph","concept"],rank:l.rank,stub:`Knowledge graph concept: ${l.label}`}}function Zs(l,e,t){let n,o;ke(l,gt,S=>t(20,n=S)),ke(l,Be,S=>t(21,o=S));let{apiUrl:i="/rolegraph"}=e,{fullscreen:s=!0}=e,a,c=!0,p=null,m=[],d=[],_=null,h=!1,g=!1,$="",y=window.innerWidth,v=window.innerHeight;function k(){t(9,y=window.innerWidth),t(10,v=window.innerHeight),!c&&!p&&L()}async function R(){t(2,c=!0),t(3,p=null);try{if(o){console.log("Loading rolegraph from Tauri");const S=await Me("get_rolegraph",{role_name:n||void 0});if(S&&S.status==="success")t(4,m=S.nodes),d=S.edges;else throw new Error(`Tauri rolegraph fetch failed: ${(S==null?void 0:S.status)||"unknown error"}`)}else{console.log("Loading rolegraph from server");const S=n?`${i}?role=${encodeURIComponent(n)}`:i,Z=await fetch(S);if(!Z.ok)throw new Error(`Failed to fetch: ${Z.status}`);const A=await Z.json();t(4,m=A.nodes),d=A.edges}}catch(S){t(3,p=S.message),console.error("Error fetching rolegraph:",S)}finally{t(2,c=!1)}}function E(S,Z){S.stopPropagation(),console.log("Node clicked:",Z.label),t(5,_=wn(Z)),t(7,g=!1),t(6,h=!0)}function G(S,Z){S.preventDefault(),S.stopPropagation(),console.log("Node right-clicked:",Z.label),t(8,$=`Right-clicked: ${Z.label}`),t(5,_=wn(Z)),t(7,g=!0),t(6,h=!0),setTimeout(()=>{t(8,$="")},2e3)}function F(){t(6,h=!1),t(5,_=null),t(7,g=!1)}async function w(){if(_)try{const S=await fetch("/documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});S.ok?console.log("Successfully saved KG record:",_.id):console.error("Failed to save KG record:",S.statusText)}catch(S){console.error("Error saving KG record:",S)}finally{t(6,h=!1),t(5,_=null),t(7,g=!1)}}function L(){if(!a)return;t(1,a.innerHTML="",a);const S=Zt(a).append("svg").attr("width",y).attr("height",v),Z=oo().scaleExtent([.1,10]).on("zoom",U=>{A.attr("transform",U.transform)});S.call(Z);const A=S.append("g"),j=so(m).force("link",ro(d).id(U=>U.id).distance(100)).force("charge",io().strength(-200)).force("center",ao(y/2,v/2)).force("collision",uo().radius(20)),N=A.append("g").attr("class","links").selectAll("line").data(d).enter().append("line").attr("stroke","#666").attr("stroke-opacity",.7).attr("stroke-width",U=>{const z=U.weight||U.rank||1;return Math.max(1,Math.min(8,z*2))}),P=A.append("g").attr("class","nodes").selectAll("circle").data(m).enter().append("circle").attr("r",U=>{const z=U.rank||1;return Math.max(6,Math.min(20,z*2))}).attr("fill",U=>{const z=U.rank||1,X=Math.min(z/10,1);return co(.2+X*.6)}).attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer").on("click",(U,z)=>E(U,z)).on("contextmenu",(U,z)=>G(U,z)).on("mouseover",function(U,z){Zt(this).transition().duration(150).attr("stroke-width",3).attr("r",X=>{const ue=X.rank||1;return Math.max(8,Math.min(24,ue*2.5))})}).on("mouseout",function(U,z){Zt(this).transition().duration(150).attr("stroke-width",2).attr("r",X=>{const ue=X.rank||1;return Math.max(6,Math.min(20,ue*2))})}).call(fo().on("start",K).on("drag",B).on("end",Q)),q=A.append("g").attr("class","labels").selectAll("text").data(m).enter().append("text").attr("text-anchor","middle").attr("dy",".35em").attr("font-size","11px").attr("font-family","Arial, sans-serif").attr("fill","#333").attr("pointer-events","none").text(U=>U.label.length>12?U.label.substring(0,12)+"...":U.label);j.on("tick",()=>{N.attr("x1",U=>U.source.x).attr("y1",U=>U.source.y).attr("x2",U=>U.target.x).attr("y2",U=>U.target.y),P.attr("cx",U=>U.x).attr("cy",U=>U.y),q.attr("x",U=>U.x).attr("y",U=>U.y)});function K(U,z){U.active||j.alphaTarget(.3).restart(),z.fx=z.x,z.fy=z.y}function B(U,z){z.fx=U.x,z.fy=U.y}function Q(U,z){U.active||j.alphaTarget(0),z.fx=null,z.fy=null}}nl(()=>{R().then(()=>{p||L()});const S=Z=>{Z.preventDefault()};return a&&a.addEventListener("contextmenu",S),window.addEventListener("resize",k),()=>{a&&a.removeEventListener("contextmenu",S),window.removeEventListener("resize",k)}});function I(){t(9,y=tl.innerWidth),t(10,v=tl.innerHeight)}function J(S){Ee[S?"unshift":"push"](()=>{a=S,t(1,a)})}const V=()=>history.back();function M(S){h=S,t(6,h)}return l.$$set=S=>{"apiUrl"in S&&t(14,i=S.apiUrl),"fullscreen"in S&&t(0,s=S.fullscreen)},[s,a,c,p,m,_,h,g,$,y,v,R,F,w,i,I,J,V,M]}class Xs extends Qe{constructor(e){super(),Ze(this,e,Zs,Qs,Je,{apiUrl:14,fullscreen:0})}}function xs(l){let e,t;return e=new Ds({}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function er(l){let e,t;return e=new Po({}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function tr(l){let e,t;return e=new zs({}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function lr(l){let e,t;return e=new Js({}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function nr(l){let e,t;return e=new Xs({}),{c(){le(e.$$.fragment)},m(n,o){ne(e,n,o),t=!0},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function or(l){let e;return{c(){e=f("nav"),e.innerHTML=`<div class="navbar-brand"><a class="navbar-item" href="/"><span class="icon" style="color: #333;"><i class="fas fa-home"></i></span></a> 
            <a class="navbar-item" href="/config/wizard">Wizard</a> 
            <a class="navbar-item" href="/config/json">JSON Editor</a> 
            <a class="navbar-item" href="/graph">Graph</a></div>`,u(e,"class","navbar")},m(t,n){T(t,e,n)},p:he,d(t){t&&C(e)}}}function sr(l){let e,t,n,o,i,s,a,c,p,m,d,_,h,g,$,y,v,k,R,E,G,F,w,L,I,J,V,M;return a=new qt({}),m=new dt({props:{path:"/",$$slots:{default:[xs]},$$scope:{ctx:l}}}),g=new dt({props:{path:"/fetch/*",$$slots:{default:[er]},$$scope:{ctx:l}}}),y=new dt({props:{path:"/config/wizard",$$slots:{default:[tr]},$$scope:{ctx:l}}}),k=new dt({props:{path:"/config/json",$$slots:{default:[lr]},$$scope:{ctx:l}}}),E=new dt({props:{path:"/graph",$$slots:{default:[nr]},$$scope:{ctx:l}}}),L=new dt({props:{path:"/",$$slots:{default:[or]},$$scope:{ctx:l}}}),{c(){e=f("meta"),t=b(),n=f("div"),o=f("main"),i=f("div"),s=f("div"),le(a.$$.fragment),c=b(),p=f("div"),le(m.$$.fragment),d=b(),_=f("br"),h=b(),le(g.$$.fragment),$=b(),le(y.$$.fragment),v=b(),le(k.$$.fragment),R=b(),le(E.$$.fragment),G=b(),F=f("footer"),w=f("div"),le(L.$$.fragment),u(e,"name","color-scheme"),u(e,"content",l[1]),document.title="Terraphim",u(s,"class","role-selector svelte-1bfpta4"),u(i,"class","top-controls svelte-1bfpta4"),u(p,"class","search-area svelte-1bfpta4"),u(o,"class","main-content svelte-1bfpta4"),u(w,"class",I=gl(l[0])+" svelte-1bfpta4"),u(F,"class","svelte-1bfpta4"),u(n,"class","is-full-height svelte-1bfpta4")},m(S,Z){r(document.head,e),T(S,t,Z),T(S,n,Z),r(n,o),r(o,i),r(i,s),ne(a,s,null),r(o,c),r(o,p),ne(m,p,null),r(o,d),r(o,_),r(o,h),ne(g,o,null),r(o,$),ne(y,o,null),r(o,v),ne(k,o,null),r(o,R),ne(E,o,null),r(n,G),r(n,F),r(F,w),ne(L,w,null),J=!0,V||(M=[x(F,"mouseover",l[2]),x(F,"focus",l[2])],V=!0)},p(S,[Z]){(!J||Z&2)&&u(e,"content",S[1]);const A={};Z&8&&(A.$$scope={dirty:Z,ctx:S}),m.$set(A);const j={};Z&8&&(j.$$scope={dirty:Z,ctx:S}),g.$set(j);const N={};Z&8&&(N.$$scope={dirty:Z,ctx:S}),y.$set(N);const P={};Z&8&&(P.$$scope={dirty:Z,ctx:S}),k.$set(P);const q={};Z&8&&(q.$$scope={dirty:Z,ctx:S}),E.$set(q);const K={};Z&8&&(K.$$scope={dirty:Z,ctx:S}),L.$set(K),(!J||Z&1&&I!==(I=gl(S[0])+" svelte-1bfpta4"))&&u(w,"class",I)},i(S){J||(O(a.$$.fragment,S),O(m.$$.fragment,S),O(g.$$.fragment,S),O(y.$$.fragment,S),O(k.$$.fragment,S),O(E.$$.fragment,S),O(L.$$.fragment,S),J=!0)},o(S){H(a.$$.fragment,S),H(m.$$.fragment,S),H(g.$$.fragment,S),H(y.$$.fragment,S),H(k.$$.fragment,S),H(E.$$.fragment,S),H(L.$$.fragment,S),J=!1},d(S){C(e),S&&C(t),S&&C(n),oe(a),oe(m),oe(g),oe(y),oe(k),oe(E),oe(L),V=!1,ze(M)}}}function rr(l,e,t){let n;ke(l,jt,s=>t(1,n=s));let o="is-hidden";function i(){t(0,o="")}return[o,n,i]}class ir extends Qe{constructor(e){super(),Ze(this,e,rr,sr,Je,{})}}const ar=new to;lo(ar);new ir({target:document.getElementById("app")});
