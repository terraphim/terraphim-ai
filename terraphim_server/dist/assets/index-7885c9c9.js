var lJ=Object.defineProperty;var uJ=(n,e,t)=>e in n?lJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var cJ=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var zi=(n,e,t)=>(uJ(n,typeof e!="symbol"?e+"":e,t),t),fJ=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var mw=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var o1=(n,e,t)=>(fJ(n,e,"access private method"),t);var NFe=cJ((xo,yi)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function pe(){}const fg=n=>n;function Te(n,e){for(const t in e)n[t]=e[t];return n}function NN(n){return n()}function IA(){return Object.create(null)}function It(n){n.forEach(NN)}function dr(n){return typeof n=="function"}function Be(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let s1;function E3(n,e){return s1||(s1=document.createElement("a")),s1.href=e,n===s1.href}function Rt(n,e){return n!=n?e==e:n!==e}function dJ(n){return Object.keys(n).length===0}function V4(n,...e){if(n==null)return pe;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Wo(n){let e;return V4(n,t=>e=t)(),e}function nn(n,e,t){n.$$.on_destroy.push(V4(e,t))}function Je(n,e,t,r){if(n){const i=BN(n,e,t,r);return n[0](i)}}function BN(n,e,t,r){return n[1]&&r?Te(t.ctx.slice(),n[1](r(e))):t.ctx}function Ye(n,e,t,r){if(n[2]&&r){const i=n[2](r(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function Xe(n,e,t,r,i,o){if(i){const s=BN(e,t,r,o);n.p(s,i)}}function Qe(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function _t(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function Wu(n,e){const t={};e=new Set(e);for(const r in n)!e.has(r)&&r[0]!=="$"&&(t[r]=n[r]);return t}function hJ(n){const e={};for(const t in n)e[t]=!0;return e}function qn(n){return n??""}function pJ(n,e,t){return n.set(t),e}function Mn(n){return n&&dr(n.destroy)?n.destroy:pe}function A3(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const mJ=["",!0,1,"true","contenteditable"],LN=typeof window<"u";let R2=LN?()=>window.performance.now():()=>Date.now(),W4=LN?n=>requestAnimationFrame(n):pe;const Gd=new Set;function FN(n){Gd.forEach(e=>{e.c(n)||(Gd.delete(e),e.f())}),Gd.size!==0&&W4(FN)}function P2(n){let e;return Gd.size===0&&W4(FN),{promise:new Promise(t=>{Gd.add(e={c:n,f:t})}),abort(){Gd.delete(e)}}}const q4=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function T(n,e){n.appendChild(e)}function zN(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function gJ(n){const e=B("style");return vJ(zN(n),e),e.sheet}function vJ(n,e){return T(n.head||n,e),e.sheet}function H(n,e,t){n.insertBefore(e,t||null)}function j(n){n.parentNode&&n.parentNode.removeChild(n)}function rn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function B(n){return document.createElement(n)}function Ti(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Se(n){return document.createTextNode(n)}function K(){return Se(" ")}function Ze(){return Se("")}function le(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function Pa(n){return function(e){return e.preventDefault(),n.call(this,e)}}function Fs(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function C(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}const bJ=["width","height"];function Gn(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const r in e)e[r]==null?n.removeAttribute(r):r==="style"?n.style.cssText=e[r]:r==="__value"?n.value=n[r]=e[r]:t[r]&&t[r].set&&bJ.indexOf(r)===-1?n[r]=e[r]:C(n,r,e[r])}function Ia(n,e){for(const t in e)C(n,t,e[t])}function yJ(n){return Array.from(n.childNodes)}function ze(n,e){e=""+e,n.data!==e&&(n.data=e)}function _J(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function wJ(n,e,t){~mJ.indexOf(t)?_J(n,e):ze(n,e)}function In(n,e){n.value=e??""}function sr(n,e,t,r){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function ma(n,e,t){for(let r=0;r<n.options.length;r+=1){const i=n.options[r];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function NA(n,e){for(let t=0;t<n.options.length;t+=1){const r=n.options[t];r.selected=~e.indexOf(r.__value)}}function Lv(n){const e=n.querySelector(":checked");return e&&e.__value}function kJ(n){return[].map.call(n.querySelectorAll(":checked"),e=>e.__value)}function oe(n,e,t){n.classList[t?"add":"remove"](e)}function jN(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}class HN{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=Ti(t.nodeName):this.e=B(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)H(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(j)}}function Ht(n,e){return new n(e)}const hb=new Map;let pb=0;function CJ(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function SJ(n,e){const t={stylesheet:gJ(e),rules:{}};return hb.set(n,t),t}function Q0(n,e,t,r,i,o,s,a=0){const l=16.666/r;let u=`{
`;for(let g=0;g<=1;g+=l){const v=e+(t-e)*o(g);u+=g*100+`%{${s(v,1-v)}}
`}const c=u+`100% {${s(t,1-t)}}
}`,f=`__svelte_${CJ(c)}_${a}`,d=zN(n),{stylesheet:h,rules:p}=hb.get(d)||SJ(d,n);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${c}`,h.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${i}ms 1 both`,pb+=1,f}function Z0(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-r.length;i&&(n.style.animation=r.join(", "),pb-=i,pb||xJ())}function xJ(){W4(()=>{pb||(hb.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&j(e)}),hb.clear())})}function EJ(n,e,t,r){if(!e)return pe;const i=n.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return pe;const{delay:o=0,duration:s=300,easing:a=fg,start:l=R2()+o,end:u=l+s,tick:c=pe,css:f}=t(n,{from:e,to:i},r);let d=!0,h=!1,p;function m(){f&&(p=Q0(n,0,1,s,o,a,f)),o||(h=!0)}function g(){f&&Z0(n,p),d=!1}return P2(v=>{if(!h&&v>=l&&(h=!0),h&&v>=u&&(c(1,0),g()),!d)return!1;if(h){const b=v-l,w=0+1*a(b/s);c(w,1-w)}return!0}),m(),c(0,1),g}function AJ(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:r}=e,i=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=r,VN(n,i)}}function VN(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const r=getComputedStyle(n),i=r.transform==="none"?"":r.transform;n.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let mh;function m0(n){mh=n}function Lf(){if(!mh)throw new Error("Function called outside component initialization");return mh}function U4(n){Lf().$$.before_update.push(n)}function Tn(n){Lf().$$.on_mount.push(n)}function Kr(n){Lf().$$.on_destroy.push(n)}function Ga(){const n=Lf();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const o=jN(e,t,{cancelable:r});return i.slice().forEach(s=>{s.call(n,o)}),!o.defaultPrevented}return!0}}function dg(n,e){return Lf().$$.context.set(n,e),e}function pr(n){return Lf().$$.context.get(n)}function MJ(n){return Lf().$$.context.has(n)}function Go(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const bd=[],rt=[];let Kd=[];const M3=[],WN=Promise.resolve();let T3=!1;function qN(){T3||(T3=!0,WN.then(Hr))}function dn(){return qN(),WN}function Tr(n){Kd.push(n)}function cr(n){M3.push(n)}const gw=new Set;let Qf=0;function Hr(){if(Qf!==0)return;const n=mh;do{try{for(;Qf<bd.length;){const e=bd[Qf];Qf++,m0(e),TJ(e.$$)}}catch(e){throw bd.length=0,Qf=0,e}for(m0(null),bd.length=0,Qf=0;rt.length;)rt.pop()();for(let e=0;e<Kd.length;e+=1){const t=Kd[e];gw.has(t)||(gw.add(t),t())}Kd.length=0}while(bd.length);for(;M3.length;)M3.pop()();T3=!1,gw.clear(),m0(n)}function TJ(n){if(n.fragment!==null){n.update(),It(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Tr)}}function OJ(n){const e=[],t=[];Kd.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Kd=e}let Dp;function G4(){return Dp||(Dp=Promise.resolve(),Dp.then(()=>{Dp=null})),Dp}function $c(n,e,t){n.dispatchEvent(jN(`${e?"intro":"outro"}${t}`))}const Fv=new Set;let ga;function de(){ga={r:0,c:[],p:ga}}function he(){ga.r||It(ga.c),ga=ga.p}function x(n,e){n&&n.i&&(Fv.delete(n),n.i(e))}function D(n,e,t,r){if(n&&n.o){if(Fv.has(n))return;Fv.add(n),ga.c.push(()=>{Fv.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}const K4={duration:0};function UN(n,e,t){const r={direction:"in"};let i=e(n,t,r),o=!1,s,a,l=0;function u(){s&&Z0(n,s)}function c(){const{delay:d=0,duration:h=300,easing:p=fg,tick:m=pe,css:g}=i||K4;g&&(s=Q0(n,0,1,h,d,p,g,l++)),m(0,1);const v=R2()+d,b=v+h;a&&a.abort(),o=!0,Tr(()=>$c(n,!0,"start")),a=P2(w=>{if(o){if(w>=b)return m(1,0),$c(n,!0,"end"),u(),o=!1;if(w>=v){const _=p((w-v)/h);m(_,1-_)}}return o})}let f=!1;return{start(){f||(f=!0,Z0(n),dr(i)?(i=i(r),G4().then(c)):c())},invalidate(){f=!1},end(){o&&(u(),o=!1)}}}function GN(n,e,t){const r={direction:"out"};let i=e(n,t,r),o=!0,s;const a=ga;a.r+=1;function l(){const{delay:u=0,duration:c=300,easing:f=fg,tick:d=pe,css:h}=i||K4;h&&(s=Q0(n,1,0,c,u,f,h));const p=R2()+u,m=p+c;Tr(()=>$c(n,!1,"start")),P2(g=>{if(o){if(g>=m)return d(0,1),$c(n,!1,"end"),--a.r||It(a.c),!1;if(g>=p){const v=f((g-p)/c);d(1-v,v)}}return o})}return dr(i)?G4().then(()=>{i=i(r),l()}):l(),{end(u){u&&i.tick&&i.tick(1,0),o&&(s&&Z0(n,s),o=!1)}}}function Ai(n,e,t,r){const i={direction:"both"};let o=e(n,t,i),s=r?0:1,a=null,l=null,u=null;function c(){u&&Z0(n,u)}function f(h,p){const m=h.b-s;return p*=Math.abs(m),{a:s,b:h.b,d:m,duration:p,start:h.start,end:h.start+p,group:h.group}}function d(h){const{delay:p=0,duration:m=300,easing:g=fg,tick:v=pe,css:b}=o||K4,w={start:R2()+p,b:h};h||(w.group=ga,ga.r+=1),a||l?l=w:(b&&(c(),u=Q0(n,s,h,m,p,g,b)),h&&v(0,1),a=f(w,m),Tr(()=>$c(n,h,"start")),P2(_=>{if(l&&_>l.start&&(a=f(l,m),l=null,$c(n,a.b,"start"),b&&(c(),u=Q0(n,s,a.b,a.duration,0,g,o.css))),a){if(_>=a.end)v(s=a.b,1-s),$c(n,a.b,"end"),l||(a.b?c():--a.group.r||It(a.group.c)),a=null;else if(_>=a.start){const y=_-a.start;s=a.a+a.d*g(y/a.duration),v(s,1-s)}}return!!(a||l)}))}return{run(h){dr(o)?G4().then(()=>{o=o(i),d(h)}):d(h)},end(){c(),a=l=null}}}function KN(n,e){n.d(1),e.delete(n.key)}function Rl(n,e){D(n,1,1,()=>{e.delete(n.key)})}function DJ(n,e){n.f(),Rl(n,e)}function zs(n,e,t,r,i,o,s,a,l,u,c,f){let d=n.length,h=o.length,p=d;const m={};for(;p--;)m[n[p].key]=p;const g=[],v=new Map,b=new Map,w=[];for(p=h;p--;){const S=f(i,o,p),E=t(S);let M=s.get(E);M?r&&w.push(()=>M.p(S,e)):(M=u(E,S),M.c()),v.set(E,g[p]=M),E in m&&b.set(E,Math.abs(p-m[E]))}const _=new Set,y=new Set;function k(S){x(S,1),S.m(a,c),s.set(S.key,S),c=S.first,h--}for(;d&&h;){const S=g[h-1],E=n[d-1],M=S.key,R=E.key;S===E?(c=S.first,d--,h--):v.has(R)?!s.has(M)||_.has(M)?k(S):y.has(R)?d--:b.get(M)>b.get(R)?(y.add(M),k(S)):(_.add(R),d--):(l(E,s),d--)}for(;d--;){const S=n[d];v.has(S.key)||l(S,s)}for(;h;)k(g[h-1]);return It(w),g}function Ot(n,e){const t={},r={},i={$$scope:1};let o=n.length;for(;o--;){const s=n[o],a=e[o];if(a){for(const l in s)l in a||(r[l]=1);for(const l in a)i[l]||(t[l]=a[l],i[l]=1);n[o]=a}else for(const l in s)i[l]=1}for(const s in r)s in t||(t[s]=void 0);return t}function an(n){return typeof n=="object"&&n!==null?n:{}}function fr(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function $(n){n&&n.c()}function Q(n,e,t,r){const{fragment:i,after_update:o}=n.$$;i&&i.m(e,t),r||Tr(()=>{const s=n.$$.on_mount.map(NN).filter(dr);n.$$.on_destroy?n.$$.on_destroy.push(...s):It(s),n.$$.on_mount=[]}),o.forEach(Tr)}function Z(n,e){const t=n.$$;t.fragment!==null&&(OJ(t.after_update),It(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function RJ(n,e){n.$$.dirty[0]===-1&&(bd.push(n),qN(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function be(n,e,t,r,i,o,s,a=[-1]){const l=mh;m0(n);const u=n.$$={fragment:null,ctx:[],props:o,update:pe,not_equal:i,bound:IA(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:IA(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=t?t(n,e.props||{},(f,d,...h)=>{const p=h.length?h[0]:d;return u.ctx&&i(u.ctx[f],u.ctx[f]=p)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](p),c&&RJ(n,f)),d}):[],u.update(),c=!0,It(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=yJ(e.target);u.fragment&&u.fragment.l(f),f.forEach(j)}else u.fragment&&u.fragment.c();e.intro&&x(n.$$.fragment),Q(n,e.target,e.anchor,e.customElement),Hr()}m0(l)}class ye{$destroy(){Z(this,1),this.$destroy=pe}$on(e,t){if(!dr(t))return pe;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!dJ(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Zf=[];function J4(n,e){return{subscribe:Bn(n,e).subscribe}}function Bn(n,e=pe){let t;const r=new Set;function i(a){if(Be(n,a)&&(n=a,t)){const l=!Zf.length;for(const u of r)u[1](),Zf.push(u,n);if(l){for(let u=0;u<Zf.length;u+=2)Zf[u][0](Zf[u+1]);Zf.length=0}}}function o(a){i(a(n))}function s(a,l=pe){const u=[a,l];return r.add(u),r.size===1&&(t=e(i)||pe),a(n),()=>{r.delete(u),r.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function hg(n,e,t){const r=!Array.isArray(n),i=r?[n]:n,o=e.length<2;return J4(t,s=>{let a=!1;const l=[];let u=0,c=pe;const f=()=>{if(u)return;c();const h=e(r?l[0]:l,s);o?s(h):c=dr(h)?h:pe},d=i.map((h,p)=>V4(h,m=>{l[p]=m,u&=~(1<<p),a&&f()},()=>{u|=1<<p}));return a=!0,f(),function(){It(d),c(),a=!1}})}function O3(n){return{subscribe:n.subscribe.bind(n)}}const Jd={ServerURL:location.protocol+"//"+window.location.host||"/"},D3=Bn([]),PJ={id:"",global_shortcut:"",roles:{},default_role:"",selected_role:""},g0=Bn("spacelab"),v0=Bn("selected"),Na=Bn(!1),IJ=Bn(`${Jd.ServerURL}/documents/search`),xa=Bn(PJ),BA=Bn([]);let vw=Bn("");const Qp=Bn(!1);let Sc=null;function NJ(n){if(typeof document>"u")return;const e=`/assets/bulmaswatch/${n}/bulmaswatch.min.css`;if(Sc!=null&&Sc.href.endsWith(e))return;const t=document.createElement("link");t.rel="stylesheet",t.href=e,t.id="bulma-theme",t.onload=()=>{Sc&&Sc!==t&&Sc.remove(),Sc=t},document.head.appendChild(t);const r=document.head.querySelector('meta[name="color-scheme"]');r&&r.setAttribute("content",n)}g0.subscribe(NJ);function BJ(n,e){return new n(e)}function LJ(n){n&&typeof n.$destroy=="function"&&n.$destroy()}function R3(n,e=!1){return n=n.slice(n.startsWith("/#")?2:0,n.endsWith("/*")?-2:void 0),n.startsWith("/")||(n="/"+n),n==="/"&&(n=""),e&&!n.endsWith("/")&&(n+="/"),n}function FJ(n,e){n=R3(n,!0),e=R3(e,!0);let t=[],r={},i=!0,o=n.split("/").map(a=>a.startsWith(":")?(t.push(a.slice(1)),"([^\\/]+)"):a).join("\\/"),s=e.match(new RegExp(`^${o}$`));return s||(i=!1,s=e.match(new RegExp(`^${o}`))),s?(t.forEach((a,l)=>r[a]=s[l+1]),{exact:i,params:r,part:s[0].slice(0,-1)}):null}function JN(n,e,t){if(t==="")return n;if(t[0]==="/")return t;let r=s=>s.split("/").filter(a=>a!==""),i=r(n);return"/"+(e?r(e):[]).map((s,a)=>i[a]).join("/")+"/"+t}function LA(n,e,t,r){let i=[e,"data-"+e].reduce((o,s)=>{let a=n.getAttribute(s);return t&&n.removeAttribute(s),a===null?o:a},!1);return!r&&i===""?!0:i||r||!1}function zJ(n){let e=n.split("&").map(t=>t.split("=")).reduce((t,r)=>{let i=r[0];if(!i)return t;let o=r.length>1?r[r.length-1]:!0;return typeof o=="string"&&o.includes(",")&&(o=o.split(",")),t[i]===void 0?t[i]=[o]:t[i].push(o),t},{});return Object.entries(e).reduce((t,r)=>(t[r[0]]=r[1].length>1?r[1]:r[1][0],t),{})}function jJ(n){return Object.entries(n).map(([e,t])=>t?t===!0?e:`${e}=${Array.isArray(t)?t.join(","):t}`:null).filter(e=>e).join("&")}function FA(n,e){return n?e+n:""}function YN(n){throw new Error("[Tinro] "+n)}var Es={HISTORY:1,HASH:2,MEMORY:3,OFF:4,run(n,e,t,r){return n===this.HISTORY?e&&e():n===this.HASH?t&&t():r&&r()},getDefault(){return!window||window.location.pathname==="srcdoc"?this.MEMORY:this.HISTORY}},Y4,XN,QN,mb="",ws=HJ();function HJ(){let n=Es.getDefault(),e,t=s=>window.onhashchange=window.onpopstate=Y4=null,r=s=>e&&e(bw(n)),i=s=>{s&&(n=s),t(),n!==Es.OFF&&Es.run(n,a=>window.onpopstate=r,a=>window.onhashchange=r)&&r()},o=s=>{let a=Object.assign(bw(n),s);return a.path+FA(jJ(a.query),"?")+FA(a.hash,"#")};return{mode:i,get:s=>bw(n),go(s,a){VJ(n,s,a),r()},start(s){e=s,i()},stop(){e=null,i(Es.OFF)},set(s){this.go(o(s),!s.path)},methods(){return WJ(this)},base:s=>mb=s}}function VJ(n,e,t){!t&&(XN=QN);let r=i=>history[`${t?"replace":"push"}State`]({},"",i);Es.run(n,i=>r(mb+e),i=>r(`#${e}`),i=>Y4=e)}function bw(n){let e=window.location,t=Es.run(n,i=>(mb?e.pathname.replace(mb,""):e.pathname)+e.search+e.hash,i=>String(e.hash.slice(1)||"/"),i=>Y4||"/"),r=t.match(/^([^?#]+)(?:\?([^#]+))?(?:\#(.+))?$/);return QN=t,{url:t,from:XN,path:r[1]||"",query:zJ(r[2]||""),hash:r[3]||""}}function WJ(n){let e=()=>n.get().query,t=s=>n.set({query:s}),r=s=>t(s(e())),i=()=>n.get().hash,o=s=>n.set({hash:s});return{hash:{get:i,set:o,clear:()=>o("")},query:{replace:t,clear:()=>t(""),get(s){return s?e()[s]:e()},set(s,a){r(l=>(l[s]=a,l))},delete(s){r(a=>(a[s]&&delete a[s],a))}}}}var P3=qJ();function qJ(){let{subscribe:n}=Bn(ws.get(),e=>{ws.start(e);let t=UJ(ws.go);return()=>{ws.stop(),t()}});return{subscribe:n,goto:ws.go,params:GJ,meta:YJ,useHashNavigation:e=>ws.mode(e?Es.HASH:Es.HISTORY),mode:{hash:()=>ws.mode(Es.HASH),history:()=>ws.mode(Es.HISTORY),memory:()=>ws.mode(Es.MEMORY)},base:ws.base,location:ws.methods()}}function UJ(n){let e=t=>{let r=t.target.closest("a[href]"),i=r&&LA(r,"target",!1,"_self"),o=r&&LA(r,"tinro-ignore"),s=t.ctrlKey||t.metaKey||t.altKey||t.shiftKey;if(i=="_self"&&!o&&!s&&r){let a=r.getAttribute("href").replace(/^\/#/,"");/^\/\/|^#|^[a-zA-Z]+:/.test(a)||(t.preventDefault(),n(a.startsWith("/")?a:r.href.replace(window.location.origin,"")))}};return addEventListener("click",e),()=>removeEventListener("click",e)}function GJ(){return pr("tinro").meta.params}var gb="tinro",KJ=ZN({pattern:"",matched:!0});function JJ(n){let e=pr(gb)||KJ;(e.exact||e.fallback)&&YN(`${n.fallback?"<Route fallback>":`<Route path="${n.path}">`}  can't be inside ${e.fallback?"<Route fallback>":`<Route path="${e.path||"/"}"> with exact path`}`);let t=n.fallback?"fallbacks":"childs",r=Bn({}),i=ZN({fallback:n.fallback,parent:e,update(o){i.exact=!o.path.endsWith("/*"),i.pattern=R3(`${i.parent.pattern||""}${o.path}`),i.redirect=o.redirect,i.firstmatch=o.firstmatch,i.breadcrumb=o.breadcrumb,i.match()},register:()=>(i.parent[t].add(i),async()=>{i.parent[t].delete(i),i.parent.activeChilds.delete(i),i.router.un&&i.router.un(),i.parent.match()}),show:()=>{n.onShow(),!i.fallback&&i.parent.activeChilds.add(i)},hide:()=>{n.onHide(),i.parent.activeChilds.delete(i)},match:async()=>{i.matched=!1;let{path:o,url:s,from:a,query:l}=i.router.location,u=FJ(i.pattern,o);if(!i.fallback&&u&&i.redirect&&(!i.exact||i.exact&&u.exact)){let c=JN(o,i.parent.pattern,i.redirect);return P3.goto(c,!0)}i.meta=u&&{from:a,url:s,query:l,match:u.part,pattern:i.pattern,breadcrumbs:i.parent.meta&&i.parent.meta.breadcrumbs.slice()||[],params:u.params,subscribe:r.subscribe},i.breadcrumb&&i.meta&&i.meta.breadcrumbs.push({name:i.breadcrumb,path:u.part}),r.set(i.meta),u&&!i.fallback&&(!i.exact||i.exact&&u.exact)&&(!i.parent.firstmatch||!i.parent.matched)?(n.onMeta(i.meta),i.parent.matched=!0,i.show()):i.hide(),u&&i.showFallbacks()}});return dg(gb,i),Tn(()=>i.register()),i}function YJ(){return MJ(gb)?pr(gb).meta:YN("meta() function must be run inside any `<Route>` child component only")}function ZN(n){let e={router:{},exact:!1,pattern:null,meta:null,parent:null,fallback:!1,redirect:!1,firstmatch:!1,breadcrumb:null,matched:!1,childs:new Set,activeChilds:new Set,fallbacks:new Set,async showFallbacks(){if(!this.fallback&&(await dn(),this.childs.size>0&&this.activeChilds.size==0||this.childs.size==0&&this.fallbacks.size>0)){let t=this;for(;t.fallbacks.size==0;)if(t=t.parent,!t)return;t&&t.fallbacks.forEach(r=>{if(r.redirect){let i=JN("/",r.parent.pattern,r.redirect);P3.goto(i,!0)}else r.show()})}},start(){this.router.un||(this.router.un=P3.subscribe(t=>{this.router.location=t,this.pattern!==null&&this.match()}))},match(){this.showFallbacks()}};return Object.assign(e,n),e.start(),e}const XJ=n=>({params:n&2,meta:n&4}),zA=n=>({params:n[1],meta:n[2]});function jA(n){let e;const t=n[9].default,r=Je(t,n,n[8],zA);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&262)&&Xe(r,t,i,i[8],e?Ye(t,i[8],o,XJ):Qe(i[8]),zA)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function QJ(n){let e,t,r=n[0]&&jA(n);return{c(){r&&r.c(),e=Ze()},m(i,o){r&&r.m(i,o),H(i,e,o),t=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&x(r,1)):(r=jA(i),r.c(),x(r,1),r.m(e.parentNode,e)):r&&(de(),D(r,1,1,()=>{r=null}),he())},i(i){t||(x(r),t=!0)},o(i){D(r),t=!1},d(i){r&&r.d(i),i&&j(e)}}}function ZJ(n,e,t){let{$$slots:r={},$$scope:i}=e,{path:o="/*"}=e,{fallback:s=!1}=e,{redirect:a=!1}=e,{firstmatch:l=!1}=e,{breadcrumb:u=null}=e,c=!1,f={},d={};const h=JJ({fallback:s,onShow(){t(0,c=!0)},onHide(){t(0,c=!1)},onMeta(p){t(2,d=p),t(1,f=d.params)}});return n.$$set=p=>{"path"in p&&t(3,o=p.path),"fallback"in p&&t(4,s=p.fallback),"redirect"in p&&t(5,a=p.redirect),"firstmatch"in p&&t(6,l=p.firstmatch),"breadcrumb"in p&&t(7,u=p.breadcrumb),"$$scope"in p&&t(8,i=p.$$scope)},n.$$.update=()=>{n.$$.dirty&232&&h.update({path:o,redirect:a,firstmatch:l,breadcrumb:u})},[c,f,d,o,s,a,l,u,i,r]}class hu extends ye{constructor(e){super(),be(this,e,ZJ,QJ,Be,{path:3,fallback:4,redirect:5,firstmatch:6,breadcrumb:7})}}const $J="modulepreload",eY=function(n){return"/"+n},HA={},$N=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=eY(o),o in HA)return;HA[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":$J,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};function tY(n){let e,t,r,i,o,s;return{c(){e=B("span"),t=B("i"),C(t,"class",r=n[8]+" fa-"+n[0]+" "+n[2]+" "+n[6]),C(e,"class",i="icon "+n[1]+" "+n[7]+" "+(n[4]&&"is-left"||"")+" "+(n[5]&&"is-right"||"")),oe(e,"is-clickable",n[3])},m(a,l){H(a,e,l),T(e,t),o||(s=le(e,"click",n[12]),o=!0)},p(a,[l]){l&325&&r!==(r=a[8]+" fa-"+a[0]+" "+a[2]+" "+a[6])&&C(t,"class",r),l&178&&i!==(i="icon "+a[1]+" "+a[7]+" "+(a[4]&&"is-left"||"")+" "+(a[5]&&"is-right"||""))&&C(e,"class",i),l&186&&oe(e,"is-clickable",a[3])},i:pe,o:pe,d(a){a&&j(e),o=!1,s()}}}function nY(n,e,t){let r,{type:i=""}=e,{pack:o="fas"}=e,{icon:s}=e,{size:a=""}=e,{customClass:l=""}=e,{customSize:u=""}=e,{isClickable:c=!1}=e,{isLeft:f=!1}=e,{isRight:d=!1}=e,h="",p="";function m(g){Go.call(this,n,g)}return n.$$set=g=>{"type"in g&&t(9,i=g.type),"pack"in g&&t(10,o=g.pack),"icon"in g&&t(0,s=g.icon),"size"in g&&t(1,a=g.size),"customClass"in g&&t(2,l=g.customClass),"customSize"in g&&t(11,u=g.customSize),"isClickable"in g&&t(3,c=g.isClickable),"isLeft"in g&&t(4,f=g.isLeft),"isRight"in g&&t(5,d=g.isRight)},n.$$.update=()=>{if(n.$$.dirty&1024&&t(8,r=o||"fas"),n.$$.dirty&2050)if(u)t(6,h=u);else switch(a){case"is-small":break;case"is-medium":t(6,h="fa-lg");break;case"is-large":t(6,h="fa-3x");break;default:t(6,h="")}if(n.$$.dirty&512){i||t(7,p="");let g=[];if(typeof i=="string")g=i.split("-");else for(let v in i)if(i[v]){g=v.split("-");break}g.length<=1?t(7,p=""):t(7,p=`has-text-${g[1]}`)}},[s,a,l,c,f,d,h,p,r,i,o,u,m]}let Ul=class extends ye{constructor(e){super(),be(this,e,nY,tY,Be,{type:9,pack:10,icon:0,size:1,customClass:2,customSize:11,isClickable:3,isLeft:4,isRight:5})}};function eB(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function pg(n){const e=n-1;return e*e*e+1}function rY(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function iY(n,{delay:e=0,duration:t=400,easing:r=eB,amount:i=5,opacity:o=0}={}){const s=getComputedStyle(n),a=+s.opacity,l=s.filter==="none"?"":s.filter,u=a*(1-o),[c,f]=A3(i);return{delay:e,duration:t,easing:r,css:(d,h)=>`opacity: ${a-u*h}; filter: ${l} blur(${h*c}${f});`}}function vl(n,{delay:e=0,duration:t=400,easing:r=fg}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:o=>`opacity: ${o*i}`}}function vb(n,{delay:e=0,duration:t=400,easing:r=pg,x:i=0,y:o=0,opacity:s=0}={}){const a=getComputedStyle(n),l=+a.opacity,u=a.transform==="none"?"":a.transform,c=l*(1-s),[f,d]=A3(i),[h,p]=A3(o);return{delay:e,duration:t,easing:r,css:(m,g)=>`
			transform: ${u} translate(${(1-m)*f}${d}, ${(1-m)*h}${p});
			opacity: ${l-c*g}`}}function oY(n,{delay:e=0,duration:t=400,easing:r=pg,axis:i="y"}={}){const o=getComputedStyle(n),s=+o.opacity,a=i==="y"?"height":"width",l=parseFloat(o[a]),u=i==="y"?["top","bottom"]:["left","right"],c=u.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),f=parseFloat(o[`padding${c[0]}`]),d=parseFloat(o[`padding${c[1]}`]),h=parseFloat(o[`margin${c[0]}`]),p=parseFloat(o[`margin${c[1]}`]),m=parseFloat(o[`border${c[0]}Width`]),g=parseFloat(o[`border${c[1]}Width`]);return{delay:e,duration:t,easing:r,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*s};${a}: ${v*l}px;padding-${u[0]}: ${v*f}px;padding-${u[1]}: ${v*d}px;margin-${u[0]}: ${v*h}px;margin-${u[1]}: ${v*p}px;border-${u[0]}-width: ${v*m}px;border-${u[1]}-width: ${v*g}px;`}}function sY(n,{delay:e=0,duration:t=400,easing:r=pg,start:i=0,opacity:o=0}={}){const s=getComputedStyle(n),a=+s.opacity,l=s.transform==="none"?"":s.transform,u=1-i,c=a*(1-o);return{delay:e,duration:t,easing:r,css:(f,d)=>`
			transform: ${l} scale(${1-u*d});
			opacity: ${a-c*d}
		`}}function aY(n,{delay:e=0,speed:t,duration:r,easing:i=eB}={}){let o=n.getTotalLength();const s=getComputedStyle(n);return s.strokeLinecap!=="butt"&&(o+=parseInt(s.strokeWidth)),r===void 0?t===void 0?r=800:r=o/t:typeof r=="function"&&(r=r(o)),{delay:e,duration:r,easing:i,css:(a,l)=>`
			stroke-dasharray: ${o};
			stroke-dashoffset: ${l*o};
		`}}function lY(n){var{fallback:e}=n,t=rY(n,["fallback"]);const r=new Map,i=new Map;function o(a,l,u){const{delay:c=0,duration:f=S=>Math.sqrt(S)*30,easing:d=pg}=Te(Te({},t),u),h=a.getBoundingClientRect(),p=l.getBoundingClientRect(),m=h.left-p.left,g=h.top-p.top,v=h.width/p.width,b=h.height/p.height,w=Math.sqrt(m*m+g*g),_=getComputedStyle(l),y=_.transform==="none"?"":_.transform,k=+_.opacity;return{delay:c,duration:dr(f)?f(w):f,easing:d,css:(S,E)=>`
				opacity: ${S*k};
				transform-origin: top left;
				transform: ${y} translate(${E*m}px,${E*g}px) scale(${S+(1-S)*v}, ${S+(1-S)*b});
			`}}function s(a,l,u){return(c,f)=>(a.set(f.key,c),()=>{if(l.has(f.key)){const d=l.get(f.key);return l.delete(f.key),o(d,c,f)}return a.delete(f.key),e&&e(c,f,u)})}return[s(i,r,!1),s(r,i,!0)]}const uY=Object.freeze(Object.defineProperty({__proto__:null,blur:iY,crossfade:lY,draw:aY,fade:vl,fly:vb,scale:sY,slide:oY},Symbol.toStringTag,{value:"Module"}));function X4(n){return typeof n=="function"?n:uY[n]}function cY(n){return n.keyCode&&n.keyCode===13}function VA(n){return n.keyCode&&n.keyCode===46}function Q4(n){return n.keyCode&&n.keyCode===27}function Z4(n,...e){return Object.keys(n).reduce((t,r)=>(e.indexOf(r)===-1&&(t[r]=n[r]),t),{})}function fY(n){switch(n){case"is-info":return"info-circle";case"is-success":return"check-circle";case"is-warning":return"exclamation-triangle";case"is-danger":return"exclamation-circle";default:return null}}function dY(n){return e=>{const t=Object.keys(n.$$.callbacks),r=[];return t.forEach(i=>r.push(le(e,i,o=>Go(n,o)))),{destroy:()=>{r.forEach(i=>i())}}}}function hY(n){let e,t,r,i,o,s,a,l=n[7]&&WA(n);const u=n[15].default,c=Je(u,n,n[14],null);let f=n[8]&&qA(n),d=[{href:n[1]},n[11]],h={};for(let p=0;p<d.length;p+=1)h=Te(h,d[p]);return{c(){e=B("a"),l&&l.c(),t=K(),r=B("span"),c&&c.c(),i=K(),f&&f.c(),Gn(e,h),oe(e,"is-inverted",n[4]),oe(e,"is-loading",n[3]),oe(e,"is-outlined",n[5]),oe(e,"is-rounded",n[6])},m(p,m){H(p,e,m),l&&l.m(e,null),T(e,t),T(e,r),c&&c.m(r,null),T(e,i),f&&f.m(e,null),o=!0,s||(a=le(e,"click",n[17]),s=!0)},p(p,m){p[7]?l?(l.p(p,m),m&128&&x(l,1)):(l=WA(p),l.c(),x(l,1),l.m(e,t)):l&&(de(),D(l,1,1,()=>{l=null}),he()),c&&c.p&&(!o||m&16384)&&Xe(c,u,p,p[14],o?Ye(u,p[14],m,null):Qe(p[14]),null),p[8]?f?(f.p(p,m),m&256&&x(f,1)):(f=qA(p),f.c(),x(f,1),f.m(e,null)):f&&(de(),D(f,1,1,()=>{f=null}),he()),Gn(e,h=Ot(d,[(!o||m&2)&&{href:p[1]},m&2048&&p[11]])),oe(e,"is-inverted",p[4]),oe(e,"is-loading",p[3]),oe(e,"is-outlined",p[5]),oe(e,"is-rounded",p[6])},i(p){o||(x(l),x(c,p),x(f),o=!0)},o(p){D(l),D(c,p),D(f),o=!1},d(p){p&&j(e),l&&l.d(),c&&c.d(p),f&&f.d(),s=!1,a()}}}function pY(n){let e,t,r,i,o,s,a,l=n[7]&&UA(n);const u=n[15].default,c=Je(u,n,n[14],null);let f=n[8]&&GA(n),d=[n[11],{type:n[2]}],h={};for(let p=0;p<d.length;p+=1)h=Te(h,d[p]);return{c(){e=B("button"),l&&l.c(),t=K(),r=B("span"),c&&c.c(),i=K(),f&&f.c(),Gn(e,h),oe(e,"is-inverted",n[4]),oe(e,"is-loading",n[3]),oe(e,"is-outlined",n[5]),oe(e,"is-rounded",n[6])},m(p,m){H(p,e,m),l&&l.m(e,null),T(e,t),T(e,r),c&&c.m(r,null),T(e,i),f&&f.m(e,null),e.autofocus&&e.focus(),o=!0,s||(a=le(e,"click",n[16]),s=!0)},p(p,m){p[7]?l?(l.p(p,m),m&128&&x(l,1)):(l=UA(p),l.c(),x(l,1),l.m(e,t)):l&&(de(),D(l,1,1,()=>{l=null}),he()),c&&c.p&&(!o||m&16384)&&Xe(c,u,p,p[14],o?Ye(u,p[14],m,null):Qe(p[14]),null),p[8]?f?(f.p(p,m),m&256&&x(f,1)):(f=GA(p),f.c(),x(f,1),f.m(e,null)):f&&(de(),D(f,1,1,()=>{f=null}),he()),Gn(e,h=Ot(d,[m&2048&&p[11],(!o||m&4)&&{type:p[2]}])),oe(e,"is-inverted",p[4]),oe(e,"is-loading",p[3]),oe(e,"is-outlined",p[5]),oe(e,"is-rounded",p[6])},i(p){o||(x(l),x(c,p),x(f),o=!0)},o(p){D(l),D(c,p),D(f),o=!1},d(p){p&&j(e),l&&l.d(),c&&c.d(p),f&&f.d(),s=!1,a()}}}function WA(n){let e,t;return e=new Ul({props:{pack:n[9],icon:n[7],size:n[10]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&512&&(o.pack=r[9]),i&128&&(o.icon=r[7]),i&1024&&(o.size=r[10]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function qA(n){let e,t;return e=new Ul({props:{pack:n[9],icon:n[8],size:n[10]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&512&&(o.pack=r[9]),i&256&&(o.icon=r[8]),i&1024&&(o.size=r[10]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function UA(n){let e,t;return e=new Ul({props:{pack:n[9],icon:n[7],size:n[10]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&512&&(o.pack=r[9]),i&128&&(o.icon=r[7]),i&1024&&(o.size=r[10]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function GA(n){let e,t;return e=new Ul({props:{pack:n[9],icon:n[8],size:n[10]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&512&&(o.pack=r[9]),i&256&&(o.icon=r[8]),i&1024&&(o.size=r[10]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function mY(n){let e,t,r,i;const o=[pY,hY],s=[];function a(l,u){return l[0]==="button"?0:l[0]==="a"?1:-1}return~(e=a(n))&&(t=s[e]=o[e](n)),{c(){t&&t.c(),r=Ze()},m(l,u){~e&&s[e].m(l,u),H(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?~e&&s[e].p(l,u):(t&&(de(),D(s[c],1,1,()=>{s[c]=null}),he()),~e?(t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r)):t=null)},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){~e&&s[e].d(l),l&&j(r)}}}function gY(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{tag:s="button"}=e,{type:a=""}=e,{size:l=""}=e,{href:u=""}=e,{nativeType:c="button"}=e,{loading:f=!1}=e,{inverted:d=!1}=e,{outlined:h=!1}=e,{rounded:p=!1}=e,{iconLeft:m=null}=e,{iconRight:g=null}=e,{iconPack:v=null}=e,b="";Tn(()=>{if(!["button","a"].includes(s))throw new Error(`'${s}' cannot be used as a tag for a Bulma button`)});function w(y){Go.call(this,n,y)}function _(y){Go.call(this,n,y)}return n.$$set=y=>{t(18,e=Te(Te({},e),_t(y))),"tag"in y&&t(0,s=y.tag),"type"in y&&t(12,a=y.type),"size"in y&&t(13,l=y.size),"href"in y&&t(1,u=y.href),"nativeType"in y&&t(2,c=y.nativeType),"loading"in y&&t(3,f=y.loading),"inverted"in y&&t(4,d=y.inverted),"outlined"in y&&t(5,h=y.outlined),"rounded"in y&&t(6,p=y.rounded),"iconLeft"in y&&t(7,m=y.iconLeft),"iconRight"in y&&t(8,g=y.iconRight),"iconPack"in y&&t(9,v=y.iconPack),"$$scope"in y&&t(14,o=y.$$scope)},n.$$.update=()=>{t(11,r={...Z4(e,"loading","inverted","nativeType","outlined","rounded","type"),class:`button ${a} ${l} ${e.class||""}`}),n.$$.dirty&8192&&(!l||l==="is-medium"?t(10,b="is-small"):l==="is-large"?t(10,b="is-medium"):t(10,b=l))},e=_t(e),[s,u,c,f,d,h,p,m,g,v,b,r,a,l,o,i,w,_]}class tB extends ye{constructor(e){super(),be(this,e,gY,mY,Be,{tag:0,type:12,size:13,href:1,nativeType:2,loading:3,inverted:4,outlined:5,rounded:6,iconLeft:7,iconRight:8,iconPack:9})}}function KA(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S=n[2]&&JA(n),E=n[6]&&YA(n),M=n[8]&&XA(n),R=n[9]&&QA(n);return{c(){e=B("div"),t=B("div"),r=K(),i=B("div"),S&&S.c(),o=K(),s=B("section"),a=B("div"),E&&E.c(),l=K(),u=B("div"),c=B("p"),f=K(),M&&M.c(),d=K(),h=B("footer"),R&&R.c(),p=K(),m=B("button"),g=Se(n[4]),C(t,"class","modal-background"),C(u,"class","media-content"),C(a,"class","media"),C(s,"class","modal-card-body svelte-1fsuju2"),oe(s,"is-titleless",!n[2]),oe(s,"is-flex",n[6]),C(m,"class",v="button "+n[11]+" svelte-1fsuju2"),C(h,"class","modal-card-foot svelte-1fsuju2"),C(i,"class","modal-card svelte-1fsuju2"),C(e,"class",w="modal dialog "+n[10]+" is-active svelte-1fsuju2")},m(O,I){H(O,e,I),T(e,t),T(e,r),T(e,i),S&&S.m(i,null),T(i,o),T(i,s),T(s,a),E&&E.m(a,null),T(a,l),T(a,u),T(u,c),c.innerHTML=n[3],T(u,f),M&&M.m(u,null),T(i,d),T(i,h),R&&R.m(h,null),T(h,p),T(h,m),T(m,g),n[32](m),n[33](e),_=!0,y||(k=[le(t,"click",n[21]),le(m,"click",n[22])],y=!0)},p(O,I){n=O,n[2]?S?S.p(n,I):(S=JA(n),S.c(),S.m(i,o)):S&&(S.d(1),S=null),n[6]?E?(E.p(n,I),I[0]&64&&x(E,1)):(E=YA(n),E.c(),x(E,1),E.m(a,l)):E&&(de(),D(E,1,1,()=>{E=null}),he()),(!_||I[0]&8)&&(c.innerHTML=n[3]),n[8]?M?M.p(n,I):(M=XA(n),M.c(),M.m(u,null)):M&&(M.d(1),M=null),(!_||I[0]&4)&&oe(s,"is-titleless",!n[2]),(!_||I[0]&64)&&oe(s,"is-flex",n[6]),n[9]?R?R.p(n,I):(R=QA(n),R.c(),R.m(h,p)):R&&(R.d(1),R=null),(!_||I[0]&16)&&ze(g,n[4]),(!_||I[0]&2048&&v!==(v="button "+n[11]+" svelte-1fsuju2"))&&C(m,"class",v),(!_||I[0]&1024&&w!==(w="modal dialog "+n[10]+" is-active svelte-1fsuju2"))&&C(e,"class",w)},i(O){_||(x(E),Tr(()=>{_&&(b||(b=Ai(i,n[19],n[12],!0)),b.run(1))}),_=!0)},o(O){D(E),b||(b=Ai(i,n[19],n[12],!1)),b.run(0),_=!1},d(O){O&&j(e),S&&S.d(),E&&E.d(),M&&M.d(),R&&R.d(),n[32](null),O&&b&&b.end(),n[33](null),y=!1,It(k)}}}function JA(n){let e,t,r;return{c(){e=B("header"),t=B("p"),r=Se(n[2]),C(t,"class","modal-card-title"),C(e,"class","modal-card-head svelte-1fsuju2")},m(i,o){H(i,e,o),T(e,t),T(t,r)},p(i,o){o[0]&4&&ze(r,i[2])},d(i){i&&j(e)}}}function YA(n){let e,t,r;return t=new Ul({props:{pack:n[7],icon:n[6],type:n[11],size:"is-large"}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","media-left")},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&128&&(s.pack=i[7]),o[0]&64&&(s.icon=i[6]),o[0]&2048&&(s.type=i[11]),t.$set(s)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function XA(n){let e,t,r,i,o,s,a,l,u=[{class:"input"},n[18]],c={};for(let f=0;f<u.length;f+=1)c=Te(c,u[f]);return{c(){e=B("div"),t=B("div"),r=B("input"),i=K(),o=B("p"),s=Se(n[17]),Gn(r,c),oe(r,"svelte-1fsuju2",!0),C(o,"class","help is-danger"),C(t,"class","control"),C(e,"class","field svelte-1fsuju2")},m(f,d){H(f,e,d),T(e,t),T(t,r),r.autofocus&&r.focus(),In(r,n[1]),n[29](r),T(t,i),T(t,o),T(o,s),a||(l=[le(r,"input",n[28]),le(r,"keyup",n[30])],a=!0)},p(f,d){Gn(r,c=Ot(u,[{class:"input"},d[0]&262144&&f[18]])),d[0]&2&&r.value!==f[1]&&In(r,f[1]),oe(r,"svelte-1fsuju2",!0),d[0]&131072&&ze(s,f[17])},d(f){f&&j(e),n[29](null),a=!1,It(l)}}}function QA(n){let e,t,r,i;return{c(){e=B("button"),t=Se(n[5]),C(e,"class","button svelte-1fsuju2")},m(o,s){H(o,e,s),T(e,t),n[31](e),r||(i=le(e,"click",n[20]),r=!0)},p(o,s){s[0]&32&&ze(t,o[5])},d(o){o&&j(e),n[31](null),r=!1,i()}}}function vY(n){let e,t,r,i,o=n[0]&&KA(n);return{c(){o&&o.c(),e=Ze()},m(s,a){o&&o.m(s,a),H(s,e,a),t=!0,r||(i=le(window,"keydown",n[23]),r=!0)},p(s,a){s[0]?o?(o.p(s,a),a[0]&1&&x(o,1)):(o=KA(s),o.c(),x(o,1),o.m(e.parentNode,e)):o&&(de(),D(o,1,1,()=>{o=null}),he())},i(s){t||(x(o),t=!0)},o(s){D(o),t=!1},d(s){o&&o.d(s),s&&j(e),r=!1,i()}}}function bY(n,e,t){let r,i,{title:o=""}=e,{message:s}=e,{confirmText:a="OK"}=e,{cancelText:l="Cancel"}=e,{focusOn:u="confirm"}=e,{icon:c=""}=e,{iconPack:f=""}=e,{hasInput:d=!1}=e,{prompt:h=null}=e,{showCancel:p=!1}=e,{size:m=""}=e,{type:g="is-primary"}=e,{active:v=!0}=e,{animation:b="scale"}=e,{animProps:w={start:1.2}}=e,{inputProps:_={}}=e,y,{appendToBody:k=!0}=e,S,E,M,R,O="";const I=Ga();Tn(async()=>{await dn(),d?R.focus():u==="cancel"&&p?E.focus():M.focus()});function P(){y(d?null:!1),A()}function A(){y(d?null:!1),t(0,v=!1),I("destroy")}async function N(){if(R&&!R.checkValidity()){t(17,O=R.validationMessage),await dn(),R.select();return}t(17,O=""),y(d?h:!0),A()}function F(re){v&&Q4(re)&&A()}function V(){h=this.value,t(1,h)}function W(re){rt[re?"unshift":"push"](()=>{R=re,t(16,R)})}const L=re=>cY(re)&&N();function z(re){rt[re?"unshift":"push"](()=>{E=re,t(14,E)})}function q(re){rt[re?"unshift":"push"](()=>{M=re,t(15,M)})}function te(re){rt[re?"unshift":"push"](()=>{S=re,t(13,S)})}return n.$$set=re=>{"title"in re&&t(2,o=re.title),"message"in re&&t(3,s=re.message),"confirmText"in re&&t(4,a=re.confirmText),"cancelText"in re&&t(5,l=re.cancelText),"focusOn"in re&&t(24,u=re.focusOn),"icon"in re&&t(6,c=re.icon),"iconPack"in re&&t(7,f=re.iconPack),"hasInput"in re&&t(8,d=re.hasInput),"prompt"in re&&t(1,h=re.prompt),"showCancel"in re&&t(9,p=re.showCancel),"size"in re&&t(10,m=re.size),"type"in re&&t(11,g=re.type),"active"in re&&t(0,v=re.active),"animation"in re&&t(25,b=re.animation),"animProps"in re&&t(12,w=re.animProps),"inputProps"in re&&t(26,_=re.inputProps),"appendToBody"in re&&t(27,k=re.appendToBody)},n.$$.update=()=>{var re;n.$$.dirty[0]&33554432&&t(19,r=X4(b)),n.$$.dirty[0]&134225921&&S&&v&&k&&((re=S.parentNode)==null||re.removeChild(S),document.body.appendChild(S)),n.$$.dirty[0]&67108864&&t(18,i={required:!0,..._})},[v,h,o,s,a,l,c,f,d,p,m,g,w,S,E,M,R,O,i,r,P,A,N,F,u,b,_,k,V,W,L,z,q,te]}class I2 extends ye{constructor(e){super(),be(this,e,bY,vY,Be,{title:2,message:3,confirmText:4,cancelText:5,focusOn:24,icon:6,iconPack:7,hasInput:8,prompt:1,showCancel:9,size:10,type:11,active:0,animation:25,animProps:12,inputProps:26,appendToBody:27},null,[-1,-1])}get title(){return this.$$.ctx[2]}set title(e){this.$$set({title:e}),Hr()}get message(){return this.$$.ctx[3]}set message(e){this.$$set({message:e}),Hr()}get confirmText(){return this.$$.ctx[4]}set confirmText(e){this.$$set({confirmText:e}),Hr()}get cancelText(){return this.$$.ctx[5]}set cancelText(e){this.$$set({cancelText:e}),Hr()}get focusOn(){return this.$$.ctx[24]}set focusOn(e){this.$$set({focusOn:e}),Hr()}get icon(){return this.$$.ctx[6]}set icon(e){this.$$set({icon:e}),Hr()}get iconPack(){return this.$$.ctx[7]}set iconPack(e){this.$$set({iconPack:e}),Hr()}get hasInput(){return this.$$.ctx[8]}set hasInput(e){this.$$set({hasInput:e}),Hr()}get prompt(){return this.$$.ctx[1]}set prompt(e){this.$$set({prompt:e}),Hr()}get showCancel(){return this.$$.ctx[9]}set showCancel(e){this.$$set({showCancel:e}),Hr()}get size(){return this.$$.ctx[10]}set size(e){this.$$set({size:e}),Hr()}get type(){return this.$$.ctx[11]}set type(e){this.$$set({type:e}),Hr()}get active(){return this.$$.ctx[0]}set active(e){this.$$set({active:e}),Hr()}get animation(){return this.$$.ctx[25]}set animation(e){this.$$set({animation:e}),Hr()}get animProps(){return this.$$.ctx[12]}set animProps(e){this.$$set({animProps:e}),Hr()}get inputProps(){return this.$$.ctx[26]}set inputProps(e){this.$$set({inputProps:e}),Hr()}get appendToBody(){return this.$$.ctx[27]}set appendToBody(e){this.$$set({appendToBody:e}),Hr()}}function $4(n){typeof n=="string"&&(n={message:n});const e=new I2({target:document.body,props:n,intro:!0});return e.$on("destroy",()=>{e.$destroy()}),e.promise}function yY(n){return $4(n)}function _Y(n){return typeof n=="string"&&(n={message:n}),$4({showCancel:!0,...n})}function wY(n){return typeof n=="string"&&(n={message:n}),$4({hasInput:!0,confirmText:"Done",...n})}I2.alert=yY;I2.confirm=_Y;I2.prompt=wY;const kY=n=>({statusType:n&1}),ZA=n=>({statusType:n[0]});function $A(n){let e,t;return{c(){e=B("label"),t=Se(n[1]),C(e,"for",n[2]),C(e,"class","label")},m(r,i){H(r,e,i),T(e,t),n[19](e)},p(r,i){i&2&&ze(t,r[1]),i&4&&C(e,"for",r[2])},d(r){r&&j(e),n[19](null)}}}function e8(n){let e,t,r;return{c(){e=B("p"),t=Se(n[3]),C(e,"class",r="help "+n[0]+" svelte-zc3i6x")},m(i,o){H(i,e,o),T(e,t),n[20](e)},p(i,o){o&8&&ze(t,i[3]),o&1&&r!==(r="help "+i[0]+" svelte-zc3i6x")&&C(e,"class",r)},d(i){i&&j(e),n[20](null)}}}function CY(n){let e,t,r,i,o,s=n[1]&&$A(n);const a=n[18].default,l=Je(a,n,n[17],ZA);let u=n[3]&&e8(n),c=[n[11],{class:i="field "+n[0]+" "+n[9]+" "+n[10]+" "+(n[12].class||"")}],f={};for(let d=0;d<c.length;d+=1)f=Te(f,c[d]);return{c(){e=B("div"),s&&s.c(),t=K(),l&&l.c(),r=K(),u&&u.c(),Gn(e,f),oe(e,"is-expanded",n[5]),oe(e,"is-grouped-multiline",n[4]),oe(e,"svelte-zc3i6x",!0)},m(d,h){H(d,e,h),s&&s.m(e,null),T(e,t),l&&l.m(e,null),T(e,r),u&&u.m(e,null),n[21](e),o=!0},p(d,[h]){d[1]?s?s.p(d,h):(s=$A(d),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l&&l.p&&(!o||h&131073)&&Xe(l,a,d,d[17],o?Ye(a,d[17],h,kY):Qe(d[17]),ZA),d[3]?u?u.p(d,h):(u=e8(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null),Gn(e,f=Ot(c,[h&2048&&d[11],(!o||h&5633&&i!==(i="field "+d[0]+" "+d[9]+" "+d[10]+" "+(d[12].class||"")))&&{class:i}])),oe(e,"is-expanded",d[5]),oe(e,"is-grouped-multiline",d[4]),oe(e,"svelte-zc3i6x",!0)},i(d){o||(x(l,d),o=!0)},o(d){D(l,d),o=!1},d(d){d&&j(e),s&&s.d(),l&&l.d(d),u&&u.d(),n[21](null)}}}function SY(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{type:s=""}=e,{label:a=null}=e,{labelFor:l=""}=e,{message:u=""}=e,{grouped:c=!1}=e,{groupMultiline:f=!1}=e,{position:d=""}=e,{addons:h=!0}=e,{expanded:p=!1}=e;dg("type",()=>s);let m,g,v,b="",w=!1,_="";Tn(()=>{t(16,w=!0)});function y(E){rt[E?"unshift":"push"](()=>{g=E,t(7,g)})}function k(E){rt[E?"unshift":"push"](()=>{v=E,t(8,v)})}function S(E){rt[E?"unshift":"push"](()=>{m=E,t(6,m)})}return n.$$set=E=>{t(12,e=Te(Te({},e),_t(E))),"type"in E&&t(0,s=E.type),"label"in E&&t(1,a=E.label),"labelFor"in E&&t(2,l=E.labelFor),"message"in E&&t(3,u=E.message),"grouped"in E&&t(13,c=E.grouped),"groupMultiline"in E&&t(4,f=E.groupMultiline),"position"in E&&t(14,d=E.position),"addons"in E&&t(15,h=E.addons),"expanded"in E&&t(5,p=E.expanded),"$$scope"in E&&t(17,o=E.$$scope)},n.$$.update=()=>{if(n.$$.dirty&1,n.$$.dirty&106944&&(c?t(9,b="is-grouped"):w&&Array.prototype.filter.call(m.children,M=>![g,v].includes(M)).length>1&&h&&t(9,b="has-addons")),n.$$.dirty&24576&&d){const E=d.split("-");E.length>=1&&t(10,_=(c?"is-grouped-":"has-addons-")+E[1])}t(11,r={...Z4(e,"addons","class","expanded","grouped","label","labelFor","position","type")})},e=_t(e),[s,a,l,u,f,p,m,g,v,b,_,r,e,c,d,h,w,o,i,y,k,S]}class Pu extends ye{constructor(e){super(),be(this,e,SY,CY,Be,{type:0,label:1,labelFor:2,message:3,grouped:13,groupMultiline:4,position:14,addons:15,expanded:5})}}function xY(n){let e,t,r,i,o=[n[20],{value:n[0]},{class:t="textarea "+n[11]+" "+n[2]},{disabled:n[10]}],s={};for(let a=0;a<o.length;a+=1)s=Te(s,o[a]);return{c(){e=B("textarea"),Gn(e,s),oe(e,"svelte-1v5s752",!0)},m(a,l){H(a,e,l),e.autofocus&&e.focus(),n[31](e),r||(i=[Mn(n[25].call(null,e)),le(e,"input",n[22]),le(e,"focus",n[23]),le(e,"blur",n[24]),le(e,"change",n[29])],r=!0)},p(a,l){Gn(e,s=Ot(o,[l[0]&1048576&&a[20],l[0]&1&&{value:a[0]},l[0]&2052&&t!==(t="textarea "+a[11]+" "+a[2])&&{class:t},l[0]&1024&&{disabled:a[10]}])),oe(e,"svelte-1v5s752",!0)},d(a){a&&j(e),n[31](null),r=!1,It(i)}}}function EY(n){let e,t,r,i,o=[n[20],{type:n[14]},{value:n[0]},{class:t="input "+n[11]+" "+n[2]+" "+(n[26].class||"")},{disabled:n[10]}],s={};for(let a=0;a<o.length;a+=1)s=Te(s,o[a]);return{c(){e=B("input"),Gn(e,s),oe(e,"svelte-1v5s752",!0)},m(a,l){H(a,e,l),"value"in s&&(e.value=s.value),e.autofocus&&e.focus(),n[30](e),r||(i=[Mn(n[25].call(null,e)),le(e,"input",n[22]),le(e,"focus",n[23]),le(e,"blur",n[24]),le(e,"change",n[28])],r=!0)},p(a,l){Gn(e,s=Ot(o,[l[0]&1048576&&a[20],l[0]&16384&&{type:a[14]},l[0]&1&&e.value!==a[0]&&{value:a[0]},l[0]&67110916&&t!==(t="input "+a[11]+" "+a[2]+" "+(a[26].class||""))&&{class:t},l[0]&1024&&{disabled:a[10]}])),"value"in s&&(e.value=s.value),oe(e,"svelte-1v5s752",!0)},d(a){a&&j(e),n[30](null),r=!1,It(i)}}}function t8(n){let e,t;return e=new Ul({props:{pack:n[9],isLeft:!0,icon:n[8]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&512&&(o.pack=r[9]),i[0]&256&&(o.icon=r[8]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function n8(n){let e,t;return e=new Ul({props:{pack:"fas",isRight:!0,isClickable:n[4],icon:n[4]?n[17]:n[15],type:n[4]?"is-primary":n[11]}}),e.$on("click",n[21]),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&16&&(o.isClickable=r[4]),i[0]&163856&&(o.icon=r[4]?r[17]:r[15]),i[0]&2064&&(o.type=r[4]?"is-primary":r[11]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function r8(n){let e,t,r,i;return{c(){e=B("small"),t=Se(n[16]),r=Se(" / "),i=Se(n[5]),C(e,"class","help counter svelte-1v5s752"),oe(e,"is-invisible",!n[13])},m(o,s){H(o,e,s),T(e,t),T(e,r),T(e,i)},p(o,s){s[0]&65536&&ze(t,o[16]),s[0]&32&&ze(i,o[5]),s[0]&8192&&oe(e,"is-invisible",!o[13])},d(o){o&&j(e)}}}function AY(n){let e,t,r,i,o;function s(d,h){return d[1]!=="textarea"?EY:xY}let a=s(n),l=a(n),u=n[8]&&t8(n),c=!n[7]&&(n[4]||n[11])&&n8(n),f=n[5]&&n[6]&&n[1]!=="number"&&r8(n);return{c(){e=B("div"),l.c(),t=K(),u&&u.c(),r=K(),c&&c.c(),i=K(),f&&f.c(),C(e,"class","control svelte-1v5s752"),oe(e,"has-icons-left",n[19]),oe(e,"has-icons-right",n[18]),oe(e,"is-loading",n[7]),oe(e,"is-expanded",n[3])},m(d,h){H(d,e,h),l.m(e,null),T(e,t),u&&u.m(e,null),T(e,r),c&&c.m(e,null),T(e,i),f&&f.m(e,null),o=!0},p(d,h){a===(a=s(d))&&l?l.p(d,h):(l.d(1),l=a(d),l&&(l.c(),l.m(e,t))),d[8]?u?(u.p(d,h),h[0]&256&&x(u,1)):(u=t8(d),u.c(),x(u,1),u.m(e,r)):u&&(de(),D(u,1,1,()=>{u=null}),he()),!d[7]&&(d[4]||d[11])?c?(c.p(d,h),h[0]&2192&&x(c,1)):(c=n8(d),c.c(),x(c,1),c.m(e,i)):c&&(de(),D(c,1,1,()=>{c=null}),he()),d[5]&&d[6]&&d[1]!=="number"?f?f.p(d,h):(f=r8(d),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!o||h[0]&524288)&&oe(e,"has-icons-left",d[19]),(!o||h[0]&262144)&&oe(e,"has-icons-right",d[18]),(!o||h[0]&128)&&oe(e,"is-loading",d[7]),(!o||h[0]&8)&&oe(e,"is-expanded",d[3])},i(d){o||(x(u),x(c),o=!0)},o(d){D(u),D(c),o=!1},d(d){d&&j(e),l.d(),u&&u.d(),c&&c.d(),f&&f.d()}}}function MY(n,e,t){let r,i,o,s,{value:a=""}=e,{type:l="text"}=e,{size:u=""}=e,{expanded:c=!1}=e,{passwordReveal:f=!1}=e,{maxlength:d=null}=e,{hasCounter:h=!0}=e,{loading:p=!1}=e,{icon:m=""}=e,{iconPack:g=""}=e,{disabled:v=!1}=e,b,w,_=!1,y="text",k="",S="",E=null;const M=Ga(),R=pr("type");R&&(k=R()||""),Tn(()=>{t(14,y=l)});async function O(){t(27,_=!_),t(14,y=_?"text":"password"),await dn(),b.focus()}const I=z=>{t(0,a=z.target.value),t(26,e.value=a,e),M("input",z)},P=()=>t(13,w=!0),A=()=>t(13,w=!1),N=dY(mh);function F(z){Go.call(this,n,z)}function V(z){Go.call(this,n,z)}function W(z){rt[z?"unshift":"push"](()=>{b=z,t(12,b)})}function L(z){rt[z?"unshift":"push"](()=>{b=z,t(12,b)})}return n.$$set=z=>{t(26,e=Te(Te({},e),_t(z))),"value"in z&&t(0,a=z.value),"type"in z&&t(1,l=z.type),"size"in z&&t(2,u=z.size),"expanded"in z&&t(3,c=z.expanded),"passwordReveal"in z&&t(4,f=z.passwordReveal),"maxlength"in z&&t(5,d=z.maxlength),"hasCounter"in z&&t(6,h=z.hasCounter),"loading"in z&&t(7,p=z.loading),"icon"in z&&t(8,m=z.icon),"iconPack"in z&&t(9,g=z.iconPack),"disabled"in z&&t(10,v=z.disabled)},n.$$.update=()=>{if(t(20,r={...Z4(e,"class","value","type","size","passwordReveal","hasCounter","loading","disabled")}),n.$$.dirty[0]&256&&t(19,i=!!m),n.$$.dirty[0]&2192&&t(18,o=f||p||k),n.$$.dirty[0]&134217728&&t(17,s=_?"eye-slash":"eye"),n.$$.dirty[0]&2048)switch(k){case"is-success":t(15,S="check");break;case"is-danger":t(15,S="exclamation-circle");break;case"is-info":t(15,S="info-circle");break;case"is-warning":t(15,S="exclamation-triangle");break}n.$$.dirty[0]&1&&(typeof a=="string"?t(16,E=a.length):typeof a=="number"?t(16,E=a.toString().length):t(16,E=0))},e=_t(e),[a,l,u,c,f,d,h,p,m,g,v,k,b,w,y,S,E,s,o,i,r,O,I,P,A,N,e,_,F,V,W,L]}class mg extends ye{constructor(e){super(),be(this,e,MY,AY,Be,{value:0,type:1,size:2,expanded:3,passwordReveal:4,maxlength:5,hasCounter:6,loading:7,icon:8,iconPack:9,disabled:10},null,[-1,-1])}}function i8(n){let e,t,r;return{c(){e=B("button"),C(e,"class","modal-close is-large"),C(e,"aria-label","close")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[6]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function TY(n){let e,t,r,i,o,s,a,l,u,c;const f=n[11].default,d=Je(f,n,n[10],null);let h=n[3]&&i8(n);return{c(){e=B("div"),t=B("div"),r=K(),i=B("div"),d&&d.c(),s=K(),h&&h.c(),C(t,"class","modal-background"),C(i,"class","modal-content"),C(e,"class",a="modal "+n[2]),oe(e,"is-active",n[0])},m(p,m){H(p,e,m),T(e,t),T(e,r),T(e,i),d&&d.m(i,null),T(e,s),h&&h.m(e,null),n[12](e),l=!0,u||(c=[le(window,"keydown",n[7]),le(t,"click",n[6])],u=!0)},p(p,[m]){n=p,d&&d.p&&(!l||m&1024)&&Xe(d,f,n,n[10],l?Ye(f,n[10],m,null):Qe(n[10]),null),n[3]?h?h.p(n,m):(h=i8(n),h.c(),h.m(e,null)):h&&(h.d(1),h=null),(!l||m&4&&a!==(a="modal "+n[2]))&&C(e,"class",a),(!l||m&5)&&oe(e,"is-active",n[0])},i(p){l||(x(d,p),p&&Tr(()=>{l&&(o||(o=Ai(i,n[5],n[1],!0)),o.run(1))}),l=!0)},o(p){D(d,p),p&&(o||(o=Ai(i,n[5],n[1],!1)),o.run(0)),l=!1},d(p){p&&j(e),d&&d.d(p),p&&o&&o.end(),h&&h.d(),n[12](null),u=!1,It(c)}}}function OY(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{active:s=!0}=e,{animation:a="scale"}=e,{animProps:l={start:1.2}}=e,{size:u=""}=e,{showClose:c=!0}=e,{onBody:f=!0}=e,d;Tn(()=>{});function h(){t(0,s=!1)}function p(g){s&&Q4(g)&&h()}function m(g){rt[g?"unshift":"push"](()=>{d=g,t(4,d)})}return n.$$set=g=>{"active"in g&&t(0,s=g.active),"animation"in g&&t(8,a=g.animation),"animProps"in g&&t(1,l=g.animProps),"size"in g&&t(2,u=g.size),"showClose"in g&&t(3,c=g.showClose),"onBody"in g&&t(9,f=g.onBody),"$$scope"in g&&t(10,o=g.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&t(5,r=X4(a)),n.$$.dirty&529&&d&&s&&f&&document.body.appendChild(d)},[s,l,u,c,d,r,h,p,a,f,o,i,m]}let ex=class extends ye{constructor(e){super(),be(this,e,OY,TY,Be,{active:0,animation:8,animProps:1,size:2,showClose:3,onBody:9})}};function DY(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b;const w=n[12].default,_=Je(w,n,n[11],null);return{c(){e=B("div"),t=B("div"),r=K(),i=B("div"),o=B("header"),s=B("p"),a=Se(n[1]),l=K(),u=B("button"),c=K(),f=B("section"),_&&_.c(),d=K(),h=B("footer"),h.innerHTML=`<button class="button is-success">Save changes</button> 
      <button class="button">Cancel</button>`,C(t,"class","modal-background"),C(s,"class","modal-card-title"),C(u,"class","delete"),C(u,"aria-label","close"),C(o,"class","modal-card-head"),C(f,"class","modal-card-body"),C(h,"class","modal-card-foot"),C(i,"class","modal-card"),C(e,"class",m="modal "+n[3]),oe(e,"is-active",n[0])},m(y,k){H(y,e,k),T(e,t),T(e,r),T(e,i),T(i,o),T(o,s),T(s,a),T(o,l),T(o,u),T(i,c),T(i,f),_&&_.m(f,null),T(i,d),T(i,h),n[13](e),g=!0,v||(b=[le(window,"keydown",n[7]),le(t,"click",n[6]),le(u,"click",n[6])],v=!0)},p(y,[k]){n=y,(!g||k&2)&&ze(a,n[1]),_&&_.p&&(!g||k&2048)&&Xe(_,w,n,n[11],g?Ye(w,n[11],k,null):Qe(n[11]),null),(!g||k&8&&m!==(m="modal "+n[3]))&&C(e,"class",m),(!g||k&9)&&oe(e,"is-active",n[0])},i(y){g||(x(_,y),y&&Tr(()=>{g&&(p||(p=Ai(i,n[5],n[2],!0)),p.run(1))}),g=!0)},o(y){D(_,y),y&&(p||(p=Ai(i,n[5],n[2],!1)),p.run(0)),g=!1},d(y){y&&j(e),_&&_.d(y),y&&p&&p.end(),n[13](null),v=!1,It(b)}}}function RY(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{active:s=!0}=e,{title:a="Modal Title"}=e,{animation:l="scale"}=e,{animProps:u={start:1.2}}=e,{size:c=""}=e,{showClose:f=!0}=e,{onBody:d=!0}=e,h;Tn(()=>{});function p(){t(0,s=!1)}function m(v){s&&Q4(v)&&p()}function g(v){rt[v?"unshift":"push"](()=>{h=v,t(4,h)})}return n.$$set=v=>{"active"in v&&t(0,s=v.active),"title"in v&&t(1,a=v.title),"animation"in v&&t(8,l=v.animation),"animProps"in v&&t(2,u=v.animProps),"size"in v&&t(3,c=v.size),"showClose"in v&&t(9,f=v.showClose),"onBody"in v&&t(10,d=v.onBody),"$$scope"in v&&t(11,o=v.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&t(5,r=X4(l)),n.$$.dirty&1041&&h&&s&&d&&document.body.appendChild(h)},[s,a,u,c,h,r,p,m,l,f,d,o,i,g]}class PY extends ye{constructor(e){super(),be(this,e,RY,DY,Be,{active:0,title:1,animation:8,animProps:2,size:3,showClose:9,onBody:10})}}ex.open=nB;PY.open=nB;function nB(n){const e=new ex({target:document.body,props:n,intro:!0});return e.close=()=>e.$destroy(),e}function IY(n){let e,t;return{c(){e=B("div"),C(e,"class",t="notices "+n[1]+" svelte-1mcog5q")},m(r,i){H(r,e,i),n[4](e)},p(r,[i]){i&2&&t!==(t="notices "+r[1]+" svelte-1mcog5q")&&C(e,"class",t)},i:pe,o:pe,d(r){r&&j(e),n[4](null)}}}const $f={};function NY(n,e,t){let{position:r="top"}=e,i,o;function s(l){i.insertAdjacentElement("afterbegin",l)}function a(l){rt[l?"unshift":"push"](()=>{i=l,t(0,i)})}return n.$$set=l=>{"position"in l&&t(2,r=l.position)},n.$$.update=()=>{n.$$.dirty&4&&t(1,o=r==="top"?"is-top":"is-bottom")},[i,o,r,s,a]}class o8 extends ye{constructor(e){super(),be(this,e,NY,IY,Be,{position:2,insert:3})}get insert(){return this.$$.ctx[3]}}function s8(n){let e,t,r,i,o,s,a,l;const u=n[9].default,c=Je(u,n,n[8],null);return{c(){e=B("div"),c&&c.c(),C(e,"class",t="notice "+n[1]+" svelte-1ik1n9x"),C(e,"aria-hidden",r=!n[0])},m(f,d){H(f,e,d),c&&c.m(e,null),n[10](e),s=!0,a||(l=le(e,"outroend",n[5]),a=!0)},p(f,d){n=f,c&&c.p&&(!s||d&256)&&Xe(c,u,n,n[8],s?Ye(u,n[8],d,null):Qe(n[8]),null),(!s||d&2&&t!==(t="notice "+n[1]+" svelte-1ik1n9x"))&&C(e,"class",t),(!s||d&1&&r!==(r=!n[0]))&&C(e,"aria-hidden",r)},i(f){s||(x(c,f),Tr(()=>{s&&(o&&o.end(1),i=UN(e,vb,{y:n[4]}),i.start())}),s=!0)},o(f){D(c,f),i&&i.invalidate(),o=GN(e,vl,{duration:n[2]?400:0}),s=!1},d(f){f&&j(e),c&&c.d(f),n[10](null),f&&o&&o.end(),a=!1,l()}}}function BY(n){let e,t,r=n[0]&&s8(n);return{c(){r&&r.c(),e=Ze()},m(i,o){r&&r.m(i,o),H(i,e,o),t=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&x(r,1)):(r=s8(i),r.c(),x(r,1),r.m(e.parentNode,e)):r&&(de(),D(r,1,1,()=>{r=null}),he())},i(i){t||(x(r),t=!0)},o(i){D(r),t=!1},d(i){r&&r.d(i),i&&j(e)}}}const LY=["active","position","duration"];function bb(n){const e={};return Object.keys(n).forEach(t=>{LY.includes(t)&&(e[t]=n[t])}),e}function FY(n,e,t){let r,{$$slots:i={},$$scope:o}=e;const s=Ga();let{active:a=!0}=e,{position:l="is-top"}=e,{duration:u=2e3}=e,{transitionOut:c=!0}=e,f,d,h;function p(){t(0,a=!1)}function m(){clearTimeout(h),t(0,a=!1),s("destroyed")}async function g(){await dn,$f.top||($f.top=new o8({target:document.body,props:{position:"top"}})),$f.bottom||($f.bottom=new o8({target:document.body,props:{position:"bottom"}}))}function v(){d=$f.top,l&&l.indexOf("is-bottom")===0&&(d=$f.bottom),d.insert(f)}Tn(async()=>{await g(),v(),h=setTimeout(()=>{p()},u)});function b(w){rt[w?"unshift":"push"](()=>{f=w,t(3,f)})}return n.$$set=w=>{"active"in w&&t(0,a=w.active),"position"in w&&t(1,l=w.position),"duration"in w&&t(6,u=w.duration),"transitionOut"in w&&t(2,c=w.transitionOut),"$$scope"in w&&t(8,o=w.$$scope)},n.$$.update=()=>{n.$$.dirty&2&&t(4,r=~l.indexOf("is-top")?-200:200)},[a,l,c,f,r,m,u,p,o,i,b]}class tx extends ye{constructor(e){super(),be(this,e,FY,BY,Be,{active:0,position:1,duration:6,transitionOut:2,close:7})}get close(){return this.$$.ctx[7]}}function a8(n){let e,t,r,i,o,s,a,l,u=n[2]&&l8(n),c=n[3]&&u8(n);const f=n[11].default,d=Je(f,n,n[10],null);return{c(){e=B("article"),u&&u.c(),t=K(),r=B("div"),c&&c.c(),i=K(),o=B("div"),d&&d.c(),C(o,"class","media-content"),C(r,"class","media svelte-87qcq1"),C(e,"class",s="notification "+n[1]+" svelte-87qcq1")},m(h,p){H(h,e,p),u&&u.m(e,null),T(e,t),T(e,r),c&&c.m(r,null),T(r,i),T(r,o),d&&d.m(o,null),l=!0},p(h,p){h[2]?u?u.p(h,p):(u=l8(h),u.c(),u.m(e,t)):u&&(u.d(1),u=null),h[3]?c?(c.p(h,p),p&8&&x(c,1)):(c=u8(h),c.c(),x(c,1),c.m(r,i)):c&&(de(),D(c,1,1,()=>{c=null}),he()),d&&d.p&&(!l||p&1024)&&Xe(d,f,h,h[10],l?Ye(f,h[10],p,null):Qe(h[10]),null),(!l||p&2&&s!==(s="notification "+h[1]+" svelte-87qcq1"))&&C(e,"class",s)},i(h){l||(x(c),x(d,h),h&&Tr(()=>{l&&(a||(a=Ai(e,vl,{},!0)),a.run(1))}),l=!0)},o(h){D(c),D(d,h),h&&(a||(a=Ai(e,vl,{},!1)),a.run(0)),l=!1},d(h){h&&j(e),u&&u.d(),c&&c.d(),d&&d.d(h),h&&a&&a.end()}}}function l8(n){let e,t,r;return{c(){e=B("button"),C(e,"class","delete"),C(e,"aria-label",n[5])},m(i,o){H(i,e,o),t||(r=le(e,"click",n[7]),t=!0)},p(i,o){o&32&&C(e,"aria-label",i[5])},d(i){i&&j(e),t=!1,r()}}}function u8(n){let e,t,r;return t=new Ul({props:{pack:n[4],icon:n[6],size:"is-large"}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","media-left")},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o&16&&(s.pack=i[4]),o&64&&(s.icon=i[6]),t.$set(s)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function zY(n){let e,t,r=n[0]&&a8(n);return{c(){r&&r.c(),e=Ze()},m(i,o){r&&r.m(i,o),H(i,e,o),t=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&x(r,1)):(r=a8(i),r.c(),x(r,1),r.m(e.parentNode,e)):r&&(de(),D(r,1,1,()=>{r=null}),he())},i(i){t||(x(r),t=!0)},o(i){D(r),t=!1},d(i){r&&r.d(i),i&&j(e)}}}function jY(n,e,t){let{$$slots:r={},$$scope:i}=e,{type:o=""}=e,{active:s=!0}=e,{showClose:a=!0}=e,{autoClose:l=!1}=e,{duration:u=2e3}=e,{icon:c=""}=e,{iconPack:f=""}=e,{ariaCloseLabel:d=""}=e;const h=Ga();let p="",m;function g(){t(0,s=!1),m&&clearTimeout(m),h("close",s)}return n.$$set=v=>{"type"in v&&t(1,o=v.type),"active"in v&&t(0,s=v.active),"showClose"in v&&t(2,a=v.showClose),"autoClose"in v&&t(8,l=v.autoClose),"duration"in v&&t(9,u=v.duration),"icon"in v&&t(3,c=v.icon),"iconPack"in v&&t(4,f=v.iconPack),"ariaCloseLabel"in v&&t(5,d=v.ariaCloseLabel),"$$scope"in v&&t(10,i=v.$$scope)},n.$$.update=()=>{n.$$.dirty&10&&(c===!0?t(6,p=fY(o)):t(6,p=c)),n.$$.dirty&769&&s&&l&&(m=setTimeout(()=>{s&&g()},u))},[s,o,a,c,f,d,p,g,l,u,i,r]}class rB extends ye{constructor(e){super(),be(this,e,jY,zY,Be,{type:1,active:0,showClose:2,autoClose:8,duration:9,icon:3,iconPack:4,ariaCloseLabel:5})}}function HY(n){let e,t;return{c(){e=new HN(!1),t=Ze(),e.a=t},m(r,i){e.m(n[0],r,i),H(r,t,i)},p(r,i){i&1&&e.p(r[0])},d(r){r&&j(t),r&&e.d()}}}function VY(n){let e,t;const r=[n[1]];let i={$$slots:{default:[HY]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new rB({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,s){const a=s&2?Ot(r,[an(o[1])]):{};s&129&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function WY(n){let e,t;const r=[n[2],{transitionOut:!0}];let i={$$slots:{default:[VY]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new tx({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&4?Ot(r,[an(o[2]),r[1]]):{};s&131&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function qY(n,e,t){let r,i,{message:o}=e,{duration:s=2e3}=e,{position:a="is-top-right"}=e;function l(u){const c={},f=["duration","message","position"];return Object.keys(u).forEach(d=>{f.includes(d)||(c[d]=u[d])}),c}return n.$$set=u=>{t(6,e=Te(Te({},e),_t(u))),"message"in u&&t(0,o=u.message),"duration"in u&&t(3,s=u.duration),"position"in u&&t(4,a=u.position)},n.$$.update=()=>{t(2,r={...bb(e),duration:s,position:a}),t(1,i={...l(e)})},e=_t(e),[o,i,r,s,a]}class UY extends ye{constructor(e){super(),be(this,e,qY,WY,Be,{message:0,duration:3,position:4})}}rB.create=GY;function GY(n){typeof n=="string"&&(n={message:n});const e=new UY({target:document.body,props:n,intro:!0});return e.$on("destroyed",e.$destroy),e}function KY(n){let e,t,r,i,o,s,a=n[2]&&n[0]===""&&c8(n);const l=n[20].default,u=Je(l,n,n[19],null);return{c(){e=B("select"),a&&a.c(),t=Ze(),u&&u.c(),e.multiple=!0,C(e,"size",n[5]),e.disabled=r=n[12]?"disabled":"",n[0]===void 0&&Tr(()=>n[22].call(e))},m(c,f){H(c,e,f),a&&a.m(e,null),T(e,t),u&&u.m(e,null),NA(e,n[0]),i=!0,o||(s=[le(e,"change",n[22]),le(e,"change",n[15]),le(e,"blur",n[16]),le(e,"hover",n[17]),le(e,"focus",n[18])],o=!0)},p(c,f){c[2]&&c[0]===""?a?a.p(c,f):(a=c8(c),a.c(),a.m(e,t)):a&&(a.d(1),a=null),u&&u.p&&(!i||f&524288)&&Xe(u,l,c,c[19],i?Ye(l,c[19],f,null):Qe(c[19]),null),(!i||f&32)&&C(e,"size",c[5]),(!i||f&4096&&r!==(r=c[12]?"disabled":""))&&(e.disabled=r),f&1&&NA(e,c[0])},i(c){i||(x(u,c),i=!0)},o(c){D(u,c),i=!1},d(c){c&&j(e),a&&a.d(),u&&u.d(c),o=!1,It(s)}}}function JY(n){let e,t,r,i,o,s,a=n[2]&&n[0]===""&&f8(n);const l=n[20].default,u=Je(l,n,n[19],null);return{c(){e=B("select"),a&&a.c(),t=Ze(),u&&u.c(),C(e,"size",n[5]),e.disabled=r=n[12]?"disabled":"",n[0]===void 0&&Tr(()=>n[21].call(e))},m(c,f){H(c,e,f),a&&a.m(e,null),T(e,t),u&&u.m(e,null),ma(e,n[0],!0),i=!0,o||(s=[le(e,"change",n[21]),le(e,"change",n[15]),le(e,"blur",n[16]),le(e,"hover",n[17]),le(e,"focus",n[18])],o=!0)},p(c,f){c[2]&&c[0]===""?a?a.p(c,f):(a=f8(c),a.c(),a.m(e,t)):a&&(a.d(1),a=null),u&&u.p&&(!i||f&524288)&&Xe(u,l,c,c[19],i?Ye(l,c[19],f,null):Qe(c[19]),null),(!i||f&32)&&C(e,"size",c[5]),(!i||f&4096&&r!==(r=c[12]?"disabled":""))&&(e.disabled=r),f&1&&ma(e,c[0])},i(c){i||(x(u,c),i=!0)},o(c){D(u,c),i=!1},d(c){c&&j(e),a&&a.d(),u&&u.d(c),o=!1,It(s)}}}function c8(n){let e,t,r;return{c(){e=B("option"),t=Se(n[2]),r=K(),e.__value="",e.value=e.__value,e.disabled=!0,e.hidden=!0},m(i,o){H(i,e,o),T(e,t),T(e,r)},p(i,o){o&4&&ze(t,i[2])},d(i){i&&j(e)}}}function f8(n){let e,t,r;return{c(){e=B("option"),t=Se(n[2]),r=K(),e.__value="",e.value=e.__value,e.disabled=!0,e.hidden=!0},m(i,o){H(i,e,o),T(e,t),T(e,r)},p(i,o){o&4&&ze(t,i[2])},d(i){i&&j(e)}}}function d8(n){let e,t;return e=new Ul({props:{isLeft:!0,icon:n[10],pack:n[11],size:n[4]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1024&&(o.icon=r[10]),i&2048&&(o.pack=r[11]),i&16&&(o.size=r[4]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function YY(n){let e,t,r,i,o,s,a;const l=[JY,KY],u=[];function c(d,h){return d[3]?1:0}r=c(n),i=u[r]=l[r](n);let f=n[10]&&d8(n);return{c(){e=B("div"),t=B("span"),i.c(),s=K(),f&&f.c(),C(t,"class",o="select "+n[4]+" "+n[1]),oe(t,"is-fullwidth",n[6]),oe(t,"is-loading",n[9]),oe(t,"is-multiple",n[3]),oe(t,"is-rounded",n[7]),oe(t,"is-empty",n[0]===""),oe(t,"is-focused",n[13]),oe(t,"is-hovered",n[14]),oe(t,"is-required",n[8]),C(e,"class","control"),oe(e,"is-expanded",n[6]),oe(e,"has-icons-left",n[10])},m(d,h){H(d,e,h),T(e,t),u[r].m(t,null),T(e,s),f&&f.m(e,null),a=!0},p(d,[h]){let p=r;r=c(d),r===p?u[r].p(d,h):(de(),D(u[p],1,1,()=>{u[p]=null}),he(),i=u[r],i?i.p(d,h):(i=u[r]=l[r](d),i.c()),x(i,1),i.m(t,null)),(!a||h&18&&o!==(o="select "+d[4]+" "+d[1]))&&C(t,"class",o),(!a||h&82)&&oe(t,"is-fullwidth",d[6]),(!a||h&530)&&oe(t,"is-loading",d[9]),(!a||h&26)&&oe(t,"is-multiple",d[3]),(!a||h&146)&&oe(t,"is-rounded",d[7]),(!a||h&19)&&oe(t,"is-empty",d[0]===""),(!a||h&8210)&&oe(t,"is-focused",d[13]),(!a||h&16402)&&oe(t,"is-hovered",d[14]),(!a||h&274)&&oe(t,"is-required",d[8]),d[10]?f?(f.p(d,h),h&1024&&x(f,1)):(f=d8(d),f.c(),x(f,1),f.m(e,null)):f&&(de(),D(f,1,1,()=>{f=null}),he()),(!a||h&64)&&oe(e,"is-expanded",d[6]),(!a||h&1024)&&oe(e,"has-icons-left",d[10])},i(d){a||(x(i),x(f),a=!0)},o(d){D(i),D(f),a=!1},d(d){d&&j(e),u[r].d(),f&&f.d()}}}function XY(n,e,t){let{$$slots:r={},$$scope:i}=e,{selected:o=""}=e,{type:s=""}=e,{placeholder:a=""}=e,{multiple:l=!1}=e,{size:u=""}=e,{nativeSize:c}=e,{expanded:f=!1}=e,{rounded:d=!1}=e,{required:h=!1}=e,{loading:p=!1}=e,{icon:m=""}=e,{iconPack:g="mdi"}=e,{disabled:v=!1}=e;const b=Ga();let w=!1,_=!1;function y(){b("input",o)}function k(){t(13,w=!1),b("blur")}function S(){t(14,_=!0),b("hover")}function E(){t(13,w=!0),b("focus")}function M(){o=Lv(this),t(0,o)}function R(){o=kJ(this),t(0,o)}return n.$$set=O=>{"selected"in O&&t(0,o=O.selected),"type"in O&&t(1,s=O.type),"placeholder"in O&&t(2,a=O.placeholder),"multiple"in O&&t(3,l=O.multiple),"size"in O&&t(4,u=O.size),"nativeSize"in O&&t(5,c=O.nativeSize),"expanded"in O&&t(6,f=O.expanded),"rounded"in O&&t(7,d=O.rounded),"required"in O&&t(8,h=O.required),"loading"in O&&t(9,p=O.loading),"icon"in O&&t(10,m=O.icon),"iconPack"in O&&t(11,g=O.iconPack),"disabled"in O&&t(12,v=O.disabled),"$$scope"in O&&t(19,i=O.$$scope)},[o,s,a,l,u,c,f,d,h,p,m,g,v,w,_,y,k,S,E,i,r,M,R]}let QY=class extends ye{constructor(e){super(),be(this,e,XY,YY,Be,{selected:0,type:1,placeholder:2,multiple:3,size:4,nativeSize:5,expanded:6,rounded:7,required:8,loading:9,icon:10,iconPack:11,disabled:12})}};function h8(n){let e,t,r,i,o,s;return{c(){e=B("div"),t=B("button"),r=Se(n[2]),C(t,"class",i="button "+n[5]+" svelte-okuiox"),C(e,"class","action svelte-okuiox")},m(a,l){H(a,e,l),T(e,t),T(t,r),o||(s=le(e,"click",n[6]),o=!0)},p(a,l){l&4&&ze(r,a[2]),l&32&&i!==(i="button "+a[5]+" svelte-okuiox")&&C(t,"class",i)},d(a){a&&j(e),o=!1,s()}}}function ZY(n){let e,t,r,i,o=n[2]&&h8(n);return{c(){e=B("div"),t=B("div"),r=K(),o&&o.c(),C(t,"class","text svelte-okuiox"),C(e,"class",i="snackbar "+n[1]+" svelte-okuiox"),C(e,"role","alert"),oe(e,"has-background-dark",!n[1])},m(s,a){H(s,e,a),T(e,t),t.innerHTML=n[0],T(e,r),o&&o.m(e,null)},p(s,a){a&1&&(t.innerHTML=s[0]),s[2]?o?o.p(s,a):(o=h8(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null),a&2&&i!==(i="snackbar "+s[1]+" svelte-okuiox")&&C(e,"class",i),a&2&&oe(e,"has-background-dark",!s[1])},d(s){s&&j(e),o&&o.d()}}}function $Y(n){let e,t;const r=[n[4],{transitionOut:!0}];let i={$$slots:{default:[ZY]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new tx({props:i}),n[11](e),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&16?Ot(r,[an(o[4]),r[1]]):{};s&8231&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){n[11](null),Z(e,o)}}}function eX(n,e,t){let r,i,{message:o}=e,{duration:s=3500}=e,{position:a="is-bottom-right"}=e,{type:l="is-primary"}=e,{background:u=""}=e,{actionText:c="OK"}=e,{onAction:f=()=>{}}=e,d;function h(){Promise.resolve(f()).then(()=>d.close())}Tn(()=>{if(typeof f!="function")throw new Error(`onAction ${f} is not a function`)});function p(m){rt[m?"unshift":"push"](()=>{d=m,t(3,d)})}return n.$$set=m=>{t(12,e=Te(Te({},e),_t(m))),"message"in m&&t(0,o=m.message),"duration"in m&&t(7,s=m.duration),"position"in m&&t(8,a=m.position),"type"in m&&t(9,l=m.type),"background"in m&&t(1,u=m.background),"actionText"in m&&t(2,c=m.actionText),"onAction"in m&&t(10,f=m.onAction)},n.$$.update=()=>{n.$$.dirty&512&&t(5,r=l&&l.replace(/^is-(.*)/,"has-text-$1")),t(4,i={...bb(e),position:a,duration:s})},e=_t(e),[o,u,c,d,i,r,h,s,a,l,f,p]}class iB extends ye{constructor(e){super(),be(this,e,eX,$Y,Be,{message:0,duration:7,position:8,type:9,background:1,actionText:2,onAction:10})}}iB.create=tX;function tX(n){typeof n=="string"&&(n={message:n});const e=new iB({target:document.body,props:n,intro:!0});return e.$on("destroyed",e.$destroy),e}function nX(n){let e,t,r,i,o,s,a,l,u,c,f;const d=n[8].default,h=Je(d,n,n[7],null);return{c(){e=B("label"),t=B("input"),r=K(),i=B("div"),s=K(),a=B("span"),h&&h.c(),C(t,"type","checkbox"),C(t,"class","svelte-yafg9m"),C(i,"class",o="check "+n[4]+" svelte-yafg9m"),C(a,"class","control-label svelte-yafg9m"),C(e,"ref","label"),C(e,"class",l="switch "+n[1]+" svelte-yafg9m")},m(p,m){H(p,e,m),T(e,t),t.checked=n[0],n[12](t),T(e,r),T(e,i),T(e,s),T(e,a),h&&h.m(a,null),n[13](e),u=!0,c||(f=[le(t,"change",n[11]),le(t,"input",n[9]),le(t,"click",n[10])],c=!0)},p(p,[m]){m&1&&(t.checked=p[0]),(!u||m&16&&o!==(o="check "+p[4]+" svelte-yafg9m"))&&C(i,"class",o),h&&h.p&&(!u||m&128)&&Xe(h,d,p,p[7],u?Ye(d,p[7],m,null):Qe(p[7]),null),(!u||m&2&&l!==(l="switch "+p[1]+" svelte-yafg9m"))&&C(e,"class",l)},i(p){u||(x(h,p),u=!0)},o(p){D(h,p),u=!1},d(p){p&&j(e),n[12](null),h&&h.d(p),n[13](null),c=!1,It(f)}}}function rX(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{checked:s=!1}=e,{type:a="is-primary"}=e,{size:l=""}=e,{disabled:u=!1}=e,c,f;function d(v){Go.call(this,n,v)}function h(v){Go.call(this,n,v)}function p(){s=this.checked,t(0,s)}function m(v){rt[v?"unshift":"push"](()=>{f=v,t(3,f)})}function g(v){rt[v?"unshift":"push"](()=>{c=v,t(2,c)})}return n.$$set=v=>{"checked"in v&&t(0,s=v.checked),"type"in v&&t(5,a=v.type),"size"in v&&t(1,l=v.size),"disabled"in v&&t(6,u=v.disabled),"$$scope"in v&&t(7,o=v.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&t(4,r=a&&a.replace(/^is-(.*)/,"has-background-$1")||""),n.$$.dirty&76&&f&&(u?(c.setAttribute("disabled","disabled"),f.setAttribute("disabled","disabled")):(c.removeAttribute("disabled"),f.removeAttribute("disabled")))},[s,l,c,f,r,a,u,o,i,d,h,p,m,g]}class iX extends ye{constructor(e){super(),be(this,e,rX,nX,Be,{checked:0,type:5,size:1,disabled:6})}}function oX(n){let e,t,r;return{c(){e=B("div"),t=B("div"),C(t,"class","text"),C(e,"class",r="toast "+n[1]+" "+n[2]+" svelte-1x5tk23"),C(e,"role","alert")},m(i,o){H(i,e,o),T(e,t),t.innerHTML=n[0]},p(i,o){o&1&&(t.innerHTML=i[0]),o&6&&r!==(r="toast "+i[1]+" "+i[2]+" svelte-1x5tk23")&&C(e,"class",r)},d(i){i&&j(e)}}}function sX(n){let e,t;const r=[bb(n[3])];let i={$$slots:{default:[oX]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new tx({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&8?Ot(r,[an(bb(o[3]))]):{};s&39&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function aX(n,e,t){let r,{message:i}=e,{type:o="is-dark"}=e,{background:s=""}=e;return n.$$set=a=>{t(3,e=Te(Te({},e),_t(a))),"message"in a&&t(0,i=a.message),"type"in a&&t(1,o=a.type),"background"in a&&t(4,s=a.background)},n.$$.update=()=>{n.$$.dirty&18&&t(2,r=s||o.replace(/^is-(.*)/,"has-background-$1"))},e=_t(e),[i,o,r,e,s]}class oB extends ye{constructor(e){super(),be(this,e,aX,sX,Be,{message:0,type:1,background:4})}}oB.create=lX;function lX(n){typeof n=="string"&&(n={message:n});const e=new oB({target:document.body,props:n,intro:!0});return e.$on("destroyed",e.$destroy),e}function uX(n){let e,t,r,i,o;const s=n[10].default,a=Je(s,n,n[9],null);let l=n[3]&&p8(n);return{c(){e=B("span"),t=B("span"),a&&a.c(),r=K(),l&&l.c(),oe(t,"has-ellipsis",n[5]),C(e,"class",i="tag "+n[0]+" "+n[1]),oe(e,"is-rounded",n[2])},m(u,c){H(u,e,c),T(e,t),a&&a.m(t,null),T(e,r),l&&l.m(e,null),o=!0},p(u,c){a&&a.p&&(!o||c&512)&&Xe(a,s,u,u[9],o?Ye(s,u[9],c,null):Qe(u[9]),null),(!o||c&32)&&oe(t,"has-ellipsis",u[5]),u[3]?l?l.p(u,c):(l=p8(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null),(!o||c&3&&i!==(i="tag "+u[0]+" "+u[1]))&&C(e,"class",i),(!o||c&7)&&oe(e,"is-rounded",u[2])},i(u){o||(x(a,u),o=!0)},o(u){D(a,u),o=!1},d(u){u&&j(e),a&&a.d(u),l&&l.d()}}}function cX(n){let e,t,r,i,o,s,a,l,u,c,f;const d=n[10].default,h=Je(d,n,n[9],null);return{c(){e=B("div"),t=B("span"),r=B("span"),h&&h.c(),o=K(),s=B("a"),oe(r,"has-ellipsis",n[5]),C(t,"class",i="tag "+n[0]+" "+n[1]),oe(t,"is-rounded",n[2]),C(s,"role","button"),C(s,"class",a="tag is-delete "+n[1]),C(s,"disabled",n[7]),C(s,"tabindex",l=n[6]?0:!1),oe(s,"is-rounded",n[2]),C(e,"class","tags has-addons")},m(p,m){H(p,e,m),T(e,t),T(t,r),h&&h.m(r,null),T(e,o),T(e,s),u=!0,c||(f=[le(s,"click",n[8]),le(s,"keyup",Pa(n[11]))],c=!0)},p(p,m){h&&h.p&&(!u||m&512)&&Xe(h,d,p,p[9],u?Ye(d,p[9],m,null):Qe(p[9]),null),(!u||m&32)&&oe(r,"has-ellipsis",p[5]),(!u||m&3&&i!==(i="tag "+p[0]+" "+p[1]))&&C(t,"class",i),(!u||m&7)&&oe(t,"is-rounded",p[2]),(!u||m&2&&a!==(a="tag is-delete "+p[1]))&&C(s,"class",a),(!u||m&128)&&C(s,"disabled",p[7]),(!u||m&64&&l!==(l=p[6]?0:!1))&&C(s,"tabindex",l),(!u||m&6)&&oe(s,"is-rounded",p[2])},i(p){u||(x(h,p),u=!0)},o(p){D(h,p),u=!1},d(p){p&&j(e),h&&h.d(p),c=!1,It(f)}}}function p8(n){let e,t,r,i;return{c(){e=B("a"),C(e,"role","button"),C(e,"class","delete is-small"),C(e,"disabled",n[7]),C(e,"tabindex",t=n[6]?0:!1)},m(o,s){H(o,e,s),r||(i=[le(e,"click",n[8]),le(e,"keyup",Pa(n[12]))],r=!0)},p(o,s){s&128&&C(e,"disabled",o[7]),s&64&&t!==(t=o[6]?0:!1)&&C(e,"tabindex",t)},d(o){o&&j(e),r=!1,It(i)}}}function fX(n){let e,t,r,i;const o=[cX,uX],s=[];function a(l,u){return l[4]&&l[3]?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=Ze()},m(l,u){s[e].m(l,u),H(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?s[e].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r))},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){s[e].d(l),l&&j(r)}}}function dX(n,e,t){let{$$slots:r={},$$scope:i}=e,{type:o=""}=e,{size:s=""}=e,{rounded:a=!1}=e,{closable:l=!1}=e,{attached:u=!1}=e,{ellipsis:c=!1}=e,{tabstop:f=!0}=e,{disabled:d=!1}=e;const h=Ga();function p(){this.disabled||h("close")}const m=v=>VA()&&p(),g=v=>VA()&&p();return n.$$set=v=>{"type"in v&&t(0,o=v.type),"size"in v&&t(1,s=v.size),"rounded"in v&&t(2,a=v.rounded),"closable"in v&&t(3,l=v.closable),"attached"in v&&t(4,u=v.attached),"ellipsis"in v&&t(5,c=v.ellipsis),"tabstop"in v&&t(6,f=v.tabstop),"disabled"in v&&t(7,d=v.disabled),"$$scope"in v&&t(9,i=v.$$scope)},[o,s,a,l,u,c,f,d,p,i,r,m,g]}let sB=class extends ye{constructor(e){super(),be(this,e,dX,fX,Be,{type:0,size:1,rounded:2,closable:3,attached:4,ellipsis:5,tabstop:6,disabled:7})}};function hX(n){let e,t;const r=n[2].default,i=Je(r,n,n[1],null);return{c(){e=B("div"),i&&i.c(),C(e,"class","tags"),oe(e,"has-addons",n[0])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&2)&&Xe(i,r,o,o[1],t?Ye(r,o[1],s,null):Qe(o[1]),null),(!t||s&1)&&oe(e,"has-addons",o[0])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function pX(n,e,t){let{$$slots:r={},$$scope:i}=e,{attached:o=!1}=e;return n.$$set=s=>{"attached"in s&&t(0,o=s.attached),"$$scope"in s&&t(1,i=s.$$scope)},[o,i,r]}class aB extends ye{constructor(e){super(),be(this,e,pX,hX,Be,{attached:0})}}function zv(){}function mX(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function gX(n,...e){if(n==null)return zv;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function yb(n){let e;return gX(n,t=>e=t)(),e}Promise.resolve();const ed=[];function lB(n,e){return{subscribe:uB(n,e).subscribe}}function uB(n,e=zv){let t;const r=new Set;function i(a){if(mX(n,a)&&(n=a,t)){const l=!ed.length;for(const u of r)u[1](),ed.push(u,n);if(l){for(let u=0;u<ed.length;u+=2)ed[u][0](ed[u+1]);ed.length=0}}}function o(a){i(a(n))}function s(a,l=zv){const u=[a,l];return r.add(u),r.size===1&&(t=e(i)||zv),a(n),()=>{r.delete(u),r.size===0&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}const cB=uB(void 0),nx=lB(void 0,n=>{cB.subscribe(e=>{n(e)})}),m8=(n,e,t,r)=>{t(n.getResourceLoading(e,r));const i=o=>{t(o)};return n.subscribe(e,i),()=>{n.unsubscribe(e,i)}},fB=(n,e)=>{const t=yb(nx),r=typeof n=="string"?n:yb(n);return lB(t.getResourceLoading(r,e),i=>{if(typeof n!="string"){let o;const s=n.subscribe(a=>{o==null||o(),i(t.getResourceLoading(a,e)),o=m8(t,a,i,e)});return()=>{s(),o==null||o()}}else return m8(t,n,i,e)})},_b=(n,e,t=!1)=>{const r=yb(nx);let i=yb(n);n.subscribe(f=>i=f);let o=i.get(e);const s=new Set;let a=!1;const l=f=>{o=f.get(e),u()},u=()=>{for(const f of s)f(o)},c=async f=>{o=f,f===void 0?i.removePropVal(e):i.set(e,f,r,!1),t&&await i.save(r),await r.notify(i)};return{set(f){c(f),u()},subscribe(f){return a||(r.subscribe(i.getSubject(),l),a=!0),s.add(f),f(o),()=>{s.delete(f),s.size===0&&(r.unsubscribe(i.getSubject(),l),a=!1)}},update(f){c(f(o)).then(()=>{u()})}}},vX=n=>{cB.set(n)};var yw=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g8=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},I3=new Map;function bX(){for(var n,e,t,r,i,o,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];try{for(var l=yw(s),u=l.next();!u.done;u=l.next()){var c=u.value;try{for(var f=(t=void 0,yw(Object.entries(c.classes))),d=f.next();!d.done;d=f.next()){var h=g8(d.value,2),p=h[0],m=h[1];I3.set(m,p)}}catch(w){t={error:w}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}try{for(var g=(i=void 0,yw(Object.entries(c.properties))),v=g.next();!v.done;v=g.next()){var b=g8(v.value,2),p=b[0],m=b[1];I3.set(m,p)}}catch(w){i={error:w}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}}}catch(w){n={error:w}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(n)throw n.error}}}function yX(n){return I3.get(n)}var rx={classes:{class:"https://atomicdata.dev/classes/Class",property:"https://atomicdata.dev/classes/Property",agent:"https://atomicdata.dev/classes/Agent",datatype:"https://atomicdata.dev/classes/Datatype",ontology:"https://atomicdata.dev/class/ontology"},properties:{allowsOnly:"https://atomicdata.dev/properties/allowsOnly",classtype:"https://atomicdata.dev/properties/classtype",datatype:"https://atomicdata.dev/properties/datatype",description:"https://atomicdata.dev/properties/description",incomplete:"https://atomicdata.dev/properties/incomplete",isA:"https://atomicdata.dev/properties/isA",isDynamic:"https://atomicdata.dev/properties/isDynamic",name:"https://atomicdata.dev/properties/name",parent:"https://atomicdata.dev/properties/parent",read:"https://atomicdata.dev/properties/read",recommends:"https://atomicdata.dev/properties/recommends",requires:"https://atomicdata.dev/properties/requires",shortname:"https://atomicdata.dev/properties/shortname",write:"https://atomicdata.dev/properties/write",publicKey:"https://atomicdata.dev/properties/publicKey",instances:"https://atomicdata.dev/properties/instances",properties:"https://atomicdata.dev/properties/properties",classes:"https://atomicdata.dev/properties/classes",isLocked:"https://atomicdata.dev/properties/isLocked"}},N3={classes:{commit:"https://atomicdata.dev/classes/Commit"},properties:{subject:"https://atomicdata.dev/properties/subject",createdAt:"https://atomicdata.dev/properties/createdAt",lastCommit:"https://atomicdata.dev/properties/lastCommit",previousCommit:"https://atomicdata.dev/properties/previousCommit",signer:"https://atomicdata.dev/properties/signer",set:"https://atomicdata.dev/properties/set",push:"https://atomicdata.dev/properties/push",remove:"https://atomicdata.dev/properties/remove",destroy:"https://atomicdata.dev/properties/destroy",signature:"https://atomicdata.dev/properties/signature"}},dB={classes:{collection:"https://atomicdata.dev/classes/Collection"},properties:{members:"https://atomicdata.dev/properties/collection/members",currentPage:"https://atomicdata.dev/properties/collection/currentPage",pageSize:"https://atomicdata.dev/properties/collection/pageSize",property:"https://atomicdata.dev/properties/collection/property",totalMembers:"https://atomicdata.dev/properties/collection/totalMembers",totalPages:"https://atomicdata.dev/properties/collection/totalPages",value:"https://atomicdata.dev/properties/collection/value",sortBy:"https://atomicdata.dev/properties/collection/sortBy",sortDesc:"https://atomicdata.dev/properties/collection/sortDesc",includeExternal:"https://atomicdata.dev/properties/collection/includeExternal"}},_X={classes:{chatroom:"https://atomicdata.dev/classes/ChatRoom",document:"https://atomicdata.dev/classes/Document",bookmark:"https://atomicdata.dev/class/Bookmark",paragraph:"https://atomicdata.dev/classes/elements/Paragraph",message:"https://atomicdata.dev/classes/Message",importer:"https://atomicdata.dev/classes/Importer",folder:"https://atomicdata.dev/classes/Folder",article:"https://atomicdata.dev/classes/Article",displayStyle:"https://atomicdata.dev/class/DisplayStyle",dateFormat:"https://atomicdata.dev/classes/DateFormat",numberFormat:"https://atomicdata.dev/classes/NumberFormat",rangeProperty:"https://atomicdata.dev/classes/RangeProperty",floatRangeProperty:"https://atomicdata.dev/classes/FloatRangeProperty",formattedNumber:"https://atomicdata.dev/classes/FormattedNumber",selectProperty:"https://atomicdata.dev/classes/SelectProperty",formattedDate:"https://atomicdata.dev/classes/FormattedDate",table:"https://atomicdata.dev/classes/Table",tag:"https://atomicdata.dev/classes/Tag"},properties:{subResources:"https://atomicdata.dev/properties/subresources",displayStyle:"https://atomicdata.dev/property/display-style",publishedAt:"https://atomicdata.dev/properties/published-at",elements:"https://atomicdata.dev/properties/documents/elements",messages:"https://atomicdata.dev/properties/messages",nextPage:"https://atomicdata.dev/properties/nextPage",replyTo:"https://atomicdata.dev/properties/replyTo",url:"https://atomicdata.dev/property/url",preview:"https://atomicdata.dev/property/preview",imageUrl:"https://atomicdata.dev/properties/imageUrl",max:"https://atomicdata.dev/properties/max",min:"https://atomicdata.dev/properties/min",maxFloat:"https://atomicdata.dev/properties/maxFloat",minFloat:"https://atomicdata.dev/properties/minFloat",numberFormatting:"https://atomicdata.dev/properties/numberFormatting",decimalPlaces:"https://atomicdata.dev/properties/decimalPlaces",dateFormat:"https://atomicdata.dev/properties/dateFormat",tableColumnWidths:"https://atomicdata.dev/properties/tableColumnWidths",customNodePositioning:"https://atomicdata.dev/properties/custom-node-positioning",color:"https://atomicdata.dev/properties/color",emoji:"https://atomicdata.dev/properties/emoji",tags:"https://atomicdata.dev/properties/tags"}},wX={classes:{error:"https://atomicdata.dev/classes/Error",endpoint:"https://atomicdata.dev/classes/Endpoint",drive:"https://atomicdata.dev/classes/Drive",redirect:"https://atomicdata.dev/classes/Redirect",file:"https://atomicdata.dev/classes/File",invite:"https://atomicdata.dev/classes/Invite",endpointResponse:"https://atomicdata.dev/ontology/server/class/endpoint-response"},properties:{drives:"https://atomicdata.dev/properties/drives",results:"https://atomicdata.dev/properties/endpoint/results",property:"https://atomicdata.dev/properties/search/property",redirectAgent:"https://atomicdata.dev/properties/invite/redirectAgent",agent:"https://atomicdata.dev/properties/invite/agent",publicKey:"https://atomicdata.dev/properties/invite/publicKey",target:"https://atomicdata.dev/properties/invite/target",usagesLeft:"https://atomicdata.dev/properties/invite/usagesLeft",users:"https://atomicdata.dev/properties/invite/users",write:"https://atomicdata.dev/properties/invite/write",filename:"https://atomicdata.dev/properties/filename",filesize:"https://atomicdata.dev/properties/filesize",downloadUrl:"https://atomicdata.dev/properties/downloadURL",mimetype:"https://atomicdata.dev/properties/mimetype",attachments:"https://atomicdata.dev/properties/attachments",createdBy:"https://atomicdata.dev/properties/createdBy",checksum:"https://atomicdata.dev/properties/checksum",internalId:"https://atomicdata.dev/properties/internalId",children:"https://atomicdata.dev/properties/children",parameters:"https://atomicdata.dev/properties/endpoint/parameters",destination:"https://atomicdata.dev/properties/destination",status:"https://atomicdata.dev/ontology/server/property/status",responseMessage:"https://atomicdata.dev/ontology/server/property/response-message"}};function kX(){bX(rx,N3,dB,_X,wX)}var v8=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},b8=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},CX=function(){function n(e,t){if(t&&Cl.tryValidSubject(t),!e)throw new Bo("Agent requires a private key");this.client=new Cl,this.subject=t,this.privateKey=e}return n.fromSecret=function(e){var t=atob(e),r=JSON.parse(t),i=r.privateKey,o=r.subject,s=new n(i,o);return s},n.prototype.getPublicKey=function(){return v8(this,void 0,void 0,function(){var e;return b8(this,function(t){switch(t.label){case 0:return this.publicKey?[3,2]:[4,pQ(this.privateKey)];case 1:e=t.sent(),this.publicKey=e,t.label=2;case 2:return[2,this.publicKey]}})})},n.prototype.buildSecret=function(){var e=JSON.stringify(this);return btoa(e)},n.prototype.verifyPublicKeyWithServer=function(){var e;return v8(this,void 0,void 0,function(){var t,r,i;return b8(this,function(o){switch(o.label){case 0:if(!this.subject)throw new Bo("Agent has no subject");return[4,this.client.fetchResourceHTTP(this.subject)];case 1:if(t=o.sent().resource,t.error)throw new Error("Could not fetch agent, and could therefore not check validity of public key. ".concat(t.error));return r=(e=t.get(yr.agent.publicKey))===null||e===void 0?void 0:e.toString(),i=r,[4,this.getPublicKey()];case 2:if(i!==o.sent())throw new Error("Fetched publickey does not match current one - is the private key correct?");return[2]}})})},n}(),ix=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},ox=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function hB(n,e){return ix(this,void 0,void 0,function(){var t,r,i,o,s;return ox(this,function(a){switch(a.label){case 0:if(t=cx(),!e.subject)throw new Error("Agent has no subject, cannot authenticate");return s={"https://atomicdata.dev/properties/auth/agent":e.subject,"https://atomicdata.dev/properties/auth/requestedSubject":n},i="https://atomicdata.dev/properties/auth/publicKey",[4,e.getPublicKey()];case 1:return s[i]=a.sent(),s["https://atomicdata.dev/properties/auth/timestamp"]=t,o="https://atomicdata.dev/properties/auth/signature",[4,pB(n,e,t)];case 2:return r=(s[o]=a.sent(),s),[2,r]}})})}function pB(n,e,t){return ix(this,void 0,void 0,function(){var r;return ox(this,function(i){switch(i.label){case 0:return r="".concat(n," ").concat(t),[4,xB(r,e.privateKey)];case 1:return[2,i.sent()]}})})}function SX(n,e){var t;return!n.startsWith("http://localhost")&&((t=e==null?void 0:e.subject)===null||t===void 0?void 0:t.startsWith("http://localhost"))}function y8(n,e,t){return ix(this,void 0,void 0,function(){var r,i,o,s,a;return ox(this,function(l){switch(l.label){case 0:return r=cx(),e!=null&&e.subject&&!SX(n,e)?(i=t,o="x-atomic-public-key",[4,e.getPublicKey()]):[3,3];case 1:return i[o]=l.sent(),s=t,a="x-atomic-signature",[4,pB(n,e,r)];case 2:s[a]=l.sent(),t["x-atomic-timestamp"]=r,t["x-atomic-agent"]=e==null?void 0:e.subject,l.label=3;case 3:return[2,t]}})})}var xX=24*60*60*1e3,EX=function(n,e,t,r){r===void 0&&(r=xX);var i=new Date(Date.now()+r).toUTCString(),o=encodeURIComponent(e),s=new URL(t).hostname,a="".concat(n,"=").concat(o,";Expires=").concat(i,";Domain=").concat(s,";SameSite=Lax;path=/");document.cookie=a},mB="atomic_session",gB=function(n,e){hB(n,e).then(function(t){EX(mB,btoa(JSON.stringify(t)),n)})},AX=function(){var n=document.cookie.match(/^(.*;)?\s*atomic_session\s*=\s*[^;]+(.*)?$/);return n?n.length>0:!1},MX=function(){document.cookie="".concat(mB,"=;Max-Age=-99999999")};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;function jv(){return globalThis===globalThis.window}var TX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var B3={exports:{}};(function(n,e){var t=typeof self<"u"?self:TX,r=function(){function o(){this.fetch=!1,this.DOMException=t.DOMException}return o.prototype=t,new o}();(function(o){(function(s){var a={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function l(A){return A&&DataView.prototype.isPrototypeOf(A)}if(a.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(A){return A&&u.indexOf(Object.prototype.toString.call(A))>-1};function f(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(A))throw new TypeError("Invalid character in header field name");return A.toLowerCase()}function d(A){return typeof A!="string"&&(A=String(A)),A}function h(A){var N={next:function(){var F=A.shift();return{done:F===void 0,value:F}}};return a.iterable&&(N[Symbol.iterator]=function(){return N}),N}function p(A){this.map={},A instanceof p?A.forEach(function(N,F){this.append(F,N)},this):Array.isArray(A)?A.forEach(function(N){this.append(N[0],N[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(N){this.append(N,A[N])},this)}p.prototype.append=function(A,N){A=f(A),N=d(N);var F=this.map[A];this.map[A]=F?F+", "+N:N},p.prototype.delete=function(A){delete this.map[f(A)]},p.prototype.get=function(A){return A=f(A),this.has(A)?this.map[A]:null},p.prototype.has=function(A){return this.map.hasOwnProperty(f(A))},p.prototype.set=function(A,N){this.map[f(A)]=d(N)},p.prototype.forEach=function(A,N){for(var F in this.map)this.map.hasOwnProperty(F)&&A.call(N,this.map[F],F,this)},p.prototype.keys=function(){var A=[];return this.forEach(function(N,F){A.push(F)}),h(A)},p.prototype.values=function(){var A=[];return this.forEach(function(N){A.push(N)}),h(A)},p.prototype.entries=function(){var A=[];return this.forEach(function(N,F){A.push([F,N])}),h(A)},a.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function m(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function g(A){return new Promise(function(N,F){A.onload=function(){N(A.result)},A.onerror=function(){F(A.error)}})}function v(A){var N=new FileReader,F=g(N);return N.readAsArrayBuffer(A),F}function b(A){var N=new FileReader,F=g(N);return N.readAsText(A),F}function w(A){for(var N=new Uint8Array(A),F=new Array(N.length),V=0;V<N.length;V++)F[V]=String.fromCharCode(N[V]);return F.join("")}function _(A){if(A.slice)return A.slice(0);var N=new Uint8Array(A.byteLength);return N.set(new Uint8Array(A)),N.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(A){this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:a.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:a.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():a.arrayBuffer&&a.blob&&l(A)?(this._bodyArrayBuffer=_(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||c(A))?this._bodyArrayBuffer=_(A):this._bodyText=A=Object.prototype.toString.call(A):this._bodyText="",this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var A=m(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var A=m(this);if(A)return A;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function S(A){var N=A.toUpperCase();return k.indexOf(N)>-1?N:A}function E(A,N){N=N||{};var F=N.body;if(A instanceof E){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,N.headers||(this.headers=new p(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!F&&A._bodyInit!=null&&(F=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new p(N.headers)),this.method=S(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&F)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(F)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function M(A){var N=new FormData;return A.trim().split("&").forEach(function(F){if(F){var V=F.split("="),W=V.shift().replace(/\+/g," "),L=V.join("=").replace(/\+/g," ");N.append(decodeURIComponent(W),decodeURIComponent(L))}}),N}function R(A){var N=new p,F=A.replace(/\r?\n[\t ]+/g," ");return F.split(/\r?\n/).forEach(function(V){var W=V.split(":"),L=W.shift().trim();if(L){var z=W.join(":").trim();N.append(L,z)}}),N}y.call(E.prototype);function O(A,N){N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new p(N.headers),this.url=N.url||"",this._initBody(A)}y.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},O.error=function(){var A=new O(null,{status:0,statusText:""});return A.type="error",A};var I=[301,302,303,307,308];O.redirect=function(A,N){if(I.indexOf(N)===-1)throw new RangeError("Invalid status code");return new O(null,{status:N,headers:{location:A}})},s.DOMException=o.DOMException;try{new s.DOMException}catch{s.DOMException=function(N,F){this.message=N,this.name=F;var V=Error(N);this.stack=V.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function P(A,N){return new Promise(function(F,V){var W=new E(A,N);if(W.signal&&W.signal.aborted)return V(new s.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function z(){L.abort()}L.onload=function(){var q={status:L.status,statusText:L.statusText,headers:R(L.getAllResponseHeaders()||"")};q.url="responseURL"in L?L.responseURL:q.headers.get("X-Request-URL");var te="response"in L?L.response:L.responseText;F(new O(te,q))},L.onerror=function(){V(new TypeError("Network request failed"))},L.ontimeout=function(){V(new TypeError("Network request failed"))},L.onabort=function(){V(new s.DOMException("Aborted","AbortError"))},L.open(W.method,W.url,!0),W.credentials==="include"?L.withCredentials=!0:W.credentials==="omit"&&(L.withCredentials=!1),"responseType"in L&&a.blob&&(L.responseType="blob"),W.headers.forEach(function(q,te){L.setRequestHeader(te,q)}),W.signal&&(W.signal.addEventListener("abort",z),L.onreadystatechange=function(){L.readyState===4&&W.signal.removeEventListener("abort",z)}),L.send(typeof W._bodyInit>"u"?null:W._bodyInit)})}return P.polyfill=!0,o.fetch||(o.fetch=P,o.Headers=p,o.Request=E,o.Response=O),s.Headers=p,s.Request=E,s.Response=O,s.fetch=P,Object.defineProperty(s,"__esModule",{value:!0}),s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(B3,B3.exports);var OX=B3.exports;const DX=N2(OX);var L3=globalThis&&globalThis.__assign||function(){return L3=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},L3.apply(this,arguments)},_w=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},ww=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},kw=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},RX=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},PX=function(n){return"blob"in n&&"name"in n},IX="application/ad+json",Cl=function(){function n(e){this.__fetchOverride=e}return Object.defineProperty(n.prototype,"fetch",{get:function(){var e,t=(e=this.__fetchOverride)!==null&&e!==void 0?e:DX;if(typeof t>"u")throw new Bo("No fetch available, If the current environment doesn't have a fetch implementation you can pass one yourself.");return t},enumerable:!1,configurable:!0}),n.tryValidSubject=function(e){try{new URL(e)}catch(t){throw new Error("Not a valid URL: ".concat(e,". ").concat(t))}},n.isValidSubject=function(e){if(typeof e!="string")return!1;try{return n.tryValidSubject(e),!0}catch{return!1}},n.removeQueryParamsFromURL=function(e){return e==null?void 0:e.split("?")[0]},n.prototype.setFetch=function(e){this.__fetchOverride=e},n.prototype.fetchResourceHTTP=function(e,t){return t===void 0&&(t={}),_w(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w;return ww(this,function(_){switch(_.label){case 0:r=t.signInfo,i=t.from,o=t.body,s=t.method,a=[],l=new gh,u=new Yd(e),_.label=1;case 1:return _.trys.push([1,7,,8]),n.tryValidSubject(e),c={},c.Accept=IX,r?jv()&&e.startsWith(window.location.origin)?(AX()||gB(r.serverURL,r.agent),[3,4]):[3,2]:[3,4];case 2:return[4,y8(e,r.agent,c)];case 3:_.sent(),_.label=4;case 4:return f=e,i!==void 0&&(d=new URL("".concat(i,"/path")),d.searchParams.set("path",e),f=d.href),[4,this.fetch(f,{headers:c,method:s??"GET",body:o})];case 5:return h=_.sent(),[4,h.text()];case 6:if(p=_.sent(),h.status===200)try{m=JSON.parse(p),t.noNested?u=m:(g=kw(l.parseObject(m,e),2),v=g[0],b=g[1],u=v,a.push.apply(a,RX([],kw(b),!1)))}catch(y){throw new Bo("Could not parse JSON from fetching ".concat(e,". Is it an Atomic Data resource? Error message: ").concat(y.message))}else throw h.status===401?new Bo(p,Os.Unauthorized):h.status===500?new Bo(p,Os.Server):h.status===404?new Bo(p,Os.NotFound):new Bo(p);return[3,8];case 7:return w=_.sent(),u.setError(w),a=[u],console.error(e,w),[3,8];case 8:return u.loading=!1,[2,{resource:u,createdResources:a}]}})})},n.prototype.postCommit=function(e,t){return _w(this,void 0,void 0,function(){var r,i,o,s,a;return ww(this,function(l){switch(l.label){case 0:r=SB(L3({},e)),i=new Headers,i.set("Content-Type","application/ad+json"),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.fetch(t,{headers:i,method:"POST",body:r})];case 2:return o=l.sent(),[3,4];case 3:throw s=l.sent(),new Bo("Posting Commit to ".concat(t," failed: ").concat(s));case 4:return[4,o.text()];case 5:if(a=l.sent(),o.status!==200)throw new Bo(a,Os.Server);return[2,EB(a)]}})})},n.prototype.uploadFiles=function(e,t,r,i){return _w(this,void 0,void 0,function(){var o,s,a,l,u,c,f,d,h,p;return ww(this,function(m){switch(m.label){case 0:return o=new gh,s=new FormData,e.map(function(g){PX(g)?s.append("assets",g.blob,g.name):s.append("assets",g,g.name)}),a=new URL("".concat(t,"/upload")),a.searchParams.set("parent",i),[4,y8(a.toString(),r,{})];case 1:return l=m.sent(),u={method:"POST",body:s,headers:l},[4,this.fetch(a.toString(),u)];case 2:return c=m.sent(),[4,c.text()];case 3:if(f=m.sent(),c.status!==200)throw Error(f);return d=JSON.parse(f),h=kw(o.parseArray(d),1),p=h[0],[2,p]}})})},n}();const NX={};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const ei=BigInt(0),cn=BigInt(1),ji=BigInt(2),vB=BigInt(255),_8=ji**BigInt(252)+BigInt("27742317777372353535851937790883648493"),or={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:ji**vB-BigInt(19),l:_8,n:_8,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},bB=ji**BigInt(256),b0=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const BX=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),LX=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),FX=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),zX=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class Pn{constructor(e,t,r,i){this.x=e,this.y=t,this.z=r,this.t=i}static fromAffine(e){if(!(e instanceof Gr))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Gr.ZERO)?Pn.ZERO:new Pn(e.x,e.y,cn,Le(e.x*e.y))}static toAffineBatch(e){const t=VX(e.map(r=>r.z));return e.map((r,i)=>r.toAffine(t[i]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){w8(e);const{x:t,y:r,z:i}=this,{x:o,y:s,z:a}=e,l=Le(t*a),u=Le(o*i),c=Le(r*a),f=Le(s*i);return l===u&&c===f}negate(){return new Pn(Le(-this.x),this.y,this.z,Le(-this.t))}double(){const{x:e,y:t,z:r}=this,{a:i}=or,o=Le(e**ji),s=Le(t**ji),a=Le(ji*Le(r**ji)),l=Le(i*o),u=Le(Le((e+t)**ji)-o-s),c=l+s,f=c-a,d=l-s,h=Le(u*f),p=Le(c*d),m=Le(u*d),g=Le(f*c);return new Pn(h,p,g,m)}add(e){w8(e);const{x:t,y:r,z:i,t:o}=this,{x:s,y:a,z:l,t:u}=e,c=Le((r-t)*(a+s)),f=Le((r+t)*(a-s)),d=Le(f-c);if(d===ei)return this.double();const h=Le(i*ji*u),p=Le(o*ji*l),m=p+h,g=f+c,v=p-h,b=Le(m*d),w=Le(g*v),_=Le(m*v),y=Le(d*g);return new Pn(b,w,y,_)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,r=[];let i=this,o=i;for(let s=0;s<t;s++){o=i,r.push(o);for(let a=1;a<2**(e-1);a++)o=o.add(i),r.push(o);i=o.double()}return r}wNAF(e,t){!t&&this.equals(Pn.BASE)&&(t=Gr.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=t&&F3.get(t);i||(i=this.precomputeWindow(r),t&&r!==1&&(i=Pn.normalizeZ(i),F3.set(t,i)));let o=Pn.ZERO,s=Pn.ZERO;const a=1+256/r,l=2**(r-1),u=BigInt(2**r-1),c=2**r,f=BigInt(r);for(let d=0;d<a;d++){const h=d*l;let p=Number(e&u);if(e>>=f,p>l&&(p-=c,e+=cn),p===0){let m=i[h];d%2&&(m=m.negate()),s=s.add(m)}else{let m=i[h+Math.abs(p)-1];p<0&&(m=m.negate()),o=o.add(m)}}return Pn.normalizeZ([o,s])[0]}multiply(e,t){return this.wNAF(wb(e,or.l),t)}multiplyUnsafe(e){let t=wb(e,or.l,!1);const r=Pn.BASE,i=Pn.ZERO;if(t===ei)return i;if(this.equals(i)||t===cn)return this;if(this.equals(r))return this.wNAF(t);let o=i,s=this;for(;t>ei;)t&cn&&(o=o.add(s)),s=s.double(),t>>=cn;return o}isSmallOrder(){return this.multiplyUnsafe(or.h).equals(Pn.ZERO)}isTorsionFree(){return this.multiplyUnsafe(or.l).equals(Pn.ZERO)}toAffine(e=B2(this.z)){const{x:t,y:r,z:i}=this,o=Le(t*e),s=Le(r*e);if(Le(i*e)!==cn)throw new Error("invZ was invalid");return new Gr(o,s)}fromRistrettoBytes(){Sw()}toRistrettoBytes(){Sw()}fromRistrettoHash(){Sw()}}Pn.BASE=new Pn(or.Gx,or.Gy,cn,Le(or.Gx*or.Gy));Pn.ZERO=new Pn(ei,cn,cn,ei);function w8(n){if(!(n instanceof Pn))throw new TypeError("ExtendedPoint expected")}function Cw(n){if(!(n instanceof zo))throw new TypeError("RistrettoPoint expected")}function Sw(){throw new Error("Legacy method: switch to RistrettoPoint")}class zo{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:t}=or,r=Le(b0*e*e),i=Le((r+cn)*FX);let o=BigInt(-1);const s=Le((o-t*r)*Le(r+t));let{isValid:a,value:l}=ax(i,s),u=Le(l*e);iu(u)||(u=Le(-u)),a||(l=u),a||(o=r);const c=Le(o*(r-cn)*zX-s),f=l*l,d=Le((l+l)*s),h=Le(c*BX),p=Le(cn-f),m=Le(cn+f);return new Pn(Le(d*m),Le(p*h),Le(h*m),Le(d*p))}static hashToCurve(e){e=uf(e,64);const t=xw(e.slice(0,32)),r=this.calcElligatorRistrettoMap(t),i=xw(e.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new zo(r.add(o))}static fromHex(e){e=uf(e,32);const{a:t,d:r}=or,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=xw(e);if(!qX($0(o),e)||iu(o))throw new Error(i);const s=Le(o*o),a=Le(cn+t*s),l=Le(cn-t*s),u=Le(a*a),c=Le(l*l),f=Le(t*r*u-c),{isValid:d,value:h}=k8(Le(f*c)),p=Le(h*l),m=Le(h*p*f);let g=Le((o+o)*p);iu(g)&&(g=Le(-g));const v=Le(a*m),b=Le(g*v);if(!d||iu(b)||v===ei)throw new Error(i);return new zo(new Pn(g,v,cn,b))}toRawBytes(){let{x:e,y:t,z:r,t:i}=this.ep;const o=Le(Le(r+t)*Le(r-t)),s=Le(e*t),{value:a}=k8(Le(o*s**ji)),l=Le(a*o),u=Le(a*s),c=Le(l*u*i);let f;if(iu(i*c)){let h=Le(t*b0),p=Le(e*b0);e=h,t=p,f=Le(l*LX)}else f=u;iu(e*c)&&(t=Le(-t));let d=Le((r-t)*f);return iu(d)&&(d=Le(-d)),$0(d)}toHex(){return gg(this.toRawBytes())}toString(){return this.toHex()}equals(e){Cw(e);const t=this.ep,r=e.ep,i=Le(t.x*r.y)===Le(t.y*r.x),o=Le(t.y*r.y)===Le(t.x*r.x);return i||o}add(e){return Cw(e),new zo(this.ep.add(e.ep))}subtract(e){return Cw(e),new zo(this.ep.subtract(e.ep))}multiply(e){return new zo(this.ep.multiply(e))}multiplyUnsafe(e){return new zo(this.ep.multiplyUnsafe(e))}}zo.BASE=new zo(Pn.BASE);zo.ZERO=new zo(Pn.ZERO);const F3=new WeakMap;class Gr{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,F3.delete(this)}static fromHex(e,t=!0){const{d:r,P:i}=or;e=uf(e,32);const o=e.slice();o[31]=e[31]&-129;const s=rp(o);if(t&&s>=i)throw new Error("Expected 0 < hex < P");if(!t&&s>=bB)throw new Error("Expected 0 < hex < 2**256");const a=Le(s*s),l=Le(a-cn),u=Le(r*a+cn);let{isValid:c,value:f}=ax(l,u);if(!c)throw new Error("Point.fromHex: invalid y coordinate");const d=(f&cn)===cn;return(e[31]&128)!==0!==d&&(f=Le(-f)),new Gr(f,s)}static async fromPrivateKey(e){return(await L2(e)).point}toRawBytes(){const e=$0(this.y);return e[31]|=this.x&cn?128:0,e}toHex(){return gg(this.toRawBytes())}toX25519(){const{y:e}=this,t=Le((cn+e)*B2(cn-e));return $0(t)}isTorsionFree(){return Pn.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Gr(Le(-this.x),this.y)}add(e){return Pn.fromAffine(this).add(Pn.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Pn.fromAffine(this).multiply(e,this).toAffine()}}Gr.BASE=new Gr(or.Gx,or.Gy);Gr.ZERO=new Gr(ei,cn);class sx{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=uf(e,64),r=Gr.fromHex(t.slice(0,32),!1),i=rp(t.slice(32,64));return new sx(r,i)}assertValidity(){const{r:e,s:t}=this;if(!(e instanceof Gr))throw new Error("Expected Point instance");return wb(t,or.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set($0(this.s),32),e}toHex(){return gg(this.toRawBytes())}}function jX(...n){if(!n.every(r=>r instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(n.length===1)return n[0];const e=n.reduce((r,i)=>r+i.length,0),t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const o=n[r];t.set(o,i),i+=o.length}return t}const HX=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function gg(n){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=HX[n[t]];return e}function yB(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(n.length/2);for(let t=0;t<e.length;t++){const r=t*2,i=n.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[t]=o}return e}function _B(n){const t=n.toString(16).padStart(64,"0");return yB(t)}function $0(n){return _B(n).reverse()}function iu(n){return(Le(n)&cn)===cn}function rp(n){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+gg(Uint8Array.from(n).reverse()))}function xw(n){return Le(rp(n)&ji**vB-cn)}function Le(n,e=or.P){const t=n%e;return t>=ei?t:e+t}function B2(n,e=or.P){if(n===ei||e<=ei)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Le(n,e),r=e,i=ei,o=cn;for(;t!==ei;){const a=r/t,l=r%t,u=i-o*a;r=t,t=l,i=o,o=u}if(r!==cn)throw new Error("invert: does not exist");return Le(i,e)}function VX(n,e=or.P){const t=new Array(n.length),r=n.reduce((o,s,a)=>s===ei?o:(t[a]=o,Le(o*s,e)),cn),i=B2(r,e);return n.reduceRight((o,s,a)=>s===ei?o:(t[a]=Le(o*t[a],e),Le(o*s,e)),i),t}function ra(n,e){const{P:t}=or;let r=n;for(;e-- >ei;)r*=r,r%=t;return r}function WX(n){const{P:e}=or,t=BigInt(5),r=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),l=n*n%e*n%e,u=ra(l,ji)*l%e,c=ra(u,cn)*n%e,f=ra(c,t)*c%e,d=ra(f,r)*f%e,h=ra(d,i)*d%e,p=ra(h,o)*h%e,m=ra(p,s)*p%e,g=ra(m,s)*p%e,v=ra(g,r)*f%e;return{pow_p_5_8:ra(v,ji)*n%e,b2:l}}function ax(n,e){const t=Le(e*e*e),r=Le(t*t*e),i=WX(n*r).pow_p_5_8;let o=Le(n*t*i);const s=Le(e*o*o),a=o,l=Le(o*b0),u=s===n,c=s===Le(-n),f=s===Le(-n*b0);return u&&(o=a),(c||f)&&(o=l),iu(o)&&(o=Le(-o)),{isValid:u||c,value:o}}function k8(n){return ax(cn,n)}async function C8(...n){const e=await F2.sha512(jX(...n)),t=rp(e);return Le(t,or.l)}function qX(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function uf(n,e){const t=n instanceof Uint8Array?Uint8Array.from(n):yB(n);if(typeof e=="number"&&t.length!==e)throw new Error(`Expected ${e} bytes`);return t}function wb(n,e,t=!0){if(!e)throw new TypeError("Specify max value");if(typeof n=="number"&&Number.isSafeInteger(n)&&(n=BigInt(n)),typeof n=="bigint"&&n<e){if(t){if(ei<n)return n}else if(ei<=n)return n}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function UX(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}async function L2(n){if(n=typeof n=="bigint"||typeof n=="number"?_B(wb(n,bB)):uf(n),n.length!==32)throw new Error("Expected 32 bytes");const e=await F2.sha512(n),t=UX(e.slice(0,32)),r=e.slice(32,64),i=Le(rp(t),or.l),o=Gr.BASE.multiply(i),s=o.toRawBytes();return{head:t,prefix:r,scalar:i,point:o,pointBytes:s}}async function GX(n){return(await L2(n)).pointBytes}async function KX(n,e){n=uf(n);const{prefix:t,scalar:r,pointBytes:i}=await L2(e),o=await C8(t,n),s=Gr.BASE.multiply(o),a=await C8(s.toRawBytes(),i,n),l=Le(o+a*r,or.l);return new sx(s,l).toRawBytes()}Gr.BASE._setWindowSize(8);const Zl={node:NX,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},F2={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:gg,getExtendedPublicKey:L2,mod:Le,invert:B2,hashToPrivateScalar:n=>{if(n=uf(n),n.length<40||n.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=Le(rp(n),or.l);if(e===ei||e===cn)throw new Error("Invalid private key");return e},randomBytes:(n=32)=>{if(Zl.web)return Zl.web.getRandomValues(new Uint8Array(n));if(Zl.node){const{randomBytes:e}=Zl.node;return new Uint8Array(e(n).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>F2.randomBytes(32),sha512:async n=>{if(Zl.web){const e=await Zl.web.subtle.digest("SHA-512",n.buffer);return new Uint8Array(e)}else{if(Zl.node)return Uint8Array.from(Zl.node.createHash("sha512").update(n).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(n=8,e=Gr.BASE){const t=e.equals(Gr.BASE)?e:new Gr(e.x,e.y);return t._setWindowSize(n),t.multiply(ji),t}};var JX=function(n,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,r=e.cmp&&function(o){return function(s){return function(a,l){var u={key:a,value:s[a]},c={key:l,value:s[l]};return o(u,c)}}}(e.cmp),i=[];return function o(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var a,l;if(Array.isArray(s)){for(l="[",a=0;a<s.length;a++)a&&(l+=","),l+=o(s[a])||"null";return l+"]"}if(s===null)return"null";if(i.indexOf(s)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(s)-1,c=Object.keys(s).sort(r&&r(s));for(l="",a=0;a<c.length;a++){var f=c[a],d=o(s[f]);d&&(l&&(l+=","),l+=JSON.stringify(f)+":"+d)}return i.splice(u,1),"{"+l+"}"}}(n)};const YX=N2(JX);var Od="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var a1=0;a1<Od.length;a1++)Zp[Od.charCodeAt(a1)]=a1;var wB=function(n){var e=new Uint8Array(n),t,r=e.length,i="";for(t=0;t<r;t+=3)i+=Od[e[t]>>2],i+=Od[(e[t]&3)<<4|e[t+1]>>4],i+=Od[(e[t+1]&15)<<2|e[t+2]>>6],i+=Od[e[t+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i},kB=function(n){var e=n.length*.75,t=n.length,r,i=0,o,s,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var u=new ArrayBuffer(e),c=new Uint8Array(u);for(r=0;r<t;r+=4)o=Zp[n.charCodeAt(r)],s=Zp[n.charCodeAt(r+1)],a=Zp[n.charCodeAt(r+2)],l=Zp[n.charCodeAt(r+3)],c[i++]=o<<2|s>>4,c[i++]=(s&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return u};/*! noble-hashes - MIT License (c) 2021 Paul Miller (paulmillr.com) */const Ew=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),XX=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!XX)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));(()=>{const n=typeof yi<"u"&&typeof yi.require=="function"&&yi.require.bind(yi);try{if(n){const{setImmediate:e}=n("timers");return()=>new Promise(t=>e(t))}}catch{}return()=>new Promise(e=>setTimeout(e,0))})();function QX(n){if(typeof n!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof n}`);return new TextEncoder().encode(n)}function CB(n){if(typeof n=="string"&&(n=QX(n)),!(n instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof n})`);return n}let ZX=class{clone(){return this._cloneInto()}};function lx(n){const e=r=>n().update(CB(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e.init=e.create,e}function $X(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),a=Number(t&o),l=r?4:0,u=r?0:4;n.setUint32(e+l,s,r),n.setUint32(e+u,a,r)}class eQ extends ZX{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ew(this.buffer)}update(e){if(this.destroyed)throw new Error("instance is destroyed");const{view:t,buffer:r,blockLen:i,finished:o}=this;if(o)throw new Error("digest() was already called");e=CB(e);const s=e.length;for(let a=0;a<s;){const l=Math.min(i-this.pos,s-a);if(l===i){const u=Ew(e);for(;i<=s-a;a+=i)this.process(u,a);continue}r.set(e.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){if(this.destroyed)throw new Error("instance is destroyed");if(!(e instanceof Uint8Array)||e.length<this.outputLen)throw new Error("_Sha2: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let l=s;l<i;l++)t[l]=0;$X(r,i-8,BigInt(this.length*8),o),this.process(r,0);const a=Ew(e);this.get().forEach((l,u)=>a.setUint32(4*u,l,o))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%t&&e.buffer.set(r),e}}const l1=BigInt(2**32-1),S8=BigInt(32);function tQ(n,e=!1){return e?{h:Number(n&l1),l:Number(n>>S8&l1)}:{h:Number(n>>S8&l1)|0,l:Number(n&l1)|0}}function nQ(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:o,l:s}=tQ(n[i],e);[t[i],r[i]]=[o,s]}return[t,r]}const x8=(n,e,t)=>n>>>t,E8=(n,e,t)=>n<<32-t|e>>>t,td=(n,e,t)=>n>>>t|e<<32-t,nd=(n,e,t)=>n<<32-t|e>>>t,u1=(n,e,t)=>n<<64-t|e>>>t-32,c1=(n,e,t)=>n>>>t-32|e<<64-t;function ll(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const rQ=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),iQ=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,oQ=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),sQ=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,aQ=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),lQ=(n,e,t,r,i,o)=>e+t+r+i+o+(n/2**32|0)|0,[uQ,cQ]=nQ(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),$l=new Uint32Array(80),eu=new Uint32Array(80);class ux extends eQ{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:o,Cl:s,Dh:a,Dl:l,Eh:u,El:c,Fh:f,Fl:d,Gh:h,Gl:p,Hh:m,Hl:g}=this;return[e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g]}set(e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=c|0,this.Fh=f|0,this.Fl=d|0,this.Gh=h|0,this.Gl=p|0,this.Hh=m|0,this.Hl=g|0}process(e,t){for(let w=0;w<16;w++,t+=4)$l[w]=e.getUint32(t),eu[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const _=$l[w-15]|0,y=eu[w-15]|0,k=td(_,y,1)^td(_,y,8)^x8(_,y,7),S=nd(_,y,1)^nd(_,y,8)^E8(_,y,7),E=$l[w-2]|0,M=eu[w-2]|0,R=td(E,M,19)^u1(E,M,61)^x8(E,M,6),O=nd(E,M,19)^c1(E,M,61)^E8(E,M,6),I=oQ(S,O,eu[w-7],eu[w-16]),P=sQ(I,k,R,$l[w-7],$l[w-16]);$l[w]=P|0,eu[w]=I|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:a,Cl:l,Dh:u,Dl:c,Eh:f,El:d,Fh:h,Fl:p,Gh:m,Gl:g,Hh:v,Hl:b}=this;for(let w=0;w<80;w++){const _=td(f,d,14)^td(f,d,18)^u1(f,d,41),y=nd(f,d,14)^nd(f,d,18)^c1(f,d,41),k=f&h^~f&m,S=d&p^~d&g,E=aQ(b,y,S,cQ[w],eu[w]),M=lQ(E,v,_,k,uQ[w],$l[w]),R=E|0,O=td(r,i,28)^u1(r,i,34)^u1(r,i,39),I=nd(r,i,28)^c1(r,i,34)^c1(r,i,39),P=r&o^r&a^o&a,A=i&s^i&l^s&l;v=m|0,b=g|0,m=h|0,g=p|0,h=f|0,p=d|0,{h:f,l:d}=ll(u|0,c|0,M|0,R|0),u=a|0,c=l|0,a=o|0,l=s|0,o=r|0,s=i|0;const N=rQ(R,I,A);r=iQ(N,M,O,P),i=N|0}({h:r,l:i}=ll(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=ll(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l}=ll(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:c}=ll(this.Dh|0,this.Dl|0,u|0,c|0),{h:f,l:d}=ll(this.Eh|0,this.El|0,f|0,d|0),{h,l:p}=ll(this.Fh|0,this.Fl|0,h|0,p|0),{h:m,l:g}=ll(this.Gh|0,this.Gl|0,m|0,g|0),{h:v,l:b}=ll(this.Hh|0,this.Hl|0,v|0,b|0),this.set(r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b)}roundClean(){$l.fill(0),eu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class fQ extends ux{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class dQ extends ux{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const hQ=lx(()=>new ux);lx(()=>new fQ);lx(()=>new dQ);var Pc=globalThis&&globalThis.__assign||function(){return Pc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Pc.apply(this,arguments)},kb=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},Cb=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},z2=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},As=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},y0=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))};F2.sha512=function(n){return Promise.resolve(hQ(n))};function cx(){return Math.round(new Date().getTime())}var Aw=function(){function n(e,t){t===void 0&&(t={});var r,i,o;this._subject=Cl.removeQueryParamsFromURL(e),this._set=(r=t.set)!==null&&r!==void 0?r:new Map,this._push=(i=t.push)!==null&&i!==void 0?i:new Map,this._remove=(o=t.remove)!==null&&o!==void 0?o:new Set,this._destroy=t.destroy,this._previousCommit=t.previousCommit}return Object.defineProperty(n.prototype,"subject",{get:function(){return this._subject},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"set",{get:function(){return this._set},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"push",{get:function(){return this._push},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"remove",{get:function(){return this._remove},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"destroy",{get:function(){return this._destroy},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"previousCommit",{get:function(){return this._previousCommit},enumerable:!1,configurable:!0}),n.prototype.addSetAction=function(e,t){return this.removeRemoveAction(e),this._set.set(e,t),this},n.prototype.addPushAction=function(e){for(var t,r,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];var a=(i=this._push.get(e))!==null&&i!==void 0?i:new Set;try{for(var l=z2(o),u=l.next();!u.done;u=l.next()){var c=u.value;a.add(c)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return this._push.set(e,a),this},n.prototype.addRemoveAction=function(e){return this._set.delete(e),this._push.delete(e),this._remove.add(e),this},n.prototype.removeRemoveAction=function(e){return this._remove.delete(e),this},n.prototype.setDestroy=function(e){return this._destroy=e,this},n.prototype.setPreviousCommit=function(e){return this._previousCommit=e,this},n.prototype.setSubject=function(e){return this._subject=e,this},n.prototype.sign=function(e,t){return kb(this,void 0,void 0,function(){var r;return Cb(this,function(i){switch(i.label){case 0:return[4,this.signAt(t,e,cx())];case 1:return r=i.sent(),[2,r]}})})},n.prototype.hasUnsavedChanges=function(){return this.set.size>0||this.push.size>0||this.destroy||this.remove.size>0},n.prototype.clone=function(){var e={set:this.set,push:this.push,remove:this.remove,destroy:this.destroy,previousCommit:this.previousCommit};return new n(this.subject,structuredClone(e))},n.prototype.toPlainObject=function(){return{subject:this.subject,set:Object.fromEntries(this.set.entries()),push:Object.fromEntries(Array.from(this.push.entries()).map(function(e){var t=As(e,2),r=t[0],i=t[1];return[r,Array.from(i)]})),remove:Array.from(this.remove),destroy:this.destroy,previousCommit:this.previousCommit}},n.prototype.signAt=function(e,t,r){return kb(this,void 0,void 0,function(){var i,o,s,a;return Cb(this,function(l){switch(l.label){case 0:if(e===void 0)throw new Error("No agent passed to sign commit");if(!this.hasUnsavedChanges())throw new Error("No changes to commit in ".concat(this.subject));return i=Pc(Pc({},this.clone().toPlainObject()),{createdAt:r,signer:e}),o=SB(Pc({},i)),[4,xB(o,t)];case 1:return s=l.sent(),a=Pc(Pc({},i),{signature:s}),[2,a]}})})},n}();function ul(n,e,t){e in n&&e!==t&&(Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(n,e)),delete n[e])}function SB(n){return n.remove&&Object.keys(n.remove).length===0&&delete n.remove,n.set&&Object.keys(n.set).length===0&&delete n.set,n.push&&Object.keys(n.push).length===0&&delete n.push,n.destroy===!1&&delete n.destroy,ul(n,"createdAt",Mt.properties.commit.createdAt),ul(n,"subject",Mt.properties.commit.subject),ul(n,"set",Mt.properties.commit.set),ul(n,"push",Mt.properties.commit.push),ul(n,"signer",Mt.properties.commit.signer),ul(n,"signature",Mt.properties.commit.signature),ul(n,"remove",Mt.properties.commit.remove),ul(n,"destroy",Mt.properties.commit.destroy),ul(n,"previousCommit",Mt.properties.commit.previousCommit),n[Mt.properties.isA]=[Mt.classes.commit],YX(n)}var xB=function(n,e){return kb(void 0,void 0,void 0,function(){var t,r,i,o,s,a;return Cb(this,function(l){switch(l.label){case 0:return t=kB(e),r=new Uint8Array(t),i=new TextEncoder,o=i.encode(n),[4,KX(o,r)];case 1:return s=l.sent(),a=wB(s),[2,a]}})})},pQ=function(n){return kb(void 0,void 0,void 0,function(){var e,t,r,i;return Cb(this,function(o){switch(o.label){case 0:return e=kB(n),t=new Uint8Array(e),[4,GX(t)];case 1:return r=o.sent(),i=wB(r),[2,i]}})})};function mQ(n){var e={id:n.getSubject(),subject:n.get(Mt.properties.commit.subject),set:n.get(Mt.properties.commit.set),push:n.get(Mt.properties.commit.push),signer:n.get(Mt.properties.commit.signer),createdAt:n.get(Mt.properties.commit.createdAt),remove:n.get(Mt.properties.commit.remove),destroy:n.get(Mt.properties.commit.destroy),signature:n.get(Mt.properties.commit.signature)};return e}function EB(n){try{var e=JSON.parse(n);if(typeof e!="object")throw new Error("Commit is not an object");var t=e[Mt.properties.commit.subject],r=e[Mt.properties.commit.set],i=e[Mt.properties.commit.push],o=e[Mt.properties.commit.signer],s=e[Mt.properties.commit.createdAt],a=e[Mt.properties.commit.remove],l=e[Mt.properties.commit.destroy],u=e[Mt.properties.commit.signature],c=e["@id"],f=e[Mt.properties.commit.previousCommit];if(!u)throw new Error("Commit has no signature");return{subject:t,set:r,push:i,signer:o,createdAt:s,remove:a,destroy:l,signature:u,id:c,previousCommit:f}}catch(d){throw new Error("Could not parse commit: ".concat(d,", Commit: ").concat(n))}}function AB(n,e){var t=e.set,r=e.remove,i=e.push;return t&&vQ(t,n),r&&bQ(r,n),i&&yQ(i,n),n}function gQ(n,e){var t=EB(n),r=t.subject,i=t.id,o=t.destroy,s=t.signature,a=e.resources.get(r);if(!a)a=new Yd(r);else if(a.appliedCommitSignatures.has(s))return;if(a=AB(a,t),i&&a.setUnsafe(yr.commit.lastCommit,i),o){e.removeResource(r);return}else a.appliedCommitSignatures.add(s),e.addResources(a,{skipCommitCompare:!0})}function vQ(n,e,t){var r,i,o=new gh,s=[],a=function(h,p){var m=p;if((p==null?void 0:p.constructor)==={}.constructor){var g=As(o.parseValue(p,h),2),v=g[0],b=g[1];m=v,s.push.apply(s,y0([],As(b),!1))}fx(p)&&(m=p.map(function(w){var _=As(o.parseValue(w,h),2),y=_[0],k=_[1];return s.push.apply(s,y0([],As(k),!1)),y})),e.setUnsafe(h,m)};try{for(var l=z2(Object.entries(n)),u=l.next();!u.done;u=l.next()){var c=As(u.value,2),f=c[0],d=c[1];a(f,d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}t&&t.addResources(s)}function bQ(n,e){var t,r;try{for(var i=z2(n),o=i.next();!o.done;o=i.next()){var s=o.value;e.removePropValLocally(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}function yQ(n,e,t){var r,i,o=new gh,s=[],a=function(h,p){var m=e.get(h)||[],g=p,v=g.map(function(w){var _=As(o.parseValue(w,h),2),y=_[0],k=_[1];return s.push.apply(s,y0([],As(k),!1)),y}),b=y0(y0([],As(m),!1),As(v),!1);e.setUnsafe(h,b)};try{for(var l=z2(Object.entries(n)),u=l.next();!u.done;u=l.next()){var c=As(u.value,2),f=c[0],d=c[1];a(f,d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}t&&t.addResources(s)}var _Q=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Os;(function(n){n.Unauthorized="Unauthorized",n.NotFound="NotFound",n.Server="Server",n.Client="Client"})(Os||(Os={}));function wQ(n){if(n instanceof Bo){if(n.type===Os.Unauthorized)return!0;if(n.message.includes("Unauthorized"))return!0}return!1}var Bo=function(n){_Q(e,n);function e(t,r){r===void 0&&(r=Os.Client);var i=n.call(this,t)||this;Object.setPrototypeOf(i,e.prototype),i.type=r,i.message=t;try{var o=JSON.parse(t),s=o[yr.description];s&&(i.message=s)}catch{}return i.message||(i.message=i.createMessage()),i}return e.fromResource=function(t){var r=new e(t.get(yr.description).toString());return r},e.prototype.createMessage=function(){switch(this.type){case Os.Unauthorized:return"You don't have the rights to do this.";case Os.NotFound:return"404 Not found.";case Os.Server:return"500 Unknown server error.";default:return"Unknown error."}},e}(Error);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;globalThis&&globalThis.__values;globalThis&&globalThis.__read;var vo,yn;(function(n){n.ATOMIC_URL="https://atomicdata.dev/datatypes/atomicURL",n.BOOLEAN="https://atomicdata.dev/datatypes/boolean",n.DATE="https://atomicdata.dev/datatypes/date",n.FLOAT="https://atomicdata.dev/datatypes/float",n.INTEGER="https://atomicdata.dev/datatypes/integer",n.MARKDOWN="https://atomicdata.dev/datatypes/markdown",n.RESOURCEARRAY="https://atomicdata.dev/datatypes/resourceArray",n.SLUG="https://atomicdata.dev/datatypes/slug",n.STRING="https://atomicdata.dev/datatypes/string",n.TIMESTAMP="https://atomicdata.dev/datatypes/timestamp",n.UNKNOWN="unknown-datatype"})(yn||(yn={}));var kQ=function(n){switch(n){case Mt.datatypes.atomicUrl:return yn.ATOMIC_URL;case Mt.datatypes.boolean:return yn.BOOLEAN;case Mt.datatypes.date:return yn.DATE;case Mt.datatypes.float:return yn.FLOAT;case Mt.datatypes.integer:return yn.INTEGER;case Mt.datatypes.markdown:return yn.MARKDOWN;case Mt.datatypes.resourceArray:return yn.RESOURCEARRAY;case Mt.datatypes.slug:return yn.SLUG;case Mt.datatypes.string:return yn.STRING;case Mt.datatypes.timestamp:return yn.TIMESTAMP;default:return yn.UNKNOWN}},CQ=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,SQ=/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/,xQ=function(n,e){var t=null;if(n===void 0)throw new Error("Value is undefined, expected ".concat(e));switch(e){case yn.STRING:{if(!f1(n)){t="Not a string";break}break}case yn.SLUG:{if(!f1(n)){t="Not a slug, not even a string";break}n.match(CQ)===null&&(t="Not a valid slug. Only lowercase letters and numbers with dashes `-` between them");break}case yn.ATOMIC_URL:{if(!f1(n)){t="Not a string. Should be a URL";break}Cl.tryValidSubject(n);break}case yn.RESOURCEARRAY:{if(!fx(n)){t="Not an array";break}n.map(function(r,i){try{Cl.tryValidSubject(r)}catch{var o=new Error("Invalid URL");throw o.index=i,o}});break}case yn.INTEGER:{if(!MB(n)){t="Not a number";break}n%1!==0&&(t="Not an integer");break}case yn.DATE:{if(!f1(n)){t="Not a string";break}n.match(SQ)===null&&(t="Not a date string: YYYY-MM-DD");break}}if(t!==null)throw new Error(t)};function fx(n){return Object.prototype.toString.call(n)==="[object Array]"}function f1(n){return typeof n=="string"}function MB(n){return typeof n=="number"}vo={},vo[yn.STRING]="String",vo[yn.SLUG]="Slug",vo[yn.MARKDOWN]="Markdown",vo[yn.INTEGER]="Integer",vo[yn.FLOAT]="Float",vo[yn.BOOLEAN]="Boolean",vo[yn.DATE]="Date",vo[yn.TIMESTAMP]="Timestamp",vo[yn.ATOMIC_URL]="Resource",vo[yn.RESOURCEARRAY]="ResourceArray",vo[yn.UNKNOWN]="Unknown";var d1=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},Mw=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},A8=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gh=function(){function n(){this.parsedResources=[]}return n.prototype.parseObject=function(e,t){this.parsedResources=[];var r=this.parseJsonADResource(e,t);return[r,Mw([],d1(this.parsedResources),!1)]},n.prototype.parseArray=function(e){this.parsedResources=[];var t=this.parseJsonADArray(e);return[t,Mw([],d1(this.parsedResources),!1)]},n.prototype.parseValue=function(e,t){this.parsedResources=[];var r=this.parseJsonAdResourceValue(e,t);return[r,Mw([],d1(this.parsedResources),!1)]},n.prototype.parseJsonADResource=function(e,t){var r,i,o=this;t===void 0&&(t=Ic);var s=new Yd(t);this.parsedResources.push(s);try{var a=function(p,m){if(p==="@id"){if(typeof m!="string")throw new Error("'@id' field must be a string");if(s.getSubject()!=="undefined"&&s.getSubject()!==Ic&&m!==s.getSubject())throw new Error("Resource has wrong subject in @id. Received subject was ".concat(m,", expected ").concat(s.getSubject(),"."));return s.setSubject(m),"continue"}try{if(fx(m)){var g=m.map(function(_){return o.parseJsonAdResourceValue(_,p)});s.setUnsafe(p,g)}else if(typeof m=="string")s.setUnsafe(p,m);else if(typeof m=="number")s.setUnsafe(p,m);else if(typeof m=="boolean")s.setUnsafe(p,m);else{var v=l.parseJsonAdResourceValue(m,p);s.setUnsafe(p,v)}}catch(_){var b="Failed creating value ".concat(m," for key ").concat(p," in resource ").concat(s.getSubject()),w="".concat(b,". ").concat(_.message);throw new Error(w)}},l=this;try{for(var u=A8(Object.entries(e)),c=u.next();!c.done;c=u.next()){var f=d1(c.value,2),d=f[0],h=f[1];a(d,h)}}catch(p){r={error:p}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s.loading=!1,s.hasClasses(Mt.classes.error)&&(s.error=Bo.fromResource(s))}catch(p){throw p.message="Failed parsing JSON "+p.message,s.setError(p),s.loading=!1,p}return s},n.prototype.parseJsonAdResourceValue=function(e,t){if(typeof e=="string")return e;if((e==null?void 0:e.constructor)==={}.constructor)if(Object.keys(e).includes("@id")){var r=e["@id"];return this.parseJsonADResource(e),r}else return e;throw new Error("Value ".concat(e," in ").concat(t," not a string or a nested Resource"))},n.prototype.parseJsonADArray=function(e){var t,r,i=[];try{try{for(var o=A8(e),s=o.next();!s.done;s=o.next()){var a=s.value,l=this.parseJsonADResource(a);i.push(l)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}catch(u){throw u.message="Failed parsing JSON "+u.message,u}return i},n}();globalThis&&globalThis.__read;globalThis&&globalThis.__values;var rd=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},id=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},M8=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},od=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},sd=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},Ic="unknown-subject",Yd=function(){function n(e,t){if(this.__internalObject=this,this.hasQueue=!1,typeof e!="string")throw new Error("Invalid subject given to resource, must be a string, found "+e);this.new=!!t,this.loading=!1,this.subject=e,this.propvals=new Map,this.appliedCommitSignatures=new Set,this.commitBuilder=new Aw(e)}return Object.defineProperty(n.prototype,"title",{get:function(){var e,t,r;return(r=(t=(e=this.get(yr.name))!==null&&e!==void 0?e:this.get(yr.shortname))!==null&&t!==void 0?t:this.get(yr.file.filename))!==null&&r!==void 0?r:this.subject},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"props",{get:function(){var e,t,r={};try{for(var i=M8(this.propvals.keys()),o=i.next();!o.done;o=i.next()){var s=o.value,a=yX(s);a&&(r[a]=this.get(s))}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),n.prototype.equals=function(e){return this===e.__internalObject?!0:!(this.getSubject()!==e.getSubject()||this.new!==e.new||this.error!==e.error||this.loading!==e.loading||JSON.stringify(Array.from(this.propvals.entries()))!==JSON.stringify(Array.from(e.propvals.entries()))||JSON.stringify(Array.from(this.commitBuilder.set.entries()))!==JSON.stringify(Array.from(e.commitBuilder.set.entries())))},n.prototype.canWrite=function(e,t,r){return rd(this,void 0,void 0,function(){var i,o,s;return id(this,function(a){switch(a.label){case 0:return i=this.get(yr.write),t?i&&Ow(i).includes(t)?[2,[!0,void 0]]:i&&Ow(i).includes(PB.publicAgent)?[2,[!0,void 0]]:(o=this.get(yr.parent),o?o===t?[2,[!0,void 0]]:r===o?(console.warn("Circular parent",r),[2,[!0,"Circular parent in ".concat(this.getSubject())]]):[4,e.getResourceAsync(o)]:[2,[!1,"No write right or parent in ".concat(this.getSubject())]]):[2,[!1,"No agent given"]];case 1:return s=a.sent(),[4,s.canWrite(e,t,this.getSubject())];case 2:return[2,a.sent()]}})})},n.prototype.clone=function(){var e=new n(this.subject);return e.propvals=structuredClone(this.propvals),e.loading=this.loading,e.new=this.new,e.error=structuredClone(this.error),e.commitError=this.commitError,e.commitBuilder=this.commitBuilder.clone(),e.appliedCommitSignatures=this.appliedCommitSignatures,e},n.prototype.isReady=function(){return!this.loading&&this.error===void 0},n.prototype.get=function(e){return this.propvals.get(e)},n.prototype.getSubjects=function(e){return this.getArray(e).map(function(t){return typeof t=="string"?t:t["@id"]})},n.prototype.getArray=function(e){var t,r=(t=this.propvals.get(e))!==null&&t!==void 0?t:[];return Ow(r)},n.prototype.getClasses=function(){return this.getSubjects(yr.isA)},n.prototype.hasClasses=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.every(function(i){return e.getClasses().includes(i)})},n.prototype.removeClasses=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return this.set(yr.isA,this.getClasses().filter(function(i){return!t.includes(i)}),e)},n.prototype.addClasses=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=new Set(sd(sd([],od(this.getClasses()),!1),od(t),!1));return this.set(yr.isA,Array.from(i),e)},n.prototype.hasUnsavedChanges=function(){return this.commitBuilder.hasUnsavedChanges()},n.prototype.getCommitsCollection=function(){var e=new URL(this.subject);return e.pathname="/commits",e.searchParams.append("property",Mt.properties.commit.subject),e.searchParams.append("value",this.subject),e.searchParams.append("sort_by",Mt.properties.commit.createdAt),e.searchParams.append("include_nested","true"),e.searchParams.append("page_size","9999"),e.toString()},n.prototype.getChildrenCollection=function(){var e=new URL(this.subject);return e.pathname="/query",e.searchParams.set("property",yr.parent),e.searchParams.set("value",this.subject),e.toString()},n.prototype.getHistory=function(e){return rd(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,c,f,d,h,p;return id(this,function(m){switch(m.label){case 0:return[4,e.fetchResourceFromServer(this.getCommitsCollection())];case 1:t=m.sent(),r=t.get(yr.collection.members),i=[],o=new n(this.subject),m.label=2;case 2:m.trys.push([2,7,8,9]),s=M8(r),a=s.next(),m.label=3;case 3:return a.done?[3,6]:(l=a.value,[4,e.getResourceAsync(l)]);case 4:u=m.sent(),c=mQ(u),f=AB(o.clone(),c),i.push({commit:c,resource:f.clone()}),o=f,m.label=5;case 5:return a=s.next(),[3,3];case 6:return[3,9];case 7:return d=m.sent(),h={error:d},[3,9];case 8:try{a&&!a.done&&(p=s.return)&&p.call(s)}finally{if(h)throw h.error}return[7];case 9:return[2,i]}})})},n.prototype.getSubject=function(){return this.subject},n.prototype.getSubjectNoParams=function(){var e=new URL(this.subject);return e.origin+e.pathname},n.prototype.getPropVals=function(){return this.propvals},n.prototype.getRights=function(e){return rd(this,void 0,void 0,function(){var t,r,i,o,s,a,l=this;return id(this,function(u){switch(u.label){case 0:return t=[],r=this.getSubjects(yr.write),r.forEach(function(c){t.push({for:c,type:Sb.WRITE,setIn:l.subject})}),i=this.getSubjects(yr.read),i.forEach(function(c){t.push({for:c,type:Sb.READ,setIn:l.subject})}),o=this.get(yr.parent),o?o===this.getSubject()?(console.warn("Circular parent",o),[2,t]):[4,e.getResourceAsync(o)]:[3,3];case 1:return s=u.sent(),[4,s.getRights(e)];case 2:a=u.sent(),t.push.apply(t,sd([],od(a),!1)),u.label=3;case 3:return[2,t]}})})},n.prototype.isUnauthorized=function(){return!!this.error&&wQ(this.error)},n.prototype.destroy=function(e,t){return rd(this,void 0,void 0,function(){var r,i,o;return id(this,function(s){switch(s.label){case 0:if(this.new)return e.removeResource(this.getSubject()),[2];if(r=new Aw(this.getSubject()),r.setDestroy(!0),t===void 0&&(t=e.getAgent()),(t==null?void 0:t.subject)===void 0)throw new Error("No agent has been set or passed, you cannot delete this.");return[4,r.sign(t.privateKey,t.subject)];case 1:return i=s.sent(),o=new URL(this.getSubject()).origin+"/commit",[4,e.postCommit(i,o)];case 2:return s.sent(),e.removeResource(this.getSubject()),[2]}})})},n.prototype.pushPropVal=function(e,t,r){var i,o=this,s,a=(s=this.get(e))!==null&&s!==void 0?s:[];r&&(t=t.filter(function(l){return!a.includes(l)}).filter(function(l){var u;return!(!((u=o.commitBuilder.push[e])===null||u===void 0)&&u.includes(l))}).filter(function(l,u,c){return c.indexOf(l)===u})),(i=this.commitBuilder).addPushAction.apply(i,sd([e],od(t),!1)),this.propvals.set(e,sd(sd([],od(a),!1),od(t),!1))},n.prototype.removePropVal=function(e){this.propvals.delete(e),this.commitBuilder.addRemoveAction(e)},n.prototype.removePropValLocally=function(e){this.propvals.delete(e)},n.prototype.save=function(e,t){var r,i,o;return rd(this,void 0,void 0,function(){var s,a,l,u,c,f,d,h,p,m,g;return id(this,function(v){switch(v.label){case 0:if(!this.commitBuilder.hasUnsavedChanges())return console.warn("No changes to ".concat(this.subject,", not saving")),[2,void 0];if(s=(r=e.getAgent())!==null&&r!==void 0?r:t,!s)throw new Error("No agent has been set or passed, you cannot save.");return this.hasQueue?[2]:this.isParentNew(e)?(e.batchResource(this.getSubject()),[2]):this.inProgressCommit?(this.hasQueue=!0,[4,this.inProgressCommit]):[3,2];case 1:return v.sent(),this.hasQueue=!1,this.inProgressCommit=void 0,[2,this.save(e,t)];case 2:return a=(i=this.get(yr.commit.lastCommit))===null||i===void 0?void 0:i.toString(),a&&this.commitBuilder.setPreviousCommit(a),l=this.new,u=function(){},this.inProgressCommit=new Promise(function(b){u=function(){b()}}),c=this.commitBuilder.clone(),this.commitBuilder=new Aw(this.getSubject()),[4,c.sign(s.privateKey,s.subject)];case 3:f=v.sent(),this.appliedCommitSignatures.add(f.signature),this.loading=!1,this.new=!1,d=new URL(this.getSubject()).origin+"/commit",v.label=4;case 4:return v.trys.push([4,8,,12]),this.commitError=void 0,e.addResources(this,{skipCommitCompare:!0}),[4,e.postCommit(f,d)];case 5:return h=v.sent(),this.setUnsafe(yr.commit.lastCommit,h.id),e.notifyResourceSaved(this),l?(e.subscribeWebSocket(this.subject),[4,e.saveBatchForParent(this.getSubject())]):[3,7];case 6:v.sent(),v.label=7;case 7:return u(),[2,h.id];case 8:return p=v.sent(),p.message.includes("previousCommit")?(console.warn("previousCommit missing or mismatch, retrying..."),[4,e.fetchResourceFromServer(this.getSubject())]):[3,11];case 9:return m=v.sent(),g=(o=m.get(yr.commit.lastCommit))===null||o===void 0?void 0:o.toString(),g&&this.setUnsafe(yr.commit.lastCommit,g),u(),[4,this.save(e,s)];case 10:return[2,v.sent()];case 11:throw this.commitBuilder=c,this.commitError=p,e.addResources(this,{skipCommitCompare:!0}),u(),p;case 12:return[2]}})})},n.prototype.set=function(e,t,r,i){return i===void 0&&(i=!0),rd(this,void 0,void 0,function(){var o;return id(this,function(s){switch(s.label){case 0:return r.isOffline()&&(console.warn("Offline, not validating"),i=!1),i?[4,r.getProperty(e)]:[3,2];case 1:o=s.sent(),xQ(t,o.datatype),s.label=2;case 2:return t===void 0?(this.removePropVal(e),[2]):(this.propvals.set(e,t),this.commitBuilder.addSetAction(e,t),[2])}})})},n.prototype.setUnsafe=function(e,t){this.propvals.set(e,t)},n.prototype.setError=function(e){this.error=e},n.prototype.setSubject=function(e){Cl.tryValidSubject(e),this.commitBuilder.setSubject(e),this.subject=e},n.prototype.equalsCurrentValue=function(e,t){var r=this.get(e);return t===Object(t)?JSON.stringify(r)===JSON.stringify(t):r===t},n.prototype.isParentNew=function(e){var t=this.propvals.get(rx.properties.parent);if(!t)return!1;var r=e.getResourceLoading(t);return r.new},n}(),Sb;(function(n){n.READ="read",n.WRITE="write"})(Sb||(Sb={}));var T8=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},O8=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},D8=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},R8=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},EQ=function(){function n(){this.subscriptions=new Map}return n.prototype.register=function(e,t){var r,i=(r=this.subscriptions.get(e))!==null&&r!==void 0?r:new Set;return i.add(t),this.subscriptions.set(e,i),function(){i.delete(t)}},n.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return T8(this,void 0,void 0,function(){var i,o,s=this;return O8(this,function(a){switch(a.label){case 0:return this.subscriptions.has(e)?(i=this.subscriptions.get(e),o=function(l){return T8(s,void 0,void 0,function(){return O8(this,function(u){return[2,l.apply(void 0,R8([],D8(t),!1))]})})},i?[4,Promise.allSettled(R8([],D8(i),!1).map(function(l){return o(l)}))]:[2]):[2];case 1:return a.sent(),[2]}})})},n.prototype.hasSubscriptions=function(e){return this.subscriptions.has(e)},n}(),TB=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},OB=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},AQ=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MQ=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o};function P8(n,e){var t=new URL(n);t.protocol==="http:"?t.protocol="ws":t.protocol="wss",t.pathname="/ws";var r=new WebSocket(t.toString());return r.onopen=function(i){return TQ(e,r)},r.onmessage=function(i){return OQ(i,e)},r.onerror=DQ,r}function TQ(n,e){RB(e,n).then(function(){var t,r;try{for(var i=AQ(n.subscribers.keys()),o=i.next();!o.done;o=i.next()){var s=o.value;n.subscribeWebSocket(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}})}function OQ(n,e){if(n.data.startsWith("COMMIT ")){var t=n.data.slice(7);gQ(t,e)}else if(n.data.startsWith("ERROR "))e.notifyError(n.data.slice(6));else if(n.data.startsWith("RESOURCE ")){var r=DB(n);e.addResources(r)}else console.warn("Unknown websocket message:",n)}function DQ(n){console.error("websocket error:",n)}function DB(n){var e=n.data.slice(9),t=JSON.parse(e),r=new gh,i=MQ(r.parseObject(t),2);i[0];var o=i[1];return o}function RB(n,e){var t;return TB(this,void 0,void 0,function(){var r,i;return OB(this,function(o){switch(o.label){case 0:return r=e.getAgent(),!r||!r.subject?[2]:!n.url.startsWith("ws://localhost:")&&(!((t=r==null?void 0:r.subject)===null||t===void 0)&&t.startsWith("http://localhost"))?(console.warn("Can't authenticate localhost Agent over websocket with remote server, because the server will nog be able to retrieve your Agent and verify your public key."),[2]):[4,hB(n.url,r)];case 1:return i=o.sent(),n.send("AUTHENTICATE "+JSON.stringify(i)),[2]}})})}var I8=5e3;function RQ(n,e){return TB(this,void 0,void 0,function(){return OB(this,function(t){return[2,new Promise(function(r,i){n.addEventListener("message",function o(s){var a=setTimeout(function(){n.removeEventListener("message",o),i(new Error('Request for subject "'.concat(e,'" timed out after ').concat(I8,"ms.")))},I8);s.data.startsWith("RESOURCE ")&&DB(s).forEach(function(l){l.getSubject()===e&&(clearTimeout(a),n.removeEventListener("message",o),r(l))})}),n.send("GET "+e)})]})})}var li=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},ui=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},N8=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PQ=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},su;(function(n){n.ResourceSaved="resource-saved",n.ResourceRemoved="resource-removed",n.ResourceManuallyCreated="resource-manually-created",n.AgentChanged="agent-changed",n.Error="error"})(su||(su={}));var Tw=function(){return typeof WebSocket<"u"},IQ=function(){function n(e){e===void 0&&(e={}),this.batchedResources=new Map,this.eventManager=new EQ,this._resources=new Map,this.webSockets=new Map,this.subscribers=new Map,e.serverUrl&&this.setServerUrl(e.serverUrl),e.agent&&this.setAgent(e.agent),this.client=new Cl(this.injectedFetch),this.getAgent=this.getAgent.bind(this),this.setAgent=this.setAgent.bind(this)}return Object.defineProperty(n.prototype,"resources",{get:function(){return this._resources},enumerable:!1,configurable:!0}),n.prototype.injectFetch=function(e){this.injectedFetch=e,this.client.setFetch(e)},n.prototype.addResources=function(e,t){var r,i;try{for(var o=N8(Array.isArray(e)?e:[e]),s=o.next();!s.done;s=o.next()){var a=s.value;this.addResource(a,t??{})}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},n.prototype.addResource=function(e,t){var r=t.skipCommitCompare;if(e.get(Mt.properties.incomplete)){var i=this.resources.get(e.getSubject());if(i&&!i.loading)return}if(!r){var o=this.resources.get(e.getSubject());if(o&&!o.hasClasses(dB.classes.collection)&&!o.loading&&!o.new&&o.get(N3.properties.lastCommit)===e.get(N3.properties.lastCommit))return}this.resources.set(e.getSubject(),e.__internalObject),this.notify(e.__internalObject)},n.prototype.checkSubjectTaken=function(e){var t;return li(this,void 0,void 0,function(){var r,i,o;return ui(this,function(s){switch(s.label){case 0:if(r=this.resources.get(e),r!=null&&r.isReady()&&!(r!=null&&r.new))return[2,!0];s.label=1;case 1:return s.trys.push([1,3,,4]),i=this.agent?{agent:this.agent,serverURL:this.getServerUrl()}:void 0,[4,this.client.fetchResourceHTTP(e,{method:"GET",signInfo:i})];case 2:return o=s.sent().createdResources,!((t=o.find(function(a){return a.getSubject()===e}))===null||t===void 0)&&t.isReady()?[2,!0]:[3,4];case 3:return s.sent(),[3,4];case 4:return[2,!1]}})})},n.prototype.buildUniqueSubjectFromParts=function(e,t){return li(this,void 0,void 0,function(){var r,i;return ui(this,function(o){return r=e.join("/"),i=t??this.getServerUrl(),[2,this.findAvailableSubject(r,i)]})})},n.prototype.createSubject=function(e,t){var r=this.randomPart();return e=e||"things",t?"".concat(t,"/").concat(e,"/").concat(r):"".concat(this.getServerUrl(),"/").concat(e,"/").concat(r)},n.prototype.fetchResourceFromServer=function(e,t){return t===void 0&&(t={}),li(this,void 0,void 0,function(){var r,i,o,s;return ui(this,function(a){switch(a.label){case 0:return t.setLoading&&(r=new Yd(e),r.loading=!0,this.addResources(r)),i=this.getWebSocketForSubject(e),!t.fromProxy&&!t.noWebSocket&&Tw()&&(i==null?void 0:i.readyState)===WebSocket.OPEN?[4,RQ(i,e)]:[3,2];case 1:return a.sent(),[3,4];case 2:return o=this.agent?{agent:this.agent,serverURL:this.getServerUrl()}:void 0,[4,this.client.fetchResourceHTTP(e,{from:t.fromProxy?this.getServerUrl():void 0,method:t.method,body:t.body,signInfo:o})];case 3:s=a.sent().createdResources,this.addResources(s),a.label=4;case 4:return[2,this.resources.get(e)]}})})},n.prototype.getAllSubjects=function(){return Array.from(this.resources.keys())},n.prototype.getDefaultWebSocket=function(){return this.webSockets.get(this.getServerUrl())},n.prototype.getWebSocketForSubject=function(e){var t=new URL(e),r=this.webSockets.get(t.origin);if(r)return r;typeof window<"u"&&this.webSockets.set(t.origin,P8(t.origin,this))},n.prototype.getServerUrl=function(){return this.serverUrl},n.prototype.getAgent=function(){var e;return(e=this.agent)!==null&&e!==void 0?e:void 0},n.prototype.getResourceLoading=function(e,t){if(e===void 0&&(e=Ic),t===void 0&&(t={}),e===Ic||e===null){var r=new Yd(Ic,t.newResource);return r}var i=this.resources.get(e);if(i)!t.allowIncomplete&&i.loading===!1&&i.get(Mt.properties.incomplete)&&(i.loading=!0,this.addResources(i),this.fetchResourceFromServer(e,t));else return i=new Yd(e,t.newResource),i.loading=!0,this.addResources(i),t.newResource||this.fetchResourceFromServer(e,t),i;return i},n.prototype.getResourceAsync=function(e){return li(this,void 0,void 0,function(){var t,r=this;return ui(this,function(i){return t=this.resources.get(e),t&&t.isReady()?[2,t]:t&&!t.isReady()?[2,new Promise(function(o,s){var a=5e3,l=function(u){r.unsubscribe(e,l),o(u)};r.subscribe(e,l),setTimeout(function(){r.unsubscribe(e,l),s(new Error('Async Request for subject "'.concat(e,'" timed out after ').concat(a,"ms.")))},a)})]:[2,this.fetchResourceFromServer(e)]})})},n.prototype.getProperty=function(e){var t;return li(this,void 0,void 0,function(){var r,i,o,s,a,l;return ui(this,function(u){switch(u.label){case 0:return[4,this.getResourceAsync(e)];case 1:if(r=u.sent(),r===void 0)throw Error("Property ".concat(e," is not found"));if(r.error)throw Error("Property ".concat(e," cannot be loaded: ").concat(r.error));if(i=r.get(Mt.properties.datatype),i===void 0)throw Error("Property ".concat(e," has no datatype: ").concat(r.getPropVals()));if(o=r.get(Mt.properties.shortname),o===void 0)throw Error("Property ".concat(e," has no shortname: ").concat(r.getPropVals()));if(s=r.get(Mt.properties.description),s===void 0)throw Error("Property ".concat(e," has no description: ").concat(r.getPropVals()));return a=(t=r.get(Mt.properties.classType))===null||t===void 0?void 0:t.toString(),l={subject:e,classType:a,shortname:o.toString(),description:s.toString(),datatype:kQ(i.toString())},[2,l]}})})},n.prototype.notifyError=function(e){var t=e instanceof Error?e:new Error(e);if(this.eventManager.hasSubscriptions(su.Error))this.eventManager.emit(su.Error,t);else throw t},n.prototype.isOffline=function(){var e;return jv()?!(!((e=window==null?void 0:window.navigator)===null||e===void 0)&&e.onLine):!1},n.prototype.notifyResourceSaved=function(e){return li(this,void 0,void 0,function(){return ui(this,function(t){switch(t.label){case 0:return[4,this.eventManager.emit(su.ResourceSaved,e)];case 1:return t.sent(),[2]}})})},n.prototype.notifyResourceManuallyCreated=function(e){return li(this,void 0,void 0,function(){return ui(this,function(t){switch(t.label){case 0:return[4,this.eventManager.emit(su.ResourceManuallyCreated,e)];case 1:return t.sent(),[2]}})})},n.prototype.parseMetaTags=function(){var e=this,t=document.querySelectorAll('meta[property="json-ad-initial"]'),r=new gh;t.forEach(function(i){var o=i.getAttribute("content");if(o!==null){var s=JSON.parse(atob(o)),a=PQ(r.parseObject(s),2);a[0];var l=a[1];e.addResources(l)}})},n.prototype.preloadPropsAndClasses=function(){return li(this,void 0,void 0,function(){var e,t;return ui(this,function(r){switch(r.label){case 0:return e=new URL("/classes",this.serverUrl),t=new URL("/properties",this.serverUrl),e.searchParams.set("include_external","true"),t.searchParams.set("include_external","true"),e.searchParams.set("include_nested","true"),t.searchParams.set("include_nested","true"),e.searchParams.set("page_size","999"),t.searchParams.set("page_size","999"),[4,Promise.all([this.fetchResourceFromServer(e.toString()),this.fetchResourceFromServer(t.toString())])];case 1:return r.sent(),[2]}})})},n.prototype.postToServer=function(e,t){return li(this,void 0,void 0,function(){return ui(this,function(r){return[2,this.fetchResourceFromServer(e,{body:t,noWebSocket:!0,method:"POST"})]})})},n.prototype.removeResource=function(e){var t=this.resources.get(e);t&&(this.resources.delete(e),this.eventManager.emit(su.ResourceRemoved,t))},n.prototype.renameSubject=function(e,t){var r;return li(this,void 0,void 0,function(){var i,o;return ui(this,function(s){switch(s.label){case 0:return Cl.tryValidSubject(t),i=e.getSubject(),[4,this.checkSubjectTaken(t)];case 1:if(s.sent())throw Error("New subject name is already taken: ".concat(t));return e.setSubject(t),o=(r=this.subscribers.get(i))!==null&&r!==void 0?r:[],this.subscribers.set(t,o),this.removeResource(i),this.addResources(e),[2]}})})},n.prototype.setAgent=function(e){var t=this;this.agent=e,e&&e.subject?(jv()&&gB(this.serverUrl,e),this.webSockets.forEach(function(r){r.readyState===r.OPEN&&RB(r,t)}),this.resources.forEach(function(r){(r.isUnauthorized()||r.loading)&&t.fetchResourceFromServer(r.getSubject())})):jv()&&MX(),this.eventManager.emit(su.AgentChanged,e)},n.prototype.setServerUrl=function(e){if(Cl.tryValidSubject(e),e.substring(-1)==="/")throw Error("baseUrl should not have a trailing slash");this.serverUrl=e,Tw()&&this.openWebSocket(e)},n.prototype.openWebSocket=function(e){if(Tw()){if(this.webSockets.has(e))return;this.webSockets.set(e,P8(e,this))}else console.warn("WebSockets not supported, no window available")},n.prototype.subscribe=function(e,t){var r=this;if(e===void 0)throw Error("Cannot subscribe to undefined subject");var i=this.subscribers.get(e);return i===void 0&&(this.subscribeWebSocket(e),i=[]),i.push(t),this.subscribers.set(e,i),function(){r.unsubscribe(e,t)}},n.prototype.subscribeWebSocket=function(e){if(e!==Ic)try{var t=this.getWebSocketForSubject(e);(t==null?void 0:t.readyState)===1&&(t==null||t.send("SUBSCRIBE ".concat(e)))}catch(r){console.error(r)}},n.prototype.unSubscribeWebSocket=function(e){var t;if(e!==Ic)try{(t=this.getDefaultWebSocket())===null||t===void 0||t.send("UNSUBSCRIBE ".concat(e))}catch(r){console.error(r)}},n.prototype.unsubscribe=function(e,t){if(e!==void 0){var r=this.subscribers.get(e);r&&(r=r==null?void 0:r.filter(function(i){return i!==t}),this.subscribers.set(e,r))}},n.prototype.on=function(e,t){return this.eventManager.register(e,t)},n.prototype.uploadFiles=function(e,t){return li(this,void 0,void 0,function(){var r,i;return ui(this,function(o){switch(o.label){case 0:if(r=this.getAgent(),!r)throw Error("No agent set, cannot upload files");return[4,this.client.uploadFiles(e,this.getServerUrl(),r,t)];case 1:return i=o.sent(),this.addResources(i),[2,i.map(function(s){return s.getSubject()})]}})})},n.prototype.postCommit=function(e,t){return li(this,void 0,void 0,function(){return ui(this,function(r){return[2,this.client.postCommit(e,t)]})})},n.prototype.getResourceAncestry=function(e){return li(this,void 0,void 0,function(){var t,r,i;return ui(this,function(o){switch(o.label){case 0:t=[e.getSubject()],r=e.get(Mt.properties.parent),r&&t.push(r),o.label=1;case 1:return r?[4,this.getResourceAsync(r)]:[3,3];case 2:if(i=o.sent(),i){if(r=i.get(Mt.properties.parent),t.includes(r))throw new Error("Resource ".concat(e.getSubject()," ancestry is cyclical. ").concat(r," is already in the ancestry}"));t.push(r)}return[3,1];case 3:return[2,t]}})})},n.prototype.clientSideQuery=function(e){return Array.from(this.resources.values()).filter(e)},n.prototype.batchResource=function(e){var t=this._resources.get(e);if(!t)throw new Error("Resource ".concat(e," can not be saved because it is not in the store."));var r=t.get(rx.properties.parent);if(r===void 0)throw new Error("Resource ".concat(e," can not be added to a batch because it's missing a parent."));this.batchedResources.has(r)?this.batchedResources.get(r).add(e):this.batchedResources.set(r,new Set([e]))},n.prototype.saveBatchForParent=function(e){return li(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u;return ui(this,function(c){switch(c.label){case 0:if(t=this.batchedResources.get(e),!t)return[2];c.label=1;case 1:c.trys.push([1,6,7,8]),r=N8(t),i=r.next(),c.label=2;case 2:return i.done?[3,5]:(o=i.value,s=this._resources.get(o),[4,s==null?void 0:s.save(this)]);case 3:c.sent(),c.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return a=c.sent(),l={error:a},[3,8];case 7:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(l)throw l.error}return[7];case 8:return this.batchedResources.delete(e),[2]}})})},n.prototype.randomPart=function(){return Math.random().toString(36).substring(2)},n.prototype.findAvailableSubject=function(e,t,r){return r===void 0&&(r=!0),li(this,void 0,void 0,function(){var i,o,s;return ui(this,function(a){switch(a.label){case 0:return i="".concat(t,"/").concat(e),r||(o=this.randomPart(),i+="-".concat(o)),[4,this.checkSubjectTaken(i)];case 1:return s=a.sent(),s?[2,this.findAvailableSubject(e,t,!1)]:[2,i]}})})},n.prototype.notify=function(e){return li(this,void 0,void 0,function(){var t,r,i=this;return ui(this,function(o){return t=e.getSubject(),r=this.subscribers.get(t),r===void 0?[2]:(Promise.allSettled(r.map(function(s){return li(i,void 0,void 0,function(){return ui(this,function(a){return[2,s(e)]})})})),[2])})})},n}();globalThis&&globalThis.__read;function Ow(n){if(n===void 0)throw new Error("Not an array: ".concat(n,", is ").concat(typeof n));if(n.constructor===Array)return n;throw new Error("Not an array: ".concat(n,", is a ").concat(typeof n))}var NQ={agent:"https://atomicdata.dev/classes/Agent",chatRoom:"https://atomicdata.dev/classes/ChatRoom",collection:"https://atomicdata.dev/classes/Collection",commit:"https://atomicdata.dev/classes/Commit",class:"https://atomicdata.dev/classes/Class",document:"https://atomicdata.dev/classes/Document",bookmark:"https://atomicdata.dev/class/Bookmark",elements:{paragraph:"https://atomicdata.dev/classes/elements/Paragraph"},error:"https://atomicdata.dev/classes/Error",property:"https://atomicdata.dev/classes/Property",datatype:"https://atomicdata.dev/classes/Datatype",endpoint:"https://atomicdata.dev/classes/Endpoint",drive:"https://atomicdata.dev/classes/Drive",redirect:"https://atomicdata.dev/classes/Redirect",invite:"https://atomicdata.dev/classes/Invite",file:"https://atomicdata.dev/classes/File",message:"https://atomicdata.dev/classes/Message",importer:"https://atomicdata.dev/classes/Importer",folder:"https://atomicdata.dev/classes/Folder",article:"https://atomicdata.dev/classes/Article",displayStyle:"https://atomicdata.dev/class/DisplayStyle",displayStyles:{grid:"https://atomicdata.dev/display-style/grid",list:"https://atomicdata.dev/display-style/list"},dateFormat:"https://atomicdata.dev/classes/DateFormat",numberFormat:"https://atomicdata.dev/classes/NumberFormat",constraintProperties:{rangeProperty:"https://atomicdata.dev/classes/RangeProperty",floatRangeProperty:"https://atomicdata.dev/classes/FloatRangeProperty",formattedNumber:"https://atomicdata.dev/classes/FormattedNumber",selectProperty:"https://atomicdata.dev/classes/SelectProperty",formattedDate:"https://atomicdata.dev/classes/FormattedDate"},table:"https://atomicdata.dev/classes/Table",tag:"https://atomicdata.dev/classes/Tag",ontology:"https://atomicdata.dev/class/ontology"},yr={allowsOnly:"https://atomicdata.dev/properties/allowsOnly",getAll:"https://atomicdata.dev/properties/?page_size=999",children:"https://atomicdata.dev/properties/children",classType:"https://atomicdata.dev/properties/classtype",createdBy:"https://atomicdata.dev/properties/createdBy",datatype:"https://atomicdata.dev/properties/datatype",description:"https://atomicdata.dev/properties/description",drives:"https://atomicdata.dev/properties/drives",incomplete:"https://atomicdata.dev/properties/incomplete",isA:"https://atomicdata.dev/properties/isA",isDynamic:"https://atomicdata.dev/properties/isDynamic",name:"https://atomicdata.dev/properties/name",parent:"https://atomicdata.dev/properties/parent",paymentPointer:"https://atomicdata.dev/properties/paymentPointer",read:"https://atomicdata.dev/properties/read",recommends:"https://atomicdata.dev/properties/recommends",requires:"https://atomicdata.dev/properties/requires",shortname:"https://atomicdata.dev/properties/shortname",subResources:"https://atomicdata.dev/properties/subresources",write:"https://atomicdata.dev/properties/write",displayStyle:"https://atomicdata.dev/property/display-style",publishedAt:"https://atomicdata.dev/properties/published-at",agent:{publicKey:"https://atomicdata.dev/properties/publicKey"},collection:{members:"https://atomicdata.dev/properties/collection/members",currentPage:"https://atomicdata.dev/properties/collection/currentPage",pageSize:"https://atomicdata.dev/properties/collection/pageSize",property:"https://atomicdata.dev/properties/collection/property",totalMembers:"https://atomicdata.dev/properties/collection/totalMembers",totalPages:"https://atomicdata.dev/properties/collection/totalPages",value:"https://atomicdata.dev/properties/collection/value"},commit:{subject:"https://atomicdata.dev/properties/subject",createdAt:"https://atomicdata.dev/properties/createdAt",lastCommit:"https://atomicdata.dev/properties/lastCommit",previousCommit:"https://atomicdata.dev/properties/previousCommit",signer:"https://atomicdata.dev/properties/signer",set:"https://atomicdata.dev/properties/set",push:"https://atomicdata.dev/properties/push",remove:"https://atomicdata.dev/properties/remove",destroy:"https://atomicdata.dev/properties/destroy",signature:"https://atomicdata.dev/properties/signature"},document:{elements:"https://atomicdata.dev/properties/documents/elements"},endpoint:{parameters:"https://atomicdata.dev/properties/endpoint/parameters",results:"https://atomicdata.dev/properties/endpoint/results"},search:{query:"https://atomicdata.dev/properties/search/query",limit:"https://atomicdata.dev/properties/search/limit",property:"https://atomicdata.dev/properties/search/property"},redirect:{destination:"https://atomicdata.dev/properties/destination",redirectAgent:"https://atomicdata.dev/properties/invite/redirectAgent"},invite:{agent:"https://atomicdata.dev/properties/invite/agent",publicKey:"https://atomicdata.dev/properties/invite/publicKey",target:"https://atomicdata.dev/properties/invite/target",usagesLeft:"https://atomicdata.dev/properties/invite/usagesLeft",users:"https://atomicdata.dev/properties/invite/users",write:"https://atomicdata.dev/properties/invite/write"},file:{filename:"https://atomicdata.dev/properties/filename",filesize:"https://atomicdata.dev/properties/filesize",downloadUrl:"https://atomicdata.dev/properties/downloadURL",mimetype:"https://atomicdata.dev/properties/mimetype",attachments:"https://atomicdata.dev/properties/attachments"},chatRoom:{messages:"https://atomicdata.dev/properties/messages",nextPage:"https://atomicdata.dev/properties/nextPage",replyTo:"https://atomicdata.dev/properties/replyTo"},bookmark:{url:"https://atomicdata.dev/property/url",preview:"https://atomicdata.dev/property/preview",imageUrl:"https://atomicdata.dev/properties/imageUrl"},constraints:{max:"https://atomicdata.dev/properties/max",min:"https://atomicdata.dev/properties/min",maxFloat:"https://atomicdata.dev/properties/maxFloat",minFloat:"https://atomicdata.dev/properties/minFloat",numberFormatting:"https://atomicdata.dev/properties/numberFormatting",decimalPlaces:"https://atomicdata.dev/properties/decimalPlaces",dateFormat:"https://atomicdata.dev/properties/dateFormat"},table:{tableColumnWidths:"https://atomicdata.dev/properties/tableColumnWidths"},ontology:{customNodePositioning:"https://atomicdata.dev/properties/custom-node-positioning"},color:"https://atomicdata.dev/properties/color",emoji:"https://atomicdata.dev/properties/emoji",classes:"https://atomicdata.dev/properties/classes",properties:"https://atomicdata.dev/properties/properties",instances:"https://atomicdata.dev/properties/instances"},BQ={atomicUrl:"https://atomicdata.dev/datatypes/atomicURL",boolean:"https://atomicdata.dev/datatypes/boolean",date:"https://atomicdata.dev/datatypes/date",float:"https://atomicdata.dev/datatypes/float",integer:"https://atomicdata.dev/datatypes/integer",markdown:"https://atomicdata.dev/datatypes/markdown",resourceArray:"https://atomicdata.dev/datatypes/resourceArray",slug:"https://atomicdata.dev/datatypes/slug",string:"https://atomicdata.dev/datatypes/string",timestamp:"https://atomicdata.dev/datatypes/timestamp"},PB={publicAgent:"https://atomicdata.dev/agents/publicAgent",displayStyleGrid:"https://atomicdata.dev/agents/publicAgent",numberFormats:{number:"https://atomicdata.dev/classes/NumberFormat/number",percentage:"https://atomicdata.dev/classes/NumberFormat/Percentage"},dateFormats:{localNumeric:"https://atomicdata.dev/classes/DateFormat/localNumeric",localLong:"https://atomicdata.dev/classes/DateFormat/localLong",localRelative:"https://atomicdata.dev/classes/DateFormat/localRelative"}},LQ={import:"/import"},Mt={properties:yr,endpoints:LQ,classes:NQ,datatypes:BQ,instances:PB},h1=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},Rp=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},em=globalThis&&globalThis.__await||function(n){return this instanceof em?(this.v=n,this):new em(n)},FQ=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){o.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){f(o[0][3],p)}}function l(d){d.value instanceof em?Promise.resolve(d.value.v).then(u,c):f(o[0][2],d)}function u(d){a("next",d)}function c(d){a("throw",d)}function f(d,h){d(h),o.shift(),o.length&&a(o[0][0],o[0][1])}},zQ=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof z3=="function"?z3(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}},z3=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jQ=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o};(function(){function n(e,t,r,i){i===void 0&&(i=!1),this.__internalObject=this,this.pages=new Map,this._totalMembers=0,this.store=e,this.server=t,this.params=r,i||(this._waitForReady=this.fetchPage(0)),this.clearPages=this.clearPages.bind(this)}return Object.defineProperty(n.prototype,"property",{get:function(){return this.params.property},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.params.value},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sortBy",{get:function(){return this.params.sort_by},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sortDesc",{get:function(){return!!this.params.sort_desc},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pageSize",{get:function(){return parseInt(this.params.page_size,10)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"totalMembers",{get:function(){return this._totalMembers},enumerable:!1,configurable:!0}),n.prototype.waitForReady=function(){return this._waitForReady},n.prototype.getMemberWithIndex=function(e){return h1(this,void 0,void 0,function(){var t,r,i;return Rp(this,function(o){switch(o.label){case 0:if(e>=this.totalMembers)throw new Error("Index out of bounds");return t=Math.floor(e/this.pageSize),this.pages.has(t)?[3,2]:(this._waitForReady=this.fetchPage(t),[4,this._waitForReady]);case 1:o.sent(),o.label=2;case 2:return r=this.pages.get(t),i=r.getArray(Mt.properties.collection.members),[2,i[e%this.pageSize]]}})})},n.prototype.clearPages=function(){this.pages=new Map},n.prototype.refresh=function(){return h1(this,void 0,void 0,function(){return Rp(this,function(e){return this.clearPages(),this._waitForReady=this.fetchPage(0),[2,this._waitForReady]})})},n.prototype.clone=function(){var e=new n(this.store,this.server,this.params);return e._totalMembers=this._totalMembers,e._waitForReady=this._waitForReady,e.pages=this.pages,e},n.prototype[Symbol.asyncIterator]=function(){return FQ(this,arguments,function(){var t;return Rp(this,function(r){switch(r.label){case 0:return[4,em(this.waitForReady())];case 1:r.sent(),t=0,r.label=2;case 2:return t<this.totalMembers?[4,em(this.getMemberWithIndex(t))]:[3,6];case 3:return[4,r.sent()];case 4:r.sent(),r.label=5;case 5:return t++,[3,2];case 6:return[2]}})})},n.prototype.getAllMembers=function(){var e,t,r,i;return h1(this,void 0,void 0,function(){var o,s,a,l,u,c,f;return Rp(this,function(d){switch(d.label){case 0:o=this.params.page_size,this.params.page_size="1000",s=[],d.label=1;case 1:d.trys.push([1,6,7,12]),a=!0,l=zQ(this),d.label=2;case 2:return[4,l.next()];case 3:if(u=d.sent(),e=u.done,!!e)return[3,5];i=u.value,a=!1;try{c=i,s.push(c)}finally{a=!0}d.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return f=d.sent(),t={error:f},[3,12];case 7:return d.trys.push([7,,10,11]),!a&&!e&&(r=l.return)?[4,r.call(l)]:[3,9];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(t)throw t.error;return[7];case 11:return[7];case 12:return this.params.page_size=o,[2,s]}})})},n.prototype.buildSubject=function(e){var t,r,i=new URL("".concat(this.server,"/query"));try{for(var o=z3(Object.entries(this.params)),s=o.next();!s.done;s=o.next()){var a=jQ(s.value,2),l=a[0],u=a[1];i.searchParams.set(l,u)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i.searchParams.set("current_page","".concat(e)),i.toString()},n.prototype.fetchPage=function(e){return h1(this,void 0,void 0,function(){var t,r,i;return Rp(this,function(o){switch(o.label){case 0:return t=this.buildSubject(e),[4,this.store.fetchResourceFromServer(t)];case 1:if(r=o.sent(),!r)throw new Error("Invalid collection: resource does not exist");if(r.error)throw new Error("Invalid collection: resource has error: ".concat(r.error));if(this.pages.set(e,r),i=r.get(Mt.properties.collection.totalMembers),!MB(i))throw new Error("Invalid collection: total-members is not a number");return this._totalMembers=i,[2]}})})},n})();globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;kX();function HQ(n){let e,t;return{c(){e=B("option"),t=Se(n[1]),e.__value=n[0],e.value=e.__value},m(r,i){H(r,e,i),T(e,t)},p(r,[i]){i&2&&ze(t,r[1]),i&1&&(e.__value=r[0],e.value=e.__value)},i:pe,o:pe,d(r){r&&j(e)}}}function VQ(n,e,t){let r,{subject:i}=e;const o=fB(i),s=_b(o,Mt.properties.name);return nn(n,s,a=>t(1,r=a)),_b(o,"http://localhost:9883/property/theme"),n.$$set=a=>{"subject"in a&&t(0,i=a.subject)},[i,r,s]}class WQ extends ye{constructor(e){super(),be(this,e,VQ,HQ,Be,{subject:0})}}function oi(n,e=qQ(n)){if(!e)return UQ;const t=KQ(n);return function(...i){console.log(`%c${n}`,`color:${t}`,...i)}}function qQ(n){const e=GQ("debug");return e!=null&&e.endsWith("*")?n.startsWith(e.slice(0,-1)):n===e}function UQ(){}function GQ(n){try{if(typeof window<"u"&&typeof window.localStorage<"u")return window.localStorage[n]}catch{}}function KQ(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return B8[Math.abs(e)%B8.length]}const B8=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"],{window:JQ}=q4;function L8(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w=n[1].closeButton&&F8(n);var _=n[2];function y(k){return{}}return _&&(s=Ht(_,y())),{c(){e=B("div"),t=B("div"),r=B("div"),w&&w.c(),i=K(),o=B("div"),s&&$(s.$$.fragment),C(o,"class",a=qn(n[1].classContent)+" svelte-n7cvum"),C(o,"style",n[9]),oe(o,"content",!n[0]),C(r,"class",l=qn(n[1].classWindow)+" svelte-n7cvum"),C(r,"role","dialog"),C(r,"aria-modal","true"),C(r,"aria-label",u=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),C(r,"aria-labelledby",c=n[1].ariaLabelledBy||null),C(r,"style",n[8]),oe(r,"window",!n[0]),C(t,"class",d=qn(n[1].classWindowWrap)+" svelte-n7cvum"),C(t,"style",n[7]),oe(t,"wrap",!n[0]),C(e,"aria-hidden","true"),C(e,"id",h=n[1].id),C(e,"class",p=qn(n[1].classBg)+" svelte-n7cvum"),C(e,"style",n[6]),oe(e,"bg",!n[0])},m(k,S){H(k,e,S),T(e,t),T(t,r),w&&w.m(r,null),T(r,i),T(r,o),s&&Q(s,o,null),n[50](r),n[51](t),n[52](e),g=!0,v||(b=[le(r,"introstart",function(){dr(n[13])&&n[13].apply(this,arguments)}),le(r,"outrostart",function(){dr(n[14])&&n[14].apply(this,arguments)}),le(r,"introend",function(){dr(n[15])&&n[15].apply(this,arguments)}),le(r,"outroend",function(){dr(n[16])&&n[16].apply(this,arguments)}),le(e,"mousedown",n[20]),le(e,"mouseup",n[21])],v=!0)},p(k,S){if(n=k,n[1].closeButton?w?(w.p(n,S),S[0]&2&&x(w,1)):(w=F8(n),w.c(),x(w,1),w.m(r,i)):w&&(de(),D(w,1,1,()=>{w=null}),he()),S[0]&4&&_!==(_=n[2])){if(s){de();const E=s;D(E.$$.fragment,1,0,()=>{Z(E,1)}),he()}_?(s=Ht(_,y()),$(s.$$.fragment),x(s.$$.fragment,1),Q(s,o,null)):s=null}(!g||S[0]&2&&a!==(a=qn(n[1].classContent)+" svelte-n7cvum"))&&C(o,"class",a),(!g||S[0]&512)&&C(o,"style",n[9]),(!g||S[0]&3)&&oe(o,"content",!n[0]),(!g||S[0]&2&&l!==(l=qn(n[1].classWindow)+" svelte-n7cvum"))&&C(r,"class",l),(!g||S[0]&2&&u!==(u=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&C(r,"aria-label",u),(!g||S[0]&2&&c!==(c=n[1].ariaLabelledBy||null))&&C(r,"aria-labelledby",c),(!g||S[0]&256)&&C(r,"style",n[8]),(!g||S[0]&3)&&oe(r,"window",!n[0]),(!g||S[0]&2&&d!==(d=qn(n[1].classWindowWrap)+" svelte-n7cvum"))&&C(t,"class",d),(!g||S[0]&128)&&C(t,"style",n[7]),(!g||S[0]&3)&&oe(t,"wrap",!n[0]),(!g||S[0]&2&&h!==(h=n[1].id))&&C(e,"id",h),(!g||S[0]&2&&p!==(p=qn(n[1].classBg)+" svelte-n7cvum"))&&C(e,"class",p),(!g||S[0]&64)&&C(e,"style",n[6]),(!g||S[0]&3)&&oe(e,"bg",!n[0])},i(k){g||(x(w),s&&x(s.$$.fragment,k),Tr(()=>{g&&(f||(f=Ai(r,n[12],n[1].transitionWindowProps,!0)),f.run(1))}),Tr(()=>{g&&(m||(m=Ai(e,n[11],n[1].transitionBgProps,!0)),m.run(1))}),g=!0)},o(k){D(w),s&&D(s.$$.fragment,k),f||(f=Ai(r,n[12],n[1].transitionWindowProps,!1)),f.run(0),m||(m=Ai(e,n[11],n[1].transitionBgProps,!1)),m.run(0),g=!1},d(k){k&&j(e),w&&w.d(),s&&Z(s),n[50](null),k&&f&&f.end(),n[51](null),n[52](null),k&&m&&m.end(),v=!1,It(b)}}}function F8(n){let e,t,r,i,o;const s=[XQ,YQ],a=[];function l(u,c){return c[0]&2&&(e=null),e==null&&(e=!!u[17](u[1].closeButton)),e?0:1}return t=l(n,[-1,-1,-1]),r=a[t]=s[t](n),{c(){r.c(),i=Ze()},m(u,c){a[t].m(u,c),H(u,i,c),o=!0},p(u,c){let f=t;t=l(u,c),t===f?a[t].p(u,c):(de(),D(a[f],1,1,()=>{a[f]=null}),he(),r=a[t],r?r.p(u,c):(r=a[t]=s[t](u),r.c()),x(r,1),r.m(i.parentNode,i))},i(u){o||(x(r),o=!0)},o(u){D(r),o=!1},d(u){a[t].d(u),u&&j(i)}}}function YQ(n){let e,t,r,i;return{c(){e=B("button"),C(e,"class",t=qn(n[1].classCloseButton)+" svelte-n7cvum"),C(e,"aria-label","Close modal"),C(e,"style",n[10]),C(e,"type","button"),oe(e,"close",!n[0])},m(o,s){H(o,e,s),r||(i=le(e,"click",n[18]),r=!0)},p(o,s){s[0]&2&&t!==(t=qn(o[1].classCloseButton)+" svelte-n7cvum")&&C(e,"class",t),s[0]&1024&&C(e,"style",o[10]),s[0]&3&&oe(e,"close",!o[0])},i:pe,o:pe,d(o){o&&j(e),r=!1,i()}}}function XQ(n){let e,t,r;var i=n[1].closeButton;function o(s){return{props:{onClose:s[18]}}}return i&&(e=Ht(i,o(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(s,a){e&&Q(e,s,a),H(s,t,a),r=!0},p(s,a){if(a[0]&2&&i!==(i=s[1].closeButton)){if(e){de();const l=e;D(l.$$.fragment,1,0,()=>{Z(l,1)}),he()}i?(e=Ht(i,o(s)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}},i(s){r||(e&&x(e.$$.fragment,s),r=!0)},o(s){e&&D(e.$$.fragment,s),r=!1},d(s){s&&j(t),e&&Z(e,s)}}}function QQ(n){let e,t,r,i,o=n[2]&&L8(n);const s=n[49].default,a=Je(s,n,n[48],null);return{c(){o&&o.c(),e=K(),a&&a.c()},m(l,u){o&&o.m(l,u),H(l,e,u),a&&a.m(l,u),t=!0,r||(i=le(JQ,"keydown",n[19]),r=!0)},p(l,u){l[2]?o?(o.p(l,u),u[0]&4&&x(o,1)):(o=L8(l),o.c(),x(o,1),o.m(e.parentNode,e)):o&&(de(),D(o,1,1,()=>{o=null}),he()),a&&a.p&&(!t||u[1]&131072)&&Xe(a,s,l,l[48],t?Ye(s,l[48],u,null):Qe(l[48]),null)},i(l){t||(x(o),x(a,l),t=!0)},o(l){D(o),D(a,l),t=!1},d(l){o&&o.d(l),l&&j(e),a&&a.d(l),r=!1,i()}}}function IB(n,e={}){return function(r){return new n({...r,props:{...e,...r.props}})}}function ZQ(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=Ga(),s=dg,a=me=>me.tabIndex>=0&&!me.hidden&&!me.disabled&&me.style.display!=="none"&&me.type!=="hidden"&&!!(me.offsetWidth||me.offsetHeight||me.getClientRects().length);let{isTabbable:l=a}=e,{show:u=null}=e,{id:c=null}=e,{key:f="simple-modal"}=e,{ariaLabel:d=null}=e,{ariaLabelledBy:h=null}=e,{closeButton:p=!0}=e,{closeOnEsc:m=!0}=e,{closeOnOuterClick:g=!0}=e,{styleBg:v={}}=e,{styleWindowWrap:b={}}=e,{styleWindow:w={}}=e,{styleContent:_={}}=e,{styleCloseButton:y={}}=e,{classBg:k=null}=e,{classWindowWrap:S=null}=e,{classWindow:E=null}=e,{classContent:M=null}=e,{classCloseButton:R=null}=e,{unstyled:O=!1}=e,{setContext:I=s}=e,{transitionBg:P=vl}=e,{transitionBgProps:A={duration:250}}=e,{transitionWindow:N=P}=e,{transitionWindowProps:F=A}=e,{disableFocusTrap:V=!1}=e;const W={id:c,ariaLabel:d,ariaLabelledBy:h,closeButton:p,closeOnEsc:m,closeOnOuterClick:g,styleBg:v,styleWindowWrap:b,styleWindow:w,styleContent:_,styleCloseButton:y,classBg:k,classWindowWrap:S,classWindow:E,classContent:M,classCloseButton:R,transitionBg:P,transitionBgProps:A,transitionWindow:N,transitionWindowProps:F,disableFocusTrap:V,isTabbable:l,unstyled:O};let L={...W},z=null,q,te,re,ne,fe,ie,G,ae,Me,X,ge,U,Ce,Ee,Ae;const De=me=>me.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),nt=me=>me?Object.keys(me).reduce((ft,Gt)=>`${ft}; ${De(Gt)}: ${me[Gt]}`,""):"",ue=me=>!!(me&&me.constructor&&me.call&&me.apply),Oe=()=>{t(6,fe=nt(Object.assign({},{width:window.innerWidth,height:window.innerHeight},L.styleBg))),t(7,ie=nt(L.styleWindowWrap)),t(8,G=nt(L.styleWindow)),t(9,ae=nt(L.styleContent)),t(10,Me=nt(L.styleCloseButton)),t(11,X=L.transitionBg),t(12,ge=L.transitionWindow)},Ue=()=>{};let _e=Ue,it=Ue,At=Ue,Ve=Ue;const ct=(me,ft={},Gt={},mt={})=>{t(2,z=IB(me,ft)),t(1,L={...W,...Gt}),Oe(),Dn(),t(13,_e=wt=>{mt.onOpen&&mt.onOpen(wt),o("open"),o("opening")}),t(14,it=wt=>{mt.onClose&&mt.onClose(wt),o("close"),o("closing")}),t(15,At=wt=>{mt.onOpened&&mt.onOpened(wt),o("opened")}),t(16,Ve=wt=>{mt.onClosed&&mt.onClosed(wt),o("closed")})},Pt=(me={})=>{z&&(t(14,it=me.onClose||it),t(16,Ve=me.onClosed||Ve),t(2,z=null),Fn())},yt=me=>{if(L.closeOnEsc&&z&&me.key==="Escape"&&(me.preventDefault(),Pt()),z&&me.key==="Tab"&&!L.disableFocusTrap){const ft=re.querySelectorAll("*"),Gt=Array.from(ft).filter(L.isTabbable).sort((wt,Yr)=>wt.tabIndex-Yr.tabIndex);let mt=Gt.indexOf(document.activeElement);mt===-1&&me.shiftKey&&(mt=0),mt+=Gt.length+(me.shiftKey?-1:1),mt%=Gt.length,Gt[mt].focus(),me.preventDefault()}},mn=me=>{L.closeOnOuterClick&&(me.target===q||me.target===te)&&(Ae=me.target)},En=me=>{L.closeOnOuterClick&&me.target===Ae&&(me.preventDefault(),Pt())},Dn=()=>{ne=window.scrollY,U=document.body.style.position,Ce=document.body.style.overflow,Ee=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${ne}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},Fn=()=>{document.body.style.position=U||"",document.body.style.top="",document.body.style.overflow=Ce||"",document.body.style.width=Ee||"",window.scrollTo({top:ne,left:0,behavior:"instant"})};I(f,{open:ct,close:Pt});let bt=!1;Kr(()=>{bt&&Pt()}),Tn(()=>{t(47,bt=!0)});function ve(me){rt[me?"unshift":"push"](()=>{re=me,t(5,re)})}function Ge(me){rt[me?"unshift":"push"](()=>{te=me,t(4,te)})}function $e(me){rt[me?"unshift":"push"](()=>{q=me,t(3,q)})}return n.$$set=me=>{"isTabbable"in me&&t(22,l=me.isTabbable),"show"in me&&t(23,u=me.show),"id"in me&&t(24,c=me.id),"key"in me&&t(25,f=me.key),"ariaLabel"in me&&t(26,d=me.ariaLabel),"ariaLabelledBy"in me&&t(27,h=me.ariaLabelledBy),"closeButton"in me&&t(28,p=me.closeButton),"closeOnEsc"in me&&t(29,m=me.closeOnEsc),"closeOnOuterClick"in me&&t(30,g=me.closeOnOuterClick),"styleBg"in me&&t(31,v=me.styleBg),"styleWindowWrap"in me&&t(32,b=me.styleWindowWrap),"styleWindow"in me&&t(33,w=me.styleWindow),"styleContent"in me&&t(34,_=me.styleContent),"styleCloseButton"in me&&t(35,y=me.styleCloseButton),"classBg"in me&&t(36,k=me.classBg),"classWindowWrap"in me&&t(37,S=me.classWindowWrap),"classWindow"in me&&t(38,E=me.classWindow),"classContent"in me&&t(39,M=me.classContent),"classCloseButton"in me&&t(40,R=me.classCloseButton),"unstyled"in me&&t(0,O=me.unstyled),"setContext"in me&&t(41,I=me.setContext),"transitionBg"in me&&t(42,P=me.transitionBg),"transitionBgProps"in me&&t(43,A=me.transitionBgProps),"transitionWindow"in me&&t(44,N=me.transitionWindow),"transitionWindowProps"in me&&t(45,F=me.transitionWindowProps),"disableFocusTrap"in me&&t(46,V=me.disableFocusTrap),"$$scope"in me&&t(48,i=me.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8388608|n.$$.dirty[1]&65536&&bt&&(ue(u)?ct(u):Pt())},[O,L,z,q,te,re,fe,ie,G,ae,Me,X,ge,_e,it,At,Ve,ue,Pt,yt,mn,En,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S,E,M,R,I,P,A,N,F,V,bt,i,r,ve,Ge,$e]}class NB extends ye{constructor(e){super(),be(this,e,ZQ,QQ,Be,{isTabbable:22,show:23,id:24,key:25,ariaLabel:26,ariaLabelledBy:27,closeButton:28,closeOnEsc:29,closeOnOuterClick:30,styleBg:31,styleWindowWrap:32,styleWindow:33,styleContent:34,styleCloseButton:35,classBg:36,classWindowWrap:37,classWindow:38,classContent:39,classCloseButton:40,unstyled:0,setContext:41,transitionBg:42,transitionBgProps:43,transitionWindow:44,transitionWindowProps:45,disableFocusTrap:46},null,[-1,-1,-1])}}var hi;(function(n){n.text="text",n.tree="tree",n.table="table"})(hi||(hi={}));var _n;(function(n){n.after="after",n.inside="inside",n.key="key",n.value="value",n.multi="multi",n.text="text"})(_n||(_n={}));var Ms;(function(n){n.after="after",n.key="key",n.value="value",n.inside="inside"})(Ms||(Ms={}));var Pl;(function(n){n.info="info",n.warning="warning",n.error="error"})(Pl||(Pl={}));var Is;(function(n){n.key="key",n.value="value"})(Is||(Is={}));var Qo;(function(n){n.asc="asc",n.desc="desc"})(Qo||(Qo={}));var Iu;(function(n){n.no="no",n.self="self",n.nextInside="nextInside"})(Iu||(Iu={}));const j3=300,BB=300,z8=300,$Q=300,j8=50,eZ=200,tZ=400,nZ=1200,H3=1e3,tm=100,Dd=100,V3=2e4,H8=50,V8=50,cf=[{start:0,end:tm}],rZ=100*1024*1024,iZ=1024*1024,W3=10*1024*1024,LB=10*1024,ff={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-container"},oZ={...ff,classWindow:"jse-modal-window jse-modal-window-sort"},sZ={...ff,classWindow:"jse-modal-window jse-modal-window-transform"},W8={...ff,classWindow:"jse-modal-window jse-modal-window-jsoneditor"},dx="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",hx="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",Il="hover-insert-inside",nm="hover-insert-after",q3="hover-collection",Dw="valid",q8="repairable",aZ="invalid",bl=(40+2)*8,yl=260,lZ={[Qo.asc]:"ascending",[Qo.desc]:"descending"};let U8=0;function _0(){return U8++,U8}function Sn(n){return Array.isArray(n)}function nr(n){return n!==null&&typeof n=="object"&&(n.constructor===void 0||n.constructor.name==="Object")}function FB(n){return n&&typeof n=="object"?n.op==="add":!1}function zB(n){return n&&typeof n=="object"?n.op==="remove":!1}function px(n){return n&&typeof n=="object"?n.op==="replace":!1}function U3(n){return n&&typeof n=="object"?n.op==="copy":!1}function vh(n){return n&&typeof n=="object"?n.op==="move":!1}function uZ(n,e){return JSON.stringify(n)===JSON.stringify(e)}function cZ(n,e){return n===e}function jB(n){return n.slice(0,n.length-1)}function fZ(n){return n[n.length-1]}function dZ(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cZ;if(n.length<e.length)return!1;for(let r=0;r<e.length;r++)if(!t(n[r],e[r]))return!1;return!0}function HB(n){return typeof n=="object"&&n!==null}function mx(n){if(Sn(n)){const e=n.slice();return Object.getOwnPropertySymbols(n).forEach(t=>{e[t]=n[t]}),e}else if(nr(n)){const e={...n};return Object.getOwnPropertySymbols(n).forEach(t=>{e[t]=n[t]}),e}else return n}function gx(n,e,t){if(n[e]===t)return n;{const r=mx(n);return r[e]=t,r}}function ot(n,e){let t=n,r=0;for(;r<e.length;)nr(t)?t=t[e[r]]:Sn(t)?t=t[parseInt(e[r])]:t=void 0,r++;return t}function xs(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.length===0)return t;const i=e[0],o=xs(n?n[i]:void 0,e.slice(1),t,r);if(nr(n)||Sn(n))return gx(n,i,o);if(r){const s=hZ.test(i)?[]:{};return s[i]=o,s}else throw new Error("Path does not exist")}const hZ=/^\d+$/;function VB(n,e,t){if(e.length===0)return t(n);if(!HB(n))throw new Error("Path doesn't exist");const r=e[0],i=VB(n[r],e.slice(1),t);return gx(n,r,i)}function vx(n,e){if(e.length===0)return n;if(!HB(n))throw new Error("Path does not exist");if(e.length===1){const i=e[0];if(i in n){const o=mx(n);return Sn(o)&&o.splice(parseInt(i),1),nr(o)&&delete o[i],o}else return n}const t=e[0],r=vx(n[t],e.slice(1));return gx(n,t,r)}function bx(n,e,t){const r=e.slice(0,e.length-1),i=e[e.length-1];return VB(n,r,o=>{if(!Array.isArray(o))throw new TypeError("Array expected at path "+JSON.stringify(r));const s=mx(o);return s.splice(parseInt(i),0,t),s})}function Zo(n,e){return n===void 0?!1:e.length===0?!0:n===null?!1:Zo(n[e[0]],e.slice(1))}function js(n){const e=n.split("/");return e.shift(),e.map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function Ke(n){return n.map(WB).join("")}function WB(n){return"/"+String(n).replace(/~/g,"~0").replace(/\//g,"~1")}function G8(n,e){return n+WB(e)}function j2(n,e){return n.startsWith(e)&&(n.length===e.length||n[e.length]==="/")}function Ns(n,e,t){let r=n;for(let i=0;i<e.length;i++){wZ(e[i]);let o=e[i];if(t&&t.before){const l=t.before(r,o);if(l!==void 0){if(l.document!==void 0&&(r=l.document),l.json!==void 0)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');l.operation!==void 0&&(o=l.operation)}}const s=r,a=Ea(r,o.path);if(o.op==="add")r=gZ(r,a,o.value);else if(o.op==="remove")r=mZ(r,a);else if(o.op==="replace")r=pZ(r,a,o.value);else if(o.op==="copy")r=vZ(r,a,G3(o.from));else if(o.op==="move")r=bZ(r,a,G3(o.from));else if(o.op==="test")yZ(r,a,o.value);else throw new Error("Unknown JSONPatch operation "+JSON.stringify(o));if(t&&t.after){const l=t.after(r,o,s);l!==void 0&&(r=l)}}return r}function pZ(n,e,t){return xs(n,e,t)}function mZ(n,e){return vx(n,e)}function gZ(n,e,t){return vg(n,e)?bx(n,e,t):xs(n,e,t)}function vZ(n,e,t){const r=ot(n,t);if(vg(n,e))return bx(n,e,r);{const i=ot(n,t);return xs(n,e,i)}}function bZ(n,e,t){const r=ot(n,t),i=vx(n,t);return vg(i,e)?bx(i,e,r):xs(i,e,r)}function yZ(n,e,t){if(t===void 0)throw new Error(`Test failed: no value provided (path: "${Ke(e)}")`);if(!Zo(n,e))throw new Error(`Test failed: path not found (path: "${Ke(e)}")`);const r=ot(n,e);if(!uZ(r,t))throw new Error(`Test failed, value differs (path: "${Ke(e)}")`)}function vg(n,e){if(e.length===0)return!1;const t=ot(n,jB(e));return Array.isArray(t)}function _Z(n,e){if(fZ(e)!=="-")return e;const t=jB(e),r=ot(n,t);return t.concat(r.length)}function wZ(n){if(!["add","remove","replace","copy","move","test"].includes(n.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(n.op));if(typeof n.path!="string")throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(n));if((n.op==="copy"||n.op==="move")&&typeof n.from!="string")throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(n))}function Ea(n,e){return _Z(n,js(e))}function G3(n){return js(n)}function qB(n,e,t){let r=[];return Ns(n,e,{before:(o,s)=>{let a;const l=Ea(o,s.path);if(s.op==="add")a=KB(o,l);else if(s.op==="remove")a=GB(o,l);else if(s.op==="replace")a=UB(o,l);else if(s.op==="copy")a=kZ(o,l);else if(s.op==="move")a=CZ(o,l,G3(s.from));else if(s.op==="test")a=[];else throw new Error("Unknown JSONPatch operation "+JSON.stringify(s));let u;if(t&&t.before){const c=t.before(o,s,a);if(c&&c.revertOperations&&(a=c.revertOperations),c&&c.document&&(u=c.document),c&&c.json)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"')}if(r=a.concat(r),u!==void 0)return{document:u}}}),r}function UB(n,e){return[{op:"replace",path:Ke(e),value:ot(n,e)}]}function GB(n,e){return[{op:"add",path:Ke(e),value:ot(n,e)}]}function KB(n,e){return vg(n,e)||!Zo(n,e)?[{op:"remove",path:Ke(e)}]:UB(n,e)}function kZ(n,e){return KB(n,e)}function CZ(n,e,t){if(e.length<t.length&&dZ(t,e))return[{op:"replace",path:Ke(e),value:n}];const r={op:"move",from:Ke(e),path:Ke(t)};return!vg(n,e)&&Zo(n,e)?[r,...GB(n,e)]:[r]}var H2={},K8={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},SZ="a".charCodeAt();H2.parse=function(n,e,t){var r={},i=0,o=0,s=0,a=t&&t.bigint&&typeof BigInt<"u";return{data:l("",!0),pointers:r};function l(M,R){u();var O;w(M,"value");var I=m();switch(I){case"t":p("rue"),O=!0;break;case"f":p("alse"),O=!1;break;case"n":p("ull"),O=null;break;case'"':O=c();break;case"[":O=d(M);break;case"{":O=h(M);break;default:g(),"-0123456789".indexOf(I)>=0?O=f():k()}return w(M,"valueEnd"),u(),R&&s<n.length&&k(),O}function u(){e:for(;s<n.length;){switch(n[s]){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,i++;break;default:break e}s++}}function c(){for(var M="",R;R=m(),R!='"';)R=="\\"?(R=m(),R in K8?M+=K8[R]:R=="u"?M+=v():S()):M+=R;return M}function f(){var M="",R=!0;n[s]=="-"&&(M+=m()),M+=n[s]=="0"?m():b(),n[s]=="."&&(M+=m()+b(),R=!1),(n[s]=="e"||n[s]=="E")&&(M+=m(),(n[s]=="+"||n[s]=="-")&&(M+=m()),M+=b(),R=!1);var O=+M;return a&&R&&(O>Number.MAX_SAFE_INTEGER||O<Number.MIN_SAFE_INTEGER)?BigInt(M):O}function d(M){u();var R=[],O=0;if(m()=="]")return R;for(g();;){var I=M+"/"+O;R.push(l(I)),u();var P=m();if(P=="]")break;P!=","&&S(),u(),O++}return R}function h(M){u();var R={};if(m()=="}")return R;for(g();;){var O=y();m()!='"'&&S();var I=c(),P=M+"/"+K3(I);_(P,"key",O),w(P,"keyEnd"),u(),m()!=":"&&S(),u(),R[I]=l(P),u();var A=m();if(A=="}")break;A!=","&&S(),u()}return R}function p(M){for(var R=0;R<M.length;R++)m()!==M[R]&&S()}function m(){E();var M=n[s];return s++,o++,M}function g(){s--,o--}function v(){for(var M=4,R=0;M--;){R<<=4;var O=m().toLowerCase();O>="a"&&O<="f"?R+=O.charCodeAt()-SZ+10:O>="0"&&O<="9"?R+=+O:S()}return String.fromCharCode(R)}function b(){for(var M="";n[s]>="0"&&n[s]<="9";)M+=m();if(M.length)return M;E(),k()}function w(M,R){_(M,R,y())}function _(M,R,O){r[M]=r[M]||{},r[M][R]=O}function y(){return{line:i,column:o,pos:s}}function k(){throw new SyntaxError("Unexpected token "+n[s]+" in JSON at position "+s)}function S(){g(),k()}function E(){if(s>=n.length)throw new SyntaxError("Unexpected end of JSON input")}};H2.stringify=function(n,e,t){if(!p1(n))return;var r=0,i,o,s=typeof t=="object"?t.space:t;switch(typeof s){case"number":var a=s>10?10:s<0?0:Math.floor(s);s=a&&_(a," "),i=a,o=a;break;case"string":s=s.slice(0,10),i=0,o=0;for(var l=0;l<s.length;l++){var u=s[l];switch(u){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,r++;break;default:throw new Error("whitespace characters not allowed in JSON")}i++}break;default:s=void 0}var c="",f={},d=0,h=0,p=0,m=t&&t.es6&&typeof Map=="function";return g(n,0,""),{json:c,pointers:f};function g(y,k,S){switch(w(S,"value"),typeof y){case"number":case"bigint":case"boolean":v(""+y);break;case"string":v(m1(y));break;case"object":y===null?v("null"):typeof y.toJSON=="function"?v(m1(y.toJSON())):Array.isArray(y)?E():m?y.constructor.BYTES_PER_ELEMENT?E():y instanceof Map?R():y instanceof Set?R(!0):M():M()}w(S,"valueEnd");function E(){if(y.length){v("[");for(var O=k+1,I=0;I<y.length;I++){I&&v(","),b(O);var P=p1(y[I])?y[I]:null,A=S+"/"+I;g(P,O,A)}b(k),v("]")}else v("[]")}function M(){var O=Object.keys(y);if(O.length){v("{");for(var I=k+1,P=0;P<O.length;P++){var A=O[P],N=y[A];if(p1(N)){P&&v(",");var F=S+"/"+K3(A);b(I),w(F,"key"),v(m1(A)),w(F,"keyEnd"),v(":"),s&&v(" "),g(N,I,F)}}b(k),v("}")}else v("{}")}function R(O){if(y.size){v("{");for(var I=k+1,P=!0,A=y.entries(),N=A.next();!N.done;){var F=N.value,V=F[0],W=O?!0:F[1];if(p1(W)){P||v(","),P=!1;var L=S+"/"+K3(V);b(I),w(L,"key"),v(m1(V)),w(L,"keyEnd"),v(":"),s&&v(" "),g(W,I,L)}N=A.next()}b(k),v("}")}else v("{}")}}function v(y){h+=y.length,p+=y.length,c+=y}function b(y){if(s){for(c+=`
`+_(y,s),d++,h=0;y--;)r?(d+=r,h=o):h+=o,p+=i;p+=1}}function w(y,k){f[y]=f[y]||{},f[y][k]={line:d,column:h,pos:p}}function _(y,k){return Array(y+1).join(k)}};var xZ=["number","bigint","boolean","string","object"];function p1(n){return xZ.indexOf(typeof n)>=0}var EZ=/"|\\/g,AZ=/[\b]/g,MZ=/\f/g,TZ=/\n/g,OZ=/\r/g,DZ=/\t/g;function m1(n){return n=n.replace(EZ,"\\$&").replace(MZ,"\\f").replace(AZ,"\\b").replace(TZ,"\\n").replace(OZ,"\\r").replace(DZ,"\\t"),'"'+n+'"'}var RZ=/~/g,PZ=/\//g;function K3(n){return n.replace(RZ,"~0").replace(PZ,"~1")}class ad extends Error{constructor(e,t){super("".concat(e," at position ").concat(t)),this.position=t}}const g1=92,Rw=47,IZ=42,J8=123,v1=125,Y8=91,b1=93,NZ=40,BZ=41,LZ=32,yx=10,JB=9,YB=13,FZ=8,zZ=12,xb=34,X8=43,Q8=45,XB=39,QB=48,ZB=57,xc=44,y1=46,jZ=58,HZ=59,VZ=65,WZ=97,qZ=69,UZ=101,GZ=70,KZ=102,JZ=160,YZ=8192,XZ=8202,QZ=8239,ZZ=8287,$Z=12288,e$=8220,t$=8221,n$=8216,r$=8217,i$=96,o$=180;function s$(n){return n>=QB&&n<=ZB||n>=VZ&&n<=GZ||n>=WZ&&n<=KZ}function Ec(n){return n>=QB&&n<=ZB}function a$(n){return n>=32&&n<=1114111}function yd(n){return l$.test(n)}const l$=/^[,:[\]/{}()\n+]$/;function u$(n){return yd(n)&&n!=="/"}function Z8(n){return c$.test(n)||n&&Hv(n.charCodeAt(0))}const c$=/^[[{\w-]$/;function f$(n){return n===yx||n===YB||n===JB||n===FZ||n===zZ}function Rd(n){return n===LZ||n===yx||n===JB||n===YB}function d$(n){return n===JZ||n>=YZ&&n<=XZ||n===QZ||n===ZZ||n===$Z}function Hv(n){return $B(n)||J3(n)}function $B(n){return n===xb||n===e$||n===t$}function $8(n){return n===xb}function J3(n){return n===XB||n===n$||n===r$||n===i$||n===o$}function eM(n){return n===XB}function Pp(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=n.lastIndexOf(e);return r!==-1?n.substring(0,r)+(t?"":n.substring(r+1)):n}function ia(n,e){let t=n.length;if(!Rd(n.charCodeAt(t-1)))return n+e;for(;Rd(n.charCodeAt(t-1));)t--;return n.substring(0,t)+e+n.substring(t)}function h$(n,e,t){return n.substring(0,e)+n.substring(e+t)}function p$(n){return/[,\n][ \t\r]*$/.test(n)}function m$(n){return/^\w+$/.test(n)}const g$={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},v$={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function Aa(n){let e=0,t="";o()||O();const i=u(xc);for(i&&s(),Z8(n[e])&&p$(t)?(i||(t=ia(t,",")),m()):i&&(t=Pp(t,","));n.charCodeAt(e)===v1||n.charCodeAt(e)===b1;)e++,s();if(e>=n.length)return t;R();function o(){s();const N=h()||p()||g()||b()||w()||y();return s(),N}function s(){const N=e;let F=a();do F=l(),F&&(F=a());while(F);return e>N}function a(){let N="",F;for(;(F=Rd(n.charCodeAt(e)))||d$(n.charCodeAt(e));)F?N+=n[e]:N+=" ",e++;return N.length>0?(t+=N,!0):!1}function l(){if(n.charCodeAt(e)===Rw&&n.charCodeAt(e+1)===IZ){for(;e<n.length&&!b$(n,e);)e++;return e+=2,!0}if(n.charCodeAt(e)===Rw&&n.charCodeAt(e+1)===Rw){for(;e<n.length&&n.charCodeAt(e)!==yx;)e++;return!0}return!1}function u(N){return n.charCodeAt(e)===N?(t+=n[e],e++,!0):!1}function c(N){return n.charCodeAt(e)===N?(e++,!0):!1}function f(){return c(g1)}function d(){return s(),n.charCodeAt(e)===y1&&n.charCodeAt(e+1)===y1&&n.charCodeAt(e+2)===y1?(e+=3,s(),c(xc),!0):!1}function h(){if(n.charCodeAt(e)===J8){t+="{",e++,s(),c(xc)&&s();let N=!0;for(;e<n.length&&n.charCodeAt(e)!==v1;){let F;if(N?(F=!0,N=!1):(F=u(xc),F||(t=ia(t,",")),s()),d(),!(g()||y())){n.charCodeAt(e)===v1||n.charCodeAt(e)===J8||n.charCodeAt(e)===b1||n.charCodeAt(e)===Y8||n[e]===void 0?t=Pp(t,","):I();break}s();const W=u(jZ),L=e>=n.length;W||(Z8(n[e])||L?t=ia(t,":"):P()),o()||(W||L?t+="null":P())}return n.charCodeAt(e)===v1?(t+="}",e++):t=ia(t,"}"),!0}return!1}function p(){if(n.charCodeAt(e)===Y8){t+="[",e++,s(),c(xc)&&s();let N=!0;for(;e<n.length&&n.charCodeAt(e)!==b1;)if(N?N=!1:u(xc)||(t=ia(t,",")),d(),!o()){t=Pp(t,",");break}return n.charCodeAt(e)===b1?(t+="]",e++):t=ia(t,"]"),!0}return!1}function m(){let N=!0,F=!0;for(;F;)N?N=!1:u(xc)||(t=ia(t,",")),F=o();F||(t=Pp(t,",")),t=`[
`.concat(t,`
]`)}function g(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,F=n.charCodeAt(e)===g1;if(F&&(e++,F=!0),Hv(n.charCodeAt(e))){const V=$8(n.charCodeAt(e))?$8:eM(n.charCodeAt(e))?eM:J3(n.charCodeAt(e))?J3:$B,W=e,L=t.length;let z='"';for(e++;;){if(e>=n.length){const q=k(e-1);return!N&&yd(n.charAt(q))?(e=W,t=t.substring(0,L),g(!0)):(z=ia(z,'"'),t+=z,!0)}else if(V(n.charCodeAt(e))){const q=e,te=z.length;if(z+='"',e++,t+=z,s(),N||e>=n.length||yd(n.charAt(e))||Hv(n.charCodeAt(e))||Ec(n.charCodeAt(e)))return v(),!0;if(yd(n.charAt(k(q-1))))return e=W,t=t.substring(0,L),g(!0);t=t.substring(0,L),e=q+1,z="".concat(z.substring(0,te),"\\").concat(z.substring(te))}else{if(N&&yd(n[e]))return z=ia(z,'"'),t+=z,v(),!0;if(n.charCodeAt(e)===g1){const q=n.charAt(e+1);if(v$[q]!==void 0)z+=n.slice(e,e+2),e+=2;else if(q==="u"){let re=2;for(;re<6&&s$(n.charCodeAt(e+re));)re++;re===6?(z+=n.slice(e,e+6),e+=6):e+re>=n.length?e=n.length:A()}else z+=q,e+=2}else{const q=n.charAt(e),te=n.charCodeAt(e);te===xb&&n.charCodeAt(e-1)!==g1?(z+="\\".concat(q),e++):f$(te)?(z+=g$[q],e++):(a$(te)||M(q),z+=q,e++)}}F&&f()}}return!1}function v(){let N=!1;for(s();n.charCodeAt(e)===X8;){N=!0,e++,s(),t=Pp(t,'"',!0);const F=t.length;g()?t=h$(t,F,1):t=ia(t,'"')}return N}function b(){const N=e;if(n.charCodeAt(e)===Q8){if(e++,S())return E(N),!0;if(!Ec(n.charCodeAt(e)))return e=N,!1}for(;Ec(n.charCodeAt(e));)e++;if(n.charCodeAt(e)===y1){if(e++,S())return E(N),!0;if(!Ec(n.charCodeAt(e)))return e=N,!1;for(;Ec(n.charCodeAt(e));)e++}if(n.charCodeAt(e)===UZ||n.charCodeAt(e)===qZ){if(e++,(n.charCodeAt(e)===Q8||n.charCodeAt(e)===X8)&&e++,S())return E(N),!0;if(!Ec(n.charCodeAt(e)))return e=N,!1;for(;Ec(n.charCodeAt(e));)e++}if(!S())return e=N,!1;if(e>N){const F=n.slice(N,e),V=/^0\d/.test(F);return t+=V?'"'.concat(F,'"'):F,!0}return!1}function w(){return _("true","true")||_("false","false")||_("null","null")||_("True","true")||_("False","false")||_("None","null")}function _(N,F){return n.slice(e,e+N.length)===N?(t+=F,e+=N.length,!0):!1}function y(){const N=e;for(;e<n.length&&!u$(n[e])&&!Hv(n.charCodeAt(e));)e++;if(e>N){if(n.charCodeAt(e)===NZ&&m$(n.slice(N,e).trim()))return e++,o(),n.charCodeAt(e)===BZ&&(e++,n.charCodeAt(e)===HZ&&e++),!0;{for(;Rd(n.charCodeAt(e-1))&&e>0;)e--;const F=n.slice(N,e);return t+=F==="undefined"?"null":JSON.stringify(F),n.charCodeAt(e)===xb&&e++,!0}}}function k(N){let F=N;for(;F>0&&Rd(n.charCodeAt(F));)F--;return F}function S(){return e>=n.length||yd(n[e])||Rd(n.charCodeAt(e))}function E(N){t+="".concat(n.slice(N,e),"0")}function M(N){throw new ad("Invalid character ".concat(JSON.stringify(N)),e)}function R(){throw new ad("Unexpected character ".concat(JSON.stringify(n[e])),e)}function O(){throw new ad("Unexpected end of json string",n.length)}function I(){throw new ad("Object key expected",e)}function P(){throw new ad("Colon expected",e)}function A(){const N=n.slice(e,e+6);throw new ad('Invalid unicode character "'.concat(N,'"'),e)}}function b$(n,e){return n[e]==="*"&&n[e+1]==="/"}function _i(n){return parseInt(n,10)}function _x(n){return y$.test(n)}const y$=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function Cn(n){return typeof n=="object"&&n!==null&&(n.constructor===void 0||n.constructor.name==="Object")}function er(n){return typeof n=="object"&&n!==null&&(n.constructor===void 0||n.constructor.name==="Object"||n.constructor.name==="Array")}function _$(n){return n===!0||n===!1}function Y3(n){if(typeof n=="number")return n>9466848e5&&isFinite(n)&&Math.floor(n)===n&&!isNaN(new Date(n).valueOf());if(typeof n=="bigint")return Y3(Number(n));try{const t=n&&n.valueOf();if(t!==n)return Y3(t)}catch{return!1}return!1}function eL(n){Ip=Ip||window.document.createElement("div"),Ip.style.color="",Ip.style.color=n;const e=Ip.style.color;return e!==""?e.replace(/\s+/g,"").toLowerCase():null}let Ip=null;function w$(n){return typeof n=="string"&&n.length<99&&!!eL(n)}function wx(n,e){if(typeof n=="number"||typeof n=="string"||typeof n=="boolean"||typeof n>"u")return typeof n;if(typeof n=="bigint")return"number";if(n===null)return"null";if(Array.isArray(n))return"array";if(Cn(n))return"object";const t=e.stringify(n);return t&&_x(t)?"number":t==="true"||t==="false"?"boolean":t==="null"?"null":"unknown"}const k$=/^https?:\/\/\S+$/;function V2(n){return typeof n=="string"&&k$.test(n)}function ip(n,e){if(n==="")return"";const t=n.trim();return t==="null"?null:t==="true"?!0:t==="false"?!1:_x(t)?e.parse(t):n}function C$(n,e){return typeof n=="string"&&typeof ip(n,e)!="string"}function S$(n){return x$.test(n)}const x$=/^-?[0-9]+$/;var E$=typeof global=="object"&&global&&global.Object===Object&&global;const tL=E$;var A$=typeof self=="object"&&self&&self.Object===Object&&self,M$=tL||A$||Function("return this")();const Qs=M$;var T$=Qs.Symbol;const as=T$;var nL=Object.prototype,O$=nL.hasOwnProperty,D$=nL.toString,Np=as?as.toStringTag:void 0;function R$(n){var e=O$.call(n,Np),t=n[Np];try{n[Np]=void 0;var r=!0}catch{}var i=D$.call(n);return r&&(e?n[Np]=t:delete n[Np]),i}var P$=Object.prototype,I$=P$.toString;function N$(n){return I$.call(n)}var B$="[object Null]",L$="[object Undefined]",tM=as?as.toStringTag:void 0;function op(n){return n==null?n===void 0?L$:B$:tM&&tM in Object(n)?R$(n):N$(n)}function qu(n){return n!=null&&typeof n=="object"}var F$="[object Symbol]";function df(n){return typeof n=="symbol"||qu(n)&&op(n)==F$}function w0(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var z$=Array.isArray;const Ri=z$;var j$=1/0,nM=as?as.prototype:void 0,rM=nM?nM.toString:void 0;function rL(n){if(typeof n=="string")return n;if(Ri(n))return w0(n,rL)+"";if(df(n))return rM?rM.call(n):"";var e=n+"";return e=="0"&&1/n==-j$?"-0":e}var H$=/\s/;function V$(n){for(var e=n.length;e--&&H$.test(n.charAt(e)););return e}var W$=/^\s+/;function q$(n){return n&&n.slice(0,V$(n)+1).replace(W$,"")}function Hs(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var iM=0/0,U$=/^[-+]0x[0-9a-f]+$/i,G$=/^0b[01]+$/i,K$=/^0o[0-7]+$/i,J$=parseInt;function X3(n){if(typeof n=="number")return n;if(df(n))return iM;if(Hs(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Hs(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=q$(n);var t=G$.test(n);return t||K$.test(n)?J$(n.slice(2),t?2:8):U$.test(n)?iM:+n}var oM=1/0,Y$=17976931348623157e292;function Vv(n){if(!n)return n===0?n:0;if(n=X3(n),n===oM||n===-oM){var e=n<0?-1:1;return e*Y$}return n===n?n:0}function X$(n){var e=Vv(n),t=e%1;return e===e?t?e-t:e:0}function bg(n){return n}var Q$="[object AsyncFunction]",Z$="[object Function]",$$="[object GeneratorFunction]",eee="[object Proxy]";function iL(n){if(!Hs(n))return!1;var e=op(n);return e==Z$||e==$$||e==Q$||e==eee}var tee=Qs["__core-js_shared__"];const Pw=tee;var sM=function(){var n=/[^.]+$/.exec(Pw&&Pw.keys&&Pw.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function nee(n){return!!sM&&sM in n}var ree=Function.prototype,iee=ree.toString;function Ff(n){if(n!=null){try{return iee.call(n)}catch{}try{return n+""}catch{}}return""}var oee=/[\\^$.*+?()[\]{}|]/g,see=/^\[object .+?Constructor\]$/,aee=Function.prototype,lee=Object.prototype,uee=aee.toString,cee=lee.hasOwnProperty,fee=RegExp("^"+uee.call(cee).replace(oee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dee(n){if(!Hs(n)||nee(n))return!1;var e=iL(n)?fee:see;return e.test(Ff(n))}function hee(n,e){return n==null?void 0:n[e]}function zf(n,e){var t=hee(n,e);return dee(t)?t:void 0}var pee=zf(Qs,"WeakMap");const Q3=pee;var aM=Object.create,mee=function(){function n(){}return function(e){if(!Hs(e))return{};if(aM)return aM(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const gee=mee;function vee(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function ir(){}function bee(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var yee=800,_ee=16,wee=Date.now;function kee(n){var e=0,t=0;return function(){var r=wee(),i=_ee-(r-t);if(t=r,i>0){if(++e>=yee)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function Cee(n){return function(){return n}}var See=function(){try{var n=zf(Object,"defineProperty");return n({},"",{}),n}catch{}}();const Eb=See;var xee=Eb?function(n,e){return Eb(n,"toString",{configurable:!0,enumerable:!1,value:Cee(e),writable:!0})}:bg;const Eee=xee;var Aee=kee(Eee);const Mee=Aee;function Tee(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var Oee=9007199254740991,Dee=/^(?:0|[1-9]\d*)$/;function kx(n,e){var t=typeof n;return e=e??Oee,!!e&&(t=="number"||t!="symbol"&&Dee.test(n))&&n>-1&&n%1==0&&n<e}function W2(n,e,t){e=="__proto__"&&Eb?Eb(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function q2(n,e){return n===e||n!==n&&e!==e}var Ree=Object.prototype,Pee=Ree.hasOwnProperty;function oL(n,e,t){var r=n[e];(!(Pee.call(n,e)&&q2(r,t))||t===void 0&&!(e in n))&&W2(n,e,t)}function U2(n,e,t,r){var i=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?W2(t,a,l):oL(t,a,l)}return t}var lM=Math.max;function Iee(n,e,t){return e=lM(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,o=lM(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(s),vee(n,this,a)}}function Nee(n,e){return Mee(Iee(n,e,bg),n+"")}var Bee=9007199254740991;function Cx(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Bee}function sp(n){return n!=null&&Cx(n.length)&&!iL(n)}function Z3(n,e,t){if(!Hs(t))return!1;var r=typeof e;return(r=="number"?sp(t)&&kx(e,t.length):r=="string"&&e in t)?q2(t[e],n):!1}var Lee=Object.prototype;function G2(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Lee;return n===t}function sL(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Fee="[object Arguments]";function uM(n){return qu(n)&&op(n)==Fee}var aL=Object.prototype,zee=aL.hasOwnProperty,jee=aL.propertyIsEnumerable,Hee=uM(function(){return arguments}())?uM:function(n){return qu(n)&&zee.call(n,"callee")&&!jee.call(n,"callee")};const K2=Hee;function Vee(){return!1}var lL=typeof xo=="object"&&xo&&!xo.nodeType&&xo,cM=lL&&typeof yi=="object"&&yi&&!yi.nodeType&&yi,Wee=cM&&cM.exports===lL,fM=Wee?Qs.Buffer:void 0,qee=fM?fM.isBuffer:void 0,Uee=qee||Vee;const rm=Uee;var Gee="[object Arguments]",Kee="[object Array]",Jee="[object Boolean]",Yee="[object Date]",Xee="[object Error]",Qee="[object Function]",Zee="[object Map]",$ee="[object Number]",ete="[object Object]",tte="[object RegExp]",nte="[object Set]",rte="[object String]",ite="[object WeakMap]",ote="[object ArrayBuffer]",ste="[object DataView]",ate="[object Float32Array]",lte="[object Float64Array]",ute="[object Int8Array]",cte="[object Int16Array]",fte="[object Int32Array]",dte="[object Uint8Array]",hte="[object Uint8ClampedArray]",pte="[object Uint16Array]",mte="[object Uint32Array]",Xn={};Xn[ate]=Xn[lte]=Xn[ute]=Xn[cte]=Xn[fte]=Xn[dte]=Xn[hte]=Xn[pte]=Xn[mte]=!0;Xn[Gee]=Xn[Kee]=Xn[ote]=Xn[Jee]=Xn[ste]=Xn[Yee]=Xn[Xee]=Xn[Qee]=Xn[Zee]=Xn[$ee]=Xn[ete]=Xn[tte]=Xn[nte]=Xn[rte]=Xn[ite]=!1;function gte(n){return qu(n)&&Cx(n.length)&&!!Xn[op(n)]}function J2(n){return function(e){return n(e)}}var uL=typeof xo=="object"&&xo&&!xo.nodeType&&xo,k0=uL&&typeof yi=="object"&&yi&&!yi.nodeType&&yi,vte=k0&&k0.exports===uL,Iw=vte&&tL.process,bte=function(){try{var n=k0&&k0.require&&k0.require("util").types;return n||Iw&&Iw.binding&&Iw.binding("util")}catch{}}();const bh=bte;var dM=bh&&bh.isTypedArray,yte=dM?J2(dM):gte;const Sx=yte;var _te=Object.prototype,wte=_te.hasOwnProperty;function cL(n,e){var t=Ri(n),r=!t&&K2(n),i=!t&&!r&&rm(n),o=!t&&!r&&!i&&Sx(n),s=t||r||i||o,a=s?sL(n.length,String):[],l=a.length;for(var u in n)(e||wte.call(n,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||kx(u,l)))&&a.push(u);return a}function fL(n,e){return function(t){return n(e(t))}}var kte=fL(Object.keys,Object);const Cte=kte;var Ste=Object.prototype,xte=Ste.hasOwnProperty;function dL(n){if(!G2(n))return Cte(n);var e=[];for(var t in Object(n))xte.call(n,t)&&t!="constructor"&&e.push(t);return e}function ap(n){return sp(n)?cL(n):dL(n)}function Ete(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var Ate=Object.prototype,Mte=Ate.hasOwnProperty;function Tte(n){if(!Hs(n))return Ete(n);var e=G2(n),t=[];for(var r in n)r=="constructor"&&(e||!Mte.call(n,r))||t.push(r);return t}function xx(n){return sp(n)?cL(n,!0):Tte(n)}var Ote=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dte=/^\w*$/;function Ex(n,e){if(Ri(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||df(n)?!0:Dte.test(n)||!Ote.test(n)||e!=null&&n in Object(e)}var Rte=zf(Object,"create");const im=Rte;function Pte(){this.__data__=im?im(null):{},this.size=0}function Ite(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Nte="__lodash_hash_undefined__",Bte=Object.prototype,Lte=Bte.hasOwnProperty;function Fte(n){var e=this.__data__;if(im){var t=e[n];return t===Nte?void 0:t}return Lte.call(e,n)?e[n]:void 0}var zte=Object.prototype,jte=zte.hasOwnProperty;function Hte(n){var e=this.__data__;return im?e[n]!==void 0:jte.call(e,n)}var Vte="__lodash_hash_undefined__";function Wte(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=im&&e===void 0?Vte:e,this}function hf(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}hf.prototype.clear=Pte;hf.prototype.delete=Ite;hf.prototype.get=Fte;hf.prototype.has=Hte;hf.prototype.set=Wte;function qte(){this.__data__=[],this.size=0}function Y2(n,e){for(var t=n.length;t--;)if(q2(n[t][0],e))return t;return-1}var Ute=Array.prototype,Gte=Ute.splice;function Kte(n){var e=this.__data__,t=Y2(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Gte.call(e,t,1),--this.size,!0}function Jte(n){var e=this.__data__,t=Y2(e,n);return t<0?void 0:e[t][1]}function Yte(n){return Y2(this.__data__,n)>-1}function Xte(n,e){var t=this.__data__,r=Y2(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Gl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Gl.prototype.clear=qte;Gl.prototype.delete=Kte;Gl.prototype.get=Jte;Gl.prototype.has=Yte;Gl.prototype.set=Xte;var Qte=zf(Qs,"Map");const om=Qte;function Zte(){this.size=0,this.__data__={hash:new hf,map:new(om||Gl),string:new hf}}function $te(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function X2(n,e){var t=n.__data__;return $te(e)?t[typeof e=="string"?"string":"hash"]:t.map}function ene(n){var e=X2(this,n).delete(n);return this.size-=e?1:0,e}function tne(n){return X2(this,n).get(n)}function nne(n){return X2(this,n).has(n)}function rne(n,e){var t=X2(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Kl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Kl.prototype.clear=Zte;Kl.prototype.delete=ene;Kl.prototype.get=tne;Kl.prototype.has=nne;Kl.prototype.set=rne;var ine="Expected a function";function Q2(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(ine);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var s=n.apply(this,r);return t.cache=o.set(i,s)||o,s};return t.cache=new(Q2.Cache||Kl),t}Q2.Cache=Kl;var one=500;function sne(n){var e=Q2(n,function(r){return t.size===one&&t.clear(),r}),t=e.cache;return e}var ane=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lne=/\\(\\)?/g,une=sne(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(ane,function(t,r,i,o){e.push(i?o.replace(lne,"$1"):r||t)}),e});const cne=une;function hL(n){return n==null?"":rL(n)}function pL(n,e){return Ri(n)?n:Ex(n,e)?[n]:cne(hL(n))}var fne=1/0;function Z2(n){if(typeof n=="string"||df(n))return n;var e=n+"";return e=="0"&&1/n==-fne?"-0":e}function Ax(n,e){e=pL(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Z2(e[t++])];return t&&t==r?n:void 0}function dne(n,e,t){var r=n==null?void 0:Ax(n,e);return r===void 0?t:r}function Mx(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var hM=as?as.isConcatSpreadable:void 0;function hne(n){return Ri(n)||K2(n)||!!(hM&&n&&n[hM])}function mL(n,e,t,r,i){var o=-1,s=n.length;for(t||(t=hne),i||(i=[]);++o<s;){var a=n[o];e>0&&t(a)?e>1?mL(a,e-1,t,r,i):Mx(i,a):r||(i[i.length]=a)}return i}var pne=fL(Object.getPrototypeOf,Object);const gL=pne;function mne(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=n[r+e];return o}function gne(){this.__data__=new Gl,this.size=0}function vne(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function bne(n){return this.__data__.get(n)}function yne(n){return this.__data__.has(n)}var _ne=200;function wne(n,e){var t=this.__data__;if(t instanceof Gl){var r=t.__data__;if(!om||r.length<_ne-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Kl(r)}return t.set(n,e),this.size=t.size,this}function Ma(n){var e=this.__data__=new Gl(n);this.size=e.size}Ma.prototype.clear=gne;Ma.prototype.delete=vne;Ma.prototype.get=bne;Ma.prototype.has=yne;Ma.prototype.set=wne;function kne(n,e){return n&&U2(e,ap(e),n)}function Cne(n,e){return n&&U2(e,xx(e),n)}var vL=typeof xo=="object"&&xo&&!xo.nodeType&&xo,pM=vL&&typeof yi=="object"&&yi&&!yi.nodeType&&yi,Sne=pM&&pM.exports===vL,mM=Sne?Qs.Buffer:void 0,gM=mM?mM.allocUnsafe:void 0;function xne(n,e){if(e)return n.slice();var t=n.length,r=gM?gM(t):new n.constructor(t);return n.copy(r),r}function Ene(n,e){for(var t=-1,r=n==null?0:n.length,i=0,o=[];++t<r;){var s=n[t];e(s,t,n)&&(o[i++]=s)}return o}function bL(){return[]}var Ane=Object.prototype,Mne=Ane.propertyIsEnumerable,vM=Object.getOwnPropertySymbols,Tne=vM?function(n){return n==null?[]:(n=Object(n),Ene(vM(n),function(e){return Mne.call(n,e)}))}:bL;const Tx=Tne;function One(n,e){return U2(n,Tx(n),e)}var Dne=Object.getOwnPropertySymbols,Rne=Dne?function(n){for(var e=[];n;)Mx(e,Tx(n)),n=gL(n);return e}:bL;const yL=Rne;function Pne(n,e){return U2(n,yL(n),e)}function _L(n,e,t){var r=e(n);return Ri(n)?r:Mx(r,t(n))}function $3(n){return _L(n,ap,Tx)}function Ine(n){return _L(n,xx,yL)}var Nne=zf(Qs,"DataView");const eC=Nne;var Bne=zf(Qs,"Promise");const tC=Bne;var Lne=zf(Qs,"Set");const nC=Lne;var bM="[object Map]",Fne="[object Object]",yM="[object Promise]",_M="[object Set]",wM="[object WeakMap]",kM="[object DataView]",zne=Ff(eC),jne=Ff(om),Hne=Ff(tC),Vne=Ff(nC),Wne=Ff(Q3),Oc=op;(eC&&Oc(new eC(new ArrayBuffer(1)))!=kM||om&&Oc(new om)!=bM||tC&&Oc(tC.resolve())!=yM||nC&&Oc(new nC)!=_M||Q3&&Oc(new Q3)!=wM)&&(Oc=function(n){var e=op(n),t=e==Fne?n.constructor:void 0,r=t?Ff(t):"";if(r)switch(r){case zne:return kM;case jne:return bM;case Hne:return yM;case Vne:return _M;case Wne:return wM}return e});const yh=Oc;var qne=Object.prototype,Une=qne.hasOwnProperty;function Gne(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&Une.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Kne=Qs.Uint8Array;const Ab=Kne;function Ox(n){var e=new n.constructor(n.byteLength);return new Ab(e).set(new Ab(n)),e}function Jne(n,e){var t=e?Ox(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var Yne=/\w*$/;function Xne(n){var e=new n.constructor(n.source,Yne.exec(n));return e.lastIndex=n.lastIndex,e}var CM=as?as.prototype:void 0,SM=CM?CM.valueOf:void 0;function Qne(n){return SM?Object(SM.call(n)):{}}function Zne(n,e){var t=e?Ox(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var $ne="[object Boolean]",ere="[object Date]",tre="[object Map]",nre="[object Number]",rre="[object RegExp]",ire="[object Set]",ore="[object String]",sre="[object Symbol]",are="[object ArrayBuffer]",lre="[object DataView]",ure="[object Float32Array]",cre="[object Float64Array]",fre="[object Int8Array]",dre="[object Int16Array]",hre="[object Int32Array]",pre="[object Uint8Array]",mre="[object Uint8ClampedArray]",gre="[object Uint16Array]",vre="[object Uint32Array]";function bre(n,e,t){var r=n.constructor;switch(e){case are:return Ox(n);case $ne:case ere:return new r(+n);case lre:return Jne(n,t);case ure:case cre:case fre:case dre:case hre:case pre:case mre:case gre:case vre:return Zne(n,t);case tre:return new r;case nre:case ore:return new r(n);case rre:return Xne(n);case ire:return new r;case sre:return Qne(n)}}function yre(n){return typeof n.constructor=="function"&&!G2(n)?gee(gL(n)):{}}var _re="[object Map]";function wre(n){return qu(n)&&yh(n)==_re}var xM=bh&&bh.isMap,kre=xM?J2(xM):wre;const Cre=kre;var Sre="[object Set]";function xre(n){return qu(n)&&yh(n)==Sre}var EM=bh&&bh.isSet,Ere=EM?J2(EM):xre;const Are=Ere;var Mre=1,Tre=2,Ore=4,wL="[object Arguments]",Dre="[object Array]",Rre="[object Boolean]",Pre="[object Date]",Ire="[object Error]",kL="[object Function]",Nre="[object GeneratorFunction]",Bre="[object Map]",Lre="[object Number]",CL="[object Object]",Fre="[object RegExp]",zre="[object Set]",jre="[object String]",Hre="[object Symbol]",Vre="[object WeakMap]",Wre="[object ArrayBuffer]",qre="[object DataView]",Ure="[object Float32Array]",Gre="[object Float64Array]",Kre="[object Int8Array]",Jre="[object Int16Array]",Yre="[object Int32Array]",Xre="[object Uint8Array]",Qre="[object Uint8ClampedArray]",Zre="[object Uint16Array]",$re="[object Uint32Array]",Vn={};Vn[wL]=Vn[Dre]=Vn[Wre]=Vn[qre]=Vn[Rre]=Vn[Pre]=Vn[Ure]=Vn[Gre]=Vn[Kre]=Vn[Jre]=Vn[Yre]=Vn[Bre]=Vn[Lre]=Vn[CL]=Vn[Fre]=Vn[zre]=Vn[jre]=Vn[Hre]=Vn[Xre]=Vn[Qre]=Vn[Zre]=Vn[$re]=!0;Vn[Ire]=Vn[kL]=Vn[Vre]=!1;function Wv(n,e,t,r,i,o){var s,a=e&Mre,l=e&Tre,u=e&Ore;if(t&&(s=i?t(n,r,i,o):t(n)),s!==void 0)return s;if(!Hs(n))return n;var c=Ri(n);if(c){if(s=Gne(n),!a)return bee(n,s)}else{var f=yh(n),d=f==kL||f==Nre;if(rm(n))return xne(n,a);if(f==CL||f==wL||d&&!i){if(s=l||d?{}:yre(n),!a)return l?Pne(n,Cne(s,n)):One(n,kne(s,n))}else{if(!Vn[f])return i?n:{};s=bre(n,f,a)}}o||(o=new Ma);var h=o.get(n);if(h)return h;o.set(n,s),Are(n)?n.forEach(function(g){s.add(Wv(g,e,t,g,n,o))}):Cre(n)&&n.forEach(function(g,v){s.set(v,Wv(g,e,t,v,n,o))});var p=u?l?Ine:$3:l?xx:ap,m=c?void 0:p(n);return Tee(m||n,function(g,v){m&&(v=g,g=n[v]),oL(s,v,Wv(g,e,t,v,n,o))}),s}var eie=1,tie=4;function nie(n,e){return e=typeof e=="function"?e:void 0,Wv(n,eie|tie,e)}var rie="__lodash_hash_undefined__";function iie(n){return this.__data__.set(n,rie),this}function oie(n){return this.__data__.has(n)}function Mb(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Kl;++e<t;)this.add(n[e])}Mb.prototype.add=Mb.prototype.push=iie;Mb.prototype.has=oie;function sie(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function aie(n,e){return n.has(e)}var lie=1,uie=2;function SL(n,e,t,r,i,o){var s=t&lie,a=n.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(n),c=o.get(e);if(u&&c)return u==e&&c==n;var f=-1,d=!0,h=t&uie?new Mb:void 0;for(o.set(n,e),o.set(e,n);++f<a;){var p=n[f],m=e[f];if(r)var g=s?r(m,p,f,e,n,o):r(p,m,f,n,e,o);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!sie(e,function(v,b){if(!aie(h,b)&&(p===v||i(p,v,t,r,o)))return h.push(b)})){d=!1;break}}else if(!(p===m||i(p,m,t,r,o))){d=!1;break}}return o.delete(n),o.delete(e),d}function cie(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function fie(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var die=1,hie=2,pie="[object Boolean]",mie="[object Date]",gie="[object Error]",vie="[object Map]",bie="[object Number]",yie="[object RegExp]",_ie="[object Set]",wie="[object String]",kie="[object Symbol]",Cie="[object ArrayBuffer]",Sie="[object DataView]",AM=as?as.prototype:void 0,Nw=AM?AM.valueOf:void 0;function xie(n,e,t,r,i,o,s){switch(t){case Sie:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Cie:return!(n.byteLength!=e.byteLength||!o(new Ab(n),new Ab(e)));case pie:case mie:case bie:return q2(+n,+e);case gie:return n.name==e.name&&n.message==e.message;case yie:case wie:return n==e+"";case vie:var a=cie;case _ie:var l=r&die;if(a||(a=fie),n.size!=e.size&&!l)return!1;var u=s.get(n);if(u)return u==e;r|=hie,s.set(n,e);var c=SL(a(n),a(e),r,i,o,s);return s.delete(n),c;case kie:if(Nw)return Nw.call(n)==Nw.call(e)}return!1}var Eie=1,Aie=Object.prototype,Mie=Aie.hasOwnProperty;function Tie(n,e,t,r,i,o){var s=t&Eie,a=$3(n),l=a.length,u=$3(e),c=u.length;if(l!=c&&!s)return!1;for(var f=l;f--;){var d=a[f];if(!(s?d in e:Mie.call(e,d)))return!1}var h=o.get(n),p=o.get(e);if(h&&p)return h==e&&p==n;var m=!0;o.set(n,e),o.set(e,n);for(var g=s;++f<l;){d=a[f];var v=n[d],b=e[d];if(r)var w=s?r(b,v,d,e,n,o):r(v,b,d,n,e,o);if(!(w===void 0?v===b||i(v,b,t,r,o):w)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var _=n.constructor,y=e.constructor;_!=y&&"constructor"in n&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof y=="function"&&y instanceof y)&&(m=!1)}return o.delete(n),o.delete(e),m}var Oie=1,MM="[object Arguments]",TM="[object Array]",_1="[object Object]",Die=Object.prototype,OM=Die.hasOwnProperty;function Rie(n,e,t,r,i,o){var s=Ri(n),a=Ri(e),l=s?TM:yh(n),u=a?TM:yh(e);l=l==MM?_1:l,u=u==MM?_1:u;var c=l==_1,f=u==_1,d=l==u;if(d&&rm(n)){if(!rm(e))return!1;s=!0,c=!1}if(d&&!c)return o||(o=new Ma),s||Sx(n)?SL(n,e,t,r,i,o):xie(n,e,l,t,r,i,o);if(!(t&Oie)){var h=c&&OM.call(n,"__wrapped__"),p=f&&OM.call(e,"__wrapped__");if(h||p){var m=h?n.value():n,g=p?e.value():e;return o||(o=new Ma),i(m,g,t,r,o)}}return d?(o||(o=new Ma),Tie(n,e,t,r,i,o)):!1}function $2(n,e,t,r,i){return n===e?!0:n==null||e==null||!qu(n)&&!qu(e)?n!==n&&e!==e:Rie(n,e,t,r,$2,i)}var Pie=1,Iie=2;function Nie(n,e,t,r){var i=t.length,o=i,s=!r;if(n==null)return!o;for(n=Object(n);i--;){var a=t[i];if(s&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<o;){a=t[i];var l=a[0],u=n[l],c=a[1];if(s&&a[2]){if(u===void 0&&!(l in n))return!1}else{var f=new Ma;if(r)var d=r(u,c,l,n,e,f);if(!(d===void 0?$2(c,u,Pie|Iie,r,f):d))return!1}}return!0}function xL(n){return n===n&&!Hs(n)}function Bie(n){for(var e=ap(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,xL(i)]}return e}function EL(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function Lie(n){var e=Bie(n);return e.length==1&&e[0][2]?EL(e[0][0],e[0][1]):function(t){return t===n||Nie(t,n,e)}}function Fie(n,e){return n!=null&&e in Object(n)}function zie(n,e,t){e=pL(e,n);for(var r=-1,i=e.length,o=!1;++r<i;){var s=Z2(e[r]);if(!(o=n!=null&&t(n,s)))break;n=n[s]}return o||++r!=i?o:(i=n==null?0:n.length,!!i&&Cx(i)&&kx(s,i)&&(Ri(n)||K2(n)))}function jie(n,e){return n!=null&&zie(n,e,Fie)}var Hie=1,Vie=2;function Wie(n,e){return Ex(n)&&xL(e)?EL(Z2(n),e):function(t){var r=dne(t,n);return r===void 0&&r===e?jie(t,n):$2(e,r,Hie|Vie)}}function qie(n){return function(e){return e==null?void 0:e[n]}}function Uie(n){return function(e){return Ax(e,n)}}function Gie(n){return Ex(n)?qie(Z2(n)):Uie(n)}function yg(n){return typeof n=="function"?n:n==null?bg:typeof n=="object"?Ri(n)?Wie(n[0],n[1]):Lie(n):Gie(n)}function Kie(n,e,t,r){for(var i=-1,o=n==null?0:n.length;++i<o;){var s=n[i];e(r,s,t(s),n)}return r}function AL(n){return function(e,t,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[n?a:++i];if(t(o[l],l,o)===!1)break}return e}}var Jie=AL();const Yie=Jie;function ML(n,e){return n&&Yie(n,e,ap)}function TL(n,e){return function(t,r){if(t==null)return t;if(!sp(t))return n(t,r);for(var i=t.length,o=e?i:-1,s=Object(t);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return t}}var Xie=TL(ML);const OL=Xie;function Qie(n,e,t,r){return OL(n,function(i,o,s){e(r,i,t(i),s)}),r}function DL(n,e){return function(t,r){var i=Ri(t)?Kie:Qie,o=e?e():{};return i(t,n,yg(r),o)}}var Zie=function(){return Qs.Date.now()};const Bw=Zie;var $ie="Expected a function",eoe=Math.max,toe=Math.min;function e_(n,e,t){var r,i,o,s,a,l,u=0,c=!1,f=!1,d=!0;if(typeof n!="function")throw new TypeError($ie);e=X3(e)||0,Hs(t)&&(c=!!t.leading,f="maxWait"in t,o=f?eoe(X3(t.maxWait)||0,e):o,d="trailing"in t?!!t.trailing:d);function h(k){var S=r,E=i;return r=i=void 0,u=k,s=n.apply(E,S),s}function p(k){return u=k,a=setTimeout(v,e),c?h(k):s}function m(k){var S=k-l,E=k-u,M=e-S;return f?toe(M,o-E):M}function g(k){var S=k-l,E=k-u;return l===void 0||S>=e||S<0||f&&E>=o}function v(){var k=Bw();if(g(k))return b(k);a=setTimeout(v,m(k))}function b(k){return a=void 0,d&&r?h(k):(r=i=void 0,s)}function w(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function _(){return a===void 0?s:b(Bw())}function y(){var k=Bw(),S=g(k);if(r=arguments,i=this,l=k,S){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(v,e),h(l)}return a===void 0&&(a=setTimeout(v,e)),s}return y.cancel=w,y.flush=_,y}function jt(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function RL(n){return typeof n=="function"?n:bg}function noe(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var roe=AL(!0);const ioe=roe;function ooe(n,e){return n&&ioe(n,e,ap)}var soe=TL(ooe,!0);const aoe=soe;function loe(n,e){var t=Ri(n)?noe:aoe;return t(n,RL(e))}function Sl(n){return n&&n.length?n[0]:void 0}function PL(n,e){var t=-1,r=sp(n)?Array(n.length):[];return OL(n,function(i,o,s){r[++t]=e(i,o,s)}),r}function uoe(n,e){var t=Ri(n)?w0:PL;return t(n,yg(e))}var coe=Object.prototype,foe=coe.hasOwnProperty,doe=DL(function(n,e,t){foe.call(n,t)?n[t].push(e):W2(n,t,[e])});const t_=doe;function Ut(n){var e=n==null?0:n.length;return e?mne(n,0,-1):[]}var hoe="[object Map]",poe="[object Set]",moe=Object.prototype,goe=moe.hasOwnProperty;function $t(n){if(n==null)return!0;if(sp(n)&&(Ri(n)||typeof n=="string"||typeof n.splice=="function"||rm(n)||Sx(n)||K2(n)))return!n.length;var e=yh(n);if(e==hoe||e==poe)return!n.size;if(G2(n))return!dL(n).length;for(var t in n)if(goe.call(n,t))return!1;return!0}function Wt(n,e){return $2(n,e)}function voe(n,e){return n<e}function boe(n,e){var t={};return e=yg(e),ML(n,function(r,i,o){W2(t,i,e(r,i,o))}),t}function yoe(n,e,t){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=e(o);if(s!=null&&(a===void 0?s===s&&!df(s):t(s,a)))var a=s,l=o}return l}function w1(n,e){return n&&n.length?yoe(n,yg(e),voe):void 0}function _oe(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function woe(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,o=df(n),s=e!==void 0,a=e===null,l=e===e,u=df(e);if(!a&&!u&&!o&&n>e||o&&s&&l&&!a&&!u||r&&s&&l||!t&&l||!i)return 1;if(!r&&!o&&!u&&n<e||u&&t&&i&&!r&&!o||a&&t&&i||!s&&i||!l)return-1}return 0}function koe(n,e,t){for(var r=-1,i=n.criteria,o=e.criteria,s=i.length,a=t.length;++r<s;){var l=woe(i[r],o[r]);if(l){if(r>=a)return l;var u=t[r];return l*(u=="desc"?-1:1)}}return n.index-e.index}function Coe(n,e,t){e.length?e=w0(e,function(o){return Ri(o)?function(s){return Ax(s,o.length===1?o[0]:o)}:o}):e=[bg];var r=-1;e=w0(e,J2(yg));var i=PL(n,function(o,s,a){var l=w0(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return _oe(i,function(o,s){return koe(o,s,t)})}var Soe=DL(function(n,e,t){n[t?0:1].push(e)},function(){return[[],[]]});const xoe=Soe;var Eoe=Math.ceil,Aoe=Math.max;function Moe(n,e,t,r){for(var i=-1,o=Aoe(Eoe((e-n)/(t||1)),0),s=Array(o);o--;)s[r?o:++i]=n,n+=t;return s}function Toe(n){return function(e,t,r){return r&&typeof r!="number"&&Z3(e,t,r)&&(t=r=void 0),e=Vv(e),t===void 0?(t=e,e=0):t=Vv(t),r=r===void 0?e<t?1:-1:Vv(r),Moe(e,t,r,n)}}var Ooe=Toe();const Doe=Ooe;var Roe=Nee(function(n,e){if(n==null)return[];var t=e.length;return t>1&&Z3(n,e[0],e[1])?e=[]:t>2&&Z3(e[0],e[1],e[2])&&(e=[e[0]]),Coe(n,mL(e,1),[])});const Poe=Roe;var Ioe="Expected a function";function Noe(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(Ioe);return Hs(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),e_(n,e,{leading:r,maxWait:e,trailing:i})}var Boe=9007199254740991,Lw=4294967295,Loe=Math.min;function DM(n,e){if(n=X$(n),n<1||n>Boe)return[];var t=Lw,r=Loe(n,Lw);e=RL(e),n-=Lw;for(var i=sL(r,e);++t<n;)e(t);return i}var Foe=0;function _h(n){var e=++Foe;return hL(n)+e}const zoe=1e4,joe=[];function rC(n,e=!1){const t={};if(!Array.isArray(n))throw new TypeError("Array expected");function r(s,a){(!Array.isArray(s)&&!Cn(s)||e&&a.length>0)&&(t[Ke(a)]=!0),Cn(s)&&Object.keys(s).forEach(u=>{r(s[u],a.concat(u))})}const i=Math.min(n.length,zoe);for(let s=0;s<i;s++){const a=n[s];r(a,joe)}return Object.keys(t).sort().map(js)}function IL(n,e,t){if(!(e<=n))for(let r=n;r<e;r++)t(r)}function Tb(n,e){return n.length>e?n.slice(0,e):n}function RM(n){return{...n}}function PM(n){return Object.values(n)}function IM(n,e,t,r){const i=n.slice(0),o=i.splice(e,t);return i.splice.apply(i,[e+r,0,...o]),i}function Hoe(n,e,t){if(n.length<e)n.forEach(t);else{const r=e>1?(n.length-1)/(e-1):n.length;for(let i=0;i<e;i++){const o=Math.floor(i*r);t(n[o],o,n)}}}function _g(n,e){try{return e.parse(n)}catch{return e.parse(Aa(n))}}function NL(n,e){try{return _g(n,e)}catch{return}}function n_(n,e){n=n.replace(LL,"");try{return e(n)}catch{}try{return e("["+n+"]")}catch{}try{return e("{"+n+"}")}catch{}throw new Error("Failed to parse partial JSON")}function BL(n){n=n.replace(LL,"");try{return Aa(n)}catch{}try{const e=Aa("["+n+"]");return e.substring(1,e.length-1)}catch{}try{const e=Aa("{"+n+"}");return e.substring(1,e.length-1)}catch{}throw new Error("Failed to repair partial JSON")}const LL=/,\s*$/;function wh(n,e){const t=BM.exec(e);if(t){const r=_i(t[2]),i=Woe(n,`
`,0,r),o=n.lastIndexOf(`
`,r),s=r-o-1;return{position:r,line:i,column:s,message:e.replace(BM,()=>`line ${i+1} column ${s+1}`)}}else{const r=Joe.exec(e),i=r?_i(r[1]):null,o=i!==null?i-1:null,s=Yoe.exec(e),a=s?_i(s[1]):null,l=a!==null?a-1:null;return{position:o!==null&&l!==null?Voe(n,o,l):null,line:o,column:l,message:e.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function Voe(n,e,t){let r=n.indexOf(`
`),i=1;for(;i<e&&r!==-1;)r=n.indexOf(`
`,r+1),i++;return r!==-1?r+t+1:null}function Woe(n,e,t=0,r=n.length){let i=0;for(let o=t;o<r;o++)n.charAt(o)===e&&i++;return i}function qoe(n,e){try{const t=H2.parse(n),r=Ke(e),i=t.pointers[r];if(i)return{path:e,line:i.key?i.key.line:i.value?i.value.line:0,column:i.key?i.key.column:i.value?i.value.column:0,from:i.key?i.key.pos:i.value?i.value.pos:0,to:i.keyEnd?i.keyEnd.pos:i.valueEnd?i.valueEnd.pos:0}}catch(t){console.error(t)}return{path:e,line:0,column:0,from:0,to:0}}function Uoe(n,e,t){if(e==="array"){if(Array.isArray(n))return n;if(Cn(n))return PM(n);if(typeof n=="string")try{const r=t.parse(n);if(Array.isArray(r))return r;if(Cn(r))return PM(r)}catch{return[n]}return[n]}if(e==="object"){if(Array.isArray(n))return RM(n);if(Cn(n))return n;if(typeof n=="string")try{const r=t.parse(n);if(Cn(r))return r;if(Array.isArray(r))return RM(r)}catch{return{value:n}}return{value:n}}if(e==="value")return er(n)?t.stringify(n):n;throw new Error(`Cannot convert ${wx(n,t)} to ${e}`)}function Fw(n){return Cn(n)?n.json!==void 0?n.text!==void 0?'Content must contain either a property "json" or a property "text" but not both':null:n.text===void 0?'Content must contain either a property "json" or a property "text"':typeof n.text!="string"?'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?':null:"Content must be an object"}function kh(n){return Cn(n)&&typeof n.text=="string"}function sm(n){return Cn(n)&&typeof n.json<"u"}function Goe(n,e=void 0,t=JSON){return kh(n)?n:{text:t.stringify(n.json,null,e)}}function NM(n,e=JSON){return sm(n)?n:{json:e.parse(n.text)}}function iC(n,e,t){return Goe(n,e,t).text}function FL(n,e){return Koe(n,e)>e}function Koe(n,e=1/0){if(kh(n))return n.text.length;const t=n.json;let r=0;function i(o){if(Array.isArray(o)){if(r+=2+(o.length-1),r>e)return r;for(let s=0;s<o.length;s++){const a=o[s];if(i(a),r>e)return r}}else if(Cn(o)){const s=Object.keys(o);r+=2+s.length+(s.length-1);for(let a=0;a<s.length;a++){const l=s[a],u=o[l];r+=l.length+2,i(u)}}else typeof o=="string"?r+=o.length+2:r+=String(o).length}return i(t),r}const BM=/(position|char) (\d+)/,Joe=/line (\d+)/,Yoe=/column (\d+)/;function Xoe(n,e){return n.parse===e.parse&&n.stringify===e.stringify}function LM(n){const t=n.substring(0,999);return!t.includes(`
`)&&Qoe.test(t)}const Qoe=/[,:]\S/;function Dx({escapeControlCharacters:n,escapeUnicodeCharacters:e}){return n?e?Zoe:$oe:e?ese:tse}const Zoe={escapeValue:n=>zL(VL(String(n))),unescapeValue:n=>WL(jL(n))},$oe={escapeValue:n=>VL(String(n)),unescapeValue:n=>WL(n)},ese={escapeValue:n=>zL(String(n)),unescapeValue:n=>jL(n)},tse={escapeValue:n=>String(n),unescapeValue:n=>n};function zL(n){return n.replace(/[^\x20-\x7F]/g,e=>{var t;return e==="\b"||e==="\f"||e===`
`||e==="\r"||e==="	"?e:"\\u"+("000"+((t=e.codePointAt(0))==null?void 0:t.toString(16))).slice(-4)})}function jL(n){return n.replace(/\\u[a-fA-F0-9]{4}/g,e=>{try{const t=JSON.parse('"'+e+'"');return HL[t]||t}catch{return e}})}const HL={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},nse={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"};function VL(n){return n.replace(/["\b\f\n\r\t\\]/g,e=>HL[e]||e)}function WL(n){return n.replace(/\\["bfnrt\\]/g,e=>nse[e]||e)}function pf(n){return typeof n!="string"?String(n):n.endsWith(`
`)?n+`
`:n}function rse(n){return n.replace(/\n$/,"")}function Rx(n,e){return wg(n,t=>t.nodeName.toUpperCase()===e.toUpperCase())}function Uc(n,e,t){return wg(n,r=>ose(r,e,t))}function ise(n){return n.nodeName==="DIV"&&n.contentEditable==="true"}function ose(n,e,t){return typeof n.getAttribute=="function"&&n.getAttribute(e)===t}function wg(n,e){return!!Px(n,e)}function Px(n,e){let t=n;for(;t&&!e(t);)t=t.parentNode;return t||void 0}function qL(n){if(n.firstChild==null){n.focus();return}const e=document.createRange(),t=window.getSelection();e.setStart(n,1),e.collapse(!0),t==null||t.removeAllRanges(),t==null||t.addRange(e)}function Ob(n,e,t,r){const i=lp(n);if(!i)return;const o=i.document.activeElement?i.document.activeElement:null;o&&o.isContentEditable&&(o.textContent=t?e:o.textContent+e,qL(o),r&&r(o))}function lp(n){return n&&n.ownerDocument?n.ownerDocument.defaultView:null}function Ix(n){const e=lp(n),t=e==null?void 0:e.document.activeElement;return t?wg(t,r=>r===n):!1}function UL(n,e){return Px(n,t=>t.nodeName===e)}function zw(n){return Uc(n,"data-type","selectable-key")?_n.key:Uc(n,"data-type","selectable-value")?_n.value:Uc(n,"data-type","insert-selection-area-inside")?_n.inside:Uc(n,"data-type","insert-selection-area-after")?_n.after:_n.multi}function Ch(n){return encodeURIComponent(Ke(n))}function sse(n){return js(decodeURIComponent(n))}function GL(n){const e=Px(n,r=>r!=null&&r.hasAttribute?r.hasAttribute("data-path"):!1),t=e==null?void 0:e.getAttribute("data-path");return t?sse(t):null}function ase({allElements:n,currentElement:e,direction:t,hasPrio:r=()=>!0,margin:i=10}){const o=uoe(n.filter(a),l),s=l(e);function a(v){const b=v.getBoundingClientRect();return b.width>0&&b.height>0}function l(v){const b=v.getBoundingClientRect();return{x:b.left+b.width/2,y:b.top+b.height/2,rect:b,element:v}}const u=(v,b)=>Math.abs(v.y-b.y)<i,c=(v,b)=>v.rect.left+i<b.rect.left,f=(v,b)=>v.rect.right>b.rect.right+i,d=(v,b)=>v.y+i<b.y,h=(v,b)=>v.y>b.y+i;function p(v,b,w=1){const _=v.x-b.x,y=(v.y-b.y)*w;return Math.sqrt(_*_+y*y)}const m=v=>p(v,s),g=v=>p(v,s,10);if(t==="Left"||t==="Right"){const v=t==="Left"?o.filter(_=>c(_,s)):o.filter(_=>f(_,s)),b=v.filter(_=>u(_,s)),w=w1(b,m)||w1(v,g);return w==null?void 0:w.element}if(t==="Up"||t==="Down"){const v=t==="Up"?o.filter(_=>d(_,s)):o.filter(_=>h(_,s)),b=v.filter(_=>r(_.element)),w=w1(b,m)||w1(v,m);return w==null?void 0:w.element}}function KL(n){return!!n&&n.nodeName==="DIV"&&typeof n.refresh=="function"&&typeof n.cancel=="function"}function cc(n,e="+"){const t=[];n.ctrlKey&&t.push("Ctrl"),n.metaKey&&t.push("Ctrl"),n.altKey&&t.push("Alt"),n.shiftKey&&t.push("Shift");const r=n.key.length===1?n.key.toUpperCase():n.key;return r in lse||t.push(r),t.join(e)}const lse={Ctrl:!0,Command:!0,Control:!0,Alt:!0,Option:!0,Shift:!0},{window:jw}=q4;function FM(n){let e,t,r,i,o,s;const a=[n[0].props];var l=n[0].component;function u(c){let f={};for(let d=0;d<a.length;d+=1)f=Te(f,a[d]);return{props:f}}return l&&(i=Ht(l,u())),{c(){e=B("div"),t=B("input"),r=K(),i&&$(i.$$.fragment),C(t,"type","text"),t.readOnly=!0,C(t,"tabindex","-1"),C(t,"class","jse-hidden-input svelte-15awhio"),C(e,"class","jse-absolute-popup-content svelte-15awhio"),C(e,"style",o=zM(n[1],n[0].options))},m(c,f){H(c,e,f),T(e,t),n[7](t),T(e,r),i&&Q(i,e,null),s=!0},p(c,f){const d=f&1?Ot(a,[an(c[0].props)]):{};if(f&1&&l!==(l=c[0].component)){if(i){de();const h=i;D(h.$$.fragment,1,0,()=>{Z(h,1)}),he()}l?(i=Ht(l,u()),$(i.$$.fragment),x(i.$$.fragment,1),Q(i,e,null)):i=null}else l&&i.$set(d);(!s||f&3&&o!==(o=zM(c[1],c[0].options)))&&C(e,"style",o)},i(c){s||(i&&x(i.$$.fragment,c),s=!0)},o(c){i&&D(i.$$.fragment,c),s=!1},d(c){c&&j(e),n[7](null),i&&Z(i)}}}function use(n){let e,t,r,i,o=n[1]&&FM(n);return{c(){e=B("div"),o&&o.c(),C(e,"role","none"),C(e,"class","jse-absolute-popup svelte-15awhio")},m(s,a){H(s,e,a),o&&o.m(e,null),n[8](e),t=!0,r||(i=[le(jw,"mousedown",n[3],!0),le(jw,"keydown",n[4],!0),le(jw,"wheel",n[5],!0),le(e,"mousedown",cse),le(e,"keydown",n[4])],r=!0)},p(s,[a]){s[1]?o?(o.p(s,a),a&2&&x(o,1)):(o=FM(s),o.c(),x(o,1),o.m(e,null)):o&&(de(),D(o,1,1,()=>{o=null}),he())},i(s){t||(x(o),t=!0)},o(s){D(o),t=!1},d(s){s&&j(e),o&&o.d(),n[8](null),r=!1,It(i)}}}function cse(n){n.stopPropagation()}function zM(n,e){function t(){if(e.anchor){const{anchor:c,width:f=0,height:d=0,offsetTop:h=0,offsetLeft:p=0,position:m}=e,{left:g,top:v,bottom:b,right:w}=c.getBoundingClientRect(),_=m==="top"||v+d>window.innerHeight&&v>d,y=m==="left"||g+f>window.innerWidth&&g>f;return{left:y?w-p:g+p,top:_?v-h:b+h,positionAbove:_,positionLeft:y}}else if(typeof e.left=="number"&&typeof e.top=="number"){const{left:c,top:f,width:d=0,height:h=0}=e,p=f+h>window.innerHeight&&f>h,m=c+d>window.innerWidth&&c>d;return{left:c,top:f,positionAbove:p,positionLeft:m}}else throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}const r=n.getBoundingClientRect(),{left:i,top:o,positionAbove:s,positionLeft:a}=t(),l=s?`bottom: ${r.top-o}px;`:`top: ${o-r.top}px;`,u=a?`right: ${r.left-i}px;`:`left: ${i-r.left}px;`;return l+u}function fse(n,e,t){let{popup:r}=e,{closeAbsolutePopup:i}=e,o,s;Tn(f);function a(p){r.options&&r.options.closeOnOuterClick&&!wg(p.target,m=>m===o)&&i(r.id)}function l(p){a(p)}function u(p){cc(p)==="Escape"&&i(r.id)}function c(p){a(p)}function f(){s&&s.focus()}function d(p){rt[p?"unshift":"push"](()=>{s=p,t(2,s)})}function h(p){rt[p?"unshift":"push"](()=>{o=p,t(1,o)})}return n.$$set=p=>{"popup"in p&&t(0,r=p.popup),"closeAbsolutePopup"in p&&t(6,i=p.closeAbsolutePopup)},[r,o,s,l,u,c,i,d,h]}class dse extends ye{constructor(e){super(),be(this,e,fse,use,Be,{popup:0,closeAbsolutePopup:6})}}const hse=dse;function jM(n,e,t){const r=n.slice();return r[6]=e[t],r}function HM(n){let e,t;return e=new hse({props:{popup:n[6],closeAbsolutePopup:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.popup=r[6]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function pse(n){let e,t,r=n[0],i=[];for(let l=0;l<r.length;l+=1)i[l]=HM(jM(n,r,l));const o=l=>D(i[l],1,1,()=>{i[l]=null}),s=n[3].default,a=Je(s,n,n[2],null);return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=K(),a&&a.c()},m(l,u){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(l,u);H(l,e,u),a&&a.m(l,u),t=!0},p(l,[u]){if(u&3){r=l[0];let c;for(c=0;c<r.length;c+=1){const f=jM(l,r,c);i[c]?(i[c].p(f,u),x(i[c],1)):(i[c]=HM(f),i[c].c(),x(i[c],1),i[c].m(e.parentNode,e))}for(de(),c=r.length;c<i.length;c+=1)o(c);he()}a&&a.p&&(!t||u&4)&&Xe(a,s,l,l[2],t?Ye(s,l[2],u,null):Qe(l[2]),null)},i(l){if(!t){for(let u=0;u<r.length;u+=1)x(i[u]);x(a,l),t=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)D(i[u]);D(a,l),t=!1},d(l){rn(i,l),l&&j(e),a&&a.d(l)}}}function mse(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=oi("jsoneditor:AbsolutePopup");let s=[];function a(u,c,f){o("open...",c,f);const d={id:_0(),component:u,props:c||{},options:f||{}};return t(0,s=[...s,d]),d.id}function l(u){const c=s.findIndex(f=>f.id===u);if(c!==-1){const f=s[c];f.options.onClose&&f.options.onClose(),t(0,s=s.filter(d=>d.id!==u))}}return dg("absolute-popup",{openAbsolutePopup:a,closeAbsolutePopup:l}),n.$$set=u=>{"$$scope"in u&&t(2,i=u.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&o("popups",s)},[s,l,i,r]}class gse extends ye{constructor(e){super(),be(this,e,mse,pse,Rt,{})}}const JL=gse;function lo(n){return n.map((e,t)=>YL.test(e)?"["+e+"]":/[.[\]]/.test(e)||e===""?'["'+vse(e)+'"]':(t>0?".":"")+e).join("")}function vse(n){return n.replace(/"/g,'\\"')}function bse(n){const e=[];let t=0;for(;t<n.length;)n[t]==="."&&t++,n[t]==="["?(t++,n[t]==='"'?(t++,e.push(r(o=>o==='"',!0)),i('"')):e.push(r(o=>o==="]")),i("]")):e.push(r(o=>o==="."||o==="["));function r(o,s=!1){let a="";for(;t<n.length&&!o(n[t]);)s&&n[t]==="\\"&&n[t+1]==='"'?(a+='"',t+=2):(a+=n[t],t++);return a}function i(o){if(n[t]!==o)throw new SyntaxError(`Invalid JSON path: ${o} expected at position ${t}`);t++}return e}function $p(n){return{value:n,label:$t(n)?"(item root)":lo(n)}}function Ac(n){return n.map(e=>YL.test(e)?`?.[${e}]`:yse.test(e)?`?.${e}`:`?.[${JSON.stringify(e)}]`).join("")}const yse=/^[a-zA-Z$_][a-zA-Z$_\d]*$/,YL=/^\d+$/;function _se(){return Q2(n=>n,lo)}function kg(n,e){const t=new Set(e),r=n.replace(/ \(copy( \d+)?\)$/,"");let i=n,o=1;for(;t.has(i);){const s="copy"+(o>1?" "+o:"");i=`${r} (${s})`,o++}return i}function Nl(n,e){const t="...",r=e-t.length;return n.length>e?n.substring(0,r)+t:n}function wse(n){if(n==="")return"";const e=n.toLowerCase();if(e==="null")return null;if(e==="true")return!0;if(e==="false")return!1;if(e==="undefined")return;const t=Number(n),r=parseFloat(n);return!isNaN(t)&&!isNaN(r)?t:n}const kse=`
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`,Cse={id:"javascript",name:"JavaScript",description:kse,createQuery:Sse,executeQuery:xse};function Sse(n,e){const{filter:t,sort:r,projection:i}=e,o=[`  return data
`];if(t&&t.path&&t.relation&&t.value){const s=`item => item${Ac(t.path)}`,a=wse(t.value),l=typeof a=="string"?`'${t.value}'`:S$(t.value)&&!Number.isSafeInteger(a)?`${t.value}n`:t.value;o.push(`    .filter(${s} ${t.relation} ${l})
`)}if(r&&r.path&&r.direction&&(r.direction==="desc"?o.push(`    .slice()
    .sort((a, b) => {
      // sort descending
      const valueA = a${Ac(r.path)}
      const valueB = b${Ac(r.path)}
      return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
    })
`):o.push(`    .slice()
    .sort((a, b) => {
      // sort ascending
      const valueA = a${Ac(r.path)}
      const valueB = b${Ac(r.path)}
      return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
    })
`)),i&&i.paths)if(i.paths.length>1){const s=i.paths.map(a=>{const l=a[a.length-1]||"item",u=`item${Ac(a)}`;return`      ${JSON.stringify(l)}: ${u}`});o.push(`    .map(item => ({
${s.join(`,
`)}})
    )
`)}else{const s=`item${Ac(i.paths[0])}`;o.push(`    .map(item => ${s})
`)}return`function query (data) {
${o.join("")}}`}function xse(n,e){const r=new Function(`"use strict";

`+e+`

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(n);return r!==void 0?r:null}const Ese={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7c0 0 0 0 0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5L109 384c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8c0 0 0 0 0 0s0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4c0 0 0 0 0 0s0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5l-48.6 0c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8c0 0 0 0 0 0s0 0 0 0s0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80l0-16 160 0 0 16c0 44.2-35.8 80-80 80z"]},Ase={prefix:"far",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},am=Ase,lm={prefix:"far",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M384 80c8.8 0 16 7.2 16 16l0 320c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16L48 96c0-8.8 7.2-16 16-16l320 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"]},Mse={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]};function Tse(n){let e;return{c(){e=Ti("g")},m(t,r){H(t,e,r),e.innerHTML=n[0]},p(t,[r]){r&1&&(e.innerHTML=t[0])},i:pe,o:pe,d(t){t&&j(e)}}}function Ose(n,e,t){let r=870711;function i(){return r+=1,`fa-${r.toString(16)}`}let o="",{data:s}=e;function a(l){if(!l||!l.raw)return"";let u=l.raw;const c={};return u=u.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(f,d)=>{const h=i();return c[d]=h,` id="${h}"`}),u=u.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(f,d,h,p)=>{const m=d||p;return!m||!c[m]?f:`#${c[m]}`}),u}return n.$$set=l=>{"data"in l&&t(1,s=l.data)},n.$$.update=()=>{n.$$.dirty&2&&t(0,o=a(s))},[o,s]}class Dse extends ye{constructor(e){super(),be(this,e,Ose,Tse,Be,{data:1})}}function Rse(n){let e,t,r,i;const o=n[12].default,s=Je(o,n,n[11],null);let a=[{version:"1.1"},{class:t="fa-icon "+n[0]},{width:n[1]},{height:n[2]},{"aria-label":n[9]},{role:r=n[9]?"img":"presentation"},{viewBox:n[3]},{style:n[8]},n[10]],l={};for(let u=0;u<a.length;u+=1)l=Te(l,a[u]);return{c(){e=Ti("svg"),s&&s.c(),Ia(e,l),oe(e,"fa-spin",n[4]),oe(e,"fa-pulse",n[6]),oe(e,"fa-inverse",n[5]),oe(e,"fa-flip-horizontal",n[7]==="horizontal"),oe(e,"fa-flip-vertical",n[7]==="vertical"),oe(e,"svelte-1mc5hvj",!0)},m(u,c){H(u,e,c),s&&s.m(e,null),i=!0},p(u,[c]){s&&s.p&&(!i||c&2048)&&Xe(s,o,u,u[11],i?Ye(o,u[11],c,null):Qe(u[11]),null),Ia(e,l=Ot(a,[{version:"1.1"},(!i||c&1&&t!==(t="fa-icon "+u[0]))&&{class:t},(!i||c&2)&&{width:u[1]},(!i||c&4)&&{height:u[2]},(!i||c&512)&&{"aria-label":u[9]},(!i||c&512&&r!==(r=u[9]?"img":"presentation"))&&{role:r},(!i||c&8)&&{viewBox:u[3]},(!i||c&256)&&{style:u[8]},c&1024&&u[10]])),oe(e,"fa-spin",u[4]),oe(e,"fa-pulse",u[6]),oe(e,"fa-inverse",u[5]),oe(e,"fa-flip-horizontal",u[7]==="horizontal"),oe(e,"fa-flip-vertical",u[7]==="vertical"),oe(e,"svelte-1mc5hvj",!0)},i(u){i||(x(s,u),i=!0)},o(u){D(s,u),i=!1},d(u){u&&j(e),s&&s.d(u)}}}function Pse(n,e,t){const r=["class","width","height","box","spin","inverse","pulse","flip","style","label"];let i=Wu(e,r),{$$slots:o={},$$scope:s}=e,{class:a=""}=e,{width:l}=e,{height:u}=e,{box:c="0 0 0 0"}=e,{spin:f=!1}=e,{inverse:d=!1}=e,{pulse:h=!1}=e,{flip:p="none"}=e,{style:m=""}=e,{label:g=""}=e;return n.$$set=v=>{e=Te(Te({},e),_t(v)),t(10,i=Wu(e,r)),"class"in v&&t(0,a=v.class),"width"in v&&t(1,l=v.width),"height"in v&&t(2,u=v.height),"box"in v&&t(3,c=v.box),"spin"in v&&t(4,f=v.spin),"inverse"in v&&t(5,d=v.inverse),"pulse"in v&&t(6,h=v.pulse),"flip"in v&&t(7,p=v.flip),"style"in v&&t(8,m=v.style),"label"in v&&t(9,g=v.label),"$$scope"in v&&t(11,s=v.$$scope)},[a,l,u,c,f,d,h,p,m,g,i,s,o]}class Ise extends ye{constructor(e){super(),be(this,e,Pse,Rse,Be,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,style:8,label:9})}}function VM(n,e,t){const r=n.slice();return r[24]=e[t],r}function WM(n,e,t){const r=n.slice();return r[27]=e[t],r}function qM(n){let e,t=[n[27]],r={};for(let i=0;i<t.length;i+=1)r=Te(r,t[i]);return{c(){e=Ti("path"),Ia(e,r)},m(i,o){H(i,e,o)},p(i,o){Ia(e,r=Ot(t,[o&64&&i[27]]))},d(i){i&&j(e)}}}function UM(n){let e,t=[n[24]],r={};for(let i=0;i<t.length;i+=1)r=Te(r,t[i]);return{c(){e=Ti("polygon"),Ia(e,r)},m(i,o){H(i,e,o)},p(i,o){Ia(e,r=Ot(t,[o&64&&i[24]]))},d(i){i&&j(e)}}}function GM(n){let e,t,r;function i(s){n[16](s)}let o={};return n[6]!==void 0&&(o.data=n[6]),e=new Dse({props:o}),rt.push(()=>fr(e,"data",i)),{c(){$(e.$$.fragment)},m(s,a){Q(e,s,a),r=!0},p(s,a){const l={};!t&&a&64&&(t=!0,l.data=s[6],cr(()=>t=!1)),e.$set(l)},i(s){r||(x(e.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),r=!1},d(s){Z(e,s)}}}function Nse(n){var c,f,d;let e,t,r,i,o=((c=n[6])==null?void 0:c.paths)||[],s=[];for(let h=0;h<o.length;h+=1)s[h]=qM(WM(n,o,h));let a=((f=n[6])==null?void 0:f.polygons)||[],l=[];for(let h=0;h<a.length;h+=1)l[h]=UM(VM(n,a,h));let u=((d=n[6])==null?void 0:d.raw)&&GM(n);return{c(){for(let h=0;h<s.length;h+=1)s[h].c();e=K();for(let h=0;h<l.length;h+=1)l[h].c();t=K(),u&&u.c(),r=Ze()},m(h,p){for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(h,p);H(h,e,p);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(h,p);H(h,t,p),u&&u.m(h,p),H(h,r,p),i=!0},p(h,p){var m,g,v;if(p&64){o=((m=h[6])==null?void 0:m.paths)||[];let b;for(b=0;b<o.length;b+=1){const w=WM(h,o,b);s[b]?s[b].p(w,p):(s[b]=qM(w),s[b].c(),s[b].m(e.parentNode,e))}for(;b<s.length;b+=1)s[b].d(1);s.length=o.length}if(p&64){a=((g=h[6])==null?void 0:g.polygons)||[];let b;for(b=0;b<a.length;b+=1){const w=VM(h,a,b);l[b]?l[b].p(w,p):(l[b]=UM(w),l[b].c(),l[b].m(t.parentNode,t))}for(;b<l.length;b+=1)l[b].d(1);l.length=a.length}(v=h[6])!=null&&v.raw?u?(u.p(h,p),p&64&&x(u,1)):(u=GM(h),u.c(),x(u,1),u.m(r.parentNode,r)):u&&(de(),D(u,1,1,()=>{u=null}),he())},i(h){i||(x(u),i=!0)},o(h){D(u),i=!1},d(h){rn(s,h),h&&j(e),rn(l,h),h&&j(t),u&&u.d(h),h&&j(r)}}}function Bse(n){let e;const t=n[15].default,r=Je(t,n,n[17],null),i=r||Nse(n);return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r?r.p&&(!e||s&131072)&&Xe(r,t,o,o[17],e?Ye(t,o[17],s,null):Qe(o[17]),null):i&&i.p&&(!e||s&64)&&i.p(o,e?s:-1)},i(o){e||(x(i,o),e=!0)},o(o){D(i,o),e=!1},d(o){i&&i.d(o)}}}function Lse(n){let e,t;const r=[{label:n[5]},{width:n[7]},{height:n[8]},{box:n[10]},{style:n[9]},{spin:n[1]},{flip:n[4]},{inverse:n[2]},{pulse:n[3]},{class:n[0]},n[11]];let i={$$slots:{default:[Bse]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new Ise({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&4031?Ot(r,[s&32&&{label:o[5]},s&128&&{width:o[7]},s&256&&{height:o[8]},s&1024&&{box:o[10]},s&512&&{style:o[9]},s&2&&{spin:o[1]},s&16&&{flip:o[4]},s&4&&{inverse:o[2]},s&8&&{pulse:o[3]},s&1&&{class:o[0]},s&2048&&an(o[11])]):{};s&131136&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}let KM=1;function Fse(n){let e,t;if(n)if("definition"in n){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in n&&"icon"in n){e=n.iconName;const[r,i,,,o]=n.icon,s=Array.isArray(o)?o:[o];t={width:r,height:i,paths:s.map(a=>({d:a}))}}else e=Object.keys(n)[0],t=n[e];else return;return t}function zse(n,e,t){const r=["class","data","scale","spin","inverse","pulse","flip","label","style"];let i=Wu(e,r),{$$slots:o={},$$scope:s}=e,{class:a=""}=e,{data:l}=e,u,{scale:c=1}=e,{spin:f=!1}=e,{inverse:d=!1}=e,{pulse:h=!1}=e,{flip:p=void 0}=e,{label:m=""}=e,{style:g=""}=e,v=10,b=10,w,_;function y(){let I=1;return typeof c<"u"&&(I=Number(c)),isNaN(I)||I<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),KM):I*KM}function k(){return u?`0 0 ${u.width} ${u.height}`:`0 0 ${v} ${b}`}function S(){return u?Math.max(u.width,u.height)/16:1}function E(){return u?u.width/S()*y():0}function M(){return u?u.height/S()*y():0}function R(){let I="";g!==null&&(I+=g);let P=y();return P===1?I.length===0?"":I:(I!==""&&!I.endsWith(";")&&(I+="; "),`${I}font-size: ${P}em`)}function O(I){u=I,t(6,u),t(12,l),t(14,g),t(13,c)}return n.$$set=I=>{e=Te(Te({},e),_t(I)),t(11,i=Wu(e,r)),"class"in I&&t(0,a=I.class),"data"in I&&t(12,l=I.data),"scale"in I&&t(13,c=I.scale),"spin"in I&&t(1,f=I.spin),"inverse"in I&&t(2,d=I.inverse),"pulse"in I&&t(3,h=I.pulse),"flip"in I&&t(4,p=I.flip),"label"in I&&t(5,m=I.label),"style"in I&&t(14,g=I.style),"$$scope"in I&&t(17,s=I.$$scope)},n.$$.update=()=>{n.$$.dirty&28672&&(t(6,u=Fse(l)),t(7,v=E()),t(8,b=M()),t(9,w=R()),t(10,_=k()))},[a,f,d,h,p,m,u,v,b,w,_,i,l,c,g,o,O,s]}let Jt=class extends ye{constructor(e){super(),be(this,e,zse,Lse,Be,{class:0,data:12,scale:13,spin:1,inverse:2,pulse:3,flip:4,label:5,style:14})}};function jse(n){let e,t,r,i,o,s,a;return t=new Jt({props:{data:n[0]===!0?am:lm}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"role","checkbox"),C(e,"tabindex","-1"),C(e,"aria-checked",r=n[0]===!0),C(e,"class","jse-boolean-toggle svelte-68vtq4"),C(e,"title",i=n[1]?`Boolean value ${n[0]}`:"Click to toggle this boolean value"),oe(e,"jse-readonly",n[1])},m(l,u){H(l,e,u),Q(t,e,null),o=!0,s||(a=le(e,"mousedown",n[2]),s=!0)},p(l,[u]){const c={};u&1&&(c.data=l[0]===!0?am:lm),t.$set(c),(!o||u&1&&r!==(r=l[0]===!0))&&C(e,"aria-checked",r),(!o||u&3&&i!==(i=l[1]?`Boolean value ${l[0]}`:"Click to toggle this boolean value"))&&C(e,"title",i),(!o||u&2)&&oe(e,"jse-readonly",l[1])},i(l){o||(x(t.$$.fragment,l),o=!0)},o(l){D(t.$$.fragment,l),o=!1},d(l){l&&j(e),Z(t),s=!1,a()}}}function Hse(n,e,t){let{path:r}=e,{value:i}=e,{readOnly:o}=e,{onPatch:s}=e,{focus:a}=e;function l(u){u.stopPropagation(),!o&&(s([{op:"replace",path:Ke(r),value:!i}]),a())}return n.$$set=u=>{"path"in u&&t(3,r=u.path),"value"in u&&t(0,i=u.value),"readOnly"in u&&t(1,o=u.readOnly),"onPatch"in u&&t(4,s=u.onPatch),"focus"in u&&t(5,a=u.focus)},[i,o,l,r,s,a]}class Vse extends ye{constructor(e){super(),be(this,e,Hse,jse,Rt,{path:3,value:0,readOnly:1,onPatch:4,focus:5})}}const Wse=Vse;function qse(n){let e;return{c(){e=B("div"),C(e,"class","jse-color-picker-popup svelte-1mgcg2f")},m(t,r){H(t,e,r),n[4](e)},p:pe,i:pe,o:pe,d(t){t&&j(e),n[4](null)}}}function Use(n,e,t){let{color:r}=e,{onChange:i}=e,{showOnTop:o}=e,s,a=()=>{};Tn(async()=>{var f;const u=(f=await $N(()=>import("./vanilla-picker-2033e4d0.js"),[]))==null?void 0:f.default,c=new u({parent:s,color:r,popup:o?"top":"bottom",onDone(d){const p=d.rgba[3]===1?d.hex.substring(0,7):d.hex;i(p)}});c.show(),a=()=>{c.destroy()}}),Kr(()=>{a()});function l(u){rt[u?"unshift":"push"](()=>{s=u,t(0,s)})}return n.$$set=u=>{"color"in u&&t(1,r=u.color),"onChange"in u&&t(2,i=u.onChange),"showOnTop"in u&&t(3,o=u.showOnTop)},[s,r,i,o,l]}class Gse extends ye{constructor(e){super(),be(this,e,Use,qse,Be,{color:1,onChange:2,showOnTop:3})}}const Kse=Gse;function Jse(n){let e,t,r,i;return{c(){e=B("button"),C(e,"type","button"),C(e,"class","jse-color-picker-button svelte-1zzxwe"),sr(e,"background",n[2]),C(e,"title",t=n[1]?`Color ${n[0]}`:"Click to open a color picker"),oe(e,"jse-readonly",n[1])},m(o,s){H(o,e,s),r||(i=le(e,"click",n[3]),r=!0)},p(o,[s]){s&4&&sr(e,"background",o[2]),s&3&&t!==(t=o[1]?`Color ${o[0]}`:"Click to open a color picker")&&C(e,"title",t),s&2&&oe(e,"jse-readonly",o[1])},i:pe,o:pe,d(o){o&&j(e),r=!1,i()}}}function Yse(n,e,t){let r;const{openAbsolutePopup:i}=pr("absolute-popup");let{path:o}=e,{value:s}=e,{readOnly:a}=e,{onPatch:l}=e,{focus:u}=e;function c(h){l([{op:"replace",path:Ke(o),value:h}]),f()}function f(){u()}function d(h){var _;if(a)return;const p=300,m=h.target,g=m.getBoundingClientRect().top,b=(((_=lp(m))==null?void 0:_.innerHeight)??0)-g<p&&g>p;i(Kse,{color:s,onChange:c,showOnTop:b},{anchor:m,closeOnOuterClick:!0,onClose:f,offsetTop:18,offsetLeft:-8,height:p})}return n.$$set=h=>{"path"in h&&t(4,o=h.path),"value"in h&&t(0,s=h.value),"readOnly"in h&&t(1,a=h.readOnly),"onPatch"in h&&t(5,l=h.onPatch),"focus"in h&&t(6,u=h.focus)},n.$$.update=()=>{n.$$.dirty&1&&t(2,r=eL(s))},[s,a,r,d,o,l,u]}class Xse extends ye{constructor(e){super(),be(this,e,Yse,Jse,Rt,{path:4,value:0,readOnly:1,onPatch:5,focus:6})}}const Qse=Xse;function Zse(n,e){const t={start:n,end:Math.min(oC(n),e)},r=Math.max(Db((n+e)/2),n),i={start:r,end:Math.min(oC(r),e)},o=Db(e),s=o===e?o-tm:o,a={start:Math.max(s,n),end:e},l=[t],u=i.start>=t.end&&i.end<=a.start;return u&&l.push(i),a.start>=(u?i.end:t.end)&&l.push(a),l}function XL(n){const e=Poe(n,r=>r.start),t=[e[0]];for(let r=0;r<e.length;r++){const i=t.length-1,o=t[i],s=e[r];s.start<=o.end?t[i]={start:Math.min(o.start,s.start),end:Math.max(o.end,s.end)}:t.push(s)}return t}function $se(n,e){return n.some(t=>e>=t.start&&e<t.end)}function oC(n){return Db(n)+tm}function Db(n){return Math.floor(n/tm)*tm}function Rb(n){let e={expandedMap:{},enforceStringMap:{},visibleSectionsMap:{},selection:null,sortedColumn:null};return n!=null&&n.select&&n.json!==void 0&&(e={...e,selection:n.select(n.json,e)}),n!=null&&n.expand&&(e=jo(n.json,e,[],n.expand)),e}function r_(n,e){return n.visibleSectionsMap[e]||cf}function Nx(n,e,t){e.forEach(({start:r,end:i})=>{IL(r,Math.min(n.length,i),t)})}function sC(n,e,t){const r={...e.expandedMap},i={...e.visibleSectionsMap};for(let o=0;o<t.length;o++){const s=t.slice(0,o),a=Ke(s),l=ot(n,s);if(er(l)&&(r[a]=!0),Array.isArray(l)&&o<t.length){const u=i[a]||cf,c=_i(t[o]);if(!$se(u,c)){const f=Db(c),d=oC(f),h={start:f,end:d};i[a]=XL(u.concat(h))}}}return{...e,expandedMap:r,visibleSectionsMap:i}}function jo(n,e,t,r){const i={...e.expandedMap};function o(l){const u=s.length;if(Array.isArray(l)){if(r(s)){const c=Ke(s);if(i[c]=!0,l.length>0){const f=r_(e,c);Nx(l,f,d=>{s[u]=String(d),o(l[d])}),s.pop()}}}else if(Cn(l)&&r(s)){i[Ke(s)]=!0;const c=Object.keys(l);if(c.length>0){for(const f of c)s[u]=f,o(l[f]);s.pop()}}}const s=t.slice(),a=n!==void 0?ot(n,t):n;return a!==void 0&&o(a),{...e,expandedMap:i}}function eae(n,e){return{...n,expandedMap:{...n.expandedMap,[Ke(e)]:!0}}}function QL(n,e){const t=Xd(n.expandedMap,e),r=Xd(n.enforceStringMap,e),i=Xd(n.visibleSectionsMap,e);return{...n,expandedMap:t,enforceStringMap:r,visibleSectionsMap:i}}function ZL(n,e,t){if(t){const r={...n.enforceStringMap};return r[e]=t,{...n,enforceStringMap:r}}else if(typeof n.enforceStringMap[e]=="boolean"){const r={...n.enforceStringMap};return delete r[e],{...n,enforceStringMap:r}}else return n}function tae(n,e,t,r){return{...e,visibleSectionsMap:{...e.visibleSectionsMap,[t]:XL(r_(e,t).concat(r))}}}function $L(n,e,t){const r=Ns(n,t),i=t.reduce((o,s)=>FB(s)?eF(r,o,s):zB(s)?tF(r,o,s):px(s)?nae(r,o,s):U3(s)||vh(s)?rae(r,o,s):o,e);return{json:r,documentState:i}}function eF(n,e,t){const r=Ea(n,t.path),i=Ut(r),o=Ke(i),s=ot(n,i);if(Sn(s)){const a=_i(jt(r)),l=Qd(e.expandedMap,i,a,1),u=Qd(e.enforceStringMap,i,a,1);let c=Qd(e.visibleSectionsMap,i,a,1);return c=nF(c,o,f=>rF(f,a,1)),{...e,expandedMap:l,enforceStringMap:u,visibleSectionsMap:c}}return e}function tF(n,e,t){const r=Ea(n,t.path),i=Ut(r),o=Ke(i),s=ot(n,i);let{expandedMap:a,enforceStringMap:l,visibleSectionsMap:u}=e;if(a=Xd(a,r),l=Xd(l,r),u=Xd(u,r),Sn(s)){const c=_i(jt(r));a=Qd(a,i,c,-1),l=Qd(l,i,c,-1),u=Qd(u,i,c,-1),u=nF(u,o,f=>rF(f,c,-1))}return{...e,expandedMap:a,enforceStringMap:l,visibleSectionsMap:u}}function nae(n,e,t){const r=t.path,i=qw(n,e.expandedMap),o=qw(n,e.enforceStringMap),s=qw(n,e.visibleSectionsMap);return!nr(t.value)&&!Sn(t.value)&&delete i[r],Sn(t.value)||delete s[r],(nr(t.value)||Sn(t.value))&&delete o[r],{...e,expandedMap:i,enforceStringMap:o,visibleSectionsMap:s}}function rae(n,e,t){if(vh(t)&&t.from===t.path)return e;const r=f=>t.path+f.substring(t.from.length),i=Ww(Hw(e.expandedMap,t.from),r),o=Ww(Hw(e.enforceStringMap,t.from),r),s=Ww(Hw(e.visibleSectionsMap,t.from),r);let a=e;vh(t)&&(a=tF(n,a,{op:"remove",path:t.from})),a=eF(n,a,{op:"add",path:t.path,value:null});const l=Vw(a.expandedMap,i),u=Vw(a.enforceStringMap,o),c=Vw(a.visibleSectionsMap,s);return{...e,expandedMap:l,enforceStringMap:u,visibleSectionsMap:c}}function Xd(n,e){const t={},r=Ke(e);return Object.keys(n).forEach(i=>{j2(i,r)||(t[i]=n[i])}),t}function Hw(n,e){const t={};return Object.keys(n).forEach(r=>{j2(r,e)&&(t[r]=n[r])}),t}function Vw(n,e){return{...n,...e}}function Ww(n,e){const t={};return Object.keys(n).forEach(r=>{const i=e(r);t[i]=n[r]}),t}function Qd(n,e,t,r){const i=e.length,o=Ke(e),s=[];for(const l of Object.keys(n))if(j2(l,o)){const u=js(l),c=_i(u[i]);c>=t&&(u[i]=String(c+r),s.push({oldPointer:l,newPointer:Ke(u),value:n[l]}))}if(s.length===0)return n;const a={...n};return s.forEach(l=>{delete a[l.oldPointer]}),s.forEach(l=>{a[l.newPointer]=l.value}),a}function qw(n,e){const t={};return Object.keys(e).filter(r=>Zo(n,Ea(n,r))).forEach(r=>{t[r]=e[r]}),t}function nF(n,e,t){const r=n[e];if(e in n){const i=t(r);if(!Wt(r,i)){const o={...n};return i===void 0?delete o[e]:o[e]=i,o}}return n}function rF(n,e,t){const r=n.map(i=>({start:i.start>e?i.start+t:i.start,end:i.end>e?i.end+t:i.end}));return iae(r)}function iae(n){const e=n.slice(0);let t=1;for(;t<e.length;)e[t-1].end===e[t].start&&(e[t-1]={start:e[t-1].start,end:e[t].end},e.splice(t)),t++;return e}function Bl(n,e,t,r){const i=e?e[t]:void 0;return typeof i=="boolean"?i:C$(n,r)}function Cg(n,e,t=!1){const r=n.indexOf(e);return r!==-1?t?n.slice(r):n.slice(r+1):[]}function Bx(n,e){const t=[];function r(i,o){t.push(o);const s=Ke(o);if(i&&e.expandedMap[s]===!0){if(Sn(i)){const a=r_(e,s);Nx(i,a,l=>{r(i[l],o.concat(String(l)))})}nr(i)&&Object.keys(i).forEach(a=>{r(i[a],o.concat(a))})}}return r(n,[]),t}function iF(n,e,t=!0){const r=[];function i(o,s){r.push({path:s,type:Ms.value});const a=Ke(s);if(o&&e.expandedMap[a]===!0){if(t&&r.push({path:s,type:Ms.inside}),Sn(o)){const l=r_(e,a);Nx(o,l,u=>{const c=s.concat(String(u));i(o[u],c),t&&r.push({path:c,type:Ms.after})})}nr(o)&&Object.keys(o).forEach(u=>{const c=s.concat(u);r.push({path:c,type:Ms.key}),i(o[u],c),t&&r.push({path:c,type:Ms.after})})}}return i(n,[]),r}function oae(n,e,t){const r=Bx(n,e),i=r.map(Ke),o=Ke(t),s=i.indexOf(o);return s!==-1&&s>0?r[s-1]:null}function aC(n,e,t){const r=Bx(n,e),o=r.map(Ke).indexOf(Ke(t));return o!==-1&&o<r.length-1?r[o+1]:null}function pu(n,e,t){const r=ot(n,t);if(r===void 0)return e;const o=!FL({json:r},LB)?um:va;return jo(n,e,t,o)}function va(n){return n.length===0?!0:n.length===1&&n[0]==="0"}function um(){return!0}function sae(n){return FL({json:n},LB)?va:um}function no(n){return n&&n.type===_n.after||!1}function kr(n){return n&&n.type===_n.inside||!1}function hr(n){return n&&n.type===_n.key||!1}function Qt(n){return n&&n.type===_n.value||!1}function hn(n){return n&&n.type===_n.multi||!1}function i_(n){return hn(n)&&Wt(n.focusPath,n.anchorPath)}function Lx(n){return hn(n)||no(n)||kr(n)||hr(n)||Qt(n)}function JM(n){return n&&n.type===_n.text||!1}function Uu(n,e){const t=[];return aae(n,e,r=>{t.push(r)}),t}function aae(n,e,t){if(!e)return;const r=mf(e),i=pt(e);if(Wt(r,i))return t(r);{if(n===void 0)return;const o=aF(r,i);if(r.length===o.length||i.length===o.length)return t(o);const s=Oi(r,i),a=Ll(n,s),l=fc(n,s),u=xl(n,s,a),c=xl(n,s,l);if(u===-1||c===-1)return;const f=ot(n,o);if(nr(f)){const d=Object.keys(f);for(let h=u;h<=c;h++){const p=t(o.concat(d[h]));if(p!==void 0)return p}return}if(Sn(f)){for(let d=u;d<=c;d++){const h=t(o.concat(String(d)));if(h!==void 0)return h}return}}throw new Error("Failed to create selection")}function oF(n){return kr(n)?n.path:Ut(pt(n))}function Ll(n,e){if(!hn(e))return e.path;const t=xl(n,e,e.anchorPath);return xl(n,e,e.focusPath)<t?e.focusPath:e.anchorPath}function fc(n,e){if(!hn(e))return e.path;const t=xl(n,e,e.anchorPath);return xl(n,e,e.focusPath)>t?e.focusPath:e.anchorPath}function lae(n,e){return Gu(pt(n),e)&&(pt(n).length>e.length||kr(n))}function YM(n,e,t=!1){const r=e.selection;if(!r)return null;const i=t?pt(r):Ll(n,r),o=oae(n,e,i);if(t)return kr(r)||no(r)?o!==null?Oi(i,i):null:o!==null?Oi(mf(r),o):null;if(no(r)||kr(r))return Bt(i,!1);if(hr(r)){if(o==null||o.length===0)return null;const s=Ut(o),a=ot(n,s);return Array.isArray(a)||$t(o)?Bt(o,!1):$o(o,!1)}return Qt(r),o!==null?Bt(o,!1):null}function uae(n,e,t=!1){const r=e.selection;if(!r)return null;const i=t?pt(r):fc(n,r),o=er(ot(n,i))?QL(e,i):e,s=aC(n,e,i),a=aC(n,o,i);if(t)return kr(r)?s!==null?Oi(s,s):null:no(r)?a!==null?Oi(a,a):null:a!==null?Oi(mf(r),a):null;if(no(r))return a!==null?Bt(a,!1):null;if(kr(r)||Qt(r))return s!==null?Bt(s,!1):null;if(hr(r)){if(s===null||s.length===0)return null;const l=Ut(s),u=ot(n,l);return Array.isArray(u)?Bt(s,!1):$o(s,!1)}return hn(r)?a!==null?Bt(a,!1):s!==null?Bt(s,!1):null:null}function cae(n,e,t){const r=Ut(t),i=[jt(t)],o=ot(n,r),s=o?aC(o,e,i):void 0;return s?Bt(r.concat(s),!1):zl(t)}function sF(n,e,t){const r=e.selection;if(!r)return{caret:null,previous:null,next:null};const i=iF(n,e,t),o=i.findIndex(s=>Wt(s.path,pt(r))&&String(s.type)===String(r.type));return{caret:o!==-1?i[o]:null,previous:o!==-1&&o>0?i[o-1]:null,next:o!==-1&&o<i.length-1?i[o+1]:null}}function fae(n,e,t=!1,r=!0){const i=e.selection;if(!i)return null;const{caret:o,previous:s}=sF(n,e,r);if(t)return hn(i)?null:Oi(i.path,i.path);if(o&&s)return Fx(s);const a=Ut(pt(i)),l=ot(n,a);return Qt(i)&&Array.isArray(l)?Oi(i.path,i.path):hn(i)&&!Array.isArray(l)?$o(i.focusPath,!1):null}function dae(n,e,t=!1,r=!0){const i=e.selection;if(!i)return null;const{caret:o,next:s}=sF(n,e,r);return t?hn(i)?null:Oi(i.path,i.path):o&&s?Fx(s):hn(i)?Bt(i.focusPath,!1):null}function ld(n,e){const t=Bx(n,e);let r=0;for(;r<t.length-1&&t[r+1].length>t[r].length;)r++;const i=t[r];return i===void 0||i.length===0||Array.isArray(ot(n,Ut(i)))?Bt(i,!1):$o(i,!1)}function Sh(n,e){if(e.length===1){const r=Sl(e);if(r.op==="replace"){const i=Ea(n,r.path);return Bt(i,!1)}}if(!$t(e)&&e.every(r=>r.op==="move")){const r=Sl(e),i=e.slice(1);if((U3(r)||vh(r))&&r.from!==r.path&&i.every(o=>(U3(o)||vh(o))&&o.from===o.path)){const o=Ea(n,r.path);return $o(o,!1)}}const t=e.filter(r=>r.op!=="test"&&r.op!=="remove"&&(r.op!=="move"||r.from!==r.path)&&typeof r.path=="string").map(r=>Ea(n,r.path));return $t(t)?null:{type:_n.multi,anchorPath:Sl(t),focusPath:jt(t)}}function aF(n,e){let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function Pb(n){return hr(n)||Qt(n)||i_(n)}function XM(n,e){return Pb(e)&&er(ot(n,pt(e)))?pt(e):Ut(pt(e))}function Gu(n,e){if(n.length<e.length)return!1;for(let t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0}function Si(n){const e=n.selection;return(hr(e)||Qt(e))&&e.edit?{...n,selection:{...e,edit:!1}}:n}function $o(n,e){return{type:_n.key,path:n,edit:e}}function Bt(n,e){return{type:_n.value,path:n,edit:e}}function Fl(n){return{type:_n.inside,path:n}}function zl(n){return{type:_n.after,path:n}}function Oi(n,e){const t=aF(n,e),r=n.length>t.length&&e.length>t.length;return{type:_n.multi,anchorPath:r?t.concat(n[t.length]):t,focusPath:r?t.concat(e[t.length]):t}}function lF(n,e,t,r){if(hr(e))return String(jt(e.path));if(Qt(e)){const i=ot(n,e.path);return typeof i=="string"?i:r.stringify(i,null,t)??null}if(hn(e)){if($t(e.focusPath))return r.stringify(n,null,t)??null;const i=oF(e),o=ot(n,i);if(Array.isArray(o))if(i_(e)){const s=ot(n,e.focusPath);return r.stringify(s,null,t)??null}else return Uu(n,e).map(s=>{const a=ot(n,s);return`${r.stringify(a,null,t)},`}).join(`
`);else return Uu(n,e).map(s=>{const a=jt(s),l=ot(n,s);return`${r.stringify(a)}: ${r.stringify(l,null,t)},`}).join(`
`)}return null}function Pi(n){return(hr(n)||Qt(n))&&n.edit===!0}function hae(n,e,t=!0){return!e&&!t?n:{...n,selection:e}}function pae(){return Bt([],!1)}function up(n){return hr(n)||Qt(n)||hn(n)}function qv(n){return hr(n)||Qt(n)||i_(n)}function Fx(n){switch(n.type){case Ms.key:return $o(n.path,!1);case Ms.value:return Bt(n.path,!1);case Ms.after:return zl(n.path);case Ms.inside:return Fl(n.path)}}function QM(n,e,t){switch(e){case _n.key:return $o(t,!1);case _n.value:return Bt(t,!1);case _n.after:return zl(t);case _n.inside:return Fl(t);case _n.multi:case _n.text:return Oi(t,t)}}function ZM(n,e,t){if(!e)return null;if(cm(n,e,t))return e;const r=hn(e)?Ut(e.focusPath):e.path;return Gu(r,t)?e:null}function cm(n,e,t){if(n===void 0||!e)return!1;if(hr(e)||kr(e)||no(e))return Wt(e.path,t);if(Qt(e))return Gu(t,e.path);if(hn(e)){const r=Ll(n,e),i=fc(n,e),o=Ut(e.focusPath);if(!Gu(t,o)||t.length<=o.length)return!1;const s=xl(n,e,r),a=xl(n,e,i),l=xl(n,e,t);return l!==-1&&l>=s&&l<=a}return!1}function xl(n,e,t){const r=Ut(e.focusPath);if(!Gu(t,r)||t.length<=r.length)return-1;const i=t[r.length],o=ot(n,r);if(nr(o))return Object.keys(o).indexOf(i);if(Sn(o)){const s=_i(i);if(s<o.length)return s}return-1}function pt(n){return hn(n)?n.focusPath:n.path}function mf(n){return hn(n)?n.anchorPath:n.path}function Ba(...n){const e=[];for(const t of n)if(typeof t=="string"&&e.push(t),t&&typeof t=="object")for(const r in t)Object.hasOwnProperty.call(t,r)&&t[r]&&e.push(r);return e.join(" ")}function lC(n,e){const t=wx(n,e);return Ba("jse-value","jse-"+t,{"jse-url":V2(n),"jse-empty":typeof n=="string"&&n.length===0})}function mae(n){let e,t,r,i;return{c(){e=B("div"),C(e,"role","textbox"),C(e,"tabindex","0"),C(e,"class",t=qn(Ba("jse-editable-div",n[2],{"jse-short-text":n[0]}))+" svelte-2dn3wv"),C(e,"contenteditable","true"),C(e,"spellcheck","false")},m(o,s){H(o,e,s),n[13](e),r||(i=[le(e,"input",n[3]),le(e,"keydown",n[4]),le(e,"paste",n[5]),le(e,"blur",n[6])],r=!0)},p(o,[s]){s&5&&t!==(t=qn(Ba("jse-editable-div",o[2],{"jse-short-text":o[0]}))+" svelte-2dn3wv")&&C(e,"class",t)},i:pe,o:pe,d(o){o&&j(e),n[13](null),r=!1,It(i)}}}function gae(n,e,t){const r=oi("jsoneditor:EditableDiv");let{value:i}=e,{shortText:o=!1}=e,{onChange:s}=e,{onCancel:a}=e,{onFind:l}=e,{onPaste:u=ir}=e,{onValueClass:c=()=>""}=e,f,d,h=!1;Tn(()=>{r("onMount",{value:i}),m(i),f&&(qL(f),t(1,f.refresh=g,f),t(1,f.cancel=v,f))}),Kr(()=>{const k=p();r("onDestroy",{closed:h,value:i,newValue:k}),!h&&k!==i&&s(k,Iu.no)});function p(){return f?rse(f.innerText):""}function m(k){f&&t(1,f.innerText=pf(k),f)}function g(){const k=p();k===""&&m(""),t(2,d=c(k))}function v(){h=!0,a()}function b(k){k.stopPropagation();const S=cc(k);if(S==="Escape"&&v(),S==="Enter"||S==="Tab"){h=!0;const E=p();s(E,Iu.nextInside)}S==="Ctrl+F"&&(k.preventDefault(),l(!1)),S==="Ctrl+H"&&(k.preventDefault(),l(!0))}function w(k){if(k.stopPropagation(),!u||!k.clipboardData)return;const S=k.clipboardData.getData("text/plain");u(S)}function _(){const k=document.hasFocus(),S=p();r("handleBlur",{hasFocus:k,closed:h,value:i,newValue:S}),document.hasFocus()&&!h&&(h=!0,S!==i&&s(S,Iu.self))}function y(k){rt[k?"unshift":"push"](()=>{f=k,t(1,f)})}return n.$$set=k=>{"value"in k&&t(7,i=k.value),"shortText"in k&&t(0,o=k.shortText),"onChange"in k&&t(8,s=k.onChange),"onCancel"in k&&t(9,a=k.onCancel),"onFind"in k&&t(10,l=k.onFind),"onPaste"in k&&t(11,u=k.onPaste),"onValueClass"in k&&t(12,c=k.onValueClass)},n.$$.update=()=>{n.$$.dirty&4224&&t(2,d=c(i))},[o,f,d,g,b,w,_,i,s,a,l,u,c,y]}class vae extends ye{constructor(e){super(),be(this,e,gae,mae,Rt,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}const uF=vae;function bae(n){let e,t;return e=new uF({props:{value:n[1].escapeValue(n[0]),onChange:n[3],onCancel:n[4],onPaste:n[5],onFind:n[2],onValueClass:n[6]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,[i]){const o={};i&3&&(o.value=r[1].escapeValue(r[0])),i&4&&(o.onFind=r[2]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function yae(n,e,t){let{path:r}=e,{value:i}=e,{parser:o}=e,{normalization:s}=e,{enforceString:a}=e,{onPatch:l}=e,{onPasteJson:u}=e,{onSelect:c}=e,{onFind:f}=e,{focus:d}=e,{findNextInside:h}=e;function p(w){return a?w:ip(w,o)}function m(w,_){l([{op:"replace",path:Ke(r),value:p(s.unescapeValue(w))}],(y,k)=>{if(k.selection&&!Wt(r,pt(k.selection)))return;const S=_===Iu.nextInside?h(r):Bt(r,!1);return{state:{...k,selection:S}}}),d()}function g(){c(Bt(r,!1)),d()}function v(w){try{const _=o.parse(w);er(_)&&u({path:r,contents:_})}catch{}}function b(w){return lC(p(s.unescapeValue(w)),o)}return n.$$set=w=>{"path"in w&&t(7,r=w.path),"value"in w&&t(0,i=w.value),"parser"in w&&t(8,o=w.parser),"normalization"in w&&t(1,s=w.normalization),"enforceString"in w&&t(9,a=w.enforceString),"onPatch"in w&&t(10,l=w.onPatch),"onPasteJson"in w&&t(11,u=w.onPasteJson),"onSelect"in w&&t(12,c=w.onSelect),"onFind"in w&&t(2,f=w.onFind),"focus"in w&&t(13,d=w.focus),"findNextInside"in w&&t(14,h=w.findNextInside)},[i,s,f,m,g,v,b,r,o,a,l,u,c,d,h]}class _ae extends ye{constructor(e){super(),be(this,e,yae,bae,Rt,{path:7,value:0,parser:8,normalization:1,enforceString:9,onPatch:10,onPasteJson:11,onSelect:12,onFind:2,focus:13,findNextInside:14})}}const wae=_ae;function Pd(n,e,t){const r=Ut(e),i=ot(n,r);if(Sn(i)){const o=_i(jt(e));return t.map((s,a)=>({op:"add",path:Ke(r.concat(String(o+a))),value:s.value}))}else if(nr(i)){const o=jt(e),s=Object.keys(i),a=o!==void 0?Cg(s,o,!0):[];return[...t.map(l=>{const u=kg(l.key,s);return{op:"add",path:Ke(r.concat(u)),value:l.value}}),...a.map(l=>gf(r,l))]}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}function uC(n,e,t){const r=ot(n,e);if(Array.isArray(r)){const i=r.length;return t.map((o,s)=>({op:"add",path:Ke(e.concat(String(i+s))),value:o.value}))}else return t.map(i=>{const o=kg(i.key,Object.keys(r));return{op:"add",path:Ke(e.concat(o)),value:i.value}})}function Sg(n,e,t,r){const i=e.filter(a=>a!==t),o=kg(r,i),s=Cg(e,t,!1);return[{op:"move",from:Ke(n.concat(t)),path:Ke(n.concat(o))},...s.map(a=>gf(n,a))]}function kae(n,e,t){const r=Sl(e),i=Ut(r),o=ot(n,i);if(Sn(o)){const s=Sl(e),a=s?_i(jt(s)):0;return[...Ib(e),...t.map((l,u)=>({op:"add",path:Ke(i.concat(String(u+a))),value:l.value}))]}else if(nr(o)){const s=jt(e),a=Ut(s),l=jt(s),u=Object.keys(o),c=l!==void 0?Cg(u,l,!1):[],f=new Set(e.map(h=>jt(h))),d=u.filter(h=>!f.has(h));return[...Ib(e),...t.map(h=>{const p=kg(h.key,d);return{op:"add",path:Ke(a.concat(p)),value:h.value}}),...c.map(h=>gf(a,h))]}else throw new Error("Cannot create replace operations: parent must be an Object or Array")}function cF(n,e){const t=jt(e);if($t(t))throw new Error("Cannot duplicate root object");const r=Ut(t),i=jt(t),o=ot(n,r);if(Sn(o)){const s=jt(e),a=s?_i(jt(s))+1:0;return[...e.map((l,u)=>({op:"copy",from:Ke(l),path:Ke(r.concat(String(u+a)))}))]}else if(nr(o)){const s=Object.keys(o),a=i!==void 0?Cg(s,i,!1):[];return[...e.map(l=>{const u=jt(l),c=kg(u,s);return{op:"copy",from:Ke(l),path:Ke(r.concat(c))}}),...a.map(l=>gf(r,l))]}else throw new Error("Cannot create duplicate operations: parent must be an Object or Array")}function Cae(n,e){if(Qt(e))return[{op:"move",from:Ke(e.path),path:""}];if(hn(e)){const t=Ut(e.focusPath),r=ot(n,t);if(Sn(r))return[{op:"replace",path:"",value:Uu(n,e).map(o=>{const s=_i(jt(o));return r[s]})}];if(nr(r)){const i={};return Uu(n,e).forEach(o=>{const s=String(jt(o));i[s]=r[s]}),[{op:"replace",path:"",value:i}]}}else throw new Error("Cannot create extract operations: parent must be an Object or Array");throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(e))}function fF(n,e,t,r){if(hr(e)){const i=NL(t,r),o=Ut(e.path),s=ot(n,o),a=Object.keys(s),l=jt(e.path);return Sg(o,a,l,typeof i=="string"?i:t)}if(Qt(e)||hn(e)&&$t(e.focusPath))try{return[{op:"replace",path:Ke(pt(e)),value:n_(t,i=>_g(i,r))}]}catch{return[{op:"replace",path:Ke(pt(e)),value:t}]}if(hn(e)){const i=Uw(t,r);return kae(n,Uu(n,e),i)}if(no(e)){const i=Uw(t,r),o=e.path,s=Ut(o),a=ot(n,s);if(Sn(a)){const l=_i(jt(o)),u=s.concat(String(l+1));return Pd(n,u,i)}else if(nr(a)){const l=String(jt(o)),u=Object.keys(a);if($t(u)||jt(u)===l)return uC(n,s,i);{const c=u.indexOf(l),f=u[c+1],d=s.concat(f);return Pd(n,d,i)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}if(kr(e)){const i=Uw(t,r),o=e.path,s=ot(n,o);if(Sn(s)){const a=o.concat("0");return Pd(n,a,i)}else if(nr(s)){const a=Object.keys(s);if($t(a))return uC(n,o,i);{const l=Sl(a),u=o.concat(l);return Pd(n,u,i)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(e))}function Sae(n,e,t){if(!e)return[];const r="beforePath"in t?t.beforePath:void 0,i="append"in t?t.append:void 0,o=Ut(pt(e)),s=ot(n,o);if(!i&&!(r&&Gu(r,o)&&r.length>o.length))return[];const a=Ll(n,e),l=fc(n,e),u=jt(a),c=jt(l),f=r?r[o.length]:void 0;if(nr(s)){const d=Object.keys(s),h=d.indexOf(u),p=d.indexOf(c),m=i?d.length:f!==void 0?d.indexOf(f):-1;if(h!==-1&&p!==-1&&m!==-1)return m>h?[...d.slice(h,p+1),...d.slice(m,d.length)].map(g=>gf(o,g)):[...d.slice(m,h),...d.slice(p+1,d.length)].map(g=>gf(o,g))}else if(Sn(s)){const d=_i(u),h=_i(c),p=f!==void 0?_i(f):s.length,m=h-d+1;return p<d?DM(m,g=>({op:"move",from:Ke(o.concat(String(d+g))),path:Ke(o.concat(String(p+g)))})):DM(m,()=>({op:"move",from:Ke(o.concat(String(d))),path:Ke(o.concat(String(p)))}))}else throw new Error("Cannot create move operations: parent must be an Object or Array");return[]}function xae(n,e,t){if(t==="object")return{};if(t==="array")return[];if(t==="structure"&&n!==void 0){const r=e?oF(e):[],i=ot(n,r);if(Array.isArray(i)&&!$t(i)){const o=Sl(i);return er(o)?nie(o,s=>Array.isArray(s)?[]:Cn(s)?void 0:""):""}}return""}function Ib(n){return n.map(e=>({op:"remove",path:Ke(e)})).reverse()}function gf(n,e){return{op:"move",from:Ke(n.concat(e)),path:Ke(n.concat(e))}}function Uw(n,e){const t=/^\s*{/.test(n),r=/^\s*\[/.test(n),i=NL(n,e),o=i!==void 0?i:n_(n,s=>_g(s,e));return t&&Cn(o)||r&&Array.isArray(o)?[{key:"New item",value:o}]:Array.isArray(o)?o.map((s,a)=>({key:"New item "+a,value:s})):Cn(o)?Object.keys(o).map(s=>({key:s,value:o[s]})):[{key:"New item",value:o}]}function dF(n,e){if(hr(e)){const t=Ut(e.path),r=ot(n,t),i=Object.keys(r),o=jt(e.path),a=Sg(t,i,o,""),l=Sh(n,a);return{operations:a,newSelection:l}}if(Qt(e))return{operations:[{op:"replace",path:Ke(e.path),value:""}],newSelection:e};if(hn(e)){const t=Uu(n,e),r=Ib(t),i=jt(t);if($t(i)){const a=[{op:"replace",path:"",value:""}],l=Bt([],!1);return{operations:a,newSelection:l}}const o=Ut(i),s=ot(n,o);if(Sn(s)){const a=Sl(t),l=_i(jt(a)),u=l===0?Fl(o):zl(o.concat(String(l-1)));return{operations:r,newSelection:u}}else if(nr(s)){const a=Object.keys(s),l=Sl(t),u=jt(l),c=a.indexOf(u),f=a[c-1],d=c===0?Fl(o):zl(o.concat(f));return{operations:r,newSelection:d}}else throw new Error("Cannot create remove operations: parent must be an Object or Array")}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(e))}function hF(n,e){return qB(n,e,{before:(t,r,i)=>{if(zB(r)){const o=js(r.path);return{revertOperations:[...i,...$M(t,o)]}}if(vh(r)){const o=js(r.from);return{revertOperations:[...i,...$M(t,o)]}}return{document:t}}})}function $M(n,e){const t=Ut(e),r=jt(e),i=ot(n,t);if(nr(i)){const o=Object.keys(i);return Cg(o,r,!1).map(a=>gf(t,a))}return[]}function Eae(n,e){return n.flatMap(t=>{if(px(t)){const r=js(t.path);if(r.length>0){const i=[t];let o=Ut(r);for(;o.length>0&&!Zo(e,o);)i.unshift({op:"add",path:Ke(o),value:{}}),o=Ut(o);return i}}return t})}function Aae(n,e,t){const r=t!=null&&t.activeItem?n5(t.activeItem):void 0,i=e.findIndex(l=>Wt(r,n5(l))),o=i!==-1?i:(t==null?void 0:t.activeIndex)!==void 0&&(t==null?void 0:t.activeIndex)<e.length?t==null?void 0:t.activeIndex:e.length>0?0:-1,s=e.map((l,u)=>({...l,active:u===o})),a=s[o];return{items:s,itemsMap:t_(s,l=>Ke(l.path)),activeItem:a,activeIndex:o}}function Mae(n){const e=n.activeIndex<n.items.length-1?n.activeIndex+1:n.items.length>0?0:-1,t=n.items[e],r=n.items.map((i,o)=>({...i,active:o===e}));return{...n,items:r,itemsMap:t_(r,i=>Ke(i.path)),activeItem:t,activeIndex:e}}function Tae(n){const e=n.activeIndex>0?n.activeIndex-1:n.items.length-1,t=n.items[e],r=n.items.map((i,o)=>({...i,active:o===e}));return{...n,items:r,itemsMap:t_(r,i=>Ke(i.path)),activeItem:t,activeIndex:e}}function pF(n,e,t=1/0){const r=[],i=[];function o(a){r.length<t&&r.push(a)}function s(a,l){if(Sn(l)){const u=i.length;i.push("0");for(let c=0;c<l.length;c++)if(i[u]=String(c),s(a,l[c]),r.length>=t)return;i.pop()}else if(nr(l)){const u=Object.keys(l),c=i.length;i.push("");for(const f of u)if(i[c]=f,e5(f,a,i,Is.key,o),s(a,l[f]),r.length>=t)return;i.pop()}else e5(String(l),a,i,Is.value,o)}if(typeof n=="string"&&n!==""){const a=n.toLowerCase();s(a,e)}return r}function e5(n,e,t,r,i){const o=n.toLowerCase();let s=0,a=-1,l=-1;do l=o.indexOf(e,a),l!==-1&&(a=l+e.length,i({path:t.slice(0),field:r,fieldIndex:s,start:l,end:a}),s++);while(l!==-1)}function cC(n,e,t,r){return n.substring(0,t)+e+n.substring(r)}function t5(n,e,t){let r=n;return loe(t,i=>{r=cC(r,e,i.start,i.end)}),r}function Oae(n,e,t,r,i){const{field:o,path:s,start:a,end:l}=r;if(o===Is.key){const u=Ut(s),c=ot(n,u),f=jt(s),d=Object.keys(c),h=cC(f,t,a,l),p=Sg(u,d,f,h);return{newSelection:Sh(n,p),operations:p}}else if(o===Is.value){const u=ot(n,s);if(u===void 0)throw new Error(`Cannot replace: path not found ${Ke(s)}`);const c=typeof u=="string"?u:String(u),f=Ke(s),d=Bl(u,e.enforceStringMap,f,i),h=cC(c,t,a,l),p=[{op:"replace",path:Ke(s),value:d?h:ip(h,i)}];return{newSelection:Sh(n,p),operations:p}}else throw new Error(`Cannot replace: unknown type of search result field ${o}`)}function Dae(n,e,t,r,i){const o=pF(t,n,1/0),s=[];for(let u=0;u<o.length;u++){const c=o[u-1],f=o[u];u===0||f.field!==c.field||!Wt(f.path,c.path)?s.push({path:f.path,field:f.field,items:[f]}):jt(s).items.push(f)}s.sort((u,c)=>u.field!==c.field?u.field===Is.key?1:-1:c.path.length-u.path.length);let a=[],l=null;return s.forEach(u=>{const{field:c,path:f,items:d}=u;if(c===Is.key){const h=Ut(f),p=ot(n,h),m=jt(f),g=Object.keys(p),v=t5(m,r,d),b=Sg(h,g,m,v);a=a.concat(b),l=Sh(n,b)}else if(c===Is.value){const h=ot(n,f);if(h===void 0)throw new Error(`Cannot replace: path not found ${Ke(f)}`);const p=typeof h=="string"?h:String(h),m=Ke(f),g=Bl(h,e.enforceStringMap,m,i),v=t5(p,r,d),b=[{op:"replace",path:Ke(f),value:g?v:ip(v,i)}];a=a.concat(b),l=Sh(n,b)}else throw new Error(`Cannot replace: unknown type of search result field ${c}`)}),{operations:a,newSelection:l}}function Rae(n,e){const t=[];let r=0;for(const o of e){const s=n.slice(r,o.start);s!==""&&t.push({type:"normal",text:s,active:!1});const a=n.slice(o.start,o.end);t.push({type:"highlight",text:a,active:o.active}),r=o.end}const i=jt(e);return i&&i.end<n.length&&t.push({type:"normal",text:n.slice(i.end),active:!1}),t}function n5(n){return n.path.concat(n.field,String(n.fieldIndex))}function Pae(n,e){var r;const t=(r=n==null?void 0:n[e])==null?void 0:r.filter(i=>i.field===Is.key);if(!(!t||t.length===0))return t}function r5(n,e){var r;const t=(r=n==null?void 0:n[e])==null?void 0:r.filter(i=>i.field===Is.value);if(!(!t||t.length===0))return t}function i5(n,e,t){const r=n.slice();return r[3]=e[t],r}function Iae(n){let e,t=pf(n[3].text)+"",r;return{c(){e=B("span"),r=Se(t),C(e,"class","jse-highlight svelte-1c35ovg"),oe(e,"jse-active",n[3].active)},m(i,o){H(i,e,o),T(e,r)},p(i,o){o&1&&t!==(t=pf(i[3].text)+"")&&ze(r,t),o&1&&oe(e,"jse-active",i[3].active)},d(i){i&&j(e)}}}function Nae(n){let e=n[3].text+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&1&&e!==(e=r[3].text+"")&&ze(t,e)},d(r){r&&j(t)}}}function o5(n){let e;function t(o,s){return o[3].type==="normal"?Nae:Iae}let r=t(n),i=r(n);return{c(){i.c(),e=Ze()},m(o,s){i.m(o,s),H(o,e,s)},p(o,s){r===(r=t(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){i.d(o),o&&j(e)}}}function Bae(n){let e,t=n[0],r=[];for(let i=0;i<t.length;i+=1)r[i]=o5(i5(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Ze()},m(i,o){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,o);H(i,e,o)},p(i,[o]){if(o&1){t=i[0];let s;for(s=0;s<t.length;s+=1){const a=i5(i,t,s);r[s]?r[s].p(a,o):(r[s]=o5(a),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},i:pe,o:pe,d(i){rn(r,i),i&&j(e)}}}function Lae(n,e,t){let r,{text:i}=e,{searchResultItems:o}=e;return n.$$set=s=>{"text"in s&&t(1,i=s.text),"searchResultItems"in s&&t(2,o=s.searchResultItems)},n.$$.update=()=>{n.$$.dirty&6&&t(0,r=Rae(String(i),o))},[r,i,o]}class Fae extends ye{constructor(e){super(),be(this,e,Lae,Bae,Be,{text:1,searchResultItems:2})}}const mF=Fae;function zae(n){let e=pf(n[1].escapeValue(n[0]))+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&3&&e!==(e=pf(r[1].escapeValue(r[0]))+"")&&ze(t,e)},i:pe,o:pe,d(r){r&&j(t)}}}function jae(n){let e,t;return e=new mF({props:{text:n[1].escapeValue(n[0]),searchResultItems:n[3]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&3&&(o.text=r[1].escapeValue(r[0])),i&8&&(o.searchResultItems=r[3]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Hae(n){let e,t,r,i,o,s,a,l;const u=[jae,zae],c=[];function f(d,h){return d[3]?0:1}return t=f(n),r=c[t]=u[t](n),{c(){e=B("div"),r.c(),C(e,"role","button"),C(e,"tabindex","-1"),C(e,"data-type","selectable-value"),C(e,"class",i=qn(lC(n[0],n[2]))+" svelte-1ypq969"),C(e,"title",o=n[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(d,h){H(d,e,h),c[t].m(e,null),s=!0,a||(l=[le(e,"click",n[5]),le(e,"dblclick",n[6])],a=!0)},p(d,[h]){let p=t;t=f(d),t===p?c[t].p(d,h):(de(),D(c[p],1,1,()=>{c[p]=null}),he(),r=c[t],r?r.p(d,h):(r=c[t]=u[t](d),r.c()),x(r,1),r.m(e,null)),(!s||h&5&&i!==(i=qn(lC(d[0],d[2]))+" svelte-1ypq969"))&&C(e,"class",i),(!s||h&16&&o!==(o=d[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&C(e,"title",o)},i(d){s||(x(r),s=!0)},o(d){D(r),s=!1},d(d){d&&j(e),c[t].d(),a=!1,It(l)}}}function Vae(n,e,t){let r,{path:i}=e,{value:o}=e,{readOnly:s}=e,{normalization:a}=e,{parser:l}=e,{onSelect:u}=e,{searchResultItems:c}=e;function f(h){typeof o=="string"&&r&&h.ctrlKey&&(h.preventDefault(),h.stopPropagation(),window.open(o,"_blank"))}function d(h){s||(h.preventDefault(),u(Bt(i,!0)))}return n.$$set=h=>{"path"in h&&t(7,i=h.path),"value"in h&&t(0,o=h.value),"readOnly"in h&&t(8,s=h.readOnly),"normalization"in h&&t(1,a=h.normalization),"parser"in h&&t(2,l=h.parser),"onSelect"in h&&t(9,u=h.onSelect),"searchResultItems"in h&&t(3,c=h.searchResultItems)},n.$$.update=()=>{n.$$.dirty&1&&t(4,r=V2(o))},[o,a,l,c,r,f,d,i,s,u]}class Wae extends ye{constructor(e){super(),be(this,e,Vae,Hae,Rt,{path:7,value:0,readOnly:8,normalization:1,parser:2,onSelect:9,searchResultItems:3})}}const qae=Wae;function Uae(n){let e,t;return{c(){e=B("div"),t=Se(n[0]),C(e,"class","jse-tooltip svelte-1sftg37")},m(r,i){H(r,e,i),T(e,t)},p(r,[i]){i&1&&ze(t,r[0])},i:pe,o:pe,d(r){r&&j(e)}}}function Gae(n,e,t){let{text:r}=e;return n.$$set=i=>{"text"in i&&t(0,r=i.text)},[r]}class Kae extends ye{constructor(e){super(),be(this,e,Gae,Uae,Be,{text:0})}}const Jae=Kae;function zx(n,{text:e,openAbsolutePopup:t,closeAbsolutePopup:r}){let i;function o(){i=t(Jae,{text:e},{position:"top",width:10*e.length,offsetTop:3,anchor:n,closeOnOuterClick:!0})}function s(){r(i)}return n.addEventListener("mouseenter",o),n.addEventListener("mouseleave",s),{destroy(){n.removeEventListener("mouseenter",o),n.removeEventListener("mouseleave",s)}}}function Yae(n){let e,t,r,i,o,s;return t=new Jt({props:{data:Mse}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-timestamp svelte-1sqrs1u")},m(a,l){H(a,e,l),Q(t,e,null),i=!0,o||(s=Mn(r=zx.call(null,e,{text:n[0],...n[1]})),o=!0)},p(a,[l]){r&&dr(r.update)&&l&1&&r.update.call(null,{text:a[0],...a[1]})},i(a){i||(x(t.$$.fragment,a),i=!0)},o(a){D(t.$$.fragment,a),i=!1},d(a){a&&j(e),Z(t),o=!1,s()}}}function Xae(n,e,t){let r;const i=pr("absolute-popup");let{value:o}=e;return n.$$set=s=>{"value"in s&&t(2,o=s.value)},n.$$.update=()=>{n.$$.dirty&4&&t(0,r=`Time: ${new Date(o).toString()}`)},[r,i,o]}class Qae extends ye{constructor(e){super(),be(this,e,Xae,Yae,Rt,{value:2})}}const Zae=Qae;function $ae({path:n,value:e,readOnly:t,enforceString:r,searchResultItems:i,isEditing:o,parser:s,normalization:a,onPatch:l,onPasteJson:u,onSelect:c,onFind:f,findNextInside:d,focus:h}){const p=[];return!o&&_$(e)&&p.push({component:Wse,props:{path:n,value:e,readOnly:t,onPatch:l,focus:h}}),!o&&w$(e)&&p.push({component:Qse,props:{path:n,value:e,readOnly:t,onPatch:l,focus:h}}),o&&p.push({component:wae,props:{path:n,value:e,enforceString:r,parser:s,normalization:a,onPatch:l,onPasteJson:u,onSelect:c,onFind:f,findNextInside:d,focus:h}}),o||p.push({component:qae,props:{path:n,value:e,readOnly:t,parser:s,normalization:a,searchResultItems:i,onSelect:c}}),!o&&Y3(e)&&p.push({component:Zae,props:{value:e}}),p}const fC={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"]},_u={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},gF={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M160 0c-23.7 0-44.4 12.9-55.4 32L48 32C21.5 32 0 53.5 0 80L0 400c0 26.5 21.5 48 48 48l144 0 0-272c0-44.2 35.8-80 80-80l48 0 0-16c0-26.5-21.5-48-48-48l-56.6 0C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48l0 272 0 16c0 26.5 21.5 48 48 48l192 0c26.5 0 48-21.5 48-48l0-220.1c0-12.7-5.1-24.9-14.1-33.9l-67.9-67.9c-9-9-21.2-14.1-33.9-14.1L320 128l-48 0zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},ele={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]},tle={prefix:"fas",iconName:"scissors",icon:[512,512,[9984,9986,9988,"cut"],"f0c4","M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM64 112a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm48 240a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},Zd=tle,nle={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]},rle=nle,ile={prefix:"fas",iconName:"caret-left",icon:[256,512,[],"f0d9","M9.4 278.6c-12.5-12.5-12.5-32.8 0-45.3l128-128c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 256c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-128-128z"]},ole={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},s5=ole,sle={prefix:"fas",iconName:"chevron-up",icon:[512,512,[],"f077","M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},vF={prefix:"fas",iconName:"angle-right",icon:[320,512,[8250],"f105","M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]},ale={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4l-208 0c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]},lle=ale,a5={prefix:"fas",iconName:"caret-up",icon:[320,512,[],"f0d8","M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8l256 0c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]},o_={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},Ku={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]},s_={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7L336 192c-8.8 0-16-7.2-16-16l0-57.4c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},ule={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},$d={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},cle={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},jx=cle,fle={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]},Hx=fle,dle={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32l0 32L32 64C14.3 64 0 78.3 0 96s14.3 32 32 32l32 0 0 256c0 35.3 28.7 64 64 64l224 0 0-64-224 0 0-352zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-32 0 0-256c0-35.3-28.7-64-64-64L160 64l0 64 224 0 0 352z"]},hle=dle,ple={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},mle=ple,Ko={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]},gle={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"]},bF=gle,k1={prefix:"fas",iconName:"arrow-right-arrow-left",icon:[448,512,[8644,"exchange"],"f0ec","M438.6 150.6c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 96 32 96C14.3 96 0 110.3 0 128s14.3 32 32 32l306.7 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96zm-333.3 352c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 416 416 416c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96z"]},vle={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7 96 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 301.7 32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32l32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-160 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},a_=vle,ble={prefix:"fas",iconName:"angle-down",icon:[448,512,[8964],"f107","M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},yle={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},_le={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},Vx=_le,wle={prefix:"fas",iconName:"chevron-down",icon:[512,512,[],"f078","M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},Nu={prefix:"fas",iconName:"copy",icon:[448,512,[],"f0c5","M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z"]},Id={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},yF={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},l5=yF,xh=yF,kle={prefix:"fas",iconName:"rotate",icon:[512,512,[128260,"sync-alt"],"f2f1","M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"]},_F={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M288 448L64 448l0-224 64 0 0-64-64 0c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l224 0c35.3 0 64-28.7 64-64l0-64-64 0 0 64zm-64-96l224 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64L224 0c-35.3 0-64 28.7-64 64l0 224c0 35.3 28.7 64 64 64z"]},fm={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},Cle={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},jf=Cle,Bp={},C1={showWizard:!0,showOriginal:!0},Nb=Math.min,ef=Math.max,Bb=Math.round,S1=Math.floor,Ju=n=>({x:n,y:n}),Sle={left:"right",right:"left",bottom:"top",top:"bottom"},xle={start:"end",end:"start"};function u5(n,e,t){return ef(n,Nb(e,t))}function l_(n,e){return typeof n=="function"?n(e):n}function vf(n){return n.split("-")[0]}function u_(n){return n.split("-")[1]}function wF(n){return n==="x"?"y":"x"}function kF(n){return n==="y"?"height":"width"}function Eh(n){return["top","bottom"].includes(vf(n))?"y":"x"}function CF(n){return wF(Eh(n))}function Ele(n,e,t){t===void 0&&(t=!1);const r=u_(n),i=CF(n),o=kF(i);let s=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=Lb(s)),[s,Lb(s)]}function Ale(n){const e=Lb(n);return[dC(n),e,dC(e)]}function dC(n){return n.replace(/start|end/g,e=>xle[e])}function Mle(n,e,t){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function Tle(n,e,t,r){const i=u_(n);let o=Mle(vf(n),t==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(dC)))),o}function Lb(n){return n.replace(/left|right|bottom|top/g,e=>Sle[e])}function Ole(n){return{top:0,right:0,bottom:0,left:0,...n}}function Dle(n){return typeof n!="number"?Ole(n):{top:n,right:n,bottom:n,left:n}}function Fb(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function c5(n,e,t){let{reference:r,floating:i}=n;const o=Eh(e),s=CF(e),a=kF(s),l=vf(e),u=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(u_(e)){case"start":h[s]-=d*(t&&u?-1:1);break;case"end":h[s]+=d*(t&&u?-1:1);break}return h}const Rle=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=t,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:f}=c5(u,r,l),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:b,y:w,data:_,reset:y}=await v({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:n,floating:e}});c=b??c,f=w??f,h={...h,[g]:{...h[g],..._}},y&&p<=50&&(p++,typeof y=="object"&&(y.placement&&(d=y.placement),y.rects&&(u=y.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:i}):y.rects),{x:c,y:f}=c5(u,d,l)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function SF(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=l_(e,n),p=Dle(h),g=a[d?f==="floating"?"reference":"floating":f],v=Fb(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(g)))==null||t?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),b=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},y=Fb(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:l}):b);return{top:(v.top-y.top+p.top)/_.y,bottom:(y.bottom-v.bottom+p.bottom)/_.y,left:(v.left-y.left+p.left)/_.x,right:(y.right-v.right+p.right)/_.x}}const Ple=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=l_(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const v=vf(i),b=Eh(a),w=vf(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),y=d||(w||!m?[Lb(a)]:Ale(a)),k=p!=="none";!d&&k&&y.push(...Tle(a,m,p,_));const S=[a,...y],E=await SF(e,g),M=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&M.push(E[v]),f){const A=Ele(i,s,_);M.push(E[A[0]],E[A[1]])}if(R=[...R,{placement:i,overflows:M}],!M.every(A=>A<=0)){var O,I;const A=(((O=o.flip)==null?void 0:O.index)||0)+1,N=S[A];if(N)return{data:{index:A,overflows:R},reset:{placement:N}};let F=(I=R.filter(V=>V.overflows[0]<=0).sort((V,W)=>V.overflows[1]-W.overflows[1])[0])==null?void 0:I.placement;if(!F)switch(h){case"bestFit":{var P;const V=(P=R.filter(W=>{if(k){const L=Eh(W.placement);return L===b||L==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(L=>L>0).reduce((L,z)=>L+z,0)]).sort((W,L)=>W[1]-L[1])[0])==null?void 0:P[0];V&&(F=V);break}case"initialPlacement":F=a;break}if(i!==F)return{reset:{placement:F}}}return{}}}};async function Ile(n,e){const{placement:t,platform:r,elements:i}=n,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=vf(t),a=u_(t),l=Eh(t)==="y",u=["left","top"].includes(s)?-1:1,c=o&&l?-1:1,f=l_(e,n);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:d*u}:{x:d*u,y:h*c}}const Nle=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await Ile(e,n);return s===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},Ble=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:v,y:b}=g;return{x:v,y:b}}},...l}=l_(n,e),u={x:t,y:r},c=await SF(e,l),f=Eh(vf(i)),d=wF(f);let h=u[d],p=u[f];if(o){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=h+c[g],w=h-c[v];h=u5(b,h,w)}if(s){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=p+c[g],w=p-c[v];p=u5(b,p,w)}const m=a.fn({...e,[d]:h,[f]:p});return{...m,data:{x:m.x-t,y:m.y-r,enabled:{[d]:o,[f]:s}}}}}};function c_(){return typeof window<"u"}function cp(n){return xF(n)?(n.nodeName||"").toLowerCase():"#document"}function Eo(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ka(n){var e;return(e=(xF(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function xF(n){return c_()?n instanceof Node||n instanceof Eo(n).Node:!1}function Vs(n){return c_()?n instanceof Element||n instanceof Eo(n).Element:!1}function La(n){return c_()?n instanceof HTMLElement||n instanceof Eo(n).HTMLElement:!1}function f5(n){return!c_()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Eo(n).ShadowRoot}function xg(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ws(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function Lle(n){return["table","td","th"].includes(cp(n))}function f_(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Wx(n){const e=qx(),t=Vs(n)?Ws(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Fle(n){let e=Yu(n);for(;La(e)&&!Ah(e);){if(Wx(e))return e;if(f_(e))return null;e=Yu(e)}return null}function qx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ah(n){return["html","body","#document"].includes(cp(n))}function Ws(n){return Eo(n).getComputedStyle(n)}function d_(n){return Vs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Yu(n){if(cp(n)==="html")return n;const e=n.assignedSlot||n.parentNode||f5(n)&&n.host||Ka(n);return f5(e)?e.host:e}function EF(n){const e=Yu(n);return Ah(e)?n.ownerDocument?n.ownerDocument.body:n.body:La(e)&&xg(e)?e:EF(e)}function dm(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=EF(n),o=i===((r=n.ownerDocument)==null?void 0:r.body),s=Eo(i);if(o){const a=hC(s);return e.concat(s,s.visualViewport||[],xg(i)?i:[],a&&t?dm(a):[])}return e.concat(i,dm(i,[],t))}function hC(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function AF(n){const e=Ws(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=La(n),o=i?n.offsetWidth:t,s=i?n.offsetHeight:r,a=Bb(t)!==o||Bb(r)!==s;return a&&(t=o,r=s),{width:t,height:r,$:a}}function Ux(n){return Vs(n)?n:n.contextElement}function eh(n){const e=Ux(n);if(!La(e))return Ju(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:o}=AF(e);let s=(o?Bb(t.width):t.width)/r,a=(o?Bb(t.height):t.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const zle=Ju(0);function MF(n){const e=Eo(n);return!qx()||!e.visualViewport?zle:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jle(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Eo(n)?!1:e}function bf(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),o=Ux(n);let s=Ju(1);e&&(r?Vs(r)&&(s=eh(r)):s=eh(n));const a=jle(o,t,r)?MF(o):Ju(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(o){const d=Eo(o),h=r&&Vs(r)?Eo(r):r;let p=d,m=hC(p);for(;m&&r&&h!==p;){const g=eh(m),v=m.getBoundingClientRect(),b=Ws(m),w=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,_=v.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,f*=g.y,l+=w,u+=_,p=Eo(m),m=hC(p)}}return Fb({width:c,height:f,x:l,y:u})}function Hle(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const o=i==="fixed",s=Ka(r),a=e?f_(e.floating):!1;if(r===s||a&&o)return t;let l={scrollLeft:0,scrollTop:0},u=Ju(1);const c=Ju(0),f=La(r);if((f||!f&&!o)&&((cp(r)!=="body"||xg(s))&&(l=d_(r)),La(r))){const d=bf(r);u=eh(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x,y:t.y*u.y-l.scrollTop*u.y+c.y}}function Vle(n){return Array.from(n.getClientRects())}function pC(n,e){const t=d_(n).scrollLeft;return e?e.left+t:bf(Ka(n)).left+t}function Wle(n){const e=Ka(n),t=d_(n),r=n.ownerDocument.body,i=ef(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=ef(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-t.scrollLeft+pC(n);const a=-t.scrollTop;return Ws(r).direction==="rtl"&&(s+=ef(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function qle(n,e){const t=Eo(n),r=Ka(n),i=t.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=qx();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function Ule(n,e){const t=bf(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,o=La(n)?eh(n):Ju(1),s=n.clientWidth*o.x,a=n.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function d5(n,e,t){let r;if(e==="viewport")r=qle(n,t);else if(e==="document")r=Wle(Ka(n));else if(Vs(e))r=Ule(e,t);else{const i=MF(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return Fb(r)}function TF(n,e){const t=Yu(n);return t===e||!Vs(t)||Ah(t)?!1:Ws(t).position==="fixed"||TF(t,e)}function Gle(n,e){const t=e.get(n);if(t)return t;let r=dm(n,[],!1).filter(a=>Vs(a)&&cp(a)!=="body"),i=null;const o=Ws(n).position==="fixed";let s=o?Yu(n):n;for(;Vs(s)&&!Ah(s);){const a=Ws(s),l=Wx(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||xg(s)&&!l&&TF(n,s))?r=r.filter(c=>c!==s):i=a,s=Yu(s)}return e.set(n,r),r}function Kle(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const s=[...t==="clippingAncestors"?f_(e)?[]:Gle(e,this._c):[].concat(t),r],a=s[0],l=s.reduce((u,c)=>{const f=d5(e,c,i);return u.top=ef(f.top,u.top),u.right=Nb(f.right,u.right),u.bottom=Nb(f.bottom,u.bottom),u.left=ef(f.left,u.left),u},d5(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Jle(n){const{width:e,height:t}=AF(n);return{width:e,height:t}}function Yle(n,e,t){const r=La(e),i=Ka(e),o=t==="fixed",s=bf(n,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=Ju(0);if(r||!r&&!o)if((cp(e)!=="body"||xg(i))&&(a=d_(e)),r){const h=bf(e,!0,o,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=pC(i));let u=0,c=0;if(i&&!r&&!o){const h=i.getBoundingClientRect();c=h.top+a.scrollTop,u=h.left+a.scrollLeft-pC(i,h)}const f=s.left+a.scrollLeft-l.x-u,d=s.top+a.scrollTop-l.y-c;return{x:f,y:d,width:s.width,height:s.height}}function Gw(n){return Ws(n).position==="static"}function h5(n,e){if(!La(n)||Ws(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ka(n)===t&&(t=t.ownerDocument.body),t}function OF(n,e){const t=Eo(n);if(f_(n))return t;if(!La(n)){let i=Yu(n);for(;i&&!Ah(i);){if(Vs(i)&&!Gw(i))return i;i=Yu(i)}return t}let r=h5(n,e);for(;r&&Lle(r)&&Gw(r);)r=h5(r,e);return r&&Ah(r)&&Gw(r)&&!Wx(r)?t:r||Fle(n)||t}const Xle=async function(n){const e=this.getOffsetParent||OF,t=this.getDimensions,r=await t(n.floating);return{reference:Yle(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Qle(n){return Ws(n).direction==="rtl"}const Zle={convertOffsetParentRelativeRectToViewportRelativeRect:Hle,getDocumentElement:Ka,getClippingRect:Kle,getOffsetParent:OF,getElementRects:Xle,getClientRects:Vle,getDimensions:Jle,getScale:eh,isElement:Vs,isRTL:Qle};function $le(n,e){let t=null,r;const i=Ka(n);function o(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:u,top:c,width:f,height:d}=n.getBoundingClientRect();if(a||e(),!f||!d)return;const h=S1(c),p=S1(i.clientWidth-(u+f)),m=S1(i.clientHeight-(c+d)),g=S1(u),b={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ef(0,Nb(1,l))||1};let w=!0;function _(y){const k=y[0].intersectionRatio;if(k!==l){if(!w)return s();k?s(!1,k):r=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{t=new IntersectionObserver(_,{...b,root:i.ownerDocument})}catch{t=new IntersectionObserver(_,b)}t.observe(n)}return s(!0),o}function eue(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Ux(n),c=i||o?[...u?dm(u):[],...dm(e)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",t,{passive:!0}),o&&v.addEventListener("resize",t)});const f=u&&a?$le(u,t):null;let d=-1,h=null;s&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),t()}),u&&!l&&h.observe(u),h.observe(e));let p,m=l?bf(n):null;l&&g();function g(){const v=bf(n);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&t(),m=v,p=requestAnimationFrame(g)}return t(),()=>{var v;c.forEach(b=>{i&&b.removeEventListener("scroll",t),o&&b.removeEventListener("resize",t)}),f==null||f(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const tue=Nle,nue=Ble,rue=Ple,iue=(n,e,t)=>{const r=new Map,i={platform:Zle,...t},o={...i.platform,_c:r};return Rle(n,e,{...i,platform:o})};function oue(n){let e,t;const r={autoUpdate:!0};let i=n;const o=c=>({...r,...n||{},...c||{}}),s=c=>{e&&t&&(i=o(c),iue(e,t,i).then(f=>{Object.assign(t.style,{position:f.strategy,left:`${f.x}px`,top:`${f.y}px`}),i!=null&&i.onComputed&&i.onComputed(f)}))},a=c=>{if("subscribe"in c)return u(c),{};e=c,s()},l=(c,f)=>{let d;t=c,i=o(f),setTimeout(()=>s(f),0),s(f);const h=()=>{d&&(d(),d=void 0)},p=({autoUpdate:m}=i||{})=>{h(),m!==!1&&dn().then(()=>eue(e,t,()=>s(i),m===!0?{}:m))};return d=p(),{update(m){s(m),d=p(m)},destroy(){h()}}},u=c=>{const f=c.subscribe(d=>{e===void 0?(e=d,s()):(Object.assign(e,d),s())});Kr(f)};return[a,l,s]}function sue({loadOptions:n,filterText:e,items:t,multiple:r,value:i,itemId:o,groupBy:s,filterSelectedItems:a,itemFilter:l,convertStringItemsToObjects:u,filterGroupedItems:c,label:f}){if(t&&n)return t;if(!t)return[];t&&t.length>0&&typeof t[0]!="object"&&(t=u(t));let d=t.filter(h=>{let p=l(h[f],e,h);return p&&r&&(i!=null&&i.length)&&(p=!i.some(m=>a?m[o]===h[o]:!1)),p});return s&&(d=c(d)),d}async function aue({dispatch:n,loadOptions:e,convertStringItemsToObjects:t,filterText:r}){let i=await e(r).catch(o=>{console.warn("svelte-select loadOptions error :>> ",o),n("error",{type:"loadOptions",details:o})});if(i&&!i.cancelled)return i?(i&&i.length>0&&typeof i[0]!="object"&&(i=t(i)),n("loaded",{items:i})):i=[],{filteredItems:i,loading:!1,focused:!0,listOpen:!0}}function lue(n){let e,t;return{c(){e=Ti("svg"),t=Ti("path"),C(t,"fill","currentColor"),C(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),C(e,"width","100%"),C(e,"height","100%"),C(e,"viewBox","0 0 20 20"),C(e,"focusable","false"),C(e,"aria-hidden","true"),C(e,"class","svelte-qbd276")},m(r,i){H(r,e,i),T(e,t)},p:pe,i:pe,o:pe,d(r){r&&j(e)}}}class uue extends ye{constructor(e){super(),be(this,e,null,lue,Be,{})}}function cue(n){let e,t;return{c(){e=Ti("svg"),t=Ti("path"),C(t,"fill","currentColor"),C(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),C(e,"width","100%"),C(e,"height","100%"),C(e,"viewBox","-2 -2 50 50"),C(e,"focusable","false"),C(e,"aria-hidden","true"),C(e,"role","presentation"),C(e,"class","svelte-whdbu1")},m(r,i){H(r,e,i),T(e,t)},p:pe,i:pe,o:pe,d(r){r&&j(e)}}}class zb extends ye{constructor(e){super(),be(this,e,null,cue,Be,{})}}function fue(n){let e,t;return{c(){e=Ti("svg"),t=Ti("circle"),C(t,"class","circle_path svelte-1p3nqvd"),C(t,"cx","50"),C(t,"cy","50"),C(t,"r","20"),C(t,"fill","none"),C(t,"stroke","currentColor"),C(t,"stroke-width","5"),C(t,"stroke-miterlimit","10"),C(e,"class","loading svelte-1p3nqvd"),C(e,"viewBox","25 25 50 50")},m(r,i){H(r,e,i),T(e,t)},p:pe,i:pe,o:pe,d(r){r&&j(e)}}}class due extends ye{constructor(e){super(),be(this,e,null,fue,Be,{})}}const hue=n=>({value:n[0]&8}),p5=n=>({value:n[3]}),pue=n=>({value:n[0]&8}),m5=n=>({value:n[3]}),mue=n=>({listOpen:n[0]&64}),g5=n=>({listOpen:n[6]}),gue=n=>({}),v5=n=>({}),vue=n=>({}),b5=n=>({}),bue=n=>({selection:n[0]&8}),y5=n=>({selection:n[3]});function _5(n,e,t){const r=n.slice();return r[126]=e[t],r[128]=t,r}const yue=n=>({}),w5=n=>({}),_ue=n=>({selection:n[0]&8}),k5=n=>({selection:n[126],index:n[128]}),wue=n=>({}),C5=n=>({}),kue=n=>({}),S5=n=>({}),Cue=n=>({}),x5=n=>({});function E5(n,e,t){const r=n.slice();return r[126]=e[t],r[128]=t,r}const Sue=n=>({item:n[0]&16777216}),A5=n=>({item:n[126],index:n[128]}),xue=n=>({filteredItems:n[0]&16777216}),M5=n=>({filteredItems:n[24]}),Eue=n=>({}),T5=n=>({});function O5(n){let e,t,r,i,o,s,a,l,u=n[50]["list-prepend"]&&D5(n);const c=[Tue,Mue,Aue],f=[];function d(p,m){return p[50].list?0:p[24].length>0?1:p[19]?-1:2}~(r=d(n))&&(i=f[r]=c[r](n));let h=n[50]["list-append"]&&P5(n);return{c(){e=B("div"),u&&u.c(),t=K(),i&&i.c(),o=K(),h&&h.c(),C(e,"class","svelte-select-list svelte-82qwg8"),C(e,"role","none"),oe(e,"prefloat",n[28])},m(p,m){H(p,e,m),u&&u.m(e,null),T(e,t),~r&&f[r].m(e,null),T(e,o),h&&h.m(e,null),n[91](e),s=!0,a||(l=[Mn(n[49].call(null,e)),le(e,"scroll",n[41]),le(e,"pointerup",Fs(Pa(n[85]))),le(e,"mousedown",Fs(Pa(n[86])))],a=!0)},p(p,m){p[50]["list-prepend"]?u?(u.p(p,m),m[1]&524288&&x(u,1)):(u=D5(p),u.c(),x(u,1),u.m(e,t)):u&&(de(),D(u,1,1,()=>{u=null}),he());let g=r;r=d(p),r===g?~r&&f[r].p(p,m):(i&&(de(),D(f[g],1,1,()=>{f[g]=null}),he()),~r?(i=f[r],i?i.p(p,m):(i=f[r]=c[r](p),i.c()),x(i,1),i.m(e,o)):i=null),p[50]["list-append"]?h?(h.p(p,m),m[1]&524288&&x(h,1)):(h=P5(p),h.c(),x(h,1),h.m(e,null)):h&&(de(),D(h,1,1,()=>{h=null}),he()),(!s||m[0]&268435456)&&oe(e,"prefloat",p[28])},i(p){s||(x(u),x(i),x(h),s=!0)},o(p){D(u),D(i),D(h),s=!1},d(p){p&&j(e),u&&u.d(),~r&&f[r].d(),h&&h.d(),n[91](null),a=!1,It(l)}}}function D5(n){let e;const t=n[83]["list-prepend"],r=Je(t,n,n[82],T5);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o[2]&1048576)&&Xe(r,t,i,i[82],e?Ye(t,i[82],o,Eue):Qe(i[82]),T5)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function Aue(n){let e;const t=n[83].empty,r=Je(t,n,n[82],x5),i=r||Oue();return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r&&r.p&&(!e||s[2]&1048576)&&Xe(r,t,o,o[82],e?Ye(t,o[82],s,Cue):Qe(o[82]),x5)},i(o){e||(x(i,o),e=!0)},o(o){D(i,o),e=!1},d(o){i&&i.d(o)}}}function Mue(n){let e,t,r=n[24],i=[];for(let s=0;s<r.length;s+=1)i[s]=R5(E5(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a[0]&1627402376|a[1]&28672|a[2]&1048576){r=s[24];let l;for(l=0;l<r.length;l+=1){const u=E5(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=R5(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function Tue(n){let e;const t=n[83].list,r=Je(t,n,n[82],M5);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o[0]&16777216|o[2]&1048576)&&Xe(r,t,i,i[82],e?Ye(t,i[82],o,xue):Qe(i[82]),M5)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function Oue(n){let e;return{c(){e=B("div"),e.textContent="No options",C(e,"class","empty svelte-82qwg8")},m(t,r){H(t,e,r)},p:pe,d(t){t&&j(e)}}}function Due(n){var r;let e=((r=n[126])==null?void 0:r[n[12]])+"",t;return{c(){t=Se(e)},m(i,o){H(i,t,o)},p(i,o){var s;o[0]&16781312&&e!==(e=((s=i[126])==null?void 0:s[i[12]])+"")&&ze(t,e)},d(i){i&&j(t)}}}function R5(n){let e,t,r,i,o,s,a,l;const u=n[83].item,c=Je(u,n,n[82],A5),f=c||Due(n);function d(){return n[88](n[128])}function h(){return n[89](n[128])}function p(){return n[90](n[126],n[128])}return{c(){var m;e=B("div"),t=B("div"),f&&f.c(),o=K(),C(t,"class","item svelte-82qwg8"),oe(t,"list-group-title",n[126].groupHeader),oe(t,"active",n[45](n[126],n[3],n[13])),oe(t,"first",Wue(n[128])),oe(t,"hover",n[7]===n[128]),oe(t,"group-item",n[126].groupItem),oe(t,"not-selectable",((m=n[126])==null?void 0:m.selectable)===!1),C(e,"class","list-item svelte-82qwg8"),C(e,"tabindex","-1"),C(e,"role","none")},m(m,g){H(m,e,g),T(e,t),f&&f.m(t,null),T(e,o),s=!0,a||(l=[Mn(r=n[46].call(null,t,{scroll:n[45](n[126],n[3],n[13]),listDom:n[30]})),Mn(i=n[47].call(null,t,{scroll:n[29]===n[128],listDom:n[30]})),le(e,"mouseover",d),le(e,"focus",h),le(e,"click",Fs(p)),le(e,"keydown",Fs(Pa(n[87])))],a=!0)},p(m,g){var v;n=m,c?c.p&&(!s||g[0]&16777216|g[2]&1048576)&&Xe(c,u,n,n[82],s?Ye(u,n[82],g,Sue):Qe(n[82]),A5):f&&f.p&&(!s||g[0]&16781312)&&f.p(n,s?g:[-1,-1,-1,-1,-1]),r&&dr(r.update)&&g[0]&1090527240&&r.update.call(null,{scroll:n[45](n[126],n[3],n[13]),listDom:n[30]}),i&&dr(i.update)&&g[0]&1610612736&&i.update.call(null,{scroll:n[29]===n[128],listDom:n[30]}),(!s||g[0]&16777216)&&oe(t,"list-group-title",n[126].groupHeader),(!s||g[0]&16785416|g[1]&16384)&&oe(t,"active",n[45](n[126],n[3],n[13])),(!s||g[0]&128)&&oe(t,"hover",n[7]===n[128]),(!s||g[0]&16777216)&&oe(t,"group-item",n[126].groupItem),(!s||g[0]&16777216)&&oe(t,"not-selectable",((v=n[126])==null?void 0:v.selectable)===!1)},i(m){s||(x(f,m),s=!0)},o(m){D(f,m),s=!1},d(m){m&&j(e),f&&f.d(m),a=!1,It(l)}}}function P5(n){let e;const t=n[83]["list-append"],r=Je(t,n,n[82],S5);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o[2]&1048576)&&Xe(r,t,i,i[82],e?Ye(t,i[82],o,kue):Qe(i[82]),S5)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function I5(n){let e,t,r,i,o;return{c(){e=B("span"),t=Se(n[32]),r=K(),i=B("span"),o=Se(n[31]),C(e,"id","aria-selection"),C(e,"class","svelte-82qwg8"),C(i,"id","aria-context"),C(i,"class","svelte-82qwg8")},m(s,a){H(s,e,a),T(e,t),H(s,r,a),H(s,i,a),T(i,o)},p(s,a){a[1]&2&&ze(t,s[32]),a[1]&1&&ze(o,s[31])},d(s){s&&j(e),s&&j(r),s&&j(i)}}}function N5(n){let e,t,r,i;const o=[Pue,Rue],s=[];function a(l,u){return l[9]?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=Ze()},m(l,u){s[e].m(l,u),H(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?s[e].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r))},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){s[e].d(l),l&&j(r)}}}function Rue(n){let e,t;const r=n[83].selection,i=Je(r,n,n[82],y5),o=i||Iue(n);return{c(){e=B("div"),o&&o.c(),C(e,"class","selected-item svelte-82qwg8"),oe(e,"hide-selected-item",n[35])},m(s,a){H(s,e,a),o&&o.m(e,null),t=!0},p(s,a){i?i.p&&(!t||a[0]&8|a[2]&1048576)&&Xe(i,r,s,s[82],t?Ye(r,s[82],a,bue):Qe(s[82]),y5):o&&o.p&&(!t||a[0]&4104)&&o.p(s,t?a:[-1,-1,-1,-1,-1]),(!t||a[1]&16)&&oe(e,"hide-selected-item",s[35])},i(s){t||(x(o,s),t=!0)},o(s){D(o,s),t=!1},d(s){s&&j(e),o&&o.d(s)}}}function Pue(n){let e,t,r=n[3],i=[];for(let s=0;s<r.length;s+=1)i[s]=L5(_5(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a[0]&67116040|a[1]&32|a[2]&1048576){r=s[3];let l;for(l=0;l<r.length;l+=1){const u=_5(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=L5(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function Iue(n){let e=n[3][n[12]]+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i[0]&4104&&e!==(e=r[3][r[12]]+"")&&ze(t,e)},d(r){r&&j(t)}}}function Nue(n){let e=n[126][n[12]]+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i[0]&4104&&e!==(e=r[126][r[12]]+"")&&ze(t,e)},d(r){r&&j(t)}}}function B5(n){let e,t,r,i;const o=n[83]["multi-clear-icon"],s=Je(o,n,n[82],w5),a=s||Bue();function l(){return n[92](n[128])}return{c(){e=B("div"),a&&a.c(),C(e,"class","multi-item-clear svelte-82qwg8")},m(u,c){H(u,e,c),a&&a.m(e,null),t=!0,r||(i=le(e,"pointerup",Fs(Pa(l))),r=!0)},p(u,c){n=u,s&&s.p&&(!t||c[2]&1048576)&&Xe(s,o,n,n[82],t?Ye(o,n[82],c,yue):Qe(n[82]),w5)},i(u){t||(x(a,u),t=!0)},o(u){D(a,u),t=!1},d(u){u&&j(e),a&&a.d(u),r=!1,i()}}}function Bue(n){let e,t;return e=new zb({}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function L5(n){let e,t,r,i,o,s,a;const l=n[83].selection,u=Je(l,n,n[82],k5),c=u||Nue(n);let f=!n[11]&&!n[10]&&zb&&B5(n);function d(){return n[93](n[128])}return{c(){e=B("div"),t=B("span"),c&&c.c(),r=K(),f&&f.c(),i=K(),C(t,"class","multi-item-text svelte-82qwg8"),C(e,"class","multi-item svelte-82qwg8"),C(e,"role","none"),oe(e,"active",n[26]===n[128]),oe(e,"disabled",n[11])},m(h,p){H(h,e,p),T(e,t),c&&c.m(t,null),T(e,r),f&&f.m(e,null),T(e,i),o=!0,s||(a=[le(e,"click",Pa(d)),le(e,"keydown",Fs(Pa(n[84])))],s=!0)},p(h,p){n=h,u?u.p&&(!o||p[0]&8|p[2]&1048576)&&Xe(u,l,n,n[82],o?Ye(l,n[82],p,_ue):Qe(n[82]),k5):c&&c.p&&(!o||p[0]&4104)&&c.p(n,o?p:[-1,-1,-1,-1,-1]),!n[11]&&!n[10]&&zb?f?(f.p(n,p),p[0]&3072&&x(f,1)):(f=B5(n),f.c(),x(f,1),f.m(e,i)):f&&(de(),D(f,1,1,()=>{f=null}),he()),(!o||p[0]&67108864)&&oe(e,"active",n[26]===n[128]),(!o||p[0]&2048)&&oe(e,"disabled",n[11])},i(h){o||(x(c,h),x(f),o=!0)},o(h){D(c,h),D(f),o=!1},d(h){h&&j(e),c&&c.d(h),f&&f.d(),s=!1,It(a)}}}function F5(n){let e,t;const r=n[83]["loading-icon"],i=Je(r,n,n[82],b5),o=i||Lue();return{c(){e=B("div"),o&&o.c(),C(e,"class","icon loading svelte-82qwg8"),C(e,"aria-hidden","true")},m(s,a){H(s,e,a),o&&o.m(e,null),t=!0},p(s,a){i&&i.p&&(!t||a[2]&1048576)&&Xe(i,r,s,s[82],t?Ye(r,s[82],a,vue):Qe(s[82]),b5)},i(s){t||(x(o,s),t=!0)},o(s){D(o,s),t=!1},d(s){s&&j(e),o&&o.d(s)}}}function Lue(n){let e,t;return e=new due({}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function z5(n){let e,t,r,i;const o=n[83]["clear-icon"],s=Je(o,n,n[82],v5),a=s||Fue();return{c(){e=B("button"),a&&a.c(),C(e,"type","button"),C(e,"class","icon clear-select svelte-82qwg8")},m(l,u){H(l,e,u),a&&a.m(e,null),t=!0,r||(i=le(e,"click",n[22]),r=!0)},p(l,u){s&&s.p&&(!t||u[2]&1048576)&&Xe(s,o,l,l[82],t?Ye(o,l[82],u,gue):Qe(l[82]),v5)},i(l){t||(x(a,l),t=!0)},o(l){D(a,l),t=!1},d(l){l&&j(e),a&&a.d(l),r=!1,i()}}}function Fue(n){let e,t;return e=new zb({}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function j5(n){let e,t;const r=n[83]["chevron-icon"],i=Je(r,n,n[82],g5),o=i||zue();return{c(){e=B("div"),o&&o.c(),C(e,"class","icon chevron svelte-82qwg8"),C(e,"aria-hidden","true")},m(s,a){H(s,e,a),o&&o.m(e,null),t=!0},p(s,a){i&&i.p&&(!t||a[0]&64|a[2]&1048576)&&Xe(i,r,s,s[82],t?Ye(r,s[82],a,mue):Qe(s[82]),g5)},i(s){t||(x(o,s),t=!0)},o(s){D(o,s),t=!1},d(s){s&&j(e),o&&o.d(s)}}}function zue(n){let e,t;return e=new uue({}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function jue(n){let e,t;return{c(){e=B("input"),C(e,"name",n[8]),C(e,"type","hidden"),e.value=t=n[3]?JSON.stringify(n[3]):null,C(e,"class","svelte-82qwg8")},m(r,i){H(r,e,i)},p(r,i){i[0]&256&&C(e,"name",r[8]),i[0]&8&&t!==(t=r[3]?JSON.stringify(r[3]):null)&&(e.value=t)},d(r){r&&j(e)}}}function H5(n){let e;const t=n[83].required,r=Je(t,n,n[82],p5),i=r||Hue();return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r&&r.p&&(!e||s[0]&8|s[2]&1048576)&&Xe(r,t,o,o[82],e?Ye(t,o[82],s,hue):Qe(o[82]),p5)},i(o){e||(x(i,o),e=!0)},o(o){D(i,o),e=!1},d(o){i&&i.d(o)}}}function Hue(n){let e;return{c(){e=B("select"),C(e,"class","required svelte-82qwg8"),e.required=!0,C(e,"tabindex","-1"),C(e,"aria-hidden","true")},m(t,r){H(t,e,r)},p:pe,d(t){t&&j(e)}}}function Vue(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y=n[6]&&O5(n),k=n[2]&&I5(n);const S=n[83].prepend,E=Je(S,n,n[82],C5);let M=n[25]&&N5(n),R=[{readOnly:c=!n[17]},n[27],{placeholder:n[33]},{style:n[18]},{disabled:n[11]}],O={};for(let L=0;L<R.length;L+=1)O=Te(O,R[L]);let I=n[5]&&F5(n),P=n[34]&&z5(n),A=n[20]&&j5(n);const N=n[83]["input-hidden"],F=Je(N,n,n[82],m5),V=F||jue(n);let W=n[16]&&(!n[3]||n[3].length===0)&&H5(n);return{c(){e=B("div"),y&&y.c(),t=K(),r=B("span"),k&&k.c(),i=K(),o=B("div"),E&&E.c(),s=K(),a=B("div"),M&&M.c(),l=K(),u=B("input"),f=K(),d=B("div"),I&&I.c(),h=K(),P&&P.c(),p=K(),A&&A.c(),m=K(),V&&V.c(),g=K(),W&&W.c(),C(r,"aria-live","polite"),C(r,"aria-atomic","false"),C(r,"aria-relevant","additions text"),C(r,"class","a11y-text svelte-82qwg8"),C(o,"class","prepend svelte-82qwg8"),Gn(u,O),oe(u,"svelte-82qwg8",!0),C(a,"class","value-container svelte-82qwg8"),C(d,"class","indicators svelte-82qwg8"),C(e,"class",v="svelte-select "+n[21]+" svelte-82qwg8"),C(e,"style",n[14]),C(e,"role","none"),oe(e,"multi",n[9]),oe(e,"disabled",n[11]),oe(e,"focused",n[2]),oe(e,"list-open",n[6]),oe(e,"show-chevron",n[20]),oe(e,"error",n[15])},m(L,z){H(L,e,z),y&&y.m(e,null),T(e,t),T(e,r),k&&k.m(r,null),T(e,i),T(e,o),E&&E.m(o,null),T(e,s),T(e,a),M&&M.m(a,null),T(a,l),T(a,u),u.autofocus&&u.focus(),n[94](u),In(u,n[4]),T(e,f),T(e,d),I&&I.m(d,null),T(d,h),P&&P.m(d,null),T(d,p),A&&A.m(d,null),T(e,m),V&&V.m(e,null),T(e,g),W&&W.m(e,null),n[96](e),b=!0,w||(_=[le(window,"click",n[42]),le(window,"keydown",n[37]),le(u,"keydown",n[37]),le(u,"blur",n[39]),le(u,"focus",n[38]),le(u,"input",n[95]),le(e,"pointerup",Pa(n[40])),Mn(n[48].call(null,e))],w=!0)},p(L,z){L[6]?y?(y.p(L,z),z[0]&64&&x(y,1)):(y=O5(L),y.c(),x(y,1),y.m(e,t)):y&&(de(),D(y,1,1,()=>{y=null}),he()),L[2]?k?k.p(L,z):(k=I5(L),k.c(),k.m(r,null)):k&&(k.d(1),k=null),E&&E.p&&(!b||z[2]&1048576)&&Xe(E,S,L,L[82],b?Ye(S,L[82],z,wue):Qe(L[82]),C5),L[25]?M?(M.p(L,z),z[0]&33554432&&x(M,1)):(M=N5(L),M.c(),x(M,1),M.m(a,l)):M&&(de(),D(M,1,1,()=>{M=null}),he()),Gn(u,O=Ot(R,[(!b||z[0]&131072&&c!==(c=!L[17]))&&{readOnly:c},z[0]&134217728&&L[27],(!b||z[1]&4)&&{placeholder:L[33]},(!b||z[0]&262144)&&{style:L[18]},(!b||z[0]&2048)&&{disabled:L[11]}])),z[0]&16&&u.value!==L[4]&&In(u,L[4]),oe(u,"svelte-82qwg8",!0),L[5]?I?(I.p(L,z),z[0]&32&&x(I,1)):(I=F5(L),I.c(),x(I,1),I.m(d,h)):I&&(de(),D(I,1,1,()=>{I=null}),he()),L[34]?P?(P.p(L,z),z[1]&8&&x(P,1)):(P=z5(L),P.c(),x(P,1),P.m(d,p)):P&&(de(),D(P,1,1,()=>{P=null}),he()),L[20]?A?(A.p(L,z),z[0]&1048576&&x(A,1)):(A=j5(L),A.c(),x(A,1),A.m(d,null)):A&&(de(),D(A,1,1,()=>{A=null}),he()),F?F.p&&(!b||z[0]&8|z[2]&1048576)&&Xe(F,N,L,L[82],b?Ye(N,L[82],z,pue):Qe(L[82]),m5):V&&V.p&&(!b||z[0]&264)&&V.p(L,b?z:[-1,-1,-1,-1,-1]),L[16]&&(!L[3]||L[3].length===0)?W?(W.p(L,z),z[0]&65544&&x(W,1)):(W=H5(L),W.c(),x(W,1),W.m(e,null)):W&&(de(),D(W,1,1,()=>{W=null}),he()),(!b||z[0]&2097152&&v!==(v="svelte-select "+L[21]+" svelte-82qwg8"))&&C(e,"class",v),(!b||z[0]&16384)&&C(e,"style",L[14]),(!b||z[0]&2097664)&&oe(e,"multi",L[9]),(!b||z[0]&2099200)&&oe(e,"disabled",L[11]),(!b||z[0]&2097156)&&oe(e,"focused",L[2]),(!b||z[0]&2097216)&&oe(e,"list-open",L[6]),(!b||z[0]&3145728)&&oe(e,"show-chevron",L[20]),(!b||z[0]&2129920)&&oe(e,"error",L[15])},i(L){b||(x(y),x(E,L),x(M),x(I),x(P),x(A),x(V,L),x(W),b=!0)},o(L){D(y),D(E,L),D(M),D(I),D(P),D(A),D(V,L),D(W),b=!1},d(L){L&&j(e),y&&y.d(),k&&k.d(),E&&E.d(L),M&&M.d(),n[94](null),I&&I.d(),P&&P.d(),A&&A.d(),V&&V.d(L),W&&W.d(),n[96](null),w=!1,It(_)}}}function V5(n){return n.map((e,t)=>({index:t,value:e,label:`${e}`}))}function Wue(n){return n===0}function que(n){return n.groupHeader&&n.selectable||n.selectable||!n.hasOwnProperty("selectable")}function Uue(n,e,t){let r,i,o,s,a,l,u,c,f,{$$slots:d={},$$scope:h}=e;const p=hJ(d),m=Ga();let{justValue:g=null}=e,{filter:v=sue}=e,{getItems:b=aue}=e,{id:w=null}=e,{name:_=null}=e,{container:y=void 0}=e,{input:k=void 0}=e,{multiple:S=!1}=e,{multiFullItemClearable:E=!1}=e,{disabled:M=!1}=e,{focused:R=!1}=e,{value:O=null}=e,{filterText:I=""}=e,{placeholder:P="Please select"}=e,{placeholderAlwaysShow:A=!1}=e,{items:N=null}=e,{label:F="label"}=e,{itemFilter:V=(Y,Ie,Et)=>`${Y}`.toLowerCase().includes(Ie.toLowerCase())}=e,{groupBy:W=void 0}=e,{groupFilter:L=Y=>Y}=e,{groupHeaderSelectable:z=!1}=e,{itemId:q="value"}=e,{loadOptions:te=void 0}=e,{containerStyles:re=""}=e,{hasError:ne=!1}=e,{filterSelectedItems:fe=!0}=e,{required:ie=!1}=e,{closeListOnChange:G=!0}=e,{clearFilterTextOnBlur:ae=!0}=e,{createGroupHeaderItem:Me=(Y,Ie)=>({value:Y,[F]:Y})}=e;const X=()=>u;let{searchable:ge=!0}=e,{inputStyles:U=""}=e,{clearable:Ce=!0}=e,{loading:Ee=!1}=e,{listOpen:Ae=!1}=e,De,{debounce:nt=(Y,Ie=1)=>{clearTimeout(De),De=setTimeout(Y,Ie)}}=e,{debounceWait:ue=300}=e,{hideEmptyState:Oe=!1}=e,{inputAttributes:Ue={}}=e,{listAutoWidth:_e=!0}=e,{showChevron:it=!1}=e,{listOffset:At=5}=e,{hoverItemIndex:Ve=0}=e,{floatingConfig:ct={}}=e,{class:Pt=""}=e,yt,mn,En,Dn;function Fn(){if(typeof O=="string"){let Y=(N||[]).find(Ie=>Ie[q]===O);t(3,O=Y||{[q]:O,label:O})}else S&&Array.isArray(O)&&O.length>0&&t(3,O=O.map(Y=>typeof Y=="string"?{value:Y,label:Y}:Y))}let we;function bt(){t(27,we=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},Ue)),w&&t(27,we.id=w,we),ge||t(27,we.readonly=!0,we)}function ve(Y){const Ie=[],Et={};Y.forEach(zn=>{const Yt=W(zn);Ie.includes(Yt)||(Ie.push(Yt),Et[Yt]=[],Yt&&Et[Yt].push(Object.assign(Me(Yt,zn),{id:Yt,groupHeader:!0,selectable:z}))),Et[Yt].push(Object.assign({groupItem:!!Yt},zn))});const vn=[];return L(Ie).forEach(zn=>{Et[zn]&&vn.push(...Et[zn])}),vn}function Ge(){if(S){JSON.stringify(O)!==JSON.stringify(mn)&&wi()&&m("input",O);return}(!mn||JSON.stringify(O[q])!==JSON.stringify(mn[q]))&&m("input",O)}function $e(){O&&(Array.isArray(O)?t(3,O=[...O]):t(3,O=[O]))}function me(){O&&t(3,O=null)}function ft(){const Y=u.findIndex(Ie=>Ie[q]===O[q]);mt(Y,!0)}function Gt(Y){m("hoverItem",Y)}function mt(Y=0,Ie){t(7,Ve=Y<0?0:Y),!Ie&&W&&u[Ve]&&!u[Ve].selectable&&Rn(1)}function wt(){!te&&I.length===0||(te?nt(async function(){t(5,Ee=!0);let Y=await b({dispatch:m,loadOptions:te,convertStringItemsToObjects:V5,filterText:I});Y?(t(5,Ee=Y.loading),t(6,Ae=Ae?Y.listOpen:I.length>0),t(2,R=Ae&&Y.focused),t(51,N=W?ve(Y.filteredItems):Y.filteredItems)):(t(5,Ee=!1),t(2,R=!0),t(6,Ae=!0))},ue):(t(6,Ae=!0),S&&t(26,yt=void 0)))}function Yr(Y){Ae&&m("filter",Y)}U4(async()=>{t(78,mn=O),t(79,En=I),t(80,Dn=S)});function Dr(){return S?O?O.map(Y=>Y[q]):null:O&&O[q]}function wi(){let Y=!0;if(O){const Ie=[],Et=[];O.forEach(vn=>{Ie.includes(vn[q])?Y=!1:(Ie.push(vn[q]),Et.push(vn))}),Y||t(3,O=Et)}return Y}function rr(Y){let Ie=Y?Y[q]:O[q];return N.find(Et=>Et[q]===Ie)}function on(Y){!Y||Y.length===0||Y.some(Ie=>typeof Ie!="object")||!O||(S?O.some(Ie=>!Ie||!Ie[q]):!O[q])||(Array.isArray(O)?t(3,O=O.map(Ie=>rr(Ie)||Ie)):t(3,O=rr()||O))}async function ln(Y){const Ie=O[Y];O.length===1?t(3,O=void 0):t(3,O=O.filter(Et=>Et!==Ie)),m("clear",Ie)}function gn(Y){if(R)switch(Y.stopPropagation(),Y.key){case"Escape":Y.preventDefault(),Er();break;case"Enter":if(Y.preventDefault(),Ae){if(u.length===0)break;const Ie=u[Ve];if(O&&!S&&O[q]===Ie[q]){Er();break}else xt(u[Ve])}break;case"ArrowDown":Y.preventDefault(),Ae?Rn(1):(t(6,Ae=!0),t(26,yt=void 0));break;case"ArrowUp":Y.preventDefault(),Ae?Rn(-1):(t(6,Ae=!0),t(26,yt=void 0));break;case"Tab":if(Ae&&R){if(u.length===0||O&&O[q]===u[Ve][q])return Er();Y.preventDefault(),xt(u[Ve]),Er()}break;case"Backspace":if(!S||I.length>0)return;if(S&&O&&O.length>0){if(ln(yt!==void 0?yt:O.length-1),yt===0||yt===void 0)break;t(26,yt=O.length>yt?yt-1:void 0)}break;case"ArrowLeft":if(!O||!S||I.length>0)return;yt===void 0?t(26,yt=O.length-1):O.length>yt&&yt!==0&&t(26,yt-=1);break;case"ArrowRight":if(!O||!S||I.length>0||yt===void 0)return;yt===O.length-1?t(26,yt=void 0):yt<O.length-1&&t(26,yt+=1);break}}function xr(Y){R&&k===(document==null?void 0:document.activeElement)||(Y&&m("focus",Y),k==null||k.focus(),t(2,R=!0))}async function mo(Y){ke||(Ae||R)&&(m("blur",Y),Er(),t(2,R=!1),t(26,yt=void 0),k==null||k.blur())}function vs(){if(!M){if(I.length>0)return t(6,Ae=!0);t(6,Ae=!Ae)}}function Do(){m("clear",O),t(3,O=void 0),Er(),xr()}Tn(()=>{Ae&&t(2,R=!0),R&&k&&k.focus()});function bs(Y){if(Y){t(4,I="");const Ie=Object.assign({},Y);if(Ie.groupHeader&&!Ie.selectable)return;t(3,O=S?O?O.concat([Ie]):[Ie]:t(3,O=Ie)),setTimeout(()=>{G&&Er(),t(26,yt=void 0),m("change",O),m("select",Y)})}}function Er(){ae&&t(4,I=""),t(6,Ae=!1)}let{ariaValues:ai=Y=>`Option ${Y}, selected.`}=e,{ariaListOpen:el=(Y,Ie)=>`You are currently focused on option ${Y}. There are ${Ie} results available.`}=e,{ariaFocused:ys=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function wc(Y){let Ie;return Y&&O.length>0?Ie=O.map(Et=>Et[F]).join(", "):Ie=O[F],ai(Ie)}function tl(){if(!u||u.length===0)return"";let Y=u[Ve];if(Ae&&Y){let Ie=u?u.length:0;return el(Y[F],Ie)}else return ys()}let vr=null,Yl;function Ro(){clearTimeout(Yl),Yl=setTimeout(()=>{ke=!1},100)}function nl(Y){!Ae&&!R&&y&&!y.contains(Y.target)&&!(vr!=null&&vr.contains(Y.target))&&mo()}Kr(()=>{vr==null||vr.remove()});let ke=!1;function xt(Y){!Y||Y.selectable===!1||bs(Y)}function en(Y){ke||t(7,Ve=Y)}function pn(Y){const{item:Ie,i:Et}=Y;if((Ie==null?void 0:Ie.selectable)!==!1){if(O&&!S&&O[q]===Ie[q])return Er();que(Ie)&&(t(7,Ve=Et),xt(Ie))}}function Rn(Y){if(u.filter(vn=>!Object.hasOwn(vn,"selectable")||vn.selectable===!0).length===0)return t(7,Ve=0);Y>0&&Ve===u.length-1?t(7,Ve=0):Y<0&&Ve===0?t(7,Ve=u.length-1):t(7,Ve=Ve+Y);const Et=u[Ve];if(Et&&Et.selectable===!1){(Y===1||Y===-1)&&Rn(Y);return}}function lr(Y,Ie,Et){if(!S)return Ie&&Ie[Et]===Y[Et]}const Fi=il,rl=il;function il(Y){return{update(Ie){Ie.scroll&&(Ro(),Y.scrollIntoView({behavior:"auto",block:"nearest"}))}}}function ta(){const{width:Y}=y.getBoundingClientRect();t(23,vr.style.width=_e?Y+"px":"auto",vr)}let ol={strategy:"absolute",placement:"bottom-start",middleware:[tue(At),rue(),nue()],autoUpdate:!1};const[xp,Yf,go]=oue(ol);let na=!0;function Xl(Y,Ie){if(!Y||!Ie)return t(28,na=!0);setTimeout(()=>{t(28,na=!1)},0)}function _s(Y){Go.call(this,n,Y)}function Rr(Y){Go.call(this,n,Y)}function Ql(Y){Go.call(this,n,Y)}function Ep(Y){Go.call(this,n,Y)}const sl=Y=>en(Y),Ap=Y=>en(Y),Mp=(Y,Ie)=>pn({item:Y,i:Ie});function kc(Y){rt[Y?"unshift":"push"](()=>{vr=Y,t(23,vr)})}const Tp=Y=>ln(Y),Op=Y=>E?ln(Y):{};function ee(Y){rt[Y?"unshift":"push"](()=>{k=Y,t(1,k)})}function Pe(){I=this.value,t(4,I)}function et(Y){rt[Y?"unshift":"push"](()=>{y=Y,t(0,y)})}return n.$$set=Y=>{"justValue"in Y&&t(52,g=Y.justValue),"filter"in Y&&t(53,v=Y.filter),"getItems"in Y&&t(54,b=Y.getItems),"id"in Y&&t(55,w=Y.id),"name"in Y&&t(8,_=Y.name),"container"in Y&&t(0,y=Y.container),"input"in Y&&t(1,k=Y.input),"multiple"in Y&&t(9,S=Y.multiple),"multiFullItemClearable"in Y&&t(10,E=Y.multiFullItemClearable),"disabled"in Y&&t(11,M=Y.disabled),"focused"in Y&&t(2,R=Y.focused),"value"in Y&&t(3,O=Y.value),"filterText"in Y&&t(4,I=Y.filterText),"placeholder"in Y&&t(56,P=Y.placeholder),"placeholderAlwaysShow"in Y&&t(57,A=Y.placeholderAlwaysShow),"items"in Y&&t(51,N=Y.items),"label"in Y&&t(12,F=Y.label),"itemFilter"in Y&&t(58,V=Y.itemFilter),"groupBy"in Y&&t(59,W=Y.groupBy),"groupFilter"in Y&&t(60,L=Y.groupFilter),"groupHeaderSelectable"in Y&&t(61,z=Y.groupHeaderSelectable),"itemId"in Y&&t(13,q=Y.itemId),"loadOptions"in Y&&t(62,te=Y.loadOptions),"containerStyles"in Y&&t(14,re=Y.containerStyles),"hasError"in Y&&t(15,ne=Y.hasError),"filterSelectedItems"in Y&&t(63,fe=Y.filterSelectedItems),"required"in Y&&t(16,ie=Y.required),"closeListOnChange"in Y&&t(64,G=Y.closeListOnChange),"clearFilterTextOnBlur"in Y&&t(65,ae=Y.clearFilterTextOnBlur),"createGroupHeaderItem"in Y&&t(66,Me=Y.createGroupHeaderItem),"searchable"in Y&&t(17,ge=Y.searchable),"inputStyles"in Y&&t(18,U=Y.inputStyles),"clearable"in Y&&t(68,Ce=Y.clearable),"loading"in Y&&t(5,Ee=Y.loading),"listOpen"in Y&&t(6,Ae=Y.listOpen),"debounce"in Y&&t(69,nt=Y.debounce),"debounceWait"in Y&&t(70,ue=Y.debounceWait),"hideEmptyState"in Y&&t(19,Oe=Y.hideEmptyState),"inputAttributes"in Y&&t(71,Ue=Y.inputAttributes),"listAutoWidth"in Y&&t(72,_e=Y.listAutoWidth),"showChevron"in Y&&t(20,it=Y.showChevron),"listOffset"in Y&&t(73,At=Y.listOffset),"hoverItemIndex"in Y&&t(7,Ve=Y.hoverItemIndex),"floatingConfig"in Y&&t(74,ct=Y.floatingConfig),"class"in Y&&t(21,Pt=Y.class),"ariaValues"in Y&&t(75,ai=Y.ariaValues),"ariaListOpen"in Y&&t(76,el=Y.ariaListOpen),"ariaFocused"in Y&&t(77,ys=Y.ariaFocused),"$$scope"in Y&&t(82,h=Y.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8|n.$$.dirty[1]&1048576&&O&&Fn(),n.$$.dirty[0]&131072|n.$$.dirty[2]&512&&(Ue||!ge)&&bt(),n.$$.dirty[0]&512&&S&&$e(),n.$$.dirty[0]&512|n.$$.dirty[2]&262144&&Dn&&!S&&me(),n.$$.dirty[0]&520&&S&&O&&O.length>1&&wi(),n.$$.dirty[0]&8&&O&&Ge(),n.$$.dirty[0]&520|n.$$.dirty[2]&65536&&!O&&S&&mn&&m("input",O),n.$$.dirty[0]&6&&!R&&k&&Er(),n.$$.dirty[0]&16|n.$$.dirty[2]&131072&&I!==En&&wt(),n.$$.dirty[0]&12824|n.$$.dirty[1]&407896064|n.$$.dirty[2]&3&&t(24,u=v({loadOptions:te,filterText:I,items:N,multiple:S,value:O,itemId:q,groupBy:W,label:F,filterSelectedItems:fe,itemFilter:V,convertStringItemsToObjects:V5,filterGroupedItems:ve})),n.$$.dirty[0]&16777800&&!S&&Ae&&O&&u&&ft(),n.$$.dirty[0]&576&&Ae&&S&&t(7,Ve=0),n.$$.dirty[0]&16&&I&&t(7,Ve=0),n.$$.dirty[0]&128&&Gt(Ve),n.$$.dirty[0]&520&&t(25,r=S?O&&O.length>0:O),n.$$.dirty[0]&33554448&&t(35,i=r&&I.length>0),n.$$.dirty[0]&33556512|n.$$.dirty[2]&64&&t(34,o=r&&Ce&&!M&&!Ee),n.$$.dirty[0]&520|n.$$.dirty[1]&100663296&&t(33,s=A&&S||S&&(O==null?void 0:O.length)===0?P:O?"":P),n.$$.dirty[0]&520&&t(32,a=O?wc(S):""),n.$$.dirty[0]&16777412&&t(31,l=tl()),n.$$.dirty[1]&1048576&&on(N),n.$$.dirty[0]&8712&&t(52,g=Dr()),n.$$.dirty[0]&520|n.$$.dirty[2]&65536&&!S&&mn&&!O&&m("input",O),n.$$.dirty[0]&16777800&&Ae&&u&&!S&&!O&&mt(),n.$$.dirty[0]&16777216&&Yr(u),n.$$.dirty[0]&1|n.$$.dirty[2]&4096&&y&&(ct==null?void 0:ct.autoUpdate)===void 0&&t(81,ol.autoUpdate=!0,ol),n.$$.dirty[0]&1|n.$$.dirty[2]&528384&&y&&ct&&go(Object.assign(ol,ct)),n.$$.dirty[0]&8388608&&t(30,c=!!vr),n.$$.dirty[0]&8388672&&Xl(vr,Ae),n.$$.dirty[0]&8388673&&Ae&&y&&vr&&ta(),n.$$.dirty[0]&128&&t(29,f=Ve),n.$$.dirty[0]&70&&k&&Ae&&!R&&xr()},[y,k,R,O,I,Ee,Ae,Ve,_,S,E,M,F,q,re,ne,ie,ge,U,Oe,it,Pt,Do,vr,u,r,yt,we,na,f,c,l,a,s,o,i,ln,gn,xr,mo,vs,Ro,nl,en,pn,lr,Fi,rl,xp,Yf,p,N,g,v,b,w,P,A,V,W,L,z,te,fe,G,ae,Me,X,Ce,nt,ue,Ue,_e,At,ct,ai,el,ys,mn,En,Dn,ol,h,d,_s,Rr,Ql,Ep,sl,Ap,Mp,kc,Tp,Op,ee,Pe,et]}class Nc extends ye{constructor(e){super(),be(this,e,Uue,Vue,Be,{justValue:52,filter:53,getItems:54,id:55,name:8,container:0,input:1,multiple:9,multiFullItemClearable:10,disabled:11,focused:2,value:3,filterText:4,placeholder:56,placeholderAlwaysShow:57,items:51,label:12,itemFilter:58,groupBy:59,groupFilter:60,groupHeaderSelectable:61,itemId:13,loadOptions:62,containerStyles:14,hasError:15,filterSelectedItems:63,required:16,closeListOnChange:64,clearFilterTextOnBlur:65,createGroupHeaderItem:66,getFilteredItems:67,searchable:17,inputStyles:18,clearable:68,loading:5,listOpen:6,debounce:69,debounceWait:70,hideEmptyState:19,inputAttributes:71,listAutoWidth:72,showChevron:20,listOffset:73,hoverItemIndex:7,floatingConfig:74,class:21,handleClear:22,ariaValues:75,ariaListOpen:76,ariaFocused:77},null,[-1,-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[67]}get handleClear(){return this.$$.ctx[22]}}function Gue(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S,E,M,R,O,I,P,A,N,F,V,W,L;function z(X){n[16](X)}let q={class:"jse-filter-path",showChevron:!0,items:n[7]};n[0]!==void 0&&(q.value=n[0]),a=new Nc({props:q}),rt.push(()=>fr(a,"value",z));function te(X){n[17](X)}let re={class:"jse-filter-relation",showChevron:!0,items:n[8]};n[1]!==void 0&&(re.value=n[1]),c=new Nc({props:re}),rt.push(()=>fr(c,"value",te));function ne(X){n[19](X)}let fe={class:"jse-sort-path",showChevron:!0,items:n[7]};n[3]!==void 0&&(fe.value=n[3]),_=new Nc({props:fe}),rt.push(()=>fr(_,"value",ne));function ie(X){n[20](X)}let G={class:"jse-sort-direction",showChevron:!0,items:n[9]};n[4]!==void 0&&(G.value=n[4]),S=new Nc({props:G}),rt.push(()=>fr(S,"value",ie));function ae(X){n[21](X)}let Me={class:"jse-projection-paths",multiple:!0,showChevron:!0,items:n[6]};return n[5]!==void 0&&(Me.value=n[5]),N=new Nc({props:Me}),rt.push(()=>fr(N,"value",ae)),{c(){e=B("table"),t=B("tr"),r=B("th"),r.textContent="Filter",i=K(),o=B("td"),s=B("div"),$(a.$$.fragment),u=K(),$(c.$$.fragment),d=K(),h=B("input"),p=K(),m=B("tr"),g=B("th"),g.textContent="Sort",v=K(),b=B("td"),w=B("div"),$(_.$$.fragment),k=K(),$(S.$$.fragment),M=K(),R=B("tr"),O=B("th"),O.textContent="Pick",I=K(),P=B("td"),A=B("div"),$(N.$$.fragment),C(r,"class","svelte-o6raqd"),C(h,"class","jse-filter-value svelte-o6raqd"),C(s,"class","jse-horizontal svelte-o6raqd"),C(g,"class","svelte-o6raqd"),C(w,"class","jse-horizontal svelte-o6raqd"),C(O,"class","svelte-o6raqd"),C(A,"class","jse-horizontal svelte-o6raqd"),C(e,"class","jse-transform-wizard svelte-o6raqd")},m(X,ge){H(X,e,ge),T(e,t),T(t,r),T(t,i),T(t,o),T(o,s),Q(a,s,null),T(s,u),Q(c,s,null),T(s,d),T(s,h),In(h,n[2]),T(e,p),T(e,m),T(m,g),T(m,v),T(m,b),T(b,w),Q(_,w,null),T(w,k),Q(S,w,null),T(e,M),T(e,R),T(R,O),T(R,I),T(R,P),T(P,A),Q(N,A,null),V=!0,W||(L=le(h,"input",n[18]),W=!0)},p(X,[ge]){const U={};ge&128&&(U.items=X[7]),!l&&ge&1&&(l=!0,U.value=X[0],cr(()=>l=!1)),a.$set(U);const Ce={};!f&&ge&2&&(f=!0,Ce.value=X[1],cr(()=>f=!1)),c.$set(Ce),ge&4&&h.value!==X[2]&&In(h,X[2]);const Ee={};ge&128&&(Ee.items=X[7]),!y&&ge&8&&(y=!0,Ee.value=X[3],cr(()=>y=!1)),_.$set(Ee);const Ae={};!E&&ge&16&&(E=!0,Ae.value=X[4],cr(()=>E=!1)),S.$set(Ae);const De={};ge&64&&(De.items=X[6]),!F&&ge&32&&(F=!0,De.value=X[5],cr(()=>F=!1)),N.$set(De)},i(X){V||(x(a.$$.fragment,X),x(c.$$.fragment,X),x(_.$$.fragment,X),x(S.$$.fragment,X),x(N.$$.fragment,X),V=!0)},o(X){D(a.$$.fragment,X),D(c.$$.fragment,X),D(_.$$.fragment,X),D(S.$$.fragment,X),D(N.$$.fragment,X),V=!1},d(X){X&&j(e),Z(a),Z(c),Z(_),Z(S),Z(N),W=!1,L()}}}function Kue(n,e,t){var F,V,W,L,z;let r,i,o,s,a,l;const u=oi("jsoneditor:TransformWizard");let{json:c}=e,{queryOptions:f={}}=e,{onChange:d}=e;const h=["==","!=","<","<=",">",">="].map(q=>({value:q,label:q})),p=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let m=(F=f==null?void 0:f.filter)!=null&&F.path?$p(f.filter.path):null,g=(V=f==null?void 0:f.filter)!=null&&V.relation?h.find(q=>{var te;return q.value===((te=f.filter)==null?void 0:te.relation)}):null,v=((W=f==null?void 0:f.filter)==null?void 0:W.value)||"",b=(L=f==null?void 0:f.sort)!=null&&L.path?$p(f.sort.path):null,w=(z=f==null?void 0:f.sort)!=null&&z.direction?p.find(q=>{var te;return q.value===((te=f.sort)==null?void 0:te.direction)}):null;function _(q){var te;Wt((te=f==null?void 0:f.filter)==null?void 0:te.path,q)||(u("changeFilterPath",q),t(10,f=xs(f,["filter","path"],q,!0)),d(f))}function y(q){var te;Wt((te=f==null?void 0:f.filter)==null?void 0:te.relation,q)||(u("changeFilterRelation",q),t(10,f=xs(f,["filter","relation"],q,!0)),d(f))}function k(q){var te;Wt((te=f==null?void 0:f.filter)==null?void 0:te.value,q)||(u("changeFilterValue",q),t(10,f=xs(f,["filter","value"],q,!0)),d(f))}function S(q){var te;Wt((te=f==null?void 0:f.sort)==null?void 0:te.path,q)||(u("changeSortPath",q),t(10,f=xs(f,["sort","path"],q,!0)),d(f))}function E(q){var te;Wt((te=f==null?void 0:f.sort)==null?void 0:te.direction,q)||(u("changeSortDirection",q),t(10,f=xs(f,["sort","direction"],q,!0)),d(f))}function M(q){var te;Wt((te=f==null?void 0:f.projection)==null?void 0:te.paths,q)||(u("changeProjectionPaths",q),t(10,f=xs(f,["projection","paths"],q,!0)),d(f))}function R(q){m=q,t(0,m)}function O(q){g=q,t(1,g)}function I(){v=this.value,t(2,v)}function P(q){b=q,t(3,b)}function A(q){w=q,t(4,w)}function N(q){l=q,t(5,l),t(10,f),t(6,a),t(13,o),t(15,r),t(11,c)}return n.$$set=q=>{"json"in q&&t(11,c=q.json),"queryOptions"in q&&t(10,f=q.queryOptions),"onChange"in q&&t(12,d=q.onChange)},n.$$.update=()=>{var q;n.$$.dirty&2048&&t(15,r=Array.isArray(c)),n.$$.dirty&34816&&t(14,i=r?rC(c):[]),n.$$.dirty&34816&&t(13,o=r?rC(c,!0):[]),n.$$.dirty&16384&&t(7,s=i.map($p)),n.$$.dirty&8192&&t(6,a=o?o.map($p):[]),n.$$.dirty&1088&&t(5,l=(q=f==null?void 0:f.projection)!=null&&q.paths&&a?f.projection.paths.map(te=>a.find(re=>Wt(re.value,te))).filter(te=>!!te):null),n.$$.dirty&1&&_(m==null?void 0:m.value),n.$$.dirty&2&&y(g==null?void 0:g.value),n.$$.dirty&4&&k(v),n.$$.dirty&8&&S(b==null?void 0:b.value),n.$$.dirty&16&&E(w==null?void 0:w.value),n.$$.dirty&32&&M(l?l.map(te=>te.value):void 0)},[m,g,v,b,w,l,a,s,h,p,f,c,d,o,i,r,R,O,I,P,A,N]}class Jue extends ye{constructor(e){super(),be(this,e,Kue,Gue,Rt,{json:11,queryOptions:10,onChange:12})}}const Yue=Jue;function W5(n,e,t){const r=n.slice();return r[5]=e[t],r}function Xue(n){let e,t;return e=new Jt({props:{data:lm}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Que(n){let e,t;return e=new Jt({props:{data:am}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function q5(n){let e,t,r,i,o=n[5].name+"",s,a,l,u,c,f;const d=[Que,Xue],h=[];function p(g,v){return g[5].id===g[0]?0:1}t=p(n),r=h[t]=d[t](n);function m(){return n[4](n[5])}return{c(){e=B("button"),r.c(),i=K(),s=Se(o),a=K(),C(e,"type","button"),C(e,"class","jse-query-language svelte-ui6yg4"),C(e,"title",l=`Select ${n[5].name} as query language`),oe(e,"selected",n[5].id===n[0])},m(g,v){H(g,e,v),h[t].m(e,null),T(e,i),T(e,s),T(e,a),u=!0,c||(f=le(e,"click",m),c=!0)},p(g,v){n=g;let b=t;t=p(n),t===b?h[t].p(n,v):(de(),D(h[b],1,1,()=>{h[b]=null}),he(),r=h[t],r?r.p(n,v):(r=h[t]=d[t](n),r.c()),x(r,1),r.m(e,i)),(!u||v&2)&&o!==(o=n[5].name+"")&&ze(s,o),(!u||v&2&&l!==(l=`Select ${n[5].name} as query language`))&&C(e,"title",l),(!u||v&3)&&oe(e,"selected",n[5].id===n[0])},i(g){u||(x(r),u=!0)},o(g){D(r),u=!1},d(g){g&&j(e),h[t].d(),c=!1,f()}}}function Zue(n){let e,t,r,i=n[1],o=[];for(let a=0;a<i.length;a+=1)o[a]=q5(W5(n,i,a));const s=a=>D(o[a],1,1,()=>{o[a]=null});return{c(){e=B("div"),t=B("div");for(let a=0;a<o.length;a+=1)o[a].c();C(t,"class","jse-select-query-language-container svelte-ui6yg4"),C(e,"class","jse-select-query-language svelte-ui6yg4")},m(a,l){H(a,e,l),T(e,t);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null);r=!0},p(a,[l]){if(l&7){i=a[1];let u;for(u=0;u<i.length;u+=1){const c=W5(a,i,u);o[u]?(o[u].p(c,l),x(o[u],1)):(o[u]=q5(c),o[u].c(),x(o[u],1),o[u].m(t,null))}for(de(),u=i.length;u<o.length;u+=1)s(u);he()}},i(a){if(!r){for(let l=0;l<i.length;l+=1)x(o[l]);r=!0}},o(a){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)D(o[l]);r=!1},d(a){a&&j(e),rn(o,a)}}}function $ue(n,e,t){let{queryLanguages:r}=e,{queryLanguageId:i}=e,{onChangeQueryLanguage:o}=e;function s(l){t(0,i=l),o(l)}const a=l=>s(l.id);return n.$$set=l=>{"queryLanguages"in l&&t(1,r=l.queryLanguages),"queryLanguageId"in l&&t(0,i=l.queryLanguageId),"onChangeQueryLanguage"in l&&t(3,o=l.onChangeQueryLanguage)},[i,r,s,o,a]}class ece extends ye{constructor(e){super(),be(this,e,$ue,Zue,Be,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}const tce=ece;function U5(n){let e,t,r,i,o;return t=new Jt({props:{data:mle}}),{c(){e=B("button"),$(t.$$.fragment),C(e,"type","button"),C(e,"class","jse-config svelte-17t8gc5"),C(e,"title","Select a query language")},m(s,a){H(s,e,a),Q(t,e,null),n[6](e),r=!0,i||(o=le(e,"click",n[3]),i=!0)},p:pe,i(s){r||(x(t.$$.fragment,s),r=!0)},o(s){D(t.$$.fragment,s),r=!1},d(s){s&&j(e),Z(t),n[6](null),i=!1,o()}}}function nce(n){let e,t,r,i,o,s,a,l,u,c=n[0].length>1&&U5(n);return s=new Jt({props:{data:xh}}),{c(){e=B("div"),t=B("div"),t.textContent="Transform",r=K(),c&&c.c(),i=K(),o=B("button"),$(s.$$.fragment),C(t,"class","jse-title svelte-17t8gc5"),C(o,"type","button"),C(o,"class","jse-close svelte-17t8gc5"),C(e,"class","jse-header svelte-17t8gc5")},m(f,d){H(f,e,d),T(e,t),T(e,r),c&&c.m(e,null),T(e,i),T(e,o),Q(s,o,null),a=!0,l||(u=le(o,"click",n[7]),l=!0)},p(f,[d]){f[0].length>1?c?(c.p(f,d),d&1&&x(c,1)):(c=U5(f),c.c(),x(c,1),c.m(e,i)):c&&(de(),D(c,1,1,()=>{c=null}),he())},i(f){a||(x(c),x(s.$$.fragment,f),a=!0)},o(f){D(c),D(s.$$.fragment,f),a=!1},d(f){f&&j(e),c&&c.d(),Z(s),l=!1,u()}}}function rce(n,e,t){let{queryLanguages:r}=e,{queryLanguageId:i}=e,{onChangeQueryLanguage:o}=e,s,a;const{close:l}=pr("simple-modal"),{openAbsolutePopup:u,closeAbsolutePopup:c}=pr("absolute-popup");function f(){a=u(tce,{queryLanguages:r,queryLanguageId:i,onChangeQueryLanguage:m=>{c(a),o(m)}},{offsetTop:-2,offsetLeft:0,anchor:s,closeOnOuterClick:!0})}function d(p){rt[p?"unshift":"push"](()=>{s=p,t(1,s)})}const h=()=>l();return n.$$set=p=>{"queryLanguages"in p&&t(0,r=p.queryLanguages),"queryLanguageId"in p&&t(4,i=p.queryLanguageId),"onChangeQueryLanguage"in p&&t(5,o=p.onChangeQueryLanguage)},[r,s,l,f,i,o,d,h]}class ice extends ye{constructor(e){super(),be(this,e,rce,nce,Rt,{queryLanguages:0,queryLanguageId:4,onChangeQueryLanguage:5})}}const oce=ice,Kw=oi("jsoneditor:AutoScrollHandler");function sce(n){Kw("createAutoScrollHandler",n);let e,t;function r(u){return u<20?eZ:u<50?tZ:nZ}function i(){if(n){const u=(e||0)*(j8/1e3);n.scrollTop+=u}}function o(u){(!t||u!==e)&&(s(),Kw("startAutoScroll",u),e=u,t=setInterval(i,j8))}function s(){t&&(Kw("stopAutoScroll"),clearInterval(t),t=void 0,e=void 0)}function a(u){if(n){const c=u.clientY,{top:f,bottom:d}=n.getBoundingClientRect();if(c<f){const h=r(f-c);o(-h)}else if(c>d){const h=r(c-d);o(h)}else s()}}function l(){s()}return{onDrag:a,onDragEnd:l}}const ace=(n,e,t,r)=>(n/=r/2,n<1?t/2*n*n+e:(n--,-t/2*(n*(n-2)-1)+e)),DF=()=>{let n,e,t,r,i,o,s,a,l,u,c,f,d,h;function p(){return n.scrollTop}function m(_){const y=_.getBoundingClientRect().top,k=n.getBoundingClientRect?n.getBoundingClientRect().top:0;return y-k+t}function g(_){n.scrollTo?n.scrollTo(n.scrollLeft,_):n.scrollTop=_}function v(_){u||(u=_),c=_-u,f=o(c,t,a,l),g(f),h=!0,c<l?requestAnimationFrame(v):b()}function b(){g(t+a),e&&s&&(e.setAttribute("tabindex","-1"),e.focus()),typeof d=="function"&&d(),u=0,h=!1}function w(_,y={}){switch(l=1e3,i=y.offset||0,d=y.callback,o=y.easing||ace,s=y.a11y||!1,typeof y.container){case"object":n=y.container;break;case"string":n=document.querySelector(y.container);break;default:n=window.document.documentElement}switch(t=p(),typeof _){case"number":e=void 0,s=!1,r=t+_;break;case"object":e=_,r=m(e);break;case"string":e=document.querySelector(_),r=m(e);break}switch(a=r-t+i,typeof y.duration){case"number":l=y.duration;break;case"function":l=y.duration(a);break}h?u=0:requestAnimationFrame(v)}return w},lce=1e3,x1=oi("jsoneditor:History");function RF(n={}){const e=n.maxItems||lce;let t=[],r=0;function i(){return r<t.length}function o(){return r>0}function s(){return{canUndo:i(),canRedo:o(),length:t.length}}function a(){n.onChange&&n.onChange(s())}function l(d){x1("add",d),t=[d].concat(t.slice(r)).slice(0,e),r=0,a()}function u(){x1("clear"),t=[],r=0,a()}function c(){if(i()){const d=t[r];return r+=1,x1("undo",d),a(),d}}function f(){if(o())return r-=1,x1("redo",t[r]),a(),t[r]}return{add:l,clear:u,getState:s,undo:c,redo:f}}function Nd(n,e){const t=Date.now(),r=n(),i=Date.now();return e(i-t),r}const _d=oi("validation");function uce(n){const e={};return n.forEach(t=>{e[Ke(t.path)]=t}),n.forEach(t=>{let r=t.path;for(;r.length>0;){r=Ut(r);const i=Ke(r);i in e||(e[i]={isChildError:!0,path:r,message:"Contains invalid data",severity:Pl.warning})}}),e}function PF(n,e,t,r){if(_d("validateJSON"),!e)return[];if(t!==r){const i=t.stringify(n),o=i!==void 0?r.parse(i):void 0;return e(o)}else return e(n)}function cce(n,e,t,r){if(_d("validateText"),n.length>rZ)return{validationErrors:[{path:[],message:"Validation turned off: the document is too large",severity:Pl.info}]};if(n.length===0)return null;try{const i=Nd(()=>t.parse(n),a=>_d(`validate: parsed json in ${a} ms`));if(!e)return null;const o=t===r?i:Nd(()=>r.parse(n),a=>_d(`validate: parsed json with the validationParser in ${a} ms`)),s=Nd(()=>e(o),a=>_d(`validate: validated json in ${a} ms`));return $t(s)?null:{validationErrors:s}}catch(i){const o=Nd(()=>fce(n,t),a=>_d(`validate: checked whether repairable in ${a} ms`));return{parseError:wh(n,i.message||i.toString()),isRepairable:o}}}function fce(n,e){if(n.length>iZ)return!1;try{return e.parse(Aa(n)),!0}catch{return!1}}const E1=oi("jsoneditor:FocusTracker");function Gx({onMount:n,onDestroy:e,getWindow:t,hasFocus:r,onFocus:i,onBlur:o}){let s,a=!1;function l(){const c=r();c&&(clearTimeout(s),a||(E1("focus"),i(),a=c))}function u(){a&&(clearTimeout(s),s=setTimeout(()=>{r()||(E1("blur"),a=!1,o())}))}n(()=>{E1("mount FocusTracker");const c=t();c&&(c.addEventListener("focusin",l,!0),c.addEventListener("focusout",u,!0))}),e(()=>{E1("destroy FocusTracker");const c=t();c&&(c.removeEventListener("focusin",l,!0),c.removeEventListener("focusout",u,!0))})}function G5(n,e,t){const r=n.slice();return r[9]=e[t],r}function K5(n){let e,t;return e=new Jt({props:{data:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&2&&(o.data=r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function J5(n){let e,t;return e=new Jt({props:{data:n[9].icon}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&8&&(o.data=r[9].icon),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Y5(n){let e,t,r=n[9].text+"",i,o,s,a,l,u,c,f=n[9].icon&&J5(n);function d(){return n[7](n[9])}function h(){return n[8](n[9])}return{c(){e=B("button"),f&&f.c(),t=K(),i=Se(r),o=K(),C(e,"type","button"),C(e,"class","jse-button jse-action jse-primary svelte-5juebx"),C(e,"title",s=n[9].title),e.disabled=a=n[9].disabled},m(p,m){H(p,e,m),f&&f.m(e,null),T(e,t),T(e,i),T(e,o),l=!0,u||(c=[le(e,"click",d),le(e,"mousedown",h)],u=!0)},p(p,m){n=p,n[9].icon?f?(f.p(n,m),m&8&&x(f,1)):(f=J5(n),f.c(),x(f,1),f.m(e,t)):f&&(de(),D(f,1,1,()=>{f=null}),he()),(!l||m&8)&&r!==(r=n[9].text+"")&&ze(i,r),(!l||m&8&&s!==(s=n[9].title))&&C(e,"title",s),(!l||m&8&&a!==(a=n[9].disabled))&&(e.disabled=a)},i(p){l||(x(f),l=!0)},o(p){D(f),l=!1},d(p){p&&j(e),f&&f.d(),u=!1,It(c)}}}function dce(n){let e,t,r,i,o,s,a,l,u,c,f,d=n[1]&&K5(n),h=n[3],p=[];for(let g=0;g<h.length;g+=1)p[g]=Y5(G5(n,h,g));const m=g=>D(p[g],1,1,()=>{p[g]=null});return{c(){e=B("div"),t=B("div"),r=B("div"),d&&d.c(),i=K(),o=Se(n[2]),s=K(),a=B("div");for(let g=0;g<p.length;g+=1)p[g].c();C(r,"class","jse-text-centered"),C(t,"role","button"),C(t,"tabindex","-1"),C(t,"class","jse-text svelte-5juebx"),oe(t,"jse-clickable",!!n[4]),C(a,"class","jse-actions svelte-5juebx"),C(e,"class",l="jse-message jse-"+n[0]+" svelte-5juebx")},m(g,v){H(g,e,v),T(e,t),T(t,r),d&&d.m(r,null),T(r,i),T(r,o),T(e,s),T(e,a);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(a,null);u=!0,c||(f=le(t,"click",n[5]),c=!0)},p(g,[v]){if(g[1]?d?(d.p(g,v),v&2&&x(d,1)):(d=K5(g),d.c(),x(d,1),d.m(r,i)):d&&(de(),D(d,1,1,()=>{d=null}),he()),(!u||v&4)&&ze(o,g[2]),(!u||v&16)&&oe(t,"jse-clickable",!!g[4]),v&8){h=g[3];let b;for(b=0;b<h.length;b+=1){const w=G5(g,h,b);p[b]?(p[b].p(w,v),x(p[b],1)):(p[b]=Y5(w),p[b].c(),x(p[b],1),p[b].m(a,null))}for(de(),b=h.length;b<p.length;b+=1)m(b);he()}(!u||v&1&&l!==(l="jse-message jse-"+g[0]+" svelte-5juebx"))&&C(e,"class",l)},i(g){if(!u){x(d);for(let v=0;v<h.length;v+=1)x(p[v]);u=!0}},o(g){D(d),p=p.filter(Boolean);for(let v=0;v<p.length;v+=1)D(p[v]);u=!1},d(g){g&&j(e),d&&d.d(),rn(p,g),c=!1,f()}}}function hce(n,e,t){let{type:r="success"}=e,{icon:i=void 0}=e,{message:o=void 0}=e,{actions:s=[]}=e,{onClick:a=void 0}=e,{onClose:l=void 0}=e;l&&Kr(l);function u(){a&&a()}const c=d=>{d.onClick&&d.onClick()},f=d=>{d.onMouseDown&&d.onMouseDown()};return n.$$set=d=>{"type"in d&&t(0,r=d.type),"icon"in d&&t(1,i=d.icon),"message"in d&&t(2,o=d.message),"actions"in d&&t(3,s=d.actions),"onClick"in d&&t(4,a=d.onClick),"onClose"in d&&t(6,l=d.onClose)},[r,i,o,s,a,u,l,c,f]}class pce extends ye{constructor(e){super(),be(this,e,hce,dce,Rt,{type:0,icon:1,message:2,actions:3,onClick:4,onClose:6})}}const Zs=pce;function X5(n,e,t){const r=n.slice();return r[7]=e[t],r[9]=t,r}function Q5(n){let e,t,r,i;const o=[gce,mce],s=[];function a(l,u){return l[2]||l[3]===1?0:1}return t=a(n),r=s[t]=o[t](n),{c(){e=B("div"),r.c(),C(e,"class","jse-validation-errors-overview svelte-zpbhfa")},m(l,u){H(l,e,u),s[t].m(e,null),i=!0},p(l,u){let c=t;t=a(l),t===c?s[t].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),r=s[t],r?r.p(l,u):(r=s[t]=o[t](l),r.c()),x(r,1),r.m(e,null))},i(l){i||(x(r),i=!0)},o(l){D(r),i=!1},d(l){l&&j(e),s[t].d()}}}function mce(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p;return o=new Jt({props:{data:jf}}),f=new Jt({props:{data:vF}}),{c(){e=B("table"),t=B("tbody"),r=B("tr"),i=B("td"),$(o.$$.fragment),s=K(),a=B("td"),l=Se(n[3]),u=Se(` validation errors
              `),c=B("div"),$(f.$$.fragment),C(i,"class","jse-validation-error-icon svelte-zpbhfa"),C(c,"class","jse-validation-errors-expand svelte-zpbhfa"),C(a,"class","jse-validation-error-count svelte-zpbhfa"),C(r,"class","jse-validation-error svelte-zpbhfa"),C(e,"class","jse-validation-errors-overview-collapsed svelte-zpbhfa")},m(m,g){H(m,e,g),T(e,t),T(t,r),T(r,i),Q(o,i,null),T(r,s),T(r,a),T(a,l),T(a,u),T(a,c),Q(f,c,null),d=!0,h||(p=le(r,"click",n[5]),h=!0)},p(m,g){(!d||g&8)&&ze(l,m[3])},i(m){d||(x(o.$$.fragment,m),x(f.$$.fragment,m),d=!0)},o(m){D(o.$$.fragment,m),D(f.$$.fragment,m),d=!1},d(m){m&&j(e),Z(o),Z(f),h=!1,p()}}}function gce(n){let e,t,r,i,o=Tb(n[0],Dd),s=[];for(let u=0;u<o.length;u+=1)s[u]=$5(X5(n,o,u));const a=u=>D(s[u],1,1,()=>{s[u]=null});let l=n[3]>Dd&&eT(n);return{c(){e=B("table"),t=B("tbody");for(let u=0;u<s.length;u+=1)s[u].c();r=K(),l&&l.c(),C(e,"class","jse-validation-errors-overview-expanded svelte-zpbhfa")},m(u,c){H(u,e,c),T(e,t);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(t,null);T(t,r),l&&l.m(t,null),i=!0},p(u,c){if(c&19){o=Tb(u[0],Dd);let f;for(f=0;f<o.length;f+=1){const d=X5(u,o,f);s[f]?(s[f].p(d,c),x(s[f],1)):(s[f]=$5(d),s[f].c(),x(s[f],1),s[f].m(t,r))}for(de(),f=o.length;f<s.length;f+=1)a(f);he()}u[3]>Dd?l?l.p(u,c):(l=eT(u),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i(u){if(!i){for(let c=0;c<o.length;c+=1)x(s[c]);i=!0}},o(u){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)D(s[c]);i=!1},d(u){u&&j(e),rn(s,u),l&&l.d()}}}function Z5(n){let e,t,r,i,o;return t=new Jt({props:{data:ble}}),{c(){e=B("button"),$(t.$$.fragment),C(e,"type","button"),C(e,"class","jse-validation-errors-collapse svelte-zpbhfa"),C(e,"title","Collapse validation errors")},m(s,a){H(s,e,a),Q(t,e,null),r=!0,i||(o=le(e,"click",Fs(n[4])),i=!0)},p:pe,i(s){r||(x(t.$$.fragment,s),r=!0)},o(s){D(t.$$.fragment,s),r=!1},d(s){s&&j(e),Z(t),i=!1,o()}}}function $5(n){let e,t,r,i,o,s=lo(n[7].path)+"",a,l,u,c=n[7].message+"",f,d,h,p,m,g;r=new Jt({props:{data:jf}});let v=n[9]===0&&n[0].length>1&&Z5(n);function b(){return n[6](n[7])}return{c(){e=B("tr"),t=B("td"),$(r.$$.fragment),i=K(),o=B("td"),a=Se(s),l=K(),u=B("td"),f=Se(c),d=K(),h=B("td"),v&&v.c(),C(t,"class","jse-validation-error-icon svelte-zpbhfa"),C(o,"class","jse-validation-error-path svelte-zpbhfa"),C(u,"class","jse-validation-error-message svelte-zpbhfa"),C(h,"class","jse-validation-error-action svelte-zpbhfa"),C(e,"class","jse-validation-error svelte-zpbhfa")},m(w,_){H(w,e,_),T(e,t),Q(r,t,null),T(e,i),T(e,o),T(o,a),T(e,l),T(e,u),T(u,f),T(e,d),T(e,h),v&&v.m(h,null),p=!0,m||(g=le(e,"click",b),m=!0)},p(w,_){n=w,(!p||_&1)&&s!==(s=lo(n[7].path)+"")&&ze(a,s),(!p||_&1)&&c!==(c=n[7].message+"")&&ze(f,c),n[9]===0&&n[0].length>1?v?(v.p(n,_),_&1&&x(v,1)):(v=Z5(n),v.c(),x(v,1),v.m(h,null)):v&&(de(),D(v,1,1,()=>{v=null}),he())},i(w){p||(x(r.$$.fragment,w),x(v),p=!0)},o(w){D(r.$$.fragment,w),D(v),p=!1},d(w){w&&j(e),Z(r),v&&v.d(),m=!1,g()}}}function eT(n){let e,t,r,i,o,s,a,l=n[3]-Dd+"",u,c,f,d;return{c(){e=B("tr"),t=B("td"),r=K(),i=B("td"),o=K(),s=B("td"),a=Se("(and "),u=Se(l),c=Se(" more errors)"),f=K(),d=B("td"),C(t,"class","svelte-zpbhfa"),C(i,"class","svelte-zpbhfa"),C(s,"class","svelte-zpbhfa"),C(d,"class","svelte-zpbhfa"),C(e,"class","jse-validation-error svelte-zpbhfa")},m(h,p){H(h,e,p),T(e,t),T(e,r),T(e,i),T(e,o),T(e,s),T(s,a),T(s,u),T(s,c),T(e,f),T(e,d)},p(h,p){p&8&&l!==(l=h[3]-Dd+"")&&ze(u,l)},d(h){h&&j(e)}}}function vce(n){let e=!$t(n[0]),t,r,i=e&&Q5(n);return{c(){i&&i.c(),t=Ze()},m(o,s){i&&i.m(o,s),H(o,t,s),r=!0},p(o,[s]){s&1&&(e=!$t(o[0])),e?i?(i.p(o,s),s&1&&x(i,1)):(i=Q5(o),i.c(),x(i,1),i.m(t.parentNode,t)):i&&(de(),D(i,1,1,()=>{i=null}),he())},i(o){r||(x(i),r=!0)},o(o){D(i),r=!1},d(o){i&&i.d(o),o&&j(t)}}}function bce(n,e,t){let r,{validationErrors:i}=e,{selectError:o}=e,s=!0;function a(){t(2,s=!1)}function l(){t(2,s=!0)}const u=c=>{setTimeout(()=>o(c))};return n.$$set=c=>{"validationErrors"in c&&t(0,i=c.validationErrors),"selectError"in c&&t(1,o=c.selectError)},n.$$.update=()=>{n.$$.dirty&1&&t(3,r=i.length)},[i,o,s,r,a,l,u]}class yce extends ye{constructor(e){super(),be(this,e,bce,vce,Rt,{validationErrors:0,selectError:1})}}const Kx=yce,_ce=typeof navigator<"u"?navigator.platform.toUpperCase().indexOf("MAC")>=0:!1;function wce(n){let e,t,r,i,o,s,a,l,u;return s=new Jt({props:{data:xh}}),{c(){e=B("div"),t=B("div"),r=Se(n[0]),i=K(),o=B("button"),$(s.$$.fragment),C(t,"class","jse-title svelte-17t8gc5"),C(o,"type","button"),C(o,"class","jse-close svelte-17t8gc5"),C(e,"class","jse-header svelte-17t8gc5")},m(c,f){H(c,e,f),T(e,t),T(t,r),T(e,i),T(e,o),Q(s,o,null),a=!0,l||(u=le(o,"click",n[3]),l=!0)},p(c,[f]){(!a||f&1)&&ze(r,c[0])},i(c){a||(x(s.$$.fragment,c),a=!0)},o(c){D(s.$$.fragment,c),a=!1},d(c){c&&j(e),Z(s),l=!1,u()}}}function kce(n,e,t){let{title:r="Modal"}=e,{onClose:i=void 0}=e;const{close:o}=pr("simple-modal"),s=()=>{i?i():o()};return n.$$set=a=>{"title"in a&&t(0,r=a.title),"onClose"in a&&t(1,i=a.onClose)},[r,i,o,s]}class Cce extends ye{constructor(e){super(),be(this,e,kce,wce,Rt,{title:0,onClose:1})}}const Jx=Cce;function Sce(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S,E;return t=new Jx({props:{title:"Copying and pasting"}}),{c(){e=B("div"),$(t.$$.fragment),r=K(),i=B("div"),o=B("div"),o.textContent="These actions are unavailable via the menu. Please use:",s=K(),a=B("div"),l=B("div"),u=B("div"),u.textContent=`${n[1]}+C`,c=Se(`
        for copy`),f=K(),d=B("div"),h=B("div"),h.textContent=`${n[1]}+X`,p=Se(`
        for cut`),m=K(),g=B("div"),v=B("div"),v.textContent=`${n[1]}+V`,b=Se(`
        for paste`),w=K(),_=B("div"),y=B("button"),y.textContent="Close",C(u,"class","jse-key svelte-19rmccg"),C(l,"class","jse-shortcut"),C(h,"class","jse-key svelte-19rmccg"),C(d,"class","jse-shortcut"),C(v,"class","jse-key svelte-19rmccg"),C(g,"class","jse-shortcut"),C(a,"class","jse-shortcuts svelte-19rmccg"),C(y,"type","button"),C(y,"class","jse-primary svelte-19rmccg"),C(_,"class","jse-actions svelte-19rmccg"),C(i,"class","jse-modal-contents svelte-19rmccg"),C(e,"class","jse-modal jse-copy-paste svelte-19rmccg")},m(M,R){H(M,e,R),Q(t,e,null),T(e,r),T(e,i),T(i,o),T(i,s),T(i,a),T(a,l),T(l,u),T(l,c),T(a,f),T(a,d),T(d,h),T(d,p),T(a,m),T(a,g),T(g,v),T(g,b),T(i,w),T(i,_),T(_,y),k=!0,S||(E=le(y,"click",n[2]),S=!0)},p:pe,i(M){k||(x(t.$$.fragment,M),k=!0)},o(M){D(t.$$.fragment,M),k=!1},d(M){M&&j(e),Z(t),S=!1,E()}}}function xce(n){const{close:e}=pr("simple-modal");return[e,_ce?"":"Ctrl",()=>e()]}class Ece extends ye{constructor(e){super(),be(this,e,xce,Sce,Rt,{})}}const IF=Ece;function NF(n){return n?n.type==="space"||n.space===!0:!1}function h_(n){return n?n.type==="separator"||n.separator===!0:!1}function Ace(n){return n?n.type==="label"&&typeof n.text=="string":!1}function Eg(n){return n?typeof n.onClick=="function":!1}function Yx(n){return n?n.type==="dropdown-button"&&Eg(n.main)&&Array.isArray(n.items):!1}function Mce(n){return n?n.type==="row"&&Array.isArray(n.items):!1}function Tce(n){return n?n.type==="column"&&Array.isArray(n.items):!1}function tT(n){return Cn(n)&&Cn(n.parseError)}function Oce(n){return Cn(n)&&Array.isArray(n.validationErrors)}function Dce(n){return Cn(n)&&Array.isArray(n.path)&&typeof n.message=="string"&&"severity"in n}function Rce(n){return Cn(n)&&Dce(n)&&typeof n.isChildError=="boolean"}function BF(n){return Cn(n)&&typeof n.action=="function"&&Cn(n.props)}const Pce=n=>({}),nT=n=>({});function rT(n,e,t){const r=n.slice();return r[3]=e[t],r}const Ice=n=>({}),iT=n=>({});function Nce(n){let e=lT(n[3])+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&1&&e!==(e=lT(r[3])+"")&&ze(t,e)},i:pe,o:pe,d(r){r&&j(t)}}}function Bce(n){let e,t,r,i,o,s,a,l,u=n[3].icon&&oT(n),c=n[3].text&&sT(n);return{c(){e=B("button"),u&&u.c(),t=K(),c&&c.c(),C(e,"type","button"),C(e,"class",r="jse-button "+n[3].className+" svelte-7pi0n9"),C(e,"title",i=n[3].title),e.disabled=o=n[3].disabled||!1},m(f,d){H(f,e,d),u&&u.m(e,null),T(e,t),c&&c.m(e,null),s=!0,a||(l=le(e,"click",function(){dr(n[3].onClick)&&n[3].onClick.apply(this,arguments)}),a=!0)},p(f,d){n=f,n[3].icon?u?(u.p(n,d),d&1&&x(u,1)):(u=oT(n),u.c(),x(u,1),u.m(e,t)):u&&(de(),D(u,1,1,()=>{u=null}),he()),n[3].text?c?c.p(n,d):(c=sT(n),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!s||d&1&&r!==(r="jse-button "+n[3].className+" svelte-7pi0n9"))&&C(e,"class",r),(!s||d&1&&i!==(i=n[3].title))&&C(e,"title",i),(!s||d&1&&o!==(o=n[3].disabled||!1))&&(e.disabled=o)},i(f){s||(x(u),s=!0)},o(f){D(u),s=!1},d(f){f&&j(e),u&&u.d(),c&&c.d(),a=!1,l()}}}function Lce(n){let e;return{c(){e=B("div"),C(e,"class","jse-space svelte-7pi0n9")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}function Fce(n){let e;return{c(){e=B("div"),C(e,"class","jse-separator svelte-7pi0n9")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}function oT(n){let e,t;return e=new Jt({props:{data:n[3].icon}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.data=r[3].icon),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function sT(n){let e=n[3].text+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&1&&e!==(e=r[3].text+"")&&ze(t,e)},d(r){r&&j(t)}}}function aT(n){let e,t,r,i,o,s,a;const l=[Fce,Lce,Bce,Nce],u=[];function c(f,d){return d&1&&(e=null),d&1&&(t=null),d&1&&(r=null),e==null&&(e=!!h_(f[3])),e?0:(t==null&&(t=!!NF(f[3])),t?1:(r==null&&(r=!!Eg(f[3])),r?2:3))}return i=c(n,-1),o=u[i]=l[i](n),{c(){o.c(),s=Ze()},m(f,d){u[i].m(f,d),H(f,s,d),a=!0},p(f,d){let h=i;i=c(f,d),i===h?u[i].p(f,d):(de(),D(u[h],1,1,()=>{u[h]=null}),he(),o=u[i],o?o.p(f,d):(o=u[i]=l[i](f),o.c()),x(o,1),o.m(s.parentNode,s))},i(f){a||(x(o),a=!0)},o(f){D(o),a=!1},d(f){u[i].d(f),f&&j(s)}}}function zce(n){let e,t,r,i;const o=n[2].left,s=Je(o,n,n[1],iT);let a=n[0],l=[];for(let d=0;d<a.length;d+=1)l[d]=aT(rT(n,a,d));const u=d=>D(l[d],1,1,()=>{l[d]=null}),c=n[2].right,f=Je(c,n,n[1],nT);return{c(){e=B("div"),s&&s.c(),t=K();for(let d=0;d<l.length;d+=1)l[d].c();r=K(),f&&f.c(),C(e,"class","jse-menu svelte-7pi0n9")},m(d,h){H(d,e,h),s&&s.m(e,null),T(e,t);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(e,null);T(e,r),f&&f.m(e,null),i=!0},p(d,[h]){if(s&&s.p&&(!i||h&2)&&Xe(s,o,d,d[1],i?Ye(o,d[1],h,Ice):Qe(d[1]),iT),h&1){a=d[0];let p;for(p=0;p<a.length;p+=1){const m=rT(d,a,p);l[p]?(l[p].p(m,h),x(l[p],1)):(l[p]=aT(m),l[p].c(),x(l[p],1),l[p].m(e,r))}for(de(),p=a.length;p<l.length;p+=1)u(p);he()}f&&f.p&&(!i||h&2)&&Xe(f,c,d,d[1],i?Ye(c,d[1],h,Pce):Qe(d[1]),nT)},i(d){if(!i){x(s,d);for(let h=0;h<a.length;h+=1)x(l[h]);x(f,d),i=!0}},o(d){D(s,d),l=l.filter(Boolean);for(let h=0;h<l.length;h+=1)D(l[h]);D(f,d),i=!1},d(d){d&&j(e),s&&s.d(d),rn(l,d),f&&f.d(d)}}}function lT(n){return console.error("Unknown type of menu item",n),"???"}function jce(n,e,t){let{$$slots:r={},$$scope:i}=e,{items:o=[]}=e;return n.$$set=s=>{"items"in s&&t(0,o=s.items),"$$scope"in s&&t(1,i=s.$$scope)},[o,i,r]}class Hce extends ye{constructor(e){super(),be(this,e,jce,zce,Rt,{items:0})}}const p_=Hce;function Vce(n){let e;return{c(){e=B("div"),e.textContent="Repair invalid JSON, then click apply",C(e,"slot","left"),C(e,"class","jse-info svelte-ca0j4i")},m(t,r){H(t,e,r)},p:pe,d(t){t&&j(e)}}}function Wce(n){let e,t;return e=new Zs({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:n[5]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&32&&(o.actions=r[5]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function qce(n){let e,t;return e=new Zs({props:{type:"error",icon:jf,message:`Cannot parse JSON: ${n[2].message}`,actions:n[6]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&4&&(o.message=`Cannot parse JSON: ${r[2].message}`),i&64&&(o.actions=r[6]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Uce(n){let e,t,r,i,o,s,a,l,u,c;t=new p_({props:{items:n[4],$$slots:{left:[Vce]},$$scope:{ctx:n}}});const f=[qce,Wce],d=[];function h(p,m){return p[2]?0:1}return i=h(n),o=d[i]=f[i](n),{c(){e=B("div"),$(t.$$.fragment),r=K(),o.c(),s=K(),a=B("textarea"),a.readOnly=n[1],C(a,"class","jse-json-text svelte-ca0j4i"),C(a,"autocomplete","off"),C(a,"autocapitalize","off"),C(a,"spellcheck","false"),a.value=n[0],C(e,"class","jse-json-repair-component svelte-ca0j4i")},m(p,m){H(p,e,m),Q(t,e,null),T(e,r),d[i].m(e,null),T(e,s),T(e,a),n[16](a),l=!0,u||(c=le(a,"input",n[7]),u=!0)},p(p,[m]){const g={};m&16&&(g.items=p[4]),m&8388608&&(g.$$scope={dirty:m,ctx:p}),t.$set(g);let v=i;i=h(p),i===v?d[i].p(p,m):(de(),D(d[v],1,1,()=>{d[v]=null}),he(),o=d[i],o?o.p(p,m):(o=d[i]=f[i](p),o.c()),x(o,1),o.m(e,s)),(!l||m&2)&&(a.readOnly=p[1]),(!l||m&1)&&(a.value=p[0])},i(p){l||(x(t.$$.fragment,p),x(o),l=!0)},o(p){D(t.$$.fragment,p),D(o),l=!1},d(p){p&&j(e),Z(t),d[i].d(),n[16](null),u=!1,c()}}}function Gce(n,e,t){let r,i,o,s,a,l,{text:u=""}=e,{readOnly:c=!1}=e,{onParse:f}=e,{onRepair:d}=e,{onChange:h=null}=e,{onApply:p}=e,{onCancel:m}=e;const g=oi("jsoneditor:JSONRepair");let v;function b(R){try{return f(R),null}catch(O){return wh(R,O.message)}}function w(R){try{return d(R),!0}catch{return!1}}function _(){if(v&&r){const R=r.position!=null?r.position:0;v.setSelectionRange(R,R),v.focus()}}function y(R){g("handleChange");const O=R.target.value;u!==O&&(t(0,u=O),h&&h(u))}function k(){p(u)}function S(){try{t(0,u=d(u)),h&&h(u)}catch{}}let E;function M(R){rt[R?"unshift":"push"](()=>{v=R,t(3,v)})}return n.$$set=R=>{"text"in R&&t(0,u=R.text),"readOnly"in R&&t(1,c=R.readOnly),"onParse"in R&&t(8,f=R.onParse),"onRepair"in R&&t(9,d=R.onRepair),"onChange"in R&&t(10,h=R.onChange),"onApply"in R&&t(11,p=R.onApply),"onCancel"in R&&t(12,m=R.onCancel)},n.$$.update=()=>{n.$$.dirty&1&&t(2,r=b(u)),n.$$.dirty&1&&t(15,i=w(u)),n.$$.dirty&4&&g("error",r),n.$$.dirty&4096&&t(4,E=[{type:"space"},{type:"button",icon:xh,title:"Cancel repair",className:"jse-cancel",onClick:m}]),n.$$.dirty&57344&&t(6,a=i?[o,s]:[o]),n.$$.dirty&2&&t(5,l=[{icon:fm,text:"Apply",title:"Apply fixed JSON",disabled:c,onClick:k}])},t(13,o={icon:yle,text:"Show me",title:"Scroll to the error location",onClick:_}),t(14,s={icon:s_,text:"Auto repair",title:"Automatically repair JSON",onClick:S}),[u,c,r,v,E,l,a,y,f,d,h,p,m,o,s,i,M]}class Kce extends ye{constructor(e){super(),be(this,e,Gce,Uce,Rt,{text:0,readOnly:1,onParse:8,onRepair:9,onChange:10,onApply:11,onCancel:12})}}const Jce=Kce;let wd=[];function uT(n){if(n.key==="Escape"){const e=jt(wd);e&&e()}}function m_(n,e){return $t(wd)&&window.addEventListener("keydown",uT),wd.push(e),{destroy:()=>{wd=wd.filter(t=>t!==e),$t(wd)&&window.removeEventListener("keydown",uT)}}}function Yce(n){let e,t,r,i,o,s;function a(u){n[7](u)}let l={onParse:n[1],onRepair:n[2],onApply:n[4],onCancel:n[5]};return n[0]!==void 0&&(l.text=n[0]),t=new Jce({props:l}),rt.push(()=>fr(t,"text",a)),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-modal jse-repair svelte-rn18r0")},m(u,c){H(u,e,c),Q(t,e,null),i=!0,o||(s=Mn(m_.call(null,e,n[3])),o=!0)},p(u,[c]){const f={};c&2&&(f.onParse=u[1]),c&4&&(f.onRepair=u[2]),!r&&c&1&&(r=!0,f.text=u[0],cr(()=>r=!1)),t.$set(f)},i(u){i||(x(t.$$.fragment,u),i=!0)},o(u){D(t.$$.fragment,u),i=!1},d(u){u&&j(e),Z(t),o=!1,s()}}}function Xce(n,e,t){let{text:r}=e,{onParse:i}=e,{onRepair:o}=e,{onApply:s}=e;const{close:a}=pr("simple-modal");function l(f){a(),s(f)}function u(){a()}function c(f){r=f,t(0,r)}return n.$$set=f=>{"text"in f&&t(0,r=f.text),"onParse"in f&&t(1,i=f.onParse),"onRepair"in f&&t(2,o=f.onRepair),"onApply"in f&&t(6,s=f.onApply)},[r,i,o,a,l,u,s,c]}class Qce extends ye{constructor(e){super(),be(this,e,Xce,Yce,Rt,{text:0,onParse:1,onRepair:2,onApply:6})}}const LF=Qce;function cT(n){let e,t;return e=new Jt({props:{data:n[0].icon}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.data=r[0].icon),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function fT(n){let e=n[0].text+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&1&&e!==(e=r[0].text+"")&&ze(t,e)},d(r){r&&j(t)}}}function Zce(n){let e,t,r,i,o,s,a,l,u=n[0].icon&&cT(n),c=n[0].text&&fT(n);return{c(){e=B("button"),u&&u.c(),t=K(),c&&c.c(),C(e,"type","button"),C(e,"class",r=qn(Ba("jse-context-menu-button",n[1],n[0].className))+" svelte-9lvnxh"),C(e,"title",i=n[0].title),e.disabled=o=n[0].disabled||!1},m(f,d){H(f,e,d),u&&u.m(e,null),T(e,t),c&&c.m(e,null),s=!0,a||(l=le(e,"click",n[3]),a=!0)},p(f,[d]){f[0].icon?u?(u.p(f,d),d&1&&x(u,1)):(u=cT(f),u.c(),x(u,1),u.m(e,t)):u&&(de(),D(u,1,1,()=>{u=null}),he()),f[0].text?c?c.p(f,d):(c=fT(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!s||d&3&&r!==(r=qn(Ba("jse-context-menu-button",f[1],f[0].className))+" svelte-9lvnxh"))&&C(e,"class",r),(!s||d&1&&i!==(i=f[0].title))&&C(e,"title",i),(!s||d&1&&o!==(o=f[0].disabled||!1))&&(e.disabled=o)},i(f){s||(x(u),s=!0)},o(f){D(u),s=!1},d(f){f&&j(e),u&&u.d(),c&&c.d(),a=!1,l()}}}function $ce(n,e,t){let{item:r}=e,{className:i=void 0}=e,{onCloseContextMenu:o}=e;const s=a=>{o(),r.onClick(a)};return n.$$set=a=>{"item"in a&&t(0,r=a.item),"className"in a&&t(1,i=a.className),"onCloseContextMenu"in a&&t(2,o=a.onCloseContextMenu)},[r,i,o,s]}class efe extends ye{constructor(e){super(),be(this,e,$ce,Zce,Be,{item:0,className:1,onCloseContextMenu:2})}}const Xx=efe;function dT(n,e,t){const r=n.slice();return r[11]=e[t],r}const tfe=n=>({}),hT=n=>({});function pT(n){let e,t;return e=new Jt({props:{data:n[11].icon}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.data=r[11].icon),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function mT(n){let e,t,r,i=n[11].text+"",o,s,a,l,u,c,f,d,h=n[11].icon&&pT(n);function p(...m){return n[9](n[11],...m)}return{c(){e=B("li"),t=B("button"),h&&h.c(),r=K(),o=Se(i),u=K(),C(t,"type","button"),C(t,"title",s=n[11].title),t.disabled=a=n[11].disabled,C(t,"class",l=qn(n[11].className)+" svelte-124kopg"),C(e,"class","svelte-124kopg")},m(m,g){H(m,e,g),T(e,t),h&&h.m(t,null),T(t,r),T(t,o),T(e,u),c=!0,f||(d=le(t,"click",p),f=!0)},p(m,g){n=m,n[11].icon?h?(h.p(n,g),g&1&&x(h,1)):(h=pT(n),h.c(),x(h,1),h.m(t,r)):h&&(de(),D(h,1,1,()=>{h=null}),he()),(!c||g&1)&&i!==(i=n[11].text+"")&&ze(o,i),(!c||g&1&&s!==(s=n[11].title))&&C(t,"title",s),(!c||g&1&&a!==(a=n[11].disabled))&&(t.disabled=a),(!c||g&1&&l!==(l=qn(n[11].className)+" svelte-124kopg"))&&C(t,"class",l)},i(m){c||(x(h),c=!0)},o(m){D(h),c=!1},d(m){m&&j(e),h&&h.d(),f=!1,d()}}}function nfe(n){let e,t,r,i,o,s,a,l,u,c;const f=n[8].defaultItem,d=Je(f,n,n[7],hT);i=new Jt({props:{data:Ko}});let h=n[0],p=[];for(let g=0;g<h.length;g+=1)p[g]=mT(dT(n,h,g));const m=g=>D(p[g],1,1,()=>{p[g]=null});return{c(){e=B("div"),d&&d.c(),t=K(),r=B("button"),$(i.$$.fragment),o=K(),s=B("div"),a=B("ul");for(let g=0;g<p.length;g+=1)p[g].c();C(r,"type","button"),C(r,"class","jse-open-dropdown svelte-124kopg"),C(r,"data-type","jse-open-dropdown"),r.disabled=n[4],oe(r,"jse-visible",n[3]),C(a,"class","svelte-124kopg"),C(s,"class","jse-dropdown-items svelte-124kopg"),sr(s,"width",n[2]),oe(s,"jse-visible",n[3]),C(e,"role","button"),C(e,"tabindex","0"),C(e,"class","jse-dropdown-button svelte-124kopg"),C(e,"title",n[1])},m(g,v){H(g,e,v),d&&d.m(e,null),T(e,t),T(e,r),Q(i,r,null),T(e,o),T(e,s),T(s,a);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(a,null);l=!0,u||(c=[le(r,"click",n[5]),le(e,"click",n[6])],u=!0)},p(g,[v]){if(d&&d.p&&(!l||v&128)&&Xe(d,f,g,g[7],l?Ye(f,g[7],v,tfe):Qe(g[7]),hT),(!l||v&16)&&(r.disabled=g[4]),(!l||v&8)&&oe(r,"jse-visible",g[3]),v&1){h=g[0];let b;for(b=0;b<h.length;b+=1){const w=dT(g,h,b);p[b]?(p[b].p(w,v),x(p[b],1)):(p[b]=mT(w),p[b].c(),x(p[b],1),p[b].m(a,null))}for(de(),b=h.length;b<p.length;b+=1)m(b);he()}(!l||v&4)&&sr(s,"width",g[2]),(!l||v&8)&&oe(s,"jse-visible",g[3]),(!l||v&2)&&C(e,"title",g[1])},i(g){if(!l){x(d,g),x(i.$$.fragment,g);for(let v=0;v<h.length;v+=1)x(p[v]);l=!0}},o(g){D(d,g),D(i.$$.fragment,g),p=p.filter(Boolean);for(let v=0;v<p.length;v+=1)D(p[v]);l=!1},d(g){g&&j(e),d&&d.d(g),Z(i),rn(p,g),u=!1,It(c)}}}function rfe(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{items:s=[]}=e,{title:a=void 0}=e,{width:l="120px"}=e,u=!1;function c(){const p=u;setTimeout(()=>t(3,u=!p))}function f(){t(3,u=!1)}function d(p){cc(p)==="Escape"&&(p.preventDefault(),t(3,u=!1))}Tn(()=>{document.addEventListener("click",f),document.addEventListener("keydown",d)}),Kr(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",d)});const h=(p,m)=>p.onClick(m);return n.$$set=p=>{"items"in p&&t(0,s=p.items),"title"in p&&t(1,a=p.title),"width"in p&&t(2,l=p.width),"$$scope"in p&&t(7,o=p.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(4,r=s.every(p=>p.disabled===!0))},[s,a,l,u,r,c,f,o,i,h]}class ife extends ye{constructor(e){super(),be(this,e,rfe,nfe,Rt,{items:0,title:1,width:2})}}const ofe=ife;function gT(n){let e,t;return e=new Jt({props:{data:n[0].main.icon}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.data=r[0].main.icon),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function sfe(n){let e,t,r=n[0].main.text+"",i,o,s,a,l,u,c,f=n[0].main.icon&&gT(n);return{c(){e=B("button"),f&&f.c(),t=K(),i=Se(r),C(e,"class",o=qn(Ba("jse-context-menu-button",n[1],n[0].main.className))+" svelte-9lvnxh"),C(e,"type","button"),C(e,"slot","defaultItem"),C(e,"title",s=n[0].main.title),e.disabled=a=n[0].main.disabled||!1},m(d,h){H(d,e,h),f&&f.m(e,null),T(e,t),T(e,i),l=!0,u||(c=le(e,"click",n[3]),u=!0)},p(d,h){d[0].main.icon?f?(f.p(d,h),h&1&&x(f,1)):(f=gT(d),f.c(),x(f,1),f.m(e,t)):f&&(de(),D(f,1,1,()=>{f=null}),he()),(!l||h&1)&&r!==(r=d[0].main.text+"")&&ze(i,r),(!l||h&3&&o!==(o=qn(Ba("jse-context-menu-button",d[1],d[0].main.className))+" svelte-9lvnxh"))&&C(e,"class",o),(!l||h&1&&s!==(s=d[0].main.title))&&C(e,"title",s),(!l||h&1&&a!==(a=d[0].main.disabled||!1))&&(e.disabled=a)},i(d){l||(x(f),l=!0)},o(d){D(f),l=!1},d(d){d&&j(e),f&&f.d(),u=!1,c()}}}function afe(n){let e,t;return e=new ofe({props:{width:n[0].width,items:n[0].items,$$slots:{defaultItem:[sfe]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.width=r[0].width),i&1&&(o.items=r[0].items),i&23&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function lfe(n,e,t){let{item:r}=e,{className:i=void 0}=e,{onCloseContextMenu:o}=e;const s=a=>{o(),r.main.onClick(a)};return n.$$set=a=>{"item"in a&&t(0,r=a.item),"className"in a&&t(1,i=a.className),"onCloseContextMenu"in a&&t(2,o=a.onCloseContextMenu)},[r,i,o,s]}class ufe extends ye{constructor(e){super(),be(this,e,lfe,afe,Be,{item:0,className:1,onCloseContextMenu:2})}}const Qx=ufe;function vT(n,e,t){const r=n.slice();return r[7]=e[t],r}function bT(n,e,t){const r=n.slice();return r[10]=e[t],r}function yT(n,e,t){const r=n.slice();return r[13]=e[t],r}function cfe(n){let e=Mh(n[7])+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&1&&e!==(e=Mh(r[7])+"")&&ze(t,e)},i:pe,o:pe,d(r){r&&j(t)}}}function ffe(n){let e;return{c(){e=B("div"),C(e,"class","jse-separator svelte-1i2edl3")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}function dfe(n){let e,t,r=n[7].items,i=[];for(let s=0;s<r.length;s+=1)i[s]=wT(bT(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){e=B("div");for(let s=0;s<i.length;s+=1)i[s].c();C(e,"class","jse-row svelte-1i2edl3")},m(s,a){H(s,e,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null);t=!0},p(s,a){if(a&3){r=s[7].items;let l;for(l=0;l<r.length;l+=1){const u=bT(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=wT(u),i[l].c(),x(i[l],1),i[l].m(e,null))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){s&&j(e),rn(i,s)}}}function hfe(n){let e,t;return e=new Qx({props:{item:n[7],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.item=r[7]),i&2&&(o.onCloseContextMenu=r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function pfe(n){let e,t;return e=new Xx({props:{item:n[7],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.item=r[7]),i&2&&(o.onCloseContextMenu=r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function mfe(n){let e=Mh(n[10])+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&1&&e!==(e=Mh(r[10])+"")&&ze(t,e)},i:pe,o:pe,d(r){r&&j(t)}}}function gfe(n){let e;return{c(){e=B("div"),C(e,"class","jse-separator svelte-1i2edl3")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}function vfe(n){let e,t,r=n[10].items,i=[];for(let s=0;s<r.length;s+=1)i[s]=_T(yT(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){e=B("div");for(let s=0;s<i.length;s+=1)i[s].c();C(e,"class","jse-column svelte-1i2edl3")},m(s,a){H(s,e,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null);t=!0},p(s,a){if(a&3){r=s[10].items;let l;for(l=0;l<r.length;l+=1){const u=yT(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=_T(u),i[l].c(),x(i[l],1),i[l].m(e,null))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){s&&j(e),rn(i,s)}}}function bfe(n){let e,t;return e=new Qx({props:{item:n[10],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.item=r[10]),i&2&&(o.onCloseContextMenu=r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function yfe(n){let e,t;return e=new Xx({props:{item:n[10],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.item=r[10]),i&2&&(o.onCloseContextMenu=r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function _fe(n){let e=Mh(n[13])+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&1&&e!==(e=Mh(r[13])+"")&&ze(t,e)},i:pe,o:pe,d(r){r&&j(t)}}}function wfe(n){let e,t=n[13].text+"",r;return{c(){e=B("div"),r=Se(t),C(e,"class","jse-label svelte-1i2edl3")},m(i,o){H(i,e,o),T(e,r)},p(i,o){o&1&&t!==(t=i[13].text+"")&&ze(r,t)},i:pe,o:pe,d(i){i&&j(e)}}}function kfe(n){let e;return{c(){e=B("div"),C(e,"class","jse-separator svelte-1i2edl3")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}function Cfe(n){let e,t;return e=new Qx({props:{className:"left",item:n[13],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.item=r[13]),i&2&&(o.onCloseContextMenu=r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Sfe(n){let e,t;return e=new Xx({props:{className:"left",item:n[13],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.item=r[13]),i&2&&(o.onCloseContextMenu=r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function _T(n){let e,t,r,i,o,s,a,l;const u=[Sfe,Cfe,kfe,wfe,_fe],c=[];function f(d,h){return h&1&&(e=null),h&1&&(t=null),h&1&&(r=null),h&1&&(i=null),e==null&&(e=!!Eg(d[13])),e?0:(t==null&&(t=!!Yx(d[13])),t?1:(r==null&&(r=!!h_(d[13])),r?2:(i==null&&(i=!!Ace(d[13])),i?3:4)))}return o=f(n,-1),s=c[o]=u[o](n),{c(){s.c(),a=Ze()},m(d,h){c[o].m(d,h),H(d,a,h),l=!0},p(d,h){let p=o;o=f(d,h),o===p?c[o].p(d,h):(de(),D(c[p],1,1,()=>{c[p]=null}),he(),s=c[o],s?s.p(d,h):(s=c[o]=u[o](d),s.c()),x(s,1),s.m(a.parentNode,a))},i(d){l||(x(s),l=!0)},o(d){D(s),l=!1},d(d){c[o].d(d),d&&j(a)}}}function wT(n){let e,t,r,i,o,s,a,l;const u=[yfe,bfe,vfe,gfe,mfe],c=[];function f(d,h){return h&1&&(e=null),h&1&&(t=null),h&1&&(r=null),h&1&&(i=null),e==null&&(e=!!Eg(d[10])),e?0:(t==null&&(t=!!Yx(d[10])),t?1:(r==null&&(r=!!Tce(d[10])),r?2:(i==null&&(i=!!h_(d[10])),i?3:4)))}return o=f(n,-1),s=c[o]=u[o](n),{c(){s.c(),a=Ze()},m(d,h){c[o].m(d,h),H(d,a,h),l=!0},p(d,h){let p=o;o=f(d,h),o===p?c[o].p(d,h):(de(),D(c[p],1,1,()=>{c[p]=null}),he(),s=c[o],s?s.p(d,h):(s=c[o]=u[o](d),s.c()),x(s,1),s.m(a.parentNode,a))},i(d){l||(x(s),l=!0)},o(d){D(s),l=!1},d(d){c[o].d(d),d&&j(a)}}}function kT(n){let e,t,r,i,o,s,a,l;const u=[pfe,hfe,dfe,ffe,cfe],c=[];function f(d,h){return h&1&&(e=null),h&1&&(t=null),h&1&&(r=null),h&1&&(i=null),e==null&&(e=!!Eg(d[7])),e?0:(t==null&&(t=!!Yx(d[7])),t?1:(r==null&&(r=!!Mce(d[7])),r?2:(i==null&&(i=!!h_(d[7])),i?3:4)))}return o=f(n,-1),s=c[o]=u[o](n),{c(){s.c(),a=Ze()},m(d,h){c[o].m(d,h),H(d,a,h),l=!0},p(d,h){let p=o;o=f(d,h),o===p?c[o].p(d,h):(de(),D(c[p],1,1,()=>{c[p]=null}),he(),s=c[o],s?s.p(d,h):(s=c[o]=u[o](d),s.c()),x(s,1),s.m(a.parentNode,a))},i(d){l||(x(s),l=!0)},o(d){D(s),l=!1},d(d){c[o].d(d),d&&j(a)}}}function CT(n){let e,t,r,i,o,s,a,l;return i=new Jt({props:{data:Ese}}),{c(){e=B("div"),t=B("div"),r=B("div"),$(i.$$.fragment),o=K(),s=B("div"),a=Se(n[2]),C(r,"class","jse-tip-icon svelte-1i2edl3"),C(s,"class","jse-tip-text"),C(t,"class","jse-tip svelte-1i2edl3"),C(e,"class","jse-row svelte-1i2edl3")},m(u,c){H(u,e,c),T(e,t),T(t,r),Q(i,r,null),T(t,o),T(t,s),T(s,a),l=!0},p(u,c){(!l||c&4)&&ze(a,u[2])},i(u){l||(x(i.$$.fragment,u),l=!0)},o(u){D(i.$$.fragment,u),l=!1},d(u){u&&j(e),Z(i)}}}function xfe(n){let e,t,r,i,o,s=n[0],a=[];for(let c=0;c<s.length;c+=1)a[c]=kT(vT(n,s,c));const l=c=>D(a[c],1,1,()=>{a[c]=null});let u=n[2]&&CT(n);return{c(){e=B("div");for(let c=0;c<a.length;c+=1)a[c].c();t=K(),u&&u.c(),C(e,"role","menu"),C(e,"tabindex","-1"),C(e,"class","jse-contextmenu svelte-1i2edl3")},m(c,f){H(c,e,f);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null);T(e,t),u&&u.m(e,null),n[5](e),r=!0,i||(o=le(e,"keydown",n[4]),i=!0)},p(c,[f]){if(f&3){s=c[0];let d;for(d=0;d<s.length;d+=1){const h=vT(c,s,d);a[d]?(a[d].p(h,f),x(a[d],1)):(a[d]=kT(h),a[d].c(),x(a[d],1),a[d].m(e,t))}for(de(),d=s.length;d<a.length;d+=1)l(d);he()}c[2]?u?(u.p(c,f),f&4&&x(u,1)):(u=CT(c),u.c(),x(u,1),u.m(e,null)):u&&(de(),D(u,1,1,()=>{u=null}),he())},i(c){if(!r){for(let f=0;f<s.length;f+=1)x(a[f]);x(u),r=!0}},o(c){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)D(a[f]);D(u),r=!1},d(c){c&&j(e),rn(a,c),u&&u.d(),n[5](null),i=!1,o()}}}function Mh(n){return console.error("Unknown type of context menu item",n),"???"}function Efe(n,e,t){let{items:r}=e,{onCloseContextMenu:i}=e,{tip:o}=e,s;Tn(()=>{const c=Array.from(s.querySelectorAll("button")).find(f=>!f.disabled);c&&c.focus()});const a={ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};function l(c){const f=cc(c),d=a[f];if(d&&c.target){c.preventDefault();const h=Array.from(s.querySelectorAll("button:not([disabled])")),p=ase({allElements:h,currentElement:c.target,direction:d,hasPrio:m=>m.getAttribute("data-type")!=="jse-open-dropdown"});p&&p.focus()}}function u(c){rt[c?"unshift":"push"](()=>{s=c,t(3,s)})}return n.$$set=c=>{"items"in c&&t(0,r=c.items),"onCloseContextMenu"in c&&t(1,i=c.onCloseContextMenu),"tip"in c&&t(2,o=c.tip)},[r,i,o,s,l,u]}class Afe extends ye{constructor(e){super(),be(this,e,Efe,xfe,Rt,{items:0,onCloseContextMenu:1,tip:2})}}const FF=Afe;function Mfe(n){let e,t;return e=new FF({props:{items:n[2],onCloseContextMenu:n[1],tip:n[0]?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&4&&(o.items=r[2]),i[0]&2&&(o.onCloseContextMenu=r[1]),i[0]&1&&(o.tip=r[0]?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Tfe(n,e,t){let r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,{json:S}=e,{documentState:E}=e,{parser:M}=e,{showTip:R}=e,{onCloseContextMenu:O}=e,{onRenderContextMenu:I}=e,{onEditKey:P}=e,{onEditValue:A}=e,{onToggleEnforceString:N}=e,{onCut:F}=e,{onCopy:V}=e,{onPaste:W}=e,{onRemove:L}=e,{onDuplicate:z}=e,{onExtract:q}=e,{onInsertBefore:te}=e,{onInsert:re}=e,{onConvert:ne}=e,{onInsertAfter:fe}=e,{onSort:ie}=e,{onTransform:G}=e;function ae(X){u?ne(X):re(X)}let Me;return n.$$set=X=>{"json"in X&&t(3,S=X.json),"documentState"in X&&t(4,E=X.documentState),"parser"in X&&t(5,M=X.parser),"showTip"in X&&t(0,R=X.showTip),"onCloseContextMenu"in X&&t(1,O=X.onCloseContextMenu),"onRenderContextMenu"in X&&t(6,I=X.onRenderContextMenu),"onEditKey"in X&&t(7,P=X.onEditKey),"onEditValue"in X&&t(8,A=X.onEditValue),"onToggleEnforceString"in X&&t(9,N=X.onToggleEnforceString),"onCut"in X&&t(10,F=X.onCut),"onCopy"in X&&t(11,V=X.onCopy),"onPaste"in X&&t(12,W=X.onPaste),"onRemove"in X&&t(13,L=X.onRemove),"onDuplicate"in X&&t(14,z=X.onDuplicate),"onExtract"in X&&t(15,q=X.onExtract),"onInsertBefore"in X&&t(16,te=X.onInsertBefore),"onInsert"in X&&t(17,re=X.onInsert),"onConvert"in X&&t(18,ne=X.onConvert),"onInsertAfter"in X&&t(19,fe=X.onInsertAfter),"onSort"in X&&t(20,ie=X.onSort),"onTransform"in X&&t(21,G=X.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&16&&t(39,r=E.selection),n.$$.dirty[0]&8&&t(41,i=S!==void 0),n.$$.dirty[1]&256&&t(33,o=!!r),n.$$.dirty[1]&256&&t(23,s=r?$t(pt(r)):!1),n.$$.dirty[0]&8|n.$$.dirty[1]&256&&t(40,a=r?ot(S,pt(r)):void 0),n.$$.dirty[1]&512&&t(37,l=Array.isArray(a)?"Edit array":Cn(a)?"Edit object":"Edit value"),n.$$.dirty[1]&1280&&t(24,u=i&&(hn(r)||hr(r)||Qt(r))),n.$$.dirty[0]&25165824|n.$$.dirty[1]&1024&&t(32,c=i&&u&&!s),n.$$.dirty[0]&8388608|n.$$.dirty[1]&1280&&t(31,f=i&&r!=null&&(hn(r)||Qt(r))&&!s),n.$$.dirty[0]&8388616|n.$$.dirty[1]&1280&&t(38,d=i&&r!=null&&Pb(r)&&!s&&!Array.isArray(ot(S,Ut(pt(r))))),n.$$.dirty[1]&1280&&t(36,h=i&&r!=null&&Pb(r)),n.$$.dirty[1]&544&&t(34,p=h&&!er(a)),n.$$.dirty[0]&16777216&&t(27,m=u),n.$$.dirty[0]&134217728&&t(26,g=m?"Convert to:":"Insert:"),n.$$.dirty[0]&134217728|n.$$.dirty[1]&4&&t(30,v=m?!1:o),n.$$.dirty[0]&134217728|n.$$.dirty[1]&772&&t(29,b=m?qv(r)&&!Cn(a):o),n.$$.dirty[0]&134217728|n.$$.dirty[1]&772&&t(28,w=m?qv(r)&&!Array.isArray(a):o),n.$$.dirty[0]&134217728|n.$$.dirty[1]&772&&t(25,_=m?qv(r)&&er(a):o),n.$$.dirty[0]&48|n.$$.dirty[1]&768&&t(35,y=r!=null&&a?Bl(a,E.enforceStringMap,Ke(pt(r)),M):!1),n.$$.dirty[0]&2142896e3|n.$$.dirty[1]&255&&t(22,Me=[{type:"row",items:[{type:"button",onClick:()=>P(),icon:$d,text:"Edit key",title:"Edit the key (Double-click on the key)",disabled:!d},{type:"dropdown-button",main:{type:"button",onClick:()=>A(),icon:$d,text:l,title:"Edit the value (Double-click on the value)",disabled:!h},width:"11em",items:[{type:"button",icon:$d,text:l,title:"Edit the value (Double-click on the value)",onClick:()=>A(),disabled:!h},{type:"button",icon:y?am:lm,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:()=>N(),disabled:!p}]}]},{type:"separator"},{type:"row",items:[{type:"dropdown-button",main:{type:"button",onClick:()=>F(!0),icon:Zd,text:"Cut",title:"Cut selected contents, formatted with indentation (Ctrl+X)",disabled:!u},width:"10em",items:[{type:"button",icon:Zd,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:()=>F(!0),disabled:!u},{type:"button",icon:Zd,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:()=>F(!1),disabled:!u}]},{type:"dropdown-button",main:{type:"button",onClick:()=>V(!0),icon:Nu,text:"Copy",title:"Copy selected contents, formatted with indentation (Ctrl+C)",disabled:!u},width:"12em",items:[{type:"button",icon:Nu,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:()=>V(!0),disabled:!u},{type:"button",icon:Nu,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:()=>V(!1),disabled:!u}]},{type:"button",onClick:()=>W(),icon:gF,text:"Paste",title:"Paste clipboard contents (Ctrl+V)",disabled:!o}]},{type:"separator"},{type:"row",items:[{type:"column",items:[{type:"button",onClick:()=>z(),icon:_F,text:"Duplicate",title:"Duplicate selected contents (Ctrl+D)",disabled:!c},{type:"button",onClick:()=>q(),icon:hle,text:"Extract",title:"Extract selected contents",disabled:!f},{type:"button",onClick:()=>ie(),icon:a_,text:"Sort",title:"Sort array or object contents",disabled:!u},{type:"button",onClick:()=>G(),icon:o_,text:"Transform",title:"Transform array or object contents (filter, sort, project)",disabled:!u},{type:"button",onClick:()=>L(),icon:fC,text:"Remove",title:"Remove selected contents (Delete)",disabled:!u}]},{type:"column",items:[{type:"label",text:g},{type:"button",onClick:()=>ae("structure"),icon:m?k1:Id,text:"Structure",title:g+" structure",disabled:!v},{type:"button",onClick:()=>ae("object"),icon:m?k1:Id,text:"Object",title:g+" structure",disabled:!b},{type:"button",onClick:()=>ae("array"),icon:m?k1:Id,text:"Array",title:g+" array",disabled:!w},{type:"button",onClick:()=>ae("value"),icon:m?k1:Id,text:"Value",title:g+" value",disabled:!_}]}]},{type:"separator"},{type:"row",items:[{type:"button",onClick:()=>te(),icon:lle,text:"Insert before",title:"Select area before current entry to insert or paste contents",disabled:!u||s},{type:"button",onClick:()=>fe(),icon:rle,text:"Insert after",title:"Select area after current entry to insert or paste contents",disabled:!u||s}]}]),n.$$.dirty[0]&4194368&&t(2,k=I(Me))},[R,O,k,S,E,M,I,P,A,N,F,V,W,L,z,q,te,re,ne,fe,ie,G,Me,s,u,_,g,m,w,b,v,f,c,o,p,y,h,l,d,r,a,i]}class Ofe extends ye{constructor(e){super(),be(this,e,Tfe,Mfe,Rt,{json:3,documentState:4,parser:5,showTip:0,onCloseContextMenu:1,onRenderContextMenu:6,onEditKey:7,onEditValue:8,onToggleEnforceString:9,onCut:10,onCopy:11,onPaste:12,onRemove:13,onDuplicate:14,onExtract:15,onInsertBefore:16,onInsert:17,onConvert:18,onInsertAfter:19,onSort:20,onTransform:21},null,[-1,-1])}}const Dfe=Ofe;function ST(n,e,t){const r=n.slice();return r[13]=e[t],r}function xT(n){let e,t,r=n[13].start+"",i,o,s=n[13].end+"",a,l,u,c;function f(){return n[12](n[13])}return{c(){e=B("button"),t=Se("show "),i=Se(r),o=Se("-"),a=Se(s),l=K(),C(e,"type","button"),C(e,"class","jse-expand-items svelte-gr6i82")},m(d,h){H(d,e,h),T(e,t),T(e,i),T(e,o),T(e,a),T(e,l),u||(c=le(e,"click",f),u=!0)},p(d,h){n=d,h&16&&r!==(r=n[13].start+"")&&ze(i,r),h&16&&s!==(s=n[13].end+"")&&ze(a,s)},d(d){d&&j(e),u=!1,c()}}}function Rfe(n){let e,t,r,i,o,s,a,l,u,c,f=n[4],d=[];for(let h=0;h<f.length;h+=1)d[h]=xT(ST(n,f,h));return{c(){e=B("div"),t=B("div"),r=B("div"),i=Se("Items "),o=Se(n[3]),s=Se("-"),a=Se(n[2]),l=K();for(let h=0;h<d.length;h+=1)d[h].c();C(r,"class","jse-text svelte-gr6i82"),C(e,"role","none"),C(e,"class","jse-collapsed-items svelte-gr6i82"),oe(e,"jse-selected",n[5]),sr(e,"--level",n[0].length+2)},m(h,p){H(h,e,p),T(e,t),T(t,r),T(r,i),T(r,o),T(r,s),T(r,a),T(t,l);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(t,null);u||(c=le(e,"mousemove",Pfe),u=!0)},p(h,[p]){if(p&8&&ze(o,h[3]),p&4&&ze(a,h[2]),p&19){f=h[4];let m;for(m=0;m<f.length;m+=1){const g=ST(h,f,m);d[m]?d[m].p(g,p):(d[m]=xT(g),d[m].c(),d[m].m(t,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=f.length}p&32&&oe(e,"jse-selected",h[5]),p&1&&sr(e,"--level",h[0].length+2)},i:pe,o:pe,d(h){h&&j(e),rn(d,h),u=!1,c()}}}function Pfe(n){n.stopPropagation()}function Ife(n,e,t){let r,i,o,s,a,{visibleSections:l}=e,{sectionIndex:u}=e,{total:c}=e,{path:f}=e,{selection:d}=e,{onExpandSection:h}=e,{context:p}=e;const m=g=>h(f,g);return n.$$set=g=>{"visibleSections"in g&&t(6,l=g.visibleSections),"sectionIndex"in g&&t(7,u=g.sectionIndex),"total"in g&&t(8,c=g.total),"path"in g&&t(0,f=g.path),"selection"in g&&t(9,d=g.selection),"onExpandSection"in g&&t(1,h=g.onExpandSection),"context"in g&&t(10,p=g.context)},n.$$.update=()=>{n.$$.dirty&192&&t(11,r=l[u]),n.$$.dirty&2048&&t(3,i=r.end),n.$$.dirty&448&&t(2,o=l[u+1]?l[u+1].start:c),n.$$.dirty&1545&&t(5,s=cm(p.getJson(),d,f.concat(String(i)))),n.$$.dirty&12&&t(4,a=Zse(i,o))},[f,h,o,i,a,s,l,u,c,d,p,r,m]}class Nfe extends ye{constructor(e){super(),be(this,e,Ife,Rfe,Rt,{visibleSections:6,sectionIndex:7,total:8,path:0,selection:9,onExpandSection:1,context:10})}}const Bfe=Nfe;function Lfe(n){let e,t,r,i,o;return t=new Jt({props:{data:Ko}}),{c(){e=B("button"),$(t.$$.fragment),C(e,"type","button"),C(e,"class","jse-context-menu-pointer svelte-11pcr4t"),C(e,"title",hx),oe(e,"jse-selected",n[0])},m(s,a){H(s,e,a),Q(t,e,null),r=!0,i||(o=le(e,"click",n[1]),i=!0)},p(s,[a]){(!r||a&1)&&oe(e,"jse-selected",s[0])},i(s){r||(x(t.$$.fragment,s),r=!0)},o(s){D(t.$$.fragment,s),r=!1},d(s){s&&j(e),Z(t),i=!1,o()}}}function Ffe(n,e,t){let{selected:r}=e,{onContextMenu:i}=e;function o(s){let a=s.target;for(;a&&a.nodeName!=="BUTTON";)a=a.parentNode;a&&i({anchor:a,left:0,top:0,width:yl,height:bl,offsetTop:2,offsetLeft:0,showTip:!0})}return n.$$set=s=>{"selected"in s&&t(0,r=s.selected),"onContextMenu"in s&&t(2,i=s.onContextMenu)},[r,o,i]}class zfe extends ye{constructor(e){super(),be(this,e,Ffe,Lfe,Rt,{selected:0,onContextMenu:2})}}const dc=zfe;function jfe(n){let e,t,r,i,o,s,a;const l=[Wfe,Vfe],u=[];function c(f,d){return f[1]?0:1}return t=c(n),r=u[t]=l[t](n),{c(){e=B("div"),r.c(),C(e,"role","none"),C(e,"data-type","selectable-key"),C(e,"class",i=qn(n[6](n[0]))+" svelte-1y4e50b")},m(f,d){H(f,e,d),u[t].m(e,null),o=!0,s||(a=le(e,"dblclick",n[5]),s=!0)},p(f,d){let h=t;t=c(f),t===h?u[t].p(f,d):(de(),D(u[h],1,1,()=>{u[h]=null}),he(),r=u[t],r?r.p(f,d):(r=u[t]=l[t](f),r.c()),x(r,1),r.m(e,null)),(!o||d&1&&i!==(i=qn(f[6](f[0]))+" svelte-1y4e50b"))&&C(e,"class",i)},i(f){o||(x(r),o=!0)},o(f){D(r),o=!1},d(f){f&&j(e),u[t].d(),s=!1,a()}}}function Hfe(n){let e,t;return e=new uF({props:{value:n[2].normalization.escapeValue(n[0]),shortText:!0,onChange:n[7],onCancel:n[8],onFind:n[2].onFind}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&5&&(o.value=r[2].normalization.escapeValue(r[0])),i&4&&(o.onFind=r[2].onFind),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Vfe(n){let e=pf(n[2].normalization.escapeValue(n[0]))+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&5&&e!==(e=pf(r[2].normalization.escapeValue(r[0]))+"")&&ze(t,e)},i:pe,o:pe,d(r){r&&j(t)}}}function Wfe(n){let e,t;return e=new mF({props:{text:n[2].normalization.escapeValue(n[0]),searchResultItems:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&5&&(o.text=r[2].normalization.escapeValue(r[0])),i&2&&(o.searchResultItems=r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function ET(n){let e,t;return e=new dc({props:{selected:!0,onContextMenu:n[2].onContextMenu}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&4&&(o.onContextMenu=r[2].onContextMenu),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function qfe(n){let e,t,r,i,o;const s=[Hfe,jfe],a=[];function l(c,f){return!c[2].readOnly&&c[4]?0:1}e=l(n),t=a[e]=s[e](n);let u=!n[2].readOnly&&n[3]&&!n[4]&&ET(n);return{c(){t.c(),r=K(),u&&u.c(),i=Ze()},m(c,f){a[e].m(c,f),H(c,r,f),u&&u.m(c,f),H(c,i,f),o=!0},p(c,[f]){let d=e;e=l(c),e===d?a[e].p(c,f):(de(),D(a[d],1,1,()=>{a[d]=null}),he(),t=a[e],t?t.p(c,f):(t=a[e]=s[e](c),t.c()),x(t,1),t.m(r.parentNode,r)),!c[2].readOnly&&c[3]&&!c[4]?u?(u.p(c,f),f&28&&x(u,1)):(u=ET(c),u.c(),x(u,1),u.m(i.parentNode,i)):u&&(de(),D(u,1,1,()=>{u=null}),he())},i(c){o||(x(t),x(u),o=!0)},o(c){D(t),D(u),o=!1},d(c){a[e].d(c),c&&j(r),u&&u.d(c),c&&j(i)}}}function Ufe(n,e,t){let r,i,{path:o}=e,{key:s}=e,{selection:a}=e,{searchResultItems:l}=e,{onUpdateKey:u}=e,{context:c}=e;function f(m){!i&&!c.readOnly&&(m.preventDefault(),c.onSelect($o(o,!0)))}function d(m){return Ba("jse-key",{"jse-empty":m===""})}function h(m,g){const v=u(s,c.normalization.unescapeValue(m)),b=Ut(o).concat(v);c.onSelect(g===Iu.nextInside?Bt(b,!1):$o(b,!1)),g!==Iu.self&&c.focus()}function p(){c.onSelect($o(o,!1)),c.focus()}return n.$$set=m=>{"path"in m&&t(9,o=m.path),"key"in m&&t(0,s=m.key),"selection"in m&&t(10,a=m.selection),"searchResultItems"in m&&t(1,l=m.searchResultItems),"onUpdateKey"in m&&t(11,u=m.onUpdateKey),"context"in m&&t(2,c=m.context)},n.$$.update=()=>{n.$$.dirty&1536&&t(3,r=a?hr(a)&&Wt(a.path,o):!1),n.$$.dirty&1032&&t(4,i=r&&Pi(a))},[s,l,c,r,i,f,d,h,p,o,a,u]}class Gfe extends ye{constructor(e){super(),be(this,e,Ufe,qfe,Rt,{path:9,key:0,selection:10,searchResultItems:1,onUpdateKey:11,context:2})}}const Kfe=Gfe;function AT(n,e,t){const r=n.slice();return r[8]=e[t],r}function Jfe(n){const e=n.slice(),t=e[8].action;return e[11]=t,e}function Yfe(n){let e=n[8].component,t,r,i=MT(n);return{c(){i.c(),t=Ze()},m(o,s){i.m(o,s),H(o,t,s),r=!0},p(o,s){s&1&&Rt(e,e=o[8].component)?(de(),D(i,1,1,pe),he(),i=MT(o),i.c(),x(i,1),i.m(t.parentNode,t)):i.p(o,s)},i(o){r||(x(i),r=!0)},o(o){D(i),r=!1},d(o){o&&j(t),i.d(o)}}}function Xfe(n){let e=n[8].action,t,r=TT(n);return{c(){r.c(),t=Ze()},m(i,o){r.m(i,o),H(i,t,o)},p(i,o){o&1&&Rt(e,e=i[8].action)?(r.d(1),r=TT(i),r.c(),r.m(t.parentNode,t)):r.p(i,o)},i:pe,o:pe,d(i){i&&j(t),r.d(i)}}}function MT(n){let e,t,r;const i=[n[8].props];var o=n[8].component;function s(a){let l={};for(let u=0;u<i.length;u+=1)l=Te(l,i[u]);return{props:l}}return o&&(e=Ht(o,s())),{c(){e&&$(e.$$.fragment),t=Ze()},m(a,l){e&&Q(e,a,l),H(a,t,l),r=!0},p(a,l){const u=l&1?Ot(i,[an(a[8].props)]):{};if(l&1&&o!==(o=a[8].component)){if(e){de();const c=e;D(c.$$.fragment,1,0,()=>{Z(c,1)}),he()}o?(e=Ht(o,s()),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&x(e.$$.fragment,a),r=!0)},o(a){e&&D(e.$$.fragment,a),r=!1},d(a){a&&j(t),e&&Z(e,a)}}}function TT(n){let e,t,r,i;return{c(){e=B("div"),C(e,"role","button"),C(e,"tabindex","-1"),C(e,"class","jse-value jse-readonly-password"),C(e,"data-type","selectable-value")},m(o,s){H(o,e,s),r||(i=Mn(t=n[11].call(null,e,n[8].props)),r=!0)},p(o,s){n=o,t&&dr(t.update)&&s&1&&t.update.call(null,n[8].props)},d(o){o&&j(e),r=!1,i()}}}function OT(n){let e,t,r,i,o;const s=[Xfe,Yfe],a=[];function l(c,f){return f&1&&(e=null),e==null&&(e=!!BF(c[8])),e?0:1}function u(c,f){return f===0?Jfe(c):c}return t=l(n,-1),r=a[t]=s[t](u(n,t)),{c(){r.c(),i=Ze()},m(c,f){a[t].m(c,f),H(c,i,f),o=!0},p(c,f){let d=t;t=l(c,f),t===d?a[t].p(u(c,t),f):(de(),D(a[d],1,1,()=>{a[d]=null}),he(),r=a[t],r?r.p(u(c,t),f):(r=a[t]=s[t](u(c,t)),r.c()),x(r,1),r.m(i.parentNode,i))},i(c){o||(x(r),o=!0)},o(c){D(r),o=!1},d(c){a[t].d(c),c&&j(i)}}}function Qfe(n){let e,t,r=n[0],i=[];for(let s=0;s<r.length;s+=1)i[s]=OT(AT(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,[a]){if(a&1){r=s[0];let l;for(l=0;l<r.length;l+=1){const u=AT(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=OT(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function Zfe(n,e,t){let r,i,{path:o}=e,{value:s}=e,{context:a}=e,{enforceString:l}=e,{selection:u}=e,{searchResultItems:c}=e;return n.$$set=f=>{"path"in f&&t(1,o=f.path),"value"in f&&t(2,s=f.value),"context"in f&&t(3,a=f.context),"enforceString"in f&&t(4,l=f.enforceString),"selection"in f&&t(5,u=f.selection),"searchResultItems"in f&&t(6,c=f.searchResultItems)},n.$$.update=()=>{n.$$.dirty&32&&t(7,r=Qt(u)&&Pi(u)),n.$$.dirty&254&&t(0,i=a.onRenderValue({path:o,value:s,readOnly:a.readOnly,enforceString:l,isEditing:r,parser:a.parser,normalization:a.normalization,selection:u,searchResultItems:c,onPatch:a.onPatch,onPasteJson:a.onPasteJson,onSelect:a.onSelect,onFind:a.onFind,findNextInside:a.findNextInside,focus:a.focus}))},[i,o,s,a,l,u,c,r]}let $fe=class extends ye{constructor(e){super(),be(this,e,Zfe,Qfe,Rt,{path:1,value:2,context:3,enforceString:4,selection:5,searchResultItems:6})}};const ede=$fe,jr={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function Jw({json:n,documentState:e,deltaY:t,items:r}){if(!e.selection)return{operations:void 0,updatedSelection:null,offset:0};const i=e.selection,o=t<0?tde({json:n,selection:i,deltaY:t,items:r}):nde({json:n,selection:i,deltaY:t,items:r});if(!o||o.offset===0)return{operations:void 0,updatedSelection:null,offset:0};const s=Sae(n,i,o),a=Ut(Ll(n,i)),l=ot(n,a);if(Array.isArray(l)){const u=rde({items:r,json:n,selection:i,offset:o.offset});return{operations:s,updatedSelection:u,offset:o.offset}}else return{operations:s,updatedSelection:null,offset:o.offset}}function tde({json:n,items:e,selection:t,deltaY:r}){const i=Ll(n,t),o=e.findIndex(f=>Wt(f.path,i)),s=()=>{var f;return(f=e[a-1])==null?void 0:f.height};let a=o,l=0;for(;s()!==void 0&&Math.abs(r)>l+s()/2;)l+=s(),a-=1;const u=e[a].path,c=a-o;return a!==o&&e[a]!==void 0?{beforePath:u,offset:c}:void 0}function nde({json:n,items:e,selection:t,deltaY:r}){var m;const i=fc(n,t),o=e.findIndex(g=>Wt(g.path,i));let s=0,a=o;const l=()=>{var g;return(g=e[a+1])==null?void 0:g.height};for(;l()!==void 0&&Math.abs(r)>s+l()/2;)s+=l(),a+=1;const u=Ut(i),c=ot(n,u),d=Array.isArray(c)?a:a+1,h=(m=e[d])==null?void 0:m.path,p=a-o;return h?{beforePath:h,offset:p}:{append:!0,offset:p}}function rde({items:n,json:e,selection:t,offset:r}){var c,f;const i=Ll(e,t),o=fc(e,t),s=n.findIndex(d=>Wt(d.path,i)),a=n.findIndex(d=>Wt(d.path,o)),l=(c=n[s+r])==null?void 0:c.path,u=(f=n[a+r])==null?void 0:f.path;return Oi(l,u)}function ide(n,e){if(!n)return;const t={};for(const r of Object.keys(n))e(r,n[r])&&(t[r]=n[r]);return Object.keys(t).length>0?t:void 0}function oa(n,e){return ide(n,t=>j2(t,e))}function ode(n){let e,t,r,i,o,s;return t=new Jt({props:{data:jf}}),{c(){e=B("button"),$(t.$$.fragment),C(e,"type","button"),C(e,"class","jse-validation-error svelte-g0bfge")},m(a,l){H(a,e,l),Q(t,e,null),i=!0,o||(s=[le(e,"click",function(){dr(n[0])&&n[0].apply(this,arguments)}),Mn(r=zx.call(null,e,{text:n[1],...n[2]}))],o=!0)},p(a,[l]){n=a,r&&dr(r.update)&&l&2&&r.update.call(null,{text:n[1],...n[2]})},i(a){i||(x(t.$$.fragment,a),i=!0)},o(a){D(t.$$.fragment,a),i=!1},d(a){a&&j(e),Z(t),o=!1,It(s)}}}function sde(n,e,t){let r;const i=pr("absolute-popup");let{validationError:o}=e,{onExpand:s}=e;return n.$$set=a=>{"validationError"in a&&t(3,o=a.validationError),"onExpand"in a&&t(0,s=a.onExpand)},n.$$.update=()=>{n.$$.dirty&8&&t(1,r=Rce(o)&&o.isChildError?"Contains invalid data":o.message)},[s,r,i,o]}class ade extends ye{constructor(e){super(),be(this,e,sde,ode,Be,{validationError:3,onExpand:0})}}const fp=ade,lde=n=>({}),DT=n=>({});function RT(n,e,t){const r=n.slice();return r[52]=e[t],r}const ude=n=>({}),PT=n=>({});function IT(n,e,t){const r=n.slice();return r[46]=e[t],r[48]=t,r}function NT(n,e,t){const r=n.slice();return r[49]=e[t],r}const cde=n=>({}),BT=n=>({});function fde(n){let e,t,r,i,o,s,a=!n[8].readOnly&&n[16]&&n[7]&&(Qt(n[7])||hn(n[7]))&&!Pi(n[7])&&Wt(pt(n[7]),n[1]),l,u,c;const f=n[33].identifier,d=Je(f,n,n[34],DT);let h=!n[17]&&LT();o=new ede({props:{path:n[1],value:n[0],enforceString:n[13]||!1,selection:n[16]?n[7]:null,searchResultItems:r5(n[6],n[9]),context:n[8]}});let p=a&&FT(n),m=n[15]&&zT(n),g=!n[17]&&jT(n);return{c(){e=B("div"),t=B("div"),d&&d.c(),r=K(),h&&h.c(),i=K(),$(o.$$.fragment),s=K(),p&&p.c(),l=K(),m&&m.c(),u=K(),g&&g.c(),C(t,"class","jse-contents svelte-yxg7gq"),C(e,"class","jse-contents-outer svelte-yxg7gq")},m(v,b){H(v,e,b),T(e,t),d&&d.m(t,null),T(t,r),h&&h.m(t,null),T(t,i),Q(o,t,null),T(t,s),p&&p.m(t,null),T(e,l),m&&m.m(e,null),T(e,u),g&&g.m(e,null),c=!0},p(v,b){d&&d.p&&(!c||b[1]&8)&&Xe(d,f,v,v[34],c?Ye(f,v[34],b,lde):Qe(v[34]),DT),v[17]?h&&(h.d(1),h=null):h||(h=LT(),h.c(),h.m(t,i));const w={};b[0]&2&&(w.path=v[1]),b[0]&1&&(w.value=v[0]),b[0]&8192&&(w.enforceString=v[13]||!1),b[0]&65664&&(w.selection=v[16]?v[7]:null),b[0]&576&&(w.searchResultItems=r5(v[6],v[9])),b[0]&256&&(w.context=v[8]),o.$set(w),b[0]&65922&&(a=!v[8].readOnly&&v[16]&&v[7]&&(Qt(v[7])||hn(v[7]))&&!Pi(v[7])&&Wt(pt(v[7]),v[1])),a?p?(p.p(v,b),b[0]&65922&&x(p,1)):(p=FT(v),p.c(),x(p,1),p.m(t,null)):p&&(de(),D(p,1,1,()=>{p=null}),he()),v[15]?m?(m.p(v,b),b[0]&32768&&x(m,1)):(m=zT(v),m.c(),x(m,1),m.m(e,u)):m&&(de(),D(m,1,1,()=>{m=null}),he()),v[17]?g&&(g.d(1),g=null):g?g.p(v,b):(g=jT(v),g.c(),g.m(e,null))},i(v){c||(x(d,v),x(o.$$.fragment,v),x(p),x(m),c=!0)},o(v){D(d,v),D(o.$$.fragment,v),D(p),D(m),c=!1},d(v){v&&j(e),d&&d.d(v),h&&h.d(),Z(o),p&&p.d(),m&&m.d(),g&&g.d()}}}function dde(n){let e,t,r,i,o,s,a,l,u,c,f,d=!n[8].readOnly&&n[16]&&n[7]&&(Qt(n[7])||hn(n[7]))&&!Pi(n[7])&&Wt(pt(n[7]),n[1]),h,p,m,g,v,b,w;const _=[mde,pde],y=[];function k(L,z){return L[12]?0:1}i=k(n),o=y[i]=_[i](n);const S=n[33].identifier,E=Je(S,n,n[34],PT);let M=!n[17]&&HT();function R(L,z){return L[12]?vde:gde}let O=R(n),I=O(n),P=d&&VT(n),A=n[15]&&(!n[12]||!n[15].isChildError)&&WT(n);function N(L,z){if(L[12])return yde;if(!L[17])return bde}let F=N(n),V=F&&F(n),W=n[12]&&qT(n);return{c(){e=B("div"),t=B("div"),r=B("button"),o.c(),s=K(),E&&E.c(),a=K(),M&&M.c(),l=K(),u=B("div"),c=B("div"),I.c(),f=K(),P&&P.c(),h=K(),A&&A.c(),p=K(),V&&V.c(),m=K(),W&&W.c(),g=Ze(),C(r,"type","button"),C(r,"class","jse-expand svelte-yxg7gq"),C(r,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),C(c,"class","jse-meta-inner svelte-yxg7gq"),C(u,"class","jse-meta svelte-yxg7gq"),C(u,"data-type","selectable-value"),C(t,"class","jse-header svelte-yxg7gq"),C(e,"class","jse-header-outer svelte-yxg7gq")},m(L,z){H(L,e,z),T(e,t),T(t,r),y[i].m(r,null),T(t,s),E&&E.m(t,null),T(t,a),M&&M.m(t,null),T(t,l),T(t,u),T(u,c),I.m(c,null),T(t,f),P&&P.m(t,null),T(e,h),A&&A.m(e,null),T(e,p),V&&V.m(e,null),H(L,m,z),W&&W.m(L,z),H(L,g,z),v=!0,b||(w=le(r,"click",n[20]),b=!0)},p(L,z){let q=i;i=k(L),i===q?y[i].p(L,z):(de(),D(y[q],1,1,()=>{y[q]=null}),he(),o=y[i],o?o.p(L,z):(o=y[i]=_[i](L),o.c()),x(o,1),o.m(r,null)),E&&E.p&&(!v||z[1]&8)&&Xe(E,S,L,L[34],v?Ye(S,L[34],z,ude):Qe(L[34]),PT),L[17]?M&&(M.d(1),M=null):M||(M=HT(),M.c(),M.m(t,l)),O===(O=R(L))&&I?I.p(L,z):(I.d(1),I=O(L),I&&(I.c(),I.m(c,null))),z[0]&65922&&(d=!L[8].readOnly&&L[16]&&L[7]&&(Qt(L[7])||hn(L[7]))&&!Pi(L[7])&&Wt(pt(L[7]),L[1])),d?P?(P.p(L,z),z[0]&65922&&x(P,1)):(P=VT(L),P.c(),x(P,1),P.m(t,null)):P&&(de(),D(P,1,1,()=>{P=null}),he()),L[15]&&(!L[12]||!L[15].isChildError)?A?(A.p(L,z),z[0]&36864&&x(A,1)):(A=WT(L),A.c(),x(A,1),A.m(e,p)):A&&(de(),D(A,1,1,()=>{A=null}),he()),F===(F=N(L))&&V?V.p(L,z):(V&&V.d(1),V=F&&F(L),V&&(V.c(),V.m(e,null))),L[12]?W?(W.p(L,z),z[0]&4096&&x(W,1)):(W=qT(L),W.c(),x(W,1),W.m(g.parentNode,g)):W&&(de(),D(W,1,1,()=>{W=null}),he())},i(L){v||(x(o),x(E,L),x(P),x(A),x(W),v=!0)},o(L){D(o),D(E,L),D(P),D(A),D(W),v=!1},d(L){L&&j(e),y[i].d(),E&&E.d(L),M&&M.d(),I.d(),P&&P.d(),A&&A.d(),V&&V.d(),L&&j(m),W&&W.d(L),L&&j(g),b=!1,w()}}}function hde(n){let e,t,r,i,o,s,a,l,u,c,f,d=!n[8].readOnly&&n[16]&&n[7]&&(Qt(n[7])||hn(n[7]))&&!Pi(n[7])&&Wt(pt(n[7]),n[1]),h,p,m,g,v,b,w;const _=[kde,wde],y=[];function k(L,z){return L[12]?0:1}i=k(n),o=y[i]=_[i](n);const S=n[33].identifier,E=Je(S,n,n[34],BT);let M=!n[17]&&JT();function R(L,z){return L[12]?Sde:Cde}let O=R(n),I=O(n),P=d&&YT(n),A=n[15]&&(!n[12]||!n[15].isChildError)&&XT(n);function N(L,z){return L[12]?Ede:xde}let F=N(n),V=F(n),W=n[12]&&QT(n);return{c(){e=B("div"),t=B("div"),r=B("button"),o.c(),s=K(),E&&E.c(),a=K(),M&&M.c(),l=K(),u=B("div"),c=B("div"),I.c(),f=K(),P&&P.c(),h=K(),A&&A.c(),p=K(),V.c(),m=K(),W&&W.c(),g=Ze(),C(r,"type","button"),C(r,"class","jse-expand svelte-yxg7gq"),C(r,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),C(c,"class","jse-meta-inner svelte-yxg7gq"),C(c,"data-type","selectable-value"),C(u,"class","jse-meta svelte-yxg7gq"),C(t,"class","jse-header svelte-yxg7gq"),C(e,"class","jse-header-outer svelte-yxg7gq")},m(L,z){H(L,e,z),T(e,t),T(t,r),y[i].m(r,null),T(t,s),E&&E.m(t,null),T(t,a),M&&M.m(t,null),T(t,l),T(t,u),T(u,c),I.m(c,null),T(t,f),P&&P.m(t,null),T(e,h),A&&A.m(e,null),T(e,p),V.m(e,null),H(L,m,z),W&&W.m(L,z),H(L,g,z),v=!0,b||(w=le(r,"click",n[20]),b=!0)},p(L,z){let q=i;i=k(L),i===q?y[i].p(L,z):(de(),D(y[q],1,1,()=>{y[q]=null}),he(),o=y[i],o?o.p(L,z):(o=y[i]=_[i](L),o.c()),x(o,1),o.m(r,null)),E&&E.p&&(!v||z[1]&8)&&Xe(E,S,L,L[34],v?Ye(S,L[34],z,cde):Qe(L[34]),BT),L[17]?M&&(M.d(1),M=null):M||(M=JT(),M.c(),M.m(t,l)),O===(O=R(L))&&I?I.p(L,z):(I.d(1),I=O(L),I&&(I.c(),I.m(c,null))),z[0]&65922&&(d=!L[8].readOnly&&L[16]&&L[7]&&(Qt(L[7])||hn(L[7]))&&!Pi(L[7])&&Wt(pt(L[7]),L[1])),d?P?(P.p(L,z),z[0]&65922&&x(P,1)):(P=YT(L),P.c(),x(P,1),P.m(t,null)):P&&(de(),D(P,1,1,()=>{P=null}),he()),L[15]&&(!L[12]||!L[15].isChildError)?A?(A.p(L,z),z[0]&36864&&x(A,1)):(A=XT(L),A.c(),x(A,1),A.m(e,p)):A&&(de(),D(A,1,1,()=>{A=null}),he()),F===(F=N(L))&&V?V.p(L,z):(V.d(1),V=F(L),V&&(V.c(),V.m(e,null))),L[12]?W?(W.p(L,z),z[0]&4096&&x(W,1)):(W=QT(L),W.c(),x(W,1),W.m(g.parentNode,g)):W&&(de(),D(W,1,1,()=>{W=null}),he())},i(L){v||(x(o),x(E,L),x(P),x(A),x(W),v=!0)},o(L){D(o),D(E,L),D(P),D(A),D(W),v=!1},d(L){L&&j(e),y[i].d(),E&&E.d(L),M&&M.d(),I.d(),P&&P.d(),A&&A.d(),V.d(),L&&j(m),W&&W.d(L),L&&j(g),b=!1,w()}}}function LT(n){let e;return{c(){e=B("div"),e.textContent=":",C(e,"class","jse-separator svelte-yxg7gq")},m(t,r){H(t,e,r)},d(t){t&&j(e)}}}function FT(n){let e,t,r;return t=new dc({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-context-menu-pointer-anchor svelte-yxg7gq")},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.onContextMenu=i[8].onContextMenu),t.$set(s)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function zT(n){let e,t;return e=new fp({props:{validationError:n[15],onExpand:n[21]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.validationError=r[15]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function jT(n){let e,t,r;return{c(){e=B("div"),C(e,"role","none"),C(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),C(e,"data-type","insert-selection-area-after")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[29]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function pde(n){let e,t;return e=new Jt({props:{data:_u}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function mde(n){let e,t;return e=new Jt({props:{data:Ko}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function HT(n){let e;return{c(){e=B("div"),e.textContent=":",C(e,"class","jse-separator svelte-yxg7gq")},m(t,r){H(t,e,r)},d(t){t&&j(e)}}}function gde(n){let e,t,r,i=Object.keys(n[0]).length+"",o,s,a=Object.keys(n[0]).length===1?"prop":"props",l,u,c,f,d;return{c(){e=B("div"),e.textContent="{",t=K(),r=B("button"),o=Se(i),s=K(),l=Se(a),u=K(),c=B("div"),c.textContent="}",C(e,"class","jse-bracket svelte-yxg7gq"),C(r,"type","button"),C(r,"class","jse-tag svelte-yxg7gq"),C(c,"class","jse-bracket svelte-yxg7gq")},m(h,p){H(h,e,p),H(h,t,p),H(h,r,p),T(r,o),T(r,s),T(r,l),H(h,u,p),H(h,c,p),f||(d=le(r,"click",n[21]),f=!0)},p(h,p){p[0]&1&&i!==(i=Object.keys(h[0]).length+"")&&ze(o,i),p[0]&1&&a!==(a=Object.keys(h[0]).length===1?"prop":"props")&&ze(l,a)},d(h){h&&j(e),h&&j(t),h&&j(r),h&&j(u),h&&j(c),f=!1,d()}}}function vde(n){let e;return{c(){e=B("div"),e.textContent="{",C(e,"class","jse-bracket jse-expanded svelte-yxg7gq")},m(t,r){H(t,e,r)},p:pe,d(t){t&&j(e)}}}function VT(n){let e,t,r;return t=new dc({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-context-menu-pointer-anchor svelte-yxg7gq")},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.onContextMenu=i[8].onContextMenu),t.$set(s)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function WT(n){let e,t;return e=new fp({props:{validationError:n[15],onExpand:n[21]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.validationError=r[15]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function bde(n){let e,t,r;return{c(){e=B("div"),C(e,"role","none"),C(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),C(e,"data-type","insert-selection-area-after")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[29]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function yde(n){let e,t,r;return{c(){e=B("div"),C(e,"role","none"),C(e,"class","jse-insert-selection-area jse-inside svelte-yxg7gq"),C(e,"data-type","insert-selection-area-inside")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[28]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function qT(n){let e,t=!n[8].readOnly&&(n[10]===Il||n[16]&&kr(n[7])),r,i,o,s,a,l,u=t&&UT(n),c=n[18](n[1],n[0],n[2],n[3],n[4],n[5],n[6],n[7],n[11]),f=[];for(let p=0;p<c.length;p+=1)f[p]=GT(RT(n,c,p));const d=p=>D(f[p],1,1,()=>{f[p]=null});let h=!n[17]&&KT(n);return{c(){e=B("div"),u&&u.c(),r=K();for(let p=0;p<f.length;p+=1)f[p].c();i=K(),o=B("div"),s=B("div"),s.innerHTML='<div class="jse-bracket svelte-yxg7gq">}</div>',a=K(),h&&h.c(),C(e,"class","jse-props svelte-yxg7gq"),C(s,"data-type","selectable-value"),C(s,"class","jse-footer svelte-yxg7gq"),C(o,"class","jse-footer-outer svelte-yxg7gq")},m(p,m){H(p,e,m),u&&u.m(e,null),T(e,r);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(e,null);H(p,i,m),H(p,o,m),T(o,s),T(o,a),h&&h.m(o,null),l=!0},p(p,m){if(m[0]&66944&&(t=!p[8].readOnly&&(p[10]===Il||p[16]&&kr(p[7]))),t?u?(u.p(p,m),m[0]&66944&&x(u,1)):(u=UT(p),u.c(),x(u,1),u.m(e,r)):u&&(de(),D(u,1,1,()=>{u=null}),he()),m[0]&38013439){c=p[18](p[1],p[0],p[2],p[3],p[4],p[5],p[6],p[7],p[11]);let g;for(g=0;g<c.length;g+=1){const v=RT(p,c,g);f[g]?(f[g].p(v,m),x(f[g],1)):(f[g]=GT(v),f[g].c(),x(f[g],1),f[g].m(e,null))}for(de(),g=c.length;g<f.length;g+=1)d(g);he()}p[17]?h&&(h.d(1),h=null):h?h.p(p,m):(h=KT(p),h.c(),h.m(o,null))},i(p){if(!l){x(u);for(let m=0;m<c.length;m+=1)x(f[m]);l=!0}},o(p){D(u),f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)D(f[m]);l=!1},d(p){p&&j(e),u&&u.d(),rn(f,p),p&&j(i),p&&j(o),h&&h.d()}}}function UT(n){let e,t,r;return t=new dc({props:{selected:n[16]&&kr(n[7]),onContextMenu:n[30]}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-insert-area jse-inside svelte-yxg7gq"),C(e,"data-type","insert-selection-area-inside"),C(e,"title",dx),oe(e,"jse-hovered",n[10]===Il),oe(e,"jse-selected",n[16]&&kr(n[7])),sr(e,"--level",n[1].length+1)},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&65664&&(s.selected=i[16]&&kr(i[7])),t.$set(s),(!r||o[0]&1024)&&oe(e,"jse-hovered",i[10]===Il),(!r||o[0]&65664)&&oe(e,"jse-selected",i[16]&&kr(i[7])),o[0]&2&&sr(e,"--level",i[1].length+1)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function _de(n){let e,t,r,i;return t=new Kfe({props:{path:n[52].path,key:n[52].key,selection:n[52].selection,searchResultItems:n[52].keySearchResultItemsMap,context:n[8],onUpdateKey:n[22]}}),{c(){e=B("div"),$(t.$$.fragment),r=K(),C(e,"slot","identifier"),C(e,"class","jse-identifier svelte-yxg7gq")},m(o,s){H(o,e,s),Q(t,e,null),T(e,r),i=!0},p(o,s){const a={};s[0]&2303&&(a.path=o[52].path),s[0]&2303&&(a.key=o[52].key),s[0]&2303&&(a.selection=o[52].selection),s[0]&2303&&(a.searchResultItems=o[52].keySearchResultItemsMap),s[0]&256&&(a.context=o[8]),t.$set(a)},i(o){i||(x(t.$$.fragment,o),i=!0)},o(o){D(t.$$.fragment,o),i=!1},d(o){o&&j(e),Z(t)}}}function GT(n){let e,t;return e=new Zx({props:{value:n[52].value,path:n[52].path,expandedMap:n[52].expandedMap,enforceStringMap:n[52].enforceStringMap,visibleSectionsMap:n[52].visibleSectionsMap,validationErrorsMap:n[52].validationErrorsMap,searchResultItemsMap:n[52].valueSearchResultItemsMap,selection:n[52].selection,context:n[8],onDragSelectionStart:n[25],$$slots:{identifier:[_de]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&2303&&(o.value=r[52].value),i[0]&2303&&(o.path=r[52].path),i[0]&2303&&(o.expandedMap=r[52].expandedMap),i[0]&2303&&(o.enforceStringMap=r[52].enforceStringMap),i[0]&2303&&(o.visibleSectionsMap=r[52].visibleSectionsMap),i[0]&2303&&(o.validationErrorsMap=r[52].validationErrorsMap),i[0]&2303&&(o.searchResultItemsMap=r[52].valueSearchResultItemsMap),i[0]&2303&&(o.selection=r[52].selection),i[0]&256&&(o.context=r[8]),i[0]&2559|i[1]&8&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function KT(n){let e,t,r;return{c(){e=B("div"),C(e,"role","none"),C(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),C(e,"data-type","insert-selection-area-after")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[29]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function wde(n){let e,t;return e=new Jt({props:{data:_u}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function kde(n){let e,t;return e=new Jt({props:{data:Ko}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function JT(n){let e;return{c(){e=B("div"),e.textContent=":",C(e,"class","jse-separator svelte-yxg7gq")},m(t,r){H(t,e,r)},d(t){t&&j(e)}}}function Cde(n){let e,t,r,i=n[0].length+"",o,s,a=n[0].length===1?"item":"items",l,u,c,f,d;return{c(){e=B("div"),e.textContent="[",t=K(),r=B("button"),o=Se(i),s=K(),l=Se(a),u=K(),c=B("div"),c.textContent="]",C(e,"class","jse-bracket svelte-yxg7gq"),C(r,"type","button"),C(r,"class","jse-tag svelte-yxg7gq"),C(c,"class","jse-bracket svelte-yxg7gq")},m(h,p){H(h,e,p),H(h,t,p),H(h,r,p),T(r,o),T(r,s),T(r,l),H(h,u,p),H(h,c,p),f||(d=le(r,"click",n[21]),f=!0)},p(h,p){p[0]&1&&i!==(i=h[0].length+"")&&ze(o,i),p[0]&1&&a!==(a=h[0].length===1?"item":"items")&&ze(l,a)},d(h){h&&j(e),h&&j(t),h&&j(r),h&&j(u),h&&j(c),f=!1,d()}}}function Sde(n){let e,t,r,i=n[0].length+"",o,s,a=n[0].length===1?"item":"items",l,u;return{c(){e=B("div"),e.textContent="[",t=K(),r=B("span"),o=Se(i),s=K(),l=Se(a),u=Se(`
              `),C(e,"class","jse-bracket svelte-yxg7gq"),C(r,"class","jse-tag jse-expanded svelte-yxg7gq")},m(c,f){H(c,e,f),H(c,t,f),H(c,r,f),T(r,o),T(r,s),T(r,l),H(c,u,f)},p(c,f){f[0]&1&&i!==(i=c[0].length+"")&&ze(o,i),f[0]&1&&a!==(a=c[0].length===1?"item":"items")&&ze(l,a)},d(c){c&&j(e),c&&j(t),c&&j(r),c&&j(u)}}}function YT(n){let e,t,r;return t=new dc({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-context-menu-pointer-anchor svelte-yxg7gq")},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.onContextMenu=i[8].onContextMenu),t.$set(s)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function XT(n){let e,t;return e=new fp({props:{validationError:n[15],onExpand:n[21]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.validationError=r[15]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function xde(n){let e,t,r;return{c(){e=B("div"),C(e,"role","none"),C(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),C(e,"data-type","insert-selection-area-after")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[29]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function Ede(n){let e,t,r;return{c(){e=B("div"),C(e,"role","none"),C(e,"class","jse-insert-selection-area jse-inside svelte-yxg7gq"),C(e,"data-type","insert-selection-area-inside")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[28]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function QT(n){let e,t=!n[8].readOnly&&(n[10]===Il||n[16]&&kr(n[7])),r,i=[],o=new Map,s,a,l,u,c,f=t&&ZT(n),d=n[14]||cf;const h=m=>m[48];for(let m=0;m<d.length;m+=1){let g=IT(n,d,m),v=h(g);o.set(v,i[m]=tO(v,g))}let p=!n[17]&&nO(n);return{c(){e=B("div"),f&&f.c(),r=K();for(let m=0;m<i.length;m+=1)i[m].c();s=K(),a=B("div"),l=B("div"),l.innerHTML='<span class="jse-bracket svelte-yxg7gq">]</span>',u=K(),p&&p.c(),C(e,"class","jse-items svelte-yxg7gq"),C(l,"data-type","selectable-value"),C(l,"class","jse-footer svelte-yxg7gq"),C(a,"class","jse-footer-outer svelte-yxg7gq")},m(m,g){H(m,e,g),f&&f.m(e,null),T(e,r);for(let v=0;v<i.length;v+=1)i[v]&&i[v].m(e,null);H(m,s,g),H(m,a,g),T(a,l),T(a,u),p&&p.m(a,null),c=!0},p(m,g){g[0]&66944&&(t=!m[8].readOnly&&(m[10]===Il||m[16]&&kr(m[7]))),t?f?(f.p(m,g),g[0]&66944&&x(f,1)):(f=ZT(m),f.c(),x(f,1),f.m(e,r)):f&&(de(),D(f,1,1,()=>{f=null}),he()),g[0]&34097663&&(d=m[14]||cf,de(),i=zs(i,g,h,1,m,d,o,e,Rl,tO,null,IT),he()),m[17]?p&&(p.d(1),p=null):p?p.p(m,g):(p=nO(m),p.c(),p.m(a,null))},i(m){if(!c){x(f);for(let g=0;g<d.length;g+=1)x(i[g]);c=!0}},o(m){D(f);for(let g=0;g<i.length;g+=1)D(i[g]);c=!1},d(m){m&&j(e),f&&f.d();for(let g=0;g<i.length;g+=1)i[g].d();m&&j(s),m&&j(a),p&&p.d()}}}function ZT(n){let e,t,r;return t=new dc({props:{selected:n[16]&&kr(n[7]),onContextMenu:n[30]}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-insert-area jse-inside svelte-yxg7gq"),C(e,"data-type","insert-selection-area-inside"),C(e,"title",dx),oe(e,"jse-hovered",n[10]===Il),oe(e,"jse-selected",n[16]&&kr(n[7])),sr(e,"--level",n[1].length+1)},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&65664&&(s.selected=i[16]&&kr(i[7])),t.$set(s),(!r||o[0]&1024)&&oe(e,"jse-hovered",i[10]===Il),(!r||o[0]&65664)&&oe(e,"jse-selected",i[16]&&kr(i[7])),o[0]&2&&sr(e,"--level",i[1].length+1)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function Ade(n){let e,t,r=n[49].index+"",i;return{c(){e=B("div"),t=B("div"),i=Se(r),C(t,"class","jse-index svelte-yxg7gq"),C(e,"slot","identifier"),C(e,"class","jse-identifier svelte-yxg7gq")},m(o,s){H(o,e,s),T(e,t),T(t,i)},p(o,s){s[0]&18687&&r!==(r=o[49].index+"")&&ze(i,r)},d(o){o&&j(e)}}}function $T(n,e){let t,r,i;return r=new Zx({props:{value:e[49].value,path:e[49].path,expandedMap:e[49].expandedMap,enforceStringMap:e[49].enforceStringMap,visibleSectionsMap:e[49].visibleSectionsMap,validationErrorsMap:e[49].validationErrorsMap,searchResultItemsMap:e[49].searchResultItemsMap,selection:e[49].selection,context:e[8],onDragSelectionStart:e[25],$$slots:{identifier:[Ade]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=Ze(),$(r.$$.fragment),this.first=t},m(o,s){H(o,t,s),Q(r,o,s),i=!0},p(o,s){e=o;const a={};s[0]&18687&&(a.value=e[49].value),s[0]&18687&&(a.path=e[49].path),s[0]&18687&&(a.expandedMap=e[49].expandedMap),s[0]&18687&&(a.enforceStringMap=e[49].enforceStringMap),s[0]&18687&&(a.visibleSectionsMap=e[49].visibleSectionsMap),s[0]&18687&&(a.validationErrorsMap=e[49].validationErrorsMap),s[0]&18687&&(a.searchResultItemsMap=e[49].searchResultItemsMap),s[0]&18687&&(a.selection=e[49].selection),s[0]&256&&(a.context=e[8]),s[0]&18687|s[1]&8&&(a.$$scope={dirty:s,ctx:e}),r.$set(a)},i(o){i||(x(r.$$.fragment,o),i=!0)},o(o){D(r.$$.fragment,o),i=!1},d(o){o&&j(t),Z(r,o)}}}function eO(n){let e,t;return e=new Bfe({props:{visibleSections:n[14]||cf,sectionIndex:n[48],total:n[0].length,path:n[1],onExpandSection:n[8].onExpandSection,selection:n[7],context:n[8]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&16384&&(o.visibleSections=r[14]||cf),i[0]&16384&&(o.sectionIndex=r[48]),i[0]&1&&(o.total=r[0].length),i[0]&2&&(o.path=r[1]),i[0]&256&&(o.onExpandSection=r[8].onExpandSection),i[0]&128&&(o.selection=r[7]),i[0]&256&&(o.context=r[8]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function tO(n,e){let t,r=[],i=new Map,o,s,a,l=e[19](e[1],e[0],e[46],e[2],e[3],e[4],e[5],e[6],e[7],e[11]);const u=f=>f[49].index;for(let f=0;f<l.length;f+=1){let d=NT(e,l,f),h=u(d);i.set(h,r[f]=$T(h,d))}let c=e[46].end<e[0].length&&eO(e);return{key:n,first:null,c(){t=Ze();for(let f=0;f<r.length;f+=1)r[f].c();o=K(),c&&c.c(),s=Ze(),this.first=t},m(f,d){H(f,t,d);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(f,d);H(f,o,d),c&&c.m(f,d),H(f,s,d),a=!0},p(f,d){e=f,d[0]&34097663&&(l=e[19](e[1],e[0],e[46],e[2],e[3],e[4],e[5],e[6],e[7],e[11]),de(),r=zs(r,d,u,1,e,l,i,o.parentNode,Rl,$T,o,NT),he()),e[46].end<e[0].length?c?(c.p(e,d),d[0]&16385&&x(c,1)):(c=eO(e),c.c(),x(c,1),c.m(s.parentNode,s)):c&&(de(),D(c,1,1,()=>{c=null}),he())},i(f){if(!a){for(let d=0;d<l.length;d+=1)x(r[d]);x(c),a=!0}},o(f){for(let d=0;d<r.length;d+=1)D(r[d]);D(c),a=!1},d(f){f&&j(t);for(let d=0;d<r.length;d+=1)r[d].d(f);f&&j(o),c&&c.d(f),f&&j(s)}}}function nO(n){let e,t,r;return{c(){e=B("div"),C(e,"role","none"),C(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),C(e,"data-type","insert-selection-area-after")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[29]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function rO(n){let e,t,r;return t=new dc({props:{selected:n[16]&&no(n[7]),onContextMenu:n[31]}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-insert-area jse-after svelte-yxg7gq"),C(e,"data-type","insert-selection-area-after"),C(e,"title",dx),oe(e,"jse-hovered",n[10]===nm),oe(e,"jse-selected",n[16]&&no(n[7]))},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&65664&&(s.selected=i[16]&&no(i[7])),t.$set(s),(!r||o[0]&1024)&&oe(e,"jse-hovered",i[10]===nm),(!r||o[0]&65664)&&oe(e,"jse-selected",i[16]&&no(i[7]))},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function Mde(n){let e,t,r,i,o,s,a=!n[8].readOnly&&(n[10]===nm||n[16]&&no(n[7])),l,u,c,f,d;const h=[hde,dde,fde],p=[];function m(v,b){return b[0]&1&&(t=null),b[0]&1&&(r=null),t==null&&(t=!!Array.isArray(v[0])),t?0:(r==null&&(r=!!Cn(v[0])),r?1:2)}i=m(n,[-1,-1]),o=p[i]=h[i](n);let g=a&&rO(n);return{c(){e=B("div"),o.c(),s=K(),g&&g.c(),C(e,"role","treeitem"),C(e,"tabindex","-1"),C(e,"class",l=qn(Ba("jse-json-node",{"jse-expanded":n[12]},n[8].onClassName(n[1],n[0])))+" svelte-yxg7gq"),C(e,"data-path",u=Ch(n[1])),C(e,"aria-selected",n[16]),oe(e,"jse-root",n[17]),oe(e,"jse-selected",n[16]&&hn(n[7])),oe(e,"jse-selected-key",n[16]&&hr(n[7])),oe(e,"jse-selected-value",n[16]&&Qt(n[7])),oe(e,"jse-readonly",n[8].readOnly),oe(e,"jse-hovered",n[10]===q3),sr(e,"--level",n[1].length)},m(v,b){H(v,e,b),p[i].m(e,null),T(e,s),g&&g.m(e,null),c=!0,f||(d=[le(e,"mousedown",n[23]),le(e,"mousemove",n[24]),le(e,"mouseover",n[26]),le(e,"mouseout",n[27]),le(e,"focus",void 0),le(e,"blur",void 0)],f=!0)},p(v,b){let w=i;i=m(v,b),i===w?p[i].p(v,b):(de(),D(p[w],1,1,()=>{p[w]=null}),he(),o=p[i],o?o.p(v,b):(o=p[i]=h[i](v),o.c()),x(o,1),o.m(e,s)),b[0]&66944&&(a=!v[8].readOnly&&(v[10]===nm||v[16]&&no(v[7]))),a?g?(g.p(v,b),b[0]&66944&&x(g,1)):(g=rO(v),g.c(),x(g,1),g.m(e,null)):g&&(de(),D(g,1,1,()=>{g=null}),he()),(!c||b[0]&4355&&l!==(l=qn(Ba("jse-json-node",{"jse-expanded":v[12]},v[8].onClassName(v[1],v[0])))+" svelte-yxg7gq"))&&C(e,"class",l),(!c||b[0]&2&&u!==(u=Ch(v[1])))&&C(e,"data-path",u),(!c||b[0]&65536)&&C(e,"aria-selected",v[16]),(!c||b[0]&135427)&&oe(e,"jse-root",v[17]),(!c||b[0]&70019)&&oe(e,"jse-selected",v[16]&&hn(v[7])),(!c||b[0]&70019)&&oe(e,"jse-selected-key",v[16]&&hr(v[7])),(!c||b[0]&70019)&&oe(e,"jse-selected-value",v[16]&&Qt(v[7])),(!c||b[0]&4355)&&oe(e,"jse-readonly",v[8].readOnly),(!c||b[0]&5379)&&oe(e,"jse-hovered",v[10]===q3),b[0]&2&&sr(e,"--level",v[1].length)},i(v){c||(x(o),x(g),c=!0)},o(v){D(o),D(g),c=!1},d(v){v&&j(e),p[i].d(),g&&g.d(),f=!1,It(d)}}}function Tde(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{value:s}=e,{path:a}=e,{expandedMap:l}=e,{enforceStringMap:u}=e,{visibleSectionsMap:c}=e,{validationErrorsMap:f}=e,{searchResultItemsMap:d}=e,{selection:h}=e,{context:p}=e,{onDragSelectionStart:m}=e;const g=oi("jsoneditor:JSONNode");let v,b,w;const _=_se();let y,k,S,E,M,R;function O(U,Ce,Ee,Ae,De,nt,ue,Oe,Ue){let _e=Object.keys(Ce).map(it=>{const At=_(U.concat(it)),Ve=G8(y,it);return{key:it,value:Ce[it],path:At,expandedMap:oa(Ee,Ve),enforceStringMap:oa(Ae,Ve),visibleSectionsMap:oa(De,Ve),validationErrorsMap:oa(nt,Ve),keySearchResultItemsMap:Pae(ue,Ve),valueSearchResultItemsMap:oa(ue,Ve),selection:ZM(p.getJson(),Oe,At)}});return Ue&&Ue.offset!==0&&(_e=IM(_e,Ue.selectionStartIndex,Ue.selectionItemsCount,Ue.offset)),_e}function I(U,Ce,Ee,Ae,De,nt,ue,Oe,Ue,_e){const it=Ee.start,At=Math.min(Ee.end,Ce.length);let Ve=[];for(let ct=it;ct<At;ct++){const Pt=_(U.concat(String(ct))),yt=G8(y,ct);Ve.push({index:ct,value:Ce[ct],path:Pt,expandedMap:oa(Ae,yt),enforceStringMap:oa(De,yt),visibleSectionsMap:oa(nt,yt),validationErrorsMap:oa(ue,yt),searchResultItemsMap:oa(Oe,yt),selection:ZM(p.getJson(),Ue,Pt)})}if(_e&&_e.offset!==0){const ct=Ve.map(Pt=>Pt.index);Ve=IM(Ve,_e.selectionStartIndex,_e.selectionItemsCount,_e.offset);for(let Pt=0;Pt<Ve.length;Pt++)Ve[Pt].index=ct[Pt]}return Ve}function P(U){U.stopPropagation();const Ce=U.ctrlKey;p.onExpand(a,!k,Ce)}function A(U){U.stopPropagation(),p.onExpand(a,!0)}function N(U,Ce){const Ee=Sg(a,Object.keys(s),U,Ce);return p.onPatch(Ee),jt(js(Ee[0].path))}function F(U){if(ise(U.target)||U.which===1&&Rx(U.target,"BUTTON"))return;U.stopPropagation(),U.preventDefault(),p.focus(),document.addEventListener("mousemove",W,!0),document.addEventListener("mouseup",L);const Ce=zw(U.target),Ee=p.getJson(),Ae=p.getDocumentState();if(h&&Ce!==_n.after&&Ce!==_n.inside&&(h.type===Ce||h.type===_n.multi)&&cm(Ee,h,a)){U.button===0&&m(U);return}if(jr.selecting=!0,jr.selectionAnchor=a,jr.selectionAnchorType=Ce,jr.selectionFocus=a,U.shiftKey){const De=p.getDocumentState().selection;De&&p.onSelect(Oi(mf(De),a))}else if(Ce===_n.multi)if(r&&U.target.hasAttribute("data-path")){const De=jt(iF(s,Ae));p.onSelect(Fx(De))}else p.onSelect(Oi(a,a));else Ee!==void 0&&p.onSelect(QM(Ee,Ce,a))}function V(U){if(jr.selecting){U.preventDefault(),U.stopPropagation(),jr.selectionFocus==null&&window.getSelection&&window.getSelection().empty();const Ce=zw(U.target);(!Wt(a,jr.selectionFocus)||Ce!==jr.selectionAnchorType)&&(jr.selectionFocus=a,jr.selectionAnchorType=Ce,p.onSelect(Oi(jr.selectionAnchor||jr.selectionFocus,jr.selectionFocus)))}}function W(U){p.onDrag(U)}function L(U){jr.selecting&&(jr.selecting=!1,U.stopPropagation()),p.onDragEnd(),document.removeEventListener("mousemove",W,!0),document.removeEventListener("mouseup",L)}function z(){var U,Ce;return((Ce=(U=p.findElement([]))==null?void 0:U.getBoundingClientRect())==null?void 0:Ce.top)||0}function q(U,Ce){const Ae=z()-U.initialContentTop;return Ce.clientY-U.initialClientY-Ae}function te(U){if(p.readOnly||!h)return;const Ce=Ut(pt(h));if(!Wt(a,Ce)){m(U);return}const Ee=fe(h,E||cf);if(g("dragSelectionStart",{selection:h,items:Ee}),!Ee){g("Cannot drag the current selection (probably spread over multiple sections)");return}const Ae=p.getJson();if(Ae===void 0)return;const De=Ll(Ae,h),nt=Ee.findIndex(Ue=>Wt(Ue.path,De)),ue=p.getDocumentState(),{offset:Oe}=Jw({json:Ae,documentState:ue,deltaY:0,items:Ee});t(11,w={initialTarget:U.target,initialClientY:U.clientY,initialContentTop:z(),selectionStartIndex:nt,selectionItemsCount:Uu(Ae,h).length,items:Ee,offset:Oe,didMoveItems:!1}),jr.dragging=!0,document.addEventListener("mousemove",re,!0),document.addEventListener("mouseup",ne)}function re(U){if(w){const Ce=p.getJson();if(Ce===void 0)return;const Ee=p.getDocumentState(),Ae=q(w,U),{offset:De}=Jw({json:Ce,documentState:Ee,deltaY:Ae,items:w.items});De!==w.offset&&(g("drag selection",De,Ae),t(11,w={...w,offset:De,didMoveItems:!0}))}}function ne(U){if(w){const Ce=p.getJson();if(Ce===void 0)return;const Ee=p.getDocumentState(),Ae=q(w,U),{operations:De,updatedSelection:nt}=Jw({json:Ce,documentState:Ee,deltaY:Ae,items:w.items});if(De)p.onPatch(De,(ue,Oe)=>({state:{...Oe,selection:nt||h}}));else if(U.target===w.initialTarget&&!w.didMoveItems){const ue=zw(U.target),Oe=GL(U.target);Oe&&p.onSelect(QM(Ce,ue,Oe))}t(11,w=void 0),jr.dragging=!1,document.removeEventListener("mousemove",re,!0),document.removeEventListener("mouseup",ne)}}function fe(U,Ce){const Ee=[];function Ae(De){const nt=a.concat(De),ue=p.findElement(nt);ue!=null&&Ee.push({path:nt,height:ue.clientHeight})}if(Array.isArray(s)){const De=p.getJson();if(De===void 0)return null;const nt=Ll(De,U),ue=fc(De,U),Oe=parseInt(jt(nt),10),Ue=parseInt(jt(ue),10),_e=Ce.find(Ve=>Oe>=Ve.start&&Ue<=Ve.end);if(!_e)return null;const{start:it,end:At}=_e;IL(it,Math.min(s.length,At),Ve=>Ae(String(Ve)))}else Object.keys(s).forEach(Ae);return Ee}function ie(U){jr.selecting||jr.dragging||(U.stopPropagation(),Uc(U.target,"data-type","selectable-value")?t(10,v=q3):Uc(U.target,"data-type","insert-selection-area-inside")?t(10,v=Il):Uc(U.target,"data-type","insert-selection-area-after")&&t(10,v=nm),clearTimeout(b))}function G(U){U.stopPropagation(),b=window.setTimeout(()=>t(10,v=void 0))}function ae(U){U.shiftKey||(U.stopPropagation(),U.preventDefault(),p.onSelect(Fl(a)))}function Me(U){U.shiftKey||(U.stopPropagation(),U.preventDefault(),p.onSelect(zl(a)))}function X(U){p.onSelect(Fl(a)),p.onContextMenu(U)}function ge(U){p.onSelect(zl(a)),p.onContextMenu(U)}return n.$$set=U=>{"value"in U&&t(0,s=U.value),"path"in U&&t(1,a=U.path),"expandedMap"in U&&t(2,l=U.expandedMap),"enforceStringMap"in U&&t(3,u=U.enforceStringMap),"visibleSectionsMap"in U&&t(4,c=U.visibleSectionsMap),"validationErrorsMap"in U&&t(5,f=U.validationErrorsMap),"searchResultItemsMap"in U&&t(6,d=U.searchResultItemsMap),"selection"in U&&t(7,h=U.selection),"context"in U&&t(8,p=U.context),"onDragSelectionStart"in U&&t(32,m=U.onDragSelectionStart),"$$scope"in U&&t(34,o=U.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,y=Ke(a)),n.$$.dirty[0]&516&&t(12,k=l?l[y]===!0:!1),n.$$.dirty[0]&777&&t(13,S=Bl(s,u,y,p.parser)),n.$$.dirty[0]&528&&t(14,E=c?c[y]:void 0),n.$$.dirty[0]&544&&t(15,M=f?f[y]:void 0),n.$$.dirty[0]&386&&t(16,R=cm(p.getJson(),h,a)),n.$$.dirty[0]&2&&t(17,r=a.length===0)},[s,a,l,u,c,f,d,h,p,y,v,w,k,S,E,M,R,r,O,I,P,A,N,F,V,te,ie,G,ae,Me,X,ge,m,i,o]}class Zx extends ye{constructor(e){super(),be(this,e,Tde,Mde,Rt,{value:0,path:1,expandedMap:2,enforceStringMap:3,visibleSectionsMap:4,validationErrorsMap:5,searchResultItemsMap:6,selection:7,context:8,onDragSelectionStart:32},null,[-1,-1])}}const Ode=Zx,Dde={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],"","M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},Rde={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],"","m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},mC={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],"","M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},Pde={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],"","M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]};function Ide(n){let e,t;return e=new p_({props:{items:n[0]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.items=r[0]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Nde(n,e,t){let r,i,o,{json:s}=e,{selection:a}=e,{readOnly:l}=e,{showSearch:u=!1}=e,{historyState:c}=e,{onExpandAll:f}=e,{onCollapseAll:d}=e,{onUndo:h}=e,{onRedo:p}=e,{onSort:m}=e,{onTransform:g}=e,{onContextMenu:v}=e,{onCopy:b}=e,{onRenderMenu:w}=e;function _(){t(1,u=!u)}let y,k,S,E;return n.$$set=M=>{"json"in M&&t(2,s=M.json),"selection"in M&&t(3,a=M.selection),"readOnly"in M&&t(4,l=M.readOnly),"showSearch"in M&&t(1,u=M.showSearch),"historyState"in M&&t(5,c=M.historyState),"onExpandAll"in M&&t(6,f=M.onExpandAll),"onCollapseAll"in M&&t(7,d=M.onCollapseAll),"onUndo"in M&&t(8,h=M.onUndo),"onRedo"in M&&t(9,p=M.onRedo),"onSort"in M&&t(10,m=M.onSort),"onTransform"in M&&t(11,g=M.onTransform),"onContextMenu"in M&&t(12,v=M.onContextMenu),"onCopy"in M&&t(13,b=M.onCopy),"onRenderMenu"in M&&t(14,w=M.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&4&&t(20,r=s!==void 0),n.$$.dirty&1048584&&t(19,i=r&&(hn(a)||hr(a)||Qt(a))),n.$$.dirty&68&&t(15,y={type:"button",icon:Dde,title:"Expand all",className:"jse-expand-all",onClick:f,disabled:!er(s)}),n.$$.dirty&132&&t(16,k={type:"button",icon:Rde,title:"Collapse all",className:"jse-collapse-all",onClick:d,disabled:!er(s)}),n.$$.dirty&4&&t(17,S={type:"button",icon:Vx,title:"Search (Ctrl+F)",className:"jse-search",onClick:_,disabled:s===void 0}),n.$$.dirty&769844&&t(18,E=l?[y,k,{type:"separator"},{type:"button",icon:Nu,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:b,disabled:!i},{type:"separator"},S,{type:"space"}]:[y,k,{type:"separator"},{type:"button",icon:a_,title:"Sort",className:"jse-sort",onClick:m,disabled:l||s===void 0},{type:"button",icon:o_,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:g,disabled:l||s===void 0},S,{type:"button",icon:bF,title:hx,className:"jse-contextmenu",onClick:v},{type:"separator"},{type:"button",icon:Hx,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:h,disabled:!c.canUndo},{type:"button",icon:jx,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:p,disabled:!c.canRedo},{type:"space"}]),n.$$.dirty&278528&&t(0,o=w(E))},[o,u,s,a,l,c,f,d,h,p,m,g,v,b,w,y,k,S,E,i,r]}class Bde extends ye{constructor(e){super(),be(this,e,Nde,Ide,Rt,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}const Lde=Bde;function iO(n){let e,t,r,i,o,s,a;return{c(){e=B("div"),e.innerHTML="You can paste clipboard data using <b>Ctrl+V</b>, or use the following options:",t=K(),r=B("button"),r.textContent="Create object",i=K(),o=B("button"),o.textContent="Create array",C(e,"class","jse-welcome-info svelte-1x9cln8"),C(r,"title","Create an empty JSON object (press '{')"),C(r,"class","svelte-1x9cln8"),C(o,"title","Create an empty JSON array (press '[')"),C(o,"class","svelte-1x9cln8")},m(l,u){H(l,e,u),H(l,t,u),H(l,r,u),H(l,i,u),H(l,o,u),s||(a=[le(r,"click",Fs(n[4])),le(o,"click",Fs(n[5]))],s=!0)},p:pe,d(l){l&&j(e),l&&j(t),l&&j(r),l&&j(i),l&&j(o),s=!1,It(a)}}}function Fde(n){let e,t,r,i,o,s,a,l,u,c,f=!n[0]&&iO(n);return{c(){e=B("div"),t=B("div"),r=K(),i=B("div"),o=B("div"),o.textContent="Empty document",s=K(),f&&f.c(),a=K(),l=B("div"),C(t,"class","jse-space jse-before svelte-1x9cln8"),C(o,"class","jse-welcome-title"),C(i,"class","jse-contents svelte-1x9cln8"),C(l,"class","jse-space jse-after svelte-1x9cln8"),C(e,"class","jse-welcome svelte-1x9cln8"),C(e,"role","none")},m(d,h){H(d,e,h),T(e,t),T(e,r),T(e,i),T(i,o),T(i,s),f&&f.m(i,null),T(e,a),T(e,l),u||(c=le(e,"click",n[6]),u=!0)},p(d,[h]){d[0]?f&&(f.d(1),f=null):f?f.p(d,h):(f=iO(d),f.c(),f.m(i,null))},i:pe,o:pe,d(d){d&&j(e),f&&f.d(),u=!1,c()}}}function zde(n,e,t){let{readOnly:r}=e,{onCreateArray:i}=e,{onCreateObject:o}=e,{onClick:s}=e;const a=()=>o(),l=()=>i(),u=()=>s();return n.$$set=c=>{"readOnly"in c&&t(0,r=c.readOnly),"onCreateArray"in c&&t(1,i=c.onCreateArray),"onCreateObject"in c&&t(2,o=c.onCreateObject),"onClick"in c&&t(3,s=c.onClick)},[r,i,o,s,a,l,u]}class jde extends ye{constructor(e){super(),be(this,e,zde,Fde,Rt,{readOnly:0,onCreateArray:1,onCreateObject:2,onClick:3})}}const Hde=jde;var zF={exports:{}};/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var oO=function(n,e){var t,r,i=1,o=0,s=0,a=String.alphabet;function l(u,c,f){if(f){for(t=c;f=l(u,t),f<76&&f>65;)++t;return+u.slice(c-1,t)}return f=a&&a.indexOf(u.charAt(c)),f>-1?f+76:(f=u.charCodeAt(c)||0,f<45||f>127?f:f<46?65:f<48?f-1:f<58?f+18:f<65?f-11:f<91?f+11:f<97?f-37:f<123?f+5:f-63)}if((n+="")!=(e+="")){for(;i;)if(r=l(n,o++),i=l(e,s++),r<76&&i<76&&r>66&&i>66&&(r=l(n,o,o),i=l(e,s,o=t),s=t),r!=i)return r<i?-1:1}return 0};try{zF.exports=oO}catch{String.naturalCompare=oO}var Vde=zF.exports;const Wde=N2(Vde);function $x(n,e){const t=typeof n=="string"?n.toLowerCase():n,r=typeof e=="string"?e.toLowerCase():e;return Wde(t,r)}function jF(n,e=[],t=[],r=1){if(Sn(ot(n,e))){if(t===void 0)throw new Error("Cannot sort: no property selected by which to sort the array");return Ude(n,e,t,r)}if(Cn(n))return qde(n,e,r);throw new Error("Cannot sort: no array or object")}function qde(n,e=[],t=1){const r=ot(n,e),o=Object.keys(r).slice();o.sort((a,l)=>t*$x(a,l));const s=[];for(let a=0;a<o.length;a++){const l=o[a],u=Ke(e.concat(l));s.push({op:"move",from:u,path:u})}return s}function Ude(n,e=[],t=[],r=1){const i=Gde(t,r),o=ot(n,e);return[{op:"replace",path:Ke(e),value:o.slice(0).sort(i)}]}function Gde(n,e){return function(r,i){const o=ot(r,n),s=ot(i,n);return o===void 0?e:s===void 0?-e:typeof o!="string"&&typeof s!="string"?o>s?e:o<s?-e:0:e*$x(o,s)}}function sO(n,e,t){const r=n.slice();return r[4]=e[t],r}function aO(n,e){let t,r=Nl(e[4].toString(),uO)+"",i,o,s,a;function l(){return e[3](e[4])}return{key:n,first:null,c(){t=B("button"),i=Se(r),C(t,"type","button"),C(t,"class","jse-navigation-bar-dropdown-item svelte-d9nda8"),C(t,"title",o=e[4].toString()),oe(t,"jse-selected",e[4]===e[1]),this.first=t},m(u,c){H(u,t,c),T(t,i),s||(a=le(t,"click",Fs(l)),s=!0)},p(u,c){e=u,c&1&&r!==(r=Nl(e[4].toString(),uO)+"")&&ze(i,r),c&1&&o!==(o=e[4].toString())&&C(t,"title",o),c&3&&oe(t,"jse-selected",e[4]===e[1])},d(u){u&&j(t),s=!1,a()}}}function lO(n){let e,t;return{c(){e=B("button"),t=Se("..."),C(e,"type","button"),C(e,"class","jse-navigation-bar-dropdown-item svelte-d9nda8"),C(e,"title","Limited to "+e0+" items")},m(r,i){H(r,e,i),T(e,t)},p:pe,d(r){r&&j(e)}}}function Kde(n){let e,t=[],r=new Map,i,o=Tb(n[0],e0);const s=l=>l[4];for(let l=0;l<o.length;l+=1){let u=sO(n,o,l),c=s(u);r.set(c,t[l]=aO(c,u))}let a=n[0].length>e0&&lO();return{c(){e=B("div");for(let l=0;l<t.length;l+=1)t[l].c();i=K(),a&&a.c(),C(e,"class","jse-navigation-bar-dropdown svelte-d9nda8")},m(l,u){H(l,e,u);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);T(e,i),a&&a.m(e,null)},p(l,[u]){u&7&&(o=Tb(l[0],e0),t=zs(t,u,s,1,l,o,r,e,KN,aO,i,sO)),l[0].length>e0?a?a.p(l,u):(a=lO(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:pe,o:pe,d(l){l&&j(e);for(let u=0;u<t.length;u+=1)t[u].d();a&&a.d()}}}const e0=100,uO=30;function Jde(n,e,t){let{items:r}=e,{selectedItem:i}=e,{onSelect:o}=e;const s=a=>o(a);return n.$$set=a=>{"items"in a&&t(0,r=a.items),"selectedItem"in a&&t(1,i=a.selectedItem),"onSelect"in a&&t(2,o=a.onSelect)},[r,i,o,s]}class Yde extends ye{constructor(e){super(),be(this,e,Jde,Kde,Rt,{items:0,selectedItem:1,onSelect:2})}}const Xde=Yde;function cO(n){let e,t,r,i;return{c(){e=B("button"),t=Se(n[2]),C(e,"type","button"),C(e,"class","jse-navigation-bar-button svelte-5vf8zh")},m(o,s){H(o,e,s),T(e,t),r||(i=le(e,"click",n[9]),r=!0)},p(o,s){s&4&&ze(t,o[2])},d(o){o&&j(e),r=!1,i()}}}function Qde(n){let e,t,r,i,o,s,a;r=new Jt({props:{data:vF}});let l=n[2]!==void 0&&cO(n);return{c(){e=B("div"),t=B("button"),$(r.$$.fragment),i=K(),l&&l.c(),C(t,"type","button"),C(t,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-5vf8zh"),oe(t,"jse-open",n[1]),C(e,"class","jse-navigation-bar-item svelte-5vf8zh")},m(u,c){H(u,e,c),T(e,t),Q(r,t,null),T(e,i),l&&l.m(e,null),n[10](e),o=!0,s||(a=le(t,"click",n[4]),s=!0)},p(u,[c]){(!o||c&2)&&oe(t,"jse-open",u[1]),u[2]!==void 0?l?l.p(u,c):(l=cO(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(u){o||(x(r.$$.fragment,u),o=!0)},o(u){D(r.$$.fragment,u),o=!1},d(u){u&&j(e),Z(r),l&&l.d(),n[10](null),s=!1,a()}}}function Zde(n,e,t){let r,i;const{openAbsolutePopup:o,closeAbsolutePopup:s}=pr("absolute-popup");let{path:a}=e,{index:l}=e,{onSelect:u}=e,{getItems:c}=e,f,d=!1,h;function p(b){s(h),u(r.concat(b))}function m(){if(f){t(1,d=!0);const b={items:c(r),selectedItem:i,onSelect:p};h=o(Xde,b,{anchor:f,closeOnOuterClick:!0,onClose:()=>{t(1,d=!1)}})}}const g=()=>p(i);function v(b){rt[b?"unshift":"push"](()=>{f=b,t(0,f)})}return n.$$set=b=>{"path"in b&&t(5,a=b.path),"index"in b&&t(6,l=b.index),"onSelect"in b&&t(7,u=b.onSelect),"getItems"in b&&t(8,c=b.getItems)},n.$$.update=()=>{n.$$.dirty&96&&(r=a.slice(0,l)),n.$$.dirty&96&&t(2,i=a[l])},[f,d,i,p,m,a,l,u,c,g,v]}class $de extends ye{constructor(e){super(),be(this,e,Zde,Qde,Rt,{path:5,index:6,onSelect:7,getItems:8})}}const HF=$de;function e6(n){var e;if(navigator.clipboard)return navigator.clipboard.writeText(n);if((e=document.queryCommandSupported)!=null&&e.call(document,"copy")){const t=document.createElement("textarea");t.value=n,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(r){console.error(r)}finally{document.body.removeChild(t)}}else console.error("Copy failed.")}function fO(n){let e,t,r,i,o,s;return t=new Jt({props:{data:jf}}),{c(){e=B("button"),$(t.$$.fragment),C(e,"type","button"),C(e,"class","jse-navigation-bar-validation-error svelte-8rw91d")},m(a,l){H(a,e,l),Q(t,e,null),i=!0,o||(s=Mn(r=zx.call(null,e,{text:String(n[3]||""),...n[4]})),o=!0)},p(a,l){r&&dr(r.update)&&l&8&&r.update.call(null,{text:String(a[3]||""),...a[4]})},i(a){i||(x(t.$$.fragment,a),i=!0)},o(a){D(t.$$.fragment,a),i=!1},d(a){a&&j(e),Z(t),o=!1,s()}}}function dO(n){let e;return{c(){e=B("div"),e.textContent="Copied!",C(e,"class","jse-copied-text svelte-8rw91d")},m(t,r){H(t,e,r)},d(t){t&&j(e)}}}function ehe(n){let e,t,r,i,o,s,a,l,u,c,f=n[3]&&fO(n),d=n[2]&&dO();return a=new Jt({props:{data:Nu}}),{c(){e=B("div"),t=B("input"),r=K(),f&&f.c(),i=K(),d&&d.c(),o=K(),s=B("button"),$(a.$$.fragment),C(t,"type","text"),C(t,"class","jse-navigation-bar-text svelte-8rw91d"),t.value=n[0],C(s,"type","button"),C(s,"class","jse-navigation-bar-copy svelte-8rw91d"),C(s,"title","Copy selected path to the clipboard"),oe(s,"copied",n[2]),C(e,"class","jse-navigation-bar-path-editor svelte-8rw91d"),oe(e,"error",n[3])},m(h,p){H(h,e,p),T(e,t),n[15](t),T(e,r),f&&f.m(e,null),T(e,i),d&&d.m(e,null),T(e,o),T(e,s),Q(a,s,null),l=!0,u||(c=[le(t,"keydown",Fs(n[6])),le(t,"input",n[5]),le(s,"click",n[7])],u=!0)},p(h,[p]){(!l||p&1&&t.value!==h[0])&&(t.value=h[0]),h[3]?f?(f.p(h,p),p&8&&x(f,1)):(f=fO(h),f.c(),x(f,1),f.m(e,i)):f&&(de(),D(f,1,1,()=>{f=null}),he()),h[2]?d||(d=dO(),d.c(),d.m(e,o)):d&&(d.d(1),d=null),(!l||p&4)&&oe(s,"copied",h[2]),(!l||p&8)&&oe(e,"error",h[3])},i(h){l||(x(f),x(a.$$.fragment,h),l=!0)},o(h){D(f),D(a.$$.fragment,h),l=!1},d(h){h&&j(e),n[15](null),f&&f.d(),d&&d.d(),Z(a),u=!1,It(c)}}}const the=1e3;function nhe(n,e,t){let r;const i=pr("absolute-popup");let{path:o}=e,{pathParser:s}=e,{onChange:a}=e,{onClose:l}=e,{onError:u}=e,{pathExists:c}=e,f,d,h=!1,p,m=!1;Tn(()=>{g()}),Kr(()=>{clearTimeout(p)});function g(){f.focus()}function v(S){try{const E=s.parse(S);return b(E),{path:E,error:void 0}}catch(E){return{path:void 0,error:E}}}function b(S){if(!c(S))throw new Error("Path does not exist in current document")}function w(S){t(0,d=S.currentTarget.value)}function _(S){const E=cc(S);if(E==="Escape"&&l(),E==="Enter"){t(14,h=!0);const M=v(d);M.path!==void 0?a(M.path):u(M.error)}}function y(){e6(d),t(2,m=!0),p=window.setTimeout(()=>t(2,m=!1),the),g()}function k(S){rt[S?"unshift":"push"](()=>{f=S,t(1,f)})}return n.$$set=S=>{"path"in S&&t(8,o=S.path),"pathParser"in S&&t(9,s=S.pathParser),"onChange"in S&&t(10,a=S.onChange),"onClose"in S&&t(11,l=S.onClose),"onError"in S&&t(12,u=S.onError),"pathExists"in S&&t(13,c=S.pathExists)},n.$$.update=()=>{n.$$.dirty&768&&t(0,d=s.stringify(o)),n.$$.dirty&16385&&t(3,r=h?v(d).error:void 0)},[d,f,m,r,i,w,_,y,o,s,a,l,u,c,h,k]}class rhe extends ye{constructor(e){super(),be(this,e,nhe,ehe,Be,{path:8,pathParser:9,onChange:10,onClose:11,onError:12,pathExists:13})}}const ihe=rhe;function hO(n,e,t){const r=n.slice();return r[18]=e[t],r[20]=t,r}function ohe(n){let e,t;return e=new ihe({props:{path:n[3],onClose:n[11],onChange:n[12],onError:n[1],pathExists:n[8],pathParser:n[2]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&8&&(o.path=r[3]),i&2&&(o.onError=r[1]),i&4&&(o.pathParser=r[2]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function she(n){let e=[],t=new Map,r,i,o,s=n[3];const a=u=>u[20];for(let u=0;u<s.length;u+=1){let c=hO(n,s,u),f=a(c);t.set(f,e[u]=pO(f,c))}let l=n[6]&&mO(n);return{c(){for(let u=0;u<e.length;u+=1)e[u].c();r=K(),l&&l.c(),i=Ze()},m(u,c){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(u,c);H(u,r,c),l&&l.m(u,c),H(u,i,c),o=!0},p(u,c){c&648&&(s=u[3],de(),e=zs(e,c,a,1,u,s,t,r.parentNode,Rl,pO,r,hO),he()),u[6]?l?(l.p(u,c),c&64&&x(l,1)):(l=mO(u),l.c(),x(l,1),l.m(i.parentNode,i)):l&&(de(),D(l,1,1,()=>{l=null}),he())},i(u){if(!o){for(let c=0;c<s.length;c+=1)x(e[c]);x(l),o=!0}},o(u){for(let c=0;c<e.length;c+=1)D(e[c]);D(l),o=!1},d(u){for(let c=0;c<e.length;c+=1)e[c].d(u);u&&j(r),l&&l.d(u),u&&j(i)}}}function pO(n,e){let t,r,i;return r=new HF({props:{getItems:e[7],path:e[3],index:e[20],onSelect:e[9]}}),{key:n,first:null,c(){t=Ze(),$(r.$$.fragment),this.first=t},m(o,s){H(o,t,s),Q(r,o,s),i=!0},p(o,s){e=o;const a={};s&8&&(a.path=e[3]),s&8&&(a.index=e[20]),r.$set(a)},i(o){i||(x(r.$$.fragment,o),i=!0)},o(o){D(r.$$.fragment,o),i=!1},d(o){o&&j(t),Z(r,o)}}}function mO(n){let e,t;return e=new HF({props:{getItems:n[7],path:n[3],index:n[3].length,onSelect:n[9]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&8&&(o.path=r[3]),i&8&&(o.index=r[3].length),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function ahe(n){let e,t,r,i,o,s,a=!er(n[0])&&!n[5]?"Navigation bar":"",l,u,c,f,d,h,p;const m=[she,ohe],g=[];function v(b,w){return b[5]?1:0}return t=v(n),r=g[t]=m[t](n),c=new Jt({props:{data:n[5]?l5:s5}}),{c(){e=B("div"),r.c(),i=K(),o=B("button"),s=B("span"),l=Se(a),u=K(),$(c.$$.fragment),C(s,"class","jse-navigation-bar-space svelte-1tlcccj"),C(o,"type","button"),C(o,"class","jse-navigation-bar-edit svelte-1tlcccj"),C(o,"title",f=n[5]?"Cancel editing the selected path":"Edit the selected path"),oe(o,"flex",!n[5]),oe(o,"editing",n[5]),C(e,"class","jse-navigation-bar svelte-1tlcccj")},m(b,w){H(b,e,w),g[t].m(e,null),T(e,i),T(e,o),T(o,s),T(s,l),T(o,u),Q(c,o,null),n[15](e),d=!0,h||(p=le(o,"click",n[10]),h=!0)},p(b,[w]){let _=t;t=v(b),t===_?g[t].p(b,w):(de(),D(g[_],1,1,()=>{g[_]=null}),he(),r=g[t],r?r.p(b,w):(r=g[t]=m[t](b),r.c()),x(r,1),r.m(e,i)),(!d||w&33)&&a!==(a=!er(b[0])&&!b[5]?"Navigation bar":"")&&ze(l,a);const y={};w&32&&(y.data=b[5]?l5:s5),c.$set(y),(!d||w&32&&f!==(f=b[5]?"Cancel editing the selected path":"Edit the selected path"))&&C(o,"title",f),(!d||w&32)&&oe(o,"flex",!b[5]),(!d||w&32)&&oe(o,"editing",b[5])},i(b){d||(x(r),x(c.$$.fragment,b),d=!0)},o(b){D(r),D(c.$$.fragment,b),d=!1},d(b){b&&j(e),g[t].d(),Z(c),n[15](null),h=!1,p()}}}function lhe(n,e,t){let r,i;const o=oi("jsoneditor:NavigationBar");let{json:s}=e,{selection:a}=e,{onSelect:l}=e,{onError:u}=e,{pathParser:c}=e,f,d=!1;function h(y){setTimeout(()=>{if(f&&f.scrollTo){const k=f.scrollWidth-f.clientWidth;k>0&&(o("scrollTo ",k),f.scrollTo({left:k,behavior:"smooth"}))}})}function p(y){o("get items for path",y);const k=ot(s,y);if(Array.isArray(k))return Doe(0,k.length).map(String);if(Cn(k)){const E=Object.keys(k).slice(0);return E.sort($x),E}else return[]}function m(y){return Zo(s,y)}function g(y){o("select path",JSON.stringify(y)),l(Oi(y,y))}function v(){t(5,d=!d)}function b(){t(5,d=!1)}function w(y){b(),g(y)}function _(y){rt[y?"unshift":"push"](()=>{f=y,t(4,f)})}return n.$$set=y=>{"json"in y&&t(0,s=y.json),"selection"in y&&t(13,a=y.selection),"onSelect"in y&&t(14,l=y.onSelect),"onError"in y&&t(1,u=y.onError),"pathParser"in y&&t(2,c=y.pathParser)},n.$$.update=()=>{n.$$.dirty&8192&&t(3,r=a?pt(a):[]),n.$$.dirty&9&&t(6,i=er(ot(s,r))),n.$$.dirty&8&&h()},[s,u,c,r,f,d,i,p,m,g,v,b,w,a,l,_]}class uhe extends ye{constructor(e){super(),be(this,e,lhe,ahe,Rt,{json:0,selection:13,onSelect:14,onError:1,pathParser:2})}}const che=uhe;function gO(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p=n[3]!==-1?`${n[3]+1}/`:"",m,g,v,b,w,_,y,k,S,E,M,R,O,I,P,A=!n[4]&&vO(n);const N=[dhe,fhe],F=[];function V(L,z){return L[2]?0:1}a=V(n),l=F[a]=N[a](n),w=new Jt({props:{data:wle}}),k=new Jt({props:{data:sle}}),M=new Jt({props:{data:xh}});let W=n[0]&&!n[4]&&bO(n);return{c(){e=B("div"),t=B("form"),A&&A.c(),r=K(),i=B("div"),o=B("div"),s=B("div"),l.c(),u=K(),c=B("label"),f=B("input"),d=K(),h=B("div"),m=Se(p),g=Se(n[10]),v=K(),b=B("button"),$(w.$$.fragment),_=K(),y=B("button"),$(k.$$.fragment),S=K(),E=B("button"),$(M.$$.fragment),R=K(),W&&W.c(),C(s,"class","jse-search-icon svelte-184shcn"),C(f,"class","jse-search-input svelte-184shcn"),C(f,"title","Enter text to search"),C(f,"type","text"),C(f,"placeholder","Find"),C(c,"class","jse-search-input-label svelte-184shcn"),C(c,"about","jse-search input"),C(h,"class","jse-search-count svelte-184shcn"),oe(h,"jse-visible",n[8]!==""),C(b,"type","button"),C(b,"class","jse-search-next svelte-184shcn"),C(b,"title","Go to next search result (Enter)"),C(y,"type","button"),C(y,"class","jse-search-previous svelte-184shcn"),C(y,"title","Go to previous search result (Shift+Enter)"),C(E,"type","button"),C(E,"class","jse-search-clear svelte-184shcn"),C(E,"title","Close search box (Esc)"),C(o,"class","jse-search-section svelte-184shcn"),C(i,"class","jse-search-contents svelte-184shcn"),C(t,"class","jse-search-form svelte-184shcn"),C(e,"class","jse-search-box svelte-184shcn")},m(L,z){H(L,e,z),T(e,t),A&&A.m(t,null),T(t,r),T(t,i),T(i,o),T(o,s),F[a].m(s,null),T(o,u),T(o,c),T(c,f),In(f,n[8]),T(o,d),T(o,h),T(h,m),T(h,g),T(o,v),T(o,b),Q(w,b,null),T(o,_),T(o,y),Q(k,y,null),T(o,S),T(o,E),Q(M,E,null),T(i,R),W&&W.m(i,null),O=!0,I||(P=[le(f,"input",n[21]),Mn(phe.call(null,f)),le(b,"click",n[22]),le(y,"click",n[23]),le(E,"click",n[24]),le(t,"submit",n[12]),le(t,"keydown",n[13])],I=!0)},p(L,z){L[4]?A&&(de(),D(A,1,1,()=>{A=null}),he()):A?(A.p(L,z),z&16&&x(A,1)):(A=vO(L),A.c(),x(A,1),A.m(t,r));let q=a;a=V(L),a===q?F[a].p(L,z):(de(),D(F[q],1,1,()=>{F[q]=null}),he(),l=F[a],l?l.p(L,z):(l=F[a]=N[a](L),l.c()),x(l,1),l.m(s,null)),z&256&&f.value!==L[8]&&In(f,L[8]),(!O||z&8)&&p!==(p=L[3]!==-1?`${L[3]+1}/`:"")&&ze(m,p),(!O||z&1024)&&ze(g,L[10]),(!O||z&256)&&oe(h,"jse-visible",L[8]!==""),L[0]&&!L[4]?W?W.p(L,z):(W=bO(L),W.c(),W.m(i,null)):W&&(W.d(1),W=null)},i(L){O||(x(A),x(l),x(w.$$.fragment,L),x(k.$$.fragment,L),x(M.$$.fragment,L),O=!0)},o(L){D(A),D(l),D(w.$$.fragment,L),D(k.$$.fragment,L),D(M.$$.fragment,L),O=!1},d(L){L&&j(e),A&&A.d(),F[a].d(),Z(w),Z(k),Z(M),W&&W.d(),I=!1,It(P)}}}function vO(n){let e,t,r,i,o;return t=new Jt({props:{data:n[0]?Ko:_u}}),{c(){e=B("button"),$(t.$$.fragment),C(e,"type","button"),C(e,"class","jse-replace-toggle svelte-184shcn"),C(e,"title","Toggle visibility of replace options (Ctrl+H)")},m(s,a){H(s,e,a),Q(t,e,null),r=!0,i||(o=le(e,"click",n[11]),i=!0)},p(s,a){const l={};a&1&&(l.data=s[0]?Ko:_u),t.$set(l)},i(s){r||(x(t.$$.fragment,s),r=!0)},o(s){D(t.$$.fragment,s),r=!1},d(s){s&&j(e),Z(t),i=!1,o()}}}function fhe(n){let e,t;return e=new Jt({props:{data:Vx}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function dhe(n){let e,t;return e=new Jt({props:{data:ele,spin:!0}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function bO(n){let e,t,r,i,o,s,a,l;return{c(){e=B("div"),t=B("input"),r=K(),i=B("button"),i.textContent="Replace",o=K(),s=B("button"),s.textContent="All",C(t,"class","jse-replace-input svelte-184shcn"),C(t,"title","Enter replacement text"),C(t,"type","text"),C(t,"placeholder","Replace"),C(i,"type","button"),C(i,"title","Replace current occurrence (Ctrl+Enter)"),C(i,"class","svelte-184shcn"),C(s,"type","button"),C(s,"title","Replace all occurrences"),C(s,"class","svelte-184shcn"),C(e,"class","jse-replace-section svelte-184shcn")},m(u,c){H(u,e,c),T(e,t),In(t,n[9]),T(e,r),T(e,i),T(e,o),T(e,s),a||(l=[le(t,"input",n[25]),le(i,"click",n[14]),le(s,"click",n[15])],a=!0)},p(u,c){c&512&&t.value!==u[9]&&In(t,u[9])},d(u){u&&j(e),a=!1,It(l)}}}function hhe(n){let e,t,r=n[1]&&gO(n);return{c(){r&&r.c(),e=Ze()},m(i,o){r&&r.m(i,o),H(i,e,o),t=!0},p(i,[o]){i[1]?r?(r.p(i,o),o&2&&x(r,1)):(r=gO(i),r.c(),x(r,1),r.m(e.parentNode,e)):r&&(de(),D(r,1,1,()=>{r=null}),he())},i(i){t||(x(r),t=!0)},o(i){D(r),t=!1},d(i){r&&r.d(i),i&&j(e)}}}function phe(n){n.select()}function mhe(n,e,t){let r,i,{show:o=!1}=e,{searching:s}=e,{resultCount:a=0}=e,{activeIndex:l=0}=e,{showReplace:u=!1}=e,{readOnly:c=!1}=e,{onChange:f=ir}=e,{onPrevious:d=ir}=e,{onNext:h=ir}=e,{onReplace:p=ir}=e,{onReplaceAll:m=ir}=e,{onClose:g=ir}=e,v="",b="",w="";function _(){v!==""&&f(v)}function y(){t(0,u=!u&&!c)}function k(N){N.preventDefault(),v!==b?(b=v,i.cancel(),f(v)):h()}function S(N){N.stopPropagation();const F=cc(N);F==="Enter"&&(N.preventDefault(),h()),F==="Shift+Enter"&&(N.preventDefault(),d()),F==="Ctrl+Enter"&&(N.preventDefault(),u?E():h()),F==="Ctrl+H"&&(N.preventDefault(),y()),F==="Escape"&&(N.preventDefault(),g())}function E(){c||p(v,w)}function M(){c||m(v,w)}function R(){v=this.value,t(8,v)}const O=()=>h(),I=()=>d(),P=()=>g();function A(){w=this.value,t(9,w)}return n.$$set=N=>{"show"in N&&t(1,o=N.show),"searching"in N&&t(2,s=N.searching),"resultCount"in N&&t(16,a=N.resultCount),"activeIndex"in N&&t(3,l=N.activeIndex),"showReplace"in N&&t(0,u=N.showReplace),"readOnly"in N&&t(4,c=N.readOnly),"onChange"in N&&t(17,f=N.onChange),"onPrevious"in N&&t(5,d=N.onPrevious),"onNext"in N&&t(6,h=N.onNext),"onReplace"in N&&t(18,p=N.onReplace),"onReplaceAll"in N&&t(19,m=N.onReplaceAll),"onClose"in N&&t(7,g=N.onClose)},n.$$.update=()=>{n.$$.dirty&65536&&t(10,r=a>=H3?`${H3-1}+`:String(a)),n.$$.dirty&131072&&t(20,i=e_(f,BB)),n.$$.dirty&1048832&&i(v),n.$$.dirty&2&&o&&_()},[u,o,s,l,c,d,h,g,v,w,r,y,k,S,E,M,a,f,p,m,i,R,O,I,P,A]}class ghe extends ye{constructor(e){super(),be(this,e,mhe,hhe,Rt,{show:1,searching:2,resultCount:16,activeIndex:3,showReplace:0,readOnly:4,onChange:17,onPrevious:5,onNext:6,onReplace:18,onReplaceAll:19,onClose:7})}}const vhe=ghe;var yO=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function bhe(n,e){return!!(n===e||yO(n)&&yO(e))}function yhe(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!bhe(n[t],e[t]))return!1;return!0}function Ag(n,e){e===void 0&&(e=yhe);var t=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var s=n.apply(this,i);return t={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){t=null},r}const hm=Symbol("path");function _he(n,e,t=1/0){const r={};Array.isArray(n)&&Hoe(n,t,o=>{Cn(o)?VF(o,r,e):r[hm]=!0});const i=[];return hm in r&&i.push([]),WF(r,[],i,e),i}function VF(n,e,t){for(const r in n){const i=n[r],o=e[r]||(e[r]={});Cn(i)&&t?VF(i,o,t):o[hm]===void 0&&(o[hm]=!0)}}function WF(n,e,t,r){for(const i in n){const o=e.concat(i),s=n[i];s&&s[hm]===!0&&t.push(o),nr(s)&&r&&WF(s,o,t,r)}}function whe(n,e){const t=new Set(e.map(Ke)),r=new Set(n.map(Ke));for(const i of t)r.has(i)||t.delete(i);for(const i of r)t.has(i)||t.add(i);return[...t].map(js)}function khe(n,e,t,r,i,o=80){const s=Sn(t)?t.length:0,a=Che(r,i),l=n-o,u=e+2*o,c=v=>r[v]||i;let f=0,d=0;for(;d<l&&f<s;)d+=c(f),f++;f>0&&(f--,d-=c(f));let h=f,p=0;for(;p<u&&h<s;)p+=c(h),h++;let m=0;for(let v=h;v<s;v++)m+=c(v);const g=Sn(t)?t.slice(f,h):[];return{startIndex:f,endIndex:h,startHeight:d,endHeight:m,averageItemHeight:a,visibleHeight:p,visibleItems:g}}function Yw(n,e,t,r){const{rowIndex:i}=ps(n,e);let o=0;for(let s=0;s<i;s++)o+=t[s]||r;return o}function Che(n,e){const t=Object.values(n);if($t(t))return e;const r=(o,s)=>o+s;return t.reduce(r)/t.length}function She(n,e){const{rowIndex:t,columnIndex:r}=ps(pt(e),n);if(t>0){const i={rowIndex:t-1,columnIndex:r},o=Hf(i,n);return Bt(o,!1)}return e}function xhe(n,e,t){const{rowIndex:r,columnIndex:i}=ps(pt(t),e);if(r<n.length-1){const o={rowIndex:r+1,columnIndex:i},s=Hf(o,e);return Bt(s,!1)}return t}function Ehe(n,e){const{rowIndex:t,columnIndex:r}=ps(pt(e),n);if(r>0){const i={rowIndex:t,columnIndex:r-1},o=Hf(i,n);return Bt(o,!1)}return e}function Ahe(n,e){const{rowIndex:t,columnIndex:r}=ps(pt(e),n);if(r<n.length-1){const i={rowIndex:t,columnIndex:r+1},o=Hf(i,n);return Bt(o,!1)}return e}function ps(n,e){const[t,...r]=n,i=parseInt(t,10);return{rowIndex:isNaN(i)?-1:i,columnIndex:e.findIndex(o=>Gu(r,o))}}function Hf(n,e){const{rowIndex:t,columnIndex:r}=n;return[String(t),...e[r]]}function Mhe(n,e){const[t,r]=xoe(n,s=>_x(s.path[0])),i=t_(t,The),o=boe(i,s=>{const a={row:[],columns:{}};return s.forEach(l=>{const u=Ohe(l,e);u!==-1?(a.columns[u]===void 0&&(a.columns[u]=[]),a.columns[u].push(l)):a.row.push(l)}),a});return{root:r,rows:o}}function t6(n,e){if(!(!e||e.length===0))return e.length===1?e[0]:{path:n,message:"Multiple validation issues: "+e.map(t=>lo(t.path)+" "+t.message).join(", "),severity:Pl.warning}}function The(n){return parseInt(n.path[0],10)}function Ohe(n,e){const t=ps(n.path,e);return t.columnIndex!==-1?t.columnIndex:-1}function Dhe(n,e,t){return e.some(i=>Rhe(n.sortedColumn,i,t))?{...n,sortedColumn:null}:n}function Rhe(n,e,t){if(!n)return!1;if(e.op==="replace"){const r=js(e.path),{rowIndex:i,columnIndex:o}=ps(r,t),s=t.findIndex(a=>Wt(a,n.path));if(i!==-1&&o!==-1&&o!==s)return!1}return!0}function Phe(n,e=2){const t=[];function r(i,o){nr(i)&&o.length<e&&Object.keys(i).forEach(s=>{r(i[s],o.concat(s))}),Sn(i)&&t.push(o)}return r(n,[]),t}const Di=oi("jsoneditor:actions");async function qF({json:n,documentState:e,indentation:t,readOnly:r,parser:i,onPatch:o}){if(r||n===void 0||!e.selection||!up(e.selection))return;const s=lF(n,e.selection,t,i);if(s==null)return;Di("cut",{selection:e.selection,clipboard:s,indentation:t}),await e6(s);const{operations:a,newSelection:l}=dF(n,e.selection);o(a,(u,c)=>({state:{...c,selection:l}}))}async function UF({json:n,documentState:e,indentation:t,parser:r}){const i=lF(n,e.selection,t,r);i!=null&&(Di("copy",{clipboard:i,indentation:t}),await e6(i))}function GF({clipboardText:n,json:e,selection:t,readOnly:r,parser:i,onPatch:o,onChangeText:s,openRepairModal:a}){if(r)return;function l(u){if(e!==void 0){const c=t||Bt([],!1),f=fF(e,c,u,i);Di("paste",{pastedText:u,operations:f,selectionNonNull:c}),o(f,(d,h)=>{let p=h;return f.filter(m=>(FB(m)||px(m))&&er(m.value)).forEach(m=>{const g=Ea(e,m.path);p=pu(d,p,g)}),{state:p}})}else Di("paste text",{pastedText:u}),s(n,(c,f)=>{if(c)return{state:pu(c,f,[])}})}try{l(n)}catch{a(n,c=>{Di("repaired pasted text: ",c),l(c)})}}function KF({json:n,text:e,documentState:t,keepSelection:r,readOnly:i,onChange:o,onPatch:s}){if(i||!t.selection)return;const a=n!==void 0&&(hr(t.selection)||Qt(t.selection))?Oi(t.selection.path,t.selection.path):t.selection;if($t(pt(t.selection)))Di("remove root",{selection:t.selection}),o&&o({text:"",json:void 0},n!==void 0?{text:void 0,json:n}:{text:e||"",json:n},{contentErrors:null,patchResult:null});else if(n!==void 0){const{operations:l,newSelection:u}=dF(n,a);Di("remove",{operations:l,selection:t.selection,newSelection:u}),s(l,(c,f)=>({state:{...f,selection:r?t.selection:u}}))}}function Ihe({json:n,documentState:e,columns:t,readOnly:r,onPatch:i}){if(r||n===void 0||!e.selection||!up(e.selection))return;const{rowIndex:o,columnIndex:s}=ps(pt(e.selection),t);Di("duplicate row",{rowIndex:o});const a=[String(o)],l=cF(n,[a]);i(l,(u,c)=>{const f=o<n.length?o+1:o,d=Hf({rowIndex:f,columnIndex:s},t),h=Bt(d,!1);return{state:{...c,selection:h}}})}function Nhe({json:n,documentState:e,columns:t,readOnly:r,onPatch:i}){if(r||n===void 0||!e.selection||!up(e.selection))return;const{rowIndex:o}=ps(pt(e.selection),t);Di("insert before row",{rowIndex:o});const s=[String(o)],l=[{key:"",value:nr(n[0])?{}:""}],u=Pd(n,s,l);i(u)}function Bhe({json:n,documentState:e,columns:t,readOnly:r,onPatch:i}){if(r||n===void 0||!e.selection||!up(e.selection))return;const{rowIndex:o,columnIndex:s}=ps(pt(e.selection),t);Di("insert after row",{rowIndex:o});const a=o+1,l=[String(a)],c=[{key:"",value:nr(n[0])?{}:""}],f=a<n.length?Pd(n,l,c):uC(n,[],c);i(f,(d,h)=>{const p=Hf({rowIndex:a,columnIndex:s},t),m=Bt(p,!1);return{state:{...h,selection:m}}})}function Lhe({json:n,documentState:e,columns:t,readOnly:r,onPatch:i}){if(r||n===void 0||!e.selection||!up(e.selection))return;const{rowIndex:o,columnIndex:s}=ps(pt(e.selection),t);Di("remove row",{rowIndex:o});const a=[String(o)],l=Ib([a]);i(l,(u,c)=>{const f=o<u.length?o:o>0?o-1:void 0,d=f!==void 0?Bt(Hf({rowIndex:f,columnIndex:s},t),!1):null;return Di("remove row new selection",{rowIndex:o,newRowIndex:f,newSelection:d}),{state:{...c,selection:d}}})}function jb({insertType:n,selectInside:e,refJsonEditor:t,json:r,selection:i,readOnly:o,parser:s,onPatch:a,onReplaceJson:l}){if(o)return;const u=xae(r,i,n);if(r!==void 0){const c=s.stringify(u),f=fF(r,i,c,s);Di("onInsert",{insertType:n,operations:f,newValue:u,data:c});const d=jt(f.filter(h=>h.op==="add"||h.op==="replace"));a(f,(h,p)=>{if(d){const m=Ea(h,d.path);if(er(u))return{state:{...jo(h,p,m,um),selection:e?Fl(m):p.selection}};if(u===""){const g=$t(m)?null:ot(h,Ut(m));return{state:sC(h,{...p,selection:Cn(g)?$o(m,!0):Bt(m,!0)},m)}}return}}),Di("after patch"),d&&u===""&&Hb(()=>Ob(t,"",!0,Vb))}else{Di("onInsert",{insertType:n,newValue:u});const c=[];l(u,(f,d)=>({state:{...pu(f,d,c),selection:er(u)?Fl(c):Bt(c,!0)}}))}}async function JF({char:n,selectInside:e,refJsonEditor:t,json:r,selection:i,readOnly:o,parser:s,onPatch:a,onReplaceJson:l,onSelect:u}){if(!o){if(hr(i)){const c=!i.edit;u({...i,edit:!0}),Hb(()=>Ob(t,n,c,Vb));return}if(n==="{")jb({insertType:"object",selectInside:e,refJsonEditor:t,json:r,selection:i,readOnly:o,parser:s,onPatch:a,onReplaceJson:l});else if(n==="[")jb({insertType:"array",selectInside:e,refJsonEditor:t,json:r,selection:i,readOnly:o,parser:s,onPatch:a,onReplaceJson:l});else if(Qt(i)&&r!==void 0){if(!er(ot(r,i.path))){const c=!i.edit;u({...i,edit:!0}),Hb(()=>Ob(t,n,c,Vb))}}else Di("onInsertValueWithCharacter",{char:n}),await Fhe({char:n,refJsonEditor:t,json:r,selection:i,readOnly:o,parser:s,onPatch:a,onReplaceJson:l})}}async function Fhe({char:n,refJsonEditor:e,json:t,selection:r,readOnly:i,parser:o,onPatch:s,onReplaceJson:a}){if(i)return;jb({insertType:"value",selectInside:!1,refJsonEditor:e,json:t,selection:r,readOnly:i,parser:o,onPatch:s,onReplaceJson:a});const l=!Pi(r);Hb(()=>Ob(e,n,l,Vb))}function Hb(n){setTimeout(()=>setTimeout(n))}function Vb(n){n==null||n.refresh()}function zhe(n){let e,t;return{c(){e=B("div"),t=Se(n[0]),C(e,"class","jse-json-preview svelte-l2z0i3")},m(r,i){H(r,e,i),T(e,t)},p(r,[i]){i&1&&ze(t,r[0])},i:pe,o:pe,d(r){r&&j(e)}}}function jhe(n,e,t){let r,i,{text:o}=e,{json:s}=e,{indentation:a}=e,{parser:l}=e;return n.$$set=u=>{"text"in u&&t(1,o=u.text),"json"in u&&t(2,s=u.json),"indentation"in u&&t(3,a=u.indentation),"parser"in u&&t(4,l=u.parser)},n.$$.update=()=>{n.$$.dirty&6&&t(5,r=s!==void 0?{json:s}:{text:o||""}),n.$$.dirty&56&&t(0,i=Nl(iC(r,a,l),V3))},[i,o,s,a,l,r]}class Hhe extends ye{constructor(e){super(),be(this,e,jhe,zhe,Be,{text:1,json:2,indentation:3,parser:4})}}const YF=Hhe,{window:Vhe}=q4;function _O(n){let e,t,r;function i(s){n[79](s)}let o={json:n[11],selection:n[12].selection,readOnly:n[0],historyState:n[23],onExpandAll:n[41],onCollapseAll:n[42],onUndo:n[37],onRedo:n[38],onSort:n[39],onTransform:n[40],onContextMenu:n[46],onCopy:n[34],onRenderMenu:n[7]};return n[20]!==void 0&&(o.showSearch=n[20]),e=new Lde({props:o}),rt.push(()=>fr(e,"showSearch",i)),{c(){$(e.$$.fragment)},m(s,a){Q(e,s,a),r=!0},p(s,a){const l={};a[0]&2048&&(l.json=s[11]),a[0]&4096&&(l.selection=s[12].selection),a[0]&1&&(l.readOnly=s[0]),a[0]&8388608&&(l.historyState=s[23]),a[0]&128&&(l.onRenderMenu=s[7]),!t&&a[0]&1048576&&(t=!0,l.showSearch=s[20],cr(()=>t=!1)),e.$set(l)},i(s){r||(x(e.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),r=!1},d(s){Z(e,s)}}}function wO(n){let e,t;return e=new che({props:{json:n[11],selection:n[12].selection,onSelect:n[50],onError:n[6],pathParser:n[4]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&2048&&(o.json=r[11]),i[0]&4096&&(o.selection=r[12].selection),i[0]&64&&(o.onError=r[6]),i[0]&16&&(o.pathParser=r[4]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Whe(n){let e;return{c(){e=B("div"),e.innerHTML=`<div class="jse-loading-space svelte-16ru3ua"></div> 
      <div class="jse-loading svelte-16ru3ua">loading...</div>`,C(e,"class","jse-contents svelte-16ru3ua")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}function qhe(n){let e,t,r,i,o,s,a,l,u;const c=[Ghe,Uhe],f=[];function d(h,p){return h[11]===void 0?0:1}return i=d(n),o=f[i]=c[i](n),{c(){e=B("label"),t=B("input"),r=K(),o.c(),s=Ze(),C(t,"type","text"),t.readOnly=!0,C(t,"tabindex","-1"),C(t,"class","jse-hidden-input svelte-16ru3ua"),C(e,"class","jse-hidden-input-label")},m(h,p){H(h,e,p),T(e,t),n[80](t),H(h,r,p),f[i].m(h,p),H(h,s,p),a=!0,l||(u=le(t,"paste",n[35]),l=!0)},p(h,p){let m=i;i=d(h),i===m?f[i].p(h,p):(de(),D(f[m],1,1,()=>{f[m]=null}),he(),o=f[i],o?o.p(h,p):(o=f[i]=c[i](h),o.c()),x(o,1),o.m(s.parentNode,s))},i(h){a||(x(o),a=!0)},o(h){D(o),a=!1},d(h){h&&j(e),n[80](null),h&&j(r),f[i].d(h),h&&j(s),l=!1,u()}}}function Uhe(n){var h,p,m,g;let e,t,r,i,o,s,a,l,u,c;t=new vhe({props:{show:n[20],resultCount:((p=(h=n[18])==null?void 0:h.items)==null?void 0:p.length)||0,activeIndex:((m=n[18])==null?void 0:m.activeIndex)||0,showReplace:n[21],searching:n[22],readOnly:n[0],onChange:n[27],onNext:n[28],onPrevious:n[29],onReplace:n[30],onReplaceAll:n[31],onClose:n[32]}}),o=new Ode({props:{value:n[11],path:[],expandedMap:n[12].expandedMap,enforceStringMap:n[12].enforceStringMap,visibleSectionsMap:n[12].visibleSectionsMap,validationErrorsMap:n[25],searchResultItemsMap:(g=n[18])==null?void 0:g.itemsMap,selection:n[12].selection,context:n[14],onDragSelectionStart:ir}});let f=n[19]&&kO(n),d=n[24]&&CO(n);return u=new Kx({props:{validationErrors:n[13],selectError:n[33]}}),{c(){e=B("div"),$(t.$$.fragment),r=K(),i=B("div"),$(o.$$.fragment),s=K(),f&&f.c(),a=K(),d&&d.c(),l=K(),$(u.$$.fragment),C(e,"class","jse-search-box-container svelte-16ru3ua"),C(i,"class","jse-contents svelte-16ru3ua"),C(i,"data-jsoneditor-scrollable-contents",!0)},m(v,b){H(v,e,b),Q(t,e,null),H(v,r,b),H(v,i,b),Q(o,i,null),n[84](i),H(v,s,b),f&&f.m(v,b),H(v,a,b),d&&d.m(v,b),H(v,l,b),Q(u,v,b),c=!0},p(v,b){var k,S,E,M;const w={};b[0]&1048576&&(w.show=v[20]),b[0]&262144&&(w.resultCount=((S=(k=v[18])==null?void 0:k.items)==null?void 0:S.length)||0),b[0]&262144&&(w.activeIndex=((E=v[18])==null?void 0:E.activeIndex)||0),b[0]&2097152&&(w.showReplace=v[21]),b[0]&4194304&&(w.searching=v[22]),b[0]&1&&(w.readOnly=v[0]),t.$set(w);const _={};b[0]&2048&&(_.value=v[11]),b[0]&4096&&(_.expandedMap=v[12].expandedMap),b[0]&4096&&(_.enforceStringMap=v[12].enforceStringMap),b[0]&4096&&(_.visibleSectionsMap=v[12].visibleSectionsMap),b[0]&33554432&&(_.validationErrorsMap=v[25]),b[0]&262144&&(_.searchResultItemsMap=(M=v[18])==null?void 0:M.itemsMap),b[0]&4096&&(_.selection=v[12].selection),b[0]&16384&&(_.context=v[14]),o.$set(_),v[19]?f?(f.p(v,b),b[0]&524288&&x(f,1)):(f=kO(v),f.c(),x(f,1),f.m(a.parentNode,a)):f&&(de(),D(f,1,1,()=>{f=null}),he()),v[24]?d?(d.p(v,b),b[0]&16777216&&x(d,1)):(d=CO(v),d.c(),x(d,1),d.m(l.parentNode,l)):d&&(de(),D(d,1,1,()=>{d=null}),he());const y={};b[0]&8192&&(y.validationErrors=v[13]),u.$set(y)},i(v){c||(x(t.$$.fragment,v),x(o.$$.fragment,v),x(f),x(d),x(u.$$.fragment,v),c=!0)},o(v){D(t.$$.fragment,v),D(o.$$.fragment,v),D(f),D(d),D(u.$$.fragment,v),c=!1},d(v){v&&j(e),Z(t),v&&j(r),v&&j(i),Z(o),n[84](null),v&&j(s),f&&f.d(v),v&&j(a),d&&d.d(v),v&&j(l),Z(u,v)}}}function Ghe(n){let e,t,r,i;const o=[Jhe,Khe],s=[];function a(l,u){return l[17]===""||l[17]===void 0?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=Ze()},m(l,u){s[e].m(l,u),H(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?s[e].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r))},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){s[e].d(l),l&&j(r)}}}function kO(n){let e,t;return e=new Zs({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[19].contents)?"array":"object"} as text`,actions:[{icon:s_,text:"Paste as JSON instead",title:"Replace the value with the pasted JSON",onMouseDown:n[47]},{text:"Leave as is",title:"Keep the JSON embedded in the value",onClick:n[48]}]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&524288&&(o.message=`You pasted a JSON ${Array.isArray(r[19].contents)?"array":"object"} as text`),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function CO(n){let e,t;return e=new Zs({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:fm,text:"Ok",title:"Accept the repaired document",onClick:n[8]},{icon:Ku,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:n[49]}],onClose:n[9]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&1&&(o.actions=r[0]?[]:[{icon:fm,text:"Ok",title:"Accept the repaired document",onClick:r[8]},{icon:Ku,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:r[49]}]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Khe(n){let e,t,r,i;return e=new Zs({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:Ku,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:n[49]}]}}),r=new YF({props:{text:n[17],json:n[11],indentation:n[5],parser:n[3]}}),{c(){$(e.$$.fragment),t=K(),$(r.$$.fragment)},m(o,s){Q(e,o,s),H(o,t,s),Q(r,o,s),i=!0},p(o,s){const a={};s[0]&1&&(a.actions=o[0]?[]:[{icon:Ku,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:o[49]}]),e.$set(a);const l={};s[0]&131072&&(l.text=o[17]),s[0]&2048&&(l.json=o[11]),s[0]&32&&(l.indentation=o[5]),s[0]&8&&(l.parser=o[3]),r.$set(l)},i(o){i||(x(e.$$.fragment,o),x(r.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),D(r.$$.fragment,o),i=!1},d(o){Z(e,o),o&&j(t),Z(r,o)}}}function Jhe(n){let e,t;return e=new Hde({props:{readOnly:n[0],onCreateObject:n[81],onCreateArray:n[82],onClick:n[83]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&1&&(o.readOnly=r[0]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Yhe(n){let e,t,r,i,o,s,a,l,u=n[1]&&_O(n),c=n[2]&&wO(n);const f=[qhe,Whe],d=[];function h(p,m){return p[26]?1:0}return i=h(n),o=d[i]=f[i](n),{c(){e=B("div"),u&&u.c(),t=K(),c&&c.c(),r=K(),o.c(),C(e,"role","tree"),C(e,"tabindex","-1"),C(e,"class","jse-tree-mode svelte-16ru3ua"),oe(e,"no-main-menu",!n[1])},m(p,m){H(p,e,m),u&&u.m(e,null),T(e,t),c&&c.m(e,null),T(e,r),d[i].m(e,null),n[85](e),s=!0,a||(l=[le(Vhe,"mousedown",n[51]),le(e,"keydown",n[43]),le(e,"mousedown",n[44]),le(e,"contextmenu",n[45])],a=!0)},p(p,m){p[1]?u?(u.p(p,m),m[0]&2&&x(u,1)):(u=_O(p),u.c(),x(u,1),u.m(e,t)):u&&(de(),D(u,1,1,()=>{u=null}),he()),p[2]?c?(c.p(p,m),m[0]&4&&x(c,1)):(c=wO(p),c.c(),x(c,1),c.m(e,r)):c&&(de(),D(c,1,1,()=>{c=null}),he()),o.p(p,m),(!s||m[0]&2)&&oe(e,"no-main-menu",!p[1])},i(p){s||(x(u),x(c),x(o),s=!0)},o(p){D(u),D(c),D(o),s=!1},d(p){p&&j(e),u&&u.d(),c&&c.d(),d[i].d(),n[85](null),a=!1,It(l)}}}function Xhe(n,e,t){let r;const i=oi("jsoneditor:TreeMode"),o=typeof window>"u";i("isSSR:",o);const{open:s}=pr("simple-modal"),a=_h(),l=_h(),{openAbsolutePopup:u,closeAbsolutePopup:c}=pr("absolute-popup");let f,d,h,p=!1;const m=DF();let{readOnly:g}=e,{externalContent:v}=e,{externalSelection:b}=e,{mainMenuBar:w}=e,{navigationBar:_}=e,{escapeControlCharacters:y}=e,{escapeUnicodeCharacters:k}=e,{parser:S}=e,{parseMemoizeOne:E}=e,{validator:M}=e,{validationParser:R}=e,{pathParser:O}=e,{indentation:I}=e,{onError:P}=e,{onChange:A}=e,{onChangeMode:N}=e,{onSelect:F}=e,{onRenderValue:V}=e,{onRenderMenu:W}=e,{onRenderContextMenu:L}=e,{onClassName:z}=e,{onFocus:q}=e,{onBlur:te}=e,{onSortModal:re}=e,{onTransformModal:ne}=e,{onJSONEditorModal:fe}=e,ie=!1;Gx({onMount:Tn,onDestroy:Kr,getWindow:()=>lp(h),hasFocus:()=>ie&&document.hasFocus()||Ix(h),onFocus:()=>{p=!0,q&&q()},onBlur:()=>{p=!1,te&&te()}});let G,ae,Me;function X(J){i("updateSelection",J);const xe=typeof J=="function"?J(U.selection)||null:J;Wt(xe,U.selection)||(t(12,U={...U,selection:xe}),F(xe))}let ge=!1,U=Rb(),Ce,Ee,Ae,De=!1,nt=!1,ue=!1,Oe="";async function Ue(J){i("search text updated",J),t(78,Oe=J),await dn(),await Pt()}async function _e(){t(18,Ce=Ce?Mae(Ce):void 0),await Pt()}async function it(){t(18,Ce=Ce?Tae(Ce):void 0),await Pt()}async function At(J,xe){const We=Ce==null?void 0:Ce.activeItem;if(i("handleReplace",{replacementText:xe,activeItem:We}),!We||G===void 0)return;const{operations:Nt,newSelection:gt}=Oae(G,U,xe,We,S);Rr(Nt,(un,Ar)=>({state:{...Ar,selection:gt}})),await dn(),await Pt()}async function Ve(J,xe){i("handleReplaceAll",{text:J,replacementText:xe});const{operations:We,newSelection:Nt}=Dae(G,U,J,xe,S);Rr(We,(gt,un)=>({state:{...un,selection:Nt}})),await dn(),await Pt()}function ct(){t(20,De=!1),t(21,nt=!1),Ue(""),bn()}async function Pt(){const J=Ce==null?void 0:Ce.activeItem;if(i("focusActiveSearchResult",Ce),J&&G!==void 0){const xe=J.path;t(12,U={...sC(G,U,xe),selection:null}),await dn(),await go(xe)}}function yt(J,xe){if(J===""){i("clearing search result"),Ce!==void 0&&t(18,Ce=void 0);return}t(22,ue=!0),setTimeout(()=>{i("searching...",J);const We=pF(J,xe,H3);t(18,Ce=Aae(xe,We,Ce)),t(22,ue=!1)})}function mn(J){i("select validation error",J),X(Bt(J.path,!1)),go(J.path)}const En=RF({onChange:J=>{t(23,Dn=J)}});let Dn=En.getState();function Fn(J=um){i("expand");const xe={...U,expandedMap:{},visibleSectionsMap:{}};t(12,U=jo(G,xe,[],J))}const we=Noe(yt,$Q);let bt=!1,ve=[],Ge;const $e=Ag(PF);function me(J,xe,We,Nt){Nd(()=>{let gt;try{gt=$e(J,xe,We,Nt)}catch(un){gt=[{path:[],message:"Failed to validate: "+un.message,severity:Pl.warning}]}Wt(gt,ve)||(i("validationErrors changed:",gt),t(13,ve=gt))},gt=>i(`validationErrors updated in ${gt} ms`))}function ft(){return i("validate"),Me?{parseError:Me,isRepairable:!1}:(me(G,M,S,R),$t(ve)?null:{validationErrors:ve})}function Gt(){return G}function mt(){return U}function wt(J){sm(J)?Yr(J.json):kh(J)&&Dr(J.text)}function Yr(J){if(J===void 0)return;const xe=!Wt(G,J);if(i("update external json",{isChanged:xe,currentlyText:G===void 0}),!xe)return;const We={json:G,text:ae},Nt=U,gt=G,un=ae,Ar=bt;t(11,G=J),rr(G),t(17,ae=void 0),t(24,bt=!1),Me=void 0,on(G),ln({previousJson:gt,previousState:Nt,previousText:un,previousTextIsRepaired:Ar}),_s(We,null)}function Dr(J){if(J===void 0||sm(v))return;const xe=J!==ae;if(i("update external text",{isChanged:xe}),!xe)return;const We={json:G,text:ae},Nt=G,gt=U,un=ae,Ar=bt;try{t(11,G=E(J)),rr(G),t(17,ae=J),t(24,bt=!1),Me=void 0}catch(Jn){try{t(11,G=E(Aa(J))),rr(G),t(17,ae=J),t(24,bt=!0),Me=void 0,on(G)}catch{t(11,G=void 0),t(17,ae=v.text),t(24,bt=!1),Me=ae!==void 0&&ae!==""?wh(ae,Jn.message||String(Jn)):void 0}}on(G),ln({previousJson:Nt,previousState:gt,previousText:un,previousTextIsRepaired:Ar}),_s(We,null)}function wi(J){Wt(U.selection,J)||(i("applyExternalSelection",J),(Lx(J)||J===null)&&X(J))}function rr(J){ge||(ge=!0,t(12,U=jo(J,U,[],sae(J))))}function on(J){U.selection&&(Zo(J,mf(U.selection))&&Zo(J,pt(U.selection))||(i("clearing selection: path does not exist anymore",U.selection),t(12,U={...U,selection:ld(J,U)})))}function ln({previousJson:J,previousState:xe,previousText:We,previousTextIsRepaired:Nt}){J===void 0&&We===void 0||(G!==void 0?J!==void 0?En.add({undo:{patch:[{op:"replace",path:"",value:J}],state:Si(xe),json:void 0,text:We,textIsRepaired:Nt},redo:{patch:[{op:"replace",path:"",value:G}],state:Si(U),json:void 0,text:ae,textIsRepaired:bt}}):En.add({undo:{patch:void 0,json:void 0,text:We,state:Si(xe),textIsRepaired:Nt},redo:{patch:void 0,json:G,state:Si(U),text:ae,textIsRepaired:bt}}):J!==void 0&&En.add({undo:{patch:void 0,json:J,state:Si(xe),text:We,textIsRepaired:Nt},redo:{patch:void 0,json:void 0,text:ae,textIsRepaired:bt,state:Si(U)}}))}function gn(){i("createDefaultSelection"),t(12,U={...U,selection:Bt([],!1)})}function xr(J,xe){if(i("patch",J,xe),G===void 0)throw new Error("Cannot apply patch: no JSON");const We={json:G,text:ae},Nt=G,gt=U,un=ae,Ar=bt,Po=hF(G,J),Jn=$L(G,U,J),Cc=Sh(G,J),DA=hae(Jn.documentState,Cc,!1);i("patch updatedSelection",Cc);const Xf=typeof xe=="function"?xe(Jn.json,DA):void 0;t(11,G=Xf&&Xf.json!==void 0?Xf.json:Jn.json);const RA=Xf&&Xf.state!==void 0?Xf.state:DA;t(12,U=RA),t(17,ae=void 0),t(24,bt=!1),t(19,Ae=void 0),Me=void 0,on(G),En.add({undo:{patch:Po,json:void 0,text:un,state:Si(gt),textIsRepaired:Ar},redo:{patch:J,json:void 0,state:Si(RA),text:ae,textIsRepaired:bt}});const PA={json:G,previousJson:Nt,undo:Po,redo:J};return _s(We,PA),PA}function mo(){g||!U.selection||X($o(pt(U.selection),!0))}function vs(){if(g||!U.selection)return;const J=pt(U.selection),xe=ot(G,J);er(xe)?Yf(J,xe):X(Bt(J,!0))}function Do(){if(g||!Qt(U.selection))return;const J=pt(U.selection),xe=Ke(J),We=ot(G,J),Nt=!Bl(We,U.enforceStringMap,xe,S),gt=Nt?String(We):ip(String(We),S);i("handleToggleEnforceString",{enforceString:Nt,value:We,updatedValue:gt}),Rr([{op:"replace",path:xe,value:gt}],(un,Ar)=>({state:ZL(Ar,xe,Nt)}))}function bs(){return bt&&G!==void 0&&Ql(G),G!==void 0?{json:G}:{text:ae||""}}async function Er(J=!0){await qF({json:G,documentState:U,indentation:J?I:void 0,readOnly:g,parser:S,onPatch:Rr})}async function ai(J=!0){G!==void 0&&await UF({json:G,documentState:U,indentation:J?I:void 0,parser:S})}function el(J){var We;J.preventDefault();const xe=(We=J.clipboardData)==null?void 0:We.getData("text/plain");xe!==void 0&&GF({clipboardText:xe,json:G,selection:U.selection,readOnly:g,parser:S,onPatch:Rr,onChangeText:Ep,openRepairModal:wc})}function ys(){s(IF,{},{...ff,styleWindow:{width:"450px"}},{onClose:()=>bn()})}function wc(J,xe){s(LF,{text:J,onParse:We=>n_(We,Nt=>_g(Nt,S)),onRepair:BL,onApply:xe},{...ff,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>bn()})}function tl(){KF({json:G,text:ae,documentState:U,keepSelection:!1,readOnly:g,onChange:A,onPatch:Rr})}function vr(){if(g||G===void 0||!U.selection||!up(U.selection)||$t(pt(U.selection)))return;i("duplicate",{selection:U.selection});const J=cF(G,Uu(G,U.selection));Rr(J)}function Yl(){if(g||!U.selection||!hn(U.selection)&&!Qt(U.selection)||$t(pt(U.selection)))return;i("extract",{selection:U.selection});const J=Cae(G,U.selection);Rr(J,(xe,We)=>{if(er(xe))return{state:pu(xe,We,[])}})}function Ro(J){G!==void 0&&jb({insertType:J,selectInside:!0,refJsonEditor:h,json:G,selection:U.selection,readOnly:g,parser:S,onPatch:Rr,onReplaceJson:Ql})}function nl(J){hr(U.selection)&&X(Bt(U.selection.path,!1)),U.selection||X(ld(G,U)),Ro(J)}function ke(J){if(!(g||!U.selection)){if(!qv(U.selection)){P(new Error(`Cannot convert current selection to ${J}`));return}try{const xe=mf(U.selection),We=ot(G,xe),Nt=Uoe(We,J,S);if(Nt===We)return;const gt=[{op:"replace",path:Ke(xe),value:Nt}];i("handleConvert",{selection:U.selection,path:xe,type:J,operations:gt}),Rr(gt,(un,Ar)=>({state:U.selection?pu(un,Ar,pt(U.selection)):U}))}catch(xe){P(xe)}}}function xt(){if(!U.selection)return;const J=YM(G,U,!1),xe=Ut(pt(U.selection));J&&!$t(pt(J))&&Wt(xe,Ut(pt(J)))?X(zl(pt(J))):X(Fl(xe)),i("insert before",{selection:U.selection,selectionBefore:J,parentPath:xe}),dn().then(()=>Y())}function en(){if(!U.selection)return;const J=fc(G,U.selection);i("insert after",J),X(zl(J)),dn().then(()=>Y())}async function pn(J){await JF({char:J,selectInside:!0,refJsonEditor:h,json:G,selection:U.selection,readOnly:g,parser:S,onPatch:Rr,onReplaceJson:Ql,onSelect:X})}function Rn(){if(g||!En.getState().canUndo)return;const J=En.undo();if(!J)return;const xe={json:G,text:ae};t(11,G=J.undo.patch?Ns(G,J.undo.patch):J.undo.json),t(12,U=J.undo.state),t(17,ae=J.undo.text),t(24,bt=J.undo.textIsRepaired),Me=void 0,i("undo",{item:J,json:G,documentState:U});const We=J.undo.patch&&J.redo.patch?{json:G,previousJson:xe.json,redo:J.undo.patch,undo:J.redo.patch}:null;_s(xe,We),bn(),U.selection&&go(pt(U.selection),!1)}function lr(){if(g||!En.getState().canRedo)return;const J=En.redo();if(!J)return;const xe={json:G,text:ae};t(11,G=J.redo.patch?Ns(G,J.redo.patch):J.redo.json),t(12,U=J.redo.state),t(17,ae=J.redo.text),t(24,bt=J.redo.textIsRepaired),Me=void 0,i("redo",{item:J,json:G,documentState:U});const We=J.undo.patch&&J.redo.patch?{json:G,previousJson:xe.json,redo:J.redo.patch,undo:J.undo.patch}:null;_s(xe,We),bn(),U.selection&&go(pt(U.selection),!1)}function Fi(J){g||G===void 0||(ie=!0,re({id:a,json:G,rootPath:J,onSort:async({operations:xe})=>{i("onSort",J,xe),Rr(xe,(We,Nt)=>({state:{...pu(We,Nt,J),selection:Bt(J,!1)}}))},onClose:()=>{ie=!1,bn()}}))}function rl(){if(!U.selection)return;const J=XM(G,U.selection);Fi(J)}function il(){Fi([])}function ta(J){if(G===void 0)return;const{id:xe,onTransform:We,onClose:Nt}=J,gt=J.rootPath||[];ie=!0,ne({id:xe||l,json:G,rootPath:gt,onTransform:un=>{We?We({operations:un,json:G,transformedJson:Ns(G,un)}):(i("onTransform",gt,un),Rr(un,(Ar,Po)=>({state:{...pu(Ar,Po,gt),selection:Bt(gt,!1)}})))},onClose:()=>{ie=!1,bn(),Nt&&Nt()}})}function ol(){if(!U.selection)return;const J=XM(G,U.selection);ta({rootPath:J})}function xp(){ta({rootPath:[]})}function Yf(J,xe){i("openJSONEditorModal",{path:J,value:xe}),ie=!0,fe({content:{json:xe},path:J,onPatch:i1.onPatch,onClose:()=>{ie=!1,bn()}})}async function go(J,xe=!0){t(12,U=sC(G,U,J)),await dn();const We=na(J);if(i("scrollTo",{path:J,elem:We,refContents:f}),!We||!f)return Promise.resolve();const Nt=f.getBoundingClientRect(),gt=We.getBoundingClientRect();if(!xe&&gt.bottom>Nt.top&&gt.top<Nt.bottom)return Promise.resolve();const un=-(Nt.height/4);return new Promise(Ar=>{m(We,{container:f,offset:un,duration:j3,callback:()=>Ar()})})}function na(J){return f?f.querySelector(`div[data-path="${Ch(J)}"]`):null}function Xl(J){const xe=na(J);if(!xe||!f)return;const We=f.getBoundingClientRect(),Nt=xe.getBoundingClientRect(),gt=20,un=er(ot(G,J))?gt:Nt.height;Nt.top<We.top+gt?m(xe,{container:f,offset:-gt,duration:0}):Nt.top+un>We.bottom-gt&&m(xe,{container:f,offset:-(We.height-un-gt),duration:0})}function _s(J,xe){if(!(J.json===void 0&&(J==null?void 0:J.text)===void 0)){if(ae!==void 0){const We={text:ae,json:void 0};A==null||A(We,J,{contentErrors:ft(),patchResult:xe})}else if(G!==void 0){const We={text:void 0,json:G};A==null||A(We,J,{contentErrors:ft(),patchResult:xe})}}}function Rr(J,xe){return g?{json:G,previousJson:G,undo:[],redo:[]}:(i("handlePatch",J,xe),xr(J,xe))}function Ql(J,xe){const We=U,Nt=G,gt=ae,un={json:G,text:ae},Ar=bt,Po=jo(G,U,[],va),Jn=typeof xe=="function"?xe(J,Po):void 0;t(11,G=Jn&&Jn.json!==void 0?Jn.json:J),t(12,U=Jn&&Jn.state!==void 0?Jn.state:Po),t(17,ae=void 0),t(24,bt=!1),Me=void 0,on(G),ln({previousJson:Nt,previousState:We,previousText:gt,previousTextIsRepaired:Ar}),_s(un,null)}function Ep(J,xe){i("handleChangeText");const We=U,Nt=G,gt=ae,un={json:G,text:ae},Ar=bt;try{t(11,G=E(J)),t(12,U=jo(G,U,[],va)),t(17,ae=void 0),t(24,bt=!1),Me=void 0}catch(Jn){try{t(11,G=E(Aa(J))),t(12,U=jo(G,U,[],va)),t(17,ae=J),t(24,bt=!0),Me=void 0}catch{t(11,G=void 0),t(12,U=Rb({json:G,expand:va})),t(17,ae=J),t(24,bt=!1),Me=ae!==""?wh(ae,Jn.message||String(Jn)):void 0}}if(typeof xe=="function"){const Jn=xe(G,U);t(11,G=Jn&&Jn.json?Jn.json:G),t(12,U=Jn&&Jn.state?Jn.state:U)}on(G),ln({previousJson:Nt,previousState:We,previousText:gt,previousTextIsRepaired:Ar}),_s(un,null)}function sl(J,xe,We=!1){i("expand",{path:J,expanded:xe,recursive:We}),xe?We?t(12,U=jo(G,U,J,um)):t(12,U=eae(U,J)):t(12,U=QL(U,J)),U.selection&&!xe&&lae(U.selection,J)&&X(null),bn()}function Ap(){sl([],!0,!0)}function Mp(){sl([],!1,!0)}function kc(J){i("openFind",{findAndReplace:J}),t(20,De=!1),t(21,nt=!1),dn().then(()=>{t(20,De=!0),t(21,nt=J)})}function Tp(J,xe){i("handleExpandSection",J,xe);const We=Ke(J);t(12,U=tae(G,U,We,xe))}function Op(J){i("pasted json as text",J),t(19,Ae=J)}function ee(J){const xe=cc(J),We=J.shiftKey;if(i("keydown",{combo:xe,key:J.key}),xe==="Ctrl+X"&&(J.preventDefault(),Er(!0)),xe==="Ctrl+Shift+X"&&(J.preventDefault(),Er(!1)),xe==="Ctrl+C"&&(J.preventDefault(),ai(!0)),xe==="Ctrl+Shift+C"&&(J.preventDefault(),ai(!1)),xe==="Ctrl+D"&&(J.preventDefault(),vr()),(xe==="Delete"||xe==="Backspace")&&(J.preventDefault(),tl()),xe==="Insert"&&(J.preventDefault(),Ro("structure")),xe==="Ctrl+A"&&(J.preventDefault(),X(pae())),xe==="Ctrl+Q"&&Y(J),xe==="ArrowUp"||xe==="Shift+ArrowUp"){J.preventDefault();const gt=U.selection?YM(G,U,We)||U.selection:ld(G,U);X(gt),Xl(pt(gt))}if(xe==="ArrowDown"||xe==="Shift+ArrowDown"){J.preventDefault();const gt=U.selection?uae(G,U,We)||U.selection:ld(G,U);X(gt),Xl(pt(gt))}if(xe==="ArrowLeft"||xe==="Shift+ArrowLeft"){J.preventDefault();const gt=U.selection?fae(G,U,We,!g)||U.selection:ld(G,U);X(gt),Xl(pt(gt))}if(xe==="ArrowRight"||xe==="Shift+ArrowRight"){J.preventDefault();const gt=U.selection&&G!==void 0?dae(G,U,We,!g)||U.selection:ld(G,U);X(gt),Xl(pt(gt))}if(xe==="Enter"&&U.selection){if(i_(U.selection)){const gt=U.selection.focusPath,un=ot(G,Ut(gt));Array.isArray(un)&&X(Bt(gt,!1))}if(hr(U.selection)&&(J.preventDefault(),X({...U.selection,edit:!0})),Qt(U.selection)){J.preventDefault();const gt=ot(G,U.selection.path);er(gt)?sl(U.selection.path,!0):X({...U.selection,edit:!0})}}if(xe.replace(/^Shift\+/,"").length===1&&U.selection){J.preventDefault(),pn(J.key);return}if(xe==="Enter"&&(no(U.selection)||kr(U.selection))){J.preventDefault(),pn("");return}if(xe==="Ctrl+Enter"&&Qt(U.selection)){const gt=ot(G,U.selection.path);V2(gt)&&window.open(String(gt),"_blank")}xe==="Escape"&&U.selection&&(J.preventDefault(),X(null)),xe==="Ctrl+F"&&(J.preventDefault(),kc(!1)),xe==="Ctrl+H"&&(J.preventDefault(),kc(!0)),xe==="Ctrl+Z"&&(J.preventDefault(),Rn()),xe==="Ctrl+Shift+Z"&&(J.preventDefault(),lr())}function Pe(J){i("handleMouseDown",J);const xe=J.target;!Rx(xe,"BUTTON")&&!xe.isContentEditable&&(bn(),!U.selection&&G===void 0&&(ae===""||ae===void 0)&&gn())}function et({anchor:J,left:xe,top:We,width:Nt,height:gt,offsetTop:un,offsetLeft:Ar,showTip:Po}){const Jn={json:G,documentState:U,parser:S,showTip:Po,onEditKey:mo,onEditValue:vs,onToggleEnforceString:Do,onCut:Er,onCopy:ai,onPaste:ys,onRemove:tl,onDuplicate:vr,onExtract:Yl,onInsertBefore:xt,onInsert:nl,onConvert:ke,onInsertAfter:en,onSort:rl,onTransform:ol,onRenderContextMenu:L,onCloseContextMenu(){c(Cc),bn()}};ie=!0;const Cc=u(Dfe,Jn,{left:xe,top:We,offsetTop:un,offsetLeft:Ar,width:Nt,height:gt,anchor:J,closeOnOuterClick:!0,onClose:()=>{ie=!1,bn()}})}function Y(J){if(!(g||Pi(U.selection))){if(J&&(J.stopPropagation(),J.preventDefault()),J&&J.type==="contextmenu"&&J.target!==d)et({left:J.clientX,top:J.clientY,width:yl,height:bl,showTip:!1});else{const xe=f==null?void 0:f.querySelector(".jse-context-menu-pointer.jse-selected");if(xe)et({anchor:xe,offsetTop:2,width:yl,height:bl,showTip:!1});else{const We=f==null?void 0:f.getBoundingClientRect();We&&et({top:We.top+2,left:We.left+2,width:yl,height:bl,showTip:!1})}}return!1}}function Ie(J){g||et({anchor:UL(J.target,"BUTTON"),offsetTop:0,width:yl,height:bl,showTip:!0})}async function Et(){if(i("apply pasted json",Ae),!Ae)return;const{path:J,contents:xe}=Ae;t(19,Ae=void 0);const We=(f==null?void 0:f.querySelector(".jse-editable-div"))||null;KL(We)&&We.cancel();const Nt=[{op:"replace",path:Ke(J),value:xe}];Rr(Nt,(gt,un)=>({state:pu(gt,un,J)})),setTimeout(bn)}function vn(){i("clear pasted json"),t(19,Ae=void 0),bn()}function zn(){N(hi.text)}function Yt(J){X(J),bn(),go(pt(J))}function bn(){i("focus"),d&&(d.focus(),d.select())}function al(J){!wg(J.target,We=>We===h)&&Pi(U.selection)&&(i("click outside the editor, stop edit mode"),X(We=>hr(We)?{...We,edit:!1}:Qt(We)?{...We,edit:!1}:We),p&&d&&(d.focus(),d.blur()),i("blur (outside editor)"),d&&d.blur())}function n1(J){return cae(G,U,J)}function r1(J){r&&r.onDrag(J)}function eJ(){r&&r.onDragEnd()}let i1;function tJ(J){De=J,t(20,De)}function nJ(J){rt[J?"unshift":"push"](()=>{d=J,t(15,d)})}const rJ=()=>{bn(),pn("{")},iJ=()=>{bn(),pn("[")},oJ=()=>{bn()};function sJ(J){rt[J?"unshift":"push"](()=>{f=J,t(10,f)})}function aJ(J){rt[J?"unshift":"push"](()=>{h=J,t(16,h)})}return n.$$set=J=>{"readOnly"in J&&t(0,g=J.readOnly),"externalContent"in J&&t(52,v=J.externalContent),"externalSelection"in J&&t(53,b=J.externalSelection),"mainMenuBar"in J&&t(1,w=J.mainMenuBar),"navigationBar"in J&&t(2,_=J.navigationBar),"escapeControlCharacters"in J&&t(54,y=J.escapeControlCharacters),"escapeUnicodeCharacters"in J&&t(55,k=J.escapeUnicodeCharacters),"parser"in J&&t(3,S=J.parser),"parseMemoizeOne"in J&&t(56,E=J.parseMemoizeOne),"validator"in J&&t(57,M=J.validator),"validationParser"in J&&t(58,R=J.validationParser),"pathParser"in J&&t(4,O=J.pathParser),"indentation"in J&&t(5,I=J.indentation),"onError"in J&&t(6,P=J.onError),"onChange"in J&&t(59,A=J.onChange),"onChangeMode"in J&&t(60,N=J.onChangeMode),"onSelect"in J&&t(61,F=J.onSelect),"onRenderValue"in J&&t(62,V=J.onRenderValue),"onRenderMenu"in J&&t(7,W=J.onRenderMenu),"onRenderContextMenu"in J&&t(63,L=J.onRenderContextMenu),"onClassName"in J&&t(64,z=J.onClassName),"onFocus"in J&&t(65,q=J.onFocus),"onBlur"in J&&t(66,te=J.onBlur),"onSortModal"in J&&t(67,re=J.onSortModal),"onTransformModal"in J&&t(68,ne=J.onTransformModal),"onJSONEditorModal"in J&&t(69,fe=J.onJSONEditorModal)},n.$$.update=()=>{n.$$.dirty[1]&25165824&&t(77,Ee=Dx({escapeControlCharacters:y,escapeUnicodeCharacters:k})),n.$$.dirty[0]&4096&&i("selection",U.selection),n.$$.dirty[1]&2097152&&wt(v),n.$$.dirty[1]&4194304&&wi(b),n.$$.dirty[0]&2048|n.$$.dirty[2]&65536&&we(Oe,G),n.$$.dirty[0]&2056|n.$$.dirty[1]&201326592&&me(G,M,S,R),n.$$.dirty[0]&8192&&t(25,Ge=uce(ve)),n.$$.dirty[0]&1024&&(r=f?sce(f):void 0),n.$$.dirty[0]&9|n.$$.dirty[2]&32773&&t(14,i1={readOnly:g,parser:S,normalization:Ee,getJson:Gt,getDocumentState:mt,findElement:na,findNextInside:n1,focus:bn,onPatch:Rr,onInsert:Ro,onExpand:sl,onSelect:X,onFind:kc,onExpandSection:Tp,onPasteJson:Op,onRenderValue:V,onContextMenu:et,onClassName:z||(()=>{}),onDrag:r1,onDragEnd:eJ}),n.$$.dirty[0]&16384&&i("context changed",i1)},[g,w,_,S,O,I,P,W,bs,bn,f,G,U,ve,i1,d,h,ae,Ce,Ae,De,nt,ue,Dn,bt,Ge,o,Ue,_e,it,At,Ve,ct,mn,ai,el,pn,Rn,lr,il,xp,Ap,Mp,ee,Pe,Y,Ie,Et,vn,zn,Yt,al,v,b,y,k,E,M,R,A,N,F,V,L,z,q,te,re,ne,fe,Fn,ft,Gt,xr,ta,go,na,Ee,Oe,tJ,nJ,rJ,iJ,oJ,sJ,aJ]}class Qhe extends ye{constructor(e){super(),be(this,e,Xhe,Yhe,Rt,{readOnly:0,externalContent:52,externalSelection:53,mainMenuBar:1,navigationBar:2,escapeControlCharacters:54,escapeUnicodeCharacters:55,parser:3,parseMemoizeOne:56,validator:57,validationParser:58,pathParser:4,indentation:5,onError:6,onChange:59,onChangeMode:60,onSelect:61,onRenderValue:62,onRenderMenu:7,onRenderContextMenu:63,onClassName:64,onFocus:65,onBlur:66,onSortModal:67,onTransformModal:68,onJSONEditorModal:69,expand:70,validate:71,getJson:72,patch:73,acceptAutoRepair:8,openTransformModal:74,scrollTo:75,findElement:76,focus:9},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[70]}get validate(){return this.$$.ctx[71]}get getJson(){return this.$$.ctx[72]}get patch(){return this.$$.ctx[73]}get acceptAutoRepair(){return this.$$.ctx[8]}get openTransformModal(){return this.$$.ctx[74]}get scrollTo(){return this.$$.ctx[75]}get findElement(){return this.$$.ctx[76]}get focus(){return this.$$.ctx[9]}}const n6=Qhe;function XF(n){return Zhe(n)?new Proxy(n,{get(e,t,r){const i=Reflect.get(e,t,r);return XF(i)},set(){return!1},deleteProperty(){return!1}}):n}function Zhe(n){return typeof n=="object"&&n!==null}function SO(n){let e,t,r,i,o;const s=[epe,$he],a=[];function l(u,c){return c[0]&16384&&(e=null),e==null&&(e=!!Array.isArray(u[14])),e?0:1}return t=l(n,[-1,-1]),r=a[t]=s[t](n),{c(){r.c(),i=Ze()},m(u,c){a[t].m(u,c),H(u,i,c),o=!0},p(u,c){let f=t;t=l(u,c),t===f?a[t].p(u,c):(de(),D(a[f],1,1,()=>{a[f]=null}),he(),r=a[t],r?r.p(u,c):(r=a[t]=s[t](u),r.c()),x(r,1),r.m(i.parentNode,i))},i(u){o||(x(r),o=!0)},o(u){D(r),o=!1},d(u){a[t].d(u),u&&j(i)}}}function $he(n){let e;return{c(){e=Se("(Only available for arrays, not for objects)")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}function epe(n){let e,t;return e=new Yue({props:{queryOptions:n[15],json:n[14],onChange:n[24]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.queryOptions=r[15]),i[0]&16384&&(o.json=r[14]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function xO(n){let e,t;return e=new n6({props:{externalContent:n[17],externalSelection:null,readOnly:!0,mainMenuBar:!1,navigationBar:!1,indentation:n[2],escapeControlCharacters:n[3],escapeUnicodeCharacters:n[4],parser:n[5],parseMemoizeOne:n[6],onRenderValue:n[10],onRenderMenu:n[11],onRenderContextMenu:n[12],onError:console.error,onChange:ir,onChangeMode:ir,onSelect:ir,onFocus:ir,onBlur:ir,onSortModal:ir,onTransformModal:ir,onJSONEditorModal:ir,onClassName:n[13],validator:null,validationParser:n[7],pathParser:n[8]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&131072&&(o.externalContent=r[17]),i[0]&4&&(o.indentation=r[2]),i[0]&8&&(o.escapeControlCharacters=r[3]),i[0]&16&&(o.escapeUnicodeCharacters=r[4]),i[0]&32&&(o.parser=r[5]),i[0]&64&&(o.parseMemoizeOne=r[6]),i[0]&1024&&(o.onRenderValue=r[10]),i[0]&2048&&(o.onRenderMenu=r[11]),i[0]&4096&&(o.onRenderContextMenu=r[12]),i[0]&8192&&(o.onClassName=r[13]),i[0]&128&&(o.validationParser=r[7]),i[0]&256&&(o.pathParser=r[8]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function tpe(n){let e,t;return{c(){e=B("div"),t=Se(n[20]),C(e,"class","jse-preview jse-error svelte-1313i2c")},m(r,i){H(r,e,i),T(e,t)},p(r,i){i[0]&1048576&&ze(t,r[20])},i:pe,o:pe,d(r){r&&j(e)}}}function npe(n){let e,t;return e=new n6({props:{externalContent:n[21],externalSelection:null,readOnly:!0,mainMenuBar:!1,navigationBar:!1,indentation:n[2],escapeControlCharacters:n[3],escapeUnicodeCharacters:n[4],parser:n[5],parseMemoizeOne:n[6],onRenderValue:n[10],onRenderMenu:n[11],onRenderContextMenu:n[12],onError:console.error,onChange:ir,onChangeMode:ir,onSelect:ir,onFocus:ir,onBlur:ir,onSortModal:ir,onTransformModal:ir,onJSONEditorModal:ir,onClassName:n[13],validator:null,validationParser:n[7],pathParser:n[8]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&2097152&&(o.externalContent=r[21]),i[0]&4&&(o.indentation=r[2]),i[0]&8&&(o.escapeControlCharacters=r[3]),i[0]&16&&(o.escapeUnicodeCharacters=r[4]),i[0]&32&&(o.parser=r[5]),i[0]&64&&(o.parseMemoizeOne=r[6]),i[0]&1024&&(o.onRenderValue=r[10]),i[0]&2048&&(o.onRenderMenu=r[11]),i[0]&4096&&(o.onRenderContextMenu=r[12]),i[0]&8192&&(o.onClassName=r[13]),i[0]&128&&(o.validationParser=r[7]),i[0]&256&&(o.pathParser=r[8]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function rpe(n){let e,t,r,i,o,s,a,l,u=n[23](n[0]).description+"",c,f,d,h,p,m,g,v,b,w,_,y,k,S,E,M,R,O,I,P,A,N,F,V,W,L,z,q,te,re,ne,fe,ie,G,ae,Me,X,ge,U;e=new oce({props:{queryLanguages:n[9],queryLanguageId:n[0],onChangeQueryLanguage:n[29]}}),w=new Jt({props:{data:n[18]?Ko:_u}});let Ce=n[18]&&SO(n);F=new Jt({props:{data:n[19]?Ko:_u}});let Ee=n[19]&&xO(n);const Ae=[npe,tpe],De=[];function nt(ue,Oe){return ue[20]?1:0}return re=nt(n),ne=De[re]=Ae[re](n),{c(){$(e.$$.fragment),t=K(),r=B("div"),i=B("div"),o=B("div"),s=B("div"),s.innerHTML='<div class="jse-label-inner svelte-1313i2c">Language</div>',a=K(),l=B("div"),c=K(),f=B("div"),f.innerHTML='<div class="jse-label-inner svelte-1313i2c">Path</div>',d=K(),h=B("input"),m=K(),g=B("div"),v=B("div"),b=B("button"),$(w.$$.fragment),_=Se(`
                Wizard`),y=K(),Ce&&Ce.c(),k=K(),S=B("div"),S.innerHTML='<div class="jse-label-inner svelte-1313i2c">Query</div>',E=K(),M=B("textarea"),R=K(),O=B("div"),I=B("div"),P=B("div"),A=B("div"),N=B("button"),$(F.$$.fragment),V=Se(`
                  Original`),W=K(),Ee&&Ee.c(),L=K(),z=B("div"),q=B("div"),q.innerHTML='<div class="jse-label-inner svelte-1313i2c">Preview</div>',te=K(),ne.c(),fe=K(),ie=B("div"),G=B("button"),ae=Se("Transform"),C(s,"class","jse-label svelte-1313i2c"),C(l,"class","jse-description svelte-1313i2c"),C(f,"class","jse-label svelte-1313i2c"),C(h,"class","jse-path svelte-1313i2c"),C(h,"type","text"),h.readOnly=!0,C(h,"title","Selected path"),h.value=p=$t(n[1])?"(document root)":lo(n[1]),C(b,"type","button"),C(b,"class","svelte-1313i2c"),C(v,"class","jse-label-inner svelte-1313i2c"),C(g,"class","jse-label svelte-1313i2c"),C(S,"class","jse-label svelte-1313i2c"),C(M,"class","jse-query svelte-1313i2c"),C(M,"spellcheck","false"),M.value=n[16],C(o,"class","jse-query-contents svelte-1313i2c"),C(N,"type","button"),C(N,"class","svelte-1313i2c"),C(A,"class","jse-label-inner svelte-1313i2c"),C(P,"class","jse-label svelte-1313i2c"),C(I,"class","jse-original-data svelte-1313i2c"),oe(I,"jse-hide",!n[19]),C(q,"class","jse-label svelte-1313i2c"),C(z,"class","jse-preview-data svelte-1313i2c"),C(O,"class","jse-data-contents svelte-1313i2c"),oe(O,"jse-hide-original-data",!n[19]),C(i,"class","jse-main-contents svelte-1313i2c"),C(G,"type","button"),C(G,"class","jse-primary svelte-1313i2c"),G.disabled=Me=!!n[20],C(ie,"class","jse-actions svelte-1313i2c"),C(r,"class","jse-modal-contents svelte-1313i2c")},m(ue,Oe){Q(e,ue,Oe),H(ue,t,Oe),H(ue,r,Oe),T(r,i),T(i,o),T(o,s),T(o,a),T(o,l),l.innerHTML=u,T(o,c),T(o,f),T(o,d),T(o,h),T(o,m),T(o,g),T(g,v),T(v,b),Q(w,b,null),T(b,_),T(o,y),Ce&&Ce.m(o,null),T(o,k),T(o,S),T(o,E),T(o,M),T(i,R),T(i,O),T(O,I),T(I,P),T(P,A),T(A,N),Q(F,N,null),T(N,V),T(I,W),Ee&&Ee.m(I,null),T(O,L),T(O,z),T(z,q),T(z,te),De[re].m(z,null),T(r,fe),T(r,ie),T(ie,G),T(G,ae),X=!0,ge||(U=[le(b,"click",n[27]),le(M,"input",n[25]),le(N,"click",n[28]),le(G,"click",n[26]),Mn(ope.call(null,G))],ge=!0)},p(ue,Oe){const Ue={};Oe[0]&512&&(Ue.queryLanguages=ue[9]),Oe[0]&1&&(Ue.queryLanguageId=ue[0]),e.$set(Ue),(!X||Oe[0]&1)&&u!==(u=ue[23](ue[0]).description+"")&&(l.innerHTML=u),(!X||Oe[0]&2&&p!==(p=$t(ue[1])?"(document root)":lo(ue[1]))&&h.value!==p)&&(h.value=p);const _e={};Oe[0]&262144&&(_e.data=ue[18]?Ko:_u),w.$set(_e),ue[18]?Ce?(Ce.p(ue,Oe),Oe[0]&262144&&x(Ce,1)):(Ce=SO(ue),Ce.c(),x(Ce,1),Ce.m(o,k)):Ce&&(de(),D(Ce,1,1,()=>{Ce=null}),he()),(!X||Oe[0]&65536)&&(M.value=ue[16]);const it={};Oe[0]&524288&&(it.data=ue[19]?Ko:_u),F.$set(it),ue[19]?Ee?(Ee.p(ue,Oe),Oe[0]&524288&&x(Ee,1)):(Ee=xO(ue),Ee.c(),x(Ee,1),Ee.m(I,null)):Ee&&(de(),D(Ee,1,1,()=>{Ee=null}),he()),(!X||Oe[0]&524288)&&oe(I,"jse-hide",!ue[19]);let At=re;re=nt(ue),re===At?De[re].p(ue,Oe):(de(),D(De[At],1,1,()=>{De[At]=null}),he(),ne=De[re],ne?ne.p(ue,Oe):(ne=De[re]=Ae[re](ue),ne.c()),x(ne,1),ne.m(z,null)),(!X||Oe[0]&524288)&&oe(O,"jse-hide-original-data",!ue[19]),(!X||Oe[0]&1048576&&Me!==(Me=!!ue[20]))&&(G.disabled=Me)},i(ue){X||(x(e.$$.fragment,ue),x(w.$$.fragment,ue),x(Ce),x(F.$$.fragment,ue),x(Ee),x(ne),X=!0)},o(ue){D(e.$$.fragment,ue),D(w.$$.fragment,ue),D(Ce),D(F.$$.fragment,ue),D(Ee),D(ne),X=!1},d(ue){Z(e,ue),ue&&j(t),ue&&j(r),Z(w),Ce&&Ce.d(),Z(F),Ee&&Ee.d(),De[re].d(),ge=!1,It(U)}}}function ipe(n){let e,t,r,i,o;return t=new JL({props:{$$slots:{default:[rpe]},$$scope:{ctx:n}}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-modal jse-transform svelte-1313i2c")},m(s,a){H(s,e,a),Q(t,e,null),r=!0,i||(o=Mn(m_.call(null,e,n[22])),i=!0)},p(s,a){const l={};a[0]&4194303|a[1]&2048&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(x(t.$$.fragment,s),r=!0)},o(s){D(t.$$.fragment,s),r=!1},d(s){s&&j(e),Z(t),i=!1,o()}}}function ope(n){n.focus()}function spe(n,e,t){const r=oi("jsoneditor:TransformModal");let{id:i="transform-modal-"+_0()}=e,{json:o}=e,{rootPath:s=[]}=e,{indentation:a}=e,{escapeControlCharacters:l}=e,{escapeUnicodeCharacters:u}=e,{parser:c}=e,{parseMemoizeOne:f}=e,{validationParser:d}=e,{pathParser:h}=e,{queryLanguages:p}=e,{queryLanguageId:m}=e,{onChangeQueryLanguage:g}=e,{onRenderValue:v}=e,{onRenderMenu:b}=e,{onRenderContextMenu:w}=e,{onClassName:_}=e,{onTransform:y}=e,k,S;const{close:E}=pr("simple-modal"),M=`${i}:${Ke(s)}`,R=Bp[M]||{};let O=C1.showWizard!==!1,I=C1.showOriginal!==!1,P=R.queryOptions||{},A=m===R.queryLanguageId&&R.query?R.query:W(m).createQuery(k,R.queryOptions||{}),N=R.isManual||!1,F,V={text:""};function W(G){return p.find(ae=>ae.id===G)||p[0]}function L(G){t(15,P=G),t(16,A=W(m).createQuery(k,G)),t(35,N=!1),r("updateQueryByWizard",{queryOptions:P,query:A,isManual:N})}function z(G){t(16,A=G.target.value),t(35,N=!0),r("handleChangeQuery",{query:A,isManual:N})}function q(G,ae){if(G===void 0){t(21,V={text:""}),t(20,F="Error: No JSON");return}try{r("previewTransform",{query:ae});const Me=W(m).executeQuery(G,ae,c);t(21,V={json:Me}),t(20,F=void 0)}catch(Me){t(21,V={text:""}),t(20,F=String(Me))}}const te=e_(q,BB);function re(){if(k===void 0){t(21,V={text:""}),t(20,F="Error: No JSON");return}try{r("handleTransform",{query:A});const G=W(m).executeQuery(k,A,c);y([{op:"replace",path:Ke(s),value:G}]),E()}catch(G){console.error(G),t(21,V={text:""}),t(20,F=String(G))}}function ne(){t(18,O=!O),C1.showWizard=O}function fe(){t(19,I=!I),C1.showOriginal=I}function ie(G){r("handleChangeQueryLanguage",G),t(0,m=G),g(G);const ae=W(m);t(16,A=ae.createQuery(k,P)),t(35,N=!1)}return n.$$set=G=>{"id"in G&&t(30,i=G.id),"json"in G&&t(31,o=G.json),"rootPath"in G&&t(1,s=G.rootPath),"indentation"in G&&t(2,a=G.indentation),"escapeControlCharacters"in G&&t(3,l=G.escapeControlCharacters),"escapeUnicodeCharacters"in G&&t(4,u=G.escapeUnicodeCharacters),"parser"in G&&t(5,c=G.parser),"parseMemoizeOne"in G&&t(6,f=G.parseMemoizeOne),"validationParser"in G&&t(7,d=G.validationParser),"pathParser"in G&&t(8,h=G.pathParser),"queryLanguages"in G&&t(9,p=G.queryLanguages),"queryLanguageId"in G&&t(0,m=G.queryLanguageId),"onChangeQueryLanguage"in G&&t(32,g=G.onChangeQueryLanguage),"onRenderValue"in G&&t(10,v=G.onRenderValue),"onRenderMenu"in G&&t(11,b=G.onRenderMenu),"onRenderContextMenu"in G&&t(12,w=G.onRenderContextMenu),"onClassName"in G&&t(13,_=G.onClassName),"onTransform"in G&&t(33,y=G.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1&&t(14,k=XF(ot(o,s))),n.$$.dirty[0]&16384&&t(17,S=k?{json:k}:{text:""}),n.$$.dirty[0]&81920&&te(k,A),n.$$.dirty[0]&98305|n.$$.dirty[1]&24&&(t(34,Bp[M]={queryOptions:P,query:A,queryLanguageId:m,isManual:N},Bp),r("store state in memory",M,Bp[M]))},[m,s,a,l,u,c,f,d,h,p,v,b,w,_,k,P,A,S,O,I,F,V,E,W,L,z,re,ne,fe,ie,i,o,g,y,Bp,N]}class ape extends ye{constructor(e){super(),be(this,e,spe,ipe,Rt,{id:30,json:31,rootPath:1,indentation:2,escapeControlCharacters:3,escapeUnicodeCharacters:4,parser:5,parseMemoizeOne:6,validationParser:7,pathParser:8,queryLanguages:9,queryLanguageId:0,onChangeQueryLanguage:32,onRenderValue:10,onRenderMenu:11,onRenderContextMenu:12,onClassName:13,onTransform:33},null,[-1,-1])}}const lpe=ape,ud={};function EO(n){let e,t,r,i,o,s,a;function l(c){n[14](c)}let u={showChevron:!0,items:n[5]};return n[1]!==void 0&&(u.value=n[1]),o=new Nc({props:u}),rt.push(()=>fr(o,"value",l)),{c(){e=B("tr"),t=B("th"),t.textContent="Property",r=K(),i=B("td"),$(o.$$.fragment),C(t,"class","svelte-1gkfll"),C(i,"class","svelte-1gkfll")},m(c,f){H(c,e,f),T(e,t),T(e,r),T(e,i),Q(o,i,null),a=!0},p(c,f){const d={};f&32&&(d.items=c[5]),!s&&f&2&&(s=!0,d.value=c[1],cr(()=>s=!1)),o.$set(d)},i(c){a||(x(o.$$.fragment,c),a=!0)},o(c){D(o.$$.fragment,c),a=!1},d(c){c&&j(e),Z(o)}}}function AO(n){let e,t;return{c(){e=B("div"),t=Se(n[4]),C(e,"class","jse-error svelte-1gkfll")},m(r,i){H(r,e,i),T(e,t)},p(r,i){i&16&&ze(t,r[4])},d(r){r&&j(e)}}}function upe(n){var q;let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S,E,M,R,O,I,P,A,N,F;t=new Jx({props:{title:n[3]?"Sort array items":"Sort object keys"}});let V=n[3]&&(n[5]&&((q=n[5])==null?void 0:q.length)>1||n[1]===void 0)&&EO(n);function W(te){n[15](te)}let L={showChevron:!0,clearable:!1,items:n[7]};n[2]!==void 0&&(L.value=n[2]),y=new Nc({props:L}),rt.push(()=>fr(y,"value",W));let z=n[4]&&AO(n);return{c(){var te;e=B("div"),$(t.$$.fragment),r=K(),i=B("div"),o=B("table"),s=B("colgroup"),s.innerHTML=`<col width="25%"/> 
        <col width="75%"/>`,a=K(),l=B("tbody"),u=B("tr"),c=B("th"),c.textContent="Path",f=K(),d=B("td"),h=B("input"),m=K(),V&&V.c(),g=K(),v=B("tr"),b=B("th"),b.textContent="Direction",w=K(),_=B("td"),$(y.$$.fragment),S=K(),E=B("div"),z&&z.c(),M=K(),R=B("div"),O=B("button"),I=Se("Sort"),C(c,"class","svelte-1gkfll"),C(h,"class","jse-path svelte-1gkfll"),C(h,"type","text"),h.readOnly=!0,C(h,"title","Selected path"),h.value=p=$t(n[0])?"(document root)":lo(n[0]),C(d,"class","svelte-1gkfll"),C(b,"class","svelte-1gkfll"),C(_,"class","svelte-1gkfll"),C(o,"class","svelte-1gkfll"),C(E,"class","jse-space svelte-1gkfll"),C(O,"type","button"),C(O,"class","jse-primary svelte-1gkfll"),O.disabled=P=n[3]&&n[5]&&((te=n[5])==null?void 0:te.length)>1?!n[1]:!1,C(R,"class","jse-actions svelte-1gkfll"),C(i,"class","jse-modal-contents svelte-1gkfll"),C(e,"class","jse-modal jse-sort svelte-1gkfll")},m(te,re){H(te,e,re),Q(t,e,null),T(e,r),T(e,i),T(i,o),T(o,s),T(o,a),T(o,l),T(l,u),T(u,c),T(u,f),T(u,d),T(d,h),T(l,m),V&&V.m(l,null),T(l,g),T(l,v),T(v,b),T(v,w),T(v,_),Q(y,_,null),T(i,S),T(i,E),z&&z.m(E,null),T(i,M),T(i,R),T(R,O),T(O,I),A=!0,N||(F=[le(O,"click",n[8]),Mn(cpe.call(null,O)),Mn(m_.call(null,e,n[6]))],N=!0)},p(te,[re]){var ie,G;const ne={};re&8&&(ne.title=te[3]?"Sort array items":"Sort object keys"),t.$set(ne),(!A||re&1&&p!==(p=$t(te[0])?"(document root)":lo(te[0]))&&h.value!==p)&&(h.value=p),te[3]&&(te[5]&&((ie=te[5])==null?void 0:ie.length)>1||te[1]===void 0)?V?(V.p(te,re),re&42&&x(V,1)):(V=EO(te),V.c(),x(V,1),V.m(l,g)):V&&(de(),D(V,1,1,()=>{V=null}),he());const fe={};!k&&re&4&&(k=!0,fe.value=te[2],cr(()=>k=!1)),y.$set(fe),te[4]?z?z.p(te,re):(z=AO(te),z.c(),z.m(E,null)):z&&(z.d(1),z=null),(!A||re&42&&P!==(P=te[3]&&te[5]&&((G=te[5])==null?void 0:G.length)>1?!te[1]:!1))&&(O.disabled=P)},i(te){A||(x(t.$$.fragment,te),x(V),x(y.$$.fragment,te),A=!0)},o(te){D(t.$$.fragment,te),D(V),D(y.$$.fragment,te),A=!1},d(te){te&&j(e),Z(t),V&&V.d(),Z(y),z&&z.d(),N=!1,It(F)}}}function cpe(n){n.focus()}function fpe(n,e,t){var S,E;let r,i,o;const s=oi("jsoneditor:SortModal");let{id:a}=e,{json:l}=e,{rootPath:u}=e,{onSort:c}=e;const{close:f}=pr("simple-modal"),d=`${a}:${Ke(u)}`,h=ot(l,u),p={value:1,label:"ascending"},g=[p,{value:-1,label:"descending"}];let v=(S=ud[d])==null?void 0:S.selectedProperty,b=((E=ud[d])==null?void 0:E.selectedDirection)||p,w;function _(){var M;try{t(4,w=void 0);const R=(v==null?void 0:v.value)||((M=o==null?void 0:o[0])==null?void 0:M.value)||[],O=b==null?void 0:b.value,I=jF(l,u,R,O);c({operations:I,rootPath:u,itemPath:R,direction:O}),f()}catch(R){t(4,w=String(R))}}function y(M){v=M,t(1,v)}function k(M){b=M,t(2,b)}return n.$$set=M=>{"id"in M&&t(9,a=M.id),"json"in M&&t(10,l=M.json),"rootPath"in M&&t(0,u=M.rootPath),"onSort"in M&&t(11,c=M.onSort)},n.$$.update=()=>{n.$$.dirty&8&&t(13,i=r&&h!==void 0?rC(h):void 0),n.$$.dirty&8192&&t(5,o=i?i.map($p):void 0),n.$$.dirty&4102&&(t(12,ud[d]={selectedProperty:v,selectedDirection:b},ud),s("store state in memory",d,ud[d]))},t(3,r=Array.isArray(h)),[u,v,b,r,w,o,f,g,_,a,l,c,ud,i,y,k]}class dpe extends ye{constructor(e){super(),be(this,e,fpe,upe,Rt,{id:9,json:10,rootPath:0,onSort:11})}}const hpe=dpe;function Lo(){}function A1(n,e=1e3){if(n<.9*e)return n.toFixed()+" B";const t=n/e;if(t<.9*e)return t.toFixed(1)+" KB";const r=t/e;if(r<.9*e)return r.toFixed(1)+" MB";const i=r/e;return i<.9*e?i.toFixed(1)+" GB":(i/e).toFixed(1)+" TB"}function ppe(n){let e,t;return e=new p_({props:{items:n[0]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.items=r[0]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function mpe(n,e,t){let r,{readOnly:i=!1}=e,{onFormat:o}=e,{onCompact:s}=e,{onSort:a}=e,{onTransform:l}=e,{onToggleSearch:u}=e,{onUndo:c}=e,{onRedo:f}=e,{canUndo:d}=e,{canRedo:h}=e,{canFormat:p}=e,{canCompact:m}=e,{canSort:g}=e,{canTransform:v}=e,{onRenderMenu:b}=e;const w={type:"button",icon:Vx,title:"Search (Ctrl+F)",className:"jse-search",onClick:u};let _;return n.$$set=y=>{"readOnly"in y&&t(1,i=y.readOnly),"onFormat"in y&&t(2,o=y.onFormat),"onCompact"in y&&t(3,s=y.onCompact),"onSort"in y&&t(4,a=y.onSort),"onTransform"in y&&t(5,l=y.onTransform),"onToggleSearch"in y&&t(6,u=y.onToggleSearch),"onUndo"in y&&t(7,c=y.onUndo),"onRedo"in y&&t(8,f=y.onRedo),"canUndo"in y&&t(9,d=y.canUndo),"canRedo"in y&&t(10,h=y.canRedo),"canFormat"in y&&t(11,p=y.canFormat),"canCompact"in y&&t(12,m=y.canCompact),"canSort"in y&&t(13,g=y.canSort),"canTransform"in y&&t(14,v=y.canTransform),"onRenderMenu"in y&&t(15,b=y.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&32702&&t(16,_=i?[w,{type:"space"}]:[{type:"button",icon:mC,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:o,disabled:i||!p},{type:"button",icon:Pde,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:s,disabled:i||!m},{type:"separator"},{type:"button",icon:a_,title:"Sort",className:"jse-sort",onClick:a,disabled:i||!g},{type:"button",icon:o_,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:l,disabled:i||!v},w,{type:"separator"},{type:"button",icon:Hx,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:c,disabled:!d},{type:"button",icon:jx,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:f,disabled:!h},{type:"space"}]),n.$$.dirty&98304&&t(0,r=b(_)||_)},[r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,_]}class gpe extends ye{constructor(e){super(),be(this,e,mpe,ppe,Rt,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}const vpe=gpe;let wn=class QF{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Th(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Uv.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Th(this,e,t);let r=[];return this.decompose(e,t,r,0),Uv.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new C0(this),o=new C0(e);for(let s=t,a=t;;){if(i.next(s),o.next(s),s=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new C0(this,e)}iterRange(e,t=this.length){return new ZF(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new $F(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?QF.empty:e.length<=32?new Mr(e):Uv.from(Mr.split(e,[]))}};class Mr extends wn{constructor(e,t=bpe(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let o=0;;o++){let s=this.text[o],a=i+s.length;if((t?r:a)>=e)return new ype(i,a,r,s);i=a+1,r++}}decompose(e,t,r,i){let o=e<=0&&t>=this.length?this:new Mr(MO(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let s=r.pop(),a=Gv(o.text,s.text.slice(),0,o.length);if(a.length<=32)r.push(new Mr(a,s.length+o.length));else{let l=a.length>>1;r.push(new Mr(a.slice(0,l)),new Mr(a.slice(l)))}}else r.push(o)}replace(e,t,r){if(!(r instanceof Mr))return super.replace(e,t,r);[e,t]=Th(this,e,t);let i=Gv(this.text,Gv(r.text,MO(this.text,0,e)),t),o=this.length+r.length-(t-e);return i.length<=32?new Mr(i,o):Uv.from(Mr.split(i,[]),o)}sliceString(e,t=this.length,r=`
`){[e,t]=Th(this,e,t);let i="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.slice(Math.max(0,e-o),t-o)),o=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(t.push(new Mr(r,i)),r=[],i=-1);return i>-1&&t.push(new Mr(r,i)),t}}let Uv=class kd extends wn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let o=0;;o++){let s=this.children[o],a=i+s.length,l=r+s.lines-1;if((t?l:a)>=e)return s.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],l=s+a.length;if(e<=l&&t>=s){let u=i&((s<=e?1:0)|(l>=t?2:0));s>=e&&l<=t&&!u?r.push(a):a.decompose(e-s,t-s,r,u)}s=l+1}}replace(e,t,r){if([e,t]=Th(this,e,t),r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e>=o&&t<=a){let l=s.replace(e-o,t-o,r),u=this.lines-s.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[i]=l,new kd(c,this.length-(t-e)+r.length)}return super.replace(o,a,l)}o=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Th(this,e,t);let i="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.sliceString(e-s,t-s,r)),s=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof kd))return 0;let r=0,[i,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,o+=t){if(i==s||o==a)return r;let l=this.children[i],u=e.children[o];if(l!=u)return r+l.scanIdentical(u,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let p of e)p.flatten(h);return new Mr(h,t)}let i=Math.max(32,r>>5),o=i<<1,s=i>>1,a=[],l=0,u=-1,c=[];function f(h){let p;if(h.lines>o&&h instanceof kd)for(let m of h.children)f(m);else h.lines>s&&(l>s||!l)?(d(),a.push(h)):h instanceof Mr&&l&&(p=c[c.length-1])instanceof Mr&&h.lines+p.lines<=32?(l+=h.lines,u+=h.length+1,c[c.length-1]=new Mr(p.text.concat(h.text),p.length+1+h.length)):(l+h.lines>i&&d(),l+=h.lines,u+=h.length+1,c.push(h))}function d(){l!=0&&(a.push(c.length==1?c[0]:kd.from(c,u)),u=-1,l=c.length=0)}for(let h of e)f(h);return d(),a.length==1?a[0]:new kd(a,t)}};wn.empty=new Mr([""],0);function bpe(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Gv(n,e,t=0,r=1e9){for(let i=0,o=0,s=!0;o<n.length&&i<=r;o++){let a=n[o],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),s?(e[e.length-1]+=a,s=!1):e.push(a)),i=l+1}return e}function MO(n,e,t){return Gv(n,[""],e,t)}class C0{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Mr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],s=o>>1,a=i instanceof Mr?i.text.length:i.children.length;if(s==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Mr){let l=i.text[s+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[s+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Mr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ZF{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new C0(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class $F{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(wn.prototype[Symbol.iterator]=function(){return this.iter()},C0.prototype[Symbol.iterator]=ZF.prototype[Symbol.iterator]=$F.prototype[Symbol.iterator]=function(){return this});class ype{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function Th(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let th="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<th.length;n++)th[n]+=th[n-1];function _pe(n){for(let e=1;e<th.length;e+=2)if(th[e]>n)return th[e-1]<=n;return!1}function TO(n){return n>=127462&&n<=127487}const OO=8205;function bi(n,e,t=!0,r=!0){return(t?ez:wpe)(n,e,r)}function ez(n,e,t){if(e==n.length)return e;e&&tz(n.charCodeAt(e))&&nz(n.charCodeAt(e-1))&&e--;let r=pi(n,e);for(e+=qo(r);e<n.length;){let i=pi(n,e);if(r==OO||i==OO||t&&_pe(i))e+=qo(i),r=i;else if(TO(i)){let o=0,s=e-2;for(;s>=0&&TO(pi(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function wpe(n,e,t){for(;e>0;){let r=ez(n,e-2,t);if(r<e)return r;e--}return 0}function tz(n){return n>=56320&&n<57344}function nz(n){return n>=55296&&n<56320}function pi(n,e){let t=n.charCodeAt(e);if(!nz(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return tz(r)?(t-55296<<10)+(r-56320)+65536:t}function r6(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function qo(n){return n<65536?1:2}const gC=/\r\n?|\n/;var Vi=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Vi||(Vi={}));class Ta{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(r,i,o),i+=o):i+=s,r+=o}}iterChangedRanges(e,t=!1){vC(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new Ta(e)}composeDesc(e){return this.empty?e:e.empty?this:rz(this,e)}mapDesc(e,t=!1){return e.empty?this:bC(this,e,t)}mapPos(e,t=-1,r=Vi.Simple){let i=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],l=this.sections[s++],u=i+a;if(l<0){if(u>e)return o+(e-i);o+=a}else{if(r!=Vi.Simple&&u>=e&&(r==Vi.TrackDel&&i<e&&u>e||r==Vi.TrackBefore&&i<e||r==Vi.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!a)return e==i||t<0?o:o+l;o+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let o=this.sections[r++],s=this.sections[r++],a=i+o;if(s>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ta(e)}static create(e){return new Ta(e)}}class Wr extends Ta{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return vC(this,(t,r,i,o,s)=>e=e.replace(i,i+(r-t),s),!1),e}mapDesc(e,t=!1){return bC(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,o=0;i<t.length;i+=2){let s=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=s;let l=i>>1;for(;r.length<l;)r.push(wn.empty);r.push(s?e.slice(o,o+s):wn.empty)}o+=s}return new Wr(t,r)}compose(e){return this.empty?e:e.empty?this:rz(this,e,!0)}map(e,t=!1){return e.empty?this:bC(this,e,t,!0)}iterChanges(e,t=!1){vC(this,e,t)}get desc(){return Ta.create(this.sections)}filter(e){let t=[],r=[],i=[],o=new pm(this);e:for(let s=0,a=0;;){let l=s==e.length?1e9:e[s++];for(;a<l||a==l&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,l-a);xi(i,c,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;xi(t,c,f),f>0&&wu(r,t,o.text),o.forward(c),a+=c}let u=e[s++];for(;a<u;){if(o.done)break e;let c=Math.min(o.len,u-a);xi(t,c,-1),xi(i,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),a+=c}}return{changes:new Wr(t,r),filtered:Ta.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],o=[],s=0,a=null;function l(c=!1){if(!c&&!i.length)return;s<t&&xi(i,t-s,-1);let f=new Wr(i,o);a=a?a.compose(f.map(a)):f,i=[],o=[],s=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof Wr){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:f,to:d=f,insert:h}=c;if(f>d||f<0||d>t)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${t})`);let p=h?typeof h=="string"?wn.of(h.split(r||gC)):h:wn.empty,m=p.length;if(f==d&&m==0)return;f<s&&l(),f>s&&xi(i,f-s,-1),xi(i,d-f,m),wu(o,i,p),s=d}}return u(e),l(!a),a}static empty(e){return new Wr(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;r.length<i;)r.push(wn.empty);r[i]=wn.of(o.slice(1)),t.push(o[0],r[i].length)}}}return new Wr(t,r)}static createSet(e,t){return new Wr(e,t)}}function xi(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function wu(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(wn.empty);n.push(t)}}function vC(n,e,t){let r=n.inserted;for(let i=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],l=n.sections[s++];if(l<0)i+=a,o+=a;else{let u=i,c=o,f=wn.empty;for(;u+=a,c+=l,l&&r&&(f=f.append(r[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],l=n.sections[s++];e(i,u,o,c,f),i=u,o=c}}}function bC(n,e,t,r=!1){let i=[],o=r?[]:null,s=new pm(n),a=new pm(e);for(let l=-1;;)if(s.ins==-1&&a.ins==-1){let u=Math.min(s.len,a.len);xi(i,u,-1),s.forward(u),a.forward(u)}else if(a.ins>=0&&(s.ins<0||l==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let u=a.len;for(xi(i,a.ins,-1);u;){let c=Math.min(s.len,u);s.ins>=0&&l<s.i&&s.len<=c&&(xi(i,0,s.ins),o&&wu(o,i,s.text),l=s.i),s.forward(c),u-=c}a.next()}else if(s.ins>=0){let u=0,c=s.len;for(;c;)if(a.ins==-1){let f=Math.min(c,a.len);u+=f,c-=f,a.forward(f)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;xi(i,u,l<s.i?s.ins:0),o&&l<s.i&&wu(o,i,s.text),l=s.i,s.forward(s.len-c)}else{if(s.done&&a.done)return o?Wr.createSet(i,o):Ta.create(i);throw new Error("Mismatched change set lengths")}}function rz(n,e,t=!1){let r=[],i=t?[]:null,o=new pm(n),s=new pm(e);for(let a=!1;;){if(o.done&&s.done)return i?Wr.createSet(r,i):Ta.create(r);if(o.ins==0)xi(r,o.len,0,a),o.next();else if(s.len==0&&!s.done)xi(r,0,s.ins,a),i&&wu(i,r,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,s.len),u=r.length;if(o.ins==-1){let c=s.ins==-1?-1:s.off?0:s.ins;xi(r,l,c,a),i&&c&&wu(i,r,s.text)}else s.ins==-1?(xi(r,o.off?0:o.len,l,a),i&&wu(i,r,o.textBit(l))):(xi(r,o.off?0:o.len,s.off?0:s.ins,a),i&&!s.off&&wu(i,r,s.text));a=(o.ins>l||s.ins>=0&&s.len>l)&&(a||r.length>u),o.forward2(l),s.forward(l)}}}}class pm{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?wn.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?wn.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}let M1=class yC{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new yC(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Re.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Re.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Re.range(e.anchor,e.head)}static create(e,t,r){return new yC(e,t,r)}};class Re{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Re.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Re([this.main],0)}addRange(e,t=!0){return Re.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,Re.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Re(e.ranges.map(t=>M1.fromJSON(t)),e.main)}static single(e,t=e){return new Re([Re.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return Re.normalized(e.slice(),t);r=o.to}return new Re(e,t)}static cursor(e,t=0,r,i){return M1.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let o=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?M1.create(t,e,48|o):M1.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let r=e[t];e.sort((i,o)=>i.from-o.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],s=e[i-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,l=Math.max(o.to,s.to);i<=t&&t--,e.splice(--i,2,o.anchor>o.head?Re.range(l,a):Re.range(a,l))}}return new Re(e,t)}}function iz(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let i6=0;class ut{constructor(e,t,r,i,o){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=i6++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new ut(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:o6),!!e.static,e.enables)}of(e){return new Kv([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kv(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kv(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function o6(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Kv{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=i6++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||c.push(e[f.id]);return{create(f){return f.values[s]=r(f),1},update(f,d){if(l&&d.docChanged||u&&(d.docChanged||d.selection)||_C(f,c)){let h=r(f);if(a?!DO(h,f.values[s],i):!i(h,f.values[s]))return f.values[s]=h,1}return 0},reconfigure:(f,d)=>{let h,p=d.config.address[o];if(p!=null){let m=Wb(d,p);if(this.dependencies.every(g=>g instanceof ut?d.facet(g)===f.facet(g):g instanceof Jr?d.field(g,!1)==f.field(g,!1):!0)||(a?DO(h=r(f),m,i):i(h=r(f),m)))return f.values[s]=m,0}else h=r(f);return f.values[s]=h,1}}}}function DO(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function _C(n,e){let t=!1;for(let r of e)S0(n,r)&1&&(t=!0);return t}function kpe(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),o=r.filter(l=>!(l&1)),s=n[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let f=Wb(l,r[c]);if(i[c]==2)for(let d of f)u.push(d);else u.push(f)}return e.combine(u)}return{create(l){for(let u of r)S0(l,u);return l.values[s]=a(l),1},update(l,u){if(!_C(l,o))return 0;let c=a(l);return e.compare(c,l.values[s])?0:(l.values[s]=c,1)},reconfigure(l,u){let c=_C(l,r),f=u.config.facets[e.id],d=u.facet(e);if(f&&!c&&o6(t,f))return l.values[s]=d,0;let h=a(l);return e.compare(h,d)?(l.values[s]=d,0):(l.values[s]=h,1)}}}const RO=ut.define({static:!0});class Jr{constructor(e,t,r,i,o){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let t=new Jr(i6++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(RO).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let o=r.values[t],s=this.updateF(o,i);return this.compareF(o,s)?0:(r.values[t]=s,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,RO.of({field:this,create:e})]}get extension(){return this}}const Bc={lowest:4,low:3,default:2,high:1,highest:0};function Lp(n){return e=>new oz(e,n)}const Vf={highest:Lp(Bc.highest),high:Lp(Bc.high),default:Lp(Bc.default),low:Lp(Bc.low),lowest:Lp(Bc.lowest)};class oz{constructor(e,t){this.inner=e,this.prec=t}}class gl{of(e){return new wC(this,e)}reconfigure(e){return gl.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class wC{constructor(e,t){this.compartment=e,this.inner=t}}let PO=class sz{constructor(e,t,r,i,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],o=Object.create(null),s=new Map;for(let d of Cpe(e,t,s))d instanceof Jr?i.push(d):(o[d.facet.id]||(o[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],u=[];for(let d of i)a[d.id]=u.length<<1,u.push(h=>d.slot(h));let c=r==null?void 0:r.config.facets;for(let d in o){let h=o[d],p=h[0].facet,m=c&&c[d]||[];if(h.every(g=>g.type==0))if(a[p.id]=l.length<<1|1,o6(m,h))l.push(r.facet(p));else{let g=p.combine(h.map(v=>v.value));l.push(r&&p.compare(g,r.facet(p))?r.facet(p):g)}else{for(let g of h)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=u.length<<1,u.push(v=>g.dynamicSlot(v)));a[p.id]=u.length<<1,u.push(g=>kpe(g,p,h))}}let f=u.map(d=>d(a));return new sz(e,s,f,a,l,o)}};function Cpe(n,e,t){let r=[[],[],[],[],[]],i=new Map;function o(s,a){let l=i.get(s);if(l!=null){if(l<=a)return;let u=r[l].indexOf(s);u>-1&&r[l].splice(u,1),s instanceof wC&&t.delete(s.compartment)}if(i.set(s,a),Array.isArray(s))for(let u of s)o(u,a);else if(s instanceof wC){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(s.compartment)||s.inner;t.set(s.compartment,u),o(u,a)}else if(s instanceof oz)o(s.inner,s.prec);else if(s instanceof Jr)r[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof Kv)r[a].push(s),s.facet.extensions&&o(s.facet.extensions,Bc.default);else{let u=s.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,a)}}return o(n,Bc.default),r.reduce((s,a)=>s.concat(a))}function S0(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function Wb(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const az=ut.define(),kC=ut.define({combine:n=>n.some(e=>e),static:!0}),lz=ut.define({combine:n=>n.length?n[0]:void 0,static:!0}),uz=ut.define(),cz=ut.define(),fz=ut.define(),dz=ut.define({combine:n=>n.length?n[0]:!1});class Jl{constructor(e,t){this.type=e,this.value=t}static define(){return new Spe}}class Spe{of(e){return new Jl(this,e)}}class xpe{constructor(e){this.map=e}of(e){return new Vt(this,e)}}class Vt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Vt(this.type,t)}is(e){return this.type==e}static define(e={}){return new xpe(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(t);o&&r.push(o)}return r}}Vt.reconfigure=Vt.define();Vt.appendConfig=Vt.define();let io=class t0{constructor(e,t,r,i,o,s){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&iz(r,t.newLength),o.some(a=>a.type==t0.time)||(this.annotations=o.concat(t0.time.of(Date.now())))}static create(e,t,r,i,o,s){return new t0(e,t,r,i,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(t0.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};io.time=Jl.define();io.userEvent=Jl.define();io.addToHistory=Jl.define();io.remote=Jl.define();function Epe(n,e){let t=[];for(let r=0,i=0;;){let o,s;if(r<n.length&&(i==e.length||e[i]>=n[r]))o=n[r++],s=n[r++];else if(i<e.length)o=e[i++],s=e[i++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function hz(n,e,t){var r;let i,o,s;return t?(i=e.changes,o=Wr.empty(e.changes.length),s=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:Vt.mapEffects(n.effects,i).concat(Vt.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function CC(n,e,t){let r=e.selection,i=nh(e.annotations);return e.userEvent&&(i=i.concat(io.userEvent.of(e.userEvent))),{changes:e.changes instanceof Wr?e.changes:Wr.of(e.changes||[],t,n.facet(lz)),selection:r&&(r instanceof Re?r:Re.single(r.anchor,r.head)),effects:nh(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function pz(n,e,t){let r=CC(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;r=hz(r,CC(n,e[o],s?r.changes.newLength:n.doc.length),s)}let i=io.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Mpe(t?Ape(i):i)}function Ape(n){let e=n.startState,t=!0;for(let i of e.facet(uz)){let o=i(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:Epe(t,o))}if(t!==!0){let i,o;if(t===!1)o=n.changes.invertedDesc,i=Wr.empty(e.doc.length);else{let s=n.changes.filter(t);i=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=io.create(e,i,n.selection&&n.selection.map(o),Vt.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let r=e.facet(cz);for(let i=r.length-1;i>=0;i--){let o=r[i](n);o instanceof io?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof io?n=o[0]:n=pz(e,nh(o),!1)}return n}function Mpe(n){let e=n.startState,t=e.facet(fz),r=n;for(let i=t.length-1;i>=0;i--){let o=t[i](n);o&&Object.keys(o).length&&(r=hz(r,CC(e,o,n.changes.newLength),!0))}return r==n?n:io.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const Tpe=[];function nh(n){return n==null?Tpe:Array.isArray(n)?n:[n]}var ar=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(ar||(ar={}));const Ope=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let SC;try{SC=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Dpe(n){if(SC)return SC.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Ope.test(t)))return!0}return!1}function Rpe(n){return e=>{if(!/\S/.test(e))return ar.Space;if(Dpe(e))return ar.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ar.Word;return ar.Other}}let Un=class Cs{constructor(e,t,r,i,o,s){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)S0(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return S0(this,r),Wb(this,r)}update(...e){return pz(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let a of e.effects)a.is(gl.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(a.value.compartment,a.value.extension)):a.is(Vt.reconfigure)?(t=null,r=a.value):a.is(Vt.appendConfig)&&(t=null,r=nh(r).concat(a.value));let o;t?o=e.startState.values.slice():(t=PO.resolve(r,i,this),o=new Cs(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let s=e.startState.facet(kC)?e.newSelection:e.newSelection.asSingle();new Cs(t,e.newDoc,s,o,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Re.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),o=[r.range],s=nh(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let d=0;d<a;d++)o[d]=o[d].map(c);let f=i.mapDesc(u,!0);o.push(l.range.map(f)),i=i.compose(c),s=Vt.mapEffects(s,c).concat(Vt.mapEffects(nh(l.effects),f))}return{changes:i,selection:Re.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof Wr?e:Wr.of(e,this.doc.length,this.facet(Cs.lineSeparator))}toText(e){return wn.of(e.split(this.facet(Cs.lineSeparator)||gC))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(S0(this,t),Wb(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Jr&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let s=r[o],a=e[o];i.push(s.init(l=>s.spec.fromJSON(a,l)))}}return Cs.create({doc:e.doc,selection:Re.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=PO.resolve(e.extensions||[],new Map),r=e.doc instanceof wn?e.doc:wn.of((e.doc||"").split(t.staticFacet(Cs.lineSeparator)||gC)),i=e.selection?e.selection instanceof Re?e.selection:Re.single(e.selection.anchor,e.selection.head):Re.single(0);return iz(i,r.length),t.staticFacet(kC)||(i=i.asSingle()),new Cs(t,r,i,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(Cs.tabSize)}get lineBreak(){return this.facet(Cs.lineSeparator)||`
`}get readOnly(){return this.facet(dz)}phrase(e,...t){for(let r of this.facet(Cs.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>t.length?r:t[o-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let o of this.facet(az))for(let s of o(this,t,r))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return Rpe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-r,a=e-r;for(;s>0;){let l=bi(t,s,!1);if(o(t.slice(l,s))!=ar.Word)break;s=l}for(;a<i;){let l=bi(t,a);if(o(t.slice(a,l))!=ar.Word)break;a=l}return s==a?null:Re.range(s+r,a+r)}};Un.allowMultipleSelections=kC;Un.tabSize=ut.define({combine:n=>n.length?n[0]:4});Un.lineSeparator=lz;Un.readOnly=dz;Un.phrases=ut.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});Un.languageData=az;Un.changeFilter=uz;Un.transactionFilter=cz;Un.transactionExtender=fz;gl.reconfigure=Vt.define();function ms(n,e,t={}){let r={};for(let i of n)for(let o of Object.keys(i)){let s=i[o],a=r[o];if(a===void 0)r[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))r[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class yf{eq(e){return this==e}range(e,t=e){return xC.create(e,t,this)}}yf.prototype.startSide=yf.prototype.endSide=0;yf.prototype.point=!1;yf.prototype.mapMode=Vi.TrackDel;let xC=class mz{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new mz(e,t,r)}};function EC(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class s6{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let o=r?this.to:this.from;for(let s=i,a=o.length;;){if(s==a)return s;let l=s+a>>1,u=o[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==s)return u>=0?s:a;u>=0?a=l:s=l+1}}between(e,t,r,i){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(r,1e9,!1,o);o<s;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let r=[],i=[],o=[],s=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,d,h;if(c==f){let p=t.mapPos(c,u.startSide,u.mapMode);if(p==null||(d=h=p,u.startSide!=u.endSide&&(h=t.mapPos(c,u.endSide),h<d)))continue}else if(d=t.mapPos(c,u.startSide),h=t.mapPos(f,u.endSide),d>h||d==h&&u.startSide>0&&u.endSide<=0)continue;(h-d||u.endSide-u.startSide)<0||(s<0&&(s=d),u.point&&(a=Math.max(a,h-d)),r.push(u),i.push(d-s),o.push(h-s))}return{mapped:r.length?new s6(i,o,r,a):null,pos:s}}}class sn{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new sn(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(r&&(t=t.slice().sort(EC)),this.isEmpty)return t.length?sn.of(t):this;let a=new gz(this,null,-1).goto(0),l=0,u=[],c=new Fa;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let f=t[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!s||i>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||i>a.to||o<a.from||s(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(xC.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?sn.empty:this.nextLayer.update({add:u,filter:s,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],l=this.chunk[s],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:f}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),r.push(f))}}let o=this.nextLayer.map(e);return t.length==0?o:new sn(r,t,o||sn.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return mm.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return mm.from(e).goto(t)}static compare(e,t,r,i,o=-1){let s=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=IO(s,a,r),u=new Fp(s,l,o),c=new Fp(a,l,o);r.iterGaps((f,d,h)=>NO(u,f,c,d,h,i)),r.empty&&r.length==0&&NO(u,0,c,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=1e9-1);let o=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),s=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=IO(o,s),l=new Fp(o,a,0).goto(r),u=new Fp(s,a,0).goto(r);for(;;){if(l.to!=u.to||!AC(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,r,i,o=-1){let s=new Fp(e,null,o).goto(t),a=t,l=s.openStart;for(;;){let u=Math.min(s.to,r);if(s.point){let c=s.activeForPoint(s.to),f=s.pointFrom<t?c.length+1:s.point.startSide<0?c.length:Math.min(c.length,l);i.point(a,u,s.point,c,f,s.pointRank),l=Math.min(s.openEnd(u),c.length)}else u>a&&(i.span(a,u,s.active,l),l=s.openEnd(u));if(s.to>r)return l+(s.point&&s.to>r?1:0);a=s.to,s.next()}}static of(e,t=!1){let r=new Fa;for(let i of e instanceof xC?[e]:t?Ppe(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return sn.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=sn.empty;i=i.nextLayer)t=new sn(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}sn.empty=new sn([],[],null,-1);function Ppe(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(EC(e,r)>0)return n.slice().sort(EC);e=r}return n}sn.empty.nextLayer=sn.empty;class Fa{finishChunk(e){this.chunks.push(new s6(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Fa)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(sn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=sn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function IO(n,e,t){let r=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&r.set(o.chunk[s],o.chunkPos[s]);let i=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=r.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!(t!=null&&t.touchesRange(a,a+o.chunk[s].length))&&i.add(o.chunk[s])}return i}class gz{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class mm{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&i.push(new gz(s,t,r,o));return i.length==1?i[0]:new mm(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Xw(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Xw(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Xw(this.heap,0)}}}function Xw(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class Fp{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=mm.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){T1(this.active,e),T1(this.activeTo,e),T1(this.activeRank,e),this.minActive=BO(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||i-this.activeTo[t])>0;)t++;O1(this.active,t,r),O1(this.activeTo,t,i),O1(this.activeRank,t,o),e&&O1(e,t,this.cursor.from),this.minActive=BO(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&T1(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function NO(n,e,t,r,i,o){n.goto(e),t.goto(r);let s=r+i,a=r,l=r-e;for(;;){let u=n.to+l-t.to||n.endSide-t.endSide,c=u<0?n.to+l:t.to,f=Math.min(c,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&AC(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,f,n.point,t.point):f>a&&!AC(n.active,t.active)&&o.compareRange(a,f,n.active,t.active),c>s)break;a=c,u<=0&&n.next(),u>=0&&t.next()}}function AC(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function T1(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function O1(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function BO(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function dp(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=bi(n,i));return r}function MC(n,e,t,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==n.length)break;o+=n.charCodeAt(i)==9?t-o%t:1,i=bi(n,i)}return r===!0?-1:n.length}const TC="",LO=typeof Symbol>"u"?"__"+TC:Symbol.for(TC),OC=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),FO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Xu{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,l,u){let c=[],f=/^@(\w+)\b/.exec(s[0]),d=f&&f[1]=="keyframes";if(f&&a==null)return l.push(s[0]+";");for(let h in a){let p=a[h];if(/&/.test(h))o(h.split(/,\s*/).map(m=>s.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,l);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+h+") should be a primitive value.");o(i(h),p,c,d)}else p!=null&&c.push(h.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||d)&&l.push((r&&!f&&!u?s.map(r):s).join(", ")+" {"+c.join(" ")+"}")}for(let s in e)o(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=FO[LO]||1;return FO[LO]=e+1,TC+e.toString(36)}static mount(e,t,r){let i=e[OC],o=r&&r.nonce;i?o&&i.setNonce(o):i=new Ipe(e,o),i.mount(Array.isArray(t)?t:[t],e)}}let zO=new Map;class Ipe{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=zO.get(r);if(o)return e[OC]=o;this.sheet=new i.CSSStyleSheet,zO.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[OC]=this}mount(e,t){let r=this.sheet,i=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],l=this.modules.indexOf(a);if(l<o&&l>-1&&(this.modules.splice(l,1),o--,l=-1),l==-1){if(this.modules.splice(o++,0,a),r)for(let u=0;u<a.rules.length;u++)r.insertRule(a.rules[u],i++)}else{for(;o<l;)i+=this.modules[o++].rules.length;i+=a.rules.length,o++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let l=0;l<this.modules.length;l++)s+=this.modules[l].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var jl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gm={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Npe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Bpe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var mi=0;mi<10;mi++)jl[48+mi]=jl[96+mi]=String(mi);for(var mi=1;mi<=24;mi++)jl[mi+111]="F"+mi;for(var mi=65;mi<=90;mi++)jl[mi]=String.fromCharCode(mi+32),gm[mi]=String.fromCharCode(mi);for(var Qw in jl)gm.hasOwnProperty(Qw)||(gm[Qw]=jl[Qw]);function vz(n){var e=Npe&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Bpe&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?gm:jl)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function vm(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function DC(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Jv(n,e){if(!e.anchorNode)return!1;try{return DC(n,e.anchorNode)}catch{return!1}}function bm(n){return n.nodeType==3?wf(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function x0(n,e,t,r){return t?jO(n,e,t,r,-1)||jO(n,e,t,r,1):!1}function _f(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function qb(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function jO(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:za(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=_f(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?za(n):0}else return!1}}function za(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function g_(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function Lpe(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function bz(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function Fpe(n,e,t,r,i,o,s,a){let l=n.ownerDocument,u=l.defaultView||window;for(let c=n,f=!1;c&&!f;)if(c.nodeType==1){let d,h=c==l.body,p=1,m=1;if(h)d=Lpe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let b=c.getBoundingClientRect();({scaleX:p,scaleY:m}=bz(c,b)),d={left:b.left,right:b.left+c.clientWidth*p,top:b.top,bottom:b.top+c.clientHeight*m}}let g=0,v=0;if(i=="nearest")e.top<d.top?(v=-(d.top-e.top+s),t>0&&e.bottom>d.bottom+v&&(v=e.bottom-d.bottom+v+s)):e.bottom>d.bottom&&(v=e.bottom-d.bottom+s,t<0&&e.top-v<d.top&&(v=-(d.top+v-e.top+s)));else{let b=e.bottom-e.top,w=d.bottom-d.top;v=(i=="center"&&b<=w?e.top+b/2-w/2:i=="start"||i=="center"&&t<0?e.top-s:e.bottom-w+s)-d.top}if(r=="nearest"?e.left<d.left?(g=-(d.left-e.left+o),t>0&&e.right>d.right+g&&(g=e.right-d.right+g+o)):e.right>d.right&&(g=e.right-d.right+o,t<0&&e.left<d.left+g&&(g=-(d.left+g-e.left+o))):g=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==a?e.left-o:e.right-(d.right-d.left)+o)-d.left,g||v)if(h)u.scrollBy(g,v);else{let b=0,w=0;if(v){let _=c.scrollTop;c.scrollTop+=v/m,w=(c.scrollTop-_)*m}if(g){let _=c.scrollLeft;c.scrollLeft+=g/p,b=(c.scrollLeft-_)*p}e={left:e.left-b,top:e.top-w,right:e.right-b,bottom:e.bottom-w},b&&Math.abs(b-g)<1&&(r="nearest"),w&&Math.abs(w-v)<1&&(i="nearest")}if(h)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function zpe(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}class jpe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?za(t):0),r,Math.min(e.focusOffset,r?za(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let cd=null;function yz(n){if(n.setActive)return n.setActive();if(cd)return n.focus(cd);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(cd==null?{get preventScroll(){return cd={preventScroll:!0},!0}}:void 0),!cd){cd=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],o=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let HO;function wf(n,e,t=e){let r=HO||(HO=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function rh(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function Hpe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function _z(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function Vpe(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,za(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=za(t))}else{if(t==n)return!0;r=_f(t),t=t.parentNode}}function wz(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function kz(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=za(t)}else if(t.parentNode&&!qb(t))r=_f(t),t=t.parentNode;else return null}}function Cz(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!qb(t))r=_f(t)+1,t=t.parentNode;else return null}}class Ei{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Ei(e.parentNode,_f(e),t)}static after(e,t){return new Ei(e.parentNode,_f(e)+1,t)}}const a6=[];class Hn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=i?i.nextSibling:r.firstChild)){let a=Hn.get(o);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&o!=s.dom&&(t.written=!0),s.dom.parentNode==r)for(;o&&o!=s.dom;)o=VO(o);else r.insertBefore(s.dom,o);i=s.dom}for(o=i?i.nextSibling:r.firstChild,o&&t&&t.node==r&&(t.written=!0);o;)o=VO(o)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=za(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Hn.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let s=this.children[i];if(s.dom==r)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,o=-1,s=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let f=this.children[l],d=u+f.length;if(u<e&&d>t)return f.domBoundsAround(e,t,u);if(d>=e&&i==-1&&(i=l,o=u),u>t&&f.dom.parentNode==this.dom){s=l,a=c;break}c=d,u=d+f.breakAfter}return{from:o,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=a6){this.markDirty();for(let i=e;i<t;i++){let o=this.children[i];o.parent==this&&r.indexOf(o)<0&&o.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Sz(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Hn.prototype.breakAfter=0;function VO(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Sz{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function xz(n,e,t,r,i,o,s,a,l){let{children:u}=n,c=u.length?u[e]:null,f=o.length?o[o.length-1]:null,d=f?f.breakAfter:s;if(!(e==r&&c&&!s&&!d&&o.length<2&&c.merge(t,i,o.length?f:null,t==0,a,l))){if(r<u.length){let h=u[r];h&&(i<h.length||h.breakAfter&&(f!=null&&f.breakAfter))?(e==r&&(h=h.split(i),i=0),!d&&f&&h.merge(0,i,f,!0,0,l)?o[o.length-1]=h:((i||h.children.length&&!h.children[0].length)&&h.merge(0,i,null,!1,0,l),o.push(h))):h!=null&&h.breakAfter&&(f?f.breakAfter=1:s=1),r++}for(c&&(c.breakAfter=s,t>0&&(!s&&o.length&&c.merge(t,c.length,o[0],!1,a,0)?c.breakAfter=o.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,a,0),e++));e<r&&o.length;)if(u[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else if(u[e].become(o[0]))e++,o.shift(),a=o.length?0:l;else break;!o.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||o.length)&&n.replaceChildren(e,r,o)}}function Ez(n,e,t,r,i,o){let s=n.childCursor(),{i:a,off:l}=s.findPos(t,1),{i:u,off:c}=s.findPos(e,-1),f=e-t;for(let d of r)f+=d.length;n.length+=f,xz(n,u,c,a,l,r,0,i,o)}let $i=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},RC=typeof document<"u"?document:{documentElement:{style:{}}};const PC=/Edge\/(\d+)/.exec($i.userAgent),Az=/MSIE \d/.test($i.userAgent),IC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($i.userAgent),v_=!!(Az||IC||PC),WO=!v_&&/gecko\/(\d+)/i.test($i.userAgent),Zw=!v_&&/Chrome\/(\d+)/.exec($i.userAgent),qO="webkitFontSmoothing"in RC.documentElement.style,Mz=!v_&&/Apple Computer/.test($i.vendor),UO=Mz&&(/Mobile\/\w+/.test($i.userAgent)||$i.maxTouchPoints>2);var ht={mac:UO||/Mac/.test($i.platform),windows:/Win/.test($i.platform),linux:/Linux|X11/.test($i.platform),ie:v_,ie_version:Az?RC.documentMode||6:IC?+IC[1]:PC?+PC[1]:0,gecko:WO,gecko_version:WO?+(/Firefox\/(\d+)/.exec($i.userAgent)||[0,0])[1]:0,chrome:!!Zw,chrome_version:Zw?+Zw[1]:0,ios:UO,android:/Android\b/.test($i.userAgent),webkit:qO,safari:Mz,webkit_version:qO?+(/\bAppleWebKit\/(\d+)/.exec($i.userAgent)||[0,0])[1]:0,tabSize:RC.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Wpe=256;class qs extends Hn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof qs)||this.length-(t-e)+r.length>Wpe||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new qs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Ei(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return qpe(this.dom,e,t)}}class Hl extends Hn{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(_z(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,o,s){return r&&(!(r instanceof Hl&&r.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(Ez(this,e,t,r?r.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,o=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=o),r=l,o++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Hl(this.mark,t,s)}domAtPos(e){return Tz(this,e)}coordsAt(e,t){return Dz(this,e,t)}}function qpe(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;e==0&&t<0||e==r&&t>=0?ht.chrome||ht.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):t<0?i--:o<r&&o++;let a=wf(n,i,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:t>=0)?0:a.length-1];return ht.safari&&!s&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),s?g_(l,s<0):l||null}class ku extends Hn{static create(e,t,r){return new ku(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=ku.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,o,s){return r&&(!(r instanceof ku)||!this.widget.compare(r.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof ku&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return wn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):wn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ei.before(this.dom):Ei.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),o=null;if(!i.length)return null;let s=this.side?this.side<0:e>0;for(let a=s?i.length-1:0;o=i[a],!(e>0?a==0:a==i.length-1||o.top<o.bottom);a+=s?-1:1);return g_(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Oh extends Hn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Oh&&e.side==this.side}split(){return new Oh(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ei.before(this.dom):Ei.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return wn.empty}get isHidden(){return!0}}qs.prototype.children=ku.prototype.children=Oh.prototype.children=a6;function Tz(n,e){let t=n.dom,{children:r}=n,i=0;for(let o=0;i<r.length;i++){let s=r[i],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=i;o>0;o--){let s=r[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=i;o<r.length;o++){let s=r[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new Ei(t,0)}function Oz(n,e,t){let r,{children:i}=n;t>0&&e instanceof Hl&&i.length&&(r=i[i.length-1])instanceof Hl&&r.mark.eq(e.mark)?Oz(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function Dz(n,e,t){let r=null,i=-1,o=null,s=-1;function a(u,c){for(let f=0,d=0;f<u.children.length&&d<=c;f++){let h=u.children[f],p=d+h.length;p>=c&&(h.children.length?a(h,c-d):(!o||o.isHidden&&t>0)&&(p>c||d==p&&h.getSide()>0)?(o=h,s=c-d):(d<c||d==p&&h.getSide()<0&&!h.isHidden)&&(r=h,i=c-d)),d=p}}a(n,e);let l=(t<0?r:o)||r||o;return l?l.coordsAt(Math.max(0,l==r?i:s),t):Upe(n)}function Upe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=bm(e);return t[t.length-1]||null}function NC(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const GO=Object.create(null);function Ub(n,e,t){if(n==e)return!0;n||(n=GO),e||(e=GO);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let o of r)if(o!=t&&(i.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function BC(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function Gpe(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}let hc=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}};var Gi=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Gi||(Gi={}));let Tt=class extends yf{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Mg(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Qu(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:s}=Rz(e,t);r=(o?t?-3e8:-1:5e8)-1,i=(s?t?2e8:1:-6e8)+1}return new Qu(e,r,i,t,e.widget||null,!0)}static line(e){return new Tg(e)}static set(e,t=!1){return sn.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};Tt.none=sn.empty;class Mg extends Tt{constructor(e){let{start:t,end:r}=Rz(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof Mg&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Ub(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Mg.prototype.point=!1;class Tg extends Tt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Tg&&this.spec.class==e.spec.class&&Ub(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Tg.prototype.mapMode=Vi.TrackBefore;Tg.prototype.point=!0;class Qu extends Tt{constructor(e,t,r,i,o,s){super(t,r,o,e),this.block=i,this.isReplace=s,this.mapMode=i?t<=0?Vi.TrackBefore:Vi.TrackAfter:Vi.TrackDel}get type(){return this.startSide!=this.endSide?Gi.WidgetRange:this.startSide<=0?Gi.WidgetBefore:Gi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Qu&&Kpe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Qu.prototype.point=!0;function Rz(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function Kpe(n,e){return n==e||!!(n&&e&&n.compare(e))}function LC(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Ir extends Hn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,o,s){if(r){if(!(r instanceof Ir))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),Ez(this,e,t,r?r.children.slice():[],o,s),!0}split(e){let t=new Ir;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)t.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ub(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Oz(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=NC(t,this.attrs||{})),r&&(this.attrs=NC({class:r},this.attrs||{}))}domAtPos(e){return Tz(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(_z(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(BC(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Hn.get(i)instanceof Hl;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Hn.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!ht.ios||!this.children.some(o=>o instanceof qs))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof qs)||/[^ -~]/.test(r.text))return null;let i=bm(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=Dz(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,o=r.bottom-r.top;if(Math.abs(o-i.lineHeight)<2&&i.textHeight<o){let s=(o-i.textHeight)/2;return{top:r.top+s,bottom:r.bottom-s,left:r.left,right:r.left}}}return r}become(e){return e instanceof Ir&&this.children.length==0&&e.children.length==0&&Ub(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],s=i+o.length;if(s>=t){if(o instanceof Ir)return o;if(s>t)break}i=s+o.breakAfter}return null}}class El extends Hn{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,o,s){return r&&(!(r instanceof El)||!this.widget.compare(r.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Ei.before(this.dom):Ei.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new El(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return a6}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):wn.empty}domBoundsAround(){return null}become(e){return e instanceof El&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof FC?null:g_(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class FC extends hc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class E0{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof El&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ir),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(D1(new Oh(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof El)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(D1(new qs(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,o,s){if(this.disallowBlockEffectsFor[s]&&r instanceof Qu){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof Qu)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new El(r.widget||Dh.block,a,r));else{let l=ku.create(r.widget||Dh.inline,a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&o<=i.length&&(e<t||r.startSide>0),c=!l.isEditable&&(e<t||o>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(D1(new Oh(1),i),o),o=i.length+Math.max(0,o-i.length)),f.append(D1(l,i),o),this.atCursorPos=c,this.pendingBuffer=c?e<t||o>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,r,i,o){let s=new E0(e,t,r,o);return s.openEnd=sn.spans(i,t,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function D1(n,e){for(let t of e)n=new Hl(t,[n],n.length);return n}class Dh extends hc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Dh.inline=new Dh("span");Dh.block=new Dh("div");var tr=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(tr||(tr={}));const kf=tr.LTR,l6=tr.RTL;function Pz(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const Jpe=Pz("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ype=Pz("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),zC=Object.create(null),sa=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);zC[e]=t,zC[t]=-e}function Iz(n){return n<=247?Jpe[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Ype[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const Xpe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Cu{get dir(){return this.level%2?l6:kf}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==r)return s;(o<0||(i!=0?i<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function Nz(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!Nz(r.inner,i.inner))return!1}return!0}const jn=[];function Qpe(n,e,t,r,i){for(let o=0;o<=r.length;o++){let s=o?r[o-1].to:e,a=o<r.length?r[o].from:t,l=o?256:i;for(let u=s,c=l,f=l;u<a;u++){let d=Iz(n.charCodeAt(u));d==512?d=c:d==8&&f==4&&(d=16),jn[u]=d==4?2:d,d&7&&(f=d),c=d}for(let u=s,c=l,f=l;u<a;u++){let d=jn[u];if(d==128)u<a-1&&c==jn[u+1]&&c&24?d=jn[u]=c:jn[u]=256;else if(d==64){let h=u+1;for(;h<a&&jn[h]==64;)h++;let p=u&&c==8||h<t&&jn[h]==8?f==1?1:8:256;for(let m=u;m<h;m++)jn[m]=p;u=h-1}else d==8&&f==1&&(jn[u]=1);c=d,d&7&&(f=d)}}}function Zpe(n,e,t,r,i){let o=i==1?2:1;for(let s=0,a=0,l=0;s<=r.length;s++){let u=s?r[s-1].to:e,c=s<r.length?r[s].from:t;for(let f=u,d,h,p;f<c;f++)if(h=zC[d=n.charCodeAt(f)])if(h<0){for(let m=a-3;m>=0;m-=3)if(sa[m+1]==-h){let g=sa[m+2],v=g&2?i:g&4?g&1?o:i:0;v&&(jn[f]=jn[sa[m]]=v),a=m;break}}else{if(sa.length==189)break;sa[a++]=f,sa[a++]=d,sa[a++]=l}else if((p=jn[f])==2||p==1){let m=p==i;l=m?0:1;for(let g=a-3;g>=0;g-=3){let v=sa[g+2];if(v&2)break;if(m)sa[g+2]|=2;else{if(v&4)break;sa[g+2]|=4}}}}}function $pe(n,e,t,r){for(let i=0,o=r;i<=t.length;i++){let s=i?t[i-1].to:n,a=i<t.length?t[i].from:e;for(let l=s;l<a;){let u=jn[l];if(u==256){let c=l+1;for(;;)if(c==a){if(i==t.length)break;c=t[i++].to,a=i<t.length?t[i].from:e}else if(jn[c]==256)c++;else break;let f=o==1,d=(c<e?jn[c]:r)==1,h=f==d?f?1:2:r;for(let p=c,m=i,g=m?t[m-1].to:n;p>l;)p==g&&(p=t[--m].from,g=m?t[m-1].to:n),jn[--p]=h;l=c}else o=u,l++}}}function jC(n,e,t,r,i,o,s){let a=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<t;){let c=!0,f=!1;if(u==o.length||l<o[u].from){let m=jn[l];m!=a&&(c=!1,f=m==16)}let d=!c&&a==1?[]:null,h=c?r:r+1,p=l;e:for(;;)if(u<o.length&&p==o[u].from){if(f)break e;let m=o[u];if(!c)for(let g=m.to,v=u+1;;){if(g==t)break e;if(v<o.length&&o[v].from==g)g=o[v++].to;else{if(jn[g]==a)break e;break}}if(u++,d)d.push(m);else{m.from>l&&s.push(new Cu(l,m.from,h));let g=m.direction==kf!=!(h%2);HC(n,g?r+1:r,i,m.inner,m.from,m.to,s),l=m.to}p=m.to}else{if(p==t||(c?jn[p]!=a:jn[p]==a))break;p++}d?jC(n,l,p,r+1,i,d,s):l<p&&s.push(new Cu(l,p,h)),l=p}else for(let l=t,u=o.length;l>e;){let c=!0,f=!1;if(!u||l>o[u-1].to){let m=jn[l-1];m!=a&&(c=!1,f=m==16)}let d=!c&&a==1?[]:null,h=c?r:r+1,p=l;e:for(;;)if(u&&p==o[u-1].to){if(f)break e;let m=o[--u];if(!c)for(let g=m.from,v=u;;){if(g==e)break e;if(v&&o[v-1].to==g)g=o[--v].from;else{if(jn[g-1]==a)break e;break}}if(d)d.push(m);else{m.to<l&&s.push(new Cu(m.to,l,h));let g=m.direction==kf!=!(h%2);HC(n,g?r+1:r,i,m.inner,m.from,m.to,s),l=m.from}p=m.from}else{if(p==e||(c?jn[p-1]!=a:jn[p-1]==a))break;p--}d?jC(n,p,l,r+1,i,d,s):p<l&&s.push(new Cu(p,l,h)),l=p}}function HC(n,e,t,r,i,o,s){let a=e%2?2:1;Qpe(n,i,o,r,a),Zpe(n,i,o,r,a),$pe(i,o,r,a),jC(n,i,o,e,t,r,s)}function e0e(n,e,t){if(!n)return[new Cu(0,0,e==l6?1:0)];if(e==kf&&!t.length&&!Xpe.test(n))return Bz(n.length);if(t.length)for(;n.length>jn.length;)jn[jn.length]=256;let r=[],i=e==kf?0:1;return HC(n,i,i,t,0,n.length,r),r}function Bz(n){return[new Cu(0,n,0)]}let Lz="";function t0e(n,e,t,r,i){var o;let s=r.head-n.from,a=Cu.find(e,s,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc),l=e[a],u=l.side(i,t);if(s==u){let d=a+=i?1:-1;if(d<0||d>=e.length)return null;l=e[a=d],s=l.side(!i,t),u=l.side(i,t)}let c=bi(n.text,s,l.forward(i,t));(c<l.from||c>l.to)&&(c=u),Lz=n.text.slice(Math.min(s,c),Math.max(s,c));let f=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<l.level?Re.cursor(f.side(!i,t)+n.from,f.forward(i,t)?1:-1,f.level):Re.cursor(c+n.from,l.forward(i,t)?-1:1,l.level)}function n0e(n,e,t){for(let r=e;r<t;r++){let i=Iz(n.charCodeAt(r));if(i==1)return kf;if(i==2||i==4)return l6}return kf}const Fz=ut.define(),zz=ut.define(),jz=ut.define(),Hz=ut.define(),VC=ut.define(),Vz=ut.define(),Wz=ut.define(),u6=ut.define(),c6=ut.define(),qz=ut.define({combine:n=>n.some(e=>e)}),Uz=ut.define({combine:n=>n.some(e=>e)}),Gz=ut.define();class ih{constructor(e,t="nearest",r="nearest",i=5,o=5,s=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new ih(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ih(Re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const R1=Vt.define({map:(n,e)=>n.map(e)}),Kz=Vt.define();function Wi(n,e,t){let r=n.facet(Hz);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const mu=ut.define({combine:n=>n.length?n[0]:!0});let r0e=0;const n0=ut.define();class mr{constructor(e,t,r,i,o){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=o(this)}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:o,decorations:s}=t||{};return new mr(r0e++,e,r,i,a=>{let l=[n0.of(a)];return s&&l.push(ym.of(u=>{let c=u.plugin(a);return c?s(c):Tt.none})),o&&l.push(o(a)),l})}static fromClass(e,t){return mr.define(r=>new e(r),t)}}class $w{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Wi(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Wi(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Wi(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Jz=ut.define(),f6=ut.define(),ym=ut.define(),Yz=ut.define(),d6=ut.define(),Xz=ut.define();function KO(n,e){let t=n.state.facet(Xz);if(!t.length)return t;let r=t.map(o=>o instanceof Function?o(n):o),i=[];return sn.spans(r,e.from,e.to,{point(){},span(o,s,a,l){let u=o-e.from,c=s-e.from,f=i;for(let d=a.length-1;d>=0;d--,l--){let h=a[d].spec.bidiIsolate,p;if(h==null&&(h=n0e(e.text,u,c)),l>0&&f.length&&(p=f[f.length-1]).to==u&&p.direction==h)p.to=c,f=p.inner;else{let m={from:u,to:c,direction:h,inner:[]};f.push(m),f=m.inner}}}}),i}const Qz=ut.define();function Zz(n){let e=0,t=0,r=0,i=0;for(let o of n.state.facet(Qz)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(r=Math.max(r,s.top)),s.bottom!=null&&(i=Math.max(i,s.bottom)))}return{left:e,right:t,top:r,bottom:i}}const r0=ut.define();class es{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new es(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,o=0,s=0,a=0;;i++){let l=i==e.length?null:e[i],u=s-a,c=l?l.fromB:1e9;for(;o<t.length&&t[o]<c;){let f=t[o],d=t[o+1],h=Math.max(a,f),p=Math.min(c,d);if(h<=p&&new es(h+u,p+u,h,p).addToSet(r),d>c)break;o+=2}if(!l)return r;new es(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),s=l.toA,a=l.toB}}}class Gb{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Wr.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,s,a,l)=>i.push(new es(o,s,a,l))),this.changedRanges=i}static create(e,t,r){return new Gb(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class JO extends Hn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Tt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ir],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new es(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!c0e(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?o0e(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new es(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(ht.ie||ht.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.updateDeco(),l=l0e(s,a,e.changes);return r=es.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=ht.chrome||ht.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof El&&s.widget instanceof FC&&o.push(s.dom);i.updateGaps(o)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=i.length-1;;s--){let a=s>=0?i[s]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:f}=a,d,h,p,m;if(r&&r.range.fromB<f&&r.range.toB>c){let _=E0.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),y=E0.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);h=_.breakAtStart,p=_.openStart,m=y.openEnd;let k=this.compositionView(r);y.breakAtStart?k.breakAfter=1:y.content.length&&k.merge(k.length,k.length,y.content[0],!1,y.openStart,0)&&(k.breakAfter=y.content[0].breakAfter,y.content.shift()),_.content.length&&k.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),d=_.content.concat(k).concat(y.content)}else({content:d,breakAtStart:h,openStart:p,openEnd:m}=E0.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:g,off:v}=o.findPos(u,1),{i:b,off:w}=o.findPos(l,-1);xz(this,b,w,g,v,d,h,p,m)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(Kz)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new qs(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Hl(i,[t],t.length);let r=new Ir;return r.append(t,0),r}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(s);let a=Hn.get(o);a&&a!=s&&(a.dom=null),s.setDOM(o)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let o=e.marks.length-1;o>=-1;o--)r=i.childPos(r.off,1),i=i.children[r.i],t(o>=0?e.marks[o].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,o=!i&&Jv(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(ht.gecko&&a.empty&&!this.hasComposition&&i0e(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new Ei(f,0),s=!0}let c=this.view.observer.selectionRange;(s||!c.focusNode||(!x0(l.node,l.offset,c.anchorNode,c.anchorOffset)||!x0(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{ht.android&&ht.chrome&&this.dom.contains(c.focusNode)&&u0e(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=vm(this.view.root);if(f)if(a.empty){if(ht.gecko){let d=s0e(l.node,l.offset);if(d&&d!=3){let h=(d==1?kz:Cz)(l.node,l.offset);h&&(l=new Ei(h.node,h.offset))}}f.collapse(l.node,l.offset),a.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=a.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let d=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),d.setEnd(u.node,u.offset),d.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(d)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Ei(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Ei(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&x0(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=vm(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let s=Ir.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&r.collapse(i,o)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let o=Hn.get(t.childNodes[i]);o instanceof Ir&&(r=o.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let o=Hn.get(t.childNodes[i]);o instanceof Ir&&(r=o.domAtPos(o.length))}return r?new Ei(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Hn.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof Ir)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let a=this.children[s],l=o-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof Ir&&!(r instanceof Ir&&t>=0)))r=a,i=u;else if(r&&u==e&&l==e&&a instanceof El&&Math.abs(t)<2){if(a.deco.startSide<0)break;s&&(r=null)}o=u}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Ir))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof qs))return null;let o=bi(i.text,r);if(o==r)return null;let s=wf(i.dom,r,o).getClientRects();for(let a=0;a<s.length;a++){let l=s[a];if(a==s.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==tr.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],d=u+f.length;if(d>i)break;if(u>=r){let h=f.dom.getBoundingClientRect();if(t.push(h.height),s){let p=f.dom.lastChild,m=p?bm(p):[];if(m.length){let g=m[m.length-1],v=l?g.right-h.left:h.right-g.left;v>a&&(a=v,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?tr.RTL:tr.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Ir){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=bm(e.firstChild)[0];t=e.getBoundingClientRect().height,r=o?o.width/27:7,i=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Sz(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let o=i==t.viewports.length?null:t.viewports[i],s=o?o.from-1:this.length;if(s>r){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(Tt.replace({widget:new FC(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!o)break;r=o.to+1}return Tt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(ym).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),r=!1,i=this.view.state.facet(Yz).map((o,s)=>{let a=typeof o=="function";return a&&(r=!0),a?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(sn.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(Gz))try{if(u(this.view,e.range,e))return!0}catch(c){Wi(this.view.state,c,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=Zz(this.view),s={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;Fpe(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==tr.LTR)}}function i0e(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function $z(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=kz(t.focusNode,t.focusOffset),i=Cz(t.focusNode,t.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let a=Hn.get(i.node);if(!a||a instanceof qs&&a.text!=i.node.nodeValue)o=i;else if(n.docView.lastCompositionAfterCursor){let l=Hn.get(r.node);!l||l instanceof qs&&l.text!=r.node.nodeValue||(o=i)}}if(n.docView.lastCompositionAfterCursor=o!=r,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function o0e(n,e,t){let r=$z(n,t);if(!r)return null;let{node:i,from:o,to:s}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,u=new es(l.mapPos(o),l.mapPos(s),o,s),c=[];for(let f=i.parentNode;;f=f.parentNode){let d=Hn.get(f);if(d instanceof Hl)c.push({node:f,deco:d.mark});else{if(d instanceof Ir||f.nodeName=="DIV"&&f.parentNode==n.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=n.contentDOM)c.push({node:f,deco:new Mg({inclusive:!0,attributes:Gpe(f),tagName:f.tagName.toLowerCase()})});else return null}}}function s0e(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let a0e=class{constructor(){this.changes=[]}compareRange(e,t){LC(e,t,this.changes)}comparePoint(e,t){LC(e,t,this.changes)}};function l0e(n,e,t){let r=new a0e;return sn.compare(n,e,t,r),r.changes}function u0e(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function c0e(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function f0e(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),o=e-i.from;if(i.length==0)return Re.cursor(e);o==0?t=1:o==i.length&&(t=-1);let s=o,a=o;t<0?s=bi(i.text,o,!1):a=bi(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let u=bi(i.text,s,!1);if(r(i.text.slice(u,s))!=l)break;s=u}for(;a<i.length;){let u=bi(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return Re.range(s+i.from,a+i.from)}function d0e(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function h0e(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function ek(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function YO(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function XO(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function WC(n,e,t){let r,i,o,s,a=!1,l,u,c,f;for(let p=n.firstChild;p;p=p.nextSibling){let m=bm(p);for(let g=0;g<m.length;g++){let v=m[g];i&&ek(i,v)&&(v=YO(XO(v,i.bottom),i.top));let b=d0e(e,v),w=h0e(t,v);if(b==0&&w==0)return p.nodeType==3?QO(p,e,t):WC(p,e,t);if(!r||s>w||s==w&&o>b){r=p,i=v,o=b,s=w;let _=w?t<v.top?-1:1:b?e<v.left?-1:1:0;a=!_||(_>0?g<m.length-1:g>0)}b==0?t>v.bottom&&(!c||c.bottom<v.bottom)?(l=p,c=v):t<v.top&&(!f||f.top>v.top)&&(u=p,f=v):c&&ek(c,v)?c=XO(c,v.bottom):f&&ek(f,v)&&(f=YO(f,v.top))}}if(c&&c.bottom>=t?(r=l,i=c):f&&f.top<=t&&(r=u,i=f),!r)return{node:n,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return QO(r,d,t);if(a&&r.contentEditable!="false")return WC(r,d,t);let h=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:h}}function QO(n,e,t){let r=n.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let l=wf(n,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;s||(s=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<o){let d=e>=(c.left+c.right)/2,h=d;if((ht.chrome||ht.gecko)&&wf(n,a).getBoundingClientRect().left==c.right&&(h=!d),f<=0)return{node:n,offset:a+(h?1:0)};i=a+(h?1:0),o=f}}}return{node:n,offset:i>-1?i:s>0?n.nodeValue.length:0}}function ej(n,e,t,r=-1){var i,o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,{x:c,y:f}=e,d=f-a;if(d<0)return 0;if(d>u)return n.state.doc.length;for(let _=n.viewState.heightOracle.textHeight/2,y=!1;l=n.elementAtHeight(d),l.type!=Gi.Text;)for(;d=r>0?l.bottom+_:l.top-_,!(d>=0&&d<=u);){if(y)return t?null:0;y=!0,r=-r}f=a+d;let h=l.from;if(h<n.viewport.from)return n.viewport.from==0?0:t?null:ZO(n,s,l,c,f);if(h>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:ZO(n,s,l,c,f);let p=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:p,g=m.elementFromPoint(c,f);g&&!n.contentDOM.contains(g)&&(g=null),g||(c=Math.max(s.left+1,Math.min(s.right-1,c)),g=m.elementFromPoint(c,f),g&&!n.contentDOM.contains(g)&&(g=null));let v,b=-1;if(g&&((i=n.docView.nearest(g))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let _=p.caretPositionFromPoint(c,f);_&&({offsetNode:v,offset:b}=_)}else if(p.caretRangeFromPoint){let _=p.caretRangeFromPoint(c,f);_&&({startContainer:v,startOffset:b}=_,(!n.contentDOM.contains(v)||ht.safari&&p0e(v,b,c)||ht.chrome&&m0e(v,b,c))&&(v=void 0))}v&&(b=Math.min(za(v),b))}if(!v||!n.docView.dom.contains(v)){let _=Ir.find(n.docView,h);if(!_)return d>l.top+l.height/2?l.to:l.from;({node:v,offset:b}=WC(_.dom,c,f))}let w=n.docView.nearest(v);if(!w)return null;if(w.isWidget&&((o=w.dom)===null||o===void 0?void 0:o.nodeType)==1){let _=w.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(v,b)+w.posAtStart}function ZO(n,e,t,r,i){let o=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);o+=l*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+MC(s,o,n.state.tabSize)}function p0e(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return wf(n,r-1,r).getBoundingClientRect().left>t}function m0e(n,e,t){if(e!=0)return!1;for(let i=n;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=n.nodeType==1?n.getBoundingClientRect():wf(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function qC(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==Gi.Text))return r}return t}function g0e(n,e,t,r){let i=qC(n,e.head),o=!r||i.type!=Gi.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(a==tr.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(l!=null)return Re.cursor(l,t?-1:1)}return Re.cursor(t?i.to:i.from,t?-1:1)}function $O(n,e,t,r){let i=n.state.doc.lineAt(e.head),o=n.bidiSpans(i),s=n.textDirectionAt(i.from);for(let a=e,l=null;;){let u=t0e(i,o,s,a,t),c=Lz;if(!u){if(i.number==(t?n.state.doc.lines:1))return a;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),o=n.bidiSpans(i),u=n.visualLineSide(i,!t)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function v0e(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return o=>{let s=r(o);return i==ar.Space&&(i=s),i==s}}function b0e(n,e,t,r){let i=e.head,o=t?1:-1;if(i==(t?n.state.doc.length:0))return Re.cursor(i,e.assoc);let s=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i,e.assoc||-1),c=n.documentTop;if(u)s==null&&(s=u.left-l.left),a=o<0?u.top:u.bottom;else{let h=n.viewState.lineBlockAt(i);s==null&&(s=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-h.from))),a=(o<0?h.top:h.bottom)+c}let f=l.left+s,d=r??n.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let p=a+(d+h)*o,m=ej(n,{x:f,y:p},!1,o);if(p<l.top||p>l.bottom||(o<0?m<i:m>i)){let g=n.docView.coordsForChar(m),v=!g||p<g.top?-1:1;return Re.cursor(m,v,void 0,s)}}}function Yv(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let l=r||t||(e-o<s-e?-1:1);e=l<0?o:s,r=l}});if(!r)return e}}function tk(n,e,t){let r=Yv(n.state.facet(d6).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:Re.cursor(r,r<t.from?1:-1)}const i0="";class y0e{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Un.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=i0}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let o=this.text.length;this.readNode(i);let s=i.nextSibling;if(s==t)break;let a=Hn.get(i),l=Hn.get(s);(a&&l?a.breakAfter:(a?a.breakAfter:qb(i))||qb(s)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>o)&&this.lineBreak(),i=s}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(a=i.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(r,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let t=Hn.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(_0e(e,r.node,r.offset)?t:0))}}function _0e(n,e,t){for(;;){if(!e||t<za(e))return!1;if(e==n)return!0;t=_f(e)+1,e=e.parentNode}}class eD{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class w0e{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=o||s?[]:S0e(e),l=new y0e(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=x0e(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!DC(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!DC(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((ht.ios||ht.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(l,u),d=Math.max(l,u),h=c.from-f,p=c.to-d;(h==0||h==1||f==0)&&(p==0||p==-1||d==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=Re.single(u,l)}}}function tj(n,e){let t,{newSel:r}=e,i=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,l=i.from,u=null;(o===8||ht.android&&e.text.length<a-s)&&(l=i.to,u="end");let c=C0e(n.state.doc.sliceString(s,a,i0),e.text,l-s,u);c&&(ht.chrome&&o==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==i0+i0&&c.toB--,t={from:s+c.from,to:s+c.toA,insert:wn.of(e.text.slice(c.from,c.toB).split(i0))})}else r&&(!n.hasFocus&&n.state.facet(mu)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(ht.mac||ht.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=Re.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:wn.of([" "])}):ht.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=Re.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:wn.of([" "])}),t)return h6(n,t,r,o);if(r&&!r.main.eq(i)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:s,userEvent:a}),!0}else return!1}function h6(n,e,t,r=-1){if(ht.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(ht.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&rh(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&rh(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&rh(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=k0e(n,e,t));return n.state.facet(Vz).some(l=>l(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function k0e(n,e,t){let r,i=n.state,o=i.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=o.from<e.from?i.sliceDoc(o.from,e.from):"",l=o.to>e.to?i.sliceDoc(e.to,o.to):"";r=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=i.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let u=n.state.sliceDoc(e.from,e.to),c,f=t&&$z(n,t.main.head);if(f){let p=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-p}}else c=n.state.doc.lineAt(o.head);let d=o.to-e.to,h=o.to-o.from;r=i.changeByRange(p=>{if(p.from==o.from&&p.to==o.to)return{changes:a,range:l||p.map(a)};let m=p.to-d,g=m-u.length;if(p.to-p.from!=h||n.state.sliceDoc(g,m)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let v=i.changes({from:g,to:m,insert:e.insert}),b=p.to-o.to;return{changes:v,range:l?Re.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):p.map(v)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let s="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,s+=".compose",n.inputState.compositionFirstChange&&(s+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:s,scrollIntoView:!0})}function C0e(n,e,t,r){let i=Math.min(n.length,e.length),o=0;for(;o<i&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(r=="end"){let l=Math.max(0,o-Math.min(s,a));t-=s+l-o}if(s<o&&n.length<e.length){let l=t<=o&&t>=s?o-t:0;o-=l,a=o+(a-s),s=o}else if(a<o){let l=t<=o&&t>=a?o-t:0;o-=l,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function S0e(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new eD(t,r)),(i!=t||o!=r)&&e.push(new eD(i,o))),e}function x0e(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?Re.single(t+e,r+e):null}let E0e=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ht.safari&&e.contentDOM.addEventListener("input",()=>null),ht.gecko&&V0e(e.contentDOM.ownerDocument)}handleEvent(e){!I0e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=A0e(e),r=this.handlers,i=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=r[o];a&&s!=!a.handlers.length&&(i.removeEventListener(o,this.handleEvent),a=null),a||i.addEventListener(o,this.handleEvent,{passive:s})}for(let o in r)o!="scroll"&&!t[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&rj.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ht.android&&ht.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ht.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=nj.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||M0e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,rh(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ht.safari&&!ht.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function tD(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){Wi(t.state,i)}}}function A0e(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let o in i.domEventHandlers){let s=i.domEventHandlers[o];s&&t(o).handlers.push(tD(r.value,s))}if(i&&i.domEventObservers)for(let o in i.domEventObservers){let s=i.domEventObservers[o];s&&t(o).observers.push(tD(r.value,s))}}for(let r in Us)t(r).handlers.push(Us[r]);for(let r in ls)t(r).observers.push(ls[r]);return e}const nj=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],M0e="dthko",rj=[16,17,18,20,91,92,224,225],P1=6;function I1(n){return Math.max(0,n)*.7+8}function T0e(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class O0e{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=zpe(e.contentDOM),this.atoms=e.state.facet(d6).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Un.allowMultipleSelections)&&D0e(e,t),this.dragging=P0e(e,t)&&sj(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&T0e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=Zz(this.view);e.clientX-l.left<=i+P1?t=-I1(i-e.clientX):e.clientX+l.right>=s-P1&&(t=I1(e.clientX-s)),e.clientY-l.top<=o+P1?r=-I1(o-e.clientY):e.clientY+l.bottom>=a-P1&&(r=I1(e.clientY-a)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],o=null;if(i.empty){let s=Yv(this.atoms,i.from,0);s!=i.from&&(o=Re.cursor(s,-1))}else{let s=Yv(this.atoms,i.from,-1),a=Yv(this.atoms,i.to,1);(s!=i.from||a!=i.to)&&(o=Re.range(i.from==i.anchor?s:a,i.from==i.head?s:a))}o&&(t||(t=e.ranges.slice()),t[r]=o)}return t?Re.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function D0e(n,e){let t=n.state.facet(Fz);return t.length?t[0](e):ht.mac?e.metaKey:e.ctrlKey}function R0e(n,e){let t=n.state.facet(zz);return t.length?t[0](e):ht.mac?!e.altKey:!e.ctrlKey}function P0e(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=vm(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let s=i[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function I0e(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Hn.get(t))&&r.ignoreEvent(e))return!1;return!0}const Us=Object.create(null),ls=Object.create(null),ij=ht.ie&&ht.ie_version<15||ht.ios&&ht.webkit_version<604;function N0e(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),oj(n,t.value)},50)}function b_(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function oj(n,e){e=b_(n.state,u6,e);let{state:t}=n,r,i=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(UC!=null&&t.selection.ranges.every(l=>l.empty)&&UC==o.toString()){let l=-1;r=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=t.toText((s?o.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:Re.cursor(u.from+f.length)}})}else s?r=t.changeByRange(l=>{let u=o.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:Re.cursor(l.from+u.length)}}):r=t.replaceSelection(o);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}ls.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Us.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);ls.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};ls.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Us.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(jz))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=F0e(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new O0e(n,e,t,r)),r&&n.observer.ignore(()=>{yz(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function nD(n,e,t,r){if(r==1)return Re.cursor(e,t);if(r==2)return f0e(n.state,e,t);{let i=Ir.find(n.docView,e),o=n.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:o.from,a=i?i.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,Re.range(s,a)}}let rD=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function B0e(n,e,t,r){let i=Ir.find(n.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&rD(t,r,s))return-1;let a=i.coordsAt(o,1);return a&&rD(t,r,a)?1:s&&s.bottom>=r?-1:1}function iD(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:B0e(n,t,e.clientX,e.clientY)}}const L0e=ht.ie&&ht.ie_version<=11;let oD=null,sD=0,aD=0;function sj(n){if(!L0e)return n.detail;let e=oD,t=aD;return oD=n,aD=Date.now(),sD=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(sD+1)%3:1}function F0e(n,e){let t=iD(n,e),r=sj(e),i=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),i=i.map(o.changes))},get(o,s,a){let l=iD(n,o),u,c=nD(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!s){let f=nD(n,t.pos,t.bias,r),d=Math.min(f.from,c.from),h=Math.max(f.to,c.to);c=d<c.from?Re.range(d,h):Re.range(h,d)}return s?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=z0e(i,l.pos))?u:a?i.addRange(c):Re.create([c])}}}function z0e(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return Re.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Us.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let o=i.posAtStart,s=o+i.length;(o>=t.to||s<=t.from)&&(t=Re.range(o,s))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",b_(n.state,c6,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Us.dragend=n=>(n.inputState.draggedContent=null,!1);function lD(n,e,t,r){if(t=b_(n.state,u6,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=r&&o&&R0e(n,e)?{from:o.from,to:o.to}:null,a={from:i,insert:t},l=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Us.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,o=()=>{++i==t.length&&lD(n,e,r.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return lD(n,e,r,!0),!0}return!1};Us.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=ij?null:e.clipboardData;return t?(oj(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(N0e(n),!1)};function j0e(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function H0e(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>i&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),i=s.number}r=!0}return{text:b_(n,c6,e.join(n.lineBreak)),ranges:t,linewise:r}}let UC=null;Us.copy=Us.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=H0e(n.state);if(!t&&!i)return!1;UC=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=ij?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(j0e(n,t),!1)};const aj=Jl.define();function lj(n,e){let t=[];for(let r of n.facet(Wz)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:aj.of(!0)}):null}function uj(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=lj(n.state,e);t?n.dispatch(t):n.update([])}},10)}ls.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),uj(n)};ls.blur=n=>{n.observer.clearSelectionRange(),uj(n)};ls.compositionstart=ls.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};ls.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,ht.chrome&&ht.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};ls.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Us.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],l=n.posAtDOM(a.startContainer,a.startOffset),u=n.posAtDOM(a.endContainer,a.endOffset);return h6(n,{from:l,to:u,insert:n.state.toText(o)},null),!0}}let i;if(ht.chrome&&ht.android&&(i=nj.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return ht.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),ht.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>ls.compositionend(n,e),20),!1};const uD=new Set;function V0e(n){uD.has(n)||(uD.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const cD=["pre-wrap","normal","pre-line","break-spaces"];let Rh=!1;function fD(){Rh=!1}class W0e{constructor(e){this.lineWrapping=e,this.doc=wn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return cD.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,o,s){let a=cD.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=o,l){this.heightSamples={};for(let u=0;u<s.length;u++){let c=s[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class q0e{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class pa{constructor(e,t,r,i,o){this.from=e,this.length=t,this.top=r,this.height=i,this._content=o}get type(){return typeof this._content=="number"?Gi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Qu?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new pa(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Zn=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Zn||(Zn={}));const Xv=.001;class Ki{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Xv&&(Rh=!0),this.height=e)}replace(e,t,r){return Ki.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let o=this,s=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:f}=i[a],d=o.lineAt(l,Zn.ByPosNoHeight,r.setDoc(t),0,0),h=d.to>=u?d:o.lineAt(u,Zn.ByPosNoHeight,r,0,0);for(f+=h.to-u,u=h.to;a>0&&d.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<d.from&&(d=o.lineAt(l,Zn.ByPosNoHeight,r,0,0));c+=d.from-l,l=d.from;let p=p6.build(r.setDoc(s),e,c,f);o=Kb(o,o.replace(l,u,p))}return o.updateHeight(r,0)}static empty(){return new _o(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,o=0;for(;;)if(t==r)if(i>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(o>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,o-=a.size}else break;else if(i<o){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,r++),new U0e(Ki.of(e.slice(0,t)),s,Ki.of(e.slice(r)))}}function Kb(n,e){return n==e?n:(n.constructor!=e.constructor&&(Rh=!0),e)}Ki.prototype.size=1;class cj extends Ki{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new pa(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,t,r,i,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,r,i,o))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class _o extends cj{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new pa(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof _o||i instanceof di&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof di?i=new _o(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ki.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class di extends Ki{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-r+1,s,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*o);s=l/o,this.length>o+1&&(a=(this.height-l)/(this.length-o-1))}else s=this.height/o;return{firstLine:r,lastLine:i,perLine:s,perChar:a}}blockAt(e,t,r,i){let{firstLine:o,lastLine:s,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=t.doc.lineAt(u),f=a+c.length*l,d=Math.max(r,e-f/2);return new pa(c.from,c.length,d,f,0)}else{let u=Math.max(0,Math.min(s-o,Math.floor((e-r)/a))),{from:c,length:f}=t.doc.line(o+u);return new pa(c,f,r+a*u,a,0)}}lineAt(e,t,r,i,o){if(t==Zn.ByHeight)return this.blockAt(e,r,i,o);if(t==Zn.ByPosNoHeight){let{from:h,to:p}=r.doc.lineAt(e);return new pa(h,p-h,0,0,0)}let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(r,o),u=r.doc.lineAt(e),c=a+u.length*l,f=u.number-s,d=i+a*f+l*(u.from-o-f);return new pa(u.from,u.length,Math.max(i,Math.min(d,i+this.height-c)),c,0)}forEachLine(e,t,r,i,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,o);for(let c=e,f=i;c<=t;){let d=r.doc.lineAt(c);if(c==e){let p=d.number-a;f+=l*p+u*(e-o-p)}let h=l+u*d.length;s(new pa(d.from,d.length,f,h,0)),f+=h,c=d.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let o=r[r.length-1];o instanceof di?r[r.length-1]=new di(o.length+i):r.push(null,new di(i-1))}if(e>0){let o=r[0];o instanceof di?r[0]=new di(e+o.length):r.unshift(new di(e-1),null)}return Ki.of(r)}decomposeLeft(e,t){t.push(new di(e-1),null)}decomposeRight(e,t){t.push(null,new di(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let o=t+this.length;if(i&&i.from<=t+this.length&&i.more){let s=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&s.push(new di(i.from-t-1).updateHeight(e,t));a<=o&&i.more;){let c=e.doc.lineAt(a).length;s.length&&s.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=Xv&&(l=-2);let d=new _o(c,f);d.outdated=!1,s.push(d),a+=c+1}a<=o&&s.push(null,new di(o-a).updateHeight(e,a));let u=Ki.of(s);return(l<0||Math.abs(u.height-this.height)>=Xv||Math.abs(l-this.heightMetrics(e,t).perLine)>=Xv)&&(Rh=!0),Kb(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class U0e extends Ki{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,o,i+this.left.length+this.break)}lineAt(e,t,r,i,o){let s=i+this.left.height,a=o+this.left.length+this.break,l=t==Zn.ByHeight?e<s:e<a,u=l?this.left.lineAt(e,t,r,i,o):this.right.lineAt(e,t,r,s,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=t==Zn.ByPosNoHeight?Zn.ByPosNoHeight:Zn.ByPos;return l?u.join(this.right.lineAt(a,c,r,s,a)):this.left.lineAt(a,c,r,i,o).join(u)}forEachLine(e,t,r,i,o,s){let a=i+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,o,s),t>=l&&this.right.forEachLine(e,t,r,a,l,s);else{let u=this.lineAt(l,Zn.ByPos,r,i,o);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,o,s),u.to>=e&&u.from<=t&&s(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,a,l,s)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of r)o.push(a);if(e>0&&dD(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),dD(o,a)}return Ki.of(o)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ki.of(this.break?[e,null,t]:[e,t]):(this.left=Kb(this.left,e),this.right=Kb(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:o,right:s}=this,a=t+o.length+this.break,l=null;return i&&i.from<=t+o.length&&i.more?l=o=o.updateHeight(e,t,r,i):o.updateHeight(e,t,r),i&&i.from<=a+s.length&&i.more?l=s=s.updateHeight(e,a,r,i):s.updateHeight(e,a,r),l?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function dD(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof di&&(r=n[e+1])instanceof di&&n.splice(e-1,3,new di(t.length+1+r.length))}const G0e=5;class p6{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof _o?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new _o(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,o=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;r.block?this.addBlock(new cj(s,i,r)):(s||o||i>=G0e)&&this.addLineDeco(i,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new _o(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new di(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof _o)return e;let t=new _o(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof _o)&&!this.isCovered?this.nodes.push(new _o(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof _o&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let o=new p6(r,e);return sn.spans(t,r,i,o,0),o.finish(r)}}function K0e(n,e,t){let r=new J0e;return sn.compare(n,e,t,r,0),r.changes}class J0e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&LC(e,t,this.changes,5)}}function Y0e(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,o=Math.max(0,t.left),s=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let d=c.getBoundingClientRect();o=Math.max(o,d.left),s=Math.min(s,d.right),a=Math.max(a,d.top),l=Math.min(u==n.parentNode?i.innerHeight:l,d.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function X0e(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class nk{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,t){return Tt.replace({widget:new Q0e(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Q0e extends hc{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class hD{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=pD,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=tr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(f6).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new W0e(t),this.stateDeco=e.facet(ym).filter(r=>typeof r!="function"),this.heightMap=Ki.empty().applyChanges(this.stateDeco,wn.empty,this.heightOracle.setDoc(e.doc),[new es(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Tt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:o,to:s})=>i>=o&&i<=s)){let{from:o,to:s}=this.lineBlockAt(i);e.push(new N1(o,s))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?pD:new m6(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(o0(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(ym).filter(c=>typeof c!="function");let i=e.changedRanges,o=es.extendWithRanges(i,K0e(r,this.stateDeco,e?e.changes:Wr.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);fD(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||Rh)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Uz)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?tr.RTL:tr.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),l=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:_,scaleY:y}=bz(t,a);(_>.005&&Math.abs(this.scaleX-_)>.005||y>.005&&Math.abs(this.scaleY-y)>.005)&&(this.scaleX=_,this.scaleY=y,u|=8,s=l=!0)}let f=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=d)&&(this.paddingTop=f,this.paddingBottom=d,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=wz(e.scrollDOM);let p=(this.printing?X0e:Y0e)(t,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let _=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(_)&&(s=!0),s||i.lineWrapping&&Math.abs(b-this.contentDOMWidth)>i.charWidth){let{lineHeight:y,charWidth:k,textHeight:S}=e.docView.measureTextSize();s=y>0&&i.refresh(o,y,k,S,b/k,_),s&&(e.docView.minWidth=0,u|=8)}m>0&&g>0?c=Math.max(m,g):m<0&&g<0&&(c=Math.min(m,g)),fD();for(let y of this.viewports){let k=y.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(y);this.heightMap=(s?Ki.empty().applyChanges(this.stateDeco,wn.empty,this.heightOracle,[new es(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new q0e(y.from,k))}Rh&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,l=new N1(i.lineAt(s-r*1e3,Zn.ByHeight,o,0,0).from,i.lineAt(a+(1-r)*1e3,Zn.ByHeight,o,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,Zn.ByPos,o,0,0),d;t.y=="center"?d=(f.top+f.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?d=f.top:d=f.bottom-c,l=new N1(i.lineAt(d-1e3/2,Zn.ByHeight,o,0,0).from,i.lineAt(d+c+1e3/2,Zn.ByHeight,o,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new N1(this.heightMap.lineAt(r,Zn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Zn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Zn.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Zn.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||i<=s-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(r,250)))&&i>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new nk(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,s=i<<1;if(this.defaultTextDirection!=tr.LTR&&!r)return[];let a=[],l=(c,f,d,h)=>{if(f-c<o)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let v of m)if(v>c&&v<f){l(c,v-10,d,h),l(v+10,f,d,h);return}let g=$0e(e,v=>v.from>=d.from&&v.to<=d.to&&Math.abs(v.from-c)<o&&Math.abs(v.to-f)<o&&!m.some(b=>v.from<b&&v.to>b));if(!g){if(f<d.to&&t&&r&&t.visibleRanges.some(w=>w.from<=f&&w.to>=f)){let w=t.moveToLineBoundary(Re.cursor(f),!1,!0).head;w>c&&(f=w)}let v=this.gapSize(d,c,f,h),b=r||v<2e6?v:2e6;g=new nk(c,f,v,b)}a.push(g)},u=c=>{if(c.length<s||c.type!=Gi.Text)return;let f=Z0e(c.from,c.to,this.stateDeco);if(f.total<s)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,p;if(r){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,v;if(d!=null){let b=L1(f,d),w=((this.visibleBottom-this.visibleTop)/2+m)/c.height;g=b-w,v=b+w}else g=(this.visibleTop-c.top-m)/c.height,v=(this.visibleBottom-c.top+m)/c.height;h=B1(f,g),p=B1(f,v)}else{let m=f.total*this.heightOracle.charWidth,g=i*this.heightOracle.charWidth,v=0;if(m>2e6)for(let k of e)k.from>=c.from&&k.from<c.to&&k.size!=k.displaySize&&k.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=k.size-k.displaySize);let b=this.pixelViewport.left+v,w=this.pixelViewport.right+v,_,y;if(d!=null){let k=L1(f,d),S=((w-b)/2+g)/m;_=k-S,y=k+S}else _=(b-g)/m,y=(w+g)/m;h=B1(f,_),p=B1(f,y)}h>c.from&&l(c.from,h,c,f),p<c.to&&l(p,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,t,r,i){let o=L1(i,r)-L1(i,t);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){nk.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Tt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];sn.spans(e,this.viewport.from,this.viewport.to,{span(i,o){t.push({from:i,to:o})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,o)=>i.from!=t[o].from||i.to!=t[o].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||o0(this.heightMap.lineAt(e,Zn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||o0(this.heightMap.lineAt(this.scaler.fromDOM(e),Zn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return o0(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class N1{constructor(e,t){this.from=e,this.to=t}}function Z0e(n,e,t){let r=[],i=n,o=0;return sn.spans(t,n,e,{span(){},point(s,a){s>i&&(r.push({from:i,to:s}),o+=s-i),i=a}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function B1({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:o,to:s}=e[i],a=s-o;if(r<=a)return o+r;r-=a}}function L1(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function $0e(n,e){for(let t of n)if(e(t))return t}const pD={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class m6{constructor(e,t,r){let i=0,o=0,s=0;this.viewports=r.map(({from:a,to:l})=>{let u=t.lineAt(a,Zn.ByPos,e,0,0).top,c=t.lineAt(l,Zn.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}eq(e){return e instanceof m6?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function o0(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new pa(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>o0(i,e)):n._content)}const F1=ut.define({combine:n=>n.join(" ")}),GC=ut.define({combine:n=>n.indexOf(!0)>-1}),KC=Xu.newName(),fj=Xu.newName(),dj=Xu.newName(),hj={"&light":"."+fj,"&dark":"."+dj};function JC(n,e,t){return new Xu(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const eme=JC("."+KC,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},hj),tme={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},rk=ht.ie&&ht.ie_version<=11;let nme=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new jpe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(ht.ie&&ht.ie_version<=11||ht.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(ht.chrome&&ht.chrome_version<126)&&(this.editContext=new ime(e),e.state.facet(mu)&&(e.contentDOM.editContext=this.editContext.editContext)),rk&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(mu)?r.root.activeElement!=this.dom:!Jv(this.dom,i))return;let o=i.anchorNode&&r.docView.nearest(i.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ht.ie&&ht.ie_version<=11||ht.android&&ht.chrome)&&!r.state.selection.main.empty&&i.focusNode&&x0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=vm(e.root);if(!t)return!1;let r=ht.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&rme(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=Jv(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Vpe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,tme),rk&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),rk&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&rh(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(i=!0),t==-1?{from:t,to:r}=s:(t=Math.min(s.from,t),r=Math.max(s.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Jv(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new w0e(this.view,e,t,r);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=tj(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=mD(t,e.previousSibling||e.target.previousSibling,-1),i=mD(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(mu)!=e.state.facet(mu)&&(e.view.contentDOM.editContext=e.state.facet(mu)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function mD(n,e,t){for(;e;){let r=Hn.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function gD(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor);return x0(s.node,s.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function rme(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return gD(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?gD(n,t):null}class ime{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let{anchor:i}=e.state.selection.main,o={from:this.toEditorPos(r.updateRangeStart),to:this.toEditorPos(r.updateRangeEnd),insert:wn.of(r.text.split(`
`))};o.from==this.from&&i<this.from?o.from=i:o.to==this.to&&i>this.to&&(o.to=i),!(o.from==o.to&&!o.insert.length)&&(this.pendingContextChange=o,e.state.readOnly||h6(e,o,Re.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=r=>{let i=[],o=null;for(let s=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);s<a;s++){let l=e.coordsForChar(s);o=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||o||new DOMRect,i.push(o)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let o of r.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(s!="None"&&a!="None"){let l=`text-decoration: underline ${s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Tt.mark({attributes:{style:l}}).range(this.toEditorPos(o.rangeStart),this.toEditorPos(o.rangeEnd)))}}e.dispatch({effects:Kz.of(Tt.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=vm(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,s,a,l,u)=>{if(r)return;let c=u.length-(s-o);if(i&&s>=i.to)if(i.from==o&&i.to==s&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=c,this.to+=c;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),u.toString()),this.to+=c}t+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}let lt=class YC{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(o=>r(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Hpe(e.parent)||document,this.viewState=new hD(e.state||Un.create(e)),e.scrollTo&&e.scrollTo.is(R1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(n0).map(i=>new $w(i));for(let i of this.plugins)i.update(this);this.observer=new nme(this),this.inputState=new E0e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new JO(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof io?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,o=this.state;for(let d of e){if(d.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=d.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,l=null;e.some(d=>d.annotation(aj))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,l=lj(o,s),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet(Un.phrases)!=this.state.facet(Un.phrases))return this.setState(o);i=Gb.create(this,o,e),i.flags|=a;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(f&&(f=f.map(d.changes)),d.scrollIntoView){let{main:h}=d.state.selection;f=new ih(h.empty?h:Re.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of d.effects)h.is(R1)&&(f=h.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=Jb.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(r0)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(F1)!=i.state.facet(F1)&&(this.viewState.mustMeasureContent=!0),(t||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(VC))try{d(i)}catch(h){Wi(this.state,h,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!tj(this,c)&&u.force&&rh(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new hD(e),this.plugins=e.facet(n0).map(r=>new $w(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new JO(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(n0),r=e.state.facet(n0);if(t!=r){let i=[];for(let o of r){let s=t.indexOf(o);if(s<0)i.push(new $w(o));else{let a=this.plugins[s];a.mustUpdate=e,i.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){Wi(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(wz(r))o=-1,s=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);o=h.from,s=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(h=>{try{return h.read(this)}catch(p){return Wi(this.state,p),vD}}),f=Gb.create(this,this.state,[]),d=!1;f.flags|=l,t?t.flags|=l:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f),d&&this.docViewUpdate());for(let h=0;h<u.length;h++)if(c[h]!=vD)try{let p=u[h];p.write&&p.write(c[h],this)}catch(p){Wi(this.state,p)}if(d&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let p=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(VC))a(t)}get themeClasses(){return KC+" "+(this.state.facet(GC)?dj:fj)+" "+this.state.facet(F1)}updateAttrs(){let e=bD(this,Jz,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(mu)?"true":"false",class:"cm-content",style:`${ht.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),bD(this,f6,t);let r=this.observer.ignore(()=>{let i=BC(this.contentDOM,this.contentAttrs,t),o=BC(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(YC.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(r0);let e=this.state.facet(YC.cspNonce);Xu.mount(this.root,this.styleModules.concat(eme).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return tk(this,e,$O(this,e,t,r))}moveByGroup(e,t){return tk(this,e,$O(this,e,t,r=>v0e(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=r[t?r.length-1:0];return Re.cursor(o.side(t,i)+e.from,o.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return g0e(this,e,t,r)}moveVertically(e,t,r){return tk(this,e,b0e(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),ej(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),s=o[Cu.find(o,e-i.from,-1,t)];return g_(r,s.dir==tr.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(qz)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>ome)return Bz(e.length);let t=this.textDirectionAt(e.from),r;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||Nz(o.isolates,r=KO(this,e))))return o.order;r||(r=KO(this,e));let i=e0e(e.text,t,r);return this.bidiCache.push(new Jb(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ht.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{yz(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return R1.of(new ih(typeof e=="number"?Re.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return R1.of(new ih(Re.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return mr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return mr.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Xu.newName(),i=[F1.of(r),r0.of(JC(`.${r}`,e))];return t&&t.dark&&i.push(GC.of(!0)),i}static baseTheme(e){return Vf.lowest(r0.of(JC("."+KC,e,hj)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Hn.get(r)||Hn.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}};lt.styleModule=r0;lt.inputHandler=Vz;lt.clipboardInputFilter=u6;lt.clipboardOutputFilter=c6;lt.scrollHandler=Gz;lt.focusChangeEffect=Wz;lt.perLineTextDirection=qz;lt.exceptionSink=Hz;lt.updateListener=VC;lt.editable=mu;lt.mouseSelectionStyle=jz;lt.dragMovesSelection=zz;lt.clickAddsSelectionRange=Fz;lt.decorations=ym;lt.outerDecorations=Yz;lt.atomicRanges=d6;lt.bidiIsolatedRanges=Xz;lt.scrollMargins=Qz;lt.darkTheme=GC;lt.cspNonce=ut.define({combine:n=>n.length?n[0]:""});lt.contentAttributes=f6;lt.editorAttributes=Jz;lt.lineWrapping=lt.contentAttributes.of({class:"cm-lineWrapping"});lt.announce=Vt.define();const ome=4096,vD={};class Jb{constructor(e,t,r,i,o,s){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:tr.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==i&&!t.touchesRange(s.from,s.to)&&r.push(new Jb(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return r}}function bD(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],s=typeof o=="function"?o(n):o;s&&NC(s,t)}return t}const sme=ht.mac?"mac":ht.windows?"win":ht.linux?"linux":"key";function ame(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,o,s,a;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),a&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function z1(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const lme=Vf.default(lt.domEventHandlers({keydown(n,e){return mj(pj(e.state),n,e,"editor")}})),Yb=ut.define({enables:lme}),yD=new WeakMap;function pj(n){let e=n.facet(Yb),t=yD.get(e);return t||yD.set(e,t=fme(e.reduce((r,i)=>r.concat(i),[]))),t}function ume(n,e,t){return mj(pj(n.state),e,n,t)}let gu=null;const cme=4e3;function fme(n,e=sme){let t=Object.create(null),r=Object.create(null),i=(s,a)=>{let l=r[s];if(l==null)r[s]=a;else if(l!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,l,u,c)=>{var f,d;let h=t[s]||(t[s]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>ame(v,e));for(let v=1;v<p.length;v++){let b=p.slice(0,v).join(" ");i(b,!0),h[b]||(h[b]={preventDefault:!0,stopPropagation:!1,run:[w=>{let _=gu={view:w,prefix:b,scope:s};return setTimeout(()=>{gu==_&&(gu=null)},cme),!0}]})}let m=p.join(" ");i(m,!1);let g=h[m]||(h[m]={preventDefault:!1,stopPropagation:!1,run:((d=(f=h._any)===null||f===void 0?void 0:f.run)===null||d===void 0?void 0:d.slice())||[]});l&&g.run.push(l),u&&(g.preventDefault=!0),c&&(g.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let u of a){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=s;for(let d in c)c[d].run.push(h=>f(h,XC))}let l=s[e]||s.key;if(l)for(let u of a)o(u,l,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(u,"Shift-"+l,s.shift,s.preventDefault,s.stopPropagation)}return t}let XC=null;function mj(n,e,t,r){XC=e;let i=vz(e),o=pi(i,0),s=qo(o)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;gu&&gu.view==t&&gu.scope==r&&(a=gu.prefix+" ",rj.indexOf(e.keyCode)<0&&(u=!0,gu=null));let f=new Set,d=g=>{if(g){for(let v of g.run)if(!f.has(v)&&(f.add(v),v(t)))return g.stopPropagation&&(c=!0),!0;g.preventDefault&&(g.stopPropagation&&(c=!0),u=!0)}return!1},h=n[r],p,m;return h&&(d(h[a+z1(i,e,!s)])?l=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ht.windows&&e.ctrlKey&&e.altKey)&&(p=jl[e.keyCode])&&p!=i?(d(h[a+z1(p,e,!0)])||e.shiftKey&&(m=gm[e.keyCode])!=i&&m!=p&&d(h[a+z1(m,e,!1)]))&&(l=!0):s&&e.shiftKey&&d(h[a+z1(i,e,!0)])&&(l=!0),!l&&d(h._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),XC=null,l}class Og{constructor(e,t,r,i,o){this.className=e,this.left=t,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=gj(e);return[new Og(t,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}else return dme(e,t,r)}}function gj(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==tr.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function _D(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let o=n.dom.getBoundingClientRect(),s=(i.top+i.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),l=n.posAtCoords({x:o.right-1,y:s});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function dme(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),o=n.textDirection==tr.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),l=gj(n),u=s.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=a.right-(c?parseInt(c.paddingRight):0),h=qC(n,r),p=qC(n,i),m=h.type==Gi.Text?h:null,g=p.type==Gi.Text?p:null;if(m&&(n.lineWrapping||h.widgetLineBreaks)&&(m=_D(n,r,1,m)),g&&(n.lineWrapping||p.widgetLineBreaks)&&(g=_D(n,i,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return b(w(t.from,t.to,m));{let y=m?w(t.from,null,m):_(h,!1),k=g?w(null,t.to,g):_(p,!0),S=[];return(m||h).to<(g||p).from-(m&&g?1:0)||h.widgetLineBreaks>1&&y.bottom+n.defaultLineHeight/2<k.top?S.push(v(f,y.bottom,d,k.top)):y.bottom<k.top&&n.elementAtHeight((y.bottom+k.top)/2).type==Gi.Text&&(y.bottom=k.top=(y.bottom+k.top)/2),b(y).concat(S).concat(b(k))}function v(y,k,S,E){return new Og(e,y-l.left,k-l.top-.01,S-y,E-k+.01)}function b({top:y,bottom:k,horizontal:S}){let E=[];for(let M=0;M<S.length;M+=2)E.push(v(S[M],y,S[M+1],k));return E}function w(y,k,S){let E=1e9,M=-1e9,R=[];function O(A,N,F,V,W){let L=n.coordsAtPos(A,A==S.to?-2:2),z=n.coordsAtPos(F,F==S.from?2:-2);!L||!z||(E=Math.min(L.top,z.top,E),M=Math.max(L.bottom,z.bottom,M),W==tr.LTR?R.push(o&&N?f:L.left,o&&V?d:z.right):R.push(!o&&V?f:z.left,!o&&N?d:L.right))}let I=y??S.from,P=k??S.to;for(let A of n.visibleRanges)if(A.to>I&&A.from<P)for(let N=Math.max(A.from,I),F=Math.min(A.to,P);;){let V=n.state.doc.lineAt(N);for(let W of n.bidiSpans(V)){let L=W.from+V.from,z=W.to+V.from;if(L>=F)break;z>N&&O(Math.max(L,N),y==null&&L<=I,Math.min(z,F),k==null&&z>=P,W.dir)}if(N=V.to+1,N>=F)break}return R.length==0&&O(I,y==null,P,k==null,n.textDirection),{top:E,bottom:M,horizontal:R}}function _(y,k){let S=a.top+(k?y.top:y.bottom);return{top:S,bottom:S,horizontal:[]}}}function hme(n,e){return n.constructor==e.constructor&&n.eq(e)}class pme{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Qv)!=e.state.facet(Qv)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Qv);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!hme(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Qv=ut.define();function vj(n){return[mr.define(e=>new pme(e,n)),Qv.of(n)]}const bj=!ht.ios,_m=ut.define({combine(n){return ms(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function mme(n={}){return[_m.of(n),gme,vme,bme,Uz.of(!0)]}function yj(n){return n.startState.facet(_m)!=n.state.facet(_m)}const gme=vj({above:!0,markers(n){let{state:e}=n,t=e.facet(_m),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty?!o||bj:t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:Re.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Og.forRange(n,s,a))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=yj(n);return t&&wD(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){wD(e.state,n)},class:"cm-cursorLayer"});function wD(n,e){e.style.animationDuration=n.facet(_m).cursorBlinkRate+"ms"}const vme=vj({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Og.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||yj(n)},class:"cm-selectionLayer"}),QC={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};bj&&(QC[".cm-line"].caretColor=QC[".cm-content"].caretColor="transparent !important");const bme=Vf.highest(lt.theme(QC)),_j=Vt.define({map(n,e){return n==null?null:e.mapPos(n)}}),s0=Jr.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(_j)?r.value:t,n)}}),yme=mr.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(s0);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(s0)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(s0),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(s0)!=n&&this.view.dispatch({effects:_j.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function _me(){return[s0,yme]}function kD(n,e,t,r,i){e.lastIndex=0;for(let o=n.iterRange(t,r),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)i(s+a.index,a)}function wme(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:o}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class kme{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,c)=>{let f=r(a,l,u);f&&c(u,u+a[0].length,f)};else if(r)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new Fa,r=t.add.bind(t);for(let{from:i,to:o}of wme(e,this.maxLength))kD(e.state.doc,this.regexp,i,o,(s,a)=>this.addMatch(a,e,s,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let o of e.visibleRanges){let s=Math.max(o.from,r),a=Math.min(o.to,i);if(a>s){let l=e.state.doc.lineAt(s),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(o.from,l.from),f=Math.min(o.to,u.to);if(this.boundary){for(;s>l.from;s--)if(this.boundary.test(l.text[s-1-l.from])){c=s;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){f=a;break}}let d=[],h,p=(m,g,v)=>d.push(v.range(m,g));if(l==u)for(this.regexp.lastIndex=c-l.from;(h=this.regexp.exec(l.text))&&h.index<f-l.from;)this.addMatch(h,e,h.index+l.from,p);else kD(e.state.doc,this.regexp,c,f,(m,g)=>this.addMatch(g,e,m,p));t=t.update({filterFrom:c,filterTo:f,filter:(m,g)=>m<c||g>f,add:d})}}return t}}const ZC=/x/.unicode!=null?"gu":"g",Cme=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,ZC),Sme={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ik=null;function xme(){var n;if(ik==null&&typeof document<"u"&&document.body){let e=document.body.style;ik=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return ik||!1}const Zv=ut.define({combine(n){let e=ms(n,{render:null,specialChars:Cme,addSpecialChars:null});return(e.replaceTabs=!xme())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ZC)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ZC)),e}});function Eme(n={}){return[Zv.of(n),Ame()]}let CD=null;function Ame(){return CD||(CD=mr.fromClass(class{constructor(n){this.view=n,this.decorations=Tt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Zv)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new kme({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,o=pi(e[0],0);if(o==9){let s=i.lineAt(r),a=t.state.tabSize,l=dp(s.text,a,r-s.from);return Tt.replace({widget:new Dme((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Tt.replace({widget:new Ome(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Zv);n.startState.facet(Zv)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const Mme="";function Tme(n){return n>=32?Mme:n==10?"":String.fromCharCode(9216+n)}class Ome extends hc{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=Tme(this.code),r=e.state.phrase("Control character")+" "+(Sme[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let o=document.createElement("span");return o.textContent=t,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class Dme extends hc{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Rme(){return Ime}const Pme=Tt.line({class:"cm-activeLine"}),Ime=mr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(Pme.range(i.from)),e=i.from)}return Tt.set(t)}},{decorations:n=>n.decorations}),$C=2e3;function Nme(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),o=[];if(e.off>$C||t.off>$C||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let u=n.doc.line(l);u.length<=a&&o.push(Re.range(u.from+s,u.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let u=n.doc.line(l),c=MC(u.text,s,n.tabSize,!0);if(c<0)o.push(Re.cursor(u.to));else{let f=MC(u.text,a,n.tabSize);o.push(Re.range(u.from+c,u.from+f))}}}return o}function Bme(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function SD(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,o=i>$C?-1:i==r.length?Bme(n,e.clientX):dp(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:o,off:i}}function Lme(n,e){let t=SD(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(t.line).from),s=i.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},r=r.map(i.changes)}},get(i,o,s){let a=SD(n,i);if(!a)return r;let l=Nme(n.state,t,a);return l.length?s?Re.create(l.concat(r.ranges)):Re.create(l):r}}:null}function Fme(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return lt.mouseSelectionStyle.of((t,r)=>e(r)?Lme(t,r):null)}const zme={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},jme={style:"cursor: crosshair"};function Hme(n={}){let[e,t]=zme[n.key||"Alt"],r=mr.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,lt.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?jme:null})]}const zp="-10000px";class wj{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=r(s,o))}update(e,t){var r;let i=e.state.facet(this.facet),o=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let s=[],a=t?[]:null;for(let l=0;l<o.length;l++){let u=o[l],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let d=this.tooltips[f];d&&d.create==u.create&&(c=f)}if(c<0)s[l]=this.createTooltipView(u,l?s[l-1]:null),a&&(a[l]=!!u.above);else{let f=s[l]=this.tooltipViews[c];a&&(a[l]=t[c]),f.update&&f.update(e)}}}for(let l of this.tooltipViews)s.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return t&&(a.forEach((l,u)=>t[u]=l),t.length=a.length),this.input=i,this.tooltips=o,this.tooltipViews=s,!0}}function Vme(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const ok=ut.define({combine:n=>{var e,t,r;return{position:ht.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Vme}}}),xD=new WeakMap,g6=mr.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(ok);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new wj(n,y_,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(ok);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=zp,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(ht.gecko)r=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==zp&&i.style.left=="0px"){let o=i.getBoundingClientRect();r=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(r||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((i,o)=>{let s=this.manager.tooltipViews[o];return s.getCoords?s.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(ok).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:r}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{editor:t,space:r,scaleX:i,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,f=n.pos[a],d=n.size[a];if(!f||f.bottom<=Math.max(t.top,r.top)||f.top>=Math.min(t.bottom,r.bottom)||f.right<Math.max(t.left,r.left)-.1||f.left>Math.min(t.right,r.right)+.1){c.style.top=zp;continue}let h=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,m=d.right-d.left,g=(e=xD.get(u))!==null&&e!==void 0?e:d.bottom-d.top,v=u.offset||qme,b=this.view.textDirection==tr.LTR,w=d.width>r.right-r.left?b?r.left:r.right-d.width:b?Math.max(r.left,Math.min(f.left-(h?14:0)+v.x,r.right-m)):Math.min(Math.max(r.left,f.left-m+(h?14:0)-v.x),r.right-m),_=this.above[a];!l.strictSide&&(_?f.top-(d.bottom-d.top)-v.y<r.top:f.bottom+(d.bottom-d.top)+v.y>r.bottom)&&_==r.bottom-f.bottom>f.top-r.top&&(_=this.above[a]=!_);let y=(_?f.top-r.top:r.bottom-f.bottom)-p;if(y<g&&u.resize!==!1){if(y<this.view.defaultLineHeight){c.style.top=zp;continue}xD.set(u,g),c.style.height=(g=y)/o+"px"}else c.style.height&&(c.style.height="");let k=_?f.top-g-p-v.y:f.bottom+p+v.y,S=w+m;if(u.overlap!==!0)for(let E of s)E.left<S&&E.right>w&&E.top<k+g&&E.bottom>k&&(k=_?E.top-g-2-p:E.bottom+p+2);if(this.position=="absolute"?(c.style.top=(k-n.parent.top)/o+"px",c.style.left=(w-n.parent.left)/i+"px"):(c.style.top=k/o+"px",c.style.left=w/i+"px"),h){let E=f.left+(b?v.x:-v.x)-(w+14-7);h.style.left=E/i+"px"}u.overlap!==!0&&s.push({left:w,top:k,right:S,bottom:k+g}),c.classList.toggle("cm-tooltip-above",_),c.classList.toggle("cm-tooltip-below",!_),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=zp}},{eventObservers:{scroll(){this.maybeMeasure()}}}),Wme=lt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),qme={x:0,y:0},y_=ut.define({enables:[g6,Wme]}),Xb=ut.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class __{static create(e){return new __(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new wj(e,Xb,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Ume=y_.compute([Xb],n=>{let e=n.facet(Xb);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:__.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Gme{constructor(e,t,r,i,o){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,o=1;if(r instanceof ku)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==tr.RTL?-1:1;o=t.x<a.left?-u:u}let s=this.source(e,i,o);if(s!=null&&s.then){let a=this.pending={pos:i};s.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Wi(e.state,l,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(g6),t=e?e.manager.tooltips.findIndex(r=>r.create==__.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:o}=this;if(i.length&&o&&!Kme(o.dom,e)||this.pending){let{pos:s}=i[0]||this.pending,a=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!Jme(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const j1=4;function Kme(n,e){let{left:t,right:r,top:i,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();i=Math.min(a.top,i),o=Math.max(a.bottom,o)}return e.clientX>=t-j1&&e.clientX<=r+j1&&e.clientY>=i-j1&&e.clientY<=o+j1}function Jme(n,e,t,r,i,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>r||s.right<r||s.top>i||Math.min(s.bottom,a)<i)return!1;let l=n.posAtCoords({x:r,y:i},!1);return l>=e&&l<=t}function Yme(n,e={}){let t=Vt.define(),r=Jr.define({create(){return[]},update(i,o){if(i.length&&(e.hideOnChange&&(o.docChanged||o.selection)?i=[]:e.hideOn&&(i=i.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of i){let l=o.changes.mapPos(a.pos,-1,Vi.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=o.changes.mapPos(u.end)),s.push(u)}}i=s}for(let s of o.effects)s.is(t)&&(i=s.value),s.is(Xme)&&(i=[]);return i},provide:i=>Xb.from(i)});return{active:r,extension:[r,mr.define(i=>new Gme(i,n,r,t,e.hoverTime||300)),Ume]}}function kj(n,e){let t=n.plugin(g6);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const Xme=Vt.define(),ED=ut.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function wm(n,e){let t=n.plugin(Cj),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const Cj=mr.fromClass(class{constructor(n){this.input=n.state.facet(km),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(ED);this.top=new H1(n,!0,e.topContainer),this.bottom=new H1(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(ED);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new H1(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new H1(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(km);if(t!=this.input){let r=t.filter(l=>l),i=[],o=[],s=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(n.view),a.push(c)):(c=this.panels[u],c.update&&c.update(n)),i.push(c),(c.top?o:s).push(c)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(s);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>lt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class H1{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=AD(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=AD(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function AD(n){let e=n.nextSibling;return n.remove(),e}const km=ut.define({enables:Cj});class ja extends yf{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ja.prototype.elementClass="";ja.prototype.toDOM=void 0;ja.prototype.mapMode=Vi.TrackBefore;ja.prototype.startSide=ja.prototype.endSide=-1;ja.prototype.point=!0;const $v=ut.define(),Qme=ut.define(),Zme={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>sn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},A0=ut.define();function Sj(n){return[xj(),A0.of(Object.assign(Object.assign({},Zme),n))]}const eS=ut.define({combine:n=>n.some(e=>e)});function xj(n){let e=[$me];return n&&n.fixed===!1&&e.push(eS.of(!0)),e}const $me=mr.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(A0).map(e=>new TD(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(eS),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(eS)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=sn.iter(this.view.state.facet($v),this.view.viewport.from),r=[],i=this.gutters.map(o=>new ege(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==Gi.Text&&s){tS(t,r,a.from);for(let l of i)l.line(this.view,a,r);s=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(o.type==Gi.Text){tS(t,r,o.from);for(let s of i)s.line(this.view,o,r)}else if(o.widget)for(let s of i)s.widget(this.view,o);for(let o of i)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(A0),t=n.state.facet(A0),r=n.docChanged||n.heightChanged||n.viewportChanged||!sn.eq(n.startState.facet($v),n.state.facet($v),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let o of t){let s=e.indexOf(o);s<0?i.push(new TD(this.view,o)):(this.gutters[s].update(n),i.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>lt.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==tr.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function MD(n){return Array.isArray(n)?n:[n]}function tS(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class ege{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=sn.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==i.elements.length){let a=new Ej(e,s,o,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,s,o,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];tS(this.cursor,i,t.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,t,i);o&&i.unshift(o);let s=this.gutter;i.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),i=r?[r]:null;for(let o of e.state.facet(Qme)){let s=o(e,t.widget,t);s&&(i||(i=[])).push(s)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class TD{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let o=i.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let l=o.getBoundingClientRect();s=(l.top+l.bottom)/2}else s=i.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=MD(t.markers(e)),t.initialSpacer&&(this.spacer=new Ej(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=MD(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!sn.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Ej{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),tge(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,s=0;;){let a=s,l=o<t.length?t[o++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(l)){a=f,u=!0;break}}else a=this.markers.length;for(;s<a;){let c=this.markers[s++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&s++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function tge(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const nge=ut.define(),rge=ut.define(),Bd=ut.define({combine(n){return ms(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let o=r[i],s=t[i];r[i]=o?(a,l,u)=>o(a,l,u)||s(a,l,u):s}return r}})}});class sk extends ja{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function ak(n,e){return n.state.facet(Bd).formatNumber(e,n.state)}const ige=A0.compute([Bd],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(nge)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new sk(ak(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let i of e.state.facet(rge)){let o=i(e,t,r);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Bd)!=e.state.facet(Bd),initialSpacer(e){return new sk(ak(e,OD(e.state.doc.lines)))},updateSpacer(e,t){let r=ak(t.view,OD(t.view.state.doc.lines));return r==e.number?e:new sk(r)},domEventHandlers:n.facet(Bd).domEventHandlers}));function oge(n={}){return[Bd.of(n),xj(),ige]}function OD(n){let e=9;for(;e<n;)e=e*10+9;return e}const sge=new class extends ja{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},age=$v.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(sge.range(i)))}return sn.of(e)});function lge(){return age}const Aj=1024;let uge=0;class lk{constructor(e,t){this.from=e,this.to=t}}class Zt{constructor(e={}){this.id=uge++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=us.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Zt.closedBy=new Zt({deserialize:n=>n.split(" ")});Zt.openedBy=new Zt({deserialize:n=>n.split(" ")});Zt.group=new Zt({deserialize:n=>n.split(" ")});Zt.isolate=new Zt({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Zt.contextHash=new Zt({perNode:!0});Zt.lookAhead=new Zt({perNode:!0});Zt.mounted=new Zt({perNode:!0});class Qb{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Zt.mounted.id]}}const cge=Object.create(null);let us=class Mj{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):cge,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Mj(e.name||"",t,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Zt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Zt.group),o=-1;o<(i?i.length:0);o++){let s=t[o<0?r.name:i[o]];if(s)return s}}}};us.none=new us("",Object.create(null),0,8);class v6{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let o of e){let s=o(r);s&&(i||(i=Object.assign({},r.props)),i[s[0].id]=s[1])}t.push(i?new us(r.name,i,r.id,r.flags):r)}return new v6(t)}}const V1=new WeakMap,DD=new WeakMap;var Qr;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Qr||(Qr={}));class Br{constructor(e,t,r,i,o){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=Qb.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new rS(this.topNode,e)}cursorAt(e,t=0,r=0){let i=V1.get(this)||this.topNode,o=new rS(i);return o.moveTo(e,t),V1.set(this,o._tree),o}get topNode(){return new ts(this,0,0,null)}resolve(e,t=0){let r=Cm(V1.get(this)||this.topNode,e,t,!1);return V1.set(this,r),r}resolveInner(e,t=0){let r=Cm(DD.get(this)||this.topNode,e,t,!0);return DD.set(this,r),r}resolveStack(e,t=0){return hge(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:o=this.length}=e,s=e.mode||0,a=(s&Qr.IncludeAnonymous)>0;for(let l=this.cursor(s|Qr.IncludeAnonymous);;){let u=!1;if(l.from<=o&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:_6(us.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new Br(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new Br(us.none,t,r,i)))}static build(e){return pge(e)}}Br.empty=new Br(us.none,[],[],0);class b6{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new b6(this.buffer,this.index)}}class Zu{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return us.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,r,i,o){let{buffer:s}=this,a=-1;for(let l=e;l!=t&&!(Tj(o,i,s[l+1],s[l+2])&&(a=l,r>0));l=s[l+3]);return a}slice(e,t,r){let i=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,l=0;a<t;){o[l++]=i[a++],o[l++]=i[a++]-r;let u=o[l++]=i[a++]-r;o[l++]=i[a++]-e,s=Math.max(s,u)}return new Zu(o,s,this.set)}}function Tj(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Cm(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!r&&n instanceof ts&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=r?0:Qr.IgnoreOverlays;if(r)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof ts&&s.index<0&&((i=a.enter(e,t,o))===null||i===void 0?void 0:i.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class Oj{cursor(e=0){return new rS(this,e)}getChild(e,t=null,r=null){let i=RD(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return RD(this,e,t,r)}resolve(e,t=0){return Cm(this,e,t,!1)}resolveInner(e,t=0){return Cm(this,e,t,!0)}matchContext(e){return nS(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class ts extends Oj{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,o=0){for(let s=this;;){for(let{children:a,positions:l}=s._tree,u=t>0?a.length:-1;e!=u;e+=t){let c=a[e],f=l[e]+s.from;if(Tj(i,r,f,f+c.length)){if(c instanceof Zu){if(o&Qr.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,r-f,i);if(d>-1)return new Su(new fge(s,c,e,f),null,d)}else if(o&Qr.IncludeAnonymous||!c.type.isAnonymous||y6(c)){let d;if(!(o&Qr.IgnoreMounts)&&(d=Qb.get(c))&&!d.overlay)return new ts(d.tree,f,e,s);let h=new ts(c,f,e,s);return o&Qr.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(t<0?c.children.length-1:0,t,r,i)}}}if(o&Qr.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&Qr.IgnoreOverlays)&&(i=Qb.get(this._tree))&&i.overlay){let o=e-this.from;for(let{from:s,to:a}of i.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new ts(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function RD(n,e,t,r){let i=n.cursor(),o=[];if(!i.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=i.type.is(t),!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function nS(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class fge{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Su extends Oj{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return o<0?null:new Su(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Qr.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Su(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Su(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Su(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let s=r.buffer[this.index+1];e.push(r.slice(i,o,s)),t.push(0)}return new Br(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Dj(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let r=t instanceof ts&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new dge(i,t)}class dge{constructor(e,t){this.heads=e,this.node=t}get next(){return Dj(this.heads)}}function hge(n,e,t){let r=n.resolveInner(e,t),i=null;for(let o=r instanceof ts?r:r.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(i||(i=[r])).push(s.resolve(e,t)),o=s}else{let s=Qb.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new ts(s.tree,s.overlay[0].from+o.from,-1,o);(i||(i=[r])).push(Cm(a,e,t,!1))}}return i?Dj(i):r}class rS{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ts)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof ts?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&Qr.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Qr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Qr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let o=t+e,s=e<0?-1:r._tree.children.length;o!=s;o+=e){let a=r._tree.children[o];if(this.mode&Qr.IncludeAnonymous||a instanceof Zu||!a.type.isAnonymous||y6(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)t=new Su(this.buffer,t,this.stack[i]);return this.bufferNode=new Su(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return nS(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return nS(this._tree,e,i);let s=r[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function y6(n){return n.children.some(e=>e instanceof Zu||!e.type.isAnonymous||y6(e))}function pge(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=Aj,reused:o=[],minRepeatType:s=r.types.length}=n,a=Array.isArray(t)?new b6(t,t.length):t,l=r.types,u=0,c=0;function f(y,k,S,E,M,R){let{id:O,start:I,end:P,size:A}=a,N=c,F=u;for(;A<0;)if(a.next(),A==-1){let q=o[O];S.push(q),E.push(I-y);return}else if(A==-3){u=O;return}else if(A==-4){c=O;return}else throw new RangeError(`Unrecognized record size: ${A}`);let V=l[O],W,L,z=I-y;if(P-I<=i&&(L=g(a.pos-k,M))){let q=new Uint16Array(L.size-L.skip),te=a.pos-L.size,re=q.length;for(;a.pos>te;)re=v(L.start,q,re);W=new Zu(q,P-L.start,r),z=L.start-y}else{let q=a.pos-A;a.next();let te=[],re=[],ne=O>=s?O:-1,fe=0,ie=P;for(;a.pos>q;)ne>=0&&a.id==ne&&a.size>=0?(a.end<=ie-i&&(p(te,re,I,fe,a.end,ie,ne,N,F),fe=te.length,ie=a.end),a.next()):R>2500?d(I,q,te,re):f(I,q,te,re,ne,R+1);if(ne>=0&&fe>0&&fe<te.length&&p(te,re,I,fe,I,ie,ne,N,F),te.reverse(),re.reverse(),ne>-1&&fe>0){let G=h(V,F);W=_6(V,te,re,0,te.length,0,P-I,G,G)}else W=m(V,te,re,P-I,N-P,F)}S.push(W),E.push(z)}function d(y,k,S,E){let M=[],R=0,O=-1;for(;a.pos>k;){let{id:I,start:P,end:A,size:N}=a;if(N>4)a.next();else{if(O>-1&&P<O)break;O<0&&(O=A-i),M.push(I,P,A),R++,a.next()}}if(R){let I=new Uint16Array(R*4),P=M[M.length-2];for(let A=M.length-3,N=0;A>=0;A-=3)I[N++]=M[A],I[N++]=M[A+1]-P,I[N++]=M[A+2]-P,I[N++]=N;S.push(new Zu(I,M[2]-P,r)),E.push(P-y)}}function h(y,k){return(S,E,M)=>{let R=0,O=S.length-1,I,P;if(O>=0&&(I=S[O])instanceof Br){if(!O&&I.type==y&&I.length==M)return I;(P=I.prop(Zt.lookAhead))&&(R=E[O]+I.length+P)}return m(y,S,E,M,R,k)}}function p(y,k,S,E,M,R,O,I,P){let A=[],N=[];for(;y.length>E;)A.push(y.pop()),N.push(k.pop()+S-M);y.push(m(r.types[O],A,N,R-M,I-R,P)),k.push(M-S)}function m(y,k,S,E,M,R,O){if(R){let I=[Zt.contextHash,R];O=O?[I].concat(O):[I]}if(M>25){let I=[Zt.lookAhead,M];O=O?[I].concat(O):[I]}return new Br(y,k,S,E,O)}function g(y,k){let S=a.fork(),E=0,M=0,R=0,O=S.end-i,I={size:0,start:0,skip:0};e:for(let P=S.pos-y;S.pos>P;){let A=S.size;if(S.id==k&&A>=0){I.size=E,I.start=M,I.skip=R,R+=4,E+=4,S.next();continue}let N=S.pos-A;if(A<0||N<P||S.start<O)break;let F=S.id>=s?4:0,V=S.start;for(S.next();S.pos>N;){if(S.size<0)if(S.size==-3)F+=4;else break e;else S.id>=s&&(F+=4);S.next()}M=V,E+=A,R+=F}return(k<0||E==y)&&(I.size=E,I.start=M,I.skip=R),I.size>4?I:void 0}function v(y,k,S){let{id:E,start:M,end:R,size:O}=a;if(a.next(),O>=0&&E<s){let I=S;if(O>4){let P=a.pos-(O-4);for(;a.pos>P;)S=v(y,k,S)}k[--S]=I,k[--S]=R-y,k[--S]=M-y,k[--S]=E}else O==-3?u=E:O==-4&&(c=E);return S}let b=[],w=[];for(;a.pos>0;)f(n.start||0,n.bufferStart||0,b,w,-1,0);let _=(e=n.length)!==null&&e!==void 0?e:b.length?w[0]+b[0].length:0;return new Br(l[n.topID],b.reverse(),w.reverse(),_)}const PD=new WeakMap;function eb(n,e){if(!n.isAnonymous||e instanceof Zu||e.type!=n)return 1;let t=PD.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof Br)){t=1;break}t+=eb(n,r)}PD.set(e,t)}return t}function _6(n,e,t,r,i,o,s,a,l){let u=0;for(let p=r;p<i;p++)u+=eb(n,e[p]);let c=Math.ceil(u*1.5/8),f=[],d=[];function h(p,m,g,v,b){for(let w=g;w<v;){let _=w,y=m[w],k=eb(n,p[w]);for(w++;w<v;w++){let S=eb(n,p[w]);if(k+S>=c)break;k+=S}if(w==_+1){if(k>c){let S=p[_];h(S.children,S.positions,0,S.children.length,m[_]+b);continue}f.push(p[_])}else{let S=m[w-1]+p[w-1].length-y;f.push(_6(n,p,m,_,w,y,S,null,l))}d.push(y+b-o)}}return h(e,t,r,i,0),(a||l)(f,d,s)}class tf{constructor(e,t,r,i,o=!1,s=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new tf(0,e.length,e,0,!1,r)];for(let o of t)o.to>e.length&&i.push(o);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],o=1,s=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<t.length?t[a]:null,f=c?c.fromA:1e9;if(f-l>=r)for(;s&&s.from<f;){let d=s;if(l>=d.from||f<=d.to||u){let h=Math.max(d.from,l)-u,p=Math.min(d.to,f)-u;d=h>=p?null:new tf(h,p,d.tree,d.offset+u,a>0,!!c)}if(d&&i.push(d),s.to>f)break;s=o<e.length?e[o++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}let Rj=class{startParse(e,t,r){return typeof e=="string"&&(e=new mge(e)),r=r?r.length?r.map(i=>new lk(i.from,i.to)):[new lk(0,0)]:[new lk(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let o=i.advance();if(o)return o}}};class mge{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Zt({perNode:!0});let gge=0;class Ho{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=gge++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof Ho&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new Ho(r,[],null,[]);if(i.set.push(i),t)for(let o of t.set)i.set.push(o);return i}static defineModifier(e){let t=new Zb(e);return r=>r.modified.indexOf(t)>-1?r:Zb.get(r.base||r,r.modified.concat(t).sort((i,o)=>i.id-o.id))}}let vge=0;class Zb{constructor(e){this.name=e,this.instances=[],this.id=vge++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&bge(t,a.modified));if(r)return r;let i=[],o=new Ho(e.name,i,e,t);for(let a of t)a.instances.push(o);let s=yge(t);for(let a of e.set)if(!a.modified.length)for(let l of s)i.push(Zb.get(a,l));return o}}function bge(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function yge(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Pj(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let o=[],s=2,a=i;for(let f=0;;){if(a=="..."&&f>0&&f+3==i.length){s=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+i);if(o.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==i.length)break;let h=i[f++];if(f==i.length&&h=="!"){s=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);a=i.slice(f)}let l=o.length-1,u=o[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new $b(r,s,l>0?o.slice(0,l):null);e[u]=c.sort(e[u])}}return Ij.add(e)}const Ij=new Zt;class $b{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}$b.empty=new $b([],2,null);function Nj(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let s=i;for(let a of o)for(let l of a.set){let u=t[l.id];if(u){s=s?s+" "+u:u;break}}return s},scope:r}}function _ge(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function wge(n,e,t,r=0,i=n.length){let o=new kge(r,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),r,i,"",o.highlighters),o.flush(i)}class kge{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,o){let{type:s,from:a,to:l}=e;if(a>=r||l<=t)return;s.isTop&&(o=this.highlighters.filter(h=>!h.scope||h.scope(s)));let u=i,c=Cge(e)||$b.empty,f=_ge(o,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(t,a),u),c.opaque)return;let d=e.tree&&e.tree.prop(Zt.mounted);if(d&&d.overlay){let h=e.node.enter(d.overlay[0].from+a,1),p=this.highlighters.filter(g=>!g.scope||g.scope(d.tree.type)),m=e.firstChild();for(let g=0,v=a;;g++){let b=g<d.overlay.length?d.overlay[g]:null,w=b?b.from+a:l,_=Math.max(t,v),y=Math.min(r,w);if(_<y&&m)for(;e.from<y&&(this.highlightRange(e,_,y,i,o),this.startSpan(Math.min(y,e.to),u),!(e.to>=w||!e.nextSibling())););if(!b||w>r)break;v=b.to+a,v>t&&(this.highlightRange(h.cursor(),Math.max(t,b.from+a),Math.min(r,v),"",p),this.startSpan(Math.min(r,v),u))}m&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,o),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function Cge(n){let e=n.type.prop(Ij);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const tt=Ho.define,W1=tt(),au=tt(),ID=tt(au),ND=tt(au),lu=tt(),q1=tt(lu),uk=tt(lu),ua=tt(),Mc=tt(ua),aa=tt(),la=tt(),iS=tt(),jp=tt(iS),U1=tt(),qe={comment:W1,lineComment:tt(W1),blockComment:tt(W1),docComment:tt(W1),name:au,variableName:tt(au),typeName:ID,tagName:tt(ID),propertyName:ND,attributeName:tt(ND),className:tt(au),labelName:tt(au),namespace:tt(au),macroName:tt(au),literal:lu,string:q1,docString:tt(q1),character:tt(q1),attributeValue:tt(q1),number:uk,integer:tt(uk),float:tt(uk),bool:tt(lu),regexp:tt(lu),escape:tt(lu),color:tt(lu),url:tt(lu),keyword:aa,self:tt(aa),null:tt(aa),atom:tt(aa),unit:tt(aa),modifier:tt(aa),operatorKeyword:tt(aa),controlKeyword:tt(aa),definitionKeyword:tt(aa),moduleKeyword:tt(aa),operator:la,derefOperator:tt(la),arithmeticOperator:tt(la),logicOperator:tt(la),bitwiseOperator:tt(la),compareOperator:tt(la),updateOperator:tt(la),definitionOperator:tt(la),typeOperator:tt(la),controlOperator:tt(la),punctuation:iS,separator:tt(iS),bracket:jp,angleBracket:tt(jp),squareBracket:tt(jp),paren:tt(jp),brace:tt(jp),content:ua,heading:Mc,heading1:tt(Mc),heading2:tt(Mc),heading3:tt(Mc),heading4:tt(Mc),heading5:tt(Mc),heading6:tt(Mc),contentSeparator:tt(ua),list:tt(ua),quote:tt(ua),emphasis:tt(ua),strong:tt(ua),link:tt(ua),monospace:tt(ua),strikethrough:tt(ua),inserted:tt(),deleted:tt(),changed:tt(),invalid:tt(),meta:U1,documentMeta:tt(U1),annotation:tt(U1),processingInstruction:tt(U1),definition:Ho.defineModifier("definition"),constant:Ho.defineModifier("constant"),function:Ho.defineModifier("function"),standard:Ho.defineModifier("standard"),local:Ho.defineModifier("local"),special:Ho.defineModifier("special")};for(let n in qe){let e=qe[n];e instanceof Ho&&(e.name=n)}Nj([{tag:qe.link,class:"tok-link"},{tag:qe.heading,class:"tok-heading"},{tag:qe.emphasis,class:"tok-emphasis"},{tag:qe.strong,class:"tok-strong"},{tag:qe.keyword,class:"tok-keyword"},{tag:qe.atom,class:"tok-atom"},{tag:qe.bool,class:"tok-bool"},{tag:qe.url,class:"tok-url"},{tag:qe.labelName,class:"tok-labelName"},{tag:qe.inserted,class:"tok-inserted"},{tag:qe.deleted,class:"tok-deleted"},{tag:qe.literal,class:"tok-literal"},{tag:qe.string,class:"tok-string"},{tag:qe.number,class:"tok-number"},{tag:[qe.regexp,qe.escape,qe.special(qe.string)],class:"tok-string2"},{tag:qe.variableName,class:"tok-variableName"},{tag:qe.local(qe.variableName),class:"tok-variableName tok-local"},{tag:qe.definition(qe.variableName),class:"tok-variableName tok-definition"},{tag:qe.special(qe.variableName),class:"tok-variableName2"},{tag:qe.definition(qe.propertyName),class:"tok-propertyName tok-definition"},{tag:qe.typeName,class:"tok-typeName"},{tag:qe.namespace,class:"tok-namespace"},{tag:qe.className,class:"tok-className"},{tag:qe.macroName,class:"tok-macroName"},{tag:qe.propertyName,class:"tok-propertyName"},{tag:qe.operator,class:"tok-operator"},{tag:qe.comment,class:"tok-comment"},{tag:qe.meta,class:"tok-meta"},{tag:qe.invalid,class:"tok-invalid"},{tag:qe.punctuation,class:"tok-punctuation"}]);var ck;const Ld=new Zt;function Sge(n){return ut.define({combine:n?e=>e.concat(n):void 0})}const xge=new Zt;class Ds{constructor(e,t,r=[],i=""){this.data=e,this.name=i,Un.prototype.hasOwnProperty("tree")||Object.defineProperty(Un.prototype,"tree",{get(){return Ii(this)}}),this.parser=t,this.extension=[$u.of(this),Un.languageData.of((o,s,a)=>{let l=BD(o,s,a),u=l.type.prop(Ld);if(!u)return[];let c=o.facet(u),f=l.type.prop(xge);if(f){let d=l.resolve(s-l.from,a);for(let h of f)if(h.test(d,o)){let p=o.facet(h.facet);return h.type=="replace"?p:p.concat(c)}}return c})].concat(r)}isActiveAt(e,t,r=-1){return BD(e,t,r).type.prop(Ld)==this.data}findRegions(e){let t=e.facet($u);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(o,s)=>{if(o.prop(Ld)==this.data){r.push({from:s,to:s+o.length});return}let a=o.prop(Zt.mounted);if(a){if(a.tree.prop(Ld)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+s,to:l.to+s});else r.push({from:s,to:s+o.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+s),r.length>l)return}}for(let l=0;l<o.children.length;l++){let u=o.children[l];u instanceof Br&&i(u,o.positions[l]+s)}};return i(Ii(e),0),r}get allowsNesting(){return!0}}Ds.setState=Vt.define();function BD(n,e,t){let r=n.facet($u),i=Ii(n).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,t,Qr.ExcludeBuffers))o.type.isTop&&(i=o);return i}class ey extends Ds{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=Sge(e.languageData);return new ey(t,e.parser.configure({props:[Ld.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new ey(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ii(n){let e=n.field(Ds.state,!1);return e?e.tree:Br.empty}class Ege{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Hp=null,Age=class oS{constructor(e,t,r=[],i,o,s,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new oS(e,t,[],Br.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Ege(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Br.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(tf.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(tf.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Hp;Hp=this;try{return e()}finally{Hp=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=LD(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,d)=>l.push({fromA:u,toA:c,fromB:f,toB:d})),r=tf.applyChanges(r,l),i=Br.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&a.push({from:c,to:f})}}}return new oS(this.parser,t,r,i,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=LD(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Rj{createParse(t,r,i){let o=i[0].from,s=i[i.length-1].to;return{parsedPos:o,advance(){let l=Hp;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=s,new Br(us.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Hp}};function LD(n,e,t){return tf.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ph{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Ph(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Age.create(e.facet($u).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Ph(r)}}Ds.state=Jr.define({create:Ph.init,update(n,e){for(let t of e.effects)if(t.is(Ds.setState))return t.value;return e.startState.facet($u)!=e.state.facet($u)?Ph.init(e.state):n.apply(e)}});let Bj=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Bj=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const fk=typeof navigator<"u"&&(!((ck=navigator.scheduling)===null||ck===void 0)&&ck.isInputPending)?()=>navigator.scheduling.isInputPending():null,Mge=mr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ds.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ds.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Bj(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(Ds.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!fk?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<i&&r.doc.length>i+1e3,l=o.context.work(()=>fk&&fk()||Date.now()>s,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Ds.setState.of(new Ph(o.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Wi(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),$u=ut.define({combine(n){return n.length?n[0]:null},enables:n=>[Ds.state,Mge,lt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class Tge{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const Oge=ut.define(),w_=ut.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function ec(n){let e=n.facet(w_);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Sm(n,e){let t="",r=n.tabSize,i=n.facet(w_)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let o=0;o<e;o++)t+=i;return t}function w6(n,e){n instanceof Un&&(n=new k_(n));for(let r of n.state.facet(Oge)){let i=r(n,e);if(i!==void 0)return i}let t=Ii(n.state);return t.length>=e?Dge(n,t,e):null}class k_{constructor(e,t={}){this.state=e,this.options=t,this.unit=ec(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.countColumn(r,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,t=e.length){return dp(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(i);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Lj=new Zt;function Dge(n,e,t){let r=e.resolveStack(t),i=r.node.enterUnfinishedNodesBefore(t);if(i!=r.node){let o=[];for(let s=i;s!=r.node;s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)r={node:o[s],next:r}}return Fj(r,n,t)}function Fj(n,e,t){for(let r=n;r;r=r.next){let i=Pge(r.node);if(i)return i(k6.create(e,t,r))}return 0}function Rge(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function Pge(n){let e=n.type.prop(Lj);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Zt.closedBy))){let i=n.lastChild,o=i&&r.indexOf(i.name)>-1;return s=>Lge(s,!0,1,void 0,o&&!Rge(s)?i.from:void 0)}return n.parent==null?Ige:null}function Ige(){return 0}class k6 extends k_{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new k6(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Nge(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return Fj(this.context.next,this.base,this.pos)}}function Nge(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function Bge(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=s)return null;let u=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+u}}a=l.to}}function Lge(n,e,t,r,i){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==n.pos+s,l=e?Bge(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}function FD({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const Fge=200;function zge(){return Un.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+Fge)return n;let o=t.sliceString(i.from,r);if(!e.some(u=>u.test(o)))return n;let{state:s}=n,a=-1,l=[];for(let{head:u}of s.selection.ranges){let c=s.doc.lineAt(u);if(c.from==a)continue;a=c.from;let f=w6(s,c.from);if(f==null)continue;let d=/^\s*/.exec(c.text)[0],h=Sm(s,f);d!=h&&l.push({from:c.from,to:c.from+d.length,insert:h})}return l.length?[n,{changes:l,sequential:!0}]:n})}const jge=ut.define(),zj=new Zt;function Hge(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function Vge(n,e,t){let r=Ii(n);if(r.length<t)return null;let i=r.resolveStack(t,1),o=null;for(let s=i;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let l=a.type.prop(zj);if(l&&(a.to<r.length-50||r.length==n.doc.length||!Wge(a))){let u=l(a,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(o=u)}}return o}function Wge(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function ty(n,e,t){for(let r of n.facet(jge)){let i=r(n,e,t);if(i)return i}return Vge(n,e,t)}function jj(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const C_=Vt.define({map:jj}),Dg=Vt.define({map:jj});function Hj(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Cf=Jr.define({create(){return Tt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(C_)&&!qge(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(C6),i=r?Tt.replace({widget:new Qge(r(e.state,t.value))}):zD;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(Dg)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,o)=>{i<r&&o>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,o)=>o<=r||i>=r}))}return n},provide:n=>lt.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(zD.range(r,i))}return Tt.set(e,!0)}});function ny(n,e,t){var r;let i=null;return(r=n.field(Cf,!1))===null||r===void 0||r.between(e,t,(o,s)=>{(!i||i.from>o)&&(i={from:o,to:s})}),i}function qge(n,e,t){let r=!1;return n.between(e,e,(i,o)=>{i==e&&o==t&&(r=!0)}),r}function Vj(n,e){return n.field(Cf,!1)?e:e.concat(Vt.appendConfig.of(qj()))}const Uge=n=>{for(let e of Hj(n)){let t=ty(n.state,e.from,e.to);if(t)return n.dispatch({effects:Vj(n.state,[C_.of(t),Wj(n,t)])}),!0}return!1},Gge=n=>{if(!n.state.field(Cf,!1))return!1;let e=[];for(let t of Hj(n)){let r=ny(n.state,t.from,t.to);r&&e.push(Dg.of(r),Wj(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Wj(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return lt.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const Kge=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),o=ty(e,i.from,i.to);o&&t.push(C_.of(o)),r=(o?n.lineBlockAt(o.to):i).to+1}return t.length&&n.dispatch({effects:Vj(n.state,t)}),!!t.length},Jge=n=>{let e=n.state.field(Cf,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Dg.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},Yge=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Uge},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Gge},{key:"Ctrl-Alt-[",run:Kge},{key:"Ctrl-Alt-]",run:Jge}],Xge={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},C6=ut.define({combine(n){return ms(n,Xge)}});function qj(n){let e=[Cf,e1e];return n&&e.push(C6.of(n)),e}function Uj(n,e){let{state:t}=n,r=t.facet(C6),i=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),l=ny(n.state,a.from,a.to);l&&n.dispatch({effects:Dg.of(l)}),s.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}const zD=Tt.replace({widget:new class extends hc{toDOM(n){return Uj(n,null)}}});class Qge extends hc{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Uj(e,this.value)}}const Zge={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class dk extends ja{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function $ge(n={}){let e=Object.assign(Object.assign({},Zge),n),t=new dk(e,!0),r=new dk(e,!1),i=mr.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet($u)!=s.state.facet($u)||s.startState.field(Cf,!1)!=s.state.field(Cf,!1)||Ii(s.startState)!=Ii(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new Fa;for(let l of s.viewportLineBlocks){let u=ny(s.state,l.from,l.to)?r:ty(s.state,l.from,l.to)?t:null;u&&a.add(l.from,l.from,u)}return a.finish()}}),{domEventHandlers:o}=e;return[i,Sj({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(i))===null||a===void 0?void 0:a.markers)||sn.empty},initialSpacer(){return new dk(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,a,l)=>{if(o.click&&o.click(s,a,l))return!0;let u=ny(s.state,a.from,a.to);if(u)return s.dispatch({effects:Dg.of(u)}),!0;let c=ty(s.state,a.from,a.to);return c?(s.dispatch({effects:C_.of(c)}),!0):!1}})}),qj()]}const e1e=lt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Rg{constructor(e,t){this.specs=e;let r;function i(a){let l=Xu.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const o=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof Ds?a=>a.prop(Ld)==s.data:s?a=>a==s:void 0,this.style=Nj(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=r?new Xu(r):null,this.themeType=t.themeType}static define(e,t){return new Rg(e,t||{})}}const sS=ut.define(),Gj=ut.define({combine(n){return n.length?[n[0]]:null}});function hk(n){let e=n.facet(sS);return e.length?e:n.facet(Gj)}function Kj(n,e){let t=[n1e],r;return n instanceof Rg&&(n.module&&t.push(lt.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(Gj.of(n)):r?t.push(sS.computeN([lt.darkTheme],i=>i.facet(lt.darkTheme)==(r=="dark")?[n]:[])):t.push(sS.of(n)),t}class t1e{constructor(e){this.markCache=Object.create(null),this.tree=Ii(e.state),this.decorations=this.buildDeco(e,hk(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Ii(e.state),r=hk(e.state),i=r!=hk(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!i&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Tt.none;let r=new Fa;for(let{from:i,to:o}of e.visibleRanges)wge(this.tree,t,(s,a,l)=>{r.add(s,a,this.markCache[l]||(this.markCache[l]=Tt.mark({class:l})))},i,o);return r.finish()}}const n1e=Vf.high(mr.fromClass(t1e,{decorations:n=>n.decorations})),r1e=Rg.define([{tag:qe.meta,color:"#404740"},{tag:qe.link,textDecoration:"underline"},{tag:qe.heading,textDecoration:"underline",fontWeight:"bold"},{tag:qe.emphasis,fontStyle:"italic"},{tag:qe.strong,fontWeight:"bold"},{tag:qe.strikethrough,textDecoration:"line-through"},{tag:qe.keyword,color:"#708"},{tag:[qe.atom,qe.bool,qe.url,qe.contentSeparator,qe.labelName],color:"#219"},{tag:[qe.literal,qe.inserted],color:"#164"},{tag:[qe.string,qe.deleted],color:"#a11"},{tag:[qe.regexp,qe.escape,qe.special(qe.string)],color:"#e40"},{tag:qe.definition(qe.variableName),color:"#00f"},{tag:qe.local(qe.variableName),color:"#30a"},{tag:[qe.typeName,qe.namespace],color:"#085"},{tag:qe.className,color:"#167"},{tag:[qe.special(qe.variableName),qe.macroName],color:"#256"},{tag:qe.definition(qe.propertyName),color:"#00c"},{tag:qe.comment,color:"#940"},{tag:qe.invalid,color:"#f00"}]),i1e=lt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Jj=1e4,Yj="()[]{}",Xj=ut.define({combine(n){return ms(n,{afterCursor:!0,brackets:Yj,maxScanDistance:Jj,renderMatch:a1e})}}),o1e=Tt.mark({class:"cm-matchingBracket"}),s1e=Tt.mark({class:"cm-nonmatchingBracket"});function a1e(n){let e=[],t=n.matched?o1e:s1e;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const l1e=Jr.define({create(){return Tt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(Xj);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=ba(e.state,i.head,-1,r)||i.head>0&&ba(e.state,i.head-1,1,r)||r.afterCursor&&(ba(e.state,i.head,1,r)||i.head<e.state.doc.length&&ba(e.state,i.head+1,-1,r));o&&(t=t.concat(r.renderMatch(o,e.state)))}return Tt.set(t,!0)},provide:n=>lt.decorations.from(n)}),u1e=[l1e,i1e];function c1e(n={}){return[Xj.of(n),u1e]}const f1e=new Zt;function aS(n,e,t){let r=n.prop(e<0?Zt.openedBy:Zt.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function lS(n){let e=n.type.prop(f1e);return e?e(n.node):n}function ba(n,e,t,r={}){let i=r.maxScanDistance||Jj,o=r.brackets||Yj,s=Ii(n),a=s.resolveInner(e,t);for(let l=a;l;l=l.parent){let u=aS(l.type,t,o);if(u&&l.from<l.to){let c=lS(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return d1e(n,e,t,l,c,u,o)}}return h1e(n,e,t,s,a.type,i,o)}function d1e(n,e,t,r,i,o,s){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a==null?void 0:a.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(u==0&&o.indexOf(c.type.name)>-1&&c.from<c.to){let f=lS(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(aS(c.type,t,s))u++;else if(aS(c.type,-t,s)){if(u==0){let f=lS(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function h1e(n,e,t,r,i,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let d=0;!c.next().done&&d<=o;){let h=c.value;t<0&&(d+=h.length);let p=e+d*t;for(let m=t>0?0:h.length-1,g=t>0?h.length:-1;m!=g;m+=t){let v=s.indexOf(h[m]);if(!(v<0||r.resolveInner(p+m,1).type!=i))if(v%2==0==t>0)f++;else{if(f==1)return{start:u,end:{from:p+m,to:p+m+1},matched:v>>1==l>>1};f--}}t>0&&(d+=h.length)}return c.done?{start:u,matched:!1}:null}const p1e=Object.create(null),jD=[us.none],HD=[],VD=Object.create(null),m1e=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])m1e[n]=g1e(p1e,e);function pk(n,e){HD.indexOf(n)>-1||(HD.push(n),console.warn(e))}function g1e(n,e){let t=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=n[u]||qe[u];c?typeof c=="function"?l.length?l=l.map(c):pk(u,`Modifier ${u} used at start of tag`):l.length?pk(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:pk(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(a=>a.id),o=VD[i];if(o)return o.id;let s=VD[i]=us.define({id:jD.length,name:r,props:[Pj({[r]:t})]});return jD.push(s),s.id}tr.RTL,tr.LTR;const v1e=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=x6(n.state,t.from);return r.line?b1e(n):r.block?_1e(n):!1};function S6(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const b1e=S6(C1e,0),y1e=S6(Qj,0),_1e=S6((n,e)=>Qj(n,e,k1e(e)),0);function x6(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Vp=50;function w1e(n,{open:e,close:t},r,i){let o=n.sliceDoc(r-Vp,r),s=n.sliceDoc(i,i+Vp),a=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(s)[0].length,u=o.length-a;if(o.slice(u-e.length,u)==e&&s.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-r<=2*Vp?c=f=n.sliceDoc(r,i):(c=n.sliceDoc(r,r+Vp),f=n.sliceDoc(i-Vp,i));let d=/^\s*/.exec(c)[0].length,h=/\s*$/.exec(f)[0].length,p=f.length-h-t.length;return c.slice(d,d+e.length)==e&&f.slice(p,p+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:i-h-t.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function k1e(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Qj(n,e,t=e.selection.ranges){let r=t.map(o=>x6(e,o.from).block);if(!r.every(o=>o))return null;let i=t.map((o,s)=>w1e(e,r[s],o.from,o.to));if(n!=2&&!i.every(o=>o))return{changes:e.changes(t.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(n!=1&&i.some(o=>o)){let o=[];for(let s=0,a;s<i.length;s++)if(a=i[s]){let l=r[s],{open:u,close:c}=a;o.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:o}}return null}function C1e(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of t){let a=r.length,l=1e9,u=x6(e,o).line;if(u){for(let c=o;c<=s;){let f=e.doc.lineAt(c);if(f.from>i&&(o==s||s>f.from)){i=f.from;let d=/^\s*/.exec(f.text)[0].length,h=d==f.length,p=f.text.slice(d,d+u.length)==u?d:-1;d<f.text.length&&d<l&&(l=d),r.push({line:f,comment:p,token:u,indent:d,empty:h,single:!1})}c=f.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(n!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:l,indent:u,empty:c,single:f}of r)(f||!c)&&o.push({from:a.from+u,insert:l+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:l}of r)if(a>=0){let u=s.from+a,c=u+l.length;s.text[c-s.from]==" "&&c++,o.push({from:u,to:c})}return{changes:o}}return null}const uS=Jl.define(),S1e=Jl.define(),x1e=ut.define(),Zj=ut.define({combine(n){return ms(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),E6=Jr.define({create(){return M0.empty},update(n,e){let t=e.state.facet(Zj),r=e.annotation(uS);if(r){let l=ro.fromTransaction(e,r.selection),u=r.side,c=u==0?n.undone:n.done;return l?c=iy(c,c.length,t.minDepth,l):c=tH(c,e.startState.selection),new M0(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(S1e);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(io.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=ro.fromTransaction(e),s=e.annotation(io.time),a=e.annotation(io.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new M0(n.done.map(ro.fromJSON),n.undone.map(ro.fromJSON))}});function E1e(n={}){return[E6,Zj.of(n),lt.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?A6:e.inputType=="historyRedo"?ry:null;return r?(e.preventDefault(),r(t)):!1}})]}function S_(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(E6,!1);if(!i)return!1;let o=i.pop(n,t,e);return o?(r(o),!0):!1}}const A6=S_(0,!1),ry=S_(1,!1),A1e=S_(0,!0),M1e=S_(1,!0);function $j(n){return function(e){let t=e.field(E6,!1);if(!t)return 0;let r=n==0?t.done:t.undone;return r.length-(r.length&&!r[0].changes?1:0)}}const T1e=$j(0),O1e=$j(1);class ro{constructor(e,t,r,i,o){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new ro(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new ro(e.changes&&Wr.fromJSON(e.changes),[],e.mapped&&Ta.fromJSON(e.mapped),e.startSelection&&Re.fromJSON(e.startSelection),e.selectionsAfter.map(Re.fromJSON))}static fromTransaction(e,t){let r=Jo;for(let i of e.startState.facet(x1e)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new ro(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,Jo)}static selection(e){return new ro(void 0,Jo,void 0,void 0,e)}}function iy(n,e,t,r){let i=e+1>t+20?e-t-1:0,o=n.slice(i,e);return o.push(r),o}function D1e(n,e){let t=[],r=!1;return n.iterChangedRanges((i,o)=>t.push(i,o)),e.iterChangedRanges((i,o,s,a)=>{for(let l=0;l<t.length;){let u=t[l++],c=t[l++];a>=u&&s<=c&&(r=!0)}}),r}function R1e(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function eH(n,e){return n.length?e.length?n.concat(e):n:e}const Jo=[],P1e=200;function tH(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-P1e));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),iy(n,n.length-1,1e9,t.setSelAfter(r)))}else return[ro.selection([e])]}function I1e(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function mk(n,e){if(!n.length)return n;let t=n.length,r=Jo;for(;t;){let i=N1e(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=n.slice(0,t);return o[t-1]=i,o}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[ro.selection(r)]:Jo}function N1e(n,e,t){let r=eH(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):Jo,t);if(!n.changes)return ro.selection(r);let i=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new ro(i,Vt.mapEffects(n.effects,e),s,n.startSelection.map(o),r)}const B1e=/^(input\.type|delete)($|\.)/;let M0=class a0{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new a0(this.done,this.undone):this}addChanges(e,t,r,i,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||B1e.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,D1e(a.changes,e.changes))||r=="input.type.compose")?s=iy(s,s.length-1,i.minDepth,new ro(e.changes.compose(a.changes),eH(Vt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Jo)):s=iy(s,s.length,i.minDepth,e),new a0(s,Jo,t,r)}addSelection(e,t,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Jo;return o.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&R1e(o[o.length-1],e)?this:new a0(tH(this.done,e),this.undone,t,r)}addMapping(e){return new a0(mk(this.done,e),mk(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],s=o.selectionsAfter[0]||t.selection;if(r&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:uS.of({side:e,rest:I1e(i),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=i.length==1?Jo:i.slice(0,i.length-1);return o.mapped&&(a=mk(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:uS.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};M0.empty=new M0(Jo,Jo);const L1e=[{key:"Mod-z",run:A6,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ry,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ry,preventDefault:!0},{key:"Mod-u",run:A1e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:M1e,preventDefault:!0}];function hp(n,e){return Re.create(n.ranges.map(e),n.mainIndex)}function Ja(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function $s({state:n,dispatch:e},t){let r=hp(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Ja(n,r)),!0)}function x_(n,e){return Re.cursor(e?n.to:n.from)}function nH(n,e){return $s(n,t=>t.empty?n.moveByChar(t,e):x_(t,e))}function Bi(n){return n.textDirectionAt(n.state.selection.main.head)==tr.LTR}const rH=n=>nH(n,!Bi(n)),iH=n=>nH(n,Bi(n));function oH(n,e){return $s(n,t=>t.empty?n.moveByGroup(t,e):x_(t,e))}const F1e=n=>oH(n,!Bi(n)),z1e=n=>oH(n,Bi(n));function j1e(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function E_(n,e,t){let r=Ii(n).resolveInner(e.head),i=t?Zt.closedBy:Zt.openedBy;for(let l=e.head;;){let u=t?r.childAfter(l):r.childBefore(l);if(!u)break;j1e(n,u,i)?r=u:l=t?u.to:u.from}let o=r.type.prop(i),s,a;return o&&(s=t?ba(n,r.from,1):ba(n,r.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?r.to:r.from,Re.cursor(a,t?-1:1)}const H1e=n=>$s(n,e=>E_(n.state,e,!Bi(n))),V1e=n=>$s(n,e=>E_(n.state,e,Bi(n)));function sH(n,e){return $s(n,t=>{if(!t.empty)return x_(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const aH=n=>sH(n,!1),lH=n=>sH(n,!0);function uH(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let o of n.state.facet(lt.scrollMargins)){let s=o(n);s!=null&&s.top&&(t=Math.max(s==null?void 0:s.top,t)),s!=null&&s.bottom&&(r=Math.max(s==null?void 0:s.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function cH(n,e){let t=uH(n),{state:r}=n,i=hp(r.selection,s=>s.empty?n.moveVertically(s,e,t.height):x_(s,e));if(i.eq(r.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(r.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,u=a.bottom-t.marginBottom;s&&s.top>l&&s.bottom<u&&(o=lt.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-l}))}return n.dispatch(Ja(r,i),{effects:o}),!0}const WD=n=>cH(n,!1),cS=n=>cH(n,!0);function pc(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let o=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=Re.cursor(r.from+o))}return i}const W1e=n=>$s(n,e=>pc(n,e,!0)),q1e=n=>$s(n,e=>pc(n,e,!1)),U1e=n=>$s(n,e=>pc(n,e,!Bi(n))),G1e=n=>$s(n,e=>pc(n,e,Bi(n))),K1e=n=>$s(n,e=>Re.cursor(n.lineBlockAt(e.head).from,1)),J1e=n=>$s(n,e=>Re.cursor(n.lineBlockAt(e.head).to,-1));function Y1e(n,e,t){let r=!1,i=hp(n.selection,o=>{let s=ba(n,o.head,-1)||ba(n,o.head,1)||o.head>0&&ba(n,o.head-1,1)||o.head<n.doc.length&&ba(n,o.head+1,-1);if(!s||!s.end)return o;r=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return t?Re.range(o.anchor,a):Re.cursor(a)});return r?(e(Ja(n,i)),!0):!1}const X1e=({state:n,dispatch:e})=>Y1e(n,e,!1);function gs(n,e){let t=hp(n.state.selection,r=>{let i=e(r);return Re.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Ja(n.state,t)),!0)}function fH(n,e){return gs(n,t=>n.moveByChar(t,e))}const dH=n=>fH(n,!Bi(n)),hH=n=>fH(n,Bi(n));function pH(n,e){return gs(n,t=>n.moveByGroup(t,e))}const Q1e=n=>pH(n,!Bi(n)),Z1e=n=>pH(n,Bi(n)),$1e=n=>gs(n,e=>E_(n.state,e,!Bi(n))),eve=n=>gs(n,e=>E_(n.state,e,Bi(n)));function mH(n,e){return gs(n,t=>n.moveVertically(t,e))}const gH=n=>mH(n,!1),vH=n=>mH(n,!0);function bH(n,e){return gs(n,t=>n.moveVertically(t,e,uH(n).height))}const qD=n=>bH(n,!1),UD=n=>bH(n,!0),tve=n=>gs(n,e=>pc(n,e,!0)),nve=n=>gs(n,e=>pc(n,e,!1)),rve=n=>gs(n,e=>pc(n,e,!Bi(n))),ive=n=>gs(n,e=>pc(n,e,Bi(n))),ove=n=>gs(n,e=>Re.cursor(n.lineBlockAt(e.head).from)),sve=n=>gs(n,e=>Re.cursor(n.lineBlockAt(e.head).to)),GD=({state:n,dispatch:e})=>(e(Ja(n,{anchor:0})),!0),KD=({state:n,dispatch:e})=>(e(Ja(n,{anchor:n.doc.length})),!0),JD=({state:n,dispatch:e})=>(e(Ja(n,{anchor:n.selection.main.anchor,head:0})),!0),YD=({state:n,dispatch:e})=>(e(Ja(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),ave=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),lve=({state:n,dispatch:e})=>{let t=A_(n).map(({from:r,to:i})=>Re.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:Re.create(t),userEvent:"select"})),!0},uve=({state:n,dispatch:e})=>{let t=hp(n.selection,r=>{let i=Ii(n),o=i.resolveStack(r.from,1);if(r.empty){let s=i.resolveStack(r.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&s.next)return Re.range(a.to,a.from)}return r});return t.eq(n.selection)?!1:(e(Ja(n,t)),!0)},cve=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=Re.create([t.main]):t.main.empty||(r=Re.create([Re.cursor(t.main.head)])),r?(e(Ja(n,r)),!0):!1};function Pg(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let l=e(o);l<s?(t="delete.backward",l=G1(n,l,!1)):l>s&&(t="delete.forward",l=G1(n,l,!0)),s=Math.min(s,l),a=Math.max(a,l)}else s=G1(n,s,!1),a=G1(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:Re.cursor(s,s<o.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?lt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function G1(n,e,t){if(n instanceof lt)for(let r of n.state.facet(lt.atomicRanges).map(i=>i(n)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=t?o:i)});return e}const yH=(n,e,t)=>Pg(n,r=>{let i=r.from,{state:o}=n,s=o.doc.lineAt(i),a,l;if(t&&!e&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,i-s.from))){if(a[a.length-1]=="	")return i-1;let u=dp(a,o.tabSize),c=u%ec(o)||ec(o);for(let f=0;f<c&&a[a.length-1-f]==" ";f++)i--;l=i}else l=bi(s.text,i-s.from,e,e)+s.from,l==i&&s.number!=(e?o.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(l-s.from,i-s.from))&&(l=bi(s.text,l-s.from,!1,!1)+s.from);return l}),fS=n=>yH(n,!1,!0),_H=n=>yH(n,!0,!1),wH=(n,e)=>Pg(n,t=>{let r=t.head,{state:i}=n,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let a=null;;){if(r==(e?o.to:o.from)){r==t.head&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=bi(o.text,r-o.from,e)+o.from,u=o.text.slice(Math.min(r,l)-o.from,Math.max(r,l)-o.from),c=s(u);if(a!=null&&c!=a)break;(u!=" "||r!=t.head)&&(a=c),r=l}return r}),kH=n=>wH(n,!1),fve=n=>wH(n,!0),dve=n=>Pg(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),hve=n=>Pg(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),pve=n=>Pg(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),mve=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:wn.of(["",""])},range:Re.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},gve=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,o=n.doc.lineAt(i),s=i==o.from?i-1:bi(o.text,i-o.from,!1)+o.from,a=i==o.to?i+1:bi(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(s,i))},range:Re.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function A_(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=n.doc.lineAt(r.to-1)),t>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});t=o.number+1}return e}function CH(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let o of A_(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let l of o.ranges)i.push(Re.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let l of o.ranges)i.push(Re.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:Re.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const vve=({state:n,dispatch:e})=>CH(n,e,!1),bve=({state:n,dispatch:e})=>CH(n,e,!0);function SH(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of A_(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const yve=({state:n,dispatch:e})=>SH(n,e,!1),_ve=({state:n,dispatch:e})=>SH(n,e,!0),wve=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(A_(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=hp(e.selection,i=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(i.head),a=n.coordsAtPos(i.head,i.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,o)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function kve(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ii(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(Zt.closedBy))&&o.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const XD=xH(!1),Cve=xH(!0);function xH(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,a=e.doc.lineAt(o),l=!n&&o==s&&kve(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let u=new k_(e,{simulateBreak:o,simulateDoubleBreak:!!l}),c=w6(u,o);for(c==null&&(c=dp(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;l?{from:o,to:s}=l:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let f=["",Sm(e,c)];return l&&f.push(Sm(e,u.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:wn.of(f)},range:Re.cursor(o+1+f[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function M6(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let a=n.doc.lineAt(s);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),s=a.to+1}let o=n.changes(i);return{changes:i,range:Re.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const Sve=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new k_(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),i=M6(n,(o,s,a)=>{let l=w6(r,o.from);if(l==null)return;/\S/.test(o.text)||(l=0);let u=/^\s*/.exec(o.text)[0],c=Sm(n,l);(u!=c||a.from<o.from+u.length)&&(t[o.from]=l,s.push({from:o.from,to:o.from+u.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},EH=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(M6(n,(t,r)=>{r.push({from:t.from,insert:n.facet(w_)})}),{userEvent:"input.indent"})),!0),AH=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(M6(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let o=dp(i,n.tabSize),s=0,a=Sm(n,Math.max(0,o-ec(n)));for(;s<i.length&&s<a.length&&i.charCodeAt(s)==a.charCodeAt(s);)s++;r.push({from:t.from+s,to:t.from+i.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),xve=n=>(n.setTabFocusMode(),!0),Eve=[{key:"Ctrl-b",run:rH,shift:dH,preventDefault:!0},{key:"Ctrl-f",run:iH,shift:hH},{key:"Ctrl-p",run:aH,shift:gH},{key:"Ctrl-n",run:lH,shift:vH},{key:"Ctrl-a",run:K1e,shift:ove},{key:"Ctrl-e",run:J1e,shift:sve},{key:"Ctrl-d",run:_H},{key:"Ctrl-h",run:fS},{key:"Ctrl-k",run:dve},{key:"Ctrl-Alt-h",run:kH},{key:"Ctrl-o",run:mve},{key:"Ctrl-t",run:gve},{key:"Ctrl-v",run:cS}],Ave=[{key:"ArrowLeft",run:rH,shift:dH,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:F1e,shift:Q1e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:U1e,shift:rve,preventDefault:!0},{key:"ArrowRight",run:iH,shift:hH,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:z1e,shift:Z1e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:G1e,shift:ive,preventDefault:!0},{key:"ArrowUp",run:aH,shift:gH,preventDefault:!0},{mac:"Cmd-ArrowUp",run:GD,shift:JD},{mac:"Ctrl-ArrowUp",run:WD,shift:qD},{key:"ArrowDown",run:lH,shift:vH,preventDefault:!0},{mac:"Cmd-ArrowDown",run:KD,shift:YD},{mac:"Ctrl-ArrowDown",run:cS,shift:UD},{key:"PageUp",run:WD,shift:qD},{key:"PageDown",run:cS,shift:UD},{key:"Home",run:q1e,shift:nve,preventDefault:!0},{key:"Mod-Home",run:GD,shift:JD},{key:"End",run:W1e,shift:tve,preventDefault:!0},{key:"Mod-End",run:KD,shift:YD},{key:"Enter",run:XD,shift:XD},{key:"Mod-a",run:ave},{key:"Backspace",run:fS,shift:fS},{key:"Delete",run:_H},{key:"Mod-Backspace",mac:"Alt-Backspace",run:kH},{key:"Mod-Delete",mac:"Alt-Delete",run:fve},{mac:"Mod-Backspace",run:hve},{mac:"Mod-Delete",run:pve}].concat(Eve.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),Mve=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:H1e,shift:$1e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:V1e,shift:eve},{key:"Alt-ArrowUp",run:vve},{key:"Shift-Alt-ArrowUp",run:yve},{key:"Alt-ArrowDown",run:bve},{key:"Shift-Alt-ArrowDown",run:_ve},{key:"Escape",run:cve},{key:"Mod-Enter",run:Cve},{key:"Alt-l",mac:"Ctrl-l",run:lve},{key:"Mod-i",run:uve,preventDefault:!0},{key:"Mod-[",run:AH},{key:"Mod-]",run:EH},{key:"Mod-Alt-\\",run:Sve},{key:"Shift-Mod-k",run:wve},{key:"Shift-Mod-\\",run:X1e},{key:"Mod-/",run:v1e},{key:"Alt-A",run:y1e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:xve}].concat(Ave),Tve={key:"Tab",run:EH,shift:AH};function Wn(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)MH(n,arguments[e]);return n}function MH(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)MH(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}class Ove{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class Lc{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,o=r.facet(ya).markerFilter;o&&(i=o(i,r));let s=Tt.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Tt.widget({widget:new jve(a),diagnostic:a}).range(a.from):Tt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new Lc(s,t,Ih(s))}}function Ih(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,o,{spec:s})=>{if(!(e&&s.diagnostic!=e))return r=new Ove(i,o,s.diagnostic),!1}),r}function TH(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(ya).hideOn(n,t,r);if(i!=null)return i;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(M_))||n.changes.touchesRange(o.from,Math.max(o.to,r)))}function OH(n,e){return n.field(So,!1)?e:e.concat(Vt.appendConfig.of(LH))}function Dve(n,e){return{effects:OH(n,[M_.of(e)])}}const M_=Vt.define(),T6=Vt.define(),DH=Vt.define(),So=Jr.define({create(){return new Lc(Tt.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);r=Ih(t,n.selected.diagnostic,o)||Ih(t,null,o)}!t.size&&i&&e.state.facet(ya).autoPanel&&(i=null),n=new Lc(t,i,r)}for(let t of e.effects)if(t.is(M_)){let r=e.state.facet(ya).autoPanel?t.value.length?xm.open:null:n.panel;n=Lc.init(t.value,r,e.state)}else t.is(T6)?n=new Lc(n.diagnostics,t.value?xm.open:null,n.selected):t.is(DH)&&(n=new Lc(n.diagnostics,n.panel,t.value));return n},provide:n=>[km.from(n,e=>e.panel),lt.decorations.from(n,e=>e.diagnostics)]}),Rve=Tt.mark({class:"cm-lintRange cm-lintRange-active"});function Pve(n,e,t){let{diagnostics:r}=n.state.field(So),i=[],o=2e8,s=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0))&&(i.push(c.diagnostic),o=Math.min(l,o),s=Math.max(u,s))});let a=n.state.facet(ya).tooltipFilter;return a&&(i=a(i,n.state)),i.length?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:RH(n,i)}}}:null}function RH(n,e){return Wn("ul",{class:"cm-tooltip-lint"},e.map(t=>IH(n,t,!1)))}const Ive=n=>{let e=n.state.field(So,!1);(!e||!e.panel)&&n.dispatch({effects:OH(n.state,[T6.of(!0)])});let t=wm(n,xm.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},QD=n=>{let e=n.state.field(So,!1);return!e||!e.panel?!1:(n.dispatch({effects:T6.of(!1)}),!0)},Nve=n=>{let e=n.state.field(So,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Bve=[{key:"Mod-Shift-m",run:Ive,preventDefault:!0},{key:"F8",run:Nve}],Lve=mr.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(ya);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(ya);t.length&&Fve(t.map(r=>Promise.resolve(r(this.view))),r=>{this.view.state.doc==e.doc&&this.view.dispatch(Dve(this.view.state,r.reduce((i,o)=>i.concat(o))))},r=>{Wi(this.view.state,r)})}}update(n){let e=n.state.facet(ya);(n.docChanged||e!=n.startState.facet(ya)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Fve(n,e,t){let r=[],i=-1;for(let o of n)o.then(s=>{r.push(s),clearTimeout(i),r.length==n.length?e(r):setTimeout(()=>e(r),200)},t)}const ya=ut.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},ms(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function zve(n,e={}){return[ya.of({source:n,config:e}),Lve,LH]}function PH(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function IH(n,e,t){var r;let i=t?PH(e.actions):[];return Wn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Wn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,s)=>{let a=!1,l=d=>{if(d.preventDefault(),a)return;a=!0;let h=Ih(n.state.field(So).diagnostics,e);h&&o.apply(n,h.from,h.to)},{name:u}=o,c=i[s]?u.indexOf(i[s]):-1,f=c<0?u:[u.slice(0,c),Wn("u",u.slice(c,c+1)),u.slice(c+1)];return Wn("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[s]})"`}.`},f)}),e.source&&Wn("div",{class:"cm-diagnosticSource"},e.source))}class jve extends hc{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Wn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class ZD{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=IH(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class xm{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)QD(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=PH(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Ih(this.view.state.field(So).diagnostics,o);l&&o.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=Wn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=Wn("div",{class:"cm-panel-lint"},this.list,Wn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>QD(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(So).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(So),r=0,i=!1,o=null;for(e.between(0,this.view.state.doc.length,(s,a,{spec:l})=>{let u=-1,c;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){u=f;break}u<0?(c=new ZD(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),o=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new ZD(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:a})=>{let l=a.height/this.list.offsetHeight;s.top<a.top?this.list.scrollTop-=(a.top-s.top)/l:s.bottom>a.bottom&&(this.list.scrollTop+=(s.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(So),r=Ih(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:DH.of(r)})}static open(e){return new xm(e)}}function tb(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function K1(n){return tb(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Hve=lt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:K1("#d11")},".cm-lintRange-warning":{backgroundImage:K1("orange")},".cm-lintRange-info":{backgroundImage:K1("#999")},".cm-lintRange-hint":{backgroundImage:K1("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function $D(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}class NH extends ja{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,r)=>$D(t)<$D(r.severity)?r.severity:t,"hint")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let r=this.diagnostics,i=e.state.facet(T_).tooltipFilter;return i&&(r=i(r,e.state)),r.length&&(t.onmouseover=()=>Wve(e,t,r)),t}}function Vve(n,e){let t=r=>{let i=e.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let o=r.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(BH)&&n.dispatch({effects:O6.of(null)})}};window.addEventListener("mousemove",t)}function Wve(n,e,t){function r(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:O6.of({pos:s.from,above:!1,create(){return{dom:RH(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,Vve(n,e)}let{hoverTime:i}=n.state.facet(T_),o=setTimeout(r,i);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(r,i)}}function qve(n,e){let t=Object.create(null);for(let i of e){let o=n.lineAt(i.from);(t[o.from]||(t[o.from]=[])).push(i)}let r=[];for(let i in t)r.push(new NH(t[i]).range(+i));return sn.of(r,!0)}const Uve=Sj({class:"cm-gutter-lint",markers:n=>n.state.field(dS),widgetMarker:(n,e,t)=>{let r=[];return n.state.field(dS).between(t.from,t.to,(i,o,s)=>{r.push(...s.diagnostics)}),r.length?new NH(r):null}}),dS=Jr.define({create(){return sn.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(T_).markerFilter;for(let r of e.effects)if(r.is(M_)){let i=r.value;t&&(i=t(i||[],e.state)),n=qve(e.state.doc,i.slice(0))}return n}}),O6=Vt.define(),BH=Jr.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=TH(e,n)?null:Object.assign(Object.assign({},n),{pos:e.changes.mapPos(n.pos)})),e.effects.reduce((t,r)=>r.is(O6)?r.value:t,n)},provide:n=>y_.from(n)}),Gve=lt.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:tb('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:tb('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:tb('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),LH=[So,lt.decorations.compute([So],n=>{let{selected:e,panel:t}=n.field(So);return!e||!t||e.from==e.to?Tt.none:Tt.set([Rve.range(e.from,e.to)])}),Yme(Pve,{hideOn:TH}),Hve],T_=ut.define({combine(n){return ms(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function Kve(n={}){return[T_.of(n),dS,Uve,Gve,BH]}class oy{constructor(e,t,r,i,o,s,a,l,u,c=0,f){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=l,this.curContext=u,this.lookAhead=c,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new oy(e,[],t,r,r,0,[],0,i?new eR(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(o.getGoto(this.state,i,!0),this.reducePos),i<o.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(r-1)*3-(e&262144?6:0),u=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-u;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=c));let f=l?this.stack[l-1]:0,d=this.bufferBase+this.buffer.length-f;if(i<o.minRepeatTerm||e&131072){let h=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,u,h,d+4,!0)}if(e&262144)this.state=this.stack[l];else{let h=this.stack[l-3];this.state=o.getGoto(h,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,u)}storeNode(e,t,r,i=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==r)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=r;return}}}if(!o||this.pos==r)this.buffer.push(e,t,r,i);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let a=!1;for(let l=s;l>0&&this.buffer[l-2]>r;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>r;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=r,this.buffer[s+3]=i}}shift(e,t,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4);else{let o=e,{parser:s}=this.p;(i>this.pos||t<=s.maxNode)&&(this.pos=i,s.stateFlag(o,1)||(this.reducePos=i)),this.pushState(o,r),this.shiftContext(t,r),t<=s.maxNode&&this.buffer.push(t,r,i,4)}}apply(e,t,r,i){e&65536?this.reduce(e):this.shift(e,t,r,i)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new oy(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Jve(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if(!(r&65536))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&i.push(t[o],s);if(this.stack.length<120)for(let o=0;i.length<8&&o<t.length;o+=2){let s=t[o+1];i.some((a,l)=>l&1&&a==s)||i.push(t[o],s)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let o=t[i+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[i],this.pos),s.reducePos=this.pos,s.score-=200,r.push(s)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let r=t>>19,i=t&65535,o=this.stack.length-r*3;if(o<0||e.getGoto(this.stack[o],i,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(i,o)=>{if(!t.includes(i))return t.push(i),e.allActions(i,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let l=s&65535,u=this.stack.length-a*3;if(u>=0&&e.getGoto(this.stack[u],l,!1)>=0)return a<<19|65536|l}}else{let a=r(s,o+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new eR(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class eR{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Jve{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class sy{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new sy(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new sy(this.stack,this.pos,this.index)}}function J1(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let o=0;for(;;){let s=n.charCodeAt(r++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let l=s-32;if(l>=46&&(l-=46,a=!0),o+=l,a)break;o*=46}t?t[i++]=o:t=new e(o)}return t}class nb{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const tR=new nb;class Yve{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=tR,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,o=this.pos+e;for(;o<r.from;){if(!i)return null;let s=this.ranges[--i];o-=r.from-s.to,r=s}for(;t<0?o>r.to:o>=r.to;){if(i==this.ranges.length-1)return null;let s=this.ranges[++i];o+=s.from-r.to,r=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=tR,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class oh{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;Xve(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}oh.prototype.contextual=oh.prototype.fallback=oh.prototype.extend=!1;oh.prototype.fallback=oh.prototype.extend=!1;function Xve(n,e,t,r,i,o){let s=0,a=1<<r,{dialect:l}=t.p.parser;e:for(;a&n[s];){let u=n[s+1];for(let h=s+3;h<u;h+=2)if((n[h+1]&a)>0){let p=n[h];if(l.allows(p)&&(e.token.value==-1||e.token.value==p||Qve(p,e.token.value,i,o))){e.acceptToken(p);break}}let c=e.next,f=0,d=n[s+2];if(e.next<0&&d>f&&n[u+d*3-3]==65535){s=n[u+d*3-1];continue e}for(;f<d;){let h=f+d>>1,p=u+h+(h<<1),m=n[p],g=n[p+1]||65536;if(c<m)d=h;else if(c>=g)f=h+1;else{s=n[p+2],e.advance();continue e}}break}}function nR(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function Qve(n,e,t,r){let i=nR(t,r,e);return i<0||nR(t,r,n)<i}const bo=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let gk=null;function rR(n,e,t){let r=n.cursor(Qr.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class Zve{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?rR(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?rR(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[i],s=this.start[t]+r.positions[i];if(s>e)return this.nextStart=s,null;if(o instanceof Br){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let l=o.prop(Zt.lookAhead);if(!l||a+l<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class $ve{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new nb)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:o}=i,s=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<o.length;u++){if(!(1<<u&s))continue;let c=o[u],f=this.tokens[u];if(!(r&&!c.fallback)&&((c.contextual||f.start!=e.pos||f.mask!=s||f.context!=a)&&(this.updateCachedToken(f,c,e),f.mask=s,f.context=a),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let d=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!c.extend&&(r=f,t>d))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new nb,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new nb,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:o}=r.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let o=0;o<i;o+=3)if(this.actions[o]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let l=0;l<2;l++)for(let u=s.stateSlot(o,l?2:1);;u+=3){if(a[u]==65535)if(a[u+1]==1)u=ml(a,u+2);else{i==0&&a[u+1]==2&&(i=this.putAction(ml(a,u+2),t,r,i));break}a[u]==t&&(i=this.putAction(ml(a,u+1),t,r,i))}return i}}class ebe{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Yve(t,i),this.tokens=new $ve(e,this.stream),this.topTerm=e.top[1];let{from:o}=i[0];this.stacks=[oy.start(this,e.top[0],o)],this.fragments=r.length&&this.stream.end-o>e.bufferLength*4?new Zve(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],o=[]),i.push(a);let l=this.tokens.getMainToken(a);o.push(l.value,l.end)}}break}}if(!r.length){let s=i&&nbe(i);if(s)return bo&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw bo&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let s=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,o,r);if(s)return bo&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(r.length>s)for(r.sort((a,l)=>l.score-a.score);r.length>s;)r.pop();r.some(a=>a.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let s=0;s<r.length-1;s++){let a=r[s];for(let l=s+1;l<r.length;l++){let u=r[l];if(a.sameState(u)||a.buffer.length>500&&u.buffer.length>500)if((a.score-u.score||a.buffer.length-u.buffer.length)>0)r.splice(l--,1);else{r.splice(s--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:o}=this,s=bo?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let d=this.parser.nodeSet.types[f.type.id]==f.type?o.getGoto(e.state,f.type.id):-1;if(d>-1&&f.length&&(!u||(f.prop(Zt.contextHash)||0)==c))return e.useNode(f,d),bo&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(f.type.id)})`),!0;if(!(f instanceof Br)||f.children.length==0||f.positions[0]>0)break;let h=f.children[0];if(h instanceof Br&&f.positions[0]==0)f=h;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),bo&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let c=l[u++],f=l[u++],d=l[u++],h=u==l.length||!r,p=h?e:e.split(),m=this.tokens.mainToken;if(p.apply(c,f,m?m.start:p.pos,d),bo&&console.log(s+this.stackID(p)+` (via ${c&65536?`reduce of ${o.getName(c&65535)}`:"shift"} for ${o.getName(f)} @ ${i}${p==e?"":", split"})`),h)return!0;p.pos>i?t.push(p):r.push(p)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return iR(e,t),!0}}runRecovery(e,t,r){let i=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],l=t[s<<1],u=t[(s<<1)+1],c=bo?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),bo&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let f=a.split(),d=c;for(let h=0;f.forceReduce()&&h<10&&(bo&&console.log(d+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,r));h++)bo&&(d=this.stackID(f)+" -> ");for(let h of a.recoverByInsert(l))bo&&console.log(c+this.stackID(h)+" (via recover-insert)"),this.advanceFully(h,r);this.stream.end>a.pos?(u==a.pos&&(u++,l=0),a.recoverByDelete(l,u),bo&&console.log(c+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),iR(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),Br.build({buffer:sy.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(gk||(gk=new WeakMap)).get(e);return t||gk.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function iR(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class tbe{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class ay extends Rj{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function o(a,l,u){i[a].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Zt[l]);for(let u=1;u<a.length;){let c=a[u++];if(c>=0)o(c,l,a[u++]);else{let f=a[u+-c];for(let d=-c;d>0;d--)o(a[u++],l,f);u++}}}this.nodeSet=new v6(t.map((a,l)=>us.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Aj;let s=J1(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(oR),this.states=J1(e.states,Uint32Array),this.data=J1(e.stateData),this.goto=J1(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new oh(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new ebe(this,e,t,r);for(let o of this.wrappers)i=o(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let o=i[t+1];;){let s=i[o++],a=s&1,l=i[o++];if(a&&r)return l;for(let u=o+(s>>1);o<u;o++)if(i[o]==e)return l;if(a)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let o=this.stateSlot(e,i?2:1),s;;o+=3){if((s=r[o])==65535)if(r[o+1]==1)s=r[o=ml(r,o+2)];else{if(r[o+1]==2)return ml(r,o+2);break}if(s==t||s==0)return ml(r,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),i=r?t(r):void 0;for(let o=this.stateSlot(e,1);i==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=ml(this.data,o+2);else break;i=t(ml(this.data,o+1))}return i}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=ml(this.data,r+2);else break;if(!(this.data[r+2]&1)){let i=this.data[r+1];t.some((o,s)=>s&1&&o==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(ay.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(o=>o.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let o=e.specializers.find(a=>a.from==r.external);if(!o)return r;let s=Object.assign(Object.assign({},r),{external:o.to});return t.specializers[i]=oR(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(r[s]=!0)}let i=null;for(let o=0;o<t.length;o++)if(!r[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new tbe(e,r,i)}static deserialize(e){return new ay(e)}}function ml(n,e){return n[e]|n[e+1]<<16}function nbe(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function oR(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}const rbe=Pj({String:qe.string,Number:qe.number,"True False":qe.bool,PropertyName:qe.propertyName,Null:qe.null,",":qe.separator,"[ ]":qe.squareBracket,"{ }":qe.brace}),ibe=ay.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[rbe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),obe=ey.define({name:"json",parser:ibe.configure({props:[Lj.add({Object:FD({except:/^\s*\}/}),Array:FD({except:/^\s*\]/})}),zj.add({"Object Array":Hge})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function sbe(){return new Tge(obe)}const sR=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Nh{constructor(e,t,r=0,i=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?a=>o(sR(a)):sR,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return pi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=r6(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=qo(e);let i=this.normalize(t);for(let o=0,s=r;;o++){let a=i.charCodeAt(o),l=this.match(a,s,this.bufferPos+this.bufferStart);if(o==i.length-1){if(l)return this.value=l,this;break}s==r&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,r){let i=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[o+1],to:r}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Nh.prototype[Symbol.iterator]=function(){return this});const FH={from:-1,to:-1,match:/.*/.exec("")},D6="gm"+(/x/.unicode==null?"":"u");class zH{constructor(e,t,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=FH,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new jH(e,t,r,i,o);this.re=new RegExp(t,D6+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=ly(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=ly(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const vk=new WeakMap;class sh{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=vk.get(e);if(!i||i.from>=r||i.to<=t){let a=new sh(t,e.sliceString(t,r));return vk.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:o,from:s}=i;return s>t&&(o=e.sliceString(t,s)+o,s=t),i.to<r&&(o+=e.sliceString(i.to,r)),vk.set(e,new sh(s,o)),new sh(t,o.slice(t-s,r-s))}}class jH{constructor(e,t,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=FH,this.matchPos=ly(e,i),this.re=new RegExp(t,D6+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=sh.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=ly(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=sh.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(zH.prototype[Symbol.iterator]=jH.prototype[Symbol.iterator]=function(){return this});function abe(n){try{return new RegExp(n,D6),!0}catch{return!1}}function ly(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function hS(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Wn("input",{class:"cm-textfield",name:"line",value:e}),r=Wn("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:uy.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),i())},onsubmit:o=>{o.preventDefault(),i()}},Wn("label",n.state.phrase("Go to line"),": ",t)," ",Wn("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,l,u,c,f]=o,d=c?+c.slice(1):0,h=u?+u:a.number;if(u&&f){let g=h/100;l&&(g=g*(l=="-"?-1:1)+a.number/s.doc.lines),h=Math.round(s.doc.lines*g)}else u&&l&&(h=h*(l=="-"?-1:1)+a.number);let p=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),m=Re.cursor(p.from+Math.max(0,Math.min(d,p.length)));n.dispatch({effects:[uy.of(!1),lt.scrollIntoView(m.from,{y:"center"})],selection:m}),n.focus()}return{dom:r}}const uy=Vt.define(),aR=Jr.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(uy)&&(n=t.value);return n},provide:n=>km.from(n,e=>e?hS:null)}),lbe=n=>{let e=wm(n,hS);if(!e){let t=[uy.of(!0)];n.state.field(aR,!1)==null&&t.push(Vt.appendConfig.of([aR,ube])),n.dispatch({effects:t}),e=wm(n,hS)}return e&&e.dom.querySelector("input").select(),!0},ube=lt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),cbe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},HH=ut.define({combine(n){return ms(n,cbe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function fbe(n){let e=[gbe,mbe];return n&&e.push(HH.of(n)),e}const dbe=Tt.mark({class:"cm-selectionMatch"}),hbe=Tt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function lR(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=ar.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=ar.Word)}function pbe(n,e,t,r){return n(e.sliceDoc(t,t+1))==ar.Word&&n(e.sliceDoc(r-1,r))==ar.Word}const mbe=mr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(HH),{state:t}=n,r=t.selection;if(r.ranges.length>1)return Tt.none;let i=r.main,o,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return Tt.none;let l=t.wordAt(i.head);if(!l)return Tt.none;s=t.charCategorizer(i.head),o=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Tt.none;if(e.wholeWords){if(o=t.sliceDoc(i.from,i.to),s=t.charCategorizer(i.head),!(lR(s,t,i.from,i.to)&&pbe(s,t,i.from,i.to)))return Tt.none}else if(o=t.sliceDoc(i.from,i.to),!o)return Tt.none}let a=[];for(let l of n.visibleRanges){let u=new Nh(t.doc,o,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!s||lR(s,t,c,f))&&(i.empty&&c<=i.from&&f>=i.to?a.push(hbe.range(c,f)):(c>=i.to||f<=i.from)&&a.push(dbe.range(c,f)),a.length>e.maxMatches))return Tt.none}}return Tt.set(a)}},{decorations:n=>n.decorations}),gbe=lt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),vbe=({state:n,dispatch:e})=>{let{selection:t}=n,r=Re.create(t.ranges.map(i=>n.wordAt(i.head)||Re.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function bbe(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),o=i&&i.from==t.from&&i.to==t.to;for(let s=!1,a=new Nh(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new Nh(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(l=>l.from==a.value.from))continue;if(o){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const ybe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return vbe({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=r))return!1;let i=bbe(n,r);return i?(e(n.update({selection:n.selection.addRange(Re.range(i.from,i.to),!1),effects:lt.scrollIntoView(i.to)})),!0):!1},Wf=ut.define({combine(n){return ms(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Rbe(e),scrollToMatch:e=>lt.scrollIntoView(e)})}});function _be(n){return n?[Wf.of(n),mS]:mS}class VH{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||abe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Sbe(this):new kbe(this)}getCursor(e,t=0,r){let i=e.doc?e:Un.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Sd(this,i,t,r):Cd(this,i,t,r)}}class WH{constructor(e){this.spec=e}}function Cd(n,e,t,r){return new Nh(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?wbe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function wbe(n,e){return(t,r,i,o)=>((o>t||o+i.length<r)&&(o=Math.max(0,t-2),i=n.sliceString(o,Math.min(n.length,r+2))),(e(cy(i,t-o))!=ar.Word||e(fy(i,t-o))!=ar.Word)&&(e(fy(i,r-o))!=ar.Word||e(cy(i,r-o))!=ar.Word))}class kbe extends WH{constructor(e){super(e)}nextMatch(e,t,r){let i=Cd(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=Cd(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let o=Math.max(t,i-1e4-this.spec.unquoted.length),s=Cd(this.spec,e,o,i),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=Cd(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=Cd(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function Sd(n,e,t,r){return new zH(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Cbe(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function cy(n,e){return n.slice(bi(n,e,!1),e)}function fy(n,e){return n.slice(e,bi(n,e))}function Cbe(n){return(e,t,r)=>!r[0].length||(n(cy(r.input,r.index))!=ar.Word||n(fy(r.input,r.index))!=ar.Word)&&(n(fy(r.input,r.index+r[0].length))!=ar.Word||n(cy(r.input,r.index+r[0].length))!=ar.Word)}class Sbe extends WH{nextMatch(e,t,r){let i=Sd(this.spec,e,r,e.doc.length).next();return i.done&&(i=Sd(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let o=Math.max(t,r-i*1e4),s=Sd(this.spec,e,o,r),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t)}matchAll(e,t){let r=Sd(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=Sd(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const Em=Vt.define(),R6=Vt.define(),Bu=Jr.define({create(n){return new bk(pS(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Em)?n=new bk(t.value.create(),n.panel):t.is(R6)&&(n=new bk(n.query,t.value?P6:null));return n},provide:n=>km.from(n,e=>e.panel)});class bk{constructor(e,t){this.query=e,this.panel=t}}const xbe=Tt.mark({class:"cm-searchMatch"}),Ebe=Tt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Abe=mr.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Bu))}update(n){let e=n.state.field(Bu);(e!=n.startState.field(Bu)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Tt.none;let{view:t}=this,r=new Fa;for(let i=0,o=t.visibleRanges,s=o.length;i<s;i++){let{from:a,to:l}=o[i];for(;i<s-1&&l>o[i+1].from-2*250;)l=o[++i].to;n.highlight(t.state,a,l,(u,c)=>{let f=t.state.selection.ranges.some(d=>d.from==u&&d.to==c);r.add(u,c,f?Ebe:xbe)})}return r.finish()}},{decorations:n=>n.decorations});function Ig(n){return e=>{let t=e.state.field(Bu,!1);return t&&t.query.spec.valid?n(e,t):I6(e)}}const dy=Ig((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=Re.single(r.from,r.to),o=n.state.facet(Wf);return n.dispatch({selection:i,effects:[B6(n,r),o.scrollToMatch(i.main,n)],userEvent:"select.search"}),UH(n),!0}),hy=Ig((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let o=Re.single(i.from,i.to),s=n.state.facet(Wf);return n.dispatch({selection:o,effects:[B6(n,i),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),UH(n),!0}),Mbe=Ig((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Re.create(t.map(r=>Re.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Tbe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,o=[],s=0;for(let a=new Nh(n.doc,n.sliceDoc(r,i));!a.next().done;){if(o.length>1e3)return!1;a.value.from==r&&(s=o.length),o.push(Re.range(a.value.from,a.value.to))}return e(n.update({selection:Re.create(o,s),userEvent:"select.search.matches"})),!0},uR=Ig((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,r,r);if(!o)return!1;let s=[],a,l,u=[];if(o.from==r&&o.to==i&&(l=t.toText(e.getReplacement(o)),s.push({from:o.from,to:o.to,insert:l}),o=e.nextMatch(t,o.from,o.to),u.push(lt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),o){let c=s.length==0||s[0].from>=o.to?0:o.to-o.from-l.length;a=Re.single(o.from-c,o.to-c),u.push(B6(n,o)),u.push(t.facet(Wf).scrollToMatch(a.main,n))}return n.dispatch({changes:s,selection:a,effects:u,userEvent:"input.replace"}),!0}),Obe=Ig((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:o,to:s}=i;return{from:o,to:s,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:lt.announce.of(r),userEvent:"input.replace.all"}),!0});function P6(n){return n.state.facet(Wf).createPanel(n)}function pS(n,e){var t,r,i,o,s;let a=n.selection.main,l=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=n.facet(Wf);return new VH({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(o=e==null?void 0:e.regexp)!==null&&o!==void 0?o:u.regexp,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:u.wholeWord})}function qH(n){let e=wm(n,P6);return e&&e.dom.querySelector("[main-field]")}function UH(n){let e=qH(n);e&&e==n.root.activeElement&&e.select()}const I6=n=>{let e=n.state.field(Bu,!1);if(e&&e.panel){let t=qH(n);if(t&&t!=n.root.activeElement){let r=pS(n.state,e.query.spec);r.valid&&n.dispatch({effects:Em.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[R6.of(!0),e?Em.of(pS(n.state,e.query.spec)):Vt.appendConfig.of(mS)]});return!0},N6=n=>{let e=n.state.field(Bu,!1);if(!e||!e.panel)return!1;let t=wm(n,P6);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:R6.of(!1)}),!0},Dbe=[{key:"Mod-f",run:I6,scope:"editor search-panel"},{key:"F3",run:dy,shift:hy,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:dy,shift:hy,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:N6,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Tbe},{key:"Mod-Alt-g",run:lbe},{key:"Mod-d",run:ybe,preventDefault:!0}];class Rbe{constructor(e){this.view=e;let t=this.query=e.state.field(Bu).query.spec;this.commit=this.commit.bind(this),this.searchField=Wn("input",{value:t.search,placeholder:yo(e,"Find"),"aria-label":yo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Wn("input",{value:t.replace,placeholder:yo(e,"Replace"),"aria-label":yo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Wn("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Wn("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Wn("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,o,s){return Wn("button",{class:"cm-button",name:i,onclick:o,type:"button"},s)}this.dom=Wn("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>dy(e),[yo(e,"next")]),r("prev",()=>hy(e),[yo(e,"previous")]),r("select",()=>Mbe(e),[yo(e,"all")]),Wn("label",null,[this.caseField,yo(e,"match case")]),Wn("label",null,[this.reField,yo(e,"regexp")]),Wn("label",null,[this.wordField,yo(e,"by word")]),...e.state.readOnly?[]:[Wn("br"),this.replaceField,r("replace",()=>uR(e),[yo(e,"replace")]),r("replaceAll",()=>Obe(e),[yo(e,"replace all")])],Wn("button",{name:"close",onclick:()=>N6(e),"aria-label":yo(e,"close"),type:"button"},[""])])}commit(){let e=new VH({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Em.of(e)}))}keydown(e){ume(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?hy:dy)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),uR(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(Em)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Wf).top}}function yo(n,e){return n.state.phrase(e)}const Y1=30,X1=/[\s\.,:;?!]/;function B6(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,o=Math.max(r.from,e-Y1),s=Math.min(i,t+Y1),a=n.state.sliceDoc(o,s);if(o!=r.from){for(let l=0;l<Y1;l++)if(!X1.test(a[l+1])&&X1.test(a[l])){a=a.slice(l);break}}if(s!=i){for(let l=a.length-1;l>a.length-Y1;l--)if(!X1.test(a[l-1])&&X1.test(a[l])){a=a.slice(0,l);break}}return lt.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const Pbe=lt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),mS=[Bu,Vf.low(Abe),Pbe];class GH{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Ii(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),o=i.search(KH(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function cR(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Ibe(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let o=1;o<i.length;o++)t[i[o]]=!0}let r=cR(e)+cR(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Nbe(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Ibe(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:t}:null}}class fR{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Lu(n){return n.selection.main.from}function KH(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?n:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const JH=Jl.define();function Bbe(n,e,t,r){let{main:i}=n.selection,o=t-i.from,s=r-i.from;return Object.assign(Object.assign({},n.changeByRange(a=>{if(a!=i&&t!=r&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,r))return{range:a};let l=n.toText(e);return{changes:{from:a.from+o,to:r==i.from?a.to:a.from+s,insert:l},range:Re.cursor(a.from+o+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const dR=new WeakMap;function Lbe(n){if(!Array.isArray(n))return n;let e=dR.get(n);return e||dR.set(n,e=Nbe(n)),e}const py=Vt.define(),Am=Vt.define();class Fbe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=pi(e,t),i=qo(r);this.chars.push(r);let o=e.slice(t,t+i),s=o.toUpperCase();this.folded.push(pi(s==o?o.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:o,byWord:s}=this;if(t.length==1){let b=pi(e,0),w=qo(b),_=w==e.length?0:-100;if(b!=t[0])if(b==r[0])_+=-200;else return null;return this.ret(_,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(a<0){for(let b=0,w=Math.min(e.length,200);b<w&&u<l;){let _=pi(e,b);(_==t[u]||_==r[u])&&(i[u++]=b),b+=qo(_)}if(u<l)return null}let c=0,f=0,d=!1,h=0,p=-1,m=-1,g=/[a-z]/.test(e),v=!0;for(let b=0,w=Math.min(e.length,200),_=0;b<w&&f<l;){let y=pi(e,b);a<0&&(c<l&&y==t[c]&&(o[c++]=b),h<l&&(y==t[h]||y==r[h]?(h==0&&(p=b),m=b+1,h++):h=0));let k,S=y<255?y>=48&&y<=57||y>=97&&y<=122?2:y>=65&&y<=90?1:0:(k=r6(y))!=k.toLowerCase()?1:k!=k.toUpperCase()?2:0;(!b||S==1&&g||_==0&&S!=0)&&(t[f]==y||r[f]==y&&(d=!0)?s[f++]=b:s.length&&(v=!1)),_=S,b+=qo(y)}return f==l&&s[0]==0&&v?this.result(-100+(d?-200:0),s,e):h==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):h==l?this.ret(-200+-700-e.length,[p,m]):f==l?this.result(-100+(d?-200:0)+-700+(v?0:-1100),s,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],o=0;for(let s of t){let a=s+(this.astral?qo(pi(r,s)):1);o&&i[o-1]==s?i[o-1]=a:(i[o++]=s,i[o++]=a)}return this.ret(e-r.length,i)}}class zbe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const vi=ut.define({combine(n){return ms(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:jbe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>hR(e(r),t(r)),optionClass:(e,t)=>r=>hR(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function hR(n,e){return n?e?n+" "+e:n:e}function jbe(n,e,t,r,i,o){let s=n.textDirection==tr.RTL,a=s,l=!1,u="top",c,f,d=e.left-i.left,h=i.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(a&&d<Math.min(p,h)?a=!1:!a&&h<Math.min(p,d)&&(a=!0),p<=(a?d:h))c=Math.max(i.top,Math.min(t.top,i.bottom-m))-e.top,f=Math.min(400,a?d:h);else{l=!0,f=Math.min(400,(s?e.right:i.right-e.left)-30);let b=i.bottom-e.bottom;b>=m||b>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let g=(e.bottom-e.top)/o.offsetHeight,v=(e.right-e.left)/o.offsetWidth;return{style:`${u}: ${c/g}px; max-width: ${f/v}px`,class:"cm-completionInfo-"+(l?s?"left-narrow":"right-narrow":a?"left":"right")}}function Hbe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,l=0;for(let u=0;u<o.length;){let c=o[u++],f=o[u++];c>l&&s.appendChild(document.createTextNode(a.slice(l,c)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(a.slice(c,f))),d.className="cm-completionMatchedText",l=f}return l<a.length&&s.appendChild(document.createTextNode(a.slice(l))),s},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function yk(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class Vbe{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:o,selected:s}=i.open,a=e.state.facet(vi);this.optionContent=Hbe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=yk(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let c=l.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(vi).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Am.of(null)})}),this.showOptions(o,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:o,selected:s,disabled:a}=r.open;(!i.open||i.open.options!=o)&&(this.range=yk(o.length,s,e.state.facet(vi).maxRenderedOptions),this.showOptions(o,r.id)),this.updateSel(),a!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=yk(t.options.length,t.selected,this.view.state.facet(vi).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,r)}).catch(s=>Wi(this.view.state,s,"completion info")):this.addInfoPane(o,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:o}=e;r.appendChild(i),this.infoDestroy=o||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&qbe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:s.innerWidth,bottom:s.innerHeight}}return i.top>Math.min(o.bottom,t.bottom)-10||i.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(vi).positionInfo(this.view,t,i,r,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let s=r.from;s<r.to;s++){let{completion:a,match:l}=e[s],{section:u}=a;if(u){let d=typeof u=="string"?u:u.name;if(d!=o&&(s>r.from||r.from==0))if(o=d,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=d}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+s,c.setAttribute("role","option");let f=this.optionClass(a);f&&(c.className=f);for(let d of this.optionContent){let h=d(a,this.view.state,this.view,l);h&&c.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Wbe(n,e){return t=>new Vbe(t,n,e)}function qbe(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function pR(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function Ube(n,e){let t=[],r=null,i=u=>{t.push(u);let{section:c}=u.completion;if(c){r||(r=[]);let f=typeof c=="string"?c:c.name;r.some(d=>d.name==f)||r.push(typeof c=="string"?{name:f}:c)}},o=e.facet(vi);for(let u of n)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let f of u.result.options)i(new fR(f,u.source,c?c(f):[],1e9-t.length));else{let f=e.sliceDoc(u.from,u.to),d,h=o.filterStrict?new zbe(f):new Fbe(f);for(let p of u.result.options)if(d=h.match(p.label)){let m=p.displayLabel?c?c(p,d.matched):[]:d.matched;i(new fR(p,u.source,m,d.score+(p.boost||0)))}}}if(r){let u=Object.create(null),c=0,f=(d,h)=>{var p,m;return((p=d.rank)!==null&&p!==void 0?p:1e9)-((m=h.rank)!==null&&m!==void 0?m:1e9)||(d.name<h.name?-1:1)};for(let d of r.sort(f))c-=1e5,u[d.name]=c;for(let d of t){let{section:h}=d.completion;h&&(d.score+=u[typeof h=="string"?h:h.name])}}let s=[],a=null,l=o.compareCompletions;for(let u of t.sort((c,f)=>f.score-c.score||l(c.completion,f.completion))){let c=u.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?s.push(u):pR(u.completion)>pR(a)&&(s[s.length-1]=u),a=u.completion}return s}class Fd{constructor(e,t,r,i,o,s){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Fd(this.options,mR(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,o){let s=Ube(e,t);if(!s.length)return i&&e.some(l=>l.state==1)?new Fd(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=t.facet(vi).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<s.length;u++)if(s[u].completion==l){a=u;break}}return new Fd(s,mR(r,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:Qbe,above:o.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Fd(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class my{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new my(Ybe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(vi),o=(r.override||t.languageDataAt("autocomplete",Lu(t)).map(Lbe)).map(a=>(this.active.find(u=>u.source==a)||new ko(a,this.active.some(u=>u.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((a,l)=>a==this.active[l])&&(o=this.active);let s=this.open;s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!Gbe(o,this.active)?s=Fd.build(o,t,this.id,s,r):s&&s.disabled&&!o.some(a=>a.state==1)&&(s=null),!s&&o.every(a=>a.state!=1)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new ko(a.source,0):a));for(let a of e.effects)a.is(QH)&&(s=s&&s.setSelected(a.value,this.id));return o==this.active&&s==this.open?this:new my(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Kbe:Jbe}}function Gbe(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,o=r==e.length;if(i||o)return i==o;if(n[t++].result!=e[r++].result)return!1}}const Kbe={"aria-autocomplete":"list"},Jbe={};function mR(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const Ybe=[];function YH(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(JH);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class ko{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=YH(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new ko(i.source,0)),r&4&&i.state==0&&(i=new ko(this.source,1)),i=i.updateFor(e,r);for(let o of e.effects)if(o.is(py))i=new ko(i.source,1,o.value?Lu(e.state):-1);else if(o.is(Am))i=new ko(i.source,0);else if(o.is(XH))for(let s of o.value)s.source==i.source&&(i=s);return i}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ko(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(Lu(e.state))}}class ah extends ko{constructor(e,t,r,i,o){super(e,2,t),this.result=r,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Lu(e.state);if((this.explicitPos<0?a<=o:a<this.from)||a>s||!i||t&2&&Lu(e.startState)==this.from)return new ko(this.source,t&4?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return Xbe(i.validFor,e.state,o,s)?new ah(this.source,l,i,o,s):i.update&&(i=i.update(i,o,s,new GH(e.state,a,l>=0)))?new ah(this.source,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:Lu(e.state)):new ko(this.source,1,l)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ah(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ko(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Xbe(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):KH(n,!0).test(i)}const XH=Vt.define({map(n,e){return n.map(t=>t.map(e))}}),QH=Vt.define(),eo=Jr.define({create(){return my.start()},update(n,e){return n.update(e)},provide:n=>[y_.from(n,e=>e.tooltip),lt.contentAttributes.from(n,e=>e.attrs)]});function L6(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(eo).active.find(i=>i.source==e.source);return r instanceof ah?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},Bbe(n.state,t,r.from,r.to)),{annotations:JH.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const Qbe=Wbe(eo,L6);function Q1(n,e="option"){return t=>{let r=t.state.field(eo,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(vi).interactionDelay)return!1;let i=1,o;e=="page"&&(o=kj(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:QH.of(a)}),!0}}const Zbe=n=>{let e=n.state.field(eo,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(vi).interactionDelay?!1:L6(n,e.open.options[e.open.selected])},gR=n=>n.state.field(eo,!1)?(n.dispatch({effects:py.of(!0)}),!0):!1,$be=n=>{let e=n.state.field(eo,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Am.of(null)}),!0)};class eye{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const tye=50,nye=1e3,rye=mr.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(eo).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(eo),t=n.state.facet(vi);if(!n.selectionSet&&!n.docChanged&&n.startState.field(eo)==e)return;let r=n.transactions.some(o=>{let s=YH(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(r||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>tye&&Date.now()-s.time>nye){for(let a of s.context.abortListeners)try{a()}catch(l){Wi(this.view.state,l)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(py)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.state==1&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(eo);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Lu(e),r=new GH(e,t,n.explicitPos==t,this.view),i=new eye(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Am.of(null)}),Wi(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vi).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(vi);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let s=new ah(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:Lu(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)s=s.update(a,t);if(s.hasResult()){e.push(s);continue}}let o=this.view.state.field(eo).active.find(s=>s.source==i.active.source);if(o&&o.state==1)if(i.done==null){let s=new ko(i.active.source,0);for(let a of i.updates)s=s.update(a,t);s.state!=1&&e.push(s)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:XH.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(eo,!1);if(e&&e.tooltip&&this.view.state.facet(vi).closeOnBlur){let t=e.open&&kj(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Am.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:py.of(!1)}),20),this.composing=0}}}),iye=typeof navigator=="object"&&/Win/.test(navigator.platform),oye=Vf.highest(lt.domEventHandlers({keydown(n,e){let t=e.state.field(eo,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(iye&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(s=>s.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&L6(e,r),!1}})),sye=lt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Mm={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Gc=Vt.define({map(n,e){let t=e.mapPos(n,-1,Vi.TrackAfter);return t??void 0}}),F6=new class extends yf{};F6.startSide=1;F6.endSide=-1;const ZH=Jr.define({create(){return sn.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(Gc)&&(n=n.update({add:[F6.range(t.value,t.value+1)]}));return n}});function aye(){return[uye,ZH]}const _k="()[]{}<>";function $H(n){for(let e=0;e<_k.length;e+=2)if(_k.charCodeAt(e)==n)return _k.charAt(e+1);return r6(n<128?n:n+1)}function eV(n,e){return n.languageDataAt("closeBrackets",e)[0]||Mm}const lye=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),uye=lt.inputHandler.of((n,e,t,r)=>{if((lye?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&qo(pi(r,0))==1||e!=i.from||t!=i.to)return!1;let o=dye(n.state,r);return o?(n.dispatch(o),!0):!1}),cye=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=eV(n,n.selection.main.head).brackets||Mm.brackets,i=null,o=n.changeByRange(s=>{if(s.empty){let a=hye(n.doc,s.head);for(let l of r)if(l==a&&O_(n.doc,s.head)==$H(pi(l,0)))return{changes:{from:s.head-l.length,to:s.head+l.length},range:Re.cursor(s.head-l.length)}}return{range:i=s}});return i||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},fye=[{key:"Backspace",run:cye}];function dye(n,e){let t=eV(n,n.selection.main.head),r=t.brackets||Mm.brackets;for(let i of r){let o=$H(pi(i,0));if(e==i)return o==i?gye(n,i,r.indexOf(i+i+i)>-1,t):pye(n,i,o,t.before||Mm.before);if(e==o&&tV(n,n.selection.main.from))return mye(n,i,o)}return null}function tV(n,e){let t=!1;return n.field(ZH).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function O_(n,e){let t=n.sliceString(e,e+2);return t.slice(0,qo(pi(t,0)))}function hye(n,e){let t=n.sliceString(e-2,e);return qo(pi(t,0))==t.length?t:t.slice(1)}function pye(n,e,t,r){let i=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:Gc.of(s.to+e.length),range:Re.range(s.anchor+e.length,s.head+e.length)};let a=O_(n.doc,s.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:Gc.of(s.head+e.length),range:Re.cursor(s.head+e.length)}:{range:i=s}});return i?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function mye(n,e,t){let r=null,i=n.changeByRange(o=>o.empty&&O_(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:Re.cursor(o.head+t.length)}:r={range:o});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function gye(n,e,t,r){let i=r.stringPrefixes||Mm.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Gc.of(a.to+e.length),range:Re.range(a.anchor+e.length,a.head+e.length)};let l=a.head,u=O_(n.doc,l),c;if(u==e){if(vR(n,l))return{changes:{insert:e+e,from:l},effects:Gc.of(l+e.length),range:Re.cursor(l+e.length)};if(tV(n,l)){let d=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+d.length,insert:d},range:Re.cursor(l+d.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(c=bR(n,l-2*e.length,i))>-1&&vR(n,c))return{changes:{insert:e+e+e+e,from:l},effects:Gc.of(l+e.length),range:Re.cursor(l+e.length)};if(n.charCategorizer(l)(u)!=ar.Word&&bR(n,l,i)>-1&&!vye(n,l,e,i))return{changes:{insert:e+e,from:l},effects:Gc.of(l+e.length),range:Re.cursor(l+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function vR(n,e){let t=Ii(n).resolveInner(e+1);return t.parent&&t.from==e}function vye(n,e,t,r){let i=Ii(n).resolveInner(e,-1),o=r.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+o)),l=a.indexOf(t);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+l;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function bR(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=ar.Word)return e;for(let i of t){let o=e-i.length;if(n.sliceDoc(o,e)==i&&r(n.sliceDoc(o-1,o))!=ar.Word)return o}return-1}function bye(n={}){return[oye,eo,vi.of(n),rye,yye,sye]}const nV=[{key:"Ctrl-Space",run:gR},{mac:"Alt-`",run:gR},{key:"Escape",run:$be},{key:"ArrowDown",run:Q1(!0)},{key:"ArrowUp",run:Q1(!1)},{key:"PageDown",run:Q1(!0,"page")},{key:"PageUp",run:Q1(!1,"page")},{key:"Enter",run:Zbe}],yye=Vf.highest(Yb.computeN([vi],n=>n.facet(vi).defaultKeymap?[nV]:[]));function yR(n){let e,t,r;return{c(){e=B("div"),t=Se("Line: "),r=Se(n[0]),C(e,"class","jse-status-bar-info svelte-1nittgn")},m(i,o){H(i,e,o),T(e,t),T(e,r)},p(i,o){o&1&&ze(r,i[0])},d(i){i&&j(e)}}}function _R(n){let e,t,r;return{c(){e=B("div"),t=Se("Column: "),r=Se(n[1]),C(e,"class","jse-status-bar-info svelte-1nittgn")},m(i,o){H(i,e,o),T(e,t),T(e,r)},p(i,o){o&2&&ze(r,i[1])},d(i){i&&j(e)}}}function wR(n){let e,t,r,i;return{c(){e=B("div"),t=Se("Selection: "),r=Se(n[2]),i=Se(" characters"),C(e,"class","jse-status-bar-info svelte-1nittgn")},m(o,s){H(o,e,s),T(e,t),T(e,r),T(e,i)},p(o,s){s&4&&ze(r,o[2])},d(o){o&&j(e)}}}function _ye(n){let e,t,r,i=n[0]!==void 0&&yR(n),o=n[1]!==void 0&&_R(n),s=n[2]!==void 0&&n[2]>0&&wR(n);return{c(){e=B("div"),i&&i.c(),t=K(),o&&o.c(),r=K(),s&&s.c(),C(e,"class","jse-status-bar svelte-1nittgn")},m(a,l){H(a,e,l),i&&i.m(e,null),T(e,t),o&&o.m(e,null),T(e,r),s&&s.m(e,null)},p(a,[l]){a[0]!==void 0?i?i.p(a,l):(i=yR(a),i.c(),i.m(e,t)):i&&(i.d(1),i=null),a[1]!==void 0?o?o.p(a,l):(o=_R(a),o.c(),o.m(e,r)):o&&(o.d(1),o=null),a[2]!==void 0&&a[2]>0?s?s.p(a,l):(s=wR(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:pe,o:pe,d(a){a&&j(e),i&&i.d(),o&&o.d(),s&&s.d()}}}function wye(n,e,t){let{editorState:r}=e,i,o,s,a,l;return n.$$set=u=>{"editorState"in u&&t(3,r=u.editorState)},n.$$.update=()=>{var u,c,f,d,h;n.$$.dirty&8&&t(4,i=(c=(u=r==null?void 0:r.selection)==null?void 0:u.main)==null?void 0:c.head),n.$$.dirty&24&&t(5,o=i?(f=r==null?void 0:r.doc)==null?void 0:f.lineAt(i):void 0),n.$$.dirty&32&&t(0,s=o?o.number:void 0),n.$$.dirty&48&&t(1,a=o!==void 0&&i!==void 0?i-o.from+1:void 0),n.$$.dirty&8&&t(2,l=(h=(d=r==null?void 0:r.selection)==null?void 0:d.ranges)==null?void 0:h.reduce((p,m)=>p+m.to-m.from,0))},[s,a,l,r,i,o]}class kye extends ye{constructor(e){super(),be(this,e,wye,_ye,Be,{editorState:3})}}const Cye=kye,z6=Rg.define([{tag:qe.propertyName,color:"var(--internal-key-color)"},{tag:qe.number,color:"var(--internal-value-color-number)"},{tag:qe.bool,color:"var(--internal-value-color-boolean)"},{tag:qe.string,color:"var(--internal-value-color-string)"},{tag:qe.keyword,color:"var(--internal-value-color-null)"}]),Sye=Kj(z6),xye=z6.style;z6.style=n=>xye(n||[]);function Eye(n,e=n.state){const t=new Set;for(const{from:r,to:i}of n.visibleRanges){let o=r;for(;o<=i;){const s=e.doc.lineAt(o);t.has(s)||t.add(s),o=s.to+1}}return t}function gS(n){const e=n.selection.main.head;return n.doc.lineAt(e)}function kR(n,e){let t=0;e:for(let r=0;r<n.length;r++)switch(n[r]){case" ":case"":{t+=1;continue e}case"	":{t+=e-t%e;continue e}case"\r":continue e;default:break e}return t}const gy=ut.define({combine(n){return ms(n,{highlightActiveBlock:!0,hideFirstIndent:!1,markerType:"fullScope",thickness:1})}});class Aye{constructor(e,t,r,i){this.lines=e,this.state=t,this.map=new Map,this.unitWidth=r,this.markerType=i;for(const o of this.lines)this.add(o);this.state.facet(gy).highlightActiveBlock&&this.findAndSetActiveLines()}has(e){return this.map.has(typeof e=="number"?e:e.number)}get(e){const t=this.map.get(typeof e=="number"?e:e.number);if(!t)throw new Error("Line not found in indentation map");return t}set(e,t,r){const i=!e.text.trim().length,o={line:e,col:t,level:r,empty:i};return this.map.set(o.line.number,o),o}add(e){if(this.has(e))return this.get(e);if(!e.length||!e.text.trim().length){if(e.number===1)return this.set(e,0,0);if(e.number===this.state.doc.lines){const s=this.closestNonEmpty(e,-1);return this.set(e,0,s.level)}const i=this.closestNonEmpty(e,-1),o=this.closestNonEmpty(e,1);return i.level>=o.level&&this.markerType!=="codeOnly"?this.set(e,0,i.level):i.empty&&i.level===0&&o.level!==0?this.set(e,0,0):o.level>i.level?this.set(e,0,i.level+1):this.set(e,0,o.level)}const t=kR(e.text,this.state.tabSize),r=Math.floor(t/this.unitWidth);return this.set(e,t,r)}closestNonEmpty(e,t){let r=e.number+t;for(;t===-1?r>=1:r<=this.state.doc.lines;){if(this.has(r)){const s=this.get(r);if(!s.empty)return s}const o=this.state.doc.line(r);if(o.text.trim().length){const s=kR(o.text,this.state.tabSize),a=Math.floor(s/this.unitWidth);return this.set(o,s,a)}r+=t}const i=this.state.doc.line(t===-1?1:this.state.doc.lines);return this.set(i,0,0)}findAndSetActiveLines(){const e=gS(this.state);if(!this.has(e))return;let t=this.get(e);if(this.has(t.line.number+1)){const o=this.get(t.line.number+1);o.level>t.level&&(t=o)}if(this.has(t.line.number-1)){const o=this.get(t.line.number-1);o.level>t.level&&(t=o)}if(t.level===0)return;t.active=t.level;let r,i;for(r=t.line.number;r>1;r--){if(!this.has(r-1))continue;const o=this.get(r-1);if(o.level<t.level)break;o.active=t.level}for(i=t.line.number;i<this.state.doc.lines;i++){if(!this.has(i+1))continue;const o=this.get(i+1);if(o.level<t.level)break;o.active=t.level}}}function Mye(n){const e={light:"#F0F1F2",dark:"#2B3245",activeLight:"#E4E5E6",activeDark:"#3C445C"};let t=e;return n&&(t=Object.assign(Object.assign({},e),n)),lt.baseTheme({"&light":{"--indent-marker-bg-color":t.light,"--indent-marker-active-bg-color":t.activeLight},"&dark":{"--indent-marker-bg-color":t.dark,"--indent-marker-active-bg-color":t.activeDark},".cm-line":{position:"relative"},".cm-indent-markers::before":{content:'""',position:"absolute",top:0,left:"2px",right:0,bottom:0,background:"var(--indent-markers)",pointerEvents:"none",zIndex:"-1"}})}function Z1(n,e,t,r,i){return`${`repeating-linear-gradient(to right, var(${n}) 0 ${e}px, transparent ${e}px ${t}ch)`} ${r*t}.5ch/calc(${t*i}ch - 1px) no-repeat`}function Tye(n,e,t,r,i){const{level:o,active:s}=n;if(i=i??r,t&&o===0)return[];const a=t?1:0,l=[];if(s!==void 0){const u=s-a-1;u>0&&l.push(Z1("--indent-marker-bg-color",r,e,a,u)),l.push(Z1("--indent-marker-active-bg-color",i,e,s-1,1)),s!==o&&l.push(Z1("--indent-marker-bg-color",r,e,s,o-s))}else l.push(Z1("--indent-marker-bg-color",r,e,a,o-a));return l.join(",")}class Oye{constructor(e){this.view=e,this.unitWidth=ec(e.state),this.currentLineNumber=gS(e.state).number,this.generate(e.state)}update(e){const t=ec(e.state),r=t!==this.unitWidth;r&&(this.unitWidth=t);const i=gS(e.state).number,o=i!==this.currentLineNumber;this.currentLineNumber=i;const s=e.state.facet(gy).highlightActiveBlock&&o;(e.docChanged||e.viewportChanged||r||s)&&this.generate(e.state)}generate(e){const t=new Fa,r=Eye(this.view,e),{hideFirstIndent:i,markerType:o,thickness:s,activeThickness:a}=e.facet(gy),l=new Aye(r,e,this.unitWidth,o);for(const u of r){const c=l.get(u.number);if(!(c!=null&&c.level))continue;const f=Tye(c,this.unitWidth,i,s,a);t.add(u.from,u.from,Tt.line({class:"cm-indent-markers",attributes:{style:`--indent-markers: ${f}`}}))}this.decorations=t.finish()}}function Dye(n={}){return[gy.of(n),Mye(n.colors),mr.fromClass(Oye,{decorations:e=>e.decorations})]}class Rye{constructor(e){this.view=e,this.indentUnit=ec(e.state),this.initialPaddingLeft=null,this.isChrome=window==null?void 0:window.navigator.userAgent.includes("Chrome"),this.generate(e.state)}update(e){const t=ec(e.state);(t!==this.indentUnit||e.docChanged||e.viewportChanged)&&(this.indentUnit=t,this.generate(e.state))}generate(e){const t=new Fa;this.initialPaddingLeft?this.addStyleToBuilder(t,e,this.initialPaddingLeft):this.view.requestMeasure({read:r=>{const i=r.contentDOM.querySelector(".cm-line");i&&(this.initialPaddingLeft=window.getComputedStyle(i).getPropertyValue("padding-left"),this.addStyleToBuilder(t,r.state,this.initialPaddingLeft)),this.decorations=t.finish()}}),this.decorations=t.finish()}addStyleToBuilder(e,t,r){const i=this.getVisibleLines(t);for(const o of i){const{numColumns:s,containsTab:a}=this.numColumns(o.text,t.tabSize),l=`calc(${s+this.indentUnit}ch + ${r})`,u=this.isChrome?`calc(-${s+this.indentUnit}ch - ${a?1:0}px)`:`-${s+this.indentUnit}ch`;e.add(o.from,o.from,Tt.line({attributes:{style:`padding-left: ${l}; text-indent: ${u};`}}))}}getVisibleLines(e){const t=new Set;let r=null;for(const{from:i,to:o}of this.view.visibleRanges){let s=i;for(;s<=o;){const a=e.doc.lineAt(s);r!==a&&(t.add(a),r=a),s=a.to+1}}return t}numColumns(e,t){let r=0,i=!1;e:for(let o=0;o<e.length;o++)switch(e[o]){case" ":{r+=1;continue e}case"	":{r+=t-r%t,i=!0;continue e}case"\r":continue e;default:break e}return{numColumns:r,containsTab:i}}}const Pye=[mr.fromClass(Rye,{decorations:n=>n.decorations})];function Iye(n){const e=n.slice(),t=e[28](e[11],e[9]);return e[97]=t,e}function wk(n){const e=n.slice(),t=e[11].length===0;return e[98]=t,e}function CR(n){let e,t;return e=new vpe({props:{readOnly:n[1],onFormat:n[17],onCompact:n[18],onSort:n[19],onTransform:n[20],onToggleSearch:n[21],onUndo:n[22],onRedo:n[23],canFormat:!n[98],canCompact:!n[98],canSort:!n[98],canTransform:!n[98],canUndo:n[12],canRedo:n[13],onRenderMenu:n[4]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&2&&(o.readOnly=r[1]),i[0]&2048&&(o.canFormat=!r[98]),i[0]&2048&&(o.canCompact=!r[98]),i[0]&2048&&(o.canSort=!r[98]),i[0]&2048&&(o.canTransform=!r[98]),i[0]&4096&&(o.canUndo=r[12]),i[0]&8192&&(o.canRedo=r[13]),i[0]&16&&(o.onRenderMenu=r[4]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Nye(n){let e;return{c(){e=B("div"),e.innerHTML=`<div class="jse-loading-space svelte-1jv742p"></div> 
      <div class="jse-loading svelte-1jv742p">loading...</div>`,C(e,"class","jse-contents svelte-1jv742p")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}function Bye(n){let e,t,r,i,o,s=n[97]&&SR(n),a=!n[97]&&xR(n);return{c(){e=B("div"),t=K(),s&&s.c(),r=K(),a&&a.c(),i=Ze(),C(e,"class","jse-contents svelte-1jv742p"),oe(e,"jse-hidden",n[97])},m(l,u){H(l,e,u),n[52](e),H(l,t,u),s&&s.m(l,u),H(l,r,u),a&&a.m(l,u),H(l,i,u),o=!0},p(l,u){(!o||u[0]&268438016)&&oe(e,"jse-hidden",l[97]),l[97]?s?(s.p(l,u),u[0]&2560&&x(s,1)):(s=SR(l),s.c(),x(s,1),s.m(r.parentNode,r)):s&&(de(),D(s,1,1,()=>{s=null}),he()),l[97]?a&&(de(),D(a,1,1,()=>{a=null}),he()):a?(a.p(l,u),u[0]&2560&&x(a,1)):(a=xR(l),a.c(),x(a,1),a.m(i.parentNode,i))},i(l){o||(x(s),x(a),o=!0)},o(l){D(s),D(a),o=!1},d(l){l&&j(e),n[52](null),l&&j(t),s&&s.d(l),l&&j(r),a&&a.d(l),l&&j(i)}}}function SR(n){let e,t,r,i=Nl(n[11]||"",V3)+"",o,s;return e=new Zs({props:{icon:jf,type:"error",message:`The JSON document is larger than ${A1(W3,1024)}, and may crash your browser when loading it in text mode. Actual size: ${A1(n[11].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:n[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:n[25]},{text:"Cancel",title:"Cancel opening this large document.",onClick:n[26]}],onClose:n[5]}}),{c(){$(e.$$.fragment),t=K(),r=B("div"),o=Se(i),C(r,"class","jse-contents jse-preview svelte-1jv742p")},m(a,l){Q(e,a,l),H(a,t,l),H(a,r,l),T(r,o),s=!0},p(a,l){const u={};l[0]&2048&&(u.message=`The JSON document is larger than ${A1(W3,1024)}, and may crash your browser when loading it in text mode. Actual size: ${A1(a[11].length,1024)}.`),e.$set(u),(!s||l[0]&2048)&&i!==(i=Nl(a[11]||"",V3)+"")&&ze(o,i)},i(a){s||(x(e.$$.fragment,a),s=!0)},o(a){D(e.$$.fragment,a),s=!1},d(a){Z(e,a),a&&j(t),a&&j(r)}}}function xR(n){let e,t,r=!n[14]&&n[0]&&LM(n[11]),i,o,s,a=n[3]&&ER(n),l=n[14]&&AR(n),u=r&&MR(n);return o=new Kx({props:{validationErrors:n[10],selectError:n[27]}}),{c(){a&&a.c(),e=K(),l&&l.c(),t=K(),u&&u.c(),i=K(),$(o.$$.fragment)},m(c,f){a&&a.m(c,f),H(c,e,f),l&&l.m(c,f),H(c,t,f),u&&u.m(c,f),H(c,i,f),Q(o,c,f),s=!0},p(c,f){c[3]?a?(a.p(c,f),f[0]&8&&x(a,1)):(a=ER(c),a.c(),x(a,1),a.m(e.parentNode,e)):a&&(de(),D(a,1,1,()=>{a=null}),he()),c[14]?l?(l.p(c,f),f[0]&16384&&x(l,1)):(l=AR(c),l.c(),x(l,1),l.m(t.parentNode,t)):l&&(de(),D(l,1,1,()=>{l=null}),he()),f[0]&18433&&(r=!c[14]&&c[0]&&LM(c[11])),r?u?(u.p(c,f),f[0]&18433&&x(u,1)):(u=MR(c),u.c(),x(u,1),u.m(i.parentNode,i)):u&&(de(),D(u,1,1,()=>{u=null}),he());const d={};f[0]&1024&&(d.validationErrors=c[10]),o.$set(d)},i(c){s||(x(a),x(l),x(u),x(o.$$.fragment,c),s=!0)},o(c){D(a),D(l),D(u),D(o.$$.fragment,c),s=!1},d(c){a&&a.d(c),c&&j(e),l&&l.d(c),c&&j(t),u&&u.d(c),c&&j(i),Z(o,c)}}}function ER(n){let e,t;return e=new Cye({props:{editorState:n[8]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&256&&(o.editorState=r[8]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function AR(n){let e,t;return e=new Zs({props:{type:"error",icon:jf,message:n[14].message,actions:n[15],onClick:n[29],onClose:n[5]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&16384&&(o.message=r[14].message),i[0]&32768&&(o.actions=r[15]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function MR(n){let e,t;return e=new Zs({props:{type:"success",message:"Do you want to format the JSON?",actions:[{icon:mC,text:"Format",title:"Format JSON: add proper indentation and new lines (Ctrl+I)",onClick:n[17]},{icon:xh,text:"No thanks",title:"Close this message",onClick:n[53]}],onClose:n[5]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&1&&(o.actions=[{icon:mC,text:"Format",title:"Format JSON: add proper indentation and new lines (Ctrl+I)",onClick:r[17]},{icon:xh,text:"No thanks",title:"Close this message",onClick:r[53]}]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Lye(n){let e,t,r,i,o,s=n[2]&&CR(wk(n));const a=[Bye,Nye],l=[];function u(f,d){return f[16]?1:0}function c(f,d){return d===0?Iye(f):f}return r=u(n),i=l[r]=a[r](c(n,r)),{c(){e=B("div"),s&&s.c(),t=K(),i.c(),C(e,"class","jse-text-mode svelte-1jv742p"),oe(e,"no-main-menu",!n[2])},m(f,d){H(f,e,d),s&&s.m(e,null),T(e,t),l[r].m(e,null),n[54](e),o=!0},p(f,d){f[2]?s?(s.p(wk(f),d),d[0]&4&&x(s,1)):(s=CR(wk(f)),s.c(),x(s,1),s.m(e,t)):s&&(de(),D(s,1,1,()=>{s=null}),he()),i.p(c(f,r),d),(!o||d[0]&4)&&oe(e,"no-main-menu",!f[2])},i(f){o||(x(s),x(i),o=!0)},o(f){D(s),D(i),o=!1},d(f){f&&j(e),s&&s.d(),l[r].d(),n[54](null)}}}function TR(n){return{from:n.from||0,to:n.to||0,message:n.message||"",actions:n.actions,severity:n.severity}}function Fye(n,e,t){let r,i,{readOnly:o}=e,{mainMenuBar:s}=e,{statusBar:a}=e,{askToFormat:l}=e,{externalContent:u}=e,{externalSelection:c}=e,{indentation:f}=e,{tabSize:d}=e,{escapeUnicodeCharacters:h}=e,{parser:p}=e,{validator:m}=e,{validationParser:g}=e,{onChange:v}=e,{onChangeMode:b}=e,{onSelect:w}=e,{onError:_}=e,{onFocus:y}=e,{onBlur:k}=e,{onRenderMenu:S}=e,{onSortModal:E}=e,{onTransformModal:M}=e;const R=oi("jsoneditor:TextMode"),O={key:"Mod-i",run:Ee,shift:Ae,preventDefault:!0},I=typeof window>"u";R("isSSR:",I);let P,A,N,F,V=!1,W=[];const L=new gl,z=new gl,q=new gl,te=new gl,re=new gl;let ne=u,fe=iC(ne,f,p),ie=h;Tn(async()=>{if(!I)try{N=Fn({target:P,initialText:bs(fe,V)?"":r.escapeValue(fe),readOnly:o,indentation:f})}catch(ke){console.error(ke)}}),Kr(()=>{N&&(R("Destroy CodeMirror editor"),N.destroy())});let G=!1,ae=!1;const Me=_h(),X=_h();function ge(){N&&(R("focus"),N.focus())}let U=!1;Kr(()=>{mo()}),Gx({onMount:Tn,onDestroy:Kr,getWindow:()=>lp(A),hasFocus:()=>U&&document.hasFocus()||Ix(A),onFocus:y,onBlur:()=>{mo(),k()}});function Ce(ke){R("patch",ke);const xt=p.parse(fe),en=Ns(xt,ke),pn=qB(xt,ke);return $e({text:p.stringify(en,null,f)}),{json:en,previousJson:xt,undo:pn,redo:ke}}function Ee(){if(R("format"),o)return!1;try{const ke=p.parse(fe);return $e({text:p.stringify(ke,null,f)}),t(0,l=!0),!0}catch(ke){_(ke)}return!1}function Ae(){if(R("compact"),o)return!1;try{const ke=p.parse(fe);return $e({text:p.stringify(ke)}),t(0,l=!1),!0}catch(ke){_(ke)}return!1}function De(){if(R("repair"),!o)try{$e({text:Aa(fe)}),t(51,Er=Dw),t(14,ai=null)}catch(ke){_(ke)}}function nt(){if(!o)try{const ke=p.parse(fe);U=!0,E({id:Me,json:ke,rootPath:[],onSort:async({operations:xt})=>{R("onSort",xt),Ce(xt)},onClose:()=>{U=!1,ge()}})}catch(ke){_(ke)}}function ue({id:ke,rootPath:xt,onTransform:en,onClose:pn}){try{const Rn=p.parse(fe);U=!0,M({id:ke||X,json:Rn,rootPath:xt||[],onTransform:lr=>{en?en({operations:lr,json:Rn,transformedJson:Ns(Rn,lr)}):(R("onTransform",lr),Ce(lr))},onClose:()=>{U=!1,ge(),pn&&pn()}})}catch(Rn){_(Rn)}}function Oe(){o||ue({rootPath:[]})}function Ue(){N&&(P&&P.querySelector(".cm-search")?N6(N):I6(N))}function _e(){o||N&&(A6(N),ge())}function it(){o||N&&(ry(N),ge())}function At(){t(9,V=!0),$e(u,!0)}function Ve(){b(hi.tree)}function ct(){wt()}function Pt(ke){R("select validation error",ke);const{from:xt,to:en}=ve(ke);xt===null||en===null||(mn(xt,en),ge())}function yt(ke){R("select parse error",ke);const xt=Ge(ke,!1),en=xt.from!=null?xt.from:0,pn=xt.to!=null?xt.to:0;mn(en,pn),ge()}function mn(ke,xt){R("setSelection",{anchor:ke,head:xt}),N&&N.dispatch(N.state.update({selection:{anchor:ke,head:xt},scrollIntoView:!0}))}function En(ke,xt){if(xt.state.selection.ranges.length===1){const en=xt.state.selection.ranges[0],pn=fe.slice(en.from,en.to);if(pn==="{"||pn==="["){const Rn=H2.parse(fe),lr=Object.keys(Rn.pointers).find(rl=>{var ta;return((ta=Rn.pointers[rl].value)==null?void 0:ta.pos)===en.from}),Fi=Rn.pointers[lr];if(lr&&Fi&&Fi.value&&Fi.valueEnd){R("pointer found, selecting inner contents of path:",lr,Fi);const rl=Fi.value.pos+1,il=Fi.valueEnd.pos-1;mn(rl,il)}}}}function Dn(){return zve(el,{delay:z8})}function Fn({target:ke,initialText:xt,readOnly:en,indentation:pn}){R("Create CodeMirror editor",{readOnly:en,indentation:pn});const Rn=Un.create({doc:xt,selection:ft(c),extensions:[Yb.of([Tve,O]),L.of(Dn()),Kve(),oge(),lge(),Eme(),E1e(),$ge(),mme(),_me(),Un.allowMultipleSelections.of(!0),zge(),Kj(r1e,{fallback:!0}),c1e(),aye(),bye(),Fme(),Hme(),Rme(),fbe(),Yb.of([...fye,...Mve,...Dbe,...L1e,...Yge,...nV,...Bve]),Sye,Dye({hideFirstIndent:!0}),lt.domEventHandlers({dblclick:En}),lt.updateListener.of(lr=>{t(8,F=lr.state),lr.docChanged?xr():lr.selectionSet&&Do()}),sbe(),_be({top:!0}),z.of(Un.readOnly.of(en)),te.of(Un.tabSize.of(d)),q.of(ln(pn)),re.of(lt.theme({},{dark:bt()})),lt.lineWrapping,Pye]});return N=new lt({state:Rn,parent:ke}),N}function we(){return N?r.unescapeValue(N.state.doc.toString()):""}function bt(){return P?getComputedStyle(P).getPropertyValue("--jse-theme").includes("dark"):!1}function ve(ke){const{path:xt,message:en}=ke,{line:pn,column:Rn,from:lr,to:Fi}=qoe(r.escapeValue(fe),xt);return{path:xt,line:pn,column:Rn,from:lr,to:Fi,message:en,severity:Pl.warning,actions:[]}}function Ge(ke,xt){const{line:en,column:pn,position:Rn,message:lr}=ke;return{path:[],line:en,column:pn,from:Rn,to:Rn,severity:Pl.error,message:lr,actions:xt&&!o?[{name:"Auto repair",apply:()=>De()}]:null}}function $e(ke,xt=!1){const en=iC(ke,f,p),pn=!Wt(ke,ne),Rn=ne;R("setCodeMirrorContent",{isChanged:pn,forceUpdate:xt}),!(!N||!pn&&!xt)&&(ne=ke,t(11,fe=en),bs(fe,V)||N.dispatch({changes:{from:0,to:N.state.doc.length,insert:r.escapeValue(fe)}}),gn(),pn&&vs(ne,Rn))}function me(ke){if(!JM(ke))return;const xt=ft(ke);N&&xt&&(!F||!F.selection.eq(xt))&&(R("applyExternalSelection",xt),N.dispatch({selection:xt}))}function ft(ke){return JM(ke)?Re.fromJSON(ke):void 0}async function Gt(){R("refresh"),await on()}function mt(){R("forceUpdateText",{escapeUnicodeCharacters:h}),N&&N.dispatch({changes:{from:0,to:N.state.doc.length,insert:r.escapeValue(fe)}})}function wt(){if(!N)return;const ke=we(),xt=ke!==fe;if(R("onChangeCodeMirrorValue",{isChanged:xt}),!xt)return;const en=ne;t(11,fe=ke),ne={text:fe},gn(),vs(ne,en),dn().then(Do)}function Yr(ke){R("updateLinter",ke),N&&N.dispatch({effects:L.reconfigure(Dn())})}function Dr(ke){N&&(R("updateIndentation",ke),N.dispatch({effects:q.reconfigure(ln(ke))}))}function wi(ke){N&&(R("updateTabSize",ke),N.dispatch({effects:te.reconfigure(Un.tabSize.of(ke))}))}function rr(ke){N&&(R("updateReadOnly",ke),N.dispatch({effects:[z.reconfigure(Un.readOnly.of(ke))]}))}async function on(){if(await dn(),N){const ke=bt();R("updateTheme",{dark:ke}),N.dispatch({effects:[re.reconfigure(lt.theme({},{dark:ke}))]})}}function ln(ke){return w_.of(typeof ke=="number"?" ".repeat(ke):ke)}function gn(){t(12,G=T1e(N.state)>0),t(13,ae=O1e(N.state)>0),R({canUndo:G,canRedo:ae})}const xr=e_(wt,z8);function mo(){xr.flush()}function vs(ke,xt){v&&v(ke,xt,{contentErrors:ys(),patchResult:null})}function Do(){w({type:_n.text,...F.selection.toJSON()})}function bs(ke,xt){return(ke?ke.length>W3:!1)&&!xt}let Er=Dw,ai=null;function el(){if(bs(fe,V))return[];const ke=ys();if(tT(ke)){const{parseError:xt,isRepairable:en}=ke;return[TR(Ge(xt,en))]}return Oce(ke)?ke.validationErrors.map(ve).map(TR):[]}function ys(){R("validate:start"),mo();const ke=wc(r.escapeValue(fe),m,p,g);return tT(ke)?(t(51,Er=ke.isRepairable?q8:aZ),t(14,ai=ke.parseError),t(10,W=[])):(t(51,Er=Dw),t(14,ai=null),t(10,W=(ke==null?void 0:ke.validationErrors)||[])),R("validate:end"),ke}const wc=Ag(cce);function tl(){ai&&yt(ai)}const vr={icon:ule,text:"Show me",title:"Move to the parse error location",onClick:tl};function Yl(ke){rt[ke?"unshift":"push"](()=>{P=ke,t(6,P)})}const Ro=()=>t(0,l=!1);function nl(ke){rt[ke?"unshift":"push"](()=>{A=ke,t(7,A)})}return n.$$set=ke=>{"readOnly"in ke&&t(1,o=ke.readOnly),"mainMenuBar"in ke&&t(2,s=ke.mainMenuBar),"statusBar"in ke&&t(3,a=ke.statusBar),"askToFormat"in ke&&t(0,l=ke.askToFormat),"externalContent"in ke&&t(30,u=ke.externalContent),"externalSelection"in ke&&t(31,c=ke.externalSelection),"indentation"in ke&&t(32,f=ke.indentation),"tabSize"in ke&&t(33,d=ke.tabSize),"escapeUnicodeCharacters"in ke&&t(34,h=ke.escapeUnicodeCharacters),"parser"in ke&&t(35,p=ke.parser),"validator"in ke&&t(36,m=ke.validator),"validationParser"in ke&&t(37,g=ke.validationParser),"onChange"in ke&&t(38,v=ke.onChange),"onChangeMode"in ke&&t(39,b=ke.onChangeMode),"onSelect"in ke&&t(40,w=ke.onSelect),"onError"in ke&&t(41,_=ke.onError),"onFocus"in ke&&t(42,y=ke.onFocus),"onBlur"in ke&&t(43,k=ke.onBlur),"onRenderMenu"in ke&&t(4,S=ke.onRenderMenu),"onSortModal"in ke&&t(44,E=ke.onSortModal),"onTransformModal"in ke&&t(45,M=ke.onTransformModal)},n.$$.update=()=>{n.$$.dirty[1]&8&&(r=Dx({escapeControlCharacters:!1,escapeUnicodeCharacters:h})),n.$$.dirty[0]&1073741824&&$e(u),n.$$.dirty[1]&1&&me(c),n.$$.dirty[1]&32&&Yr(m),n.$$.dirty[1]&2&&Dr(f),n.$$.dirty[1]&4&&wi(d),n.$$.dirty[0]&2&&rr(o),n.$$.dirty[1]&524296&&ie!==h&&(t(50,ie=h),mt()),n.$$.dirty[0]&2|n.$$.dirty[1]&1048576&&t(15,i=Er===q8&&!o?[{icon:s_,text:"Auto repair",title:"Automatically repair JSON",onClick:De},vr]:[vr])},[l,o,s,a,S,ge,P,A,F,V,W,fe,G,ae,ai,i,I,Ee,Ae,nt,Oe,Ue,_e,it,At,Ve,ct,Pt,bs,tl,u,c,f,d,h,p,m,g,v,b,w,_,y,k,E,M,Ce,ue,Gt,ys,ie,Er,Yl,Ro,nl]}class zye extends ye{constructor(e){super(),be(this,e,Fye,Lye,Rt,{readOnly:1,mainMenuBar:2,statusBar:3,askToFormat:0,externalContent:30,externalSelection:31,indentation:32,tabSize:33,escapeUnicodeCharacters:34,parser:35,validator:36,validationParser:37,onChange:38,onChangeMode:39,onSelect:40,onError:41,onFocus:42,onBlur:43,onRenderMenu:4,onSortModal:44,onTransformModal:45,focus:5,patch:46,openTransformModal:47,refresh:48,validate:49},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[5]}get patch(){return this.$$.ctx[46]}get openTransformModal(){return this.$$.ctx[47]}get refresh(){return this.$$.ctx[48]}get validate(){return this.$$.ctx[49]}}const jye=zye;function Hye(n){let e,t;return e=new p_({props:{items:n[0]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.items=r[0]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Vye(n,e,t){let{json:r}=e,{readOnly:i}=e,{historyState:o}=e,{onSort:s}=e,{onTransform:a}=e,{onContextMenu:l}=e,{onUndo:u}=e,{onRedo:c}=e,{onRenderMenu:f}=e,d,h;return n.$$set=p=>{"json"in p&&t(1,r=p.json),"readOnly"in p&&t(2,i=p.readOnly),"historyState"in p&&t(3,o=p.historyState),"onSort"in p&&t(4,s=p.onSort),"onTransform"in p&&t(5,a=p.onTransform),"onContextMenu"in p&&t(6,l=p.onContextMenu),"onUndo"in p&&t(7,u=p.onUndo),"onRedo"in p&&t(8,c=p.onRedo),"onRenderMenu"in p&&t(9,f=p.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&510&&t(10,d=i?[{type:"space"}]:[{type:"button",icon:a_,title:"Sort",className:"jse-sort",onClick:s,disabled:i||r===void 0},{type:"button",icon:o_,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:a,disabled:i||r===void 0},{type:"button",icon:bF,title:hx,className:"jse-contextmenu",onClick:l},{type:"separator"},{type:"button",icon:Hx,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:u,disabled:!o.canUndo},{type:"button",icon:jx,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:c,disabled:!o.canRedo},{type:"space"}]),n.$$.dirty&1536&&t(0,h=f(d))},[h,r,i,o,s,a,l,u,c,f,d]}class Wye extends ye{constructor(e){super(),be(this,e,Vye,Hye,Rt,{json:1,readOnly:2,historyState:3,onSort:4,onTransform:5,onContextMenu:6,onUndo:7,onRedo:8,onRenderMenu:9})}}const qye=Wye;function OR(n,e,t){const r=n.slice();return r[9]=e[t],r}function Uye(n){const e=n.slice(),t=e[9].action;return e[12]=t,e}function Gye(n){let e=n[9].component,t,r,i=DR(n);return{c(){i.c(),t=Ze()},m(o,s){i.m(o,s),H(o,t,s),r=!0},p(o,s){s&1&&Rt(e,e=o[9].component)?(de(),D(i,1,1,pe),he(),i=DR(o),i.c(),x(i,1),i.m(t.parentNode,t)):i.p(o,s)},i(o){r||(x(i),r=!0)},o(o){D(i),r=!1},d(o){o&&j(t),i.d(o)}}}function Kye(n){let e=n[9].action,t,r=RR(n);return{c(){r.c(),t=Ze()},m(i,o){r.m(i,o),H(i,t,o)},p(i,o){o&1&&Rt(e,e=i[9].action)?(r.d(1),r=RR(i),r.c(),r.m(t.parentNode,t)):r.p(i,o)},i:pe,o:pe,d(i){i&&j(t),r.d(i)}}}function DR(n){let e,t,r;const i=[n[9].props];var o=n[9].component;function s(a){let l={};for(let u=0;u<i.length;u+=1)l=Te(l,i[u]);return{props:l}}return o&&(e=Ht(o,s())),{c(){e&&$(e.$$.fragment),t=Ze()},m(a,l){e&&Q(e,a,l),H(a,t,l),r=!0},p(a,l){const u=l&1?Ot(i,[an(a[9].props)]):{};if(l&1&&o!==(o=a[9].component)){if(e){de();const c=e;D(c.$$.fragment,1,0,()=>{Z(c,1)}),he()}o?(e=Ht(o,s()),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&x(e.$$.fragment,a),r=!0)},o(a){e&&D(e.$$.fragment,a),r=!1},d(a){a&&j(t),e&&Z(e,a)}}}function RR(n){let e,t,r,i;return{c(){e=B("div"),C(e,"role","button"),C(e,"tabindex","-1"),C(e,"class","jse-value jse-readonly-password"),C(e,"data-type","selectable-value")},m(o,s){H(o,e,s),r||(i=Mn(t=n[12].call(null,e,n[9].props)),r=!0)},p(o,s){n=o,t&&dr(t.update)&&s&1&&t.update.call(null,n[9].props)},d(o){o&&j(e),r=!1,i()}}}function PR(n){let e,t,r,i,o;const s=[Kye,Gye],a=[];function l(c,f){return f&1&&(e=null),e==null&&(e=!!BF(c[9])),e?0:1}function u(c,f){return f===0?Uye(c):c}return t=l(n,-1),r=a[t]=s[t](u(n,t)),{c(){r.c(),i=Ze()},m(c,f){a[t].m(c,f),H(c,i,f),o=!0},p(c,f){let d=t;t=l(c,f),t===d?a[t].p(u(c,t),f):(de(),D(a[d],1,1,()=>{a[d]=null}),he(),r=a[t],r?r.p(u(c,t),f):(r=a[t]=s[t](u(c,t)),r.c()),x(r,1),r.m(i.parentNode,i))},i(c){o||(x(r),o=!0)},o(c){D(r),o=!1},d(c){a[t].d(c),c&&j(i)}}}function Jye(n){let e,t,r=n[0],i=[];for(let s=0;s<r.length;s+=1)i[s]=PR(OR(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,[a]){if(a&1){r=s[0];let l;for(l=0;l<r.length;l+=1){const u=OR(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=PR(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function Yye(n,e,t){let r,i,{path:o}=e,{value:s}=e,{context:a}=e,{enforceString:l}=e,{selection:u}=e,{searchResultItems:c}=e;function f(d,h){return a.onPatch(Eae(d,a.getJson()),h)}return n.$$set=d=>{"path"in d&&t(1,o=d.path),"value"in d&&t(2,s=d.value),"context"in d&&t(3,a=d.context),"enforceString"in d&&t(4,l=d.enforceString),"selection"in d&&t(5,u=d.selection),"searchResultItems"in d&&t(6,c=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&40&&t(7,r=!a.readOnly&&Qt(u)&&Pi(u)),n.$$.dirty&254&&t(0,i=a.onRenderValue({path:o,value:s,readOnly:a.readOnly,enforceString:l,isEditing:r,parser:a.parser,normalization:a.normalization,selection:u,searchResultItems:c,onPatch:f,onPasteJson:a.onPasteJson,onSelect:a.onSelect,onFind:a.onFind,findNextInside:a.findNextInside,focus:a.focus}))},[i,o,s,a,l,u,c,r]}class Xye extends ye{constructor(e){super(),be(this,e,Yye,Jye,Rt,{path:1,value:2,context:3,enforceString:4,selection:5,searchResultItems:6})}}const Qye=Xye;function Zye(n){let e,t=Nl(n[2].stringify(n[1])??"",H8)+"",r,i,o;return{c(){e=B("button"),r=Se(t),C(e,"type","button"),C(e,"class","jse-inline-value svelte-1ihtvqr"),oe(e,"jse-selected",n[3])},m(s,a){H(s,e,a),T(e,r),i||(o=le(e,"dblclick",n[5]),i=!0)},p(s,[a]){a&6&&t!==(t=Nl(s[2].stringify(s[1])??"",H8)+"")&&ze(r,t),a&8&&oe(e,"jse-selected",s[3])},i:pe,o:pe,d(s){s&&j(e),i=!1,o()}}}function $ye(n,e,t){let{path:r}=e,{value:i}=e,{parser:o}=e,{isSelected:s}=e,{onEdit:a}=e;const l=()=>a(r);return n.$$set=u=>{"path"in u&&t(0,r=u.path),"value"in u&&t(1,i=u.value),"parser"in u&&t(2,o=u.parser),"isSelected"in u&&t(3,s=u.isSelected),"onEdit"in u&&t(4,a=u.onEdit)},[r,i,o,s,a,l]}class e2e extends ye{constructor(e){super(),be(this,e,$ye,Zye,Rt,{path:0,value:1,parser:2,isSelected:3,onEdit:4})}}const t2e=e2e;function IR(n){let e,t,r,i;return t=new Jt({props:{data:n[1]===Qo.asc?Ko:a5}}),{c(){e=B("span"),$(t.$$.fragment),C(e,"class","jse-column-sort-icon svelte-1jkhbpx"),C(e,"title",r=`Currently sorted in ${n[2]} order`)},m(o,s){H(o,e,s),Q(t,e,null),i=!0},p(o,s){const a={};s&2&&(a.data=o[1]===Qo.asc?Ko:a5),t.$set(a),(!i||s&4&&r!==(r=`Currently sorted in ${o[2]} order`))&&C(e,"title",r)},i(o){i||(x(t.$$.fragment,o),i=!0)},o(o){D(t.$$.fragment,o),i=!1},d(o){o&&j(e),Z(t)}}}function n2e(n){let e,t,r=Nl(n[3],V8)+"",i,o,s,a,l,u,c=n[1]!==void 0&&IR(n);return{c(){e=B("button"),t=B("span"),i=Se(r),o=K(),c&&c.c(),C(t,"class","jse-column-name"),C(e,"type","button"),C(e,"class","jse-column-header svelte-1jkhbpx"),C(e,"title",s=n[0]?n[3]:n[3]+" (Click to sort the data by this column)"),oe(e,"jse-readonly",n[0])},m(f,d){H(f,e,d),T(e,t),T(t,i),T(e,o),c&&c.m(e,null),a=!0,l||(u=le(e,"click",n[4]),l=!0)},p(f,[d]){(!a||d&8)&&r!==(r=Nl(f[3],V8)+"")&&ze(i,r),f[1]!==void 0?c?(c.p(f,d),d&2&&x(c,1)):(c=IR(f),c.c(),x(c,1),c.m(e,null)):c&&(de(),D(c,1,1,()=>{c=null}),he()),(!a||d&9&&s!==(s=f[0]?f[3]:f[3]+" (Click to sort the data by this column)"))&&C(e,"title",s),(!a||d&1)&&oe(e,"jse-readonly",f[0])},i(f){a||(x(c),a=!0)},o(f){D(c),a=!1},d(f){f&&j(e),c&&c.d(),l=!1,u()}}}function r2e(n,e,t){let r,i,o,{path:s}=e,{sortedColumn:a}=e,{readOnly:l}=e,{onSort:u}=e;function c(){l||u({path:s,sortDirection:i===Qo.asc?Qo.desc:Qo.asc})}return n.$$set=f=>{"path"in f&&t(5,s=f.path),"sortedColumn"in f&&t(6,a=f.sortedColumn),"readOnly"in f&&t(0,l=f.readOnly),"onSort"in f&&t(7,u=f.onSort)},n.$$.update=()=>{n.$$.dirty&32&&t(3,r=$t(s)?"values":lo(s)),n.$$.dirty&96&&t(1,i=a&&Wt(s,a==null?void 0:a.path)?a.sortDirection:void 0),n.$$.dirty&2&&t(2,o=i?lZ[i]:void 0)},[l,i,o,r,c,s,a,u]}class i2e extends ye{constructor(e){super(),be(this,e,r2e,n2e,Rt,{path:5,sortedColumn:6,readOnly:0,onSort:7})}}const o2e=i2e;let $1,ev;function rV(n,e){return $1||(ev=new WeakMap,$1=new ResizeObserver(t=>{for(const r of t){const i=ev.get(r.target);i&&i(r.target)}})),ev.set(n,e),$1.observe(n),{destroy:()=>{ev.delete(n),$1.unobserve(n)}}}function s2e(n){let e,t;return e=new FF({props:{items:n[2],onCloseContextMenu:n[1],tip:n[0]?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,[i]){const o={};i&4&&(o.items=r[2]),i&2&&(o.onCloseContextMenu=r[1]),i&1&&(o.tip=r[0]?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function a2e(n,e,t){let r,i,o,s,a,l,u,c,f,{json:d}=e,{documentState:h}=e,{parser:p}=e,{showTip:m}=e,{onCloseContextMenu:g}=e,{onRenderContextMenu:v}=e,{onEditValue:b}=e,{onEditRow:w}=e,{onToggleEnforceString:_}=e,{onCut:y}=e,{onCopy:k}=e,{onPaste:S}=e,{onRemove:E}=e,{onDuplicateRow:M}=e,{onInsertBeforeRow:R}=e,{onInsertAfterRow:O}=e,{onRemoveRow:I}=e,P;return n.$$set=A=>{"json"in A&&t(3,d=A.json),"documentState"in A&&t(4,h=A.documentState),"parser"in A&&t(5,p=A.parser),"showTip"in A&&t(0,m=A.showTip),"onCloseContextMenu"in A&&t(1,g=A.onCloseContextMenu),"onRenderContextMenu"in A&&t(6,v=A.onRenderContextMenu),"onEditValue"in A&&t(7,b=A.onEditValue),"onEditRow"in A&&t(8,w=A.onEditRow),"onToggleEnforceString"in A&&t(9,_=A.onToggleEnforceString),"onCut"in A&&t(10,y=A.onCut),"onCopy"in A&&t(11,k=A.onCopy),"onPaste"in A&&t(12,S=A.onPaste),"onRemove"in A&&t(13,E=A.onRemove),"onDuplicateRow"in A&&t(14,M=A.onDuplicateRow),"onInsertBeforeRow"in A&&t(15,R=A.onInsertBeforeRow),"onInsertAfterRow"in A&&t(16,O=A.onInsertAfterRow),"onRemoveRow"in A&&t(17,I=A.onRemoveRow)},n.$$.update=()=>{n.$$.dirty&16&&t(24,r=h.selection),n.$$.dirty&8&&t(26,i=d!==void 0),n.$$.dirty&16777216&&t(19,o=!!r),n.$$.dirty&16777224&&t(25,s=d!==void 0&&r?ot(d,pt(r)):void 0),n.$$.dirty&83886080&&t(20,a=i&&(hn(r)||hr(r)||Qt(r))),n.$$.dirty&83886080&&t(23,l=i&&r!=null&&Pb(r)),n.$$.dirty&41943040&&t(21,u=l&&!er(s)),n.$$.dirty&50331696&&t(22,c=r!=null&&s!==void 0?Bl(s,h.enforceStringMap,Ke(pt(r)),p):!1),n.$$.dirty&16514944&&t(18,P=[{type:"separator"},{type:"row",items:[{type:"column",items:[{type:"label",text:"Table cell:"},{type:"dropdown-button",main:{type:"button",onClick:()=>b(),icon:$d,text:"Edit",title:"Edit the value (Double-click on the value)",disabled:!l},width:"11em",items:[{type:"button",icon:$d,text:"Edit",title:"Edit the value (Double-click on the value)",onClick:()=>b(),disabled:!l},{type:"button",icon:c?am:lm,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:()=>_(),disabled:!u}]},{type:"dropdown-button",main:{type:"button",onClick:()=>y(!0),icon:Zd,text:"Cut",title:"Cut selected contents, formatted with indentation (Ctrl+X)",disabled:!a},width:"10em",items:[{type:"button",icon:Zd,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:()=>y(!0),disabled:!a},{type:"button",icon:Zd,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:()=>y(!1),disabled:!a}]},{type:"dropdown-button",main:{type:"button",onClick:()=>k(!0),icon:Nu,text:"Copy",title:"Copy selected contents, formatted with indentation (Ctrl+C)",disabled:!a},width:"12em",items:[{type:"button",icon:Nu,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:()=>k(!1),disabled:!a},{type:"button",icon:Nu,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:()=>k(!1),disabled:!a}]},{type:"button",onClick:()=>S(),icon:gF,text:"Paste",title:"Paste clipboard contents (Ctrl+V)",disabled:!o},{type:"button",onClick:()=>E(),icon:fC,text:"Remove",title:"Remove selected contents (Delete)",disabled:!a}]},{type:"column",items:[{type:"label",text:"Table row:"},{type:"button",onClick:()=>w(),icon:$d,text:"Edit row",title:"Edit the current row",disabled:!a},{type:"button",onClick:()=>M(),icon:_F,text:"Duplicate row",title:"Duplicate the current row",disabled:!o},{type:"button",onClick:()=>R(),icon:Id,text:"Insert before",title:"Insert a row before the current row",disabled:!o},{type:"button",onClick:()=>O(),icon:Id,text:"Insert after",title:"Insert a row after the current row",disabled:!o},{type:"button",onClick:()=>I(),icon:fC,text:"Remove row",title:"Remove current row",disabled:!o}]}]}]),n.$$.dirty&262208&&t(2,f=v(P))},[m,g,f,d,h,p,v,b,w,_,y,k,S,E,M,R,O,I,P,o,a,u,c,l,r,s,i]}class l2e extends ye{constructor(e){super(),be(this,e,a2e,s2e,Rt,{json:3,documentState:4,parser:5,showTip:0,onCloseContextMenu:1,onRenderContextMenu:6,onEditValue:7,onEditRow:8,onToggleEnforceString:9,onCut:10,onCopy:11,onPaste:12,onRemove:13,onDuplicateRow:14,onInsertBeforeRow:15,onInsertAfterRow:16,onRemoveRow:17})}}const u2e=l2e;function NR(n,e,t){const r=n.slice();r[14]=e[t];const i=r[8](r[14]);return r[15]=i,r}function c2e(n){let e,t;return{c(){e=Se(n[6]),t=Se(" cannot be opened in table mode.")},m(r,i){H(r,e,i),H(r,t,i)},p(r,i){i&64&&ze(e,r[6])},d(r){r&&j(e),r&&j(t)}}}function f2e(n){let e;return{c(){e=Se(`An object cannot be opened in table mode. You can open a nested array instead, or open the
        document in tree mode.`)},m(t,r){H(t,e,r)},p:pe,d(t){t&&j(e)}}}function d2e(n){let e;return{c(){e=Se("You can open the document in tree mode instead.")},m(t,r){H(t,e,r)},d(t){t&&j(e)}}}function h2e(n){let e,t,r;return{c(){e=Se("You can open the document in tree mode instead, or paste a JSON Array using "),t=B("b"),t.textContent="Ctrl+V",r=Se(".")},m(i,o){H(i,e,o),H(i,t,o),H(i,r,o)},d(i){i&&j(e),i&&j(t),i&&j(r)}}}function BR(n){let e,t,r,i=lo(n[14])+"",o,s,a,l,u=n[15]+"",c,f,d=n[15]!==1?"items":"item",h,p,m,g;function v(){return n[12](n[14])}return{c(){e=B("button"),t=Se(n[7]),r=Se(' "'),o=Se(i),s=Se(`"
        `),a=B("span"),l=Se("("),c=Se(u),f=K(),h=Se(d),p=Se(")"),C(a,"class","jse-nested-array-count svelte-qo0d0q"),C(e,"type","button"),C(e,"class","jse-nested-array-action svelte-qo0d0q")},m(b,w){H(b,e,w),T(e,t),T(e,r),T(e,o),T(e,s),T(e,a),T(a,l),T(a,c),T(a,f),T(a,h),T(a,p),m||(g=le(e,"click",v),m=!0)},p(b,w){n=b,w&128&&ze(t,n[7]),w&8&&i!==(i=lo(n[14])+"")&&ze(o,i),w&8&&u!==(u=n[15]+"")&&ze(c,u),w&8&&d!==(d=n[15]!==1?"items":"item")&&ze(h,d)},d(b){b&&j(e),m=!1,g()}}}function p2e(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b;function w(O,I){return O[5]?f2e:c2e}let _=w(n),y=_(n);function k(O,I){return O[4]&&!O[0]?h2e:d2e}let S=k(n),E=S(n),M=n[3],R=[];for(let O=0;O<M.length;O+=1)R[O]=BR(NR(n,M,O));return{c(){e=B("div"),t=B("div"),r=K(),i=B("div"),o=B("div"),s=Se(n[6]),a=K(),l=B("div"),y.c(),u=K(),E.c(),c=K();for(let O=0;O<R.length;O+=1)R[O].c();f=K(),d=B("button"),h=Se(n[7]),p=Se(" in tree mode"),m=K(),g=B("div"),C(t,"class","jse-space jse-before svelte-qo0d0q"),C(o,"class","jse-nested-arrays-title"),C(l,"class","jse-nested-arrays-info svelte-qo0d0q"),C(d,"type","button"),C(d,"class","jse-nested-array-action svelte-qo0d0q"),C(i,"class","jse-nested-arrays svelte-qo0d0q"),C(g,"class","jse-space jse-after svelte-qo0d0q"),C(e,"class","jse-table-mode-welcome svelte-qo0d0q")},m(O,I){H(O,e,I),T(e,t),T(e,r),T(e,i),T(i,o),T(o,s),T(i,a),T(i,l),y.m(l,null),T(l,u),E.m(l,null),T(i,c);for(let P=0;P<R.length;P+=1)R[P]&&R[P].m(i,null);T(i,f),T(i,d),T(d,h),T(d,p),T(e,m),T(e,g),v||(b=le(d,"click",n[13]),v=!0)},p(O,[I]){if(I&64&&ze(s,O[6]),_===(_=w(O))&&y?y.p(O,I):(y.d(1),y=_(O),y&&(y.c(),y.m(l,u))),S!==(S=k(O))&&(E.d(1),E=S(O),E&&(E.c(),E.m(l,null))),I&394){M=O[3];let P;for(P=0;P<M.length;P+=1){const A=NR(O,M,P);R[P]?R[P].p(A,I):(R[P]=BR(A),R[P].c(),R[P].m(i,f))}for(;P<R.length;P+=1)R[P].d(1);R.length=M.length}I&128&&ze(h,O[7])},i:pe,o:pe,d(O){O&&j(e),y.d(),E.d(),rn(R,O),v=!1,b()}}}function m2e(n,e,t){let r,i,o,s,{text:a}=e,{json:l}=e,{readOnly:u}=e,{parser:c}=e,{openJSONEditorModal:f}=e,{onChangeMode:d}=e,h;function p(v){return ot(l,v).length}const m=v=>f(v),g=()=>d(hi.tree);return n.$$set=v=>{"text"in v&&t(9,a=v.text),"json"in v&&t(10,l=v.json),"readOnly"in v&&t(0,u=v.readOnly),"parser"in v&&t(11,c=v.parser),"openJSONEditorModal"in v&&t(1,f=v.openJSONEditorModal),"onChangeMode"in v&&t(2,d=v.onChangeMode)},n.$$.update=()=>{n.$$.dirty&1&&t(7,r=u?"View":"Edit"),n.$$.dirty&1024&&t(3,h=l?Phe(l).slice(0,99).filter(v=>v.length>0):[]),n.$$.dirty&8&&t(5,i=!$t(h)),n.$$.dirty&1536&&t(4,o=l===void 0&&(a===""||a===void 0)),n.$$.dirty&3120&&t(6,s=i?"Object with nested arrays":o?"An empty document":nr(l)?"An object":Sn(l)?"An empty array":`A ${wx(l,c)}`)},[u,f,d,h,o,i,s,r,p,a,l,c,m,g]}class g2e extends ye{constructor(e){super(),be(this,e,m2e,p2e,Rt,{text:9,json:10,readOnly:0,parser:11,openJSONEditorModal:1,onChangeMode:2})}}const v2e=g2e;function b2e(n){let e,t,r,i,o,s;return t=new Jt({props:{data:kle}}),{c(){e=B("button"),$(t.$$.fragment),C(e,"type","button"),C(e,"class","jse-column-header svelte-nhkcsd"),C(e,"title",r=`The Columns are created by sampling ${n[1]} items out of ${n[0]}. If you're missing a column, click here to sample all of the items instead of a subset. This is slower.`)},m(a,l){H(a,e,l),Q(t,e,null),i=!0,o||(s=le(e,"click",n[3]),o=!0)},p(a,[l]){(!i||l&3&&r!==(r=`The Columns are created by sampling ${a[1]} items out of ${a[0]}. If you're missing a column, click here to sample all of the items instead of a subset. This is slower.`))&&C(e,"title",r)},i(a){i||(x(t.$$.fragment,a),i=!0)},o(a){D(t.$$.fragment,a),i=!1},d(a){a&&j(e),Z(t),o=!1,s()}}}function y2e(n,e,t){let{count:r}=e,{maxSampleCount:i}=e,{onRefresh:o}=e;const s=()=>o();return n.$$set=a=>{"count"in a&&t(0,r=a.count),"maxSampleCount"in a&&t(1,i=a.maxSampleCount),"onRefresh"in a&&t(2,o=a.onRefresh)},[r,i,o,s]}class _2e extends ye{constructor(e){super(),be(this,e,y2e,b2e,Rt,{count:0,maxSampleCount:1,onRefresh:2})}}const w2e=_2e;function LR(n,e,t){var a;const r=n.slice();r[123]=e[t],r[128]=t;const i=r[23].startIndex+r[128];r[124]=i;const o=r[22].rows[r[124]];r[125]=o;const s=t6([String(r[124])],(a=r[125])==null?void 0:a.row);return r[126]=s,r}function FR(n,e,t){var u;const r=n.slice();r[129]=e[t],r[135]=t;const i=[String(r[124])].concat(r[129]);r[130]=i;const o=ot(r[123],r[129]);r[131]=o;const s=Qt(r[11].selection)&&Gu(r[11].selection.path,r[130]);r[132]=s;const a=(u=r[125])==null?void 0:u.columns[r[135]];r[133]=a;const l=t6(r[130],r[133]);return r[126]=l,r}function zR(n,e,t){const r=n.slice();return r[129]=e[t],r}function kk(n){var r;const e=n.slice(),t=t6([],(r=e[22])==null?void 0:r.root);return e[126]=t,e}function jR(n){let e,t;return e=new qye({props:{json:n[8],readOnly:n[0],historyState:n[20],onSort:n[41],onTransform:n[42],onUndo:n[43],onRedo:n[44],onContextMenu:n[33],onRenderMenu:n[5]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&256&&(o.json=r[8]),i[0]&1&&(o.readOnly=r[0]),i[0]&1048576&&(o.historyState=r[20]),i[0]&32&&(o.onRenderMenu=r[5]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function k2e(n){let e;return{c(){e=B("div"),e.innerHTML=`<div class="jse-loading-space svelte-df6l8"></div> 
      <div class="jse-loading svelte-df6l8">loading...</div>`,C(e,"class","jse-contents jse-contents-loading svelte-df6l8")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}function C2e(n){let e,t,r,i,o,s,a,l,u;const c=[E2e,x2e,S2e],f=[];function d(h,p){return h[25]?0:h[17]&&h[16]!==void 0&&h[16]!==""?1:2}return i=d(n),o=f[i]=c[i](n),{c(){e=B("label"),t=B("input"),r=K(),o.c(),s=Ze(),C(t,"type","text"),t.readOnly=!0,C(t,"tabindex","-1"),C(t,"class","jse-hidden-input svelte-df6l8"),C(e,"class","jse-hidden-input-label svelte-df6l8")},m(h,p){H(h,e,p),T(e,t),n[73](t),H(h,r,p),f[i].m(h,p),H(h,s,p),a=!0,l||(u=le(t,"paste",n[38]),l=!0)},p(h,p){let m=i;i=d(h),i===m?f[i].p(h,p):(de(),D(f[m],1,1,()=>{f[m]=null}),he(),o=f[i],o?o.p(h,p):(o=f[i]=c[i](h),o.c()),x(o,1),o.m(s.parentNode,s))},i(h){a||(x(o),a=!0)},o(h){D(o),a=!1},d(h){h&&j(e),n[73](null),h&&j(r),f[i].d(h),h&&j(s),l=!1,u()}}}function S2e(n){let e,t;return e=new v2e({props:{text:n[16],json:n[8],readOnly:n[0],parser:n[2],openJSONEditorModal:n[40],onChangeMode:n[4]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&65536&&(o.text=r[16]),i[0]&256&&(o.json=r[8]),i[0]&1&&(o.readOnly=r[0]),i[0]&4&&(o.parser=r[2]),i[0]&16&&(o.onChangeMode=r[4]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function x2e(n){let e,t,r,i;return e=new Zs({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:Ku,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:n[36]}]}}),r=new YF({props:{text:n[16],json:n[8],indentation:n[3],parser:n[2]}}),{c(){$(e.$$.fragment),t=K(),$(r.$$.fragment)},m(o,s){Q(e,o,s),H(o,t,s),Q(r,o,s),i=!0},p(o,s){const a={};s[0]&1&&(a.actions=o[0]?[]:[{icon:Ku,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:o[36]}]),e.$set(a);const l={};s[0]&65536&&(l.text=o[16]),s[0]&256&&(l.json=o[8]),s[0]&8&&(l.indentation=o[3]),s[0]&4&&(l.parser=o[2]),r.$set(l)},i(o){i||(x(e.$$.fragment,o),x(r.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),D(r.$$.fragment,o),i=!1},d(o){Z(e,o),o&&j(t),Z(r,o)}}}function E2e(n){var L;let e,t,r,i,o,s=!$t((L=n[22])==null?void 0:L.root),a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S,E,M=s&&HR(kk(n)),R=n[10],O=[];for(let z=0;z<R.length;z+=1)O[z]=WR(zR(n,R,z));const I=z=>D(O[z],1,1,()=>{O[z]=null});let P=n[24]&&qR(n),A=n[23].visibleItems,N=[];for(let z=0;z<A.length;z+=1)N[z]=QR(LR(n,A,z));const F=z=>D(N[z],1,1,()=>{N[z]=null});let V=n[18]&&ZR(n),W=n[19]&&$R(n);return y=new Kx({props:{validationErrors:n[12],selectError:n[39]}}),{c(){e=B("div"),t=B("table"),r=B("tbody"),i=B("tr"),o=B("th"),M&&M.c(),a=K();for(let z=0;z<O.length;z+=1)O[z].c();l=K(),P&&P.c(),u=K(),c=B("tr"),f=B("td"),h=K();for(let z=0;z<N.length;z+=1)N[z].c();p=K(),m=B("tr"),g=B("td"),b=K(),V&&V.c(),w=K(),W&&W.c(),_=K(),$(y.$$.fragment),C(o,"class","jse-table-cell jse-table-cell-header svelte-df6l8"),C(i,"class","jse-table-row jse-table-row-header svelte-df6l8"),C(f,"colspan",d=n[10].length),C(f,"class","svelte-df6l8"),sr(f,"height",n[23].startHeight+"px"),C(c,"class","jse-table-invisible-start-section"),C(g,"colspan",v=n[10].length),C(g,"class","svelte-df6l8"),sr(g,"height",n[23].endHeight+"px"),C(m,"class","jse-table-invisible-end-section"),C(t,"class","jse-table-main svelte-df6l8"),C(e,"class","jse-contents svelte-df6l8")},m(z,q){H(z,e,q),T(e,t),T(t,r),T(r,i),T(i,o),M&&M.m(o,null),T(i,a);for(let te=0;te<O.length;te+=1)O[te]&&O[te].m(i,null);T(i,l),P&&P.m(i,null),T(r,u),T(r,c),T(c,f),T(r,h);for(let te=0;te<N.length;te+=1)N[te]&&N[te].m(r,null);T(r,p),T(r,m),T(m,g),n[76](e),H(z,b,q),V&&V.m(z,q),H(z,w,q),W&&W.m(z,q),H(z,_,q),Q(y,z,q),k=!0,S||(E=[Mn(rV.call(null,e,n[45])),le(e,"scroll",n[29])],S=!0)},p(z,q){var re;if(q[0]&4194304&&(s=!$t((re=z[22])==null?void 0:re.root)),s?M?(M.p(kk(z),q),q[0]&4194304&&x(M,1)):(M=HR(kk(z)),M.c(),x(M,1),M.m(o,null)):M&&(de(),D(M,1,1,()=>{M=null}),he()),q[0]&268438529){R=z[10];let ne;for(ne=0;ne<R.length;ne+=1){const fe=zR(z,R,ne);O[ne]?(O[ne].p(fe,q),x(O[ne],1)):(O[ne]=WR(fe),O[ne].c(),x(O[ne],1),O[ne].m(i,l))}for(de(),ne=R.length;ne<O.length;ne+=1)I(ne);he()}if(z[24]?P?(P.p(z,q),q[0]&16777216&&x(P,1)):(P=qR(z),P.c(),x(P,1),P.m(i,null)):P&&(de(),D(P,1,1,()=>{P=null}),he()),(!k||q[0]&1024&&d!==(d=z[10].length))&&C(f,"colspan",d),q[0]&8388608&&sr(f,"height",z[23].startHeight+"px"),q[0]&165678085|q[1]&33281){A=z[23].visibleItems;let ne;for(ne=0;ne<A.length;ne+=1){const fe=LR(z,A,ne);N[ne]?(N[ne].p(fe,q),x(N[ne],1)):(N[ne]=QR(fe),N[ne].c(),x(N[ne],1),N[ne].m(r,p))}for(de(),ne=A.length;ne<N.length;ne+=1)F(ne);he()}(!k||q[0]&1024&&v!==(v=z[10].length))&&C(g,"colspan",v),q[0]&8388608&&sr(g,"height",z[23].endHeight+"px"),z[18]?V?(V.p(z,q),q[0]&262144&&x(V,1)):(V=ZR(z),V.c(),x(V,1),V.m(w.parentNode,w)):V&&(de(),D(V,1,1,()=>{V=null}),he()),z[19]?W?(W.p(z,q),q[0]&524288&&x(W,1)):(W=$R(z),W.c(),x(W,1),W.m(_.parentNode,_)):W&&(de(),D(W,1,1,()=>{W=null}),he());const te={};q[0]&4096&&(te.validationErrors=z[12]),y.$set(te)},i(z){if(!k){x(M);for(let q=0;q<R.length;q+=1)x(O[q]);x(P);for(let q=0;q<A.length;q+=1)x(N[q]);x(V),x(W),x(y.$$.fragment,z),k=!0}},o(z){D(M),O=O.filter(Boolean);for(let q=0;q<O.length;q+=1)D(O[q]);D(P),N=N.filter(Boolean);for(let q=0;q<N.length;q+=1)D(N[q]);D(V),D(W),D(y.$$.fragment,z),k=!1},d(z){z&&j(e),M&&M.d(),rn(O,z),P&&P.d(),rn(N,z),n[76](null),z&&j(b),V&&V.d(z),z&&j(w),W&&W.d(z),z&&j(_),Z(y,z),S=!1,It(E)}}}function HR(n){let e,t,r=n[126]&&VR(n);return{c(){r&&r.c(),e=Ze()},m(i,o){r&&r.m(i,o),H(i,e,o),t=!0},p(i,o){i[126]?r?(r.p(i,o),o[0]&4194304&&x(r,1)):(r=VR(i),r.c(),x(r,1),r.m(e.parentNode,e)):r&&(de(),D(r,1,1,()=>{r=null}),he())},i(i){t||(x(r),t=!0)},o(i){D(r),t=!1},d(i){r&&r.d(i),i&&j(e)}}}function VR(n){let e,t,r;return t=new fp({props:{validationError:n[126],onExpand:Lo}}),{c(){e=B("div"),$(t.$$.fragment),C(e,"class","jse-table-root-error svelte-df6l8")},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&4194304&&(s.validationError=i[126]),t.$set(s)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function WR(n){let e,t,r;return t=new o2e({props:{path:n[129],sortedColumn:n[11].sortedColumn,readOnly:n[0],onSort:n[28]}}),{c(){e=B("th"),$(t.$$.fragment),C(e,"class","jse-table-cell jse-table-cell-header svelte-df6l8")},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&1024&&(s.path=i[129]),o[0]&2048&&(s.sortedColumn=i[11].sortedColumn),o[0]&1&&(s.readOnly=i[0]),t.$set(s)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function qR(n){let e,t,r;return t=new w2e({props:{count:Array.isArray(n[8])?n[8].length:0,maxSampleCount:n[9],onRefresh:n[74]}}),{c(){e=B("th"),$(t.$$.fragment),C(e,"class","jse-table-cell jse-table-cell-header svelte-df6l8")},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.count=Array.isArray(i[8])?i[8].length:0),o[0]&512&&(s.maxSampleCount=i[9]),o[0]&512&&(s.onRefresh=i[74]),t.$set(s)},i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function UR(n){let e,t;return e=new fp({props:{validationError:n[126],onExpand:Lo}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&12582912&&(o.validationError=r[126]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function GR(n){let e,t=n[124]+"",r,i,o,s,a,l,u=n[126]&&UR(n);function c(...f){return n[75](n[124],...f)}return{c(){e=B("th"),r=Se(t),i=K(),u&&u.c(),C(e,"class","jse-table-cell jse-table-cell-gutter svelte-df6l8")},m(f,d){H(f,e,d),T(e,r),T(e,i),u&&u.m(e,null),s=!0,a||(l=Mn(o=rV.call(null,e,c)),a=!0)},p(f,d){n=f,(!s||d[0]&8388608)&&t!==(t=n[124]+"")&&ze(r,t),n[126]?u?(u.p(n,d),d[0]&12582912&&x(u,1)):(u=UR(n),u.c(),x(u,1),u.m(e,null)):u&&(de(),D(u,1,1,()=>{u=null}),he()),o&&dr(o.update)&&d[0]&8388608&&o.update.call(null,c)},i(f){s||(x(u),s=!0)},o(f){D(u),s=!1},d(f){f&&j(e),u&&u.d(),a=!1,l()}}}function A2e(n){let e,t;return e=new Qye({props:{path:n[130],value:n[131]!==void 0?n[131]:"",enforceString:Bl(n[131],n[11].enforceStringMap,Ke(n[130]),n[21].parser),selection:n[132]?n[11].selection:null,searchResultItems:n[27],context:n[21]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&8389632&&(o.path=r[130]),i[0]&8389632&&(o.value=r[131]!==void 0?r[131]:""),i[0]&10488832&&(o.enforceString=Bl(r[131],r[11].enforceStringMap,Ke(r[130]),r[21].parser)),i[0]&8391680&&(o.selection=r[132]?r[11].selection:null),i[0]&2097152&&(o.context=r[21]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function M2e(n){let e,t;return e=new t2e({props:{path:n[130],value:n[131],parser:n[2],isSelected:n[132],onEdit:n[40]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&8389632&&(o.path=r[130]),i[0]&8389632&&(o.value=r[131]),i[0]&4&&(o.parser=r[2]),i[0]&8391680&&(o.isSelected=r[132]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function KR(n){let e,t,r,i;return t=new dc({props:{selected:!0,onContextMenu:n[31]}}),{c(){e=B("div"),$(t.$$.fragment),r=K(),C(e,"class","jse-context-menu-anchor svelte-df6l8")},m(o,s){H(o,e,s),Q(t,e,null),H(o,r,s),i=!0},p:pe,i(o){i||(x(t.$$.fragment,o),i=!0)},o(o){D(t.$$.fragment,o),i=!1},d(o){o&&j(e),Z(t),o&&j(r)}}}function JR(n){let e,t;return e=new fp({props:{validationError:n[126],onExpand:Lo}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&12583936&&(o.validationError=r[126]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function YR(n){let e,t,r,i,o,s=!n[0]&&n[132]&&!Pi(n[11].selection),a,l,u;const c=[M2e,A2e],f=[];function d(m,g){return g[0]&8389632&&(t=null),t==null&&(t=!!er(m[131])),t?0:1}r=d(n,[-1,-1,-1,-1,-1]),i=f[r]=c[r](n);let h=s&&KR(n),p=n[126]&&JR(n);return{c(){e=B("td"),i.c(),o=Ze(),h&&h.c(),a=Ze(),p&&p.c(),C(e,"class","jse-table-cell svelte-df6l8"),C(e,"data-path",l=Ch(n[130])),oe(e,"jse-selected-value",n[132])},m(m,g){H(m,e,g),f[r].m(e,null),T(e,o),h&&h.m(e,null),T(e,a),p&&p.m(e,null),u=!0},p(m,g){let v=r;r=d(m,g),r===v?f[r].p(m,g):(de(),D(f[v],1,1,()=>{f[v]=null}),he(),i=f[r],i?i.p(m,g):(i=f[r]=c[r](m),i.c()),x(i,1),i.m(e,o)),g[0]&8391681&&(s=!m[0]&&m[132]&&!Pi(m[11].selection)),s?h?(h.p(m,g),g[0]&8391681&&x(h,1)):(h=KR(m),h.c(),x(h,1),h.m(e,a)):h&&(de(),D(h,1,1,()=>{h=null}),he()),m[126]?p?(p.p(m,g),g[0]&12583936&&x(p,1)):(p=JR(m),p.c(),x(p,1),p.m(e,null)):p&&(de(),D(p,1,1,()=>{p=null}),he()),(!u||g[0]&8389632&&l!==(l=Ch(m[130])))&&C(e,"data-path",l),(!u||g[0]&8391680)&&oe(e,"jse-selected-value",m[132])},i(m){u||(x(i),x(h),x(p),u=!0)},o(m){D(i),D(h),D(p),u=!1},d(m){m&&j(e),f[r].d(),h&&h.d(),p&&p.d()}}}function XR(n){let e;return{c(){e=B("td"),C(e,"class","jse-table-cell svelte-df6l8")},m(t,r){H(t,e,r)},d(t){t&&j(e)}}}function QR(n){let e,t=n[124],r,i,o,s=GR(n),a=n[10],l=[];for(let f=0;f<a.length;f+=1)l[f]=YR(FR(n,a,f));const u=f=>D(l[f],1,1,()=>{l[f]=null});let c=n[24]&&XR();return{c(){e=B("tr"),s.c(),r=K();for(let f=0;f<l.length;f+=1)l[f].c();i=K(),c&&c.c(),C(e,"class","jse-table-row svelte-df6l8")},m(f,d){H(f,e,d),s.m(e,null),T(e,r);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(e,null);T(e,i),c&&c.m(e,null),o=!0},p(f,d){if(d[0]&8388608&&Rt(t,t=f[124])?(de(),D(s,1,1,pe),he(),s=GR(f),s.c(),x(s,1),s.m(e,r)):s.p(f,d),d[0]&148900869|d[1]&513){a=f[10];let h;for(h=0;h<a.length;h+=1){const p=FR(f,a,h);l[h]?(l[h].p(p,d),x(l[h],1)):(l[h]=YR(p),l[h].c(),x(l[h],1),l[h].m(e,i))}for(de(),h=a.length;h<l.length;h+=1)u(h);he()}f[24]?c||(c=XR(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){if(!o){x(s);for(let d=0;d<a.length;d+=1)x(l[d]);o=!0}},o(f){D(s),l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)D(l[d]);o=!1},d(f){f&&j(e),s.d(f),rn(l,f),c&&c.d()}}}function ZR(n){let e,t;return e=new Zs({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[18].contents)?"array":"object"} as text`,actions:[{icon:s_,text:"Paste as JSON instead",title:"Paste the text as JSON instead of a single value",onMouseDown:n[34]},{text:"Leave as is",title:"Keep the pasted content as a single value",onClick:n[35]}]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&262144&&(o.message=`You pasted a JSON ${Array.isArray(r[18].contents)?"array":"object"} as text`),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function $R(n){let e,t;return e=new Zs({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:fm,text:"Ok",title:"Accept the repaired document",onClick:n[7]},{icon:Ku,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:n[36]}],onClose:n[6]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&1&&(o.actions=r[0]?[]:[{icon:fm,text:"Ok",title:"Accept the repaired document",onClick:r[7]},{icon:Ku,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:r[36]}]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function T2e(n){let e,t,r,i,o,s,a,l=n[1]&&jR(n);const u=[C2e,k2e],c=[];function f(d,h){return d[26]?1:0}return r=f(n),i=c[r]=u[r](n),{c(){e=B("div"),l&&l.c(),t=K(),i.c(),C(e,"role","table"),C(e,"class","jse-table-mode svelte-df6l8"),oe(e,"no-main-menu",!n[1])},m(d,h){H(d,e,h),l&&l.m(e,null),T(e,t),c[r].m(e,null),n[77](e),o=!0,s||(a=[le(e,"mousedown",n[30]),le(e,"keydown",n[37]),le(e,"contextmenu",n[32])],s=!0)},p(d,h){d[1]?l?(l.p(d,h),h[0]&2&&x(l,1)):(l=jR(d),l.c(),x(l,1),l.m(e,t)):l&&(de(),D(l,1,1,()=>{l=null}),he()),i.p(d,h),(!o||h[0]&2)&&oe(e,"no-main-menu",!d[1])},i(d){o||(x(l),x(i),o=!0)},o(d){D(l),D(i),o=!1},d(d){d&&j(e),l&&l.d(),c[r].d(),n[77](null),s=!1,It(a)}}}let fd=18;function O2e(n,e,t){let r,i,o,s;const a=oi("jsoneditor:TableMode"),{open:l}=pr("simple-modal"),{openAbsolutePopup:u,closeAbsolutePopup:c}=pr("absolute-popup"),f=DF(),d=_h(),h=_h(),p=typeof window>"u";a("isSSR:",p);let{readOnly:m}=e,{externalContent:g}=e,{externalSelection:v}=e,{mainMenuBar:b}=e,{escapeControlCharacters:w}=e,{escapeUnicodeCharacters:_}=e,{flattenColumns:y}=e,{parser:k}=e,{parseMemoizeOne:S}=e,{validator:E}=e,{validationParser:M}=e,{indentation:R}=e,{onChange:O}=e,{onChangeMode:I}=e,{onSelect:P}=e,{onRenderValue:A}=e,{onRenderMenu:N}=e,{onRenderContextMenu:F}=e,{onFocus:V}=e,{onBlur:W}=e,{onSortModal:L}=e,{onTransformModal:z}=e,{onJSONEditorModal:q}=e,te,re,ne,fe;Gx({onMount:Tn,onDestroy:Kr,getWindow:()=>lp(re),hasFocus:()=>U&&document.hasFocus()||Ix(re),onFocus:()=>{Ce=!0,V&&V()},onBlur:()=>{Ce=!1,W&&W()}});let ie,G,ae,Me,X=1e4,ge=[],U=!1,Ce=!1,Ee={},Ae=600,De=0;function nt(ee){ne&&ne.scrollTo({top:ne.scrollTop,left:ne.scrollLeft})}function ue(){_e.sortedColumn&&t(11,_e={..._e,sortedColumn:null})}function Oe(ee){a("updateSelection",ee);const Pe=typeof ee=="function"?ee(_e.selection)||null:ee;Wt(Pe,_e.selection)||(t(11,_e={..._e,selection:Pe}),P(Pe))}function Ue(ee){!_e.selection||ee===void 0||Zo(ee,mf(_e.selection))&&Zo(ee,pt(_e.selection))||(a("clearing selection: path does not exist anymore",_e.selection),t(11,_e={..._e,selection:null}))}let _e=Rb(),it=!1;const At=void 0;function Ve(ee){if(m)return;a("onSortByHeader",ee);const Pe=[],et=ee.sortDirection===Qo.desc?-1:1,Y=jF(ie,Pe,ee.path,et);$e(Y,(Ie,Et)=>({state:{...Et,sortedColumn:ee}}))}const ct=RF({onChange:ee=>{t(20,Pt=ee)}});let Pt=ct.getState(),yt;function mn(ee){const Pe={json:ie},et=kh(ee)?ee.text!==G:!Wt(Pe.json,ee.json);if(a("update external content",{isChanged:et}),!et)return;const Y={json:ie,text:G},Ie=ie,Et=_e,vn=G,zn=it;if(kh(ee))try{t(8,ie=S(ee.text)),t(16,G=ee.text),t(19,it=!1),t(17,ae=void 0)}catch(bn){try{t(8,ie=S(Aa(ee.text))),t(16,G=ee.text),t(19,it=!0),t(17,ae=void 0)}catch{t(8,ie=void 0),t(16,G=ee.text),t(19,it=!1),t(17,ae=G!==""?wh(G,bn.message||String(bn)):void 0)}}else t(8,ie=ee.json),t(16,G=void 0),t(19,it=!1),t(17,ae=void 0);Ue(ie),ue(),Dn({previousJson:Ie,previousState:Et,previousText:vn,previousTextIsRepaired:zn}),me(Y,null)}function En(ee){Wt(_e.selection,ee)||(a("applyExternalSelection",ee),(Lx(ee)||ee===null)&&Oe(ee))}function Dn({previousJson:ee,previousState:Pe,previousText:et,previousTextIsRepaired:Y}){ee===void 0&&et===void 0||(ie!==void 0?ee!==void 0?ct.add({undo:{patch:[{op:"replace",path:"",value:ee}],state:Si(Pe),json:void 0,text:et,textIsRepaired:Y},redo:{patch:[{op:"replace",path:"",value:ie}],state:Si(_e),json:void 0,text:G,textIsRepaired:it}}):ct.add({undo:{patch:void 0,json:void 0,text:et,state:Si(Pe),textIsRepaired:Y},redo:{patch:void 0,json:ie,state:Si(_e),text:G,textIsRepaired:it}}):ee!==void 0&&ct.add({undo:{patch:void 0,json:ee,state:Si(Pe),text:et,textIsRepaired:Y},redo:{patch:void 0,json:void 0,text:G,textIsRepaired:it,state:Si(_e)}}))}let Fn=[];const we=Ag(PF);function bt(ee,Pe,et,Y){Nd(()=>{let Ie;try{Ie=we(ee,Pe,et,Y)}catch(Et){Ie=[{path:[],message:"Failed to validate: "+Et.message,severity:Pl.warning}]}Wt(Ie,Fn)||(a("validationErrors changed:",Ie),t(12,Fn=Ie))},Ie=>a(`validationErrors updated in ${Ie} ms`))}function ve(){return a("validate"),ae?{parseError:ae,isRepairable:!1}:(bt(ie,E,k,M),$t(Fn)?null:{validationErrors:Fn})}function Ge(ee,Pe){if(a("patch",ee,Pe),ie===void 0)throw new Error("Cannot apply patch: no JSON");const et={json:ie},Y=ie,Ie=_e,Et=it,vn=hF(ie,ee),Yt=$L(ie,_e,ee).json,bn=Dhe(_e,ee,ge),al=typeof Pe=="function"?Pe(Yt,bn):void 0;t(8,ie=al&&al.json!==void 0?al.json:Yt);const n1=al&&al.state!==void 0?al.state:bn;t(11,_e=n1),t(16,G=void 0),t(19,it=!1),t(18,Me=void 0),t(17,ae=void 0),ct.add({undo:{patch:vn,json:void 0,text:void 0,state:Si(Ie),textIsRepaired:Et},redo:{patch:ee,json:void 0,state:Si(n1),text:void 0,textIsRepaired:it}});const r1={json:ie,previousJson:Y,undo:vn,redo:ee};return me(et,r1),r1}function $e(ee,Pe){return m?{json:ie,previousJson:ie,redo:[],undo:[]}:Ge(ee,Pe)}function me(ee,Pe){ee.json===void 0&&(ee==null?void 0:ee.text)===void 0||O&&(G!==void 0?O({text:G,json:void 0},ee,{contentErrors:ve(),patchResult:Pe}):ie!==void 0&&O({text:void 0,json:ie},ee,{contentErrors:ve(),patchResult:Pe}))}function ft(ee){a("handleFind",ee)}function Gt(ee){a("pasted json as text",ee),t(18,Me=ee)}function mt(ee){const Pe=parseInt(ee[0],10),et=[String(Pe+1),...ee.slice(1)];return Zo(ie,et)?Bt(et,!1):Bt(ee,!1)}function wt(){a("focus"),fe&&(fe.focus(),fe.select())}function Yr(ee){t(72,De=ee.target.scrollTop)}function Dr(ee){const Pe=ee.target,et=GL(Pe);if(et){if(Pi(_e.selection)&&cm(ie,_e.selection,et))return;Oe(Bt(et,!1)),ee.preventDefault()}!Rx(Pe,"BUTTON")&&!Pe.isContentEditable&&wt()}function wi(){if(Sn(ie)&&!$t(ie)&&!$t(ge)){const ee=["0",...ge[0]];return Bt(ee,!1)}else return null}function rr(){_e.selection||Oe(wi())}function on(){if(it&&ie!==void 0){const ee=_e,Pe=ie,et=G,Y={json:ie,text:G},Ie=it;t(16,G=void 0),t(19,it=!1),Ue(ie),Dn({previousJson:Pe,previousState:ee,previousText:et,previousTextIsRepaired:Ie}),me(Y,null)}return{json:ie,text:G}}function ln(ee,Pe=!0){const et=Yw(ee,ge,Ee,fd),Y=et-De,Ie=vs(ee);if(a("scrollTo",{path:ee,top:et,scrollTop:De,elem:Ie}),!ne)return Promise.resolve();const Et=ne.getBoundingClientRect();if(Ie&&!Pe){const zn=Ie.getBoundingClientRect();if(zn.bottom>Et.top&&zn.top<Et.bottom)return Promise.resolve()}const vn=-(Et.height/4);return Ie?new Promise(zn=>{f(Ie,{container:ne,offset:vn,duration:j3,callback:()=>{xr(ee),zn()}})}):new Promise(zn=>{f(Y,{container:ne,offset:vn,duration:j3,callback:async()=>{await dn(),Yw(ee,ge,Ee,fd)!==et?await ln(ee,Pe):xr(ee),zn()}})})}function gn(ee){if(!ne)return;const{rowIndex:Pe}=ps(ee,ge),et=Yw(ee,ge,Ee,fd),Y=et+(Ee[Pe]||fd),Ie=fd,Et=ne.getBoundingClientRect(),vn=De,zn=De+Et.height-Ie;if(Y>zn){const Yt=Y-zn;t(14,ne.scrollTop+=Yt,ne)}if(et<vn){const Yt=vn-et;t(14,ne.scrollTop-=Yt,ne)}}function xr(ee){const Pe=vs(ee);if(!Pe||!ne)return;const et=ne.getBoundingClientRect(),Y=Pe.getBoundingClientRect();if(Y.right>et.right){const Ie=Y.right-et.right;t(14,ne.scrollLeft+=Ie,ne)}if(Y.left<et.left){const Ie=et.left-Y.left;t(14,ne.scrollLeft-=Ie,ne)}}function mo(ee){gn(ee),xr(ee)}function vs(ee){return ne?ne.querySelector(`td[data-path="${Ch(ee)}"]`):null}function Do({anchor:ee,left:Pe,top:et,width:Y,height:Ie,offsetTop:Et,offsetLeft:vn,showTip:zn}){const Yt={json:ie,documentState:_e,parser:k,showTip:zn,onEditValue:ai,onEditRow:el,onToggleEnforceString:ys,onCut:Ro,onCopy:nl,onPaste:tl,onRemove:ke,onDuplicateRow:xt,onInsertBeforeRow:en,onInsertAfterRow:pn,onRemoveRow:Rn,onRenderContextMenu:F,onCloseContextMenu(){c(bn),wt()}};U=!0;const bn=u(u2e,Yt,{left:Pe,top:et,offsetTop:Et,offsetLeft:vn,width:Y,height:Ie,anchor:ee,closeOnOuterClick:!0,onClose:()=>{U=!1,wt()}})}function bs(ee){if(!(m||Pi(_e.selection))){if(ee&&(ee.stopPropagation(),ee.preventDefault()),ee&&ee.type==="contextmenu"&&ee.target!==fe)Do({left:ee.clientX,top:ee.clientY,width:yl,height:bl,showTip:!1});else{const Pe=ne==null?void 0:ne.querySelector(".jse-table-cell.jse-selected-value");if(Pe)Do({anchor:Pe,offsetTop:2,width:yl,height:bl,showTip:!1});else{const et=ne==null?void 0:ne.getBoundingClientRect();et&&Do({top:et.top+2,left:et.left+2,width:yl,height:bl,showTip:!1})}}return!1}}function Er(ee){m||Do({anchor:UL(ee.target,"BUTTON"),offsetTop:0,width:yl,height:bl,showTip:!0})}function ai(){if(m||!_e.selection)return;const ee=pt(_e.selection),Pe=ot(ie,ee);er(Pe)?go(ee):Oe(Bt(ee,!0))}function el(){if(m||!_e.selection)return;const Pe=pt(_e.selection).slice(0,1);go(Pe)}function ys(){if(m||!Qt(_e.selection))return;const ee=_e.selection.path,Pe=Ke(ee),et=ot(ie,ee),Y=!Bl(et,_e.enforceStringMap,Pe,k),Ie=Y?String(et):ip(String(et),k);a("handleToggleEnforceString",{enforceString:Y,value:et,updatedValue:Ie}),$e([{op:"replace",path:Pe,value:Ie}],(Et,vn)=>({state:ZL(vn,Pe,Y)}))}async function wc(){if(a("apply pasted json",Me),!Me)return;const{path:ee,contents:Pe}=Me,et=(ne==null?void 0:ne.querySelector(".jse-editable-div"))||null;KL(et)&&et.cancel();const Y=[{op:"replace",path:Ke(ee),value:Pe}];$e(Y),setTimeout(wt)}function tl(){l(IF,{},{...ff,styleWindow:{width:"450px"}},{onClose:()=>wt()})}function vr(){a("clear pasted json"),t(18,Me=void 0),wt()}function Yl(){I(hi.text)}async function Ro(ee){await qF({json:ie,documentState:_e,indentation:ee?R:void 0,readOnly:m,parser:k,onPatch:$e})}async function nl(ee=!0){ie!==void 0&&await UF({json:ie,documentState:_e,indentation:ee?R:void 0,parser:k})}function ke(){KF({json:ie,text:G,documentState:_e,keepSelection:!0,readOnly:m,onChange:O,onPatch:$e})}function xt(){Ihe({json:ie,documentState:_e,columns:ge,readOnly:m,onPatch:$e})}function en(){Nhe({json:ie,documentState:_e,columns:ge,readOnly:m,onPatch:$e})}function pn(){Bhe({json:ie,documentState:_e,columns:ge,readOnly:m,onPatch:$e})}function Rn(){Lhe({json:ie,documentState:_e,columns:ge,readOnly:m,onPatch:$e})}async function lr(ee){await JF({char:ee,selectInside:!1,refJsonEditor:re,json:ie,selection:_e.selection,readOnly:m,parser:k,onPatch:$e,onReplaceJson:il,onSelect:Oe})}function Fi(ee){const Pe=cc(ee);if(a("keydown",{combo:Pe,key:ee.key}),Pe==="Ctrl+X"&&(ee.preventDefault(),Ro(!0)),Pe==="Ctrl+Shift+X"&&(ee.preventDefault(),Ro(!1)),Pe==="Ctrl+C"&&(ee.preventDefault(),nl(!0)),Pe==="Ctrl+Shift+C"&&(ee.preventDefault(),nl(!1)),Pe==="Ctrl+D"&&ee.preventDefault(),(Pe==="Delete"||Pe==="Backspace")&&(ee.preventDefault(),ke()),Pe==="Insert"&&ee.preventDefault(),Pe==="Ctrl+A"&&ee.preventDefault(),Pe==="Ctrl+Q"&&bs(ee),Pe==="ArrowLeft"&&(ee.preventDefault(),rr(),_e.selection)){const Y=Ehe(ge,_e.selection);Oe(Y),mo(pt(Y))}if(Pe==="ArrowRight"&&(ee.preventDefault(),rr(),_e.selection)){const Y=Ahe(ge,_e.selection);Oe(Y),mo(pt(Y))}if(Pe==="ArrowUp"&&(ee.preventDefault(),rr(),_e.selection)){const Y=She(ge,_e.selection);Oe(Y),mo(pt(Y))}if(Pe==="ArrowDown"&&(ee.preventDefault(),rr(),_e.selection)){const Y=xhe(ie,ge,_e.selection);Oe(Y),mo(pt(Y))}if(Pe==="Enter"&&_e.selection&&Qt(_e.selection)){ee.preventDefault();const Y=_e.selection.path,Ie=ot(ie,Y);er(Ie)?go(Y):m||Oe({..._e.selection,edit:!0})}if(Pe.replace(/^Shift\+/,"").length===1&&_e.selection){ee.preventDefault(),lr(ee.key);return}if(Pe==="Ctrl+Enter"&&Qt(_e.selection)){const Y=ot(ie,_e.selection.path);V2(Y)&&window.open(String(Y),"_blank")}Pe==="Escape"&&_e.selection&&(ee.preventDefault(),Oe(null)),Pe==="Ctrl+F"&&ee.preventDefault(),Pe==="Ctrl+H"&&ee.preventDefault(),Pe==="Ctrl+Z"&&(ee.preventDefault(),Rr()),Pe==="Ctrl+Shift+Z"&&(ee.preventDefault(),Ql())}function rl(ee){var et;ee.preventDefault();const Pe=(et=ee.clipboardData)==null?void 0:et.getData("text/plain");Pe!==void 0&&GF({clipboardText:Pe,json:ie,selection:_e.selection,readOnly:m,parser:k,onPatch:$e,onChangeText:ta,openRepairModal:na})}function il(ee,Pe){const et=_e,Y=ie,Ie=G,Et={json:ie,text:G},vn=it,zn=jo(ie,_e,[],va),Yt=typeof Pe=="function"?Pe(ee,zn):void 0;t(8,ie=Yt&&Yt.json!==void 0?Yt.json:ee),t(11,_e=Yt&&Yt.state!==void 0?Yt.state:zn),t(16,G=void 0),t(19,it=!1),t(17,ae=void 0),Ue(ie),Dn({previousJson:Y,previousState:et,previousText:Ie,previousTextIsRepaired:vn}),me(Et,null)}function ta(ee,Pe){a("handleChangeText");const et=_e,Y=ie,Ie=G,Et={json:ie,text:G},vn=it;try{t(8,ie=S(ee)),t(11,_e=jo(ie,_e,[],va)),t(16,G=void 0),t(19,it=!1),t(17,ae=void 0)}catch(Yt){try{t(8,ie=S(Aa(ee))),t(11,_e=jo(ie,_e,[],va)),t(16,G=ee),t(19,it=!0),t(17,ae=void 0)}catch{t(8,ie=void 0),t(11,_e=Rb({json:ie,expand:va})),t(16,G=ee),t(19,it=!1),t(17,ae=G!==""?wh(G,Yt.message||String(Yt)):void 0)}}if(typeof Pe=="function"){const Yt=Pe(ie,_e);t(8,ie=Yt&&Yt.json?Yt.json:ie),t(11,_e=Yt&&Yt.state?Yt.state:_e)}Ue(ie),Dn({previousJson:Y,previousState:et,previousText:Ie,previousTextIsRepaired:vn}),me(Et,null)}function ol(ee){a("select validation error",ee),Oe(Bt(ee.path,!1)),ln(ee.path)}function xp(ee){m||ie===void 0||(U=!0,L({id:d,json:ie,rootPath:ee,onSort:({operations:Pe,itemPath:et,direction:Y})=>{a("onSort",Pe,ee,et,Y),$e(Pe,(Ie,Et)=>({state:{...Et,sortedColumn:{path:et,sortDirection:Y===-1?Qo.desc:Qo.asc}}}))},onClose:()=>{U=!1,wt()}}))}function Yf(ee){if(ie===void 0)return;const{id:Pe,onTransform:et,onClose:Y}=ee,Ie=ee.rootPath||[];U=!0,z({id:Pe||h,json:ie,rootPath:Ie||[],onTransform:Et=>{et?et({operations:Et,json:ie,transformedJson:Ns(ie,Et)}):(a("onTransform",Ie,Et),$e(Et))},onClose:()=>{U=!1,wt(),Y&&Y()}})}function go(ee){a("openJSONEditorModal",{path:ee}),U=!0,q({content:{json:ot(ie,ee)},path:ee,onPatch:yt.onPatch,onClose:()=>{U=!1,wt()}})}function na(ee,Pe){l(LF,{text:ee,onParse:et=>n_(et,Y=>_g(Y,k)),onRepair:BL,onApply:Pe},{...ff,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>wt()})}function Xl(){xp([])}function _s(){Yf({rootPath:[]})}function Rr(){if(m||!ct.getState().canUndo)return;const ee=ct.undo();if(!ee)return;const Pe={json:ie,text:G};t(8,ie=ee.undo.patch?Ns(ie,ee.undo.patch):ee.undo.json),t(11,_e=ee.undo.state),t(16,G=ee.undo.text),t(19,it=ee.undo.textIsRepaired),t(17,ae=void 0),a("undo",{item:ee,json:ie});const et=ee.undo.patch&&ee.redo.patch?{json:ie,previousJson:Pe.json,redo:ee.undo.patch,undo:ee.redo.patch}:null;me(Pe,et),wt(),_e.selection&&ln(pt(_e.selection),!1)}function Ql(){if(m||!ct.getState().canRedo)return;const ee=ct.redo();if(!ee)return;const Pe={json:ie,text:G};t(8,ie=ee.redo.patch?Ns(ie,ee.redo.patch):ee.redo.json),t(11,_e=ee.redo.state),t(16,G=ee.redo.text),t(19,it=ee.redo.textIsRepaired),t(17,ae=void 0),a("redo",{item:ee,json:ie});const et=ee.undo.patch&&ee.redo.patch?{json:ie,previousJson:Pe.json,redo:ee.redo.patch,undo:ee.undo.patch}:null;me(Pe,et),wt(),_e.selection&&ln(pt(_e.selection),!1)}function Ep(ee){t(71,Ae=ee.getBoundingClientRect().height)}function sl(ee,Pe){t(70,Ee[Pe]=ee.getBoundingClientRect().height,Ee)}function Ap(ee){rt[ee?"unshift":"push"](()=>{fe=ee,t(15,fe)})}const Mp=()=>t(9,X=1/0),kc=(ee,Pe)=>sl(Pe,ee);function Tp(ee){rt[ee?"unshift":"push"](()=>{ne=ee,t(14,ne)})}function Op(ee){rt[ee?"unshift":"push"](()=>{re=ee,t(13,re)})}return n.$$set=ee=>{"readOnly"in ee&&t(0,m=ee.readOnly),"externalContent"in ee&&t(47,g=ee.externalContent),"externalSelection"in ee&&t(48,v=ee.externalSelection),"mainMenuBar"in ee&&t(1,b=ee.mainMenuBar),"escapeControlCharacters"in ee&&t(49,w=ee.escapeControlCharacters),"escapeUnicodeCharacters"in ee&&t(50,_=ee.escapeUnicodeCharacters),"flattenColumns"in ee&&t(51,y=ee.flattenColumns),"parser"in ee&&t(2,k=ee.parser),"parseMemoizeOne"in ee&&t(52,S=ee.parseMemoizeOne),"validator"in ee&&t(53,E=ee.validator),"validationParser"in ee&&t(54,M=ee.validationParser),"indentation"in ee&&t(3,R=ee.indentation),"onChange"in ee&&t(55,O=ee.onChange),"onChangeMode"in ee&&t(4,I=ee.onChangeMode),"onSelect"in ee&&t(56,P=ee.onSelect),"onRenderValue"in ee&&t(57,A=ee.onRenderValue),"onRenderMenu"in ee&&t(5,N=ee.onRenderMenu),"onRenderContextMenu"in ee&&t(58,F=ee.onRenderContextMenu),"onFocus"in ee&&t(59,V=ee.onFocus),"onBlur"in ee&&t(60,W=ee.onBlur),"onSortModal"in ee&&t(61,L=ee.onSortModal),"onTransformModal"in ee&&t(62,z=ee.onTransformModal),"onJSONEditorModal"in ee&&t(63,q=ee.onJSONEditorModal)},n.$$.update=()=>{n.$$.dirty[1]&786432&&t(69,te=Dx({escapeControlCharacters:w,escapeUnicodeCharacters:_})),n.$$.dirty[1]&65536&&mn(g),n.$$.dirty[1]&131072&&En(v),n.$$.dirty[0]&1792|n.$$.dirty[1]&1048576&&t(10,ge=Sn(ie)?whe(_he(ie,y,X),ge):[]),n.$$.dirty[0]&1280&&t(25,r=ie&&!$t(ge)),n.$$.dirty[0]&768&&t(24,i=Array.isArray(ie)&&ie.length>X),n.$$.dirty[0]&256|n.$$.dirty[2]&1792&&t(23,o=khe(De,Ae,ie,Ee,fd)),n.$$.dirty[0]&256&&nt(),n.$$.dirty[0]&2309|n.$$.dirty[1]&67108864|n.$$.dirty[2]&128&&t(21,yt={readOnly:m,parser:k,normalization:te,getJson:()=>ie,getDocumentState:()=>_e,findElement:vs,findNextInside:mt,focus:wt,onPatch:$e,onSelect:Oe,onFind:ft,onPasteJson:Gt,onRenderValue:A}),n.$$.dirty[0]&260|n.$$.dirty[1]&12582912&&bt(ie,E,k,M),n.$$.dirty[0]&5120&&t(22,s=Mhe(Fn,ge))},[m,b,k,R,I,N,wt,on,ie,X,ge,_e,Fn,re,ne,fe,G,ae,Me,it,Pt,yt,s,o,i,r,p,At,Ve,Yr,Dr,Do,bs,Er,wc,vr,Yl,Fi,rl,ol,go,Xl,_s,Rr,Ql,Ep,sl,g,v,w,_,y,S,E,M,O,P,A,F,V,W,L,z,q,ve,Ge,ln,vs,Yf,te,Ee,Ae,De,Ap,Mp,kc,Tp,Op]}class D2e extends ye{constructor(e){super(),be(this,e,O2e,T2e,Rt,{readOnly:0,externalContent:47,externalSelection:48,mainMenuBar:1,escapeControlCharacters:49,escapeUnicodeCharacters:50,flattenColumns:51,parser:2,parseMemoizeOne:52,validator:53,validationParser:54,indentation:3,onChange:55,onChangeMode:4,onSelect:56,onRenderValue:57,onRenderMenu:5,onRenderContextMenu:58,onFocus:59,onBlur:60,onSortModal:61,onTransformModal:62,onJSONEditorModal:63,validate:64,patch:65,focus:6,acceptAutoRepair:7,scrollTo:66,findElement:67,openTransformModal:68},null,[-1,-1,-1,-1,-1])}get validate(){return this.$$.ctx[64]}get patch(){return this.$$.ctx[65]}get focus(){return this.$$.ctx[6]}get acceptAutoRepair(){return this.$$.ctx[7]}get scrollTo(){return this.$$.ctx[66]}get findElement(){return this.$$.ctx[67]}get openTransformModal(){return this.$$.ctx[68]}}const R2e=D2e;function P2e(n){let e,t,r={externalContent:n[0],externalSelection:n[1],readOnly:n[2],indentation:n[3],mainMenuBar:n[6],navigationBar:n[7],escapeControlCharacters:n[10],escapeUnicodeCharacters:n[11],parser:n[13],parseMemoizeOne:n[14],validator:n[15],validationParser:n[16],pathParser:n[17],onError:n[23],onChange:n[18],onChangeMode:n[19],onSelect:n[20],onRenderValue:n[21],onClassName:n[22],onFocus:n[24],onBlur:n[25],onRenderMenu:n[32],onRenderContextMenu:n[33],onSortModal:n[26],onTransformModal:n[27],onJSONEditorModal:n[28]};return e=new n6({props:r}),n[49](e),{c(){$(e.$$.fragment)},m(i,o){Q(e,i,o),t=!0},p(i,o){const s={};o[0]&1&&(s.externalContent=i[0]),o[0]&2&&(s.externalSelection=i[1]),o[0]&4&&(s.readOnly=i[2]),o[0]&8&&(s.indentation=i[3]),o[0]&64&&(s.mainMenuBar=i[6]),o[0]&128&&(s.navigationBar=i[7]),o[0]&1024&&(s.escapeControlCharacters=i[10]),o[0]&2048&&(s.escapeUnicodeCharacters=i[11]),o[0]&8192&&(s.parser=i[13]),o[0]&16384&&(s.parseMemoizeOne=i[14]),o[0]&32768&&(s.validator=i[15]),o[0]&65536&&(s.validationParser=i[16]),o[0]&131072&&(s.pathParser=i[17]),o[0]&8388608&&(s.onError=i[23]),o[0]&262144&&(s.onChange=i[18]),o[0]&524288&&(s.onChangeMode=i[19]),o[0]&1048576&&(s.onSelect=i[20]),o[0]&2097152&&(s.onRenderValue=i[21]),o[0]&4194304&&(s.onClassName=i[22]),o[0]&16777216&&(s.onFocus=i[24]),o[0]&33554432&&(s.onBlur=i[25]),o[1]&2&&(s.onRenderMenu=i[32]),o[1]&4&&(s.onRenderContextMenu=i[33]),o[0]&67108864&&(s.onSortModal=i[26]),o[0]&134217728&&(s.onTransformModal=i[27]),o[0]&268435456&&(s.onJSONEditorModal=i[28]),e.$set(s)},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){D(e.$$.fragment,i),t=!1},d(i){n[49](null),Z(e,i)}}}function I2e(n){let e,t,r={externalContent:n[0],externalSelection:n[1],readOnly:n[2],mainMenuBar:n[6],escapeControlCharacters:n[10],escapeUnicodeCharacters:n[11],flattenColumns:n[12],parser:n[13],parseMemoizeOne:n[14],validator:n[15],validationParser:n[16],indentation:n[3],onChange:n[18],onChangeMode:n[19],onSelect:n[20],onRenderValue:n[21],onFocus:n[24],onBlur:n[25],onRenderMenu:n[32],onRenderContextMenu:n[33],onSortModal:n[26],onTransformModal:n[27],onJSONEditorModal:n[28]};return e=new R2e({props:r}),n[48](e),{c(){$(e.$$.fragment)},m(i,o){Q(e,i,o),t=!0},p(i,o){const s={};o[0]&1&&(s.externalContent=i[0]),o[0]&2&&(s.externalSelection=i[1]),o[0]&4&&(s.readOnly=i[2]),o[0]&64&&(s.mainMenuBar=i[6]),o[0]&1024&&(s.escapeControlCharacters=i[10]),o[0]&2048&&(s.escapeUnicodeCharacters=i[11]),o[0]&4096&&(s.flattenColumns=i[12]),o[0]&8192&&(s.parser=i[13]),o[0]&16384&&(s.parseMemoizeOne=i[14]),o[0]&32768&&(s.validator=i[15]),o[0]&65536&&(s.validationParser=i[16]),o[0]&8&&(s.indentation=i[3]),o[0]&262144&&(s.onChange=i[18]),o[0]&524288&&(s.onChangeMode=i[19]),o[0]&1048576&&(s.onSelect=i[20]),o[0]&2097152&&(s.onRenderValue=i[21]),o[0]&16777216&&(s.onFocus=i[24]),o[0]&33554432&&(s.onBlur=i[25]),o[1]&2&&(s.onRenderMenu=i[32]),o[1]&4&&(s.onRenderContextMenu=i[33]),o[0]&67108864&&(s.onSortModal=i[26]),o[0]&134217728&&(s.onTransformModal=i[27]),o[0]&268435456&&(s.onJSONEditorModal=i[28]),e.$set(s)},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){D(e.$$.fragment,i),t=!1},d(i){n[48](null),Z(e,i)}}}function N2e(n){let e,t,r={externalContent:n[0],externalSelection:n[1],readOnly:n[2],indentation:n[3],tabSize:n[4],mainMenuBar:n[6],statusBar:n[8],askToFormat:n[9],escapeUnicodeCharacters:n[11],parser:n[13],validator:n[15],validationParser:n[16],onChange:n[18],onSelect:n[20],onChangeMode:n[19],onError:n[23],onFocus:n[24],onBlur:n[25],onRenderMenu:n[32],onSortModal:n[26],onTransformModal:n[27]};return e=new jye({props:r}),n[47](e),{c(){$(e.$$.fragment)},m(i,o){Q(e,i,o),t=!0},p(i,o){const s={};o[0]&1&&(s.externalContent=i[0]),o[0]&2&&(s.externalSelection=i[1]),o[0]&4&&(s.readOnly=i[2]),o[0]&8&&(s.indentation=i[3]),o[0]&16&&(s.tabSize=i[4]),o[0]&64&&(s.mainMenuBar=i[6]),o[0]&256&&(s.statusBar=i[8]),o[0]&512&&(s.askToFormat=i[9]),o[0]&2048&&(s.escapeUnicodeCharacters=i[11]),o[0]&8192&&(s.parser=i[13]),o[0]&32768&&(s.validator=i[15]),o[0]&65536&&(s.validationParser=i[16]),o[0]&262144&&(s.onChange=i[18]),o[0]&1048576&&(s.onSelect=i[20]),o[0]&524288&&(s.onChangeMode=i[19]),o[0]&8388608&&(s.onError=i[23]),o[0]&16777216&&(s.onFocus=i[24]),o[0]&33554432&&(s.onBlur=i[25]),o[1]&2&&(s.onRenderMenu=i[32]),o[0]&67108864&&(s.onSortModal=i[26]),o[0]&134217728&&(s.onTransformModal=i[27]),e.$set(s)},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){D(e.$$.fragment,i),t=!1},d(i){n[47](null),Z(e,i)}}}function B2e(n){let e,t,r,i,o;const s=[N2e,I2e,P2e],a=[];function l(u,c){return c[0]&32&&(e=null),e==null&&(e=u[5]===hi.text||String(u[5])==="code"),e?0:u[5]===hi.table?1:2}return t=l(n,[-1,-1]),r=a[t]=s[t](n),{c(){r.c(),i=Ze()},m(u,c){a[t].m(u,c),H(u,i,c),o=!0},p(u,c){let f=t;t=l(u,c),t===f?a[t].p(u,c):(de(),D(a[f],1,1,()=>{a[f]=null}),he(),r=a[t],r?r.p(u,c):(r=a[t]=s[t](u),r.c()),x(r,1),r.m(i.parentNode,i))},i(u){o||(x(r),o=!0)},o(u){D(r),o=!1},d(u){a[t].d(u),u&&j(i)}}}function L2e(n,e,t){let{content:r}=e,{selection:i}=e,{readOnly:o}=e,{indentation:s}=e,{tabSize:a}=e,{mode:l}=e,{mainMenuBar:u}=e,{navigationBar:c}=e,{statusBar:f}=e,{askToFormat:d}=e,{escapeControlCharacters:h}=e,{escapeUnicodeCharacters:p}=e,{flattenColumns:m}=e,{parser:g}=e,{parseMemoizeOne:v}=e,{validator:b}=e,{validationParser:w}=e,{pathParser:_}=e,{insideModal:y}=e,{onChange:k}=e,{onChangeMode:S}=e,{onSelect:E}=e,{onRenderValue:M}=e,{onClassName:R}=e,{onRenderMenu:O}=e,{onRenderContextMenu:I}=e,{onError:P}=e,{onFocus:A}=e,{onBlur:N}=e,{onSortModal:F}=e,{onTransformModal:V}=e,{onJSONEditorModal:W}=e,L,z,q,te;const re={type:"separator"};let ne,fe;function ie(ue){if(L)return L.patch(ue);if(z)return z.patch(ue);if(q)return q.patch(ue);throw new Error(`Method patch is not available in mode "${l}"`)}function G(ue){if(L)return L.expand(ue);throw new Error(`Method expand is not available in mode "${l}"`)}function ae(ue){if(q)q.openTransformModal(ue);else if(L)L.openTransformModal(ue);else if(z)z.openTransformModal(ue);else throw new Error(`Method transform is not available in mode "${l}"`)}function Me(){if(q)return q.validate();if(L)return L.validate();if(z)return z.validate();throw new Error(`Method validate is not available in mode "${l}"`)}function X(){return L?L.acceptAutoRepair():r}function ge(ue){if(L)return L.scrollTo(ue);if(z)return z.scrollTo(ue);throw new Error(`Method scrollTo is not available in mode "${l}"`)}function U(ue){if(L)return L.findElement(ue);if(z)return z.findElement(ue);throw new Error(`Method findElement is not available in mode "${l}"`)}function Ce(){q?q.focus():L?L.focus():z&&z.focus()}async function Ee(){q&&await q.refresh()}function Ae(ue){rt[ue?"unshift":"push"](()=>{q=ue,t(31,q)})}function De(ue){rt[ue?"unshift":"push"](()=>{z=ue,t(30,z)})}function nt(ue){rt[ue?"unshift":"push"](()=>{L=ue,t(29,L)})}return n.$$set=ue=>{"content"in ue&&t(0,r=ue.content),"selection"in ue&&t(1,i=ue.selection),"readOnly"in ue&&t(2,o=ue.readOnly),"indentation"in ue&&t(3,s=ue.indentation),"tabSize"in ue&&t(4,a=ue.tabSize),"mode"in ue&&t(5,l=ue.mode),"mainMenuBar"in ue&&t(6,u=ue.mainMenuBar),"navigationBar"in ue&&t(7,c=ue.navigationBar),"statusBar"in ue&&t(8,f=ue.statusBar),"askToFormat"in ue&&t(9,d=ue.askToFormat),"escapeControlCharacters"in ue&&t(10,h=ue.escapeControlCharacters),"escapeUnicodeCharacters"in ue&&t(11,p=ue.escapeUnicodeCharacters),"flattenColumns"in ue&&t(12,m=ue.flattenColumns),"parser"in ue&&t(13,g=ue.parser),"parseMemoizeOne"in ue&&t(14,v=ue.parseMemoizeOne),"validator"in ue&&t(15,b=ue.validator),"validationParser"in ue&&t(16,w=ue.validationParser),"pathParser"in ue&&t(17,_=ue.pathParser),"insideModal"in ue&&t(34,y=ue.insideModal),"onChange"in ue&&t(18,k=ue.onChange),"onChangeMode"in ue&&t(19,S=ue.onChangeMode),"onSelect"in ue&&t(20,E=ue.onSelect),"onRenderValue"in ue&&t(21,M=ue.onRenderValue),"onClassName"in ue&&t(22,R=ue.onClassName),"onRenderMenu"in ue&&t(35,O=ue.onRenderMenu),"onRenderContextMenu"in ue&&t(36,I=ue.onRenderContextMenu),"onError"in ue&&t(23,P=ue.onError),"onFocus"in ue&&t(24,A=ue.onFocus),"onBlur"in ue&&t(25,N=ue.onBlur),"onSortModal"in ue&&t(26,F=ue.onSortModal),"onTransformModal"in ue&&t(27,V=ue.onTransformModal),"onJSONEditorModal"in ue&&t(28,W=ue.onJSONEditorModal)},n.$$.update=()=>{n.$$.dirty[0]&524320&&t(46,te=[{type:"button",text:"text",title:`Switch to text mode (current mode: ${l})`,className:"jse-group-button jse-first"+(l===hi.text||l==="code"?" jse-selected":""),onClick:()=>S(hi.text)},{type:"button",text:"tree",title:`Switch to tree mode (current mode: ${l})`,className:"jse-group-button "+(l===hi.tree?" jse-selected":""),onClick:()=>S(hi.tree)},{type:"button",text:"table",title:`Switch to table mode (current mode: ${l})`,className:"jse-group-button jse-last"+(l===hi.table?" jse-selected":""),onClick:()=>S(hi.table)}]),n.$$.dirty[0]&32|n.$$.dirty[1]&32792&&t(32,ne=ue=>{const Oe=NF(ue[0])?te.concat(ue):te.concat(re,ue);return O(Oe,{mode:l,modal:y})||Oe}),n.$$.dirty[0]&34|n.$$.dirty[1]&40&&t(33,fe=ue=>I(ue,{mode:l,modal:y,selection:i})||ue)},[r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,k,S,E,M,R,P,A,N,F,V,W,L,z,q,ne,fe,y,O,I,ie,G,ae,Me,X,ge,U,Ce,Ee,te,Ae,De,nt]}class F2e extends ye{constructor(e){super(),be(this,e,L2e,B2e,Be,{content:0,selection:1,readOnly:2,indentation:3,tabSize:4,mode:5,mainMenuBar:6,navigationBar:7,statusBar:8,askToFormat:9,escapeControlCharacters:10,escapeUnicodeCharacters:11,flattenColumns:12,parser:13,parseMemoizeOne:14,validator:15,validationParser:16,pathParser:17,insideModal:34,onChange:18,onChangeMode:19,onSelect:20,onRenderValue:21,onClassName:22,onRenderMenu:35,onRenderContextMenu:36,onError:23,onFocus:24,onBlur:25,onSortModal:26,onTransformModal:27,onJSONEditorModal:28,patch:37,expand:38,transform:39,validate:40,acceptAutoRepair:41,scrollTo:42,findElement:43,focus:44,refresh:45},null,[-1,-1])}get patch(){return this.$$.ctx[37]}get expand(){return this.$$.ctx[38]}get transform(){return this.$$.ctx[39]}get validate(){return this.$$.ctx[40]}get acceptAutoRepair(){return this.$$.ctx[41]}get scrollTo(){return this.$$.ctx[42]}get findElement(){return this.$$.ctx[43]}get focus(){return this.$$.ctx[44]}get refresh(){return this.$$.ctx[45]}}const iV=F2e;function eP(n){let e,t;return{c(){e=B("div"),t=Se(n[22]),C(e,"class","jse-error svelte-vu88jz")},m(r,i){H(r,e,i),T(e,t)},p(r,i){i[0]&4194304&&ze(t,r[22])},d(r){r&&j(e)}}}function tP(n){let e,t,r,i,o,s;return t=new Jt({props:{data:ile}}),{c(){e=B("button"),$(t.$$.fragment),r=Se(" Back"),C(e,"type","button"),C(e,"class","jse-secondary svelte-vu88jz")},m(a,l){H(a,e,l),Q(t,e,null),T(e,r),i=!0,o||(s=le(e,"click",n[27]),o=!0)},p:pe,i(a){i||(x(t.$$.fragment,a),i=!0)},o(a){D(t.$$.fragment,a),i=!1},d(a){a&&j(e),Z(t),o=!1,s()}}}function z2e(n){let e,t,r;return{c(){e=B("button"),e.textContent="Close",C(e,"type","button"),C(e,"class","jse-primary svelte-vu88jz")},m(i,o){H(i,e,o),t||(r=[le(e,"click",n[27]),Mn(oV.call(null,e))],t=!0)},p:pe,d(i){i&&j(e),t=!1,It(r)}}}function j2e(n){let e,t,r;return{c(){e=B("button"),e.textContent="Apply",C(e,"type","button"),C(e,"class","jse-primary svelte-vu88jz")},m(i,o){H(i,e,o),t||(r=[le(e,"click",n[26]),Mn(oV.call(null,e))],t=!0)},p:pe,d(i){i&&j(e),t=!1,It(r)}}}function H2e(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w;t=new Jx({props:{title:"Edit nested content "+(n[20].length>1?` (${n[20].length})`:""),onClose:n[27]}});let _={mode:n[23].mode,content:n[23].content,selection:n[23].selection,readOnly:n[0],indentation:n[1],tabSize:n[2],statusBar:n[5],askToFormat:n[6],mainMenuBar:n[3],navigationBar:n[4],escapeControlCharacters:n[7],escapeUnicodeCharacters:n[8],flattenColumns:n[9],parser:n[10],parseMemoizeOne:n[24],validator:n[11],validationParser:n[12],pathParser:n[13],insideModal:!0,onError:n[31],onChange:n[28],onChangeMode:n[30],onSelect:n[29],onRenderValue:n[14],onClassName:n[15],onFocus:Lo,onBlur:Lo,onRenderMenu:n[16],onRenderContextMenu:n[17],onSortModal:n[18],onTransformModal:n[19],onJSONEditorModal:n[32]};d=new iV({props:_}),n[37](d);let y=n[22]&&eP(n),k=n[20].length>1&&tP(n);function S(R,O){return R[0]?z2e:j2e}let E=S(n),M=E(n);return{c(){e=B("div"),$(t.$$.fragment),r=K(),i=B("div"),o=B("div"),o.innerHTML='<div class="jse-label-inner svelte-vu88jz">Path</div>',s=K(),a=B("input"),l=K(),u=B("div"),u.innerHTML='<div class="jse-label-inner svelte-vu88jz">Contents</div>',c=K(),f=B("div"),$(d.$$.fragment),h=K(),p=B("div"),y&&y.c(),m=K(),k&&k.c(),g=K(),M.c(),C(o,"class","jse-label svelte-vu88jz"),C(a,"class","jse-path svelte-vu88jz"),C(a,"type","text"),a.readOnly=!0,C(a,"title","Selected path"),a.value=n[25],C(u,"class","jse-label svelte-vu88jz"),C(f,"class","jse-modal-inline-editor svelte-vu88jz"),C(p,"class","jse-actions svelte-vu88jz"),C(i,"class","jse-modal-contents svelte-vu88jz"),C(e,"class","jse-modal jse-jsoneditor-modal svelte-vu88jz")},m(R,O){H(R,e,O),Q(t,e,null),T(e,r),T(e,i),T(i,o),T(i,s),T(i,a),T(i,l),T(i,u),T(i,c),T(i,f),Q(d,f,null),T(i,h),T(i,p),y&&y.m(p,null),T(p,m),k&&k.m(p,null),T(p,g),M.m(p,null),v=!0,b||(w=Mn(m_.call(null,e,n[27])),b=!0)},p(R,O){const I={};O[0]&1048576&&(I.title="Edit nested content "+(R[20].length>1?` (${R[20].length})`:"")),t.$set(I),(!v||O[0]&33554432&&a.value!==R[25])&&(a.value=R[25]);const P={};O[0]&8388608&&(P.mode=R[23].mode),O[0]&8388608&&(P.content=R[23].content),O[0]&8388608&&(P.selection=R[23].selection),O[0]&1&&(P.readOnly=R[0]),O[0]&2&&(P.indentation=R[1]),O[0]&4&&(P.tabSize=R[2]),O[0]&32&&(P.statusBar=R[5]),O[0]&64&&(P.askToFormat=R[6]),O[0]&8&&(P.mainMenuBar=R[3]),O[0]&16&&(P.navigationBar=R[4]),O[0]&128&&(P.escapeControlCharacters=R[7]),O[0]&256&&(P.escapeUnicodeCharacters=R[8]),O[0]&512&&(P.flattenColumns=R[9]),O[0]&1024&&(P.parser=R[10]),O[0]&16777216&&(P.parseMemoizeOne=R[24]),O[0]&2048&&(P.validator=R[11]),O[0]&4096&&(P.validationParser=R[12]),O[0]&8192&&(P.pathParser=R[13]),O[0]&16384&&(P.onRenderValue=R[14]),O[0]&32768&&(P.onClassName=R[15]),O[0]&65536&&(P.onRenderMenu=R[16]),O[0]&131072&&(P.onRenderContextMenu=R[17]),O[0]&262144&&(P.onSortModal=R[18]),O[0]&524288&&(P.onTransformModal=R[19]),d.$set(P),R[22]?y?y.p(R,O):(y=eP(R),y.c(),y.m(p,m)):y&&(y.d(1),y=null),R[20].length>1?k?(k.p(R,O),O[0]&1048576&&x(k,1)):(k=tP(R),k.c(),x(k,1),k.m(p,g)):k&&(de(),D(k,1,1,()=>{k=null}),he()),E===(E=S(R))&&M?M.p(R,O):(M.d(1),M=E(R),M&&(M.c(),M.m(p,null)))},i(R){v||(x(t.$$.fragment,R),x(d.$$.fragment,R),x(k),v=!0)},o(R){D(t.$$.fragment,R),D(d.$$.fragment,R),D(k),v=!1},d(R){R&&j(e),Z(t),n[37](null),Z(d),y&&y.d(),k&&k.d(),M.d(),b=!1,w()}}}function oV(n){n.focus()}function V2e(n,e,t){let r,i,o,s;const a=oi("jsoneditor:JSONEditorModal");let{content:l}=e,{path:u}=e,{onPatch:c}=e,{readOnly:f}=e,{indentation:d}=e,{tabSize:h}=e,{mainMenuBar:p}=e,{navigationBar:m}=e,{statusBar:g}=e,{askToFormat:v}=e,{escapeControlCharacters:b}=e,{escapeUnicodeCharacters:w}=e,{flattenColumns:_}=e,{parser:y}=e,{validator:k}=e,{validationParser:S}=e,{pathParser:E}=e,{onRenderValue:M}=e,{onClassName:R}=e,{onRenderMenu:O}=e,{onRenderContextMenu:I}=e,{onSortModal:P}=e,{onTransformModal:A}=e;const{close:N}=pr("simple-modal");let F;const V={mode:z(l),content:l,selection:null,relativePath:u};let W=[V],L;function z(X){return sm(X)&&Sn(X.json)?hi.table:hi.tree}function q(){var ge;const X=((ge=jt(W))==null?void 0:ge.selection)||null;Lx(X)&&F.scrollTo(pt(X))}function te(){if(a("handleApply"),!f)try{t(22,L=void 0);const X=r.relativePath,ge=r.content,U=[{op:"replace",path:Ke(X),value:NM(ge,y).json}];if(W.length>1){const Ce=W[W.length-2].content,Ee=NM(Ce,y).json,Ae={json:Ns(Ee,U)},nt={...W[W.length-2]||V,content:Ae};t(20,W=[...W.slice(0,W.length-2),nt]),dn().then(q)}else c(U),N()}catch(X){t(22,L=String(X))}}function re(){a("handleClose"),W.length>1?(t(20,W=Ut(W)),dn().then(q),t(22,L=void 0)):N()}function ne(X){a("handleChange",X);const ge={...r,content:X};t(20,W=[...Ut(W),ge])}function fe(X){a("handleChangeSelection",X);const ge={...r,selection:X};t(20,W=[...Ut(W),ge])}function ie(X){a("handleChangeMode",X);const ge={...r,mode:X};t(20,W=[...Ut(W),ge])}function G(X){t(22,L=X.toString()),console.error(X)}function ae({content:X,path:ge}){a("handleJSONEditorModal",{content:X,path:ge});const U={mode:z(X),content:X,selection:null,relativePath:ge};t(20,W=[...W,U])}function Me(X){rt[X?"unshift":"push"](()=>{F=X,t(21,F)})}return n.$$set=X=>{"content"in X&&t(33,l=X.content),"path"in X&&t(34,u=X.path),"onPatch"in X&&t(35,c=X.onPatch),"readOnly"in X&&t(0,f=X.readOnly),"indentation"in X&&t(1,d=X.indentation),"tabSize"in X&&t(2,h=X.tabSize),"mainMenuBar"in X&&t(3,p=X.mainMenuBar),"navigationBar"in X&&t(4,m=X.navigationBar),"statusBar"in X&&t(5,g=X.statusBar),"askToFormat"in X&&t(6,v=X.askToFormat),"escapeControlCharacters"in X&&t(7,b=X.escapeControlCharacters),"escapeUnicodeCharacters"in X&&t(8,w=X.escapeUnicodeCharacters),"flattenColumns"in X&&t(9,_=X.flattenColumns),"parser"in X&&t(10,y=X.parser),"validator"in X&&t(11,k=X.validator),"validationParser"in X&&t(12,S=X.validationParser),"pathParser"in X&&t(13,E=X.pathParser),"onRenderValue"in X&&t(14,M=X.onRenderValue),"onClassName"in X&&t(15,R=X.onClassName),"onRenderMenu"in X&&t(16,O=X.onRenderMenu),"onRenderContextMenu"in X&&t(17,I=X.onRenderContextMenu),"onSortModal"in X&&t(18,P=X.onSortModal),"onTransformModal"in X&&t(19,A=X.onTransformModal)},n.$$.update=()=>{n.$$.dirty[0]&1048576&&t(23,r=jt(W)||V),n.$$.dirty[0]&1048576&&t(36,i=W.flatMap(X=>X.relativePath)),n.$$.dirty[1]&32&&t(25,o=$t(i)?"(document root)":lo(i)),n.$$.dirty[0]&1024&&t(24,s=Ag(y.parse))},[f,d,h,p,m,g,v,b,w,_,y,k,S,E,M,R,O,I,P,A,W,F,L,r,s,o,te,re,ne,fe,ie,G,ae,l,u,c,i,Me]}class W2e extends ye{constructor(e){super(),be(this,e,V2e,H2e,Rt,{content:33,path:34,onPatch:35,readOnly:0,indentation:1,tabSize:2,mainMenuBar:3,navigationBar:4,statusBar:5,askToFormat:6,escapeControlCharacters:7,escapeUnicodeCharacters:8,flattenColumns:9,parser:10,validator:11,validationParser:12,pathParser:13,onRenderValue:14,onClassName:15,onRenderMenu:16,onRenderContextMenu:17,onSortModal:18,onTransformModal:19},null,[-1,-1])}}const q2e=W2e;function U2e(n,e,t){const r=pr("simple-modal"),i=r.open,o=r.close;return[i,o]}class G2e extends ye{constructor(e){super(),be(this,e,U2e,null,Rt,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}const K2e=G2e;function nP(n){let e,t,r={mode:n[1],content:n[0],selection:n[2],readOnly:n[3],indentation:n[4],tabSize:n[5],statusBar:n[8],askToFormat:n[9],mainMenuBar:n[6],navigationBar:n[7],escapeControlCharacters:n[10],escapeUnicodeCharacters:n[11],flattenColumns:n[12],parser:n[13],parseMemoizeOne:n[27],validator:n[14],validationParser:n[15],pathParser:n[16],insideModal:!1,onError:n[21],onChange:n[28],onChangeMode:n[32],onSelect:n[29],onRenderValue:n[17],onClassName:n[18],onFocus:n[30],onBlur:n[31],onRenderMenu:n[19],onRenderContextMenu:n[20],onSortModal:n[34],onTransformModal:n[33],onJSONEditorModal:n[35]};return e=new iV({props:r}),n[62](e),{c(){$(e.$$.fragment)},m(i,o){Q(e,i,o),t=!0},p(i,o){const s={};o[0]&2&&(s.mode=i[1]),o[0]&1&&(s.content=i[0]),o[0]&4&&(s.selection=i[2]),o[0]&8&&(s.readOnly=i[3]),o[0]&16&&(s.indentation=i[4]),o[0]&32&&(s.tabSize=i[5]),o[0]&256&&(s.statusBar=i[8]),o[0]&512&&(s.askToFormat=i[9]),o[0]&64&&(s.mainMenuBar=i[6]),o[0]&128&&(s.navigationBar=i[7]),o[0]&1024&&(s.escapeControlCharacters=i[10]),o[0]&2048&&(s.escapeUnicodeCharacters=i[11]),o[0]&4096&&(s.flattenColumns=i[12]),o[0]&8192&&(s.parser=i[13]),o[0]&134217728&&(s.parseMemoizeOne=i[27]),o[0]&16384&&(s.validator=i[14]),o[0]&32768&&(s.validationParser=i[15]),o[0]&65536&&(s.pathParser=i[16]),o[0]&2097152&&(s.onError=i[21]),o[0]&131072&&(s.onRenderValue=i[17]),o[0]&262144&&(s.onClassName=i[18]),o[0]&524288&&(s.onRenderMenu=i[19]),o[0]&1048576&&(s.onRenderContextMenu=i[20]),e.$set(s)},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){D(e.$$.fragment,i),t=!1},d(i){n[62](null),Z(e,i)}}}function J2e(n){let e,t,r,i,o=n[22],s;function a(c){n[61](c)}let l={};n[25]!==void 0&&(l.open=n[25]),e=new K2e({props:l}),rt.push(()=>fr(e,"open",a));let u=nP(n);return{c(){$(e.$$.fragment),r=K(),i=B("div"),u.c(),C(i,"class","jse-main svelte-ybuk0j"),oe(i,"jse-focus",n[23])},m(c,f){Q(e,c,f),H(c,r,f),H(c,i,f),u.m(i,null),s=!0},p(c,f){const d={};!t&&f[0]&33554432&&(t=!0,d.open=c[25],cr(()=>t=!1)),e.$set(d),f[0]&4194304&&Rt(o,o=c[22])?(de(),D(u,1,1,pe),he(),u=nP(c),u.c(),x(u,1),u.m(i,null)):u.p(c,f),(!s||f[0]&8388608)&&oe(i,"jse-focus",c[23])},i(c){s||(x(e.$$.fragment,c),x(u),s=!0)},o(c){D(e.$$.fragment,c),D(u),s=!1},d(c){Z(e,c),c&&j(r),c&&j(i),u.d(c)}}}function Y2e(n){let e,t;return e=new NB({props:{closeOnEsc:!1,$$slots:{default:[J2e]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&201326591|i[2]&8&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function X2e(n){var o;let e,t;const r=[{show:(o=n[26])==null?void 0:o.component},W8,{closeOnEsc:!1}];let i={$$slots:{default:[Y2e]},$$scope:{ctx:n}};for(let s=0;s<r.length;s+=1)i=Te(i,r[s]);return e=new NB({props:i}),e.$on("close",n[36]),{c(){$(e.$$.fragment)},m(s,a){Q(e,s,a),t=!0},p(s,a){var u;const l=a[0]&67108864?Ot(r,[a[0]&67108864&&{show:(u=s[26])==null?void 0:u.component},a&0&&an(W8),r[2]]):{};a[0]&201326591|a[2]&8&&(l.$$scope={dirty:a,ctx:s}),e.$set(l)},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Q2e(n){let e,t;return e=new JL({props:{$$slots:{default:[X2e]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i[0]&268435455|i[2]&8&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function Z2e(n,e,t){let r;const i=oi("jsoneditor:JSONEditor");let{content:o={text:""}}=e,{selection:s=null}=e,{readOnly:a=!1}=e,{indentation:l=2}=e,{tabSize:u=4}=e,{mode:c=hi.tree}=e,{mainMenuBar:f=!0}=e,{navigationBar:d=!0}=e,{statusBar:h=!0}=e,{askToFormat:p=!0}=e,{escapeControlCharacters:m=!1}=e,{escapeUnicodeCharacters:g=!1}=e,{flattenColumns:v=!0}=e,{parser:b=JSON}=e,{validator:w=null}=e,{validationParser:_=JSON}=e,{pathParser:y={parse:bse,stringify:lo}}=e,{queryLanguages:k=[Cse]}=e,{queryLanguageId:S=k[0].id}=e,{onChangeQueryLanguage:E=Lo}=e,{onChange:M=null}=e,{onSelect:R=Lo}=e,{onRenderValue:O=$ae}=e,{onClassName:I=()=>{}}=e,{onRenderMenu:P=Lo}=e,{onRenderContextMenu:A=Lo}=e,{onChangeMode:N=Lo}=e,{onError:F=we=>{console.error(we),alert(we.toString())}}=e,{onFocus:V=Lo}=e,{onBlur:W=Lo}=e,L=_0(),z=!1,q,te,re=null,ne=b;function fe(){return o}async function ie(we){i("set");const bt=Fw(we);if(bt)throw new Error(bt);t(22,L=_0()),t(0,o=we)}async function G(we){i("update");const bt=Fw(we);if(bt)throw new Error(bt);t(0,o=we),await dn()}async function ae(we){if(kh(o))try{t(0,o={json:b.parse(o.text),text:void 0})}catch{throw new Error("Cannot apply patch: current document contains invalid JSON")}const bt=q.patch(we);return await dn(),bt}async function Me(we){t(2,s=we),await dn()}async function X(we){q.expand(we),await dn()}function ge(we){q.transform(we)}function U(){return q.validate()}async function Ce(){const we=q.acceptAutoRepair();return await dn(),we}async function Ee(we){await q.scrollTo(we)}function Ae(we){return q.findElement(we)}async function De(){q.focus(),await dn()}async function nt(){await q.refresh()}async function ue(we){this.$set(we),await dn()}async function Oe(){this.$destroy(),await dn()}function Ue(we,bt,ve){t(0,o=we),M&&M(we,bt,ve)}function _e(we){t(2,s=we),R(we)}function it(){t(23,z=!0),V&&V()}function At(){t(23,z=!1),W&&W()}async function Ve(we){c!==we&&(t(1,c=we),await dn(),await De(),N(we))}function ct(we){i("handleChangeQueryLanguage",we),t(37,S=we),E(we)}function Pt({id:we,json:bt,rootPath:ve,onTransform:Ge,onClose:$e}){a||te(lpe,{id:we,json:bt,rootPath:ve,indentation:l,escapeControlCharacters:m,escapeUnicodeCharacters:g,parser:b,parseMemoizeOne:r,validationParser:_,pathParser:y,queryLanguages:k,queryLanguageId:S,onChangeQueryLanguage:ct,onRenderValue:O,onRenderMenu:P,onRenderContextMenu:A,onClassName:I,onTransform:Ge},sZ,{onClose:$e})}function yt({id:we,json:bt,rootPath:ve,onSort:Ge,onClose:$e}){a||te(hpe,{id:we,json:bt,rootPath:ve,onSort:Ge},oZ,{onClose:$e})}function mn({content:we,path:bt,onPatch:ve,onClose:Ge}){i("onJSONEditorModal",{content:we,path:bt}),t(26,re={component:IB(q2e,{content:we,path:bt,onPatch:ve,readOnly:a,indentation:l,tabSize:u,mainMenuBar:f,navigationBar:d,statusBar:h,askToFormat:p,escapeControlCharacters:m,escapeUnicodeCharacters:g,flattenColumns:v,parser:b,validator:void 0,validationParser:_,pathParser:y,onRenderValue:O,onClassName:I,onRenderMenu:P,onRenderContextMenu:A,onSortModal:yt,onTransformModal:Pt}),callbacks:{onClose:Ge}})}function En(){var we,bt;(bt=(we=re==null?void 0:re.callbacks)==null?void 0:we.onClose)==null||bt.call(we),t(26,re=null)}function Dn(we){te=we,t(25,te)}function Fn(we){rt[we?"unshift":"push"](()=>{q=we,t(24,q)})}return n.$$set=we=>{"content"in we&&t(0,o=we.content),"selection"in we&&t(2,s=we.selection),"readOnly"in we&&t(3,a=we.readOnly),"indentation"in we&&t(4,l=we.indentation),"tabSize"in we&&t(5,u=we.tabSize),"mode"in we&&t(1,c=we.mode),"mainMenuBar"in we&&t(6,f=we.mainMenuBar),"navigationBar"in we&&t(7,d=we.navigationBar),"statusBar"in we&&t(8,h=we.statusBar),"askToFormat"in we&&t(9,p=we.askToFormat),"escapeControlCharacters"in we&&t(10,m=we.escapeControlCharacters),"escapeUnicodeCharacters"in we&&t(11,g=we.escapeUnicodeCharacters),"flattenColumns"in we&&t(12,v=we.flattenColumns),"parser"in we&&t(13,b=we.parser),"validator"in we&&t(14,w=we.validator),"validationParser"in we&&t(15,_=we.validationParser),"pathParser"in we&&t(16,y=we.pathParser),"queryLanguages"in we&&t(38,k=we.queryLanguages),"queryLanguageId"in we&&t(37,S=we.queryLanguageId),"onChangeQueryLanguage"in we&&t(39,E=we.onChangeQueryLanguage),"onChange"in we&&t(40,M=we.onChange),"onSelect"in we&&t(41,R=we.onSelect),"onRenderValue"in we&&t(17,O=we.onRenderValue),"onClassName"in we&&t(18,I=we.onClassName),"onRenderMenu"in we&&t(19,P=we.onRenderMenu),"onRenderContextMenu"in we&&t(20,A=we.onRenderContextMenu),"onChangeMode"in we&&t(42,N=we.onChangeMode),"onError"in we&&t(21,F=we.onError),"onFocus"in we&&t(43,V=we.onFocus),"onBlur"in we&&t(44,W=we.onBlur)},n.$$.update=()=>{if(n.$$.dirty[0]&8193|n.$$.dirty[1]&536870912&&!Xoe(b,ne)){if(i("parser changed, recreate editor"),sm(o)){const we=ne.stringify(o.json);t(0,o={json:we!==void 0?b.parse(we):void 0})}t(60,ne=b),t(22,L=_0())}if(n.$$.dirty[0]&1){const we=Fw(o);we&&console.error("Error: "+we)}n.$$.dirty[0]&8192&&t(27,r=Ag(b.parse)),n.$$.dirty[0]&2&&(i("mode changed to",c),c==="code"&&console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'))},[o,c,s,a,l,u,f,d,h,p,m,g,v,b,w,_,y,O,I,P,A,F,L,z,q,te,re,r,Ue,_e,it,At,Ve,Pt,yt,mn,En,S,k,E,M,R,N,V,W,fe,ie,G,ae,Me,X,ge,U,Ce,Ee,Ae,De,nt,ue,Oe,ne,Dn,Fn]}class $2e extends ye{constructor(e){super(),be(this,e,Z2e,Q2e,Rt,{content:0,selection:2,readOnly:3,indentation:4,tabSize:5,mode:1,mainMenuBar:6,navigationBar:7,statusBar:8,askToFormat:9,escapeControlCharacters:10,escapeUnicodeCharacters:11,flattenColumns:12,parser:13,validator:14,validationParser:15,pathParser:16,queryLanguages:38,queryLanguageId:37,onChangeQueryLanguage:39,onChange:40,onSelect:41,onRenderValue:17,onClassName:18,onRenderMenu:19,onRenderContextMenu:20,onChangeMode:42,onError:21,onFocus:43,onBlur:44,get:45,set:46,update:47,patch:48,select:49,expand:50,transform:51,validate:52,acceptAutoRepair:53,scrollTo:54,findElement:55,focus:56,refresh:57,updateProps:58,destroy:59},null,[-1,-1,-1])}get get(){return this.$$.ctx[45]}get set(){return this.$$.ctx[46]}get update(){return this.$$.ctx[47]}get patch(){return this.$$.ctx[48]}get select(){return this.$$.ctx[49]}get expand(){return this.$$.ctx[50]}get transform(){return this.$$.ctx[51]}get validate(){return this.$$.ctx[52]}get acceptAutoRepair(){return this.$$.ctx[53]}get scrollTo(){return this.$$.ctx[54]}get findElement(){return this.$$.ctx[55]}get focus(){return this.$$.ctx[56]}get refresh(){return this.$$.ctx[57]}get updateProps(){return this.$$.ctx[58]}get destroy(){return this.$$.ctx[59]}}const sV=$2e;function e_e(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function vS(n,e=!1){const t=e_e(),r=`_${t}`;return Object.defineProperty(window,r,{value:i=>(e&&Reflect.deleteProperty(window,r),n==null?void 0:n(i)),writable:!1,configurable:!0}),t}async function Yo(n,e={}){return new Promise((t,r)=>{const i=vS(s=>{t(s),Reflect.deleteProperty(window,`_${o}`)},!0),o=vS(s=>{r(s),Reflect.deleteProperty(window,`_${i}`)},!0);window.__TAURI_IPC__({cmd:n,callback:i,error:o,...e})})}function rP(n,e,t){const r=n.slice();return r[25]=e[t],r}function t_e(n){let e,t,r;function i(s){n[13](s)}let o={};return n[5]!==void 0&&(o.value=n[5]),e=new mg({props:o}),rt.push(()=>fr(e,"value",i)),{c(){$(e.$$.fragment)},m(s,a){Q(e,s,a),r=!0},p(s,a){const l={};!t&&a&32&&(t=!0,l.value=s[5],cr(()=>t=!1)),e.$set(l)},i(s){r||(x(e.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),r=!1},d(s){Z(e,s)}}}function n_e(n){let e,t,r;function i(s){n[14](s)}let o={type:"password",placeholder:"secret",icon:"fas fa-lock",expanded:!0};return n[6]!==void 0&&(o.value=n[6]),e=new mg({props:o}),rt.push(()=>fr(e,"value",i)),{c(){$(e.$$.fragment)},m(s,a){Q(e,s,a),r=!0},p(s,a){const l={};!t&&a&64&&(t=!0,l.value=s[6],cr(()=>t=!1)),e.$set(l)},i(s){r||(x(e.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),r=!1},d(s){Z(e,s)}}}function r_e(n){let e;return{c(){e=Se("Save")},m(t,r){H(t,e,r)},d(t){t&&j(e)}}}function i_e(n){let e,t;return e=new tB({props:{type:"is-success",class:"is-right",iconPack:"fa",iconLeft:"check",$$slots:{default:[r_e]},$$scope:{ctx:n}}}),e.$on("click",n[8]),e.$on("submit",n[8]),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&268435456&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function o_e(n){let e,t,r,i,o,s;return e=new Pu({props:{$$slots:{default:[t_e]},$$scope:{ctx:n}}}),r=new Pu({props:{grouped:!0,$$slots:{default:[n_e]},$$scope:{ctx:n}}}),o=new Pu({props:{grouped:!0,$$slots:{default:[i_e]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment),t=K(),$(r.$$.fragment),i=K(),$(o.$$.fragment)},m(a,l){Q(e,a,l),H(a,t,l),Q(r,a,l),H(a,i,l),Q(o,a,l),s=!0},p(a,l){const u={};l&268435488&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const c={};l&268435520&&(c.$$scope={dirty:l,ctx:a}),r.$set(c);const f={};l&268435456&&(f.$$scope={dirty:l,ctx:a}),o.$set(f)},i(a){s||(x(e.$$.fragment,a),x(r.$$.fragment,a),x(o.$$.fragment,a),s=!0)},o(a){D(e.$$.fragment,a),D(r.$$.fragment,a),D(o.$$.fragment,a),s=!1},d(a){Z(e,a),a&&j(t),Z(r,a),a&&j(i),Z(o,a)}}}function s_e(n){let e,t,r;function i(s){n[15](s)}let o={type:"search",placeholder:"Fetch JSON",icon:"search"};return n[3]!==void 0&&(o.value=n[3]),e=new mg({props:o}),rt.push(()=>fr(e,"value",i)),{c(){$(e.$$.fragment)},m(s,a){Q(e,s,a),r=!0},p(s,a){const l={};!t&&a&8&&(t=!0,l.value=s[3],cr(()=>t=!1)),e.$set(l)},i(s){r||(x(e.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),r=!1},d(s){Z(e,s)}}}function a_e(n){let e;return{c(){e=Se("WikiPage")},m(t,r){H(t,e,r)},d(t){t&&j(e)}}}function l_e(n){let e,t,r,i,o,s;function a(f){n[16](f)}let l={type:"search",placeholder:"Post JSON",icon:"search"};n[4]!==void 0&&(l.value=n[4]),e=new mg({props:l}),rt.push(()=>fr(e,"value",a));function u(f){n[17](f)}let c={$$slots:{default:[a_e]},$$scope:{ctx:n}};return n[2]!==void 0&&(c.checked=n[2]),i=new iX({props:c}),rt.push(()=>fr(i,"checked",u)),{c(){$(e.$$.fragment),r=K(),$(i.$$.fragment)},m(f,d){Q(e,f,d),H(f,r,d),Q(i,f,d),s=!0},p(f,d){const h={};!t&&d&16&&(t=!0,h.value=f[4],cr(()=>t=!1)),e.$set(h);const p={};d&268435456&&(p.$$scope={dirty:d,ctx:f}),!o&&d&4&&(o=!0,p.checked=f[2],cr(()=>o=!1)),i.$set(p)},i(f){s||(x(e.$$.fragment,f),x(i.$$.fragment,f),s=!0)},o(f){D(e.$$.fragment,f),D(i.$$.fragment,f),s=!1},d(f){Z(e,f),f&&j(r),Z(i,f)}}}function u_e(n){let e;return{c(){e=Se("Fetch")},m(t,r){H(t,e,r)},d(t){t&&j(e)}}}function c_e(n){let e,t;return e=new tB({props:{type:"is-primary",$$slots:{default:[u_e]},$$scope:{ctx:n}}}),e.$on("click",n[9]),e.$on("submit",n[9]),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&268435456&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function f_e(n){let e,t,r,i,o,s;return e=new Pu({props:{grouped:!0,$$slots:{default:[s_e]},$$scope:{ctx:n}}}),r=new Pu({props:{grouped:!0,$$slots:{default:[l_e]},$$scope:{ctx:n}}}),o=new Pu({props:{grouped:!0,$$slots:{default:[c_e]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment),t=K(),$(r.$$.fragment),i=K(),$(o.$$.fragment)},m(a,l){Q(e,a,l),H(a,t,l),Q(r,a,l),H(a,i,l),Q(o,a,l),s=!0},p(a,l){const u={};l&268435464&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const c={};l&268435476&&(c.$$scope={dirty:l,ctx:a}),r.$set(c);const f={};l&268435456&&(f.$$scope={dirty:l,ctx:a}),o.$set(f)},i(a){s||(x(e.$$.fragment,a),x(r.$$.fragment,a),x(o.$$.fragment,a),s=!0)},o(a){D(e.$$.fragment,a),D(r.$$.fragment,a),D(o.$$.fragment,a),s=!1},d(a){Z(e,a),a&&j(t),Z(r,a),a&&j(i),Z(o,a)}}}function d_e(n){let e,t,r,i,o;return i=new sV({props:{content:n[1],onChange:n[7]}}),{c(){e=B("p"),e.innerHTML=`<i>The best editing experience is to configure Atomic Server, in the
        meantime use editor below. You will need to refresh page via Command R
        or Ctrl-R to see changes</i>`,t=K(),r=B("div"),$(i.$$.fragment),C(r,"class","editor")},m(s,a){H(s,e,a),H(s,t,a),H(s,r,a),Q(i,r,null),o=!0},p(s,a){const l={};a&2&&(l.content=s[1]),i.$set(l)},i(s){o||(x(i.$$.fragment,s),o=!0)},o(s){D(i.$$.fragment,s),o=!1},d(s){s&&j(e),s&&j(t),s&&j(r),Z(i)}}}function iP(n){let e,t;return e=new WQ({props:{subject:n[25]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.subject=r[25]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function h_e(n){let e,t,r=n[0]??[],i=[];for(let s=0;s<r.length;s+=1)i[s]=iP(rP(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a&1){r=s[0]??[];let l;for(l=0;l<r.length;l+=1){const u=rP(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=iP(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function p_e(n){let e,t;return e=new QY({props:{$$slots:{default:[h_e]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&268435457&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function m_e(n){let e,t,r,i,o,s,a,l,u,c,f,d,h;return t=new hu({props:{path:"/atomic",$$slots:{default:[o_e]},$$scope:{ctx:n}}}),i=new hu({props:{path:"/json",$$slots:{default:[f_e]},$$scope:{ctx:n}}}),s=new hu({props:{path:"/editor",$$slots:{default:[d_e]},$$scope:{ctx:n}}}),c=new Pu({props:{grouped:!0,position:"is-right",$$slots:{default:[p_e]},$$scope:{ctx:n}}}),{c(){e=B("div"),$(t.$$.fragment),r=K(),$(i.$$.fragment),o=K(),$(s.$$.fragment),a=K(),l=B("hr"),u=K(),$(c.$$.fragment),f=K(),d=B("nav"),d.innerHTML=`<div class="navbar-brand"><a class="navbar-item" href="/"><span class="icon" style="color: #333;"><i class="fas fa-home"></i></span></a> 
    <a class="navbar-item" href="/fetch/json">Fetch JSON Data</a> 
    <a class="navbar-item" href="/fetch/atomic">Set Atomic Server</a> 
    <a class="navbar-item" href="/fetch/editor">Edit JSON config</a></div>`,C(e,"class","box"),C(d,"class","navbar")},m(p,m){H(p,e,m),Q(t,e,null),T(e,r),Q(i,e,null),T(e,o),Q(s,e,null),H(p,a,m),H(p,l,m),H(p,u,m),Q(c,p,m),H(p,f,m),H(p,d,m),h=!0},p(p,[m]){const g={};m&268435552&&(g.$$scope={dirty:m,ctx:p}),t.$set(g);const v={};m&268435484&&(v.$$scope={dirty:m,ctx:p}),i.$set(v);const b={};m&268435458&&(b.$$scope={dirty:m,ctx:p}),s.$set(b);const w={};m&268435457&&(w.$$scope={dirty:m,ctx:p}),c.$set(w)},i(p){h||(x(t.$$.fragment,p),x(i.$$.fragment,p),x(s.$$.fragment,p),x(c.$$.fragment,p),h=!0)},o(p){D(t.$$.fragment,p),D(i.$$.fragment,p),D(s.$$.fragment,p),D(c.$$.fragment,p),h=!1},d(p){p&&j(e),Z(t),Z(i),Z(s),p&&j(a),p&&j(l),p&&j(u),Z(c,p),p&&j(f),p&&j(d)}}}function g_e(n,e,t){let r,i,o,s,a;nn(n,nx,I=>t(19,o=I)),nn(n,Na,I=>t(20,s=I)),nn(n,xa,I=>t(21,a=I));let l={json:a};function u(I){if(console.log("contents changed:",I),console.log("is tauri",s),xa.update(P=>(P=I.json,P)),Na)console.log("Updating config on server"),Yo("update_config",{configNew:I.json}).then(P=>{console.log(`Message: ${P}`)}).catch(P=>console.error(P));else{let P=`${Jd.ServerURL}/config/`;fetch(P,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I.json)})}t(1,l=I)}let c=!1,f="https://raw.githubusercontent.com/terraphim/terraphim-cloud-fastapi/main/data/ref_arch.json",d="http://localhost:8000/documents/",h="http://localhost:9883/",p;const m=async()=>{console.log("Updating atomic server configuration");const I=CX.fromSecret(p);o.setServerUrl(h),console.log("Server set.Setting agent"),o.setAgent(I)},g=async()=>{w()},v=({data:{msg:I,data:P}})=>{console.log(I,P)};let b;const w=async()=>{const I=await $N(()=>import("./fetcher.worker-7e58969a.js"),[]);b=new I.default,b.onmessage=v;const P={msg:"fetcher",data:{url:f,postUrl:d,isWiki:c}};b.postMessage(P)},_=fB("http://localhost:9883/config/y3zx5wtm0bq"),y=_b(_,Mt.properties.name);nn(n,y,I=>t(12,i=I));const k=_b(_,"http://localhost:9883/property/role");nn(n,k,I=>t(0,r=I));function S(I){h=I,t(5,h)}function E(I){p=I,t(6,p)}function M(I){f=I,t(3,f)}function R(I){d=I,t(4,d)}function O(I){c=I,t(2,c)}return n.$$.update=()=>{n.$$.dirty&4096&&console.log("Print name",i),n.$$.dirty&1&&console.log("Print roles",r)},[r,l,c,f,d,h,p,u,m,g,y,k,i,S,E,M,R,O]}class v_e extends ye{constructor(e){super(),be(this,e,g_e,m_e,Be,{})}}const bS=(n,{chars:e,offset:t=0})=>n.state.doc.textBetween(Math.max(0,n.state.selection.from-e),n.state.selection.from-t,`
`);function aV(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=aV(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function b_e(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=aV(n))&&(r&&(r+=" "),r+=e);return r}function y_e(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=lV(e))&&(r&&(r+=" "),r+=t);return r}function lV(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=lV(n[r]))&&(t&&(t+=" "),t+=e);return t}var j6="-";function __e(n){var e=k_e(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function o(a){var l=a.split(j6);return l[0]===""&&l.length!==1&&l.shift(),uV(l,e)||w_e(a)}function s(a,l){var u=t[a]||[];return l&&i[a]?[].concat(u,i[a]):u}return{getClassGroupId:o,getConflictingClassGroupIds:s}}function uV(n,e){var s;if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?uV(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var o=n.join(j6);return(s=e.validators.find(function(a){var l=a.validator;return l(o)}))==null?void 0:s.classGroupId}}var oP=/^\[(.+)\]$/;function w_e(n){if(oP.test(n)){var e=oP.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function k_e(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=S_e(Object.entries(n.classGroups),t);return i.forEach(function(o){var s=o[0],a=o[1];yS(a,r,s,e)}),r}function yS(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var o=i===""?e:sP(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(C_e(i)){yS(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(s){var a=s[0],l=s[1];yS(l,sP(e,a),t,r)})})}function sP(n,e){var t=n;return e.split(j6).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function C_e(n){return n.isThemeGetter}function S_e(n,e){return e?n.map(function(t){var r=t[0],i=t[1],o=i.map(function(s){return typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(function(a){var l=a[0],u=a[1];return[e+l,u]})):s});return[r,o]}):n}function x_e(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(o,s){t.set(o,s),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(s){var a=t.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set:function(s,a){t.has(s)?t.set(s,a):i(s,a)}}}var cV="!";function E_e(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(s){for(var a=[],l=0,u=0,c,f=0;f<s.length;f++){var d=s[f];if(l===0){if(d===r&&(t||s.slice(f,f+i)===e)){a.push(s.slice(u,f)),u=f+i;continue}if(d==="/"){c=f;continue}}d==="["?l++:d==="]"&&l--}var h=a.length===0?s:s.substring(u),p=h.startsWith(cV),m=p?h.substring(1):h,g=c&&c>u?c-u:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}}}function A_e(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function M_e(n){return{cache:x_e(n.cacheSize),splitModifiers:E_e(n),...__e(n)}}var T_e=/\s+/;function O_e(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,o=new Set;return n.trim().split(T_e).map(function(s){var a=t(s),l=a.modifiers,u=a.hasImportantModifier,c=a.baseClassName,f=a.maybePostfixModifierPosition,d=r(f?c.substring(0,f):c),h=!!f;if(!d){if(!f)return{isTailwindClass:!1,originalClassName:s};if(d=r(c),!d)return{isTailwindClass:!1,originalClassName:s};h=!1}var p=A_e(l).join(":"),m=u?p+cV:p;return{isTailwindClass:!0,modifierId:m,classGroupId:d,originalClassName:s,hasPostfixModifier:h}}).reverse().filter(function(s){if(!s.isTailwindClass)return!0;var a=s.modifierId,l=s.classGroupId,u=s.hasPostfixModifier,c=a+l;return o.has(c)?!1:(o.add(c),i(l,u).forEach(function(f){return o.add(a+f)}),!0)}).reverse().map(function(s){return s.originalClassName}).join(" ")}function D_e(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,o,s=a;function a(u){var c=e[0],f=e.slice(1),d=f.reduce(function(h,p){return p(h)},c());return r=M_e(d),i=r.cache.get,o=r.cache.set,s=l,l(u)}function l(u){var c=i(u);if(c)return c;var f=O_e(u,r);return o(u,f),f}return function(){return s(y_e.apply(null,arguments))}}function Yn(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var fV=/^\[(?:([a-z-]+):)?(.+)\]$/i,R_e=/^\d+\/\d+$/,P_e=new Set(["px","full","screen"]),I_e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N_e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,B_e=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ks(n){return Kc(n)||P_e.has(n)||R_e.test(n)||_S(n)}function _S(n){return qf(n,"length",V_e)}function L_e(n){return qf(n,"size",dV)}function F_e(n){return qf(n,"position",dV)}function z_e(n){return qf(n,"url",W_e)}function tv(n){return qf(n,"number",Kc)}function Kc(n){return!Number.isNaN(Number(n))}function j_e(n){return n.endsWith("%")&&Kc(n.slice(0,-1))}function Wp(n){return aP(n)||qf(n,"number",aP)}function tn(n){return fV.test(n)}function qp(){return!0}function tu(n){return I_e.test(n)}function H_e(n){return qf(n,"",q_e)}function qf(n,e,t){var r=fV.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function V_e(n){return N_e.test(n)}function dV(){return!1}function W_e(n){return n.startsWith("url(")}function aP(n){return Number.isInteger(Number(n))}function q_e(n){return B_e.test(n)}function U_e(){var n=Yn("colors"),e=Yn("spacing"),t=Yn("blur"),r=Yn("brightness"),i=Yn("borderColor"),o=Yn("borderRadius"),s=Yn("borderSpacing"),a=Yn("borderWidth"),l=Yn("contrast"),u=Yn("grayscale"),c=Yn("hueRotate"),f=Yn("invert"),d=Yn("gap"),h=Yn("gradientColorStops"),p=Yn("gradientColorStopPositions"),m=Yn("inset"),g=Yn("margin"),v=Yn("opacity"),b=Yn("padding"),w=Yn("saturate"),_=Yn("scale"),y=Yn("sepia"),k=Yn("skew"),S=Yn("space"),E=Yn("translate"),M=function(){return["auto","contain","none"]},R=function(){return["auto","hidden","clip","visible","scroll"]},O=function(){return["auto",tn,e]},I=function(){return[tn,e]},P=function(){return["",ks]},A=function(){return["auto",Kc,tn]},N=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},F=function(){return["solid","dashed","dotted","double","none"]},V=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},W=function(){return["start","end","center","between","around","evenly","stretch"]},L=function(){return["","0",tn]},z=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},q=function(){return[Kc,tv]},te=function(){return[Kc,tn]};return{cacheSize:500,theme:{colors:[qp],spacing:[ks],blur:["none","",tu,tn],brightness:q(),borderColor:[n],borderRadius:["none","","full",tu,tn],borderSpacing:I(),borderWidth:P(),contrast:q(),grayscale:L(),hueRotate:te(),invert:L(),gap:I(),gradientColorStops:[n],gradientColorStopPositions:[j_e,_S],inset:O(),margin:O(),opacity:q(),padding:I(),saturate:q(),scale:q(),sepia:L(),skew:te(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",tn]}],container:["container"],columns:[{columns:[tu]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(N(),[tn])}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wp]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tn]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Wp]}],"grid-cols":[{"grid-cols":[qp]}],"col-start-end":[{col:["auto",{span:["full",Wp]},tn]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[qp]}],"row-start-end":[{row:["auto",{span:[Wp]},tn]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tn]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal"].concat(W())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(W(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(W(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",tn,e]}],"min-w":[{"min-w":["min","max","fit",tn,ks]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[tu]},tu,tn]}],h:[{h:[tn,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",tn,ks]}],"max-h":[{"max-h":[tn,e,"min","max","fit"]}],"font-size":[{text:["base",tu,_S]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",tv]}],"font-family":[{font:[qp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tn]}],"line-clamp":[{"line-clamp":["none",Kc,tv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",tn,ks]}],"list-image":[{"list-image":["none",tn]}],"list-style-type":[{list:["none","disc","decimal",tn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(F(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ks]}],"underline-offset":[{"underline-offset":["auto",tn,ks]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(N(),[F_e])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",L_e]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},z_e]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(F(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:F()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(F())}],"outline-offset":[{"outline-offset":[tn,ks]}],"outline-w":[{outline:[ks]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ks]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",tu,H_e]}],"shadow-color":[{shadow:[qp]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":V()}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",tu,tn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[y]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[y]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tn]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",tn]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",tn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Wp,tn]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tn]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ks,tv]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var G_e=D_e(U_e);const lP=()=>{};function wS(...n){return G_e(b_e(n))}function K_e(n){try{return new URL(n),!0}catch{return!1}}function J_e(n){if(K_e(n))return n;try{if(n.includes(".")&&!n.includes(" "))return new URL(`https://${n}`).toString()}catch{return null}}function uP(){return typeof window<"u"}function Y_e(n,e){let t=null;return(...r)=>{t&&clearTimeout(t),t=setTimeout(()=>n(...r),e)}}const X_e=(n,e)=>{const t=Bn(e);try{t.set(uP()&&localStorage.getItem(n)?JSON.parse(localStorage.getItem(n)):e)}catch{}return Kr(t.subscribe(r=>{uP()&&localStorage.setItem(n,JSON.stringify(r))})),t};function fi(n){this.content=n}fi.prototype={constructor:fi,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new fi(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new fi(t)},addToStart:function(n,e){return new fi([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new fi(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new fi(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=fi.from(n),n.size?new fi(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=fi.from(n),n.size?new fi(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=fi.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};fi.from=function(n){if(n instanceof fi)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new fi(e)};function hV(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)t++;return t}if(i.content.size||o.content.size){let s=hV(i.content,o.content,t+1);if(s!=null)return s}t+=i.nodeSize}}function pV(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let s=n.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){t-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:t,b:r};if(s.isText&&s.text!=a.text){let u=0,c=Math.min(s.text.length,a.text.length);for(;u<c&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(s.content.size||a.content.size){let u=pV(s.content,a.content,t-1,r-1);if(u)return u}t-=l,r-=l}}class Fe{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let s=0,a=0;a<t;s++){let l=this.content[s],u=a+l.nodeSize;if(u>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,t-c),r,i+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",s=!0;return this.nodesBetween(e,t,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new Fe(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),r.push(a),i+=a.nodeSize),s=l}return new Fe(r,i)}cutByIndex(e,t){return e==t?Fe.empty:e==0&&t==this.content.length?this:new Fe(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new Fe(i,o)}addToStart(e){return new Fe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return hV(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return pV(this,e,t,r)}findIndex(e,t=-1){if(e==0)return nv(0,e);if(e==this.size)return nv(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||t>0?nv(r+1,s):nv(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Fe.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fe(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fe.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new Fe(t||e,r)}static from(e){if(!e)return Fe.empty;if(e instanceof Fe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fe.empty=new Fe([],0);const Ck={index:0,offset:0};function nv(n,e){return Ck.index=n,Ck.offset=e,Ck}function vy(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!vy(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!vy(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let kn=class kS{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&vy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return kS.none;if(e instanceof kS)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};kn.none=[];class by extends Error{}class at{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=gV(this.content,e+this.openStart,t);return r&&new at(r,this.openStart,this.openEnd)}removeBetween(e,t){return new at(mV(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return at.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new at(Fe.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new at(e,r,i)}}at.empty=new at(Fe.empty,0,0);function mV(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:s,offset:a}=n.findIndex(t);if(i==e||o.isText){if(a!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(mV(o.content,e-i-1,t-i-1)))}function gV(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),s=n.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=gV(s.content,e-o-1,t);return a&&n.replaceChild(i,s.copy(a))}function Q_e(n,e,t){if(t.openStart>n.depth)throw new by("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new by("Inconsistent open depths");return vV(n,e,t,0)}function vV(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let s=vV(n,e,t,r+1);return o.copy(o.content.replaceChild(i,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,a=s.content;return rf(s,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=Z_e(t,n);return rf(o,yV(n,s,a,e,r))}else return rf(o,yy(n,e,r))}function bV(n,e){if(!e.type.compatibleContent(n.type))throw new by("Cannot join "+e.type.name+" onto "+n.type.name)}function CS(n,e,t){let r=n.node(t);return bV(r,e.node(t)),r}function nf(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function T0(n,e,t,r){let i=(e||n).node(t),o=0,s=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(nf(n.nodeAfter,r),o++));for(let a=o;a<s;a++)nf(i.child(a),r);e&&e.depth==t&&e.textOffset&&nf(e.nodeBefore,r)}function rf(n,e){return n.type.checkContent(e),n.copy(e)}function yV(n,e,t,r,i){let o=n.depth>i&&CS(n,e,i+1),s=r.depth>i&&CS(t,r,i+1),a=[];return T0(null,n,i,a),o&&s&&e.index(i)==t.index(i)?(bV(o,s),nf(rf(o,yV(n,e,t,r,i+1)),a)):(o&&nf(rf(o,yy(n,e,i+1)),a),T0(e,t,i,a),s&&nf(rf(s,yy(t,r,i+1)),a)),T0(r,null,i,a),new Fe(a)}function yy(n,e,t){let r=[];if(T0(null,n,t,r),n.depth>t){let i=CS(n,e,t+1);nf(rf(i,yy(n,e,t+1)),r)}return T0(e,null,t,r),new Fe(r)}function Z_e(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(Fe.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Tm{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return kn.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new _y(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),u=o-l;if(r.push(s,a,i+l),!u||(s=s.child(a),s.isText))break;o=u-1,i+=l+1}return new Tm(t,r,o)}static resolveCached(e,t){let r=cP.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==t)return s}else cP.set(e,r=new $_e);let i=r.elts[r.i]=Tm.resolve(e,t);return r.i=(r.i+1)%ewe,i}}class $_e{constructor(){this.elts=[],this.i=0}}const ewe=12,cP=new WeakMap;class _y{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const twe=Object.create(null);let Fu=class SS{constructor(e,t,r,i=kn.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||Fe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&vy(this.attrs,t||e.defaultAttrs||twe)&&kn.sameSet(this.marks,r||kn.none)}copy(e=null){return e==this.content?this:new SS(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new SS(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return at.empty;let i=this.resolve(e),o=this.resolve(t),s=r?0:i.sharedDepth(t),a=i.start(s),u=i.node(s).content.cut(i.pos-a,o.pos-a);return new at(u,i.depth-s,o.depth-s)}replace(e,t,r){return Q_e(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Tm.resolveCached(this,e)}resolveNoCache(e){return Tm.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),_V(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=Fe.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=kn.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!kn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=Fe.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Fu.prototype.text=void 0;class wy extends Fu{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):_V(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new wy(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new wy(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function _V(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Sf{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new nwe(e,t);if(r.next==null)return Sf.empty;let i=wV(r);r.next&&r.err("Unexpected trailing text");let o=uwe(lwe(i));return cwe(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!t||l.validEnd))return Fe.from(a.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,a.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}Sf.empty=new Sf(!0);class nwe{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function wV(n){let e=[];do e.push(rwe(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function rwe(n){let e=[];do e.push(iwe(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function iwe(n){let e=awe(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=owe(n,e);else break;return e}function fP(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function owe(n,e){let t=fP(n),r=t;return n.eat(",")&&(n.next!="}"?r=fP(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function swe(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let s=t[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function awe(n){if(n.eat("(")){let e=wV(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=swe(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function lwe(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(s,a,l){let u={term:l,to:a};return e[s].push(u),u}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,u)=>l.concat(o(u,a)),[]);if(s.type=="seq")for(let l=0;;l++){let u=o(s.exprs[l],a);if(l==s.exprs.length-1)return u;i(u,a=t())}else if(s.type=="star"){let l=t();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=t();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let u=0;u<s.min;u++){let c=t();i(o(s.expr,l),c),l=c}if(s.max==-1)i(o(s.expr,l),l);else for(let u=s.min;u<s.max;u++){let c=t();r(l,c),i(o(s.expr,l),c),l=c}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function kV(n,e){return e-n}function dP(n,e){let t=[];return r(e),t.sort(kV);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&t.indexOf(l)==-1&&r(l)}}}function uwe(n){let e=Object.create(null);return t(dP(n,0));function t(r){let i=[];r.forEach(s=>{n[s].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);dP(n,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new Sf(r.indexOf(n.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(kV);o.next.push({type:i[s][0],next:e[a.join(",")]||t(a)})}return o}}function cwe(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function CV(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function SV(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function xV(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(e[i])}}function EV(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new dwe(n,r,e[r]);return t}let hP=class AV{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=EV(e,r.attrs),this.defaultAttrs=CV(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Sf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:SV(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Fu(this,this.computeAttrs(e),Fe.from(t),kn.setFrom(r))}createChecked(e=null,t,r){return t=Fe.from(t),this.checkContent(t),new Fu(this,this.computeAttrs(e),t,kn.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=Fe.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(Fe.empty,!0);return o?new Fu(this,e,t.append(o),kn.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){xV(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:kn.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,s)=>r[o]=new AV(o,t,s));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function fwe(n,e,t){let r=t.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class dwe{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?fwe(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class D_{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=EV(e,i.attrs),this.excluded=null;let o=CV(this.attrs);this.instance=o?new kn(this,o):null}create(e=null){return!e&&this.instance?this.instance:new kn(this,SV(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new D_(o,i++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){xV(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class H6{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=fi.from(e.nodes),t.marks=fi.from(e.marks||{}),this.nodes=hP.compile(this.spec.nodes,this),this.marks=D_.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=Sf.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?pP(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:pP(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof hP){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new wy(r,r.defaultAttrs,e,kn.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Fu.fromJSON(this,e)}markFromJSON(e){return kn.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function pP(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],s=o;if(o)t.push(o);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function hwe(n){return n.tag!=null}function pwe(n){return n.style!=null}class Al{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(hwe(i))this.tags.push(i);else if(pwe(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new gP(this,t,!1);return r.addAll(e,kn.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new gP(this,t,!0);return r.addAll(e,kn.none,t.from,t.to),at.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(vwe(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(s.getAttrs){let l=s.getAttrs(t);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<t.length;s++){let a=t[s];if((a.priority==null?50:a.priority)<o)break}t.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=vP(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=vP(s)),s.node||s.ignore||s.mark||(s.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Al(e,Al.schemaRules(e)))}}const MV={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},mwe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},TV={ol:!0,ul:!0},Om=1,xS=2,O0=4;function mP(n,e,t){return e!=null?(e?Om:0)|(e==="full"?xS:0):n&&n.whitespace=="pre"?Om|xS:t&~O0}class rv{constructor(e,t,r,i,o,s){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=kn.none,this.match=o||(s&O0?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Fe.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Om)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=Fe.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Fe.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!MV.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class gP{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,o,s=mP(null,t.preserveWhitespace,0)|(r?O0:0);i?o=new rv(i.type,i.attrs,kn.none,!0,t.topMatch||i.type.contentMatch,s):r?o=new rv(null,null,kn.none,!0,null,s):o=new rv(e.schema.topNodeType,null,kn.none,!0,null,s),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,o=i.options&xS?"full":this.localPreserveWS||(i.options&Om)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;TV.hasOwnProperty(s)&&this.parser.normalizeLists&&gwe(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:mwe.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,c=this.needsBlock;if(MV.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let f=l&&l.skip?t:this.readStyles(e,t);f&&this.addAll(e,f),u&&this.sync(o),this.needsBlock=c}else{let u=this.readStyles(e,t);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(u=>!l.clearMark(u)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,r,i){let o,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,t.attrs||null,r,t.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[t.mark];r=r.concat(l.create(t.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}o&&this.sync(a)&&this.open--}addAll(e,t,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,t);this.findAtPoint(e,o)}findPlace(e,t,r){let i,o;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],u=l.findWrapping(e);if(u&&(!i||i.length>u.length+a)&&(i=u,o=l,!u.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)t=this.enterInner(i[s],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=kn.none;for(let a of i.concat(e.marks))(o.type?o.type.allowsMarkType(a.type):bP(a.type,e.type))&&(s=a.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,t,r,i){let o=this.findPlace(e.create(t),r,!1);return o&&(o=this.enterInner(e,t,r,!0,i)),o}enterInner(e,t,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=mP(e,o,s.options);s.options&O0&&s.content.length==0&&(a|=O0);let l=kn.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):bP(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new rv(e,t,l,i,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Om)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let u=t[a];if(u==""){if(a==t.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;l--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function gwe(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&TV.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function vwe(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function vP(n){let e={};for(let t in n)e[t]=n[t];return e}function bP(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}class Uf{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Sk(t).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let u=s.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(o[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let u=s.marks[l++],c=this.serializeMark(u,s.isInline,t);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=rb(Sk(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&rb(Sk(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return rb(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Uf(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=yP(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return yP(e.marks)}}function yP(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Sk(n){return n.document||window.document}const _P=new WeakMap;function bwe(n){let e=_P.get(n);return e===void 0&&_P.set(n,e=ywe(n)),e}function ywe(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function rb(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=bwe(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(t=i.slice(0,s),i=i.slice(s+1));let a,l=t?n.createElementNS(t,i):n.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let f in u)if(u[f]!=null){let d=f.indexOf(" ");d>0?l.setAttributeNS(f.slice(0,d),f.slice(d+1),u[f]):l.setAttribute(f,u[f])}}for(let f=c;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=rb(n,d,t,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const OV=65535,DV=Math.pow(2,16);function _we(n,e){return n+e*DV}function wP(n){return n&OV}function wwe(n){return(n-(n&OV))/DV}const RV=1,PV=2,ib=4,IV=8;class ES{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&IV)>0}get deletedBefore(){return(this.delInfo&(RV|ib))>0}get deletedAfter(){return(this.delInfo&(PV|ib))>0}get deletedAcross(){return(this.delInfo&ib)>0}}class Co{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Co.empty)return Co.empty}recover(e){let t=0,r=wP(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+wwe(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+o],c=this.ranges[a+s],f=l+u;if(e<=f){let d=u?e==l?-1:e==f?1:t:t,h=l+i+(d<0?0:c);if(r)return h;let p=e==(t<0?l:f)?null:_we(a/3,e-l),m=e==l?PV:e==f?RV:ib;return(t<0?e!=l:e!=f)&&(m|=IV),new ES(h,m,p)}i+=c-u}return r?e+i:new ES(e+i,0,null)}touches(e,t){let r=0,i=wP(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+o],c=l+u;if(e<=c&&a==i*3)return!0;r+=this.ranges[a+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(a,a+u,l,l+c),o+=c-u}}invert(){return new Co(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Co.empty:new Co(e<0?[0,-e,0]:[0,0,e])}}Co.empty=new Co([]);class Dm{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Dm(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Dm;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],a=s.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new ES(e,i,null)}}const xk=Object.create(null);class Li{getMap(){return Co.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=xk[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in xk)throw new RangeError("Duplicate use of step JSON ID "+e);return xk[e]=t,t.prototype.jsonID=e,t}}class Lr{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Lr(e,null)}static fail(e){return new Lr(null,e)}static fromReplace(e,t,r,i){try{return Lr.ok(e.replace(t,r,i))}catch(o){if(o instanceof by)return Lr.fail(o.message);throw o}}}function V6(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(V6(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return Fe.fromArray(r)}class xu extends Li{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new at(V6(t.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return Lr.fromReplace(e,this.from,this.to,o)}invert(){return new _a(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new xu(t.pos,r.pos,this.mark)}merge(e){return e instanceof xu&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xu(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new xu(t.from,t.to,e.markFromJSON(t.mark))}}Li.jsonID("addMark",xu);class _a extends Li{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new at(V6(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Lr.fromReplace(e,this.from,this.to,r)}invert(){return new xu(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new _a(t.pos,r.pos,this.mark)}merge(e){return e instanceof _a&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new _a(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new _a(t.from,t.to,e.markFromJSON(t.mark))}}Li.jsonID("removeMark",_a);class Eu extends Li{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Lr.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Lr.fromReplace(e,this.pos,this.pos+1,new at(Fe.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Eu(this.pos,t.marks[i]);return new Eu(this.pos,this.mark)}}return new xf(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Eu(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Eu(t.pos,e.markFromJSON(t.mark))}}Li.jsonID("addNodeMark",Eu);class xf extends Li{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Lr.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Lr.fromReplace(e,this.pos,this.pos+1,new at(Fe.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Eu(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new xf(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new xf(t.pos,e.markFromJSON(t.mark))}}Li.jsonID("removeNodeMark",xf);class Zr extends Li{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&AS(e,this.from,this.to)?Lr.fail("Structure replace would overwrite content"):Lr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Co([this.from,this.to-this.from,this.slice.size])}invert(e){return new Zr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Zr(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Zr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?at.empty:new at(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Zr(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?at.empty:new at(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Zr(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Zr(t.from,t.to,at.fromJSON(e,t.slice),!!t.structure)}}Li.jsonID("replace",Zr);class ti extends Li{constructor(e,t,r,i,o,s,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(AS(e,this.from,this.gapFrom)||AS(e,this.gapTo,this.to)))return Lr.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Lr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Lr.fromReplace(e,this.from,this.to,r):Lr.fail("Content does not fit in gap")}getMap(){return new Co([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ti(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new ti(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ti(t.from,t.to,t.gapFrom,t.gapTo,at.fromJSON(e,t.slice),t.insert,!!t.structure)}}Li.jsonID("replaceAround",ti);function AS(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function kwe(n,e,t,r){let i=[],o=[],s,a;n.doc.nodesBetween(e,t,(l,u,c)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),h=Math.min(u+l.nodeSize,t),p=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(s&&s.to==d&&s.mark.eq(f[m])?s.to=h:i.push(s=new _a(d,h,f[m])));a&&a.to==d?a.to=h:o.push(a=new xu(d,h,r))}}),i.forEach(l=>n.step(l)),o.forEach(l=>n.step(l))}function Cwe(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof D_){let u=s.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let u=Math.min(a+s.nodeSize,t);for(let c=0;c<l.length;c++){let f=l[c],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(a,e),to:u,step:o})}}}),i.forEach(s=>n.step(new _a(s.from,s.to,s.style)))}function W6(n,e,t,r=t.contentMatch,i=!0){let o=n.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let u=o.child(l),c=a+u.nodeSize,f=r.matchType(u.type);if(!f)s.push(new Zr(a,c,at.empty));else{r=f;for(let d=0;d<u.marks.length;d++)t.allowsMarkType(u.marks[d].type)||n.step(new _a(a,c,u.marks[d]));if(i&&u.isText&&t.whitespace!="pre"){let d,h=/\r?\n|\r/g,p;for(;d=h.exec(u.text);)p||(p=new at(Fe.from(t.schema.text(" ",t.allowedMarks(u.marks))),0,0)),s.push(new Zr(a+d.index,a+d.index+d[0].length,p))}}a=c}if(!r.validEnd){let l=r.fillBefore(Fe.empty,!0);n.replace(a,a,new at(l,0,0))}for(let l=s.length-1;l>=0;l--)n.step(s[l])}function Swe(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function pp(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,s,t))return r;if(r==0||i.type.spec.isolating||!Swe(i,o,s))break}return null}function xwe(n,e,t){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,u=a,c=Fe.empty,f=0;for(let p=o,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,c=Fe.from(r.node(p).copy(c)),f++):l--;let d=Fe.empty,h=0;for(let p=o,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=Fe.from(i.node(p).copy(d)),h++):u++;n.step(new ti(l,u,s,a,new at(c.append(d),f,h),c.size-f,!0))}function q6(n,e,t=null,r=n){let i=Ewe(n,e),o=i&&Awe(r,e);return o?i.map(kP).concat({type:e,attrs:t}).concat(o.map(kP)):null}function kP(n){return{type:n,attrs:null}}function Ewe(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return t.canReplaceWith(r,i,s)?o:null}function Awe(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(t.child(u).type);return!l||!l.validEnd?null:s}function Mwe(n,e,t){let r=Fe.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let a=t[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Fe.from(t[s].type.create(t[s].attrs,r))}let i=e.start,o=e.end;n.step(new ti(i,o,i,o,new at(r,0,0),t.length,!0))}function Twe(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(s,a)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,l)&&Owe(n.doc,n.mapping.slice(o).map(a),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?u=!1:!h&&p&&(u=!0)}u===!1&&BV(n,s,a,o),W6(n,n.mapping.slice(o).map(a,1),r,void 0,u===null);let c=n.mapping.slice(o),f=c.map(a,1),d=c.map(a+s.nodeSize,1);return n.step(new ti(f,d,f+1,d-1,new at(Fe.from(r.create(l,null,s.marks)),0,0),1,!0)),u===!0&&NV(n,s,a,o),!1}})}function NV(n,e,t,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let l=n.mapping.slice(r).map(t+1+o+s.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function BV(n,e,t,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=n.mapping.slice(r).map(t+1+o);n.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function Owe(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function Dwe(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let s=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ti(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new at(Fe.from(s),0,0),1,!0))}function lh(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=t-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[c]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function Rwe(n,e,t=1,r){let i=n.doc.resolve(e),o=Fe.empty,s=Fe.empty;for(let a=i.depth,l=i.depth-t,u=t-1;a>l;a--,u--){o=Fe.from(i.node(a).copy(o));let c=r&&r[u];s=Fe.from(c?c.type.create(c.attrs,s):i.node(a).copy(s))}n.step(new Zr(e,e,new at(o.append(s),t,t),!0))}function mc(n,e){let t=n.resolve(e),r=t.index();return LV(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Pwe(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(s),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function LV(n,e){return!!(n&&e&&!n.isLeaf&&Pwe(n,e))}function R_(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):t>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&LV(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function Iwe(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,o=n.doc.resolve(e-t),s=o.node().type;if(i&&s.inlineContent){let c=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);c&&!f?r=!1:!c&&f&&(r=!0)}let a=n.steps.length;if(r===!1){let c=n.doc.resolve(e+t);BV(n,c.node(),c.before(),a)}s.inlineContent&&W6(n,e+t-1,s,o.node().contentMatchAt(o.index()),r==null);let l=n.mapping.slice(a),u=l.map(e-t);if(n.step(new Zr(u,l.map(e+t,-1),at.empty,!0)),r===!0){let c=n.doc.resolve(u);NV(n,c.node(),c.before(),n.steps.length)}return n}function Nwe(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function FV(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(l,l,f[0])}if(c)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function P_(n,e,t=e,r=at.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return zV(i,o,r)?new Zr(e,t,r):new Bwe(i,o,r).fit()}function zV(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Bwe{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=Fe.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Fe.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new at(o,s,a);return e>-1?new ti(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new Zr(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Ek(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,f=null;if(t==1&&(s?u.matchType(s.type)||(f=u.fillBefore(Fe.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(t==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ek(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new at(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ek(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new at(l0(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new at(l0(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;u<a.childCount;){let m=a.child(u),g=f.matchType(m.type);if(!g)break;u++,(u>1||l==0||m.content.size)&&(f=g,c.push(jV(m.mark(d.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?h:-1)))}let p=u==a.childCount;p||(h=-1),this.placed=u0(this.placed,t,Fe.from(c)),this.frontier[t].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<h;m++){let v=g.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),g=v.content}this.unplaced=p?e==0?at.empty:new at(l0(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new at(l0(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ak(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Ak(e,t,i,r,o);if(s){for(let a=t-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=Ak(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=u0(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=u0(this.placed,this.depth,Fe.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Fe.empty,!0);t.childCount&&(this.placed=u0(this.placed,this.frontier.length,t))}}function l0(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(l0(n.firstChild.content,e-1,t)))}function u0(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(u0(n.lastChild.content,e-1,t)))}function Ek(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function jV(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,jV(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(Fe.empty,!0)))),n.copy(r)}function Ak(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!Lwe(t,o.content,s)?a:null}function Lwe(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Fwe(n){return n.spec.defining||n.spec.definingForContent}function zwe(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(zV(i,o,r))return n.step(new Zr(e,t,r));let s=VV(i,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(d)>-1?a=d:i.before(d)==h&&s.splice(1,0,-d)}let l=s.indexOf(a),u=[],c=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(u.push(p),h==r.openStart)break;d=p.content}for(let d=c-1;d>=0;d--){let h=u[d],p=Fwe(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))c=d;else if(p||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+c+1)%(r.openStart+1),p=u[h];if(p)for(let m=0;m<s.length;m++){let g=s[(m+l)%s.length],v=!0;g<0&&(v=!1,g=-g);let b=i.node(g-1),w=i.index(g-1);if(b.canReplaceWith(w,w,p.type,p.marks))return n.replace(i.before(g),v?o.after(g):t,new at(HV(r.content,0,r.openStart,h),h,r.openEnd))}}let f=n.steps.length;for(let d=s.length-1;d>=0&&(n.replace(e,t,r),!(n.steps.length>f));d--){let h=s[d];h<0||(e=i.before(h),t=o.after(h))}}function HV(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(HV(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(Fe.empty,!0))}return n}function jwe(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=Nwe(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new at(Fe.from(r),0,0))}function Hwe(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=VV(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&i.end(s)-t!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return n.delete(r.before(s),t);n.delete(e,t)}function VV(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class uh extends Li{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Lr.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Lr.fromReplace(e,this.pos,this.pos+1,new at(Fe.from(i),0,t.isLeaf?0:1))}getMap(){return Co.empty}invert(e){return new uh(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new uh(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new uh(t.pos,t.attr,t.value)}}Li.jsonID("attr",uh);class Rm extends Li{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Lr.ok(r)}getMap(){return Co.empty}invert(e){return new Rm(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Rm(t.attr,t.value)}}Li.jsonID("docAttr",Rm);let Bh=class extends Error{};Bh=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Bh.prototype=Object.create(Error.prototype);Bh.prototype.constructor=Bh;Bh.prototype.name="TransformError";class WV{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Dm}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Bh(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=at.empty){let i=P_(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new at(Fe.from(r),0,0))}delete(e,t){return this.replace(e,t,at.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return zwe(this,e,t,r),this}replaceRangeWith(e,t,r){return jwe(this,e,t,r),this}deleteRange(e,t){return Hwe(this,e,t),this}lift(e,t){return xwe(this,e,t),this}join(e,t=1){return Iwe(this,e,t),this}wrap(e,t){return Mwe(this,e,t),this}setBlockType(e,t=e,r,i=null){return Twe(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return Dwe(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new uh(e,t,r)),this}setDocAttribute(e,t){return this.step(new Rm(e,t)),this}addNodeMark(e,t){return this.step(new Eu(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof kn)t.isInSet(r.marks)&&this.step(new xf(e,t));else{let i=r.marks,o,s=[];for(;o=t.isInSet(i);)s.push(new xf(e,o)),i=o.removeFromSet(i);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,t=1,r){return Rwe(this,e,t,r),this}addMark(e,t,r){return kwe(this,e,t,r),this}removeMark(e,t,r){return Cwe(this,e,t,r),this}clearIncompatible(e,t,r){return W6(this,e,t,r),this}}const Mk=Object.create(null);class qt{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Vwe(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=at.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:u}=s[a],c=e.mapping.slice(o);e.replaceRange(c.map(l.pos),c.map(u.pos),a?at.empty:t),a==0&&xP(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),u=l.map(s.pos),c=l.map(a.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,t),xP(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Lt(e):xd(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=t<0?xd(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):xd(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new ns(e.node(0))}static atStart(e){return xd(e,e,0,0,1)||new ns(e)}static atEnd(e){return xd(e,e,e.content.size,e.childCount,-1)||new ns(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Mk[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Mk)throw new RangeError("Duplicate use of selection JSON ID "+e);return Mk[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Lt.between(this.$anchor,this.$head).getBookmark()}}qt.prototype.visible=!0;class Vwe{constructor(e,t){this.$from=e,this.$to=t}}let CP=!1;function SP(n){!CP&&!n.parent.inlineContent&&(CP=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Lt extends qt{constructor(e,t=e){SP(e),SP(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return qt.near(r);let i=e.resolve(t.map(this.anchor));return new Lt(i.parent.inlineContent?i:r,r)}replace(e,t=at.empty){if(super.replace(e,t),t==at.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Lt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new I_(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Lt(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=qt.findFrom(t,r,!0)||qt.findFrom(t,-r,!0);if(o)t=o.$head;else return qt.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(qt.findFrom(e,-r,!0)||qt.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Lt(e,t)}}qt.jsonID("text",Lt);class I_{constructor(e,t){this.anchor=e,this.head=t}map(e){return new I_(e.map(this.anchor),e.map(this.head))}resolve(e){return Lt.between(e.resolve(this.anchor),e.resolve(this.head))}}class Dt extends qt{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?qt.near(o):new Dt(o)}content(){return new at(Fe.from(this.node),0,0)}eq(e){return e instanceof Dt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new U6(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Dt(e.resolve(t.anchor))}static create(e,t){return new Dt(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Dt.prototype.visible=!1;qt.jsonID("node",Dt);class U6{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new I_(r,r):new U6(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Dt.isSelectable(r)?new Dt(t):qt.near(t)}}class ns extends qt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=at.empty){if(t==at.empty){e.delete(0,e.doc.content.size);let r=qt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new ns(e)}map(e){return new ns(e)}eq(e){return e instanceof ns}getBookmark(){return Wwe}}qt.jsonID("all",ns);const Wwe={map(){return this},resolve(n){return new ns(n)}};function xd(n,e,t,r,i,o=!1){if(e.inlineContent)return Lt.create(n,t);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&Dt.isSelectable(a))return Dt.create(n,t-(i<0?a.nodeSize:0))}else{let l=xd(n,a,t+i,i<0?a.childCount:0,i,o);if(l)return l}t+=a.nodeSize*i}return null}function xP(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Zr||i instanceof ti))return;let o=n.mapping.maps[r],s;o.forEach((a,l,u,c)=>{s==null&&(s=c)}),n.setSelection(qt.near(n.doc.resolve(s),t))}const EP=1,iv=2,AP=4;class qwe extends WV{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|EP)&~iv,this.storedMarks=null,this}get selectionSet(){return(this.updated&EP)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=iv,this}ensureMarks(e){return kn.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&iv)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~iv,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||kn.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(t);o=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(qt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=AP,this}get scrolledIntoView(){return(this.updated&AP)>0}}function MP(n,e){return!e||!n?n:n.bind(e)}class c0{constructor(e,t,r){this.name=e,this.init=MP(t.init,r),this.apply=MP(t.apply,r)}}const Uwe=[new c0("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new c0("selection",{init(n,e){return n.selection||qt.atStart(e.doc)},apply(n){return n.selection}}),new c0("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new c0("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Tk{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Uwe.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new c0(r.key,r.spec.state,r))})}}class zd{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,u=i?i[s].state:this,c=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new zd(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new qwe(this)}static create(e){let t=new Tk(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new zd(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Tk(this.schema,e.plugins),r=t.fields,i=new zd(t);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Tk(e.schema,e.plugins),o=new zd(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Fu.fromJSON(e.schema,t.doc);else if(s.name=="selection")o.selection=qt.fromJSON(o.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){o[s.name]=u.fromJSON.call(l,e,t[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function qV(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=qV(i,e,{})),t[r]=i}return t}class Sr{constructor(e){this.spec=e,this.props={},e.props&&qV(e.props,this,this.props),this.key=e.key?e.key.key:UV("plugin")}getState(e){return e[this.key]}}const Ok=Object.create(null);function UV(n){return n in Ok?n+"$"+ ++Ok[n]:(Ok[n]=0,n+"$")}class si{constructor(e="key"){this.key=UV(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const gi=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Lh=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let MS=null;const pl=function(n,e,t){let r=MS||(MS=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Gwe=function(){MS=null},Ef=function(n,e,t,r){return t&&(TP(n,e,t,r,-1)||TP(n,e,t,r,1))},Kwe=/^(img|br|input|textarea|hr)$/i;function TP(n,e,t,r,i){for(var o;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Uo(n))){let s=n.parentNode;if(!s||s.nodeType!=1||Ng(n)||Kwe.test(n.nodeName)||n.contentEditable=="false")return!1;e=gi(n)+(i<0?0:1),n=s}else if(n.nodeType==1){let s=n.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else n=s,e=i<0?Uo(n):0}else return!1}}function Uo(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Jwe(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Uo(n)}else if(n.parentNode&&!Ng(n))e=gi(n),n=n.parentNode;else return null}}function Ywe(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Ng(n))e=gi(n)+1,n=n.parentNode;else return null}}function Xwe(n,e,t){for(let r=e==0,i=e==Uo(n);r||i;){if(n==t)return!0;let o=gi(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==Uo(n)}}function Ng(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const N_=function(n){return n.focusNode&&Ef(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Fc(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Qwe(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Zwe(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Uo(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Uo(r.startContainer),r.startOffset)}}}const Ha=typeof navigator<"u"?navigator:null,OP=typeof document<"u"?document:null,gc=Ha&&Ha.userAgent||"",TS=/Edge\/(\d+)/.exec(gc),GV=/MSIE \d/.exec(gc),OS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(gc),oo=!!(GV||OS||TS),zu=GV?document.documentMode:OS?+OS[1]:TS?+TS[1]:0,Gs=!oo&&/gecko\/(\d+)/i.test(gc);Gs&&+(/Firefox\/(\d+)/.exec(gc)||[0,0])[1];const DS=!oo&&/Chrome\/(\d+)/.exec(gc),Mi=!!DS,KV=DS?+DS[1]:0,Ji=!oo&&!!Ha&&/Apple Computer/.test(Ha.vendor),Fh=Ji&&(/Mobile\/\w+/.test(gc)||!!Ha&&Ha.maxTouchPoints>2),Fo=Fh||(Ha?/Mac/.test(Ha.platform):!1),$we=Ha?/Win/.test(Ha.platform):!1,_l=/Android \d/.test(gc),Bg=!!OP&&"webkitFontSmoothing"in OP.documentElement.style,eke=Bg?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function tke(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function cl(n,e){return typeof n=="number"?n:n[e]}function nke(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function DP(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let s=t||n.dom;s;){if(s.nodeType!=1){s=Lh(s);continue}let a=s,l=a==o.body,u=l?tke(o):nke(a),c=0,f=0;if(e.top<u.top+cl(r,"top")?f=-(u.top-e.top+cl(i,"top")):e.bottom>u.bottom-cl(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+cl(i,"top")-u.top:e.bottom-u.bottom+cl(i,"bottom")),e.left<u.left+cl(r,"left")?c=-(u.left-e.left+cl(i,"left")):e.right>u.right-cl(r,"right")&&(c=e.right-u.right+cl(i,"right")),c||f)if(l)o.defaultView.scrollBy(c,f);else{let h=a.scrollLeft,p=a.scrollTop;f&&(a.scrollTop+=f),c&&(a.scrollLeft+=c);let m=a.scrollLeft-h,g=a.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let d=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(d))break;s=d=="absolute"?s.offsetParent:Lh(s)}}function rke(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=n.root.elementFromPoint(o,s);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:JV(n.dom)}}function JV(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Lh(r));return e}function ike({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;YV(t,r==0?0:r-e)}function YV(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let dd=null;function oke(n){if(n.setActive)return n.setActive();if(dd)return n.focus(dd);let e=JV(n);n.focus(dd==null?{get preventScroll(){return dd={preventScroll:!0},!0}}:void 0),dd||(dd=!1,YV(e,0))}function XV(n,e){let t,r=2e8,i,o=0,s=e.top,a=e.top,l,u;for(let c=n.firstChild,f=0;c;c=c.nextSibling,f++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=pl(c).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){t=c,r=m,i=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&m&&(o=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=f+1)}}return!t&&l&&(t=l,i=u,r=0),t&&t.nodeType==3?ske(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:XV(t,i)}function ske(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=ou(r,1);if(o.top!=o.bottom&&G6(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function G6(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function ake(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function lke(n,e,t){let{node:r,offset:i}=XV(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function uke(n,e,t,r){let i=-1;for(let o=e,s=!1;o!=n.dom;){let a=n.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?i=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function QV(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let s=n.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(G6(e,u))return QV(s,e,u)}}if((o=(o+1)%r)==i)break}return n}function cke(n,e){let t=n.dom.ownerDocument,r,i=0,o=Zwe(t,e.left,e.top);o&&({node:r,offset:i}=o);let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=n.dom.getBoundingClientRect();if(!G6(e,u)||(s=QV(n.dom,e,u),!s))return null}if(Ji)for(let u=s;r&&u;u=Lh(u))u.draggable&&(r=void 0);if(s=ake(s,e),r){if(Gs&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let u;Bg&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=uke(n,r,i,e))}a==null&&(a=lke(n,s,e));let l=n.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function RP(n){return n.top<n.bottom||n.left<n.right}function ou(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(RP(r))return r}return Array.prototype.find.call(t,RP)||n.getBoundingClientRect()}const fke=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ZV(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),s=Bg||Gs;if(r.nodeType==3)if(s&&(fke.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let l=ou(pl(r,i,i),t);if(Gs&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=ou(pl(r,i-1,i-1),-1);if(u.top==l.top){let c=ou(pl(r,i,i+1),-1);if(c.top!=l.top)return Up(c,c.left<u.left)}}return l}else{let l=i,u=i,c=t<0?1:-1;return t<0&&!i?(u++,c=-1):t>=0&&i==r.nodeValue.length?(l--,c=1):t<0?l--:u++,Up(ou(pl(r,l,u),c),c<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==Uo(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Dk(l.getBoundingClientRect(),!1)}if(o==null&&i<Uo(r)){let l=r.childNodes[i];if(l.nodeType==1)return Dk(l.getBoundingClientRect(),!0)}return Dk(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==Uo(r))){let l=r.childNodes[i-1],u=l.nodeType==3?pl(l,Uo(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Up(ou(u,1),!1)}if(o==null&&i<Uo(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?pl(l,0,s?0:1):l.nodeType==1?l:null:null;if(u)return Up(ou(u,-1),!0)}return Up(ou(r.nodeType==3?pl(r):r,-t),t>=0)}function Up(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Dk(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function $V(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function dke(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return $V(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=ZV(n,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=pl(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(t=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const hke=/[\u0590-\u08ac]/;function pke(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=n.domSelection();return a?!hke.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?o:s:$V(n,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:f}=n.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&u==m;try{a.collapse(c,f),l&&(l!=c||u!=f)&&a.extend&&a.extend(l,u)}catch{}return d!=null&&(a.caretBidiLevel=d),g}):r.pos==r.start()||r.pos==r.end()}let PP=null,IP=null,NP=!1;function mke(n,e,t){return PP==e&&IP==t?NP:(PP=e,IP=t,NP=t=="up"||t=="down"?dke(n,e,t):pke(n,e,t))}const rs=0,BP=1,Jc=2,Va=3;class Lg{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=rs,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>gi(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!t||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let a=i.children[s];if(a.size){i=a;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof tW){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof eW&&o.side>=0;r--);if(t<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&t&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?gi(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?gi(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],u=s+l.size;if(i==-1&&e<=u){let c=s+l.border;if(e>=c&&t<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,c);e=s;for(let f=a;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=gi(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>t||a==this.children.length-1)){t=u;for(let c=a+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=gi(f.dom);break}t+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),s=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],g=p+m.size;if(o>p&&s<g)return m.setSelection(e-p-m.border,t-p-m.border,r,i);p=g}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),f=!1;if((Gs||Ji)&&e==t){let{node:h,offset:p}=a;if(h.nodeType==3){if(f=!!(p&&h.nodeValue[p-1]==`
`),f&&p==h.nodeValue.length)for(let m=h,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:gi(g)+1});break}let v=m.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let m=h.childNodes[p-1];f=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Gs&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&Ji)&&Ef(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Ef(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((u.extend||e==t)&&!f){u.collapse(a.node,a.offset);try{e!=t&&u.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>t){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let a=r+o.border,l=s-o.border;if(e>=a&&t<=l){this.dirty=e==r||t==s?Jc:BP,e==a&&t==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Va:o.markDirty(e-a,t-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Jc:Va}r=s}this.dirty=Jc}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Jc:BP;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class eW extends Lg{constructor(e,t,r,i){let o,s=t.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==rs&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class gke extends Lg{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Af extends Lg{constructor(e,t,r,i,o){super(e,[],r,i),this.mark=t,this.spec=o}static create(e,t,r,i){let o=i.nodeViews[t.type.name],s=o&&o(t,i,r);return(!s||!s.dom)&&(s=Uf.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Af(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Va||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Va&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=rs){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=rs}}slice(e,t,r){let i=Af.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;t<s&&(o=PS(o,t,s,r)),e>0&&(o=PS(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ju extends Lg{constructor(e,t,r,i,o,s,a,l,u){super(e,[],o,s),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,t,r,i,o,s){let a=o.nodeViews[t.type.name],l,u=a&&a(t,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,f=u&&u.contentDOM;if(t.isText){if(!c)c=document.createTextNode(t.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=Uf.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=iW(c,r,t),u?l=new vke(e,t,r,i,c,f||null,d,u,o,s+1):t.isText?new B_(e,t,r,i,c,d,o):new ju(e,t,r,i,c,f||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fe.empty)}return e}matchesNode(e,t,r){return this.dirty==rs&&e.eq(this.node)&&ky(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new yke(this,s&&s.node,e);kke(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&l.syncToMarks(c==this.node.childCount?kn.none:this.node.child(c).marks,r,e),l.placeWidget(u,e,i)},(u,c,f,d)=>{l.syncToMarks(u.marks,r,e);let h;l.findNodeMatch(u,c,f,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(u,c,f,h,e)||l.updateNextNode(u,c,f,e,d,i)||l.addNode(u,c,f,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Jc)&&(s&&this.protectLocalComposition(e,s),nW(this.contentDOM,this.children,e),Fh&&Cke(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Lt)||r<t||i>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=Ske(this.node.content,s,r-t,i-t);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new gke(this,o,t,i);e.input.compositionNodes.push(s),this.children=PS(this.children,r,r+i.length,e,s)}update(e,t,r,i){return this.dirty==Va||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=rs}updateOuterDeco(e){if(ky(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=rW(this.dom,this.nodeDOM,RS(this.outerDeco,this.node,t),RS(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function LP(n,e,t,r,i){iW(r,e,n);let o=new ju(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class B_ extends ju{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==Va||this.dirty!=rs&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=rs||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=rs,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new B_(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Va)}get domAtom(){return!1}isText(e){return this.node.text==e}}class tW extends Lg{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==rs&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class vke extends ju{constructor(e,t,r,i,o,s,a,l,u,c){super(e,t,r,i,o,s,a,u,c),this.spec=l}update(e,t,r,i){if(this.dirty==Va)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function nW(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==n){for(;a!=r;)r=FP(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(s instanceof Af){let l=r?r.previousSibling:n.lastChild;nW(s.contentDOM,s.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=FP(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const D0=function(n){n&&(this.nodeName=n)};D0.prototype=Object.create(null);const Yc=[new D0];function RS(n,e,t){if(n.length==0)return Yc;let r=t?Yc[0]:new D0,i=[r];for(let o=0;o<n.length;o++){let s=n[o].type.attrs;if(s){s.nodeName&&i.push(r=new D0(s.nodeName));for(let a in s){let l=s[a];l!=null&&(t&&i.length==1&&i.push(r=new D0(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function rW(n,e,t,r){if(t==Yc&&r==Yc)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Yc[0]),i=l}bke(i,a||Yc[0],s)}return i}function bke(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function iW(n,e,t){return rW(n,n,Yc,RS(e,t,n.nodeType!=1))}function ky(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function FP(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class yke{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=_ke(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=rs,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Af.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,t,r)&&!this.preMatch.matched.has(u)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let s=this.top.children[i];return s.dirty==Va&&s.dom==s.contentDOM&&(s.dirty=Jc),s.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ju){let u=this.preMatch.matched.get(l);if(u!=null&&u!=o)return!1;let c=l.dom,f,d=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Va&&ky(t,l.outerDeco));if(!d&&l.update(e,t,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(l,e,t,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Jc,f.updateChildren(i,s+1),f.dirty=rs),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!ky(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=ju.create(this.top,t,r,i,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,i,o){let s=ju.create(this.top,e,t,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new eW(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Af;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof B_)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ji||Mi)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new tW(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function _ke(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let u=t.children[r-1];if(u instanceof Af)t=u,r=u.children.length;else{a=u,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function wke(n,e){return n.type.side-e.type.side}function kke(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let u=0;u<n.childCount;u++){let c=n.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,a=[],l=null;for(let u=0;;){let c,f;for(;s<i.length&&i[s].to==o;){let g=i[s++];g.widget&&(c?(f||(f=[c])).push(g):c=g)}if(c)if(f){f.sort(wke);for(let g=0;g<f.length;g++)t(f[g],u,!!l)}else t(c,u,!!l);let d,h;if(l)h=-1,d=l,l=null;else if(u<n.childCount)h=u,d=n.child(u++);else break;for(let g=0;g<a.length;g++)a[g].to<=o&&a.splice(g--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let p=o+d.nodeSize;if(d.isText){let g=p;s<i.length&&i[s].from<g&&(g=i[s].from);for(let v=0;v<a.length;v++)a[v].to<g&&(g=a[v].to);g<p&&(l=d.cut(g-o),d=d.cut(0,g-o),p=g,h=-1)}else for(;s<i.length&&i[s].to<p;)s++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();r(d,m,e.forChild(o,d),h),o=p}}function Cke(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Ske(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let s=n.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<n.childCount;){let u=n.child(i++);if(o+=u.nodeSize,!u.isText)break;l+=u.text}if(o>=t){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=t)return a+u;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function PS(n,e,t,r,i){let o=[];for(let s=0,a=0;s<n.length;s++){let l=n[s],u=a,c=a+=l.size;u>=t||c<=e?o.push(l):(u<e&&o.push(l.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>t&&o.push(l.slice(t-u,l.size,r)))}return o}function K6(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,u;if(N_(t)){for(l=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Dt.isSelectable(f)&&i.parent&&!(f.isInline&&Xwe(t.focusNode,t.focusOffset,i.dom))){let d=i.posBefore;u=new Dt(s==d?a:r.resolve(d))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let f=s,d=s;for(let h=0;h<t.rangeCount;h++){let p=t.getRangeAt(h);f=Math.min(f,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),d=Math.max(d,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(f<0)return null;[l,s]=d==n.state.selection.anchor?[d,f]:[f,d],a=r.resolve(s)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!u){let f=e=="pointer"||n.state.selection.head<a.pos&&!o?1:-1;u=J6(n,c,a,f)}return u}function oW(n){return n.editable?n.hasFocus():aW(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Ml(n,e=!1){let t=n.state.selection;if(sW(n,t),!!oW(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Mi){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ef(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Eke(n);else{let{anchor:r,head:i}=t,o,s;zP&&!(t instanceof Lt)&&(t.$from.parent.inlineContent||(o=jP(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=jP(n,t.to))),n.docView.setSelection(r,i,n,e),zP&&(o&&HP(o),s&&HP(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&xke(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const zP=Ji||Mi&&KV<63;function jP(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Ji&&i&&i.contentEditable=="false")return Rk(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Rk(i);if(o)return Rk(o)}}function Rk(n){return n.contentEditable="true",Ji&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function HP(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function xke(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!oW(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Eke(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,gi(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&oo&&zu<=11&&(r.disabled=!0,r.disabled=!1)}function sW(n,e){if(e instanceof Dt){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(VP(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else VP(n)}function VP(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function J6(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Lt.between(e,t,r)}function WP(n){return n.editable&&!n.hasFocus()?!1:aW(n)}function aW(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Ake(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Ef(e.node,e.offset,t.anchorNode,t.anchorOffset)}function IS(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&qt.findFrom(o,e)}function uu(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function qP(n,e,t){let r=n.state.selection;if(r instanceof Lt)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return uu(n,new Lt(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=IS(n.state,e);return i&&i instanceof Dt?uu(n,i):!1}else if(!(Fo&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=n.docView.descAt(a))&&!s.contentDOM?Dt.isSelectable(o)?uu(n,new Dt(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):Bg?uu(n,new Lt(n.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Dt&&r.node.isInline)return uu(n,new Lt(e>0?r.$to:r.$from));{let i=IS(n.state,e);return i?uu(n,i):!1}}}function Cy(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function R0(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function hd(n,e){return e<0?Mke(n):Tke(n)}function Mke(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,s=!1;for(Gs&&t.nodeType==1&&r<Cy(t)&&R0(t.childNodes[r],-1)&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(R0(a,-1))i=t,o=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(lW(t))break;{let a=t.previousSibling;for(;a&&R0(a,-1);)i=t.parentNode,o=gi(a),a=a.previousSibling;if(a)t=a,r=Cy(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?NS(n,t,r):i&&NS(n,i,o)}function Tke(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Cy(t),o,s;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(R0(a,1))o=t,s=++r;else break}else{if(lW(t))break;{let a=t.nextSibling;for(;a&&R0(a,1);)o=a.parentNode,s=gi(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=Cy(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&NS(n,o,s)}function lW(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Oke(n,e){for(;n&&e==n.childNodes.length&&!Ng(n);)e=gi(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function Dke(n,e){for(;n&&!e&&!Ng(n);)e=gi(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function NS(n,e,t){if(e.nodeType!=3){let o,s;(s=Oke(e,t))?(e=s,t=0):(o=Dke(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(N_(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Ml(n)},50)}function UP(n,e){let t=n.state.doc.resolve(e);if(!(Mi||$we)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function GP(n,e,t){let r=n.state.selection;if(r instanceof Lt&&!r.empty||t.indexOf("s")>-1||Fo&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=IS(n.state,e);if(s&&s instanceof Dt)return uu(n,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof ns?qt.near(s,e):qt.findFrom(s,e);return a?uu(n,a):!1}return!1}function KP(n,e){if(!(n.state.selection instanceof Lt))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let s=n.state.tr;return e<0?s.delete(t.pos-o.nodeSize,t.pos):s.delete(t.pos,t.pos+o.nodeSize),n.dispatch(s),!0}return!1}function JP(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Rke(n){if(!Ji||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;JP(n,r,"true"),setTimeout(()=>JP(n,r,"false"),20)}return!1}function Pke(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Ike(n,e){let t=e.keyCode,r=Pke(e);if(t==8||Fo&&t==72&&r=="c")return KP(n,-1)||hd(n,-1);if(t==46&&!e.shiftKey||Fo&&t==68&&r=="c")return KP(n,1)||hd(n,1);if(t==13||t==27)return!0;if(t==37||Fo&&t==66&&r=="c"){let i=t==37?UP(n,n.state.selection.from)=="ltr"?-1:1:-1;return qP(n,i,r)||hd(n,i)}else if(t==39||Fo&&t==70&&r=="c"){let i=t==39?UP(n,n.state.selection.from)=="ltr"?1:-1:1;return qP(n,i,r)||hd(n,i)}else{if(t==38||Fo&&t==80&&r=="c")return GP(n,-1,r)||hd(n,-1);if(t==40||Fo&&t==78&&r=="c")return Rke(n)||GP(n,1,r)||hd(n,1);if(r==(Fo?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Y6(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=n.someProp("clipboardSerializer")||Uf.fromSchema(n.state.schema),a=pW(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let u=l.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=hW[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=a.createElement(c[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),f++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(t)}`);let d=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d,slice:e}}function uW(n,e,t,r,i){let o=i.parent.type.spec.code,s,a;if(!t&&!e)return null;let l=e&&(r||o||!t);if(l){if(n.someProp("transformPastedText",d=>{e=d(e,o||r,n)}),o)return e?new at(Fe.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):at.empty;let f=n.someProp("clipboardTextParser",d=>d(e,i,r,n));if(f)a=f;else{let d=i.marks(),{schema:h}=n.state,p=Uf.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=s.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,d)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),s=Fke(t),Bg&&zke(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=s.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;s=d}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Al.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Nke.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)a=jke(YP(a,+c[1],+c[2]),c[4]);else if(a=at.maxOpen(Bke(a.content,i),!0),a.openStart||a.openEnd){let f=0,d=0;for(let h=a.content.firstChild;f<a.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=a.content.lastChild;d<a.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);a=YP(a,f,d)}return n.someProp("transformPasted",f=>{a=f(a,n)}),a}const Nke=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Bke(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,s=[];if(n.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),u;if(!l)return s=null;if(u=s.length&&o.length&&fW(l,o,a,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=dW(s[s.length-1],o.length));let c=cW(a,l);s.push(c),i=i.matchType(c.type),o=l}}),s)return Fe.from(s)}return n}function cW(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,Fe.from(n));return n}function fW(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=fW(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(Fe.from(cW(t,n,i+1))))}}function dW(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,dW(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(Fe.empty,!0);return n.copy(t.append(r))}function BS(n,e,t,r,i,o){let s=e<0?n.firstChild:n.lastChild,a=s.content;return n.childCount>1&&(o=0),i<r-1&&(a=BS(a,e,t,r,i+1,o)),i>=t&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(Fe.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(a))}function YP(n,e,t){return e<n.openStart&&(n=new at(BS(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new at(BS(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const hW={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let XP=null;function pW(){return XP||(XP=document.implementation.createHTMLDocument("title"))}let Pk=null;function Lke(n){let e=window.trustedTypes;return e?(Pk||(Pk=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Pk.createHTML(n)):n}function Fke(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=pW().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&hW[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=Lke(n),i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function zke(n){let e=n.querySelectorAll(Mi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function jke(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:s}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Fe.from(l.create(r[a+1],i)),o++,s++}return new at(i,o,s)}const Yi={},Xi={},Hke={touchstart:!0,touchmove:!0};class Vke{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Wke(n){for(let e in Yi){let t=Yi[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{Uke(n,r)&&!X6(n,r)&&(n.editable||!(r.type in Xi))&&t(n,r)},Hke[e]?{passive:!0}:void 0)}Ji&&n.dom.addEventListener("input",()=>null),LS(n)}function Au(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function qke(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function LS(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>X6(n,r))})}function X6(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function Uke(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Gke(n,e){!X6(n,e)&&Yi[e.type]&&(n.editable||!(e.type in Xi))&&Yi[e.type](n,e)}Xi.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!gW(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(_l&&Mi&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Fh&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Fc(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Ike(n,t)?t.preventDefault():Au(n,"key")};Xi.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Xi.keypress=(n,e)=>{let t=e;if(gW(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Fo&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Lt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i,o))&&n.dispatch(o()),t.preventDefault()}};function L_(n){return{left:n.clientX,top:n.clientY}}function Kke(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Q6(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(n.someProp(e,a=>s>o.depth?a(n,t,o.nodeAfter,o.before(s),i,!0):a(n,t,o.node(s),o.before(s),i,!1)))return!0;return!1}function ch(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function Jke(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Dt.isSelectable(r)?(ch(n,new Dt(t),"pointer"),!0):!1}function Yke(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Dt&&(r=t.node);let o=n.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(Dt.isSelectable(a)){r&&t.$from.depth>0&&s>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(s);break}}return i!=null?(ch(n,Dt.create(n.state.doc,i),"pointer"),!0):!1}function Xke(n,e,t,r,i){return Q6(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?Yke(n,t):Jke(n,t))}function Qke(n,e,t,r){return Q6(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function Zke(n,e,t,r){return Q6(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||$ke(n,t,r)}function $ke(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(ch(n,Lt.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)ch(n,Lt.create(r,a+1,a+1+s.content.size),"pointer");else if(Dt.isSelectable(s))ch(n,Dt.create(r,a),"pointer");else continue;return!0}}function Z6(n){return Sy(n)}const mW=Fo?"metaKey":"ctrlKey";Yi.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Z6(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&Kke(t,n.input.lastClick)&&!t[mW]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o,button:t.button};let s=n.posAtCoords(L_(t));s&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new e3e(n,s,t,!!r)):(o=="doubleClick"?Qke:Zke)(n,s.pos,s.inside,t)?t.preventDefault():Au(n,"pointer"))};class e3e{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[mW],this.allowDefault=r.shiftKey;let o,s;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),s=t.inside;else{let c=e.state.doc.resolve(t.pos);o=c.parent,s=c.depth?c.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof Dt&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Gs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Au(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ml(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(L_(e))),this.updateAllowDefault(e),this.allowDefault||!t?Au(this.view,"pointer"):Xke(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ji&&this.mightDrag&&!this.mightDrag.node.isAtom||Mi&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ch(this.view,qt.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Au(this.view,"pointer")}move(e){this.updateAllowDefault(e),Au(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Yi.touchstart=n=>{n.input.lastTouch=Date.now(),Z6(n),Au(n,"pointer")};Yi.touchmove=n=>{n.input.lastTouch=Date.now(),Au(n,"pointer")};Yi.contextmenu=n=>Z6(n);function gW(n,e){return n.composing?!0:Ji&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const t3e=_l?5e3:-1;Xi.compositionstart=Xi.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Lt&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Sy(n,!0),n.markCursor=null;else if(Sy(n,!e.selection.empty),Gs&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=n.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}n.input.composing=!0}vW(n,t3e)};Xi.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,vW(n,20))};function vW(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Sy(n),e))}function bW(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=r3e());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function n3e(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=Jwe(e.focusNode,e.focusOffset),r=Ywe(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return r}}return t||r}function r3e(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Sy(n,e=!1){if(!(_l&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),bW(n),e||n.docView&&n.docView.dirty){let t=K6(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function i3e(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Pm=oo&&zu<15||Fh&&eke<604;Yi.copy=Xi.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=Pm?null:t.clipboardData,s=r.content(),{dom:a,text:l}=Y6(n,s);o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):i3e(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function o3e(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function s3e(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Im(n,r.value,null,i,e):Im(n,r.textContent,r.innerHTML,i,e)},50)}function Im(n,e,t,r,i){let o=uW(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,o||at.empty)))return!0;if(!o)return!1;let s=o3e(o),a=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(o);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function yW(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Xi.paste=(n,e)=>{let t=e;if(n.composing&&!_l)return;let r=Pm?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Im(n,yW(r),r.getData("text/html"),i,t)?t.preventDefault():s3e(n,t)};class _W{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const a3e=Fo?"altKey":"ctrlKey";function wW(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[a3e]}Yi.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(L_(t)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Dt?i.to-1:i.to))){if(r&&r.mightDrag)s=Dt.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(s=Dt.create(n.state.doc,f.posBefore))}}let a=(s||n.state.selection).content(),{dom:l,text:u,slice:c}=Y6(n,a);(!t.dataTransfer.files.length||!Mi||KV>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Pm?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Pm||t.dataTransfer.setData("text/plain",u),n.dragging=new _W(c,wW(n,t),s)};Yi.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Xi.dragover=Xi.dragenter=(n,e)=>e.preventDefault();Xi.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(L_(t));if(!i)return;let o=n.state.doc.resolve(i.pos),s=r&&r.slice;s?n.someProp("transformPasted",p=>{s=p(s,n)}):s=uW(n,yW(t.dataTransfer),Pm?null:t.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&wW(n,t));if(n.someProp("handleDrop",p=>p(n,t,s||at.empty,a))){t.preventDefault();return}if(!s)return;t.preventDefault();let l=s?FV(n.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let u=n.state.tr;if(a){let{node:p}=r;p?p.replace(u):u.deleteSelection()}let c=u.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(d))return;let h=u.doc.resolve(c);if(f&&Dt.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new Dt(h));else{let p=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((m,g,v,b)=>p=b),u.setSelection(J6(n,h,u.doc.resolve(p)))}n.focus(),n.dispatch(u.setMeta("uiEvent","drop"))};Yi.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Ml(n)},20))};Yi.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Yi.beforeinput=(n,e)=>{if(Mi&&_l&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Fc(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Xi)Yi[n]=Xi[n];function Nm(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class xy{constructor(e,t){this.toDOM=e,this.spec=t||of,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:s}=e.mapResult(t.from+i,this.side<0?-1:1);return s?null:new qi(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof xy&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Nm(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Hu{constructor(e,t){this.attrs=e,this.spec=t||of}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new qi(o,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Hu&&Nm(this.attrs,e.attrs)&&Nm(this.spec,e.spec)}static is(e){return e.type instanceof Hu}destroy(){}}class $6{constructor(e,t){this.attrs=e,this.spec=t||of}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let s=e.mapResult(t.to+i,-1);return s.deleted||s.pos<=o.pos?null:new qi(o.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof $6&&Nm(this.attrs,e.attrs)&&Nm(this.spec,e.spec)}destroy(){}}class qi{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new qi(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new qi(e,e,new xy(t,r))}static inline(e,t,r,i){return new qi(e,t,new Hu(r,i))}static node(e,t,r,i){return new qi(e,t,new $6(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Hu}get widget(){return this.type instanceof xy}}const Ed=[],of={};class _r{constructor(e,t){this.local=e.length?e:Ed,this.children=t.length?t:Ed}static create(e,t){return t.length?Ey(t,e,0,of):ki}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,t-a,r,i+a,o)}}map(e,t,r){return this==ki||e.maps.length==0?this:this.mapInner(e,t,0,0,r||of)}mapInner(e,t,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?l3e(this.children,s||[],e,t,r,i,o):s?new _r(s.sort(sf),Ed):ki}add(e,t){return t.length?this==ki?_r.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((a,l)=>{let u=l+r,c;if(c=CW(t,a,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,c,u+1):i.splice(o,0,l,l+a.nodeSize,Ey(c,a,u+1,of)),o+=3}});let s=kW(o?SW(t):t,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new _r(s.length?this.local.concat(s).sort(sf):this.local,i||this.children)}remove(e){return e.length==0||this==ki?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+t,l=r[o+1]+t;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>a&&f.to<l&&(e[c]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,a+1);u!=ki?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new _r(i,r):ki}forChild(e,t){if(this==ki)return this;if(t.isLeaf)return _r.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof Hu){let u=Math.max(o,l.from)-o,c=Math.min(s,l.to)-o;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let a=new _r(i.sort(sf),Ed);return r?new vu([a,r]):a}return r||ki}eq(e){if(this==e)return!0;if(!(e instanceof _r)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return eE(this.localsInner(e))}localsInner(e){if(this==ki)return Ed;if(e.inlineContent||!this.local.some(Hu.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Hu||t.push(this.local[r]);return t}forEachSet(e){e(this)}}_r.empty=new _r([],[]);_r.removeOverlap=eE;const ki=_r.empty;class vu{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,of));return vu.from(r)}forChild(e,t){if(t.isLeaf)return _r.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=ki&&(o instanceof vu?r=r.concat(o.members):r.push(o))}return vu.from(r)}eq(e){if(!(e instanceof vu)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let s=0;s<o.length;s++)t.push(o[s])}}return t?eE(r?t:t.sort(sf)):Ed}static from(e){switch(e.length){case 0:return ki;case 1:return e[0];default:return new vu(e.every(t=>t instanceof _r)?e:e.reduce((t,r)=>t.concat(r instanceof _r?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function l3e(n,e,t,r,i,o,s){let a=n.slice();for(let u=0,c=o;u<t.maps.length;u++){let f=0;t.maps[u].forEach((d,h,p,m)=>{let g=m-p-(h-d);for(let v=0;v<a.length;v+=3){let b=a[v+1];if(b<0||d>b+c-f)continue;let w=a[v]+c-f;h>=w?a[v+1]=d<=w?-2:-1:d>=c&&g&&(a[v]+=g,a[v+1]+=g)}f+=g}),c=t.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=t.map(n[u]+o),f=c-i;if(f<0||f>=r.content.size){l=!0;continue}let d=t.map(n[u+1]+o,-1),h=d-i,{index:p,offset:m}=r.content.findIndex(f),g=r.maybeChild(p);if(g&&m==f&&m+g.nodeSize==h){let v=a[u+2].mapInner(t,g,c+1,n[u]+o+1,s);v!=ki?(a[u]=f,a[u+1]=h,a[u+2]=v):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=u3e(a,n,e,t,i,o,s),c=Ey(u,r,0,s);e=c.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let h=c.children[f];for(;d<a.length&&a[d]<h;)d+=3;a.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new _r(e.sort(sf),a)}function kW(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new qi(i.from+e,i.to+e,i.type))}return t}function u3e(n,e,t,r,i,o,s){function a(l,u){for(let c=0;c<l.local.length;c++){let f=l.local[c].map(r,i,u);f?t.push(f):s.onRemove&&s.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+o+1);return t}function CW(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,s;o<n.length;o++)(s=n[o])&&s.from>t&&s.to<r&&((i||(i=[])).push(s),n[o]=null);return i}function SW(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ey(n,e,t,r){let i=[],o=!1;e.forEach((a,l)=>{let u=CW(n,a,l+t);if(u){o=!0;let c=Ey(u,a,t+l+1,r);c!=ki&&i.push(l,l+a.nodeSize,c)}});let s=kW(o?SW(n):n,-t).sort(sf);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new _r(s,i):ki}function sf(n,e){return n.from-e.from||n.to-e.to}function eE(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),QP(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),QP(e,i,r.copy(o.from,r.to)));break}}}return e}function QP(n,e,t){for(;e<n.length&&sf(t,n[e])>0;)e++;n.splice(e,0,t)}function Ik(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=ki&&e.push(r)}),n.cursorWrapper&&e.push(_r.create(n.state.doc,[n.cursorWrapper.deco])),vu.from(e)}const c3e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},f3e=oo&&zu<=11;class d3e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class h3e{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new d3e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);oo&&zu<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),f3e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,c3e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(WP(this.view)){if(this.suppressingSelectionUpdates)return Ml(this.view);if(oo&&zu<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ef(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=Lh(o))t.add(o);for(let o=e.anchorNode;o;o=Lh(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&WP(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let c=0;c<t.length;c++){let f=this.registerMutation(t[c],l);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(a=!0))}if(Gs&&l.length){let c=l.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,d]=c;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of c){let h=d.parentNode;h&&h.nodeName=="LI"&&(!f||g3e(e,f)!=h)&&d.remove()}}}let u=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&N_(r)&&(u=K6(e))&&u.eq(qt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ml(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),p3e(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ml(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(oo&&zu<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let s=i&&i.parentNode==e.target?gi(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?gi(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let ZP=new WeakMap,$P=!1;function p3e(n){if(!ZP.has(n)&&(ZP.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Gs,$P)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$P=!0}}function e7(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=n.domAtPos(n.state.selection.anchor);return Ef(s.node,s.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function m3e(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return e7(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?e7(n,t):null}function g3e(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function v3e(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),u,c=l.anchorNode;if(c&&n.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],N_(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Mi&&n.input.lastKeyCode===8)for(let g=o;g>i;g--){let v=r.childNodes[g-1],b=v.pmViewDesc;if(v.nodeName=="BR"&&!b){o=g;break}if(!b||b.size)break}let f=n.state.doc,d=n.someProp("domParser")||Al.fromSchema(n.state.schema),h=f.resolve(s),p=null,m=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:b3e,context:h});if(u&&u[0].pos!=null){let g=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=g),p={anchor:g+s,head:v+s}}return{doc:m,sel:p,from:s,to:a}}function b3e(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ji&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ji&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const y3e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function _3e(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let E=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,M=K6(n,E);if(M&&!n.state.selection.eq(M)){if(Mi&&_l&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",O=>O(n,Fc(13,"Enter"))))return;let R=n.state.tr.setSelection(M);E=="pointer"?R.setMeta("pointer",!0):E=="key"&&R.scrollIntoView(),o&&R.setMeta("composition",o),n.dispatch(R)}return}let s=n.state.doc.resolve(e),a=s.sharedDepth(t);e=s.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,u=v3e(n,e,t),c=n.state.doc,f=c.slice(u.from,u.to),d,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(d=n.state.selection.to,h="end"):(d=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let p=C3e(f.content,u.doc.content,u.from,d,h);if(p&&n.input.domChangeCount++,(Fh&&n.input.lastIOSEnter>Date.now()-225||_l)&&i.some(E=>E.nodeType==1&&!y3e.test(E.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",E=>E(n,Fc(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Lt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let E=t7(n,n.state.doc,u.sel);if(E&&!E.eq(n.state.selection)){let M=n.state.tr.setSelection(E);o&&M.setMeta("composition",o),n.dispatch(M)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof Lt&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=u.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=u.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),oo&&zu<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=u.doc.resolveNoCache(p.start-u.from),g=u.doc.resolveNoCache(p.endB-u.from),v=c.resolve(p.start),b=m.sameParent(g)&&m.parent.inlineContent&&v.end()>=p.endA,w;if((Fh&&n.input.lastIOSEnter>Date.now()-225&&(!b||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!b&&m.pos<u.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(m.pos,g.pos,"",""))&&(w=qt.findFrom(u.doc.resolve(m.pos+1),1,!0))&&w.head>m.pos)&&n.someProp("handleKeyDown",E=>E(n,Fc(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&k3e(c,p.start,p.endA,m,g)&&n.someProp("handleKeyDown",E=>E(n,Fc(8,"Backspace")))){_l&&Mi&&n.domObserver.suppressSelectionUpdates();return}Mi&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),_l&&!b&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,g=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{n.someProp("handleKeyDown",function(E){return E(n,Fc(13,"Enter"))})},20));let _=p.start,y=p.endA,k=E=>{let M=E||n.state.tr.replace(_,y,u.doc.slice(p.start-u.from,p.endB-u.from));if(u.sel){let R=t7(n,M.doc,u.sel);R&&!(Mi&&n.composing&&R.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(R.head==_||R.head==M.mapping.map(y)-1)||oo&&R.empty&&R.head==_)&&M.setSelection(R)}return o&&M.setMeta("composition",o),M.scrollIntoView()},S;if(b){if(m.pos==g.pos){oo&&zu<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ml(n),20));let E=k(n.state.tr.delete(_,y)),M=c.resolve(p.start).marksAcross(c.resolve(p.endA));M&&E.ensureMarks(M),n.dispatch(E)}else if(p.endA==p.endB&&(S=w3e(m.parent.content.cut(m.parentOffset,g.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start())))){let E=k(n.state.tr);S.type=="add"?E.addMark(_,y,S.mark):E.removeMark(_,y,S.mark),n.dispatch(E)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let E=m.parent.textBetween(m.parentOffset,g.parentOffset),M=()=>k(n.state.tr.insertText(E,_,y));n.someProp("handleTextInput",R=>R(n,_,y,E,M))||n.dispatch(M())}}else n.dispatch(k())}function t7(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:J6(n,e.resolve(t.anchor),e.resolve(t.head))}function w3e(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,s,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<t.length;c++)o=t[c].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(Fe.from(u).eq(n))return{mark:a,type:s}}function k3e(n,e,t,r,i){if(t-e<=i.pos-r.pos||Nk(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&t==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=n.resolve(Nk(o,!0,!0));return!s.parent.isTextblock||s.pos>t||Nk(s,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Nk(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function C3e(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:s,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&n.size<e.size){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<e.size&&n7(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<n.size&&n7(n.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function n7(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class xW{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Vke,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(a7),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=o7(this),i7(this),this.nodeViews=s7(this),this.docView=LP(this.state.doc,r7(this),Ik(this),this.dom,this),this.domObserver=new h3e(this,(r,i,o,s)=>_3e(this,r,i,o,s)),this.domObserver.start(),Wke(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&LS(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(a7),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(bW(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=s7(this);x3e(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&LS(this),this.editable=o7(this),i7(this);let l=Ik(this),u=r7(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,u,l);(f||!e.selection.eq(i.selection))&&(s=!0);let d=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&rke(this);if(s){this.domObserver.stop();let h=f&&(oo||Mi)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&S3e(i.selection,e.selection);if(f){let p=Mi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=n3e(this)),(o||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=LP(e.doc,u,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Ake(this))?Ml(this,h):(sW(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&ike(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Dt){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&DP(this,t.getBoundingClientRect(),e)}else DP(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new _W(e.slice,e.move,i<0?void 0:Dt.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=t?t(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(oo){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&oke(this.dom),Ml(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return cke(this,e)}coordsAtPos(e,t=1){return ZV(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return mke(this,t||this.state,e)}pasteHTML(e,t){return Im(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Im(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Y6(this,e)}destroy(){this.docView&&(qke(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ik(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Gwe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Gke(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ji&&this.root.nodeType===11&&Qwe(this.dom.ownerDocument)==this.dom&&m3e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}xW.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function r7(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[qi.node(0,n.state.doc.content.size,e)]}function i7(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:qi.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function o7(n){return!n.someProp("editable",e=>e(n.state)===!1)}function S3e(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function s7(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function x3e(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function a7(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const E3e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),A3e=typeof navigator<"u"&&/Win/.test(navigator.platform);function M3e(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))E3e?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function T3e(n){let e=Object.create(null);for(let t in n)e[M3e(t)]=n[t];return e}function Bk(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function O3e(n){return new Sr({props:{handleKeyDown:EW(n)}})}function EW(n){let e=T3e(n);return function(t,r){let i=vz(r),o,s=e[Bk(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Bk(i,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(A3e&&r.ctrlKey&&r.altKey)&&(o=jl[r.keyCode])&&o!=i){let a=e[Bk(o,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const D3e=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function AW(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const R3e=(n,e,t)=>{let r=AW(n,t);if(!r)return!1;let i=tE(r);if(!i){let s=r.blockRange(),a=s&&pp(s);return a==null?!1:(e&&e(n.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(DW(n,i,e,-1))return!0;if(r.parent.content.size==0&&(zh(o,"end")||Dt.isSelectable(o)))for(let s=r.depth;;s--){let a=P_(n.doc,r.before(s),r.after(s),at.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(zh(o,"end")?qt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Dt.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},P3e=(n,e,t)=>{let r=AW(n,t);if(!r)return!1;let i=tE(r);return i?MW(n,i,e):!1},I3e=(n,e,t)=>{let r=TW(n,t);if(!r)return!1;let i=nE(r);return i?MW(n,i,e):!1};function MW(n,e,t){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=P_(n.doc,o,l,at.empty);if(!u||u.from!=o||u instanceof Zr&&u.slice.size>=l-o)return!1;if(t){let c=n.tr.step(u);c.setSelection(Lt.create(c.doc,o)),t(c.scrollIntoView())}return!0}function zh(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const N3e=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=tE(r)}let s=o&&o.nodeBefore;return!s||!Dt.isSelectable(s)?!1:(e&&e(n.tr.setSelection(Dt.create(n.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function tE(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function TW(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const B3e=(n,e,t)=>{let r=TW(n,t);if(!r)return!1;let i=nE(r);if(!i)return!1;let o=i.nodeAfter;if(DW(n,i,e,1))return!0;if(r.parent.content.size==0&&(zh(o,"start")||Dt.isSelectable(o))){let s=P_(n.doc,r.before(),r.after(),at.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=n.tr.step(s);a.setSelection(zh(o,"start")?qt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Dt.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},L3e=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=nE(r)}let s=o&&o.nodeAfter;return!s||!Dt.isSelectable(s)?!1:(e&&e(n.tr.setSelection(Dt.create(n.doc,o.pos)).scrollIntoView()),!0)};function nE(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const F3e=(n,e)=>{let t=n.selection,r=t instanceof Dt,i;if(r){if(t.node.isTextblock||!mc(n.doc,t.from))return!1;i=t.from}else if(i=R_(n.doc,t.from,-1),i==null)return!1;if(e){let o=n.tr.join(i);r&&o.setSelection(Dt.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},z3e=(n,e)=>{let t=n.selection,r;if(t instanceof Dt){if(t.node.isTextblock||!mc(n.doc,t.to))return!1;r=t.to}else if(r=R_(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},j3e=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),o=i&&pp(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},H3e=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function OW(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const V3e=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),s=OW(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,s.createAndFill());l.setSelection(qt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},W3e=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof ns||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=OW(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(s,o.createAndFill());a.setSelection(Lt.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},q3e=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(lh(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&pp(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},U3e=(n,e)=>{let{$from:t,to:r}=n.selection,i,o=t.sharedDepth(r);return o==0?!1:(i=t.before(o),e&&e(n.tr.setSelection(Dt.create(n.doc,i))),!0)};function G3e(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||mc(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function DW(n,e,t,r){let i=e.nodeBefore,o=e.nodeAfter,s,a,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&G3e(n,e,t))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(t){let h=e.pos+o.nodeSize,p=Fe.empty;for(let v=s.length-1;v>=0;v--)p=Fe.from(s[v].create(null,p));p=Fe.from(i.copy(p));let m=n.tr.step(new ti(e.pos-1,h,e.pos,h,new at(p,1,0),s.length,!0)),g=m.doc.resolve(h+2*s.length);g.nodeAfter&&g.nodeAfter.type==i.type&&mc(m.doc,g.pos)&&m.join(g.pos),t(m.scrollIntoView())}return!0}let c=o.type.spec.isolating||r>0&&l?null:qt.findFrom(e,1),f=c&&c.$from.blockRange(c.$to),d=f&&pp(f);if(d!=null&&d>=e.depth)return t&&t(n.tr.lift(f,d).scrollIntoView()),!0;if(u&&zh(o,"start",!0)&&zh(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=o,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(t){let v=Fe.empty;for(let w=p.length-1;w>=0;w--)v=Fe.from(p[w].copy(v));let b=n.tr.step(new ti(e.pos-p.length,e.pos+o.nodeSize,e.pos+g,e.pos+o.nodeSize-g,new at(v,p.length,0),0,!0));t(b.scrollIntoView())}return!0}}return!1}function RW(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(Lt.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const K3e=RW(-1),J3e=RW(1);function Y3e(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,s=i.blockRange(o),a=s&&q6(s,n,e);return a?(r&&r(t.tr.wrap(s,a).scrollIntoView()),!0):!1}}function l7(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=t.selection.ranges[o];t.doc.nodesBetween(s,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)i=!0;else{let c=t.doc.resolve(u),f=c.index();i=c.parent.canReplaceWith(f,f+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[s];o.setBlockType(a,l,n,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function X3e(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,s=i.blockRange(o);if(!s)return!1;let a=r?t.tr:null;return Q3e(a,s,n,e)?(r&&r(a.scrollIntoView()),!0):!1}}function Q3e(n,e,t,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);o=new _y(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new _y(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=q6(o,t,r,e);return a?(n&&Z3e(n,e,a,i,t),!0):!1}function Z3e(n,e,t,r,i){let o=Fe.empty;for(let c=t.length-1;c>=0;c--)o=Fe.from(t[c].type.create(t[c].attrs,o));n.step(new ti(e.start-(r?2:0),e.end,e.start,e.end,new at(o,0,0),t.length,!0));let s=0;for(let c=0;c<t.length;c++)t[c].type==i&&(s=c+1);let a=t.length-s,l=e.start+t.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&lh(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return n}function $3e(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?eCe(e,t,n,o):tCe(e,t,o):!0:!1}}function eCe(n,e,t,r){let i=n.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new ti(o-1,s,o,s,new at(Fe.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new _y(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=pp(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(o,-1)-1);return mc(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function tCe(n,e,t){let r=n.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(t.start),s=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(a?0:1),c+1,s.content.append(l?Fe.empty:Fe.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return r.step(new ti(f-(a?1:0),d+(l?1:0),f+1,d-1,new at((a?Fe.empty:Fe.from(i.copy(Fe.empty))).append(l?Fe.empty:Fe.from(i.copy(Fe.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function nCe(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==n);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=n)return!1;if(t){let u=l.lastChild&&l.lastChild.type==a.type,c=Fe.from(u?n.create():null),f=new at(Fe.from(n.create(null,Fe.from(a.type.create(null,c)))),u?3:1,0),d=o.start,h=o.end;t(e.tr.step(new ti(d-(u?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function F_(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,o=t.storedMarks,t}}}class z_{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const f=l(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,u=e||o.tr,c=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>{const g=this.buildProps(u,t),v=h(...m)(g);return a.push(v),f}])),run:c};return f}createCan(e){const{rawCommands:t,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a={tr:e,editor:i,view:s,state:F_({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}}let rCe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}};function vt(n,e,t){return n.config[e]===void 0&&n.parent?vt(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?vt(n.parent,e,t):null}):n.config[e]}function j_(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function PW(n){const e=[],{nodeExtensions:t,markExtensions:r}=j_(n),i=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:i},l=vt(s,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...o,...h}})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=vt(s,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([c,f])=>{const d={...o,...f};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:s.name,name:c,attribute:d})})}),e}function ri(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function gr(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?String(o).split(" "):[],l=r[i]?r[i].split(" "):[],u=a.filter(c=>!l.includes(c));r[i]=[...l,...u].join(" ")}else if(i==="style"){const a=o?o.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;l.forEach(c=>{const[f,d]=c.split(":").map(h=>h.trim());u.set(f,d)}),a.forEach(c=>{const[f,d]=c.split(":").map(h=>h.trim());u.set(f,d)}),r[i]=Array.from(u.entries()).map(([c,f])=>`${c}: ${f}`).join("; ")}else r[i]=o}),r},{})}function FS(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>gr(t,r),{})}function IW(n){return typeof n=="function"}function Xt(n,e=void 0,...t){return IW(n)?e?n.bind(e)(...t):n(...t):n}function iCe(n={}){return Object.keys(n).length===0&&n.constructor===Object}function oCe(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function u7(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(t):oCe(t.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...r,...i}}}}function c7(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&iCe(t)?!1:t!=null))}function sCe(n,e){var t;const r=PW(n),{nodeExtensions:i,markExtensions:o}=j_(n),s=(t=i.find(u=>vt(u,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(i.map(u=>{const c=r.filter(v=>v.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},d=n.reduce((v,b)=>{const w=vt(b,"extendNodeSchema",f);return{...v,...w?w(u):{}}},{}),h=c7({...d,content:Xt(vt(u,"content",f)),marks:Xt(vt(u,"marks",f)),group:Xt(vt(u,"group",f)),inline:Xt(vt(u,"inline",f)),atom:Xt(vt(u,"atom",f)),selectable:Xt(vt(u,"selectable",f)),draggable:Xt(vt(u,"draggable",f)),code:Xt(vt(u,"code",f)),whitespace:Xt(vt(u,"whitespace",f)),linebreakReplacement:Xt(vt(u,"linebreakReplacement",f)),defining:Xt(vt(u,"defining",f)),isolating:Xt(vt(u,"isolating",f)),attrs:Object.fromEntries(c.map(v=>{var b;return[v.name,{default:(b=v==null?void 0:v.attribute)===null||b===void 0?void 0:b.default}]}))}),p=Xt(vt(u,"parseHTML",f));p&&(h.parseDOM=p.map(v=>u7(v,c)));const m=vt(u,"renderHTML",f);m&&(h.toDOM=v=>m({node:v,HTMLAttributes:FS(v,c)}));const g=vt(u,"renderText",f);return g&&(h.toText=g),[u.name,h]})),l=Object.fromEntries(o.map(u=>{const c=r.filter(g=>g.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},d=n.reduce((g,v)=>{const b=vt(v,"extendMarkSchema",f);return{...g,...b?b(u):{}}},{}),h=c7({...d,inclusive:Xt(vt(u,"inclusive",f)),excludes:Xt(vt(u,"excludes",f)),group:Xt(vt(u,"group",f)),spanning:Xt(vt(u,"spanning",f)),code:Xt(vt(u,"code",f)),attrs:Object.fromEntries(c.map(g=>{var v;return[g.name,{default:(v=g==null?void 0:g.attribute)===null||v===void 0?void 0:v.default}]}))}),p=Xt(vt(u,"parseHTML",f));p&&(h.parseDOM=p.map(g=>u7(g,c)));const m=vt(u,"renderHTML",f);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:FS(g,c)})),[u.name,h]}));return new H6({topNode:s,nodes:a,marks:l})}function Lk(n,e){return e.nodes[n]||e.marks[n]||null}function f7(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Fg(n,e){const t=Uf.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const aCe=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,a)=>{var l,u;const c=((u=(l=i.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-o))}),t};function rE(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class zg{constructor(e){this.find=e.find,this.handler=e.handler}}const lCe=(n,e)=>{if(rE(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function ov(n){var e;const{editor:t,from:r,to:i,text:o,rules:s,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let c=!1;const f=aCe(u)+o;return s.forEach(d=>{if(c)return;const h=lCe(f,d.find);if(!h)return;const p=l.state.tr,m=F_({state:l.state,transaction:p}),g={from:r-(h[0].length-o.length),to:i},{commands:v,chain:b,can:w}=new z_({editor:t,state:m});d.handler({state:m,range:g,match:h,commands:v,chain:b,can:w})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:o}),l.dispatch(p),c=!0)}),c}function uCe(n){const{editor:e,rules:t}=n,r=new Sr({state:{init(){return null},apply(i,o,s){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=Fg(Fe.from(c),s.schema);const{from:f}=l,d=f+c.length;ov({editor:e,from:f,to:d,text:c,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,a){return ov({editor:e,from:o,to:s,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&ov({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?ov({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function cCe(n){return Object.prototype.toString.call(n).slice(8,-1)}function sv(n){return cCe(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function H_(n,e){const t={...n};return sv(n)&&sv(e)&&Object.keys(e).forEach(r=>{sv(e[r])&&sv(n[r])?t[r]=H_(n[r],e[r]):t[r]=e[r]}),t}class ii{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Xt(vt(this,"addOptions",{name:this.name}))),this.storage=Xt(vt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ii(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>H_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ii(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Xt(vt(t,"addOptions",{name:t.name})),t.storage=Xt(vt(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===t.name))return!1;const l=s.find(u=>(u==null?void 0:u.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function fCe(n){return typeof n=="number"}class dCe{constructor(e){this.find=e.find,this.handler=e.handler}}const hCe=(n,e,t)=>{if(rE(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=n,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function pCe(n){const{editor:e,state:t,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=n,{commands:l,chain:u,can:c}=new z_({editor:e,state:t}),f=[];return t.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),g=Math.min(i,p+h.content.size),v=h.textBetween(m-p,g-p,void 0,"");hCe(v,o.find,s).forEach(w=>{if(w.index===void 0)return;const _=m+w.index+1,y=_+w[0].length,k={from:t.tr.mapping.map(_),to:t.tr.mapping.map(y)},S=o.handler({state:t,range:k,match:w,commands:l,chain:u,can:c,pasteEvent:s,dropEvent:a});f.push(S)})}),f.every(h=>h!==null)}let av=null;const mCe=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function gCe(n){const{editor:e,rules:t}=n;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:f,to:d,rule:h,pasteEvt:p})=>{const m=c.tr,g=F_({state:c,transaction:m});if(!(!pCe({editor:e,state:g,from:Math.max(f-1,0),to:d.b-1,rule:h,pasteEvent:p,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return t.map(c=>new Sr({view(f){const d=p=>{var m;r=!((m=f.dom.parentElement)===null||m===void 0)&&m.contains(p.target)?f.dom.parentElement:null,r&&(av=e)},h=()=>{av&&(av=null)};return window.addEventListener("dragstart",d),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",d),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,d)=>{if(o=r===f.dom.parentElement,a=d,!o){const h=av;h&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(f,d)=>{var h;const p=(h=d.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=d,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(f,d,h)=>{const p=f[0],m=p.getMeta("uiEvent")==="paste"&&!i,g=p.getMeta("uiEvent")==="drop"&&!o,v=p.getMeta("applyPasteRules"),b=!!v;if(!m&&!g&&!b)return;if(b){let{text:y}=v;typeof y=="string"?y=y:y=Fg(Fe.from(y),h.schema);const{from:k}=v,S=k+y.length,E=mCe(y);return l({rule:c,state:h,from:k,to:{b:S},pasteEvt:E})}const w=d.doc.content.findDiffStart(h.doc.content),_=d.doc.content.findDiffEnd(h.doc.content);if(!(!fCe(w)||!_||w===_.b))return l({rule:c,state:h,from:w,to:_,pasteEvt:s})}}))}function vCe(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class jd{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=jd.resolve(e),this.schema=sCe(this.extensions,t),this.setupExtensions()}static resolve(e){const t=jd.sort(jd.flatten(e)),r=vCe(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=vt(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=vt(r,"priority")||100,s=vt(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Lk(t.name,this.schema)},i=vt(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=jd.sort([...this.extensions].reverse()),r=[],i=[],o=t.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:Lk(s.name,this.schema)},l=[],u=vt(s,"addKeyboardShortcuts",a);let c={};if(s.type==="mark"&&vt(s,"exitable",a)&&(c.ArrowRight=()=>ii.handleExit({editor:e,mark:s})),u){const m=Object.fromEntries(Object.entries(u()).map(([g,v])=>[g,()=>v({editor:e})]));c={...c,...m}}const f=O3e(c);l.push(f);const d=vt(s,"addInputRules",a);f7(s,e.options.enableInputRules)&&d&&r.push(...d());const h=vt(s,"addPasteRules",a);f7(s,e.options.enablePasteRules)&&h&&i.push(...h());const p=vt(s,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[uCe({editor:e,rules:r}),...gCe({editor:e,rules:i}),...o]}get attributes(){return PW(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=j_(this.extensions);return Object.fromEntries(t.filter(r=>!!vt(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:ri(r.name,this.schema)},s=vt(r,"addNodeView",o);if(!s)return[];const a=(l,u,c,f,d)=>{const h=FS(l,i);return s()({node:l,view:u,getPos:c,decorations:f,innerDecorations:d,editor:e,extension:r,HTMLAttributes:h})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Lk(e.name,this.schema)};e.type==="mark"&&(!((t=Xt(vt(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=vt(e,"onBeforeCreate",r),o=vt(e,"onCreate",r),s=vt(e,"onUpdate",r),a=vt(e,"onSelectionUpdate",r),l=vt(e,"onTransaction",r),u=vt(e,"onFocus",r),c=vt(e,"onBlur",r),f=vt(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),f&&this.editor.on("destroy",f)})}}class Cr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Xt(vt(this,"addOptions",{name:this.name}))),this.storage=Xt(vt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Cr(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>H_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Cr({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Xt(vt(t,"addOptions",{name:t.name})),t.storage=Xt(vt(t,"addStorage",{name:t.name,options:t.options})),t}}function NW(n,e,t){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=t||{};let a="";return n.nodesBetween(r,i,(l,u,c,f)=>{var d;l.isBlock&&u>r&&(a+=o);const h=s==null?void 0:s[l.type.name];if(h)return c&&(a+=h({node:l,pos:u,parent:c,index:f,range:e})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)===null||d===void 0?void 0:d.slice(Math.max(r,u)-u,i-u))}),a}function BW(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const LW=Cr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Sr({key:new si("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),a=Math.max(...o.map(c=>c.$to.pos)),l=BW(t);return NW(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),bCe=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),yCe=(n=!1)=>({commands:e})=>e.setContent("",n),_Ce=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:o,$to:s})=>{n.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(l)),d=u.resolve(c.map(l+a.nodeSize)),h=f.blockRange(d);if(!h)return;const p=pp(h);if(a.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},wCe=n=>e=>n(e),kCe=()=>({state:n,dispatch:e})=>W3e(n,e),CCe=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,o=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new Lt(r.doc.resolve(s-1))),!0},SCe=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),l=i.after(o);n.delete(a,l).scrollIntoView()}return!0}return!1},xCe=n=>({tr:e,state:t,dispatch:r})=>{const i=ri(n,t.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),u=o.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},ECe=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},ACe=()=>({state:n,dispatch:e})=>D3e(n,e),MCe=()=>({commands:n})=>n.keyboardShortcut("Enter"),TCe=()=>({state:n,dispatch:e})=>V3e(n,e);function Ay(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:rE(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function FW(n,e,t={}){return n.find(r=>r.type===e&&Ay(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function d7(n,e,t={}){return!!FW(n,e,t)}function iE(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!FW([...i.node.marks],e,t)))return;let s=i.index,a=n.start()+i.offset,l=s+1,u=a+i.node.nodeSize;for(;s>0&&d7([...n.parent.child(s-1).marks],e,t);)s-=1,a-=n.parent.child(s).nodeSize;for(;l<n.parent.childCount&&d7([...n.parent.child(l).marks],e,t);)u+=n.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function vc(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const OCe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const o=vc(n,r.schema),{doc:s,selection:a}=t,{$from:l,from:u,to:c}=a;if(i){const f=iE(l,o,e);if(f&&f.from<=u&&f.to>=c){const d=Lt.create(s,f.from,f.to);t.setSelection(d)}}return!0},DCe=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function oE(n){return n instanceof Lt}function wl(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function zW(n,e=null){if(!e)return null;const t=qt.atStart(n),r=qt.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,o=r.to;return e==="all"?Lt.create(n,wl(0,i,o),wl(n.content.size,i,o)):Lt.create(n,wl(e,i,o),wl(e,i,o))}function RCe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function sE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const PCe=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(sE()||RCe())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!oE(t.state.selection))return s(),!0;const a=zW(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},ICe=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),NCe=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),jW=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&jW(r)}return n};function lv(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return jW(t)}function Bm(n,e,t){if(n instanceof Fu||n instanceof Fe)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return Fe.fromArray(n.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(n);return t.errorOnInvalidContent&&s.check(),s}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Bm("",e,t)}if(i){if(t.errorOnInvalidContent){let s=!1,a="";const l=new H6({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(t.slice?Al.fromSchema(l).parseSlice(lv(n),t.parseOptions):Al.fromSchema(l).parse(lv(n),t.parseOptions),t.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=Al.fromSchema(e);return t.slice?o.parseSlice(lv(n),t.parseOptions).content:o.parse(lv(n),t.parseOptions)}return Bm("",e,t)}function BCe(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Zr||i instanceof ti))return;const o=n.mapping.maps[r];let s=0;o.forEach((a,l,u,c)=>{s===0&&(s=c)}),n.setSelection(qt.near(n.doc.resolve(s),t))}const LCe=n=>!("type"in n),FCe=(n,e,t)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;const l=g=>{o.emit("contentError",{editor:o,error:g,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Bm(e,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(g){l(g)}try{a=Bm(e,o.schema,{parseOptions:u,errorOnInvalidContent:(s=t.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(g){return l(g),!1}let{from:c,to:f}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},d=!0,h=!0;if((LCe(a)?a:[a]).forEach(g=>{g.check(),d=d?g.isText&&g.marks.length===0:!1,h=h?g.isBlock:!1}),c===f&&h){const{parent:g}=r.doc.resolve(c);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(c-=1,f+=1)}let m;if(d){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof Fe){let g="";e.forEach(v=>{v.text&&(g+=v.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,c,f)}else m=a,r.replaceWith(c,f,m);t.updateSelection&&BCe(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:m}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:m})}return!0},zCe=()=>({state:n,dispatch:e})=>F3e(n,e),jCe=()=>({state:n,dispatch:e})=>z3e(n,e),HCe=()=>({state:n,dispatch:e})=>R3e(n,e),VCe=()=>({state:n,dispatch:e})=>B3e(n,e),WCe=()=>({state:n,dispatch:e,tr:t})=>{try{const r=R_(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},qCe=()=>({state:n,dispatch:e,tr:t})=>{try{const r=R_(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},UCe=()=>({state:n,dispatch:e})=>P3e(n,e),GCe=()=>({state:n,dispatch:e})=>I3e(n,e);function HW(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function KCe(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))sE()||HW()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const JCe=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const o=KCe(n).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Lm(n,e,t={}){const{from:r,to:i,empty:o}=n.selection,s=e?ri(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(i,d+f.nodeSize);a.push({node:f,from:h,to:p})});const l=i-r,u=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>Ay(f.node.attrs,t,{strict:!1}));return o?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=l}const YCe=(n,e={})=>({state:t,dispatch:r})=>{const i=ri(n,t.schema);return Lm(t,i,e)?j3e(t,r):!1},XCe=()=>({state:n,dispatch:e})=>q3e(n,e),QCe=n=>({state:e,dispatch:t})=>{const r=ri(n,e.schema);return $3e(r)(e,t)},ZCe=()=>({state:n,dispatch:e})=>H3e(n,e);function V_(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function h7(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const $Ce=(n,e)=>({tr:t,state:r,dispatch:i})=>{let o=null,s=null;const a=V_(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(o=ri(n,r.schema)),a==="mark"&&(s=vc(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{o&&o===u.type&&t.setNodeMarkup(c,void 0,h7(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&t.addMark(c,c+u.nodeSize,s.create(h7(f.attrs,e)))})})}),!0):!1},eSe=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),tSe=()=>({tr:n,dispatch:e})=>{if(e){const t=new ns(n.doc);n.setSelection(t)}return!0},nSe=()=>({state:n,dispatch:e})=>N3e(n,e),rSe=()=>({state:n,dispatch:e})=>L3e(n,e),iSe=()=>({state:n,dispatch:e})=>U3e(n,e),oSe=()=>({state:n,dispatch:e})=>J3e(n,e),sSe=()=>({state:n,dispatch:e})=>K3e(n,e);function zS(n,e,t={},r={}){return Bm(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const aSe=(n,e=!1,t={},r={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{var l,u;const{doc:c}=o;if(t.preserveWhitespace!=="full"){const f=zS(n,i.schema,t,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:c.content.size},n,{parseOptions:t,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function VW(n,e){const t=vc(e,n.schema),{from:r,to:i,empty:o}=n.selection,s=[];o?(n.storedMarks&&s.push(...n.storedMarks),s.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function lSe(n,e){const t=new WV(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function uSe(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function cSe(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,o)=>{t(i)&&r.push({node:i,pos:o})}),r}function fSe(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function aE(n){return e=>fSe(e.$from,n)}function dSe(n,e){const t={from:0,to:n.content.size};return NW(n,t,e)}function hSe(n,e){const t=ri(e,n.schema),{from:r,to:i}=n.selection,o=[];n.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===t.name);return s?{...s.attrs}:{}}function WW(n,e){const t=V_(typeof e=="string"?e:e.name,n.schema);return t==="node"?hSe(n,e):t==="mark"?VW(n,e):{}}function pSe(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function mSe(n){const e=pSe(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,s)=>s!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function gSe(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=t[o];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const u=e.slice(o).map(a,-1),c=e.slice(o).map(l),f=e.invert().map(u,-1),d=e.invert().map(c);r.push({oldRange:{from:f,to:d},newRange:{from:u,to:c}})})}),mSe(r)}function lE(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const o=t.resolve(n),s=iE(o,i.type);s&&r.push({mark:i,...s})}):t.nodesBetween(n,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function ob(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function jS(n,e,t={}){const{empty:r,ranges:i}=n.selection,o=e?vc(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>Ay(f.attrs,t,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const v=Math.max(h,g),b=Math.min(p,g+m.nodeSize),w=b-v;s+=w,a.push(...m.marks.map(_=>({mark:_,from:v,to:b})))})}),s===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>Ay(f.mark.attrs,t,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+u:l)>=s}function vSe(n,e,t={}){if(!e)return Lm(n,null,t)||jS(n,null,t);const r=V_(e,n.schema);return r==="node"?Lm(n,e,t):r==="mark"?jS(n,e,t):!1}function p7(n,e){const{nodeExtensions:t}=j_(e),r=t.find(s=>s.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Xt(vt(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function uE(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(o=>{i!==!1&&(uE(o,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function qW(n){return n instanceof Dt}function bSe(n,e,t){const i=n.state.doc.content.size,o=wl(e,0,i),s=wl(t,0,i),a=n.coordsAtPos(o),l=n.coordsAtPos(s,-1),u=Math.min(a.top,l.top),c=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),d=Math.max(a.right,l.right),h=d-f,p=c-u,v={top:u,bottom:c,left:f,right:d,width:h,height:p,x:f,y:u};return{...v,toJSON:()=>v}}function ySe(n,e,t){var r;const{selection:i}=e;let o=null;if(oE(i)&&(o=i.$cursor),o){const a=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let u=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(c,f,d)=>{if(u)return!1;if(c.isInline){const h=!d||d.type.allowsMarkType(t),p=!!t.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(t));u=h&&p}return!u}),u})}const _Se=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:o}=t,{empty:s,ranges:a}=o,l=vc(n,r.schema);if(i)if(s){const u=VW(r,l);t.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(d,h)=>{const p=Math.max(h,c),m=Math.min(h+d.nodeSize,f);d.marks.find(v=>v.type===l)?d.marks.forEach(v=>{l===v.type&&t.addMark(p,m,l.create({...v.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return ySe(r,t,l)},wSe=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),kSe=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const o=ri(n,t.schema);let s;return t.selection.$anchor.sameParent(t.selection.$head)&&(s=t.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:a})=>l7(o,{...s,...e})(t)?!0:a.clearNodes()).command(({state:a})=>l7(o,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},CSe=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=wl(n,0,r.content.size),o=Dt.create(r,i);e.setSelection(o)}return!0},SSe=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:o}=typeof n=="number"?{from:n,to:n}:n,s=Lt.atStart(r).from,a=Lt.atEnd(r).to,l=wl(i,s,a),u=wl(o,s,a),c=Lt.create(r,l,u);e.setSelection(c)}return!0},xSe=n=>({state:e,dispatch:t})=>{const r=ri(n,e.schema);return nCe(r)(e,t)};function m7(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const ESe=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,u=i.extensionManager.attributes,c=ob(u,a.node().type.name,a.node().attrs);if(o instanceof Dt&&o.node.isBlock)return!a.parentOffset||!lh(s,a.pos)?!1:(r&&(n&&m7(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,d=a.depth===0?void 0:uSe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&d?[{type:d,attrs:c}]:void 0,p=lh(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&lh(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:c}]:void 0),r){if(p&&(o instanceof Lt&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),d&&!f&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}n&&m7(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},ASe=(n,e={})=>({tr:t,state:r,dispatch:i,editor:o})=>{var s;const a=ri(n,r.schema),{$from:l,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(u))return!1;const f=l.node(-1);if(f.type!==a)return!1;const d=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let v=Fe.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-b;E>=l.depth-3;E-=1)v=Fe.from(l.node(E).copy(v));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,_={...ob(d,l.node().type.name,l.node().attrs),...e},y=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(_))||void 0;v=v.append(Fe.from(a.createAndFill(null,y)||void 0));const k=l.before(l.depth-(b-1));t.replace(k,l.after(-w),new at(v,4-b,0));let S=-1;t.doc.nodesBetween(k,t.doc.content.size,(E,M)=>{if(S>-1)return!1;E.isTextblock&&E.content.size===0&&(S=M+1)}),S>-1&&t.setSelection(Lt.near(t.doc.resolve(S))),t.scrollIntoView()}return!0}const h=u.pos===l.end()?f.contentMatchAt(0).defaultType:null,p={...ob(d,f.type.name,f.attrs),...e},m={...ob(d,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,u.pos);const g=h?[{type:a,attrs:p},{type:h,attrs:m}]:[{type:a,attrs:p}];if(!lh(t.doc,l.pos,2))return!1;if(i){const{selection:v,storedMarks:b}=r,{splittableMarks:w}=o.extensionManager,_=b||v.$to.parentOffset&&v.$from.marks();if(t.split(l.pos,2,g).scrollIntoView(),!_||!i)return!0;const y=_.filter(k=>w.includes(k.type.name));t.ensureMarks(y)}return!0},Fk=(n,e)=>{const t=aE(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&mc(n.doc,t.pos)&&n.join(t.pos),!0},zk=(n,e)=>{const t=aE(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&mc(n.doc,r)&&n.join(r),!0},MSe=(n,e,t,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:u,can:c})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=ri(n,s.schema),p=ri(e,s.schema),{selection:m,storedMarks:g}=s,{$from:v,$to:b}=m,w=v.blockRange(b),_=g||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;const y=aE(k=>p7(k.type.name,f))(m);if(w.depth>=1&&y&&w.depth-y.depth<=1){if(y.node.type===h)return u.liftListItem(p);if(p7(y.node.type.name,f)&&h.validContent(y.node.content)&&a)return l().command(()=>(o.setNodeMarkup(y.pos,h),!0)).command(()=>Fk(o,h)).command(()=>zk(o,h)).run()}return!t||!_||!a?l().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>Fk(o,h)).command(()=>zk(o,h)).run():l().command(()=>{const k=c().wrapInList(h,r),S=_.filter(E=>d.includes(E.type.name));return o.ensureMarks(S),k?!0:u.clearNodes()}).wrapInList(h,r).command(()=>Fk(o,h)).command(()=>zk(o,h)).run()},TSe=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=t,s=vc(n,r.schema);return jS(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},OSe=(n,e,t={})=>({state:r,commands:i})=>{const o=ri(n,r.schema),s=ri(e,r.schema),a=Lm(r,o,t);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(s,l):i.setNode(o,{...l,...t})},DSe=(n,e={})=>({state:t,commands:r})=>{const i=ri(n,t.schema);return Lm(t,i,e)?r.lift(i):r.wrapIn(i,e)},RSe=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){const s=n.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,n.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},PSe=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},ISe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=t,l=vc(n,r.schema),{$from:u,empty:c,ranges:f}=a;if(!i)return!0;if(c&&s){let{from:d,to:h}=a;const p=(o=u.marks().find(g=>g.type===l))===null||o===void 0?void 0:o.attrs,m=iE(u,l,p);m&&(d=m.from,h=m.to),t.removeMark(d,h,l)}else f.forEach(d=>{t.removeMark(d.$from.pos,d.$to.pos,l)});return t.removeStoredMark(l),!0},NSe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let o=null,s=null;const a=V_(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(o=ri(n,r.schema)),a==="mark"&&(s=vc(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;let f,d,h,p;t.selection.empty?r.doc.nodesBetween(u,c,(m,g)=>{o&&o===m.type&&(h=Math.max(g,u),p=Math.min(g+m.nodeSize,c),f=g,d=m)}):r.doc.nodesBetween(u,c,(m,g)=>{g<u&&o&&o===m.type&&(h=Math.max(g,u),p=Math.min(g+m.nodeSize,c),f=g,d=m),g>=u&&g<=c&&(o&&o===m.type&&t.setNodeMarkup(g,void 0,{...m.attrs,...e}),s&&m.marks.length&&m.marks.forEach(v=>{if(s===v.type){const b=Math.max(g,u),w=Math.min(g+m.nodeSize,c);t.addMark(b,w,s.create({...v.attrs,...e}))}}))}),d&&(f!==void 0&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),s&&d.marks.length&&d.marks.forEach(m=>{s===m.type&&t.addMark(h,p,s.create({...m.attrs,...e}))}))}),!0):!1},BSe=(n,e={})=>({state:t,dispatch:r})=>{const i=ri(n,t.schema);return Y3e(i,e)(t,r)},LSe=(n,e={})=>({state:t,dispatch:r})=>{const i=ri(n,t.schema);return X3e(i,e)(t,r)};var FSe=Object.freeze({__proto__:null,blur:bCe,clearContent:yCe,clearNodes:_Ce,command:wCe,createParagraphNear:kCe,cut:CCe,deleteCurrentNode:SCe,deleteNode:xCe,deleteRange:ECe,deleteSelection:ACe,enter:MCe,exitCode:TCe,extendMarkRange:OCe,first:DCe,focus:PCe,forEach:ICe,insertContent:NCe,insertContentAt:FCe,joinBackward:HCe,joinDown:jCe,joinForward:VCe,joinItemBackward:WCe,joinItemForward:qCe,joinTextblockBackward:UCe,joinTextblockForward:GCe,joinUp:zCe,keyboardShortcut:JCe,lift:YCe,liftEmptyBlock:XCe,liftListItem:QCe,newlineInCode:ZCe,resetAttributes:$Ce,scrollIntoView:eSe,selectAll:tSe,selectNodeBackward:nSe,selectNodeForward:rSe,selectParentNode:iSe,selectTextblockEnd:oSe,selectTextblockStart:sSe,setContent:aSe,setMark:_Se,setMeta:wSe,setNode:kSe,setNodeSelection:CSe,setTextSelection:SSe,sinkListItem:xSe,splitBlock:ESe,splitListItem:ASe,toggleList:MSe,toggleMark:TSe,toggleNode:OSe,toggleWrap:DSe,undoInputRule:RSe,unsetAllMarks:PSe,unsetMark:ISe,updateAttributes:NSe,wrapIn:BSe,wrapInList:LSe});const UW=Cr.create({name:"commands",addCommands(){return{...FSe}}}),GW=Cr.create({name:"drop",addProseMirrorPlugins(){return[new Sr({key:new si("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),KW=Cr.create({name:"editable",addProseMirrorPlugins(){return[new Sr({key:new si("editable"),props:{editable:()=>this.editor.options.editable}})]}}),JW=new si("focusEvents"),YW=Cr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Sr({key:JW,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),XW=Cr.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:f}=l,{pos:d,parent:h}=f,p=f.parent.isTextblock&&d>0?a.doc.resolve(d-1):f,m=p.parent.type.spec.isolating,g=f.pos-f.parentOffset,v=m&&p.parent.childCount===1?g===f.pos:qt.atStart(u).from===d;return!c||!h.type.isTextblock||h.textContent.length||!v||v&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return sE()||HW()?o:i},addProseMirrorPlugins(){return[new Sr({key:new si("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(m=>m.getMeta("composition")))return;const r=n.some(m=>m.docChanged)&&!e.doc.eq(t.doc),i=n.some(m=>m.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:a}=e.selection,l=qt.atStart(e.doc).from,u=qt.atEnd(e.doc).to;if(o||!(s===l&&a===u)||!uE(t.doc))return;const d=t.tr,h=F_({state:t,transaction:d}),{commands:p}=new z_({editor:this.editor,state:h});if(p.clearNodes(),!!d.steps.length)return d}})]}}),QW=Cr.create({name:"paste",addProseMirrorPlugins(){return[new Sr({key:new si("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),ZW=Cr.create({name:"tabindex",addProseMirrorPlugins(){return[new Sr({key:new si("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var zSe=Object.freeze({__proto__:null,ClipboardTextSerializer:LW,Commands:UW,Drop:GW,Editable:KW,FocusEvents:YW,Keymap:XW,Paste:QW,Tabindex:ZW,focusEventsPluginKey:JW});class zc{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new zc(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new zc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new zc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,s=this.pos+r+(o?0:1),a=this.resolvedPos.doc.resolve(s);if(!i&&a.depth<=this.depth)return;const l=new zc(a,this.editor,i,i?t:null);i&&(l.actualDepth=this.depth+1),e.push(new zc(a,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const o=i.node.attrs,s=Object.keys(t);for(let a=0;a<s.length;a+=1){const l=s[a];if(o[l]!==t[l])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(t);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(l=>t[l]===s.node.attrs[l])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const jSe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function HSe(n,e,t){const r=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class VSe extends rCe{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=HSe(jSe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=IW(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=r.filter(a=>!a.key.startsWith(s))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[KW,LW.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),UW,YW,XW,ZW,GW,QW].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new jd(i,this)}createCommandManager(){this.commandManager=new z_({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=zS(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=zS(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=zW(t,this.options.autofocus);this.view=new xW(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:zd.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return WW(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return vSe(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Fg(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return dSe(this.state.doc,{blockSeparator:t,textSerializers:{...BW(this.schema),...r}})}get isEmpty(){return uE(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new zc(t,this)}get $doc(){return this.$pos(0)}}function Mf(n){return new zg({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Xt(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),u=t.from+a.indexOf(s),c=u+s.length;if(lE(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;c<t.to&&o.delete(c,t.to),u>t.from&&o.delete(t.from+l,u);const d=t.from+l+s.length;o.addMark(t.from+l,d,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}function $W(n){return new zg({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Xt(n.getAttributes,void 0,r)||{},{tr:o}=e,s=t.from;let a=t.to;const l=n.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=s+u;c>a?c=a:a=c+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,s+r[0].length-1),o.replaceWith(c,a,l)}else if(r[0]){const u=n.type.isInline?s:s-1;o.insert(u,n.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a))}o.scrollIntoView()}})}function HS(n){return new zg({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),o=Xt(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function jh(n){return new zg({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const o=Xt(n.getAttributes,void 0,r)||{},s=e.tr.delete(t.from,t.to),l=s.doc.resolve(t.from).blockRange(),u=l&&q6(l,n.type,o);if(!u)return null;if(s.wrap(l,u),n.keepMarks&&n.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:h}=n.editor.extensionManager,p=d||f.$to.parentOffset&&f.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));s.ensureMarks(m)}}if(n.keepAttributes){const f=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}const c=s.doc.resolve(t.from-1).nodeBefore;c&&c.type===n.type&&mc(s.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,c))&&s.join(t.from-1)}})}let On=class VS{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Xt(vt(this,"addOptions",{name:this.name}))),this.storage=Xt(vt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new VS(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>H_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new VS(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Xt(vt(t,"addOptions",{name:t.name})),t.storage=Xt(vt(t,"addStorage",{name:t.name,options:t.options})),t}};function tc(n){return new dCe({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const o=Xt(n.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let u=t.to;if(a){const c=l.search(/\S/),f=t.from+l.indexOf(a),d=f+a.length;if(lE(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>f).length)return null;d<t.to&&s.delete(d,t.to),f>t.from&&s.delete(t.from+c,f),u=t.from+c+a.length,s.addMark(t.from+c,u,n.type.create(o||{})),s.removeStoredMark(n.type)}}})}function WSe(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var qSe=Object.defineProperty,USe=(n,e,t)=>e in n?qSe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Hh=(n,e,t)=>(USe(n,typeof e!="symbol"?e+"":e,t),t),eq=class{constructor(){Hh(this,"listeners",new Map)}subscribe(n,e){this.listeners.has(n)||this.listeners.set(n,[]),!this.listeners.get(n).includes(e)&&this.listeners.get(n).push(e)}unsubscribe(n,e){this.listeners.has(n)&&this.listeners.get(n).includes(e)&&(this.listeners.get(n).splice(this.listeners.get(n).indexOf(e),1),this.listeners.get(n).length===0&&this.listeners.delete(n))}emit(n,e){this.listeners.has(n)&&this.listeners.get(n).forEach(t=>t(e))}},GSe={broadcast:!1},KSe={broadcast:!1},g7=class{constructor({data:n,expiresAt:e=null}){Hh(this,"data"),Hh(this,"expiresAt"),this.data=n,this.expiresAt=e}isResolving(){return this.data instanceof Promise}hasExpired(){return this.expiresAt===null||this.expiresAt<new Date}expiresIn(n){return this.expiresAt=new Date,this.expiresAt.setMilliseconds(this.expiresAt.getMilliseconds()+n),this}},JSe=class{constructor(){Hh(this,"elements",new Map),Hh(this,"event",new eq)}resolve(n,e){Promise.resolve(e.data).then(t=>{if(t==null)return this.remove(n);e.data=t,this.broadcast(n,t)})}get(n){return this.elements.get(n)}set(n,e){this.elements.set(n,e),this.resolve(n,e)}remove(n,e){const{broadcast:t}={...GSe,...e};t&&this.broadcast(n,void 0),this.elements.delete(n)}clear(n){const{broadcast:e}={...KSe,...n};if(e)for(const t of this.elements.keys())this.broadcast(t,void 0);this.elements.clear()}has(n){return this.elements.has(n)}subscribe(n,e){this.event.subscribe(n,e)}unsubscribe(n,e){this.event.unsubscribe(n,e)}broadcast(n,e){this.event.emit(n,e)}},tq={cache:new JSe,errors:new eq,fetcher:async n=>{const e=await fetch(n);if(!e.ok)throw Error("Not a 2XX response.");return e.json()},fallbackData:void 0,loadInitialCache:!0,revalidateOnStart:!0,dedupingInterval:2e3,revalidateOnFocus:!0,focusThrottleInterval:5e3,revalidateOnReconnect:!0,reconnectWhen:(n,{enabled:e})=>e&&typeof window<"u"?(window.addEventListener("online",n),()=>window.removeEventListener("online",n)):()=>{},focusWhen:(n,{enabled:e,throttleInterval:t})=>{if(e&&typeof window<"u"){let r=null;const i=()=>{const o=Date.now();(r===null||o-r>t)&&(r=o,n())};return window.addEventListener("focus",i),()=>window.removeEventListener("focus",i)}return()=>{}},revalidateFunction:void 0},nq={...tq,force:!1},YSe={revalidate:!0,revalidateOptions:{...nq},revalidateFunction:void 0},XSe={broadcast:!1},QSe=class{constructor(n){Hh(this,"options"),this.options={...tq,...n}}get cache(){return this.options.cache}get errors(){return this.options.errors}async requestData(n,e){return await Promise.resolve(e(n)).catch(t=>{throw this.errors.emit(n,t),t})}resolveKey(n){if(typeof n=="function")try{return n()}catch{return}return n}clear(n,e){const t={...XSe,...e};if(n==null)return this.cache.clear(t);if(!Array.isArray(n))return this.cache.remove(n,t);for(const r of n)this.cache.remove(r,t)}async revalidate(n,e){if(!n)throw new Error("[Revalidate] Key issue: ${key}");const{fetcher:t,dedupingInterval:r}=this.options,{force:i,fetcher:o,dedupingInterval:s}={...nq,fetcher:t,dedupingInterval:r,...e};if(i||!this.cache.has(n)||this.cache.has(n)&&this.cache.get(n).hasExpired()){const a=this.requestData(n,o),l=a.catch(()=>{});return this.cache.set(n,new g7({data:l}).expiresIn(s)),await a}return this.getWait(n)}async mutate(n,e,t){var r;if(!n)throw new Error("[Mutate] Key issue: ${key}");const{revalidate:i,revalidateOptions:o,revalidateFunction:s}={...YSe,...t};let a;if(typeof e=="function"){let l;if(this.cache.has(n)){const u=this.cache.get(n);u.isResolving()||(l=u.data)}a=e(l)}else a=e;return this.cache.set(n,new g7({data:a})),i?await((r=s==null?void 0:s(n,o))!=null?r:this.revalidate(n,o)):a}subscribeData(n,e){if(n){const t=r=>e(r);return this.cache.subscribe(n,t),()=>this.cache.unsubscribe(n,t)}return()=>{}}subscribeErrors(n,e){if(n){const t=r=>e(r);return this.errors.subscribe(n,t),()=>this.errors.unsubscribe(n,t)}return()=>{}}get(n){if(n&&this.cache.has(n)){const e=this.cache.get(n);if(!e.isResolving())return e.data}}getWait(n){return new Promise((e,t)=>{const r=this.subscribeData(n,s=>{if(r(),s!==void 0)return e(s)}),i=this.subscribeErrors(n,s=>{if(i(),s!==void 0)return t(s)}),o=this.get(n);if(o!==void 0)return e(o)})}subscribe(n,e,t,r){const{fetcher:i,fallbackData:o,loadInitialCache:s,revalidateOnStart:a,dedupingInterval:l,revalidateOnFocus:u,focusThrottleInterval:c,revalidateOnReconnect:f,reconnectWhen:d,focusWhen:h,revalidateFunction:p}={...this.options,...r},m=E=>{var M;return(M=p==null?void 0:p(this.resolveKey(n),E))!=null?M:this.revalidate(this.resolveKey(n),E)},g=()=>m({fetcher:i,dedupingInterval:l}),v=s?this.get(this.resolveKey(n)):o??void 0,b=a?g():Promise.resolve(void 0),w=v?Promise.resolve(v):b;v&&(e==null||e(v));const _=e?this.subscribeData(this.resolveKey(n),e):void 0,y=t?this.subscribeErrors(this.resolveKey(n),t):void 0,k=h(g,{throttleInterval:c,enabled:u}),S=d(g,{enabled:f});return{unsubscribe:()=>{_==null||_(),y==null||y(),k==null||k(),S==null||S()},dataPromise:w,revalidatePromise:b}}};function fh(){}function ZSe(n){return n()}function $Se(n){n.forEach(ZSe)}function e4e(n){return typeof n=="function"}function t4e(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function n4e(n,...e){if(n==null){for(const r of e)r(void 0);return fh}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}var pd=[];function r4e(n,e){return{subscribe:WS(n,e).subscribe}}function WS(n,e=fh){let t;const r=new Set;function i(a){if(t4e(n,a)&&(n=a,t)){const l=!pd.length;for(const u of r)u[1](),pd.push(u,n);if(l){for(let u=0;u<pd.length;u+=2)pd[u][0](pd[u+1]);pd.length=0}}}function o(a){i(a(n))}function s(a,l=fh){const u=[a,l];return r.add(u),r.size===1&&(t=e(i,o)||fh),a(n),()=>{r.delete(u),r.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function v7(n,e,t){const r=!Array.isArray(n),i=r?[n]:n;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return r4e(t,(s,a)=>{let l=!1;const u=[];let c=0,f=fh;const d=()=>{if(c)return;f();const p=e(r?u[0]:u,s,a);o?s(p):f=e4e(p)?p:fh},h=i.map((p,m)=>n4e(p,g=>{u[m]=g,c&=~(1<<m),l&&d()},()=>{c|=1<<m}));return l=!0,d(),function(){$Se(h),f(),l=!1}})}var i4e=class extends QSe{useSWR(n,e){let t;const r=WS(void 0,()=>()=>t==null?void 0:t()),i=WS(void 0,()=>()=>t==null?void 0:t());U4(()=>{const c=d=>{i.set(void 0),r.set(d)},f=d=>i.set(d);t||(t=this.subscribe(n,c,f,{loadInitialCache:!0,...e}).unsubscribe)}),Kr(()=>t==null?void 0:t());const o=(c,f)=>this.mutate(this.resolveKey(n),c,{revalidateOptions:e,...f}),s=c=>this.revalidate(this.resolveKey(n),{...e,...c}),a=c=>this.clear(this.resolveKey(n),c),l=v7([r,i],([c,f])=>c===void 0&&f===void 0),u=v7([r,i],([c,f])=>c!==void 0&&f===void 0);return{data:r,error:i,mutate:o,revalidate:s,clear:a,isLoading:l,isValid:u}}},o4e=n=>new i4e(n),s4e=o4e(),a4e=(n,e)=>s4e.useSWR(n,e),Fm={code:"0",name:"text",parse:n=>{if(typeof n!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:n}}},zm={code:"1",name:"function_call",parse:n=>{if(n==null||typeof n!="object"||!("function_call"in n)||typeof n.function_call!="object"||n.function_call==null||!("name"in n.function_call)||!("arguments"in n.function_call)||typeof n.function_call.name!="string"||typeof n.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:n}}},jm={code:"2",name:"data",parse:n=>{if(!Array.isArray(n))throw new Error('"data" parts expect an array value.');return{type:"data",value:n}}},Hm={code:"3",name:"error",parse:n=>{if(typeof n!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:n}}},Vm={code:"4",name:"assistant_message",parse:n=>{if(n==null||typeof n!="object"||!("id"in n)||!("role"in n)||!("content"in n)||typeof n.id!="string"||typeof n.role!="string"||n.role!=="assistant"||!Array.isArray(n.content)||!n.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:n}}},Wm={code:"5",name:"assistant_control_data",parse:n=>{if(n==null||typeof n!="object"||!("threadId"in n)||!("messageId"in n)||typeof n.threadId!="string"||typeof n.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:n.threadId,messageId:n.messageId}}}},qm={code:"6",name:"data_message",parse:n=>{if(n==null||typeof n!="object"||!("role"in n)||!("data"in n)||typeof n.role!="string"||n.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:n}}},Um={code:"7",name:"tool_calls",parse:n=>{if(n==null||typeof n!="object"||!("tool_calls"in n)||typeof n.tool_calls!="object"||n.tool_calls==null||!Array.isArray(n.tool_calls)||n.tool_calls.some(e=>{e==null||typeof e!="object"||!("id"in e)||typeof e.id!="string"||!("type"in e)||typeof e.type!="string"||!("function"in e)||e.function==null||typeof e.function!="object"||!("arguments"in e.function)||typeof e.function.name!="string"||e.function.arguments}))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:n}}},Gm={code:"8",name:"message_annotations",parse:n=>{if(!Array.isArray(n))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:n}}},l4e=[Fm,zm,jm,Hm,Vm,Wm,qm,Um,Gm],u4e={[Fm.code]:Fm,[zm.code]:zm,[jm.code]:jm,[Hm.code]:Hm,[Vm.code]:Vm,[Wm.code]:Wm,[qm.code]:qm,[Um.code]:Um,[Gm.code]:Gm};Fm.name+"",Fm.code,zm.name+"",zm.code,jm.name+"",jm.code,Hm.name+"",Hm.code,Vm.name+"",Vm.code,Wm.name+"",Wm.code,qm.name+"",qm.code,Um.name+"",Um.code,Gm.name+"",Gm.code;var c4e=l4e.map(n=>n.code),rq=n=>{const e=n.indexOf(":");if(e===-1)throw new Error("Failed to parse stream string. No separator found.");const t=n.slice(0,e);if(!c4e.includes(t))throw new Error(`Failed to parse stream string. Invalid code ${t}.`);const r=t,i=n.slice(e+1),o=JSON.parse(i);return u4e[r].parse(o)},f4e=`
`.charCodeAt(0);function d4e(n,e){const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return n.length=0,t}async function*h4e(n,{isAborted:e}={}){const t=new TextDecoder,r=[];let i=0;for(;;){const{value:o}=await n.read();if(o&&(r.push(o),i+=o.length,o[o.length-1]!==f4e))continue;if(r.length===0)break;const s=d4e(r,i);i=0;const a=t.decode(s,{stream:!0}).split(`
`).filter(l=>l!=="").map(rq);for(const l of a)yield l;if(e!=null&&e()){n.cancel();break}}}function p4e(n){const e=new TextDecoder;return n?function(t){return e.decode(t,{stream:!0}).split(`
`).filter(i=>i!=="").map(rq).filter(Boolean)}:function(t){return t?e.decode(t,{stream:!0}):""}}var m4e="X-Experimental-Stream-Data";async function g4e({api:n,prompt:e,credentials:t,headers:r,body:i,setCompletion:o,setLoading:s,setError:a,setAbortController:l,onResponse:u,onFinish:c,onError:f,onData:d}){try{s(!0),a(void 0);const h=new AbortController;l(h),o("");const p=await fetch(n,{method:"POST",body:JSON.stringify({prompt:e,...i}),credentials:t,headers:{"Content-Type":"application/json",...r},signal:h.signal}).catch(b=>{throw b});if(u)try{await u(p)}catch(b){throw b}if(!p.ok)throw new Error(await p.text()||"Failed to fetch the chat response.");if(!p.body)throw new Error("The response body is empty.");let m="";const g=p.body.getReader();if(p.headers.get(m4e)==="true")for await(const{type:b,value:w}of h4e(g,{isAborted:()=>h===null}))switch(b){case"text":{m+=w,o(m);break}case"data":{d==null||d(w);break}}else{const b=p4e();for(;;){const{done:w,value:_}=await g.read();if(w)break;if(m+=b(_),o(m),h===null){g.cancel();break}}}return c&&c(e,m),l(null),m}catch(h){if(h.name==="AbortError")return l(null),null;h instanceof Error&&f&&f(h),a(h)}finally{s(!1)}}var v4e=0,b7={};function iq({api:n="/api/completion",id:e,initialCompletion:t="",initialInput:r="",credentials:i,headers:o,body:s,onResponse:a,onFinish:l,onError:u}={}){const c=e||`completion-${v4e++}`,f=`${n}|${c}`,{data:d,mutate:h,isLoading:p}=a4e(f,{fetcher:()=>b7[f]||t,fallbackData:t}),m=Bn(void 0),g=Bn(!1);d.set(t);const v=O=>(b7[f]=O,h(O)),b=d,w=Bn(void 0);let _=null;const y=async(O,I)=>{const P=Wo(m);return g4e({api:n,prompt:O,credentials:i,headers:{...o,...I==null?void 0:I.headers},body:{...s,...I==null?void 0:I.body},setCompletion:v,setLoading:A=>g.set(A),setError:A=>w.set(A),setAbortController:A=>{_=A},onResponse:a,onFinish:l,onError:u,onData(A){m.set([...P||[],...A||[]])}})},k=()=>{_&&(_.abort(),_=null)},S=O=>{v(O)},E=Bn(r),M=O=>{O.preventDefault();const I=Wo(E);if(I)return y(I)},R=hg([p,g],([O,I])=>O||I);return{completion:b,complete:y,error:w,stop:k,setCompletion:S,input:E,handleSubmit:M,isLoading:R,data:m}}function b4e(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.map(function(r){return r.split(" ").map(function(i){return i?""+n+i:""}).join(" ")}).join(" ")}function y4e(n,e){return e.replace(/([^}{]*){/gm,function(t,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+n+"$1")+"{"})}function Tl(n,e){return function(t){t&&(n[e]=t)}}function oq(n,e,t){return function(r){r&&(n[e][t]=r)}}function y7(n,e){return function(t){var r=t.prototype;n.forEach(function(i){e(r,i)})}}function _4e(n,e){return e===void 0&&(e={}),function(t,r){n.forEach(function(i){var o=e[i]||i;o in t||(t[o]=function(){for(var s,a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u=(s=this[r])[i].apply(s,a);return u===this[r]?this:u})})}}var w4e="function",k4e="object",C4e="string",S4e="number",cE="undefined",sq=typeof window!==cE,x4e=typeof document!==cE&&document,E4e=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Nr=1e-7,uv={cm:function(n){return n*96/2.54},mm:function(n){return n*96/254},in:function(n){return n*96},pt:function(n){return n*96/72},pc:function(n){return n*96/6},"%":function(n,e){return n*e/100},vw:function(n,e){return e===void 0&&(e=window.innerWidth),n/100*e},vh:function(n,e){return e===void 0&&(e=window.innerHeight),n/100*e},vmax:function(n,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),n/100*e},vmin:function(n,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),n/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function A4e(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Dc(n,e,t,r){return(n*r+e*t)/(t+r)}function W_(n){return typeof n===cE}function Ks(n){return n&&typeof n===k4e}function Fr(n){return Array.isArray(n)}function uo(n){return typeof n===C4e}function Vh(n){return typeof n===S4e}function fE(n){return typeof n===w4e}function M4e(n,e){var t=n===""||n==" ",r=e===""||e==" ";return r&&t||n===e}function aq(n,e,t,r,i){var o=dE(n,e,t);return o?t:T4e(n,e,t+1,r,i)}function dE(n,e,t){if(!n.ignore)return null;var r=e.slice(Math.max(t-3,0),t+3).join("");return new RegExp(n.ignore).exec(r)}function T4e(n,e,t,r,i){for(var o=function(u){var c=e[u].trim();if(c===n.close&&!dE(n,e,u))return{value:u};var f=u,d=co(i,function(h){var p=h.open;return p===c});if(d&&(f=aq(d,e,u,r,i)),f===-1)return s=u,"break";u=f,s=u},s,a=t;a<r;++a){var l=o(a);if(a=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function hE(n,e){var t=uo(e)?{separator:e}:e,r=t.separator,i=r===void 0?",":r,o=t.isSeparateFirst,s=t.isSeparateOnlyOpenClose,a=t.isSeparateOpenClose,l=a===void 0?s:a,u=t.openCloseCharacters,c=u===void 0?E4e:u,f=c.map(function(S){var E=S.open,M=S.close;return E===M?E:E+"|"+M}).join("|"),d="(\\s*"+i+"\\s*|"+f+"|\\s+)",h=new RegExp(d,"g"),p=n.split(h).filter(function(S){return S&&S!=="undefined"}),m=p.length,g=[],v=[];function b(){return v.length?(g.push(v.join("")),v=[],!0):!1}for(var w=function(S){var E=p[S].trim(),M=S,R=co(c,function(P){var A=P.open;return A===E}),O=co(c,function(P){var A=P.close;return A===E});if(R){if(M=aq(R,p,S,m,c),M!==-1&&l)return b()&&o||(g.push(p.slice(S,M+1).join("")),S=M,o)?(_=S,"break"):(_=S,"continue")}else if(O&&!dE(O,p,S)){var I=A4e(c);return I.splice(c.indexOf(O),1),{value:hE(n,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:I})}}else if(M4e(E,i)&&!s)return b(),o?(_=S,"break"):(_=S,"continue");M===-1&&(M=m-1),v.push(p.slice(S,M+1).join("")),S=M,_=S},_,y=0;y<m;++y){var k=w(y);if(y=_,typeof k=="object")return k.value;if(k==="break")break}return v.length&&g.push(v.join("")),g}function nc(n){return hE(n,"")}function Xc(n){return hE(n,",")}function lq(n){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(n);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function jg(n){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(n);if(!e)return{prefix:"",unit:"",value:NaN};var t=e[1],r=e[2],i=e[3];return{prefix:t,unit:i,value:parseFloat(r)}}function uq(n){return n.replace(/[\s-_]+([^\s-_])/g,function(e,t){return t.toUpperCase()})}function sb(n,e){return e===void 0&&(e="-"),n.replace(/([a-z])([A-Z])/g,function(t,r,i){return""+r+e+i.toLowerCase()})}function Km(){return Date.now?Date.now():new Date().getTime()}function Vl(n,e,t){t===void 0&&(t=-1);for(var r=n.length,i=0;i<r;++i)if(e(n[i],i,n))return i;return t}function co(n,e,t){var r=Vl(n,e);return r>-1?n[r]:t}var cq=function(){var n=Km(),e=sq&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(t){var r=Km(),i=setTimeout(function(){t(r-n)},1e3/60);return i}}(),O4e=function(){var n=sq&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return n?n.bind(window):function(e){clearTimeout(e)}}();function Wl(n){return Object.keys(n)}function D4e(n){var e=Wl(n);return e.map(function(t){return n[t]})}function Nn(n,e){var t=jg(n),r=t.value,i=t.unit;if(Ks(e)){var o=e[i];if(o){if(fE(o))return o(r);if(uv[i])return uv[i](r,o)}}else if(i==="%")return r*e/100;return uv[i]?uv[i](r):r}function qS(n,e,t){return Math.max(e,Math.min(n,t))}function _7(n,e,t,r){return r===void 0&&(r=n[0]/n[1]),[[Ft(e[0],Nr),Ft(e[0]/r,Nr)],[Ft(e[1]*r,Nr),Ft(e[1],Nr)]].filter(function(i){return i.every(function(o,s){var a=e[s],l=Ft(a,Nr);return t?o<=a||o<=l:o>=a||o>=l})})[0]||n}function fq(n,e,t,r){if(!r)return n.map(function(h,p){return qS(h,e[p],t[p])});var i=n[0],o=n[1],s=r===!0?i/o:r,a=_7(n,e,!1,s),l=a[0],u=a[1],c=_7(n,t,!0,s),f=c[0],d=c[1];return i<l||o<u?(i=l,o=u):(i>f||o>d)&&(i=f,o=d),[i,o]}function R4e(n){for(var e=n.length,t=0,r=e-1;r>=0;--r)t+=n[r];return t}function US(n){for(var e=n.length,t=0,r=e-1;r>=0;--r)t+=n[r];return e?t/e:0}function Or(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=Math.atan2(r,t);return i>=0?i:i+Math.PI*2}function P4e(n){return[0,1].map(function(e){return US(n.map(function(t){return t[e]}))})}function w7(n){var e=P4e(n),t=Or(e,n[0]),r=Or(e,n[1]);return t<r&&r-t<Math.PI||t>r&&r-t<-Math.PI?1:-1}function Ol(n,e){return Math.sqrt(Math.pow((e?e[0]:0)-n[0],2)+Math.pow((e?e[1]:0)-n[1],2))}function Ft(n,e){if(!e)return n;var t=1/e;return Math.round(n/e)/t}function k7(n,e){return n.forEach(function(t,r){n[r]=Ft(n[r],e)}),n}function I4e(n){for(var e=[],t=0;t<n;++t)e.push(t);return e}function N4e(n){return n.reduce(function(e,t){return e.concat(t)},[])}function dq(n,e){n.indexOf(e)===-1&&n.push(e)}function qr(n,e){return n.classList?n.classList.contains(e):!!n.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function hq(n,e){n.classList?n.classList.add(e):n.className+=" "+e}function pq(n,e){if(n.classList)n.classList.remove(e);else{var t=new RegExp("(\\s|^)"+e+"(\\s|$)");n.className=n.className.replace(t," ")}}function ci(n,e,t,r){n.addEventListener(e,t,r)}function Vr(n,e,t,r){n.removeEventListener(e,t,r)}function mp(n){return(n==null?void 0:n.ownerDocument)||x4e}function pE(n){return mp(n).documentElement}function bc(n){return mp(n).body}function Vu(n){var e;return((e=n==null?void 0:n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function mq(n){return n&&"postMessage"in n&&"blur"in n&&"self"in n}function gp(n){return Ks(n)&&n.nodeName&&n.nodeType&&"ownerDocument"in n}var B4e=function(){function n(){this.keys=[],this.values=[]}var e=n.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,r){var i=this.keys,o=this.values,s=i.indexOf(t),a=s===-1?i.length:s;i[a]=t,o[a]=r},n}(),L4e=function(){function n(){this.object={}}var e=n.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,r){this.object[t]=r},n}(),F4e=typeof Map=="function",z4e=function(){function n(){}var e=n.prototype;return e.connect=function(t,r){this.prev=t,this.next=r,t&&(t.next=this),r&&(r.prev=this)},e.disconnect=function(){var t=this.prev,r=this.next;t&&(t.next=r),r&&(r.prev=t)},e.getIndex=function(){for(var t=this,r=-1;t;)t=t.prev,++r;return r},n}();function j4e(n,e){var t=[],r=[];return n.forEach(function(i){var o=i[0],s=i[1],a=new z4e;t[o]=a,r[s]=a}),t.forEach(function(i,o){i.connect(t[o-1])}),n.filter(function(i,o){return!e[o]}).map(function(i,o){var s=i[0],a=i[1];if(s===a)return[0,0];var l=t[s],u=r[a-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,t[0]);var f=l.getIndex();return[c,f]})}var H4e=function(){function n(t,r,i,o,s,a,l,u){this.prevList=t,this.list=r,this.added=i,this.removed=o,this.changed=s,this.maintained=a,this.changedBeforeAdded=l,this.fixed=u}var e=n.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=j4e(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=t.filter(function(o,s){var a=o[0],l=o[1],u=r[s],c=u[0],f=u[1];if(a!==l)return i.push([c,f]),!0}),this.cachePureChanged=i},n}();function Hg(n,e,t){var r=F4e?Map:t?L4e:B4e,i=t||function(b){return b},o=[],s=[],a=[],l=n.map(i),u=e.map(i),c=new r,f=new r,d=[],h=[],p={},m=[],g=0,v=0;return l.forEach(function(b,w){c.set(b,w)}),u.forEach(function(b,w){f.set(b,w)}),l.forEach(function(b,w){var _=f.get(b);typeof _>"u"?(++v,s.push(w)):p[_]=v}),u.forEach(function(b,w){var _=c.get(b);typeof _>"u"?(o.push(w),++g):(a.push([_,w]),v=p[w]||0,d.push([_-v,w-g]),h.push(w===_),_!==w&&m.push([_,w]))}),s.reverse(),new H4e(n,e,o,s,m,a,d,h)}var V4e=function(){function n(t,r){t===void 0&&(t=[]),this.findKeyCallback=r,this.list=[].slice.call(t)}var e=n.prototype;return e.update=function(t){var r=[].slice.call(t),i=Hg(this.list,r,this.findKeyCallback);return this.list=r,i},n}(),GS=function(n,e){return GS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},GS(n,e)};function Vg(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");GS(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var wa=function(){return wa=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},wa.apply(this,arguments)};function gq(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function C7(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function S7(n){var e=0;return n.map(function(t){return t==null?"$compat".concat(++e):"".concat(t)})}function vq(n){var e=[];return n.forEach(function(t){e=e.concat(Fr(t)?vq(t):t)}),e}function jk(n,e){if(!e)return n;for(var t in e)W_(n[t])&&(n[t]=e[t]);return n}function My(n,e){if(n===e)return!1;for(var t in n)if(!(t in e))return!0;for(var t in e)if(n[t]!==e[t])return!0;return!1}function x7(n){var e=n.className,t=gq(n,["className"]);return e!=null&&(t.class=e),delete t.style,delete t.children,t}function E7(n){var e={},t={};for(var r in n)r.indexOf("on")===0?t[r]=n[r]:e[r]=n[r];return[e,t]}function q_(n){if(!n)return null;var e=n.b;return gp(e)?e:q_(n.c)}function bq(n){var e=n.parentNode;e&&e.removeChild(n)}function yq(n){n.forEach(function(e){e()})}function W4e(){return this.constructor(this.props,this.context)}var mE=0,U_=function(){function n(t,r,i,o,s,a,l){l===void 0&&(l={}),this.t=t,this.d=r,this.k=i,this.i=o,this.c=s,this.ref=a,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=n.prototype;return e.s=function(){return!0},e.u=function(t,r,i,o,s){var a=this,l=a.d,u=D4e(r).filter(function(p){return p.$_req}),c=vq(u.map(function(p){return p.$_subs})),f=co(c,function(p){return p.d===l});if(a.b&&!uo(i)&&!s&&!a.s(i.props,o)&&!f){var d=c.reduce(function(p,m){var g=m.d;return p[0]?p[0].d===g&&p.push(m):g>l&&p.push(m),p},[]);return d.forEach(function(p){Wg(p,p._ps,[p.o],t,r,!0)}),!1}a.o=i,a.ss(o);var h=a.ps;return uo(i)||(a.ps=i.props,a.ref=i.ref),gE(this),a.r(t,r,a.b?h:{},o),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var t=this,r=t.ref,i=t.fr;r&&r(i?i.current:t.b)},n}();function _q(){return Object.__CROACT_CURRENT_INSTNACE__}function q4e(){return mE}function U4e(n){mE=n}function gE(n){return Object.__CROACT_CURRENT_INSTNACE__=n,mE=0,n}var vE=function(){function n(t,r){t===void 0&&(t={}),this.props=t,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=n.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(t,r){return this.props!==t||this.state!==r},e.setState=function(t,r,i){var o=this;o.$_timer||(o.$_state={}),clearTimeout(o.$_timer),o.$_timer=0,o.$_state=wa(wa({},o.$_state),t),i?o.$_setState(r,i):o.$_timer=window.setTimeout(function(){o.$_timer=0,o.$_setState(r,i)})},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,r){},e.componentWillUnmount=function(){},e.$_setState=function(t,r){var i=[],o=this.$_p,s=Wg(o.c,[o],[o.o],i,o._cs,wa(wa({},this.state),this.$_state),r);s&&(t&&i.push(t),yq(i),gE(null))},n}(),wq=function(n){Vg(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}var t=e.prototype;return t.shouldComponentUpdate=function(r,i){return My(this.props,r)||My(this.state,i)},e}(vE);function kq(n){var e=function(t){e.current=t};return e.current=n,e}function G4e(n){return n._fr=!0,n}function K4e(n,e,t,r){var i,o;return!((i=n==null?void 0:n.prototype)===null||i===void 0)&&i.render?o=new n(e,t):(o=new vE(e,t),o.constructor=n,n._fr?(r.fr=kq(),o.render=function(){return this.constructor(this.props,r.fr)}):o.render=W4e),o.$_p=r,o}var J4e=function(n){Vg(e,n);function e(r,i,o,s,a,l,u){u===void 0&&(u={});var c=n.call(this,r,i,o,s,a,l,jk(u,r.defaultProps))||this;return c.typ="comp",c._usefs=[],c._uefs=[],c._defs=[],c}var t=e.prototype;return t.s=function(r,i){var o=this.b;return o.shouldComponentUpdate(jk(r,this.t.defaultProps),i||o.state)!==!1},t.r=function(r,i,o){var s,a,l=this,u=l.t;l.ps=jk(l.ps,l.t.defaultProps);var c=l.ps,f=!l.b,d=u.contextType,h=l.b,p=d==null?void 0:d.get(l);l._cs=i,f?(h=K4e(u,c,p,l),l.b=h):(h.props=c,h.context=p);var m=h.state;l._usefs=[],l._uefs=[];var g=h.render();((a=(s=g==null?void 0:g.props)===null||s===void 0?void 0:s.children)===null||a===void 0?void 0:a.length)===0&&(g.props.children=l.ps.children);var v=wa(wa({},i),h.$_cs);Wg(l,l._ps,g?[g]:[],r,v),f?l._uefs.push(function(){d==null||d.register(l),h.componentDidMount()}):l._uefs.push(function(){h.componentDidUpdate(o,m)}),r.push(function(){l._usefs.forEach(function(b){b()}),f?l.md():l.ud(),l._defs=l._uefs.map(function(b){return b()})})},t.ss=function(r){var i=this.b;!i||!r||(i.state=r)},t.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var o=i.t;(r=o.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e}(U_);function Y4e(n,e,t){var r=bE(x7(n),x7(e)),i=r.added,o=r.removed,s=r.changed;for(var a in i)t.setAttribute(a,i[a]);for(var l in s)t.setAttribute(l,s[l][1]);for(var u in o)t.removeAttribute(u)}function X4e(n,e,t){var r=bE(n,e),i=r.added,o=r.removed;for(var s in o)t.e(s,!0);for(var a in i)t.e(a)}function bE(n,e){var t=Wl(n),r=Wl(e),i=Hg(t,r,function(l){return l}),o={},s={},a={};return i.added.forEach(function(l){var u=r[l];o[u]=e[u]}),i.removed.forEach(function(l){var u=t[l];s[u]=n[u]}),i.maintained.forEach(function(l){var u=l[0],c=t[u],f=[n[c],e[c]];n[c]!==e[c]&&(a[c]=f)}),{added:o,removed:s,changed:a}}function Q4e(n,e,t){var r=t.style,i=bE(n,e),o=i.added,s=i.removed,a=i.changed;for(var l in o){var u=sb(l,"-");r.setProperty(u,o[l])}for(var l in a){var c=sb(l,"-");r.setProperty(c,a[l][1])}for(var l in s){var f=sb(l,"-");r.removeProperty(f)}}function Z4e(n){return n.replace(/^on/g,"").toLowerCase()}var $4e=function(n){Vg(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var t=e.prototype;return t.e=function(r,i){var o=this,s=o._es,a=o.b,l=Z4e(r);i?(Vr(a,l,s[r]),delete s[r]):(s[r]=function(u){var c,f;(f=(c=o.ps)[r])===null||f===void 0||f.call(c,u)},ci(a,l,s[r]))},t.s=function(r){return My(this.ps,r)},t.r=function(r,i,o){var s,a=this,l=!a.b,u=a.ps;if(l){var c=q_(a.c),f=!1;a._svg||a.t==="svg"?f=!0:f=c&&c.ownerSVGElement,a._svg=f;var d=(s=a._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],h=a.t;if(d)a._hyd=[].slice.call(d.children||[]);else{var p=mp(c);f?d=p.createElementNS("http://www.w3.org/2000/svg",h):d=p.createElement(h)}a.b=d}Wg(a,a._ps,u.children,r,i);var m=a.b,g=E7(o),v=g[0],b=g[1],w=E7(u),_=w[0],y=w[1];return Y4e(v,_,m),X4e(b,y,a),Q4e(o.style||{},u.style||{},m),r.push(function(){l?a.md():a.ud()}),!0},t.un=function(){var r=this,i=r._es,o=r.b;for(var s in i)Vr(o,s,i[s]);r._ps.forEach(function(a){a.un()}),r._es={},r._sel||bq(o)},e}(U_);function Jm(n){if(!n||gp(n))return n;var e=n.$_p._ps;return e.length?Jm(e[0].b):null}function Cq(n){if(n){if(n.b&&gp(n.b))return n;var e=n._ps;return e.length?Cq(e[0]):null}}function Bs(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=e||{},o=i.key,s=i.ref,a=gq(i,["key","ref"]);return{type:n,key:o,ref:s,props:wa(wa({},a),{children:N4e(t).filter(function(l){return l!=null&&l!==!1})})}}var Sq=function(n){Vg(e,n);function e(r,i){i===void 0&&(i=0);var o=n.call(this,"container",i,"container",0,null)||this;return o.typ="container",o.b=r,o}var t=e.prototype;return t.r=function(){return!0},t.un=function(){},e}(U_),exe=function(n){Vg(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r.typ="text",r}var t=e.prototype;return t.r=function(r){var i,o=this,s=!o.b;if(s){var a=q_(o.c),l=(i=o._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];o.b=l||mp(a).createTextNode(o.t.replace("text_",""))}return r.push(function(){s?o.md():o.ud()}),!0},t.un=function(){bq(this.b)},e}(U_);function txe(n,e,t){var r=t.map(function(l){return uo(l)?null:l.key}),i=S7(e.map(function(l){return l.k})),o=S7(r),s=Hg(i,o,function(l){return l});s.removed.forEach(function(l){e.splice(l,1)[0].un()}),s.ordered.forEach(function(l){var u=l[0],c=l[1],f=e.splice(u,1)[0];e.splice(c,0,f);var d=Jm(f.b),h=Jm(e[c+1]&&e[c+1].b);d&&d.parentNode.insertBefore(d,h)}),s.added.forEach(function(l){e.splice(l,0,A7(t[l],r[l],l,n))});var a=s.maintained.filter(function(l){l[0];var u=l[1],c=t[u],f=e[u],d=uo(c)?"text_".concat(c):c.type;return d!==f.t?(f.un(),e.splice(u,1,A7(c,r[u],u,n)),!0):(f.i=u,!1)});return C7(C7([],s.added,!0),a.map(function(l){l[0];var u=l[1];return u}),!0)}function nxe(n,e){for(var t=n._ps,r=t.length,i=e.i+1;i<r;++i){var o=Jm(t[i].b);if(o)return o}return null}function A7(n,e,t,r){var i=r.d+1;if(uo(n)||Vh(n))return new exe("text_".concat(n),i,e,t,r,null,{});var o=n.type,s=typeof o=="string"?$4e:J4e;return new s(o,i,e,t,r,n.ref,n.props)}function Wg(n,e,t,r,i,o,s){var a=txe(n,e,t),l=n._hyd,u=e.filter(function(f,d){return f._hyd=l,f.u(r,i,t[d],o,s)});n.typ==="container"&&n._sel&&e.forEach(function(f){var d=Cq(f);d&&(d._sel=!0)}),n._hyd=null;var c=q_(n);return c&&a.reverse().forEach(function(f){var d=e[f],h=Jm(d.b);if(h&&c!==h&&!h.parentNode){var p=nxe(n,d);c.insertBefore(h,p)}}),u.length>0}function rxe(n,e,t,r){t===void 0&&(t=e.__CROACT__),r===void 0&&(r={});var i=!!t;t||(t=new Sq(e));var o=[];return Wg(t,t._ps,n?[n]:[],o,r,void 0,void 0),yq(o),gE(null),i||(e.__CROACT__=t),t}function M7(n,e,t){return!t&&n&&(t=new Sq(e.parentElement),t._hyd=[e],t._sel=!0),rxe(n,e,t),t}function xq(n){var e=_q(),t=e._hs||(e._hs=[]),r=q4e(),i=t[r];if(U4e(r+1),i){if(!My(i.deps,n.deps))return i.updated=!1,i;t[r]=n}else t.push(n);return n.value=n.func(),n.updated=!0,n}function ixe(n,e){var t=xq({func:n,deps:e});return t.value}function oxe(n){return ixe(function(){return kq(n)},[])}function Eq(n,e,t){var r=_q(),i=xq({func:function(){return n},deps:e}),o=t?r._usefs:r._uefs;i.updated?o.push(function(){return i.effect&&i.effect(),i.effect=n(),i.effect}):o.push(function(){return i.effect})}function sxe(n,e,t){Eq(function(){n==null||n(e())},t,!0)}function yE(n,e){for(var t=n.length,r=0;r<t;++r)if(e(n[r],r))return!0;return!1}function Aq(n,e){for(var t=n.length,r=0;r<t;++r)if(e(n[r],r))return n[r];return null}function Mq(n){var e=n;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function _E(n,e){try{return new RegExp(n,"g").exec(e)}catch{return null}}function axe(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var n=navigator.userAgentData,e=n.brands||n.uaList;return!!(e&&e.length)}function lxe(n,e){var t=_E("("+n+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return t?t[3]:""}function KS(n){return n.replace(/_/g,".")}function f0(n,e){var t=null,r="-1";return yE(n,function(i){var o=_E("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!o||i.brand?!1:(t=i,r=o[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=lxe(i.versionTest.toLowerCase(),e)||r),r=KS(r),!0)}),{preset:t,version:r}}function Gp(n,e){var t={brand:"",version:"-1"};return yE(n,function(r){var i=Tq(e,r);return i?(t.brand=r.id,t.version=r.versionAlias||i.version,t.version!=="-1"):!1}),t}function Tq(n,e){return Aq(n,function(t){var r=t.brand;return _E(""+e.test,r.toLowerCase())})}var JS=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Oq=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],YS=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Dq=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Rq=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Pq(n){return!!f0(Dq,n).preset}function uxe(n){var e=Mq(n),t=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:Pq(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=f0(JS,e),s=o.preset,a=o.version,l=f0(Rq,e),u=l.preset,c=l.version,f=f0(Oq,e);if(r.chromium=!!f.preset,r.chromiumVersion=f.version,!r.chromium){var d=f0(YS,e);r.webkit=!!d.preset,r.webkitVersion=d.version}return u&&(i.name=u.id,i.version=c,i.majorVersion=parseInt(c,10)),s&&(r.name=s.id,r.version=a,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:t,isHints:!1}}function cxe(n){var e=navigator.userAgentData,t=(e.uaList||e.brands).slice(),r=n&&n.fullVersionList,i=e.mobile||!1,o=t[0],s=(n&&n.platform||e.platform||navigator.platform).toLowerCase(),a={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Gp(Dq,t).brand||Pq(Mq())},l={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&yE(YS,function(p){return Tq(t,p)});var u=Gp(Oq,t);if(a.chromium=!!u.brand,a.chromiumVersion=u.version||"-1",!a.chromium){var c=Gp(YS,t);a.webkit=!!c.brand,a.webkitVersion=c.version||"-1"}var f=Aq(Rq,function(p){return new RegExp(""+p.test,"g").exec(s)});if(l.name=f?f.id:"",n&&(l.version=n.platformVersion||"-1"),r&&r.length){var d=Gp(JS,r);a.name=d.brand||a.name,a.version=d.version||a.version}else{var h=Gp(JS,t);a.name=h.brand||a.name,a.version=h.brand&&n?n.uaFullVersion:h.version}return a.webkit&&(l.name=i?"ios":"mac"),l.name==="ios"&&a.webview&&(a.version="-1"),l.version=KS(l.version),a.version=KS(a.version),l.majorVersion=parseInt(l.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:l,isMobile:i,isHints:!0}}function fxe(n){return typeof n>"u"&&axe()?cxe():uxe(n)}function dxe(n,e,t,r,i,o){for(var s=0;s<i;++s){var a=t+s*i,l=r+s*i;n[a]+=n[l]*o,e[a]+=e[l]*o}}function hxe(n,e,t,r,i){for(var o=0;o<i;++o){var s=t+o*i,a=r+o*i,l=n[s],u=e[s];n[s]=n[a],n[a]=l,e[s]=e[a],e[a]=u}}function pxe(n,e,t,r,i){for(var o=0;o<r;++o){var s=t+o*r;n[s]/=i,e[s]/=i}}function Iq(n,e,t){t===void 0&&(t=Math.sqrt(n.length));for(var r=n.slice(),i=0;i<t;++i)r[i*t+e-1]=0,r[(e-1)*t+i]=0;return r[(e-1)*(t+1)]=1,r}function Wa(n,e){e===void 0&&(e=Math.sqrt(n.length));for(var t=n.slice(),r=$n(e),i=0;i<e;++i){var o=e*i+i;if(!Ft(t[o],Nr)){for(var s=i+1;s<e;++s)if(t[e*i+s]){hxe(t,r,i,s,e);break}}if(!Ft(t[o],Nr))return[];pxe(t,r,i,e,t[o]);for(var s=0;s<e;++s){var a=s,l=s+i*e,u=t[l];!Ft(u,Nr)||i===s||dxe(t,r,a,i,e,-u)}}return r}function mxe(n,e){e===void 0&&(e=Math.sqrt(n.length));for(var t=[],r=0;r<e;++r)for(var i=0;i<e;++i)t[i*e+r]=n[e*r+i];return t}function Nq(n,e){e===void 0&&(e=Math.sqrt(n.length));for(var t=[],r=n[e*e-1],i=0;i<e-1;++i)t[i]=n[e*(e-1)+i]/r;return t[e-1]=0,t}function gxe(n,e){for(var t=$n(e),r=0;r<e-1;++r)t[e*(e-1)+r]=n[r]||0;return t}function Tf(n,e){for(var t=n.slice(),r=n.length;r<e-1;++r)t[r]=0;return t[e-1]=1,t}function Js(n,e,t){if(e===void 0&&(e=Math.sqrt(n.length)),e===t)return n;for(var r=$n(t),i=Math.min(e,t),o=0;o<i-1;++o){for(var s=0;s<i-1;++s)r[o*t+s]=n[o*e+s];r[(o+1)*t-1]=n[(o+1)*e-1],r[(t-1)*t+o]=n[(e-1)*e+o]}return r[t*t-1]=n[e*e-1],r}function Ty(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=$n(n);return e.forEach(function(i){r=Ln(r,i,n)}),r}function Ln(n,e,t){t===void 0&&(t=Math.sqrt(n.length));var r=[],i=n.length/t,o=e.length/i;if(i){if(!o)return n}else return e;for(var s=0;s<t;++s)for(var a=0;a<o;++a){r[a*t+s]=0;for(var l=0;l<i;++l)r[a*t+s]+=n[l*t+s]*e[a*i+l]}return r}function fn(n,e){for(var t=Math.min(n.length,e.length),r=n.slice(),i=0;i<t;++i)r[i]=r[i]+e[i];return r}function Ct(n,e){for(var t=Math.min(n.length,e.length),r=n.slice(),i=0;i<t;++i)r[i]=r[i]-e[i];return r}function vxe(n,e){return e===void 0&&(e=n.length===6),e?[n[0],n[1],0,n[2],n[3],0,n[4],n[5],1]:n}function Bq(n,e){return e===void 0&&(e=n.length===9),e?[n[0],n[1],n[3],n[4],n[6],n[7]]:n}function Ni(n,e,t){t===void 0&&(t=e.length);var r=Ln(n,e,t),i=r[t-1];return r.map(function(o){return o/i})}function bxe(n,e){return Ln(n,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function yxe(n,e){return Ln(n,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function _xe(n,e){return Ln(n,Ug(e,4))}function cv(n,e){var t=e[0],r=t===void 0?1:t,i=e[1],o=i===void 0?1:i,s=e[2],a=s===void 0?1:s;return Ln(n,[r,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function qg(n,e){return Ni(Ug(e,3),Tf(n,3))}function Hk(n,e){var t=e[0],r=t===void 0?0:t,i=e[1],o=i===void 0?0:i,s=e[2],a=s===void 0?0:s;return Ln(n,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,a,1],4)}function T7(n,e){return Ln(n,e,4)}function Ug(n,e){var t=Math.cos(n),r=Math.sin(n),i=$n(e);return i[0]=t,i[1]=r,i[e]=-r,i[e+1]=t,i}function $n(n){for(var e=n*n,t=[],r=0;r<e;++r)t[r]=r%(n+1)?0:1;return t}function wE(n,e){for(var t=$n(e),r=Math.min(n.length,e-1),i=0;i<r;++i)t[(e+1)*i]=n[i];return t}function Of(n,e){for(var t=$n(e),r=Math.min(n.length,e-1),i=0;i<r;++i)t[e*(e-1)+i]=n[i];return t}function kE(n,e,t,r,i,o,s,a){var l=n[0],u=n[1],c=e[0],f=e[1],d=t[0],h=t[1],p=r[0],m=r[1],g=i[0],v=i[1],b=o[0],w=o[1],_=s[0],y=s[1],k=a[0],S=a[1],E=[l,0,c,0,d,0,p,0,u,0,f,0,h,0,m,0,1,0,1,0,1,0,1,0,0,l,0,c,0,d,0,p,0,u,0,f,0,h,0,m,0,1,0,1,0,1,0,1,-g*l,-v*l,-b*c,-w*c,-_*d,-y*d,-k*p,-S*p,-g*u,-v*u,-b*f,-w*f,-_*h,-y*h,-k*m,-S*m],M=Wa(E,8);if(!M.length)return[];var R=Ln(M,[g,v,b,w,_,y,k,S],8);return R[8]=1,Js(mxe(R),3,4)}var P0=function(){return P0=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},P0.apply(this,arguments)};function wxe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ym(n,e){return e===void 0&&(e=0),Ad(Wh(n,e))}function kxe(n,e){var t=Ni(n,[e[0],e[1]||0,e[2]||0,1],4),r=t[3]||1;return[t[0]/r,t[1]/r,t[2]/r]}function Ad(n){var e=wxe();return n.forEach(function(t){var r=t.matrixFunction,i=t.functionValue;r&&(e=r(e,i))}),e}function Wh(n,e){e===void 0&&(e=0);var t=Fr(n)?n:nc(n);return t.map(function(r){var i=lq(r),o=i.prefix,s=i.value,a=null,l=o,u="";if(o==="translate"||o==="translateX"||o==="translate3d"){var c=Ks(e)?P0(P0({},e),{"o%":e["%"]}):{"%":e,"o%":e},f=Xc(s).map(function(P,A){return A===0&&"x%"in c?c["%"]=e["x%"]:A===1&&"y%"in c?c["%"]=e["y%"]:c["%"]=e["o%"],Nn(P,c)}),d=f[0],h=f[1],p=h===void 0?0:h,m=f[2],g=m===void 0?0:m;a=Hk,u=[d,p,g]}else if(o==="translateY"){var v=Ks(e)?P0({"%":e["y%"]},e):{"%":e},p=Nn(s,v);a=Hk,u=[0,p,0]}else if(o==="translateZ"){var g=parseFloat(s);a=Hk,u=[0,0,g]}else if(o==="scale"||o==="scale3d"){var b=Xc(s).map(function(P){return parseFloat(P)}),w=b[0],_=b[1],y=_===void 0?w:_,k=b[2],S=k===void 0?1:k;a=cv,u=[w,y,S]}else if(o==="scaleX"){var w=parseFloat(s);a=cv,u=[w,1,1]}else if(o==="scaleY"){var y=parseFloat(s);a=cv,u=[1,y,1]}else if(o==="scaleZ"){var S=parseFloat(s);a=cv,u=[1,1,S]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var E=jg(s),M=E.unit,R=E.value,O=M==="rad"?R:R*Math.PI/180;o==="rotate"||o==="rotateZ"?(l="rotateZ",a=_xe):o==="rotateX"?a=bxe:o==="rotateY"&&(a=yxe),u=O}else if(o==="matrix3d")a=T7,u=Xc(s).map(function(P){return parseFloat(P)});else if(o==="matrix"){var I=Xc(s).map(function(P){return parseFloat(P)});a=T7,u=[I[0],I[1],0,0,I[2],I[3],0,0,0,0,1,0,I[4],I[5],0,1]}else l="";return{name:o,functionName:l,value:s,matrixFunction:a,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var XS=function(n,e){return XS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},XS(n,e)};function Cxe(n,e){XS(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Lq=typeof Map=="function"?void 0:function(){var n=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++n)}}(),Fq=function(n){Cxe(e,n);function e(t){return t===void 0&&(t=[]),n.call(this,t,Lq)||this}return e}(V4e);function Sxe(n,e){return Hg(n,e,Lq)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var QS=function(){return QS=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},QS.apply(this,arguments)};function xxe(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Exe=function(){function n(){this._events={}}var e=n.prototype;return e.on=function(t,r){if(Ks(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,r,{});return this},e.off=function(t,r){if(!t)this._events={};else if(Ks(t))for(var i in t)this.off(i);else if(!r)this._events[t]=[];else{var o=this._events[t];if(o){var s=Vl(o,function(a){return a.listener===r});s>-1&&o.splice(s,1)}}return this},e.once=function(t,r){var i=this;return r&&this._addEvent(t,r,{once:!0}),new Promise(function(o){i._addEvent(t,o,{once:!0})})},e.emit=function(t,r){var i=this;r===void 0&&(r={});var o=this._events[t];if(!t||!o)return!0;var s=!1;return r.eventType=t,r.stop=function(){s=!0},r.currentTarget=this,xxe(o).forEach(function(a){a.listener(r),a.once&&i.off(t,a.listener)}),!s},e.trigger=function(t,r){return r===void 0&&(r={}),this.emit(t,r)},e._addEvent=function(t,r,i){var o=this._events;o[t]=o[t]||[];var s=o[t];s.push(QS({listener:r},i))},n}();const G_=Exe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ZS=function(n,e){return ZS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},ZS(n,e)};function Axe(n,e){ZS(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Hd=function(){return Hd=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hd.apply(this,arguments)};function Mxe(n){var e=n.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function O7(n,e){return n.addEventListener("scroll",e),function(){n.removeEventListener("scroll",e)}}function fv(n){if(n){if(uo(n))return document.querySelector(n)}else return null;if(fE(n))return n();if(n instanceof Element)return n;if("current"in n)return n.current;if("value"in n)return n.value}var Txe=function(n){Axe(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(o){r.checkScroll({container:i.container,inputEvent:o})}})},r}var t=e.prototype;return t.dragStart=function(r,i){var o=fv(i.container);if(!o){this._flag=!1;return}var s=0,a=0,l=0,u=0;if(o===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=o.getBoundingClientRect();s=c.top,a=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:a,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},t.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var o=r.clientX,s=r.clientY,a=i.threshold,l=a===void 0?0:a,u=this,c=u._startRect,f=u._startPos;this._currentOptions=i;var d=[0,0];return c.top>s-l?(f[1]>c.top||s<f[1])&&(d[1]=-1):c.top+c.height<s+l&&(f[1]<c.top+c.height||s>f[1])&&(d[1]=1),c.left>o-l?(f[0]>c.left||o<f[0])&&(d[0]=-1):c.left+c.width<o+l&&(f[0]<c.left+c.width||o>f[0])&&(d[0]=1),!d[0]&&!d[1]?!1:this._continueDrag(Hd(Hd({},i),{direction:d,inputEvent:r,isDrag:!0}))}},t.checkScroll=function(r){var i=this;if(this._isWait)return!1;var o=r.prevScrollPos,s=o===void 0?this._prevScrollPos:o,a=r.direction,l=r.throttleTime,u=l===void 0?0:l,c=r.inputEvent,f=r.isDrag,d=this._getScrollPosition(a||[0,0],r),h=d[0]-s[0],p=d[1]-s[1],m=a||[h?Math.abs(h)/h:0,p?Math.abs(p)/p:0];return this._prevScrollPos=d,this._lock=!1,!h&&!p?!1:(this.emit("move",{offsetX:m[0]?h:0,offsetY:m[1]?p:0,inputEvent:c}),u&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},t.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},t._getScrollPosition=function(r,i){var o=i.container,s=i.getScrollPosition,a=s===void 0?Mxe:s;return a({container:fv(o),direction:r})},t._continueDrag=function(r){var i=this,o,s=r.container,a=r.direction,l=r.throttleTime,u=r.useScroll,c=r.isDrag,f=r.inputEvent;if(!(!this._flag||c&&this._isWait)){var d=Km(),h=Math.max(l+this._prevTime-d,0);if(h>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},h),!1;this._prevTime=d;var p=this._getScrollPosition(a,r);this._prevScrollPos=p,c&&(this._isWait=!0),u||(this._lock=!0);var m={container:fv(s),direction:a,inputEvent:f};return(o=r.requestScroll)===null||o===void 0||o.call(r,m),this.emit("scroll",m),this._isWait=!1,u||this.checkScroll(Hd(Hd({},r),{prevScrollPos:p,direction:a,inputEvent:f}))}},t._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var o=i===!0?O7:i,s=fv(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=O7(window,this._onScroll):this._unregister=o(s,this._onScroll)}},t._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(G_);const Oxe=Txe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Dxe(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Zi(n){return Ft(n,Nr)}function Rxe(n,e){return n.every(function(t,r){return Zi(t-e[r])===0})}function Pxe(n,e){return!Zi(n[0]-e[0])&&!Zi(n[1]-e[1])}function zq(n){return n.length<3?0:Math.abs(R4e(n.map(function(e,t){var r=n[t+1]||n[0];return e[0]*r[1]-r[0]*e[1]})))/2}function D7(n,e){var t=e.width,r=e.height,i=e.left,o=e.top,s=Df(n),a=s.minX,l=s.minY,u=s.maxX,c=s.maxY,f=t/(u-a),d=r/(c-l);return n.map(function(h){return[i+(h[0]-a)*f,o+(h[1]-l)*d]})}function Df(n){var e=n.map(function(r){return r[0]}),t=n.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,t),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,t)}}function $S(n,e,t){var r=n[0],i=n[1],o=Df(e),s=o.minX,a=o.maxX,l=[[s,i],[a,i]],u=Oy(l[0],l[1]),c=e4(e),f=[];if(c.forEach(function(p){var m=Oy(p[0],p[1]),g=p[0];if(Rxe(u,m))f.push({pos:n,line:p,type:"line"});else{var v=jq(CE(u,m),[l,p]);v.forEach(function(b){p.some(function(w){return Pxe(w,b)})?f.push({pos:b,line:p,type:"point"}):Zi(g[1]-i)!==0&&f.push({pos:b,line:p,type:"intersection"})})}}),!t&&co(f,function(p){return p[0]===r}))return!0;var d=0,h={};return f.forEach(function(p){var m=p.pos,g=p.type,v=p.line;if(!(m[0]>r))if(g==="intersection")++d;else{if(g==="line")return;if(g==="point"){var b=co(v,function(y){return y[1]!==i}),w=h[m[0]],_=b[1]>i?1:-1;w?w!==_&&++d:h[m[0]]=_}}}),d%2===1}function Oy(n,e){var t=n[0],r=n[1],i=e[0],o=e[1],s=i-t,a=o-r;Math.abs(s)<Nr&&(s=0),Math.abs(a)<Nr&&(a=0);var l=0,u=0,c=0;return s?a?(l=-a/s,u=1,c=-l*t-r):(u=1,c=-r):a&&(l=-1,c=t),[l,u,c]}function CE(n,e){var t=n[0],r=n[1],i=n[2],o=e[0],s=e[1],a=e[2],l=t===0&&o===0,u=r===0&&s===0,c=[];if(l&&u)return[];if(l){var f=-i/r,d=-a/s;return f!==d?[]:[[-1/0,f],[1/0,f]]}else if(u){var h=-i/t,p=-a/o;return h!==p?[]:[[h,-1/0],[h,1/0]]}else if(t===0){var m=-i/r,g=-(s*m+a)/o;c=[[g,m]]}else if(o===0){var m=-a/s,g=-(r*m+i)/t;c=[[g,m]]}else if(r===0){var g=-i/t,m=-(o*g+a)/s;c=[[g,m]]}else if(s===0){var g=-a/o,m=-(t*g+i)/r;c=[[g,m]]}else{var g=(r*a-s*i)/(s*t-r*o),m=-(t*g+i)/r;c=[[g,m]]}return c.map(function(v){return[v[0],v[1]]})}function jq(n,e){var t=e.map(function(f){return[0,1].map(function(d){return[Math.min(f[0][d],f[1][d]),Math.max(f[0][d],f[1][d])]})}),r=[];if(n.length===2){var i=n[0],o=i[0],s=i[1];if(Zi(o-n[1][0])){if(!Zi(s-n[1][1])){var u=Math.max.apply(Math,t.map(function(f){return f[0][0]})),c=Math.min.apply(Math,t.map(function(f){return f[0][1]}));if(Zi(u-c)>0)return[];r=[[u,s],[c,s]]}}else{var a=Math.max.apply(Math,t.map(function(f){return f[1][0]})),l=Math.min.apply(Math,t.map(function(f){return f[1][1]}));if(Zi(a-l)>0)return[];r=[[o,a],[o,l]]}}return r.length||(r=n.filter(function(f){var d=f[0],h=f[1];return t.every(function(p){return 0<=Zi(d-p[0][0])&&0<=Zi(p[0][1]-d)&&0<=Zi(h-p[1][0])&&0<=Zi(p[1][1]-h)})})),r.map(function(f){return[Zi(f[0]),Zi(f[1])]})}function e4(n){return Dxe(n.slice(1),[n[0]]).map(function(e,t){return[n[t],e]})}function Ixe(n,e){var t=n.slice(),r=e.slice();w7(t)===-1&&t.reverse(),w7(r)===-1&&r.reverse();var i=e4(t),o=e4(r),s=i.map(function(c){return Oy(c[0],c[1])}),a=o.map(function(c){return Oy(c[0],c[1])}),l=[];s.forEach(function(c,f){var d=i[f],h=[];a.forEach(function(p,m){var g=CE(c,p),v=jq(g,[d,o[m]]);h.push.apply(h,v.map(function(b){return{index1:f,index2:m,pos:b,type:"intersection"}}))}),h.sort(function(p,m){return Ol(d[0],p.pos)-Ol(d[0],m.pos)}),l.push.apply(l,h),$S(d[1],r)&&l.push({index1:f,index2:-1,pos:d[1],type:"inside"})}),o.forEach(function(c,f){if($S(c[1],t)){var d=!1,h=Vl(l,function(p){var m=p.index2;return m===f?(d=!0,!1):!!d});h===-1&&(d=!1,h=Vl(l,function(p){var m=p.index1,g=p.index2;return m===-1&&g+1===f?(d=!0,!1):!!d})),h===-1?l.push({index1:-1,index2:f,pos:c[1],type:"inside"}):l.splice(h,0,{index1:-1,index2:f,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var f=c.pos,d=f[0]+"x"+f[1];return u[d]?!1:(u[d]=!0,!0)})}function Nxe(n,e){var t=Ixe(n,e);return t.map(function(r){var i=r.pos;return i})}function Bxe(n,e){var t=Nxe(n,e);return zq(t)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t4=function(n,e){return t4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},t4(n,e)};function Lxe(n,e){t4(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Pr=function(){return Pr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Pr.apply(this,arguments)};function Fxe(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=Math.atan2(r,t);return i>=0?i:i+Math.PI*2}function Vk(n){return Fxe([n[0].clientX,n[0].clientY],[n[1].clientX,n[1].clientY])/Math.PI*180}function zxe(n){return n.touches&&n.touches.length>=2}function dv(n){return n?n.touches?Hxe(n.touches):[Hq(n)]:[]}function jxe(n){return n&&(n.type.indexOf("mouse")>-1||"button"in n)}function R7(n,e,t){var r=t.length,i=I0(n,r),o=i.clientX,s=i.clientY,a=i.originalClientX,l=i.originalClientY,u=I0(e,r),c=u.clientX,f=u.clientY,d=I0(t,r),h=d.clientX,p=d.clientY,m=o-c,g=s-f,v=o-h,b=s-p;return{clientX:a,clientY:l,deltaX:m,deltaY:g,distX:v,distY:b}}function Wk(n){return Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2))}function Hxe(n){for(var e=Math.min(n.length,2),t=[],r=0;r<e;++r)t.push(Hq(n[r]));return t}function Hq(n){return{clientX:n.clientX,clientY:n.clientY}}function I0(n,e){e===void 0&&(e=n.length);for(var t={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(n.length,e),i=0;i<r;++i){var o=n[i];t.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,t.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,t.clientX+=o.clientX,t.clientY+=o.clientY}return e?{clientX:t.clientX/e,clientY:t.clientY/e,originalClientX:t.originalClientX/e,originalClientY:t.originalClientY/e}:t}var qk=function(){function n(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return n.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),Vk(e)},n.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),Vk(e)-Vk(this.startClients)},n.prototype.getPosition=function(e,t){e===void 0&&(e=this.prevClients);var r=R7(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,o=r.deltaY;return this.movement+=Math.sqrt(i*i+o*o),this.prevClients=e,r},n.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var t=this.prevClients,r=this.startClients,i=Math.min(this.length,t.length),o=[],s=0;s<i;++s)o[s]=R7([e[s]],[t[s]],[r[s]]);return o},n.prototype.getMovement=function(e){var t=this.movement;if(!e)return t;var r=I0(e,this.length),i=I0(this.prevClients,this.length),o=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(o*o+s*s)+t},n.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),Wk(e)},n.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),Wk(e)/Wk(this.startClients)},n.prototype.move=function(e,t){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=t}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=t})},n}(),P7=["textarea","input"],Vxe=function(n){Lxe(e,n);function e(t,r){r===void 0&&(r={});var i=n.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(d,h){if(h===void 0&&(h=!0),!(!i.flag&&d.cancelable===!1)){var p=d.type.indexOf("drag")>=-1;if(!(i.flag&&p)){i._isDragAPI=!0;var m=i.options,g=m.container,v=m.pinchOutside,b=m.preventWheelClick,w=m.preventRightClick,_=m.preventDefault,y=m.checkInput,k=m.dragFocusedInput,S=m.preventClickEventOnDragStart,E=m.preventClickEventOnDrag,M=m.preventClickEventByCondition,R=i._useTouch,O=!i.flag;if(i._isSecondaryButton=d.which===3||d.button===2,b&&(d.which===2||d.button===1)||w&&(d.which===3||d.button===2))return i.stop(),!1;if(O){var I=i._window.document.activeElement,P=d.target;if(P){var A=P.tagName.toLowerCase(),N=P7.indexOf(A)>-1,F=P.isContentEditable;if(N||F){if(y||!k&&I===P)return!1;if(I&&(I===P||F&&I.isContentEditable&&I.contains(P)))if(k)P.blur();else return!1}else if((_||d.type==="touchstart")&&I){var V=I.tagName.toLowerCase();(I.isContentEditable||P7.indexOf(V)>-1)&&I.blur()}(S||E||M)&&ci(i._window,"click",i._onClick,!0)}i.clientStores=[new qk(dv(d))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=h,i._dragFlag=!0,i._prevInputEvent=d,i.data={},i.doubleFlag=Km()-i.prevTime<200,i._isMouseEvent=jxe(d),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var W=i._preventMouseEvent||i.emit("dragStart",Pr(Pr({data:i.data,datas:i.data,inputEvent:d,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:h,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){d.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));W===!1&&i.stop(),i._isMouseEvent&&i.flag&&_&&d.preventDefault()}if(!i.flag)return!1;var L=0;if(O?(i._attchDragEvent(),R&&v&&(L=setTimeout(function(){ci(g,"touchstart",i.onDragStart,{passive:!1})}))):R&&v&&Vr(g,"touchstart",i.onDragStart),i.flag&&zxe(d)){if(clearTimeout(L),O&&d.touches.length!==d.changedTouches.length)return;i.pinchFlag||i.onPinchStart(d)}}}},i.onDrag=function(d,h){if(i.flag){var p=i.options.preventDefault;!i._isMouseEvent&&p&&d.preventDefault(),i._prevInputEvent=d;var m=dv(d),g=i.moveClients(m,d,!1);if(i._dragFlag){if(i.pinchFlag||g.deltaX||g.deltaY){var v=i._preventMouseEvent||i.emit("drag",Pr(Pr({},g),{isScroll:!!h,inputEvent:d}));if(v===!1){i.stop();return}}i.pinchFlag&&i.onPinch(d,m)}i.getCurrentStore().getPosition(m,!0)}},i.onDragEnd=function(d){if(i.flag){var h=i.options,p=h.pinchOutside,m=h.container,g=h.preventClickEventOnDrag,v=h.preventClickEventOnDragStart,b=h.preventClickEventByCondition,w=i.isDrag;(g||v||b)&&requestAnimationFrame(function(){i._allowClickEvent()}),!b&&!v&&g&&!w&&i._allowClickEvent(),i._useTouch&&p&&Vr(m,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(d);var _=d!=null&&d.touches?dv(d):[],y=_.length;y===0||!i.options.keepDragging?i.flag=!1:i._addStore(new qk(_));var k=i._getPosition(),S=Km(),E=!w&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=w||E?0:S,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Pr({data:i.data,datas:i.data,isDouble:E,isDrag:w,isClick:!w,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:d,isTrusted:i._isTrusted},k)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Vr(i._window,"click",i._onClick,!0)},i._onClick=function(d){i._allowClickEvent(),i._allowMouseEvent();var h=i.options.preventClickEventByCondition;h!=null&&h(d)||(d.stopPropagation(),d.preventDefault())},i._onContextMenu=function(d){var h=i.options;h.preventRightClick?i.onDragEnd(d):d.preventDefault()},i._passCallback=function(){};var o=[].concat(t),s=o[0];i._window=mq(s)?s:Vu(s),i.options=Pr({checkInput:!1,container:s&&!("document"in s)?Vu(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var a=i.options,l=a.container,u=a.events,c=a.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=o,i._useDrag&&o.forEach(function(d){ci(d,"dragstart",i.onDragStart)}),i._useMouse&&(o.forEach(function(d){ci(d,"mousedown",i.onDragStart),ci(d,"mousemove",i._passCallback)}),ci(l,"contextmenu",i._onContextMenu)),c&&ci(Vu(),"blur",i.onBlur),i._useTouch){var f={passive:!1};o.forEach(function(d){ci(d,"touchstart",i.onDragStart,f),ci(d,"touchmove",i._passCallback,f)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(t,r,i,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(t,r),o&&this.onDrag(i,!0))},e.prototype.move=function(t,r){var i=t[0],o=t[1],s=this.getCurrentStore(),a=s.prevClients;return this.moveClients(a.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+i,clientY:c+o,originalClientX:u,originalClientY:c}}),r,!0)},e.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},e.prototype.setEventData=function(t){var r=this.data;for(var i in t)r[i]=t[i];return this},e.prototype.setEventDatas=function(t){return this.setEventData(t)},e.prototype.getCurrentEvent=function(t){return t===void 0&&(t=this._prevInputEvent),Pr(Pr({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var t=this,r=this.targets,i=this.options.container;this.off(),Vr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(o){Vr(o,"dragstart",t.onDragStart)}),this._useMouse&&(r.forEach(function(o){Vr(o,"mousedown",t.onDragStart)}),Vr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(o){Vr(o,"touchstart",t.onDragStart)}),Vr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(t){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var o=new qk(dv(t));this.pinchFlag=!0,this._addStore(o);var s=this.emit("pinchStart",Pr(Pr({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(t,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Pr(Pr({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:t,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(t){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Pr(Pr({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:t}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(t,r,i){var o=this._getPosition(t,i),s=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!s&&this.isDrag&&(a=!0),Pr(Pr({data:this.data,datas:this.data},o),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:a})},e.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},e.prototype._getPosition=function(t,r){var i=this.getCurrentStore(),o=i.getPosition(t,r),s=this.clientStores.slice(1).reduce(function(u,c){var f=c.getPosition();return u.distX+=f.distX,u.distY+=f.distY,u},o),a=s.distX,l=s.distY;return Pr(Pr({},o),{distX:a,distY:l})},e.prototype._attchDragEvent=function(){var t=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(ci(r,"dragover",this.onDrag,i),ci(t,"dragend",this.onDragEnd)),this._useMouse&&(ci(r,"mousemove",this.onDrag),ci(t,"mouseup",this.onDragEnd)),this._useTouch&&(ci(r,"touchmove",this.onDrag,i),ci(t,"touchend",this.onDragEnd,i),ci(t,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var t=this._window,r=this.options.container;this._isDragAPI&&(Vr(r,"dragover",this.onDrag),Vr(t,"dragend",this.onDragEnd)),this._useMouse&&(Vr(r,"mousemove",this.onDrag),Vr(t,"mouseup",this.onDragEnd)),this._useTouch&&(Vr(r,"touchstart",this.onDragStart),Vr(r,"touchmove",this.onDrag),Vr(t,"touchend",this.onDragEnd),Vr(t,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(G_);function Wxe(n){for(var e=5381,t=n.length;t;)e=e*33^n.charCodeAt(--t);return e>>>0}var qxe=Wxe;function Uxe(n){return qxe(n).toString(36)}function Gxe(n){if(n&&n.getRootNode){var e=n.getRootNode();if(e.nodeType===11)return e}}function Kxe(n,e,t){return t.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var o=i.trim();return(o?Xc(o):[""]).map(function(s){var a=s.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(n))):a?".".concat(n," ").concat(a):".".concat(n)}).join(", ")+" {"})}function Jxe(n,e,t,r,i){var o=mp(r),s=o.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",n),s.setAttribute("data-styled-count","1"),t.nonce&&s.setAttribute("nonce",t.nonce),s.innerHTML=Kxe(n,e,t),(i||o.head||o.body).appendChild(s),s}function Yxe(n){var e="rCS"+Uxe(n);return{className:e,inject:function(t,r){r===void 0&&(r={});var i=Gxe(t),o=(i||t.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!o)o=Jxe(e,n,r,t,i);else{var s=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var a,l=parseFloat(o.getAttribute("data-styled-count"))||0;l<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(l-1))}}}}}var n4=function(){return n4=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},n4.apply(this,arguments)};function Xxe(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Vq(n,e){var t=Yxe(e),r=t.className;return G4e(function(i,o){var s=i.className,a=s===void 0?"":s;i.cspNonce;var l=Xxe(i,["className","cspNonce"]),u=oxe();return sxe(o,function(){return u.current},[]),Eq(function(){var c=t.inject(u.current,{nonce:i.cspNonce});return function(){c.destroy()}},[]),Bs(n,n4({ref:u,"data-styled-id":r,className:"".concat(a," ").concat(r)},l))})}var r4=function(n,e){return r4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},r4(n,e)};function Gg(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r4(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var se=function(){return se=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},se.apply(this,arguments)};function Qxe(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Zxe(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}function $xe(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o}function He(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function Kg(n,e){return se({events:[],props:[],name:n},e)}var e6e=["n","w","s","e"],SE=["n","w","s","e","nw","ne","sw","se"];function t6e(n,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*n,'px" height="').concat(32*n,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function n6e(n){var e=t6e(1,n),t=Math.round(n/45)*45%180,r="ns-resize";return t===135?r="nwse-resize":t===45?r="nesw-resize":t===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var vp=fxe(),Wq=vp.browser.webkit,qq=Wq&&function(){var n=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(n.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),Uq=vp.browser.name,Gq=parseInt(vp.browser.version,10),r6e=Uq==="chrome",i6e=vp.browser.chromium,o6e=parseInt(vp.browser.chromiumVersion,10)||0,s6e=r6e&&Gq>=109||i6e&&o6e>=109,a6e=Uq==="firefox",l6e=parseInt(vp.browser.webkitVersion,10)>=612||Gq>=15,xE="moveable-",u6e=SE.map(function(n){var e="",t="",r="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return n.indexOf("n")>-1&&(e="top: ".concat(o,";"),i="bottom"),n.indexOf("s")>-1&&(e="top: 0px;",i="top"),n.indexOf("w")>-1&&(t="left: ".concat(o,";"),r="right"),n.indexOf("e")>-1&&(t="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(n,`"] {
        `).concat(t).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),c6e=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(u6e,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(n){return`
.direction[data-rotation="`.concat(n,'"], :global .view-control-rotation').concat(n,` {
`).concat(n6e(n),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(qq?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),f6e=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],i4=1e-4,Qi=1e-7,hv=1e-9,o4=Math.pow(10,10),I7=-o4,d6e={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},EE={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Kq={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Jq=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Jg(n,e,t,r,i,o){var s,a;o===void 0&&(o="draggable");var l=(a=(s=e.gestos[o])===null||s===void 0?void 0:s.move(t,n.inputEvent))!==null&&a!==void 0?a:{},u=l.originalDatas||l.datas,c=u[o]||(u[o]={});return se(se({},i?IU(e,l):l),{isPinch:!!r,parentEvent:!0,datas:c,originalDatas:n.originalDatas})}var qh=function(){function n(e){var t;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(t={},t[e]={},t)}return n.prototype.dragStart=function(e,t){this.isDrag=!1,this.isFlag=!1;var r=t.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),se(se({},this.move(e,t.inputEvent)),{type:"dragstart"})},n.prototype.drag=function(e,t){return this.move([e[0]-this.prevX,e[1]-this.prevY],t)},n.prototype.move=function(e,t){var r,i,o=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(o=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:t,isFirstDrag:o,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},n}();function dh(n,e,t,r){var i=n.length===16,o=i?4:3,s=Kf(n,t,r,o),a=ce(s,4),l=ce(a[0],2),u=l[0],c=l[1],f=ce(a[1],2),d=f[0],h=f[1],p=ce(a[2],2),m=p[0],g=p[1],v=ce(a[3],2),b=v[0],w=v[1],_=ce(ur(n,e,o),2),y=_[0],k=_[1],S=Math.min(u,d,m,b),E=Math.min(c,h,g,w),M=Math.max(u,d,m,b),R=Math.max(c,h,g,w);u=u-S||0,d=d-S||0,m=m-S||0,b=b-S||0,c=c-E||0,h=h-E||0,g=g-E||0,w=w-E||0,y=y-S||0,k=k-E||0;var O=n[0],I=n[o+1],P=Xo(O*I);return{left:S,top:E,right:M,bottom:R,origin:[y,k],pos1:[u,c],pos2:[d,h],pos3:[m,g],pos4:[b,w],direction:P}}function Yq(n,e){var t=e.clientX,r=e.clientY,i=e.datas,o=n.state,s=o.moveableClientRect,a=o.rootMatrix,l=o.is3d,u=o.pos1,c=s.left,f=s.top,d=l?4:3,h=ce(Ct(Kh(a,[t-c,r-f],d),u),2),p=h[0],m=h[1],g=ce(Ya({datas:i,distX:p,distY:m}),2),v=g[0],b=g[1];return[v,b]}function Gf(n,e){var t=e.datas,r=n.state,i=r.allMatrix,o=r.beforeMatrix,s=r.is3d,a=r.left,l=r.top,u=r.origin,c=r.offsetMatrix,f=r.targetMatrix,d=r.transformOrigin,h=s?4:3;t.is3d=s,t.matrix=i,t.targetMatrix=f,t.beforeMatrix=o,t.offsetMatrix=c,t.transformOrigin=d,t.inverseMatrix=Wa(i,h),t.inverseBeforeMatrix=Wa(o,h),t.absoluteOrigin=Tf(fn([a,l],u),h),t.startDragBeforeDist=Ni(t.inverseBeforeMatrix,t.absoluteOrigin,h),t.startDragDist=Ni(t.inverseMatrix,t.absoluteOrigin,h)}function h6e(n){return dh(n.datas.beforeTransform,[50,50],100,100).direction}function K_(n,e,t){var r=e.datas,i=e.originalDatas.beforeRenderable,o=r.transformIndex,s=i.nextTransforms,a=s.length,l=i.nextTransformAppendedIndexes,u=-1;o===-1?(t==="translate"?u=0:t==="rotate"&&(u=Vl(s,function(h){return h.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):co(l,function(h){return h.index===o&&h.functionName===t})?u=o:u=o+l.filter(function(h){return h.index<o}).length;var c=FEe(s,n.state,u),f=c.targetFunction,d=t==="rotate"?"rotateZ":t;r.beforeFunctionTexts=c.beforeFunctionTexts,r.afterFunctionTexts=c.afterFunctionTexts,r.beforeTransform=c.beforeFunctionMatrix,r.beforeTransform2=c.beforeFunctionMatrix2,r.targetTansform=c.targetFunctionMatrix,r.afterTransform=c.afterFunctionMatrix,r.afterTransform2=c.afterFunctionMatrix2,r.targetAllTransform=c.allFunctionMatrix,f.functionName===d?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):a>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=He(He([],ce(l),!1),[{functionName:t,index:u,isAppend:!0}],!1))}function J_(n,e,t){return"".concat(n.beforeFunctionTexts.join(" ")," ").concat(n.isAppendTransform?t:e," ").concat(n.afterFunctionTexts.join(" "))}function p6e(n){var e=n.datas,t=n.distX,r=n.distY,i=ce(Qq({datas:e,distX:t,distY:r}),2),o=i[0],s=i[1],a=Xq(e,gxe([o,s],4));return Ni(a,Tf([0,0,0],4),4)}function Xq(n,e,t){var r=n.beforeTransform,i=n.afterTransform,o=n.beforeTransform2,s=n.afterTransform2,a=n.targetAllTransform,l=t?Ln(a,e,4):Ln(e,a,4),u=Ln(Wa(t?o:r,4),l,4),c=Ln(u,Wa(t?s:i,4),4);return c}function Qq(n){var e=n.datas,t=n.distX,r=n.distY,i=e.inverseBeforeMatrix,o=e.is3d,s=e.startDragBeforeDist,a=e.absoluteOrigin,l=o?4:3;return Ct(Ni(i,fn(a,[t,r]),l),s)}function Ya(n,e){var t=n.datas,r=n.distX,i=n.distY,o=t.inverseBeforeMatrix,s=t.inverseMatrix,a=t.is3d,l=t.startDragBeforeDist,u=t.startDragDist,c=t.absoluteOrigin,f=a?4:3;return Ct(Ni(e?o:s,fn(c,[r,i]),f),e?l:u)}function m6e(n,e){var t=n.datas,r=n.distX,i=n.distY,o=t.beforeMatrix,s=t.matrix,a=t.is3d,l=t.startDragBeforeDist,u=t.startDragDist,c=t.absoluteOrigin,f=a?4:3;return Ct(Ni(e?o:s,fn(e?l:u,[r,i]),f),c)}function g6e(n,e,t,r,i,o){return r===void 0&&(r=e),i===void 0&&(i=t),o===void 0&&(o=[0,0]),n?n.map(function(s,a){var l=jg(s),u=l.value,c=l.unit,f=a?i:r,d=a?t:e;if(s==="%"||isNaN(u)){var h=f?o[a]/f:0;return d*h}else if(c!=="%")return u;return d*u/100}):o}function Zq(n){var e=[];return n[1]>=0&&(n[0]>=0&&e.push(3),n[0]<=0&&e.push(2)),n[1]<=0&&(n[0]>=0&&e.push(1),n[0]<=0&&e.push(0)),e}function v6e(n,e){return Zq(e).map(function(t){return n[t]})}function Ur(n,e){var t=(e[0]+1)/2,r=(e[1]+1)/2,i=[Dc(n[0][0],n[1][0],t,1-t),Dc(n[0][1],n[1][1],t,1-t)],o=[Dc(n[2][0],n[3][0],t,1-t),Dc(n[2][1],n[3][1],t,1-t)];return[Dc(i[0],o[0],r,1-r),Dc(i[1],o[1],r,1-r)]}function b6e(n,e,t,r,i,o){var s=Kf(e,t,r,i),a=Ur(s,o),l=n[0]-a[0],u=n[1]-a[1];return[l,u]}function Yg(n,e,t,r){return Ln(n,B0(e,r,t),r)}function y6e(n,e,t,r){var i=n.transformOrigin,o=n.offsetMatrix,s=n.is3d,a=s?4:3,l;if(uo(t)){var u=e.beforeTransform,c=e.afterTransform;r?l=Js(Ym(t),4,a):l=Js(Ln(Ln(u,Ym([t]),4),c,4),4,a)}else l=t;return Yg(o,l,i,a)}function _6e(n,e){var t=n.transformOrigin,r=n.offsetMatrix,i=n.is3d,o=n.targetMatrix,s=n.targetAllTransform,a=i?4:3;return Yg(r,Ln(s||o,wE(e,a),a),t,a)}function Y_(n,e){var t=bp(e);return{setTransform:function(r,i){i===void 0&&(i=-1),t.startTransforms=Fr(r)?r:nc(r),s4(n,e,i)},setTransformIndex:function(r){s4(n,e,r)}}}function X_(n,e,t){var r=bp(e),i=r.startTransforms;s4(n,e,Vl(i,function(o){return o.indexOf("".concat(t,"("))===0}))}function s4(n,e,t){var r=bp(e),i=e.datas;if(i.transformIndex=t,t!==-1){var o=r.startTransforms[t];if(o){var s=n.state,a=Wh([o],{"x%":function(l){return l/100*s.offsetWidth},"y%":function(l){return l/100*s.offsetHeight}});i.startValue=a[0].functionValue}}}function AE(n,e){var t=bp(n);t.nextTransforms=nc(e)}function bp(n){return n.originalDatas.beforeRenderable}function Dy(n){var e=n.originalDatas.beforeRenderable;return e.nextTransforms}function pv(n){return(Dy(n)||[]).join(" ")}function mv(n){return bp(n).nextStyle}function $q(n,e,t,r,i){AE(i,e);var o=Hi.drag(n,Jg(i,n.state,t,r,!1)),s=o?o.transform:e;return se(se({transform:e,drag:o},Ui({transform:s},i)),{afterTransform:s})}function ME(n,e,t,r,i,o){var s=y6e(n.state,i,e,o),a=C6e(n,t,r,s);return a}function eU(n,e,t,r,i,o,s){var a=ME(n,e,t,i,o,s),l=n.state,u=l.left,c=l.top,f=n.props.groupable,d=f?u:0,h=f?c:0,p=Ct(r,a);return Ct(p,[d,h])}function w6e(n,e,t,r,i,o,s){var a=eU(n,e,t,r,i,o,s);return a}function k6e(n,e,t){return[e?-1+n[0]/(e/2):0,t?-1+n[1]/(t/2):0]}function C6e(n,e,t,r){r===void 0&&(r=n.state.allMatrix);var i=n.state,o=i.width,s=i.height,a=i.is3d,l=a?4:3,u=[o/2*(1+e[0])+t[0],s/2*(1+e[1])+t[1]];return ur(r,u,l)}function S6e(n,e,t){var r=t.fixedDirection,i=t.fixedPosition,o=t.fixedOffset;return eU(n,"rotate(".concat(e,"deg)"),r,i,o,t)}function x6e(n,e,t,r,i,o){var s=n.props.groupable,a=n.state,l=a.transformOrigin,u=a.offsetMatrix,c=a.is3d,f=a.width,d=a.height,h=a.left,p=a.top,m=o.fixedDirection,g=o.nextTargetMatrix||a.targetMatrix,v=c?4:3,b=g6e(i,e,t,f,d,l),w=s?h:0,_=s?p:0,y=Yg(u,g,b,v),k=b6e(r,y,e,t,v,m);return Ct(k,[w,_])}function E6e(n,e){return Ur(fs(n.state),e)}function A6e(n,e){var t=n.targetGesto,r=n.controlGesto,i;return t!=null&&t.isFlag()&&(i=t.getEventData()[e]),!i&&(r!=null&&r.isFlag())&&(i=r.getEventData()[e]),i||{}}function M6e(n){if(n&&n.getRootNode){var e=n.getRootNode();if(e.nodeType===11)return e}}function T6e(n){var e=n("scale"),t=n("rotate"),r=n("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),t&&t!=="1"&&t!=="none"&&i.push("rotate(".concat(t,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function tU(n,e,t){for(var r=n,i=[],o=pE(n)||bc(n),s=!t&&n===e||n===o,a=s,l=!1,u=3,c,f,d,h=!1,p=Qm(e,e,!0).offsetParent,m=1;r&&!a;){a=s;var g=fo(r),v=g("position"),b=CU(r),w=v==="fixed",_=T6e(g),y=vxe(xEe(b)),k=void 0,S=!1,E=!1,M=0,R=0,O=0,I=0,P={hasTransform:!1,fixedContainer:null};w&&(h=!0,P=OEe(r),p=P.fixedContainer);var A=y.length;!l&&(A===16||_.length)&&(l=!0,u=4,d4(i),d&&(d=Js(d,3,4))),l&&A===9&&(y=Js(y,3,4));var N=TEe(r,n),F=N.tagName,V=N.hasOffset,W=N.isSVG,L=N.origin,z=N.targetOrigin,q=N.offset,te=ce(q,2),re=te[0],ne=te[1];F==="svg"&&d&&(i.push({type:"target",target:r,matrix:DEe(r,u)}),i.push({type:"offset",target:r,matrix:$n(u)}));var fe=parseFloat(g("zoom"))||1;if(w)k=P.fixedContainer,S=!0;else{var ie=Qm(r,e,!1,!0,g),G=ie.offsetZoom;if(k=ie.offsetParent,S=ie.isEnd,E=ie.isStatic,m*=G,(ie.isCustomElement||G!==1)&&E)re-=k.offsetLeft,ne-=k.offsetTop;else if(a6e||s6e){var ae=ie.parentSlotElement;if(ae){for(var Me=k,X=0,ge=0;Me&&M6e(Me);)X+=Me.offsetLeft,ge+=Me.offsetTop,Me=Me.offsetParent;re-=X,ne-=ge}}}if(Wq&&!l6e&&V&&!W&&E&&(v==="relative"||v==="static")&&(re-=k.offsetLeft,ne-=k.offsetTop,s=s||S),w)V&&P.hasTransform&&(O=k.clientLeft,I=k.clientTop);else if(V&&p!==k&&(M=k.clientLeft,R=k.clientTop),V&&k===o){var U=SU(r,!1);re+=U[0],ne+=U[1]}if(i.push({type:"target",target:r,matrix:B0(y,u,L)}),_.length&&(i.push({type:"offset",target:r,matrix:$n(u)}),i.push({type:"target",target:r,matrix:B0(Ym(_),u,L)})),V){var Ce=r===n,Ee=Ce?0:r.scrollLeft,Ae=Ce?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Of([re-Ee+M-O,ne-Ae+R-I],u)})}else i.push({type:"offset",target:r,origin:L});if(fe!==1&&i.push({type:"zoom",target:r,matrix:B0(wE([fe,fe],u),u,[0,0])}),d||(d=y),c||(c=L),f||(f=z),a||w)break;r=k,s=S,(!t||r===o)&&(a=s)}return d||(d=$n(u)),c||(c=[0,0]),f||(f=[0,0]),{zoom:m,offsetContainer:p,matrixes:i,targetMatrix:d,transformOrigin:c,targetOrigin:f,is3d:l,hasFixed:h}}var jc=null,Hc=null,Vd=null;function Uh(n){n?(window.Map&&(jc=new Map,Hc=new Map),Vd=[]):(jc=null,Vd=null,Hc=null)}function O6e(n){var e=Hc==null?void 0:Hc.get(n);if(e)return e;var t=L0(n,!0);return Hc&&Hc.set(n,t),t}function D6e(n,e){if(Vd){var t=co(Vd,function(i){return i[0][0]==n&&i[0][1]==e});if(t)return t[1]}var r=tU(n,e,!0);return Vd&&Vd.push([[n,e],r]),r}function fo(n){var e=jc==null?void 0:jc.get(n);if(!e){var t=Vu(n).getComputedStyle(n);if(!jc)return function(o){return t[o]};e={style:t,cached:{}},jc.set(n,e)}var r=e.cached,i=e.style;return function(o){return o in r||(r[o]=i[o]),r[o]}}function Ls(n,e,t){var r=t.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return n.moveables.map(function(s,a){return o[a]=o[a]||{},o[a][e]=o[a][e]||{},se(se({},t),{isRequestChild:!0,datas:o[a][e],originalDatas:o[a]})})}function Uk(n,e,t,r,i,o,s){var a=!!t.match(/Start$/g),l=!!t.match(/End$/g),u=i.isPinch,c=i.datas,f=Ls(n,e.name,i),d=n.moveables,h=f.map(function(p,m){var g=d[m],v=g.state,b=v.gestos,w=p;if(a)w=new qh(s).dragStart(r,p);else{if(b[s]||(b[s]=c.childGestos[m]),!b[s])return;w=Jg(p,v,r,u,o,s)}var _=e[t](g,se(se({},w),{parentFlag:!0}));return l&&(b[s]=null),_});return a&&(c.childGestos=d.map(function(p){return p.state.gestos[s]})),h}function Dl(n,e,t,r,i,o){i===void 0&&(i=function(c,f){return f});var s=!!t.match(/End$/g),a=Ls(n,e.name,r),l=n.moveables,u=a.map(function(c,f){var d=l[f],h=c;h=i(d,c);var p=e[t](d,se(se({},h),{parentFlag:!0}));return p&&o&&o(d,c,p,f),s&&(d.state.gestos={}),p});return u}function Ry(n,e,t,r){var i=t.fixedDirection,o=t.fixedPosition,s=r.datas.startPositions||fs(e.state),a=Ur(s,i),l=ce(Ni(Ug(-n.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),u=l[0],c=l[1];return r.datas.originalX=u,r.datas.originalY=c,r}function nU(n,e,t,r){var i=n.getState(),o=i.renderPoses,s=i.rotation,a=i.direction,l=Rf(n.props,e).zoom,u=N0(s/Math.PI*180),c={},f=n.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var d=f.renderDirectionMap;t.forEach(function(p){var m=p.dir;c[m]=!0});var h=Xo(a);return t.map(function(p){var m=p.data,g=p.classNames,v=p.dir,b=EE[v];if(!b||!c[v])return null;d[v]=!0;var w=(Ft(u,15)+h*Kq[v]+720)%180,_={};return Wl(m).forEach(function(y){_["data-".concat(y)]=m[y]}),r.createElement("div",se({className:kt.apply(void 0,He(["control","direction",v,e],ce(g),!1)),"data-rotation":w,"data-direction":v},_,{key:"direction-".concat(v),style:By.apply(void 0,He([s,l],ce(b.map(function(y){return o[y]})),!1))}))})}function rU(n,e,t,r){var i=Rf(n.props,t),o=i.renderDirections,s=o===void 0?e:o,a=i.displayAroundControls;if(!s)return[];var l=s===!0?SE:s;return He(He([],ce(a?aU(n,r,t,l):[]),!1),ce(nU(n,t,l.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Xm(n,e,t,r,i,o){for(var s=[],a=6;a<arguments.length;a++)s[a-6]=arguments[a];var l=Or(t,r),u=e?Ft(l/Math.PI*180,15)%180:-1;return n.createElement("div",{key:"line-".concat(o),className:kt.apply(void 0,He(["line","direction",e?"edge":"",e],ce(s),!1)),"data-rotation":u,"data-line-key":o,"data-direction":e,style:h0(t,r,i,l)})}function iU(n,e,t,r,i){var o=t===!0?e6e:t;return o.map(function(s,a){var l=ce(EE[s],2),u=l[0],c=l[1];if(c!=null)return Xm(n,s,r[u],r[c],i,"".concat(e,"Edge").concat(a),e)}).filter(Boolean)}function oU(n){return function(e,t){var r=Rf(e.props,n).edge;return r&&(r===!0||r.length)?He(He([],ce(iU(t,n,r,e.getState().renderPoses,e.props.zoom)),!1),ce(R6e(e,n,t)),!1):sU(e,n,t)}}function sU(n,e,t){return rU(n,SE,e,t)}function R6e(n,e,t){return rU(n,["nw","ne","sw","se"],e,t)}function aU(n,e,t,r){var i=n.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var o=n.getState(),s=o.renderPoses,a=o.rotation,l=o.direction,u=i.renderDirectionMap,c=n.props.zoom,f=Xo(l),d=a/Math.PI*180;return(r||Wl(u)).map(function(h){var p=EE[h];if(!p)return null;var m=(Ft(d,15)+f*Kq[h]+720)%180,g=["around-control"];return t&&g.push("direction",t),e.createElement("div",{className:kt.apply(void 0,He([],ce(g),!1)),"data-rotation":m,"data-direction":h,key:"direction-around-".concat(h),style:By.apply(void 0,He([a,c],ce(p.map(function(v){return s[v]})),!1))})})}function TE(n,e,t){var r=n||{},i=r.position,o=i===void 0?"client":i,s=r.left,a=s===void 0?-1/0:s,l=r.top,u=l===void 0?-1/0:l,c=r.right,f=c===void 0?1/0:c,d=r.bottom,h=d===void 0?1/0:d,p={position:o,left:a,top:u,right:f,bottom:h};return{vertical:N7(p,e,!0),horizontal:N7(p,t,!1)}}function Q_(n,e){var t=n.state,r=t.containerClientRect,i=r.clientHeight,o=r.clientWidth,s=r.clientLeft,a=r.clientTop,l=t.snapOffset,u=l.left,c=l.top,f=l.right,d=l.bottom,h=e||n.props.bounds||{},p=h.position||"client",m=p==="css",g=h.left,v=g===void 0?-1/0:g,b=h.top,w=b===void 0?-1/0:b,_=h.right,y=_===void 0?m?-1/0:1/0:_,k=h.bottom,S=k===void 0?m?-1/0:1/0:k;return m&&(y=o+f-u-y,S=i+d-c-S),{left:v+u-s,right:y+u-s,top:w+c-a,bottom:S+c-a}}function P6e(n,e,t){var r=Q_(n),i=r.left,o=r.top,s=r.right,a=r.bottom,l=ce(t,2),u=l[0],c=l[1],f=ce(Ct(t,e),2),d=f[0],h=f[1];Ne(d)<Qi&&(d=0),Ne(h)<Qi&&(h=0);var p=h>0,m=d>0,g={isBound:!1,offset:0,pos:0},v={isBound:!1,offset:0,pos:0};if(d===0&&h===0)return{vertical:g,horizontal:v};if(d===0)p?a<c&&(v.pos=a,v.offset=c-a):o>c&&(v.pos=o,v.offset=c-o);else if(h===0)m?s<u&&(g.pos=s,g.offset=u-s):i>u&&(g.pos=i,g.offset=u-i);else{var b=h/d,w=t[1]-b*u,_=0,y=0,k=!1;m&&s<=u?(_=b*s+w,y=s,k=!0):!m&&u<=i&&(_=b*i+w,y=i,k=!0),k&&(_<o||_>a)&&(k=!1),k||(p&&a<=c?(_=a,y=(_-w)/b,k=!0):!p&&c<=o&&(_=o,y=(_-w)/b,k=!0)),k&&(g.isBound=!0,g.pos=y,g.offset=u-y,v.isBound=!0,v.pos=_,v.offset=c-_)}return{vertical:g,horizontal:v}}function N7(n,e,t){var r=n[t?"left":"top"],i=n[t?"right":"bottom"],o=Math.min.apply(Math,He([],ce(e),!1)),s=Math.max.apply(Math,He([],ce(e),!1)),a=[];return r+1>o&&a.push({direction:"start",isBound:!0,offset:o-r,pos:r}),i-1<s&&a.push({direction:"end",isBound:!0,offset:s-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(l,u){return Ne(u.offset)-Ne(l.offset)})}function B7(n,e,t){var r=t?n.map(function(i){return qg(i,t)}):n;return r.some(function(i){return i[0]<e.left&&Ne(i[0]-e.left)>.1||i[0]>e.right&&Ne(i[0]-e.right)>.1||i[1]<e.top&&Ne(i[1]-e.top)>.1||i[1]>e.bottom&&Ne(i[1]-e.bottom)>.1})}function I6e(n,e,t){var r=cs(n),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(o,s){return Ne(o-n[t?0:1])-Ne(s-n[t?0:1])}).map(function(o){return Or([0,0],t?[o,e]:[e,o])})}function N6e(n,e,t,r,i){if(!n.props.bounds)return[];var o=i*Math.PI/180,s=Q_(n),a=s.left,l=s.top,u=s.right,c=s.bottom,f=a-r[0],d=u-r[0],h=l-r[1],p=c-r[1],m={left:f,top:h,right:d,bottom:p};if(!B7(t,m,0))return[];var g=[];return[[f,0],[d,0],[h,1],[p,1]].forEach(function(v){var b=ce(v,2),w=b[0],_=b[1];t.forEach(function(y){var k=Or([0,0],y);g.push.apply(g,He([],ce(I6e(y,w,_).map(function(S){return o+S-k}).filter(function(S){return!B7(e,m,S)}).map(function(S){return Ft(S*180/Math.PI,Qi)})),!1))})}),g}var B6e=["left","right","center"],L6e=["top","bottom","middle"],L7={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},rc={start:"left",end:"right",center:"center"},ic={start:"top",end:"bottom",center:"middle"};function Wd(){return{left:!1,top:!1,right:!1,bottom:!1}}function yp(n,e){var t=n.props,r=t.snappable,i=t.bounds,o=t.innerBounds,s=t.verticalGuidelines,a=t.horizontalGuidelines,l=t.snapGridWidth,u=t.snapGridHeight,c=n.state,f=c.guidelines,d=c.enableSnap;return!r||!d||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||u||i||o||f&&f.length||s&&s.length||a&&a.length)}function OE(n){return n===!1?{}:n===!0||!n?{left:!0,right:!0,top:!0,bottom:!0}:n}function F6e(n,e){var t=OE(n),r={};for(var i in t)i in e&&t[i]&&(r[i]=e[i]);return r}function DE(n,e){var t=F6e(n,e),r=L6e.filter(function(o){return o in t}),i=B6e.filter(function(o){return o in t});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(o){return t[o]}),vertical:i.map(function(o){return t[o]})}}function z6e(n,e,t){var r=ur(n,[e.clientLeft,e.clientTop],t);return[e.left+r[0],e.top+r[1]]}function j6e(n){var e=ce(n,2),t=e[0],r=e[1],i=r[0]-t[0],o=r[1]-t[1];Math.abs(i)<Nr&&(i=0),Math.abs(o)<Nr&&(o=0);var s=0,a=0,l=0;return i?o?(s=-o/i,a=1,l=s*t[0]-t[1]):(a=1,l=-t[1]):(s=-1,l=t[0]),[s,a,l].map(function(u){return Ft(u,Nr)})}function Z_(n,e,t,r,i,o){r===void 0&&(r=[]),i===void 0&&(i=[]);var s=n.props,a=BEe(o,s.snapThreshold,5);return lU(n.state.guidelines,e,t,r,i,a)}function lU(n,e,t,r,i,o){return{vertical:z7(n,"vertical",e,o,r),horizontal:z7(n,"horizontal",t,o,i)}}function H6e(n,e,t){var r=ce(t,2),i=r[0],o=r[1],s=ce(e,2),a=s[0],l=s[1],u=ce(Ct(t,e),2),c=u[0],f=u[1],d=f>0,h=c>0;c=Ly(c),f=Ly(f);var p={isSnap:!1,offset:0,pos:0},m={isSnap:!1,offset:0,pos:0};if(c===0&&f===0)return{vertical:p,horizontal:m};var g=Z_(n,c?[i]:[],f?[o]:[]),v=g.vertical,b=g.horizontal;v.posInfos.filter(function(F){var V=F.pos;return h?V>=a:V<=a}),b.posInfos.filter(function(F){var V=F.pos;return d?V>=l:V<=l}),v.isSnap=v.posInfos.length>0,b.isSnap=b.posInfos.length>0;var w=a4(v),_=w.isSnap,y=w.guideline,k=a4(b),S=k.isSnap,E=k.guideline,M=S?E.pos[1]:0,R=_?y.pos[0]:0;if(c===0)S&&(m.isSnap=!0,m.pos=E.pos[1],m.offset=o-m.pos);else if(f===0)_&&(p.isSnap=!0,p.pos=R,p.offset=i-R);else{var O=f/c,I=t[1]-O*i,P=0,A=0,N=!1;_?(A=R,P=O*A+I,N=!0):S&&(P=M,A=(P-I)/O,N=!0),N&&(p.isSnap=!0,p.pos=A,p.offset=i-A,m.isSnap=!0,m.pos=P,m.offset=o-P)}return{vertical:p,horizontal:m}}function Mu(n){var e="";return n===-1||n==="top"||n==="left"?e="start":n===0||n==="center"||n==="middle"?e="center":(n===1||n==="right"||n==="bottom")&&(e="end"),e}function F7(n,e,t){var r=DE(n.props.snapDirections,e),i=Z_(n,r.vertical,r.horizontal,r.verticalNames.map(function(a){return Mu(a)}),r.horizontalNames.map(function(a){return Mu(a)}),t),o=Mu(r.horizontalNames[i.horizontal.index]),s=Mu(r.verticalNames[i.vertical.index]);return{vertical:se(se({},i.vertical),{direction:s}),horizontal:se(se({},i.horizontal),{direction:o})}}function a4(n){var e=n.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var t=n.posInfos[0],r=t.guidelineInfos[0],i=r.offset,o=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:o,pos:t.pos,guideline:s}}function z7(n,e,t,r,i){var o,s;if(i===void 0&&(i=[]),!n||!n.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=e==="vertical",l=a?0:1,u=t.map(function(f,d){var h=i[d]||"",p=n.map(function(m){var g=m.pos,v=f-g[l];return{offset:v,dist:Ne(v),guideline:m,direction:h}}).filter(function(m){var g=m.guideline,v=m.dist,b=g.type;return!(b!==e||v>r)}).sort(function(m,g){return m.dist-g.dist});return{pos:f,index:d,guidelineInfos:p,direction:h}}).filter(function(f){return f.guidelineInfos.length>0}).sort(function(f,d){return f.guidelineInfos[0].dist-d.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(s=(o=u[0])===null||o===void 0?void 0:o.direction)!==null&&s!==void 0?s:"",posInfos:u}}function V6e(n,e,t,r){r===void 0&&(r=1);var i=[];t[0]&&t[1]?i=[t,[-t[0],t[1]],[t[0],-t[1]]]:!t[0]&&!t[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(f,d,h){var p=h[d+1]||h[0];i.push(f),i.push([(f[0]+p[0])/2,(f[1]+p[1])/2])}):n.props.keepRatio?i.push([-1,-1],[-1,1],[1,-1],[1,1],t):(i.push.apply(i,He([],ce(v6e([[-1,-1],[1,-1],[-1,-1],[1,1]],t)),!1)),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));var o=i.map(function(f){return Ur(e,f)}),s=o.map(function(f){return f[0]}),a=o.map(function(f){return f[1]}),l=Z_(n,s,a,i.map(function(f){return Mu(f[0])}),i.map(function(f){return Mu(f[1])}),r),u=Mu(i.map(function(f){return f[0]})[l.vertical.index]),c=Mu(i.map(function(f){return f[1]})[l.horizontal.index]);return{vertical:se(se({},l.vertical),{direction:u}),horizontal:se(se({},l.horizontal),{direction:c})}}function uU(n,e){var t=Ne(n.offset),r=Ne(e.offset);return n.isBound&&e.isBound?r-t:n.isBound?-1:e.isBound?1:n.isSnap&&e.isSnap?r-t:n.isSnap?-1:e.isSnap||t<Qi?1:r<Qi?-1:t-r}function Py(n,e){return n.slice().sort(function(t,r){var i=t.sign[e],o=r.sign[e],s=t.offset[e],a=r.offset[e];if(i){if(!o)return-1}else return 1;return uU({isBound:t.isBound,isSnap:t.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:a})})[0]}function W6e(n,e,t){var r=[];if(t)Ne(e[0])!==1||Ne(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[n[0],-n[1]]],[e,[-n[0],n[1]]]),r.push([e,n]);else if(n[0]&&n[1]||!n[0]&&!n[1]){var i=n[0]?n:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(a){var l=[s*i[0],a*i[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(n[0]){var o=Ne(e[0])===1?[1]:[1,-1];o.forEach(function(s){r.push([[e[0],-1],[s*n[0],-1]],[[e[0],0],[s*n[0],0]],[[e[0],1],[s*n[0],1]])})}else if(n[1]){var o=Ne(e[1])===1?[1]:[1,-1];o.forEach(function(a){r.push([[-1,e[1]],[-1,a*n[1]]],[[0,e[1]],[0,a*n[1]]],[[1,e[1]],[1,a*n[1]]])})}return r}function cU(n,e){var t=US([e[0][0],e[1][0]]),r=US([e[0][1],e[1][1]]);return{vertical:t<=n[0],horizontal:r<=n[1]}}function RE(n,e){var t=ce(e,2),r=t[0],i=t[1],o=i[0]-r[0],s=i[1]-r[1];Ne(o)<Qi&&(o=0),Ne(s)<Qi&&(s=0);var a,l;if(!o)a=r[0],l=n[0];else if(!s)a=r[1],l=n[1];else{var u=s/o;a=u*(n[0]-r[0])+r[1],l=n[1]}return a-l}function fU(n,e,t,r){return r===void 0&&(r=Qi),n.every(function(i){var o=RE(i,e),s=o<=0;return s===t||Ne(o)<=r})}function j7(n,e,t,r,i){return i===void 0&&(i=0),r&&e-i<=n||!r&&n<=t+i?{isBound:!0,offset:r?e-n:t-n}:{isBound:!1,offset:0}}function q6e(n,e){var t=e.line,r=e.centerSign,i=e.verticalSign,o=e.horizontalSign,s=e.lineConstants,a=n.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,u=a.top,c=a.width,f=a.height,d=[[l,u],[l,u+f]],h=[[l,u],[l+c,u]],p=[[l+c,u],[l+c,u+f]],m=[[l,u+f],[l+c,u+f]];if(fU([[l,u],[l+c,u],[l,u+f],[l+c,u+f]],t,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Tu(t,s,h,i),v=Tu(t,s,m,i),b=Tu(t,s,d,o),w=Tu(t,s,p,o),_=g.isBound&&v.isBound,y=g.isBound||v.isBound,k=b.isBound&&w.isBound,S=b.isBound||w.isBound,E=Gh(g.offset,v.offset),M=Gh(b.offset,w.offset),R=[0,0],O=!1,I=!1;return Ne(M)<Ne(E)?(R=[E,0],O=y,I=_):(R=[0,M],O=S,I=k),{isAllBound:I,isVerticalBound:y,isHorizontalBound:S,isBound:O,offset:R}}function Tu(n,e,t,r,i,o){var s=ce(e,2),a=s[0],l=s[1],u=n[0],c=t[0],f=t[1],d=Ly(f[1]-c[1]),h=Ly(f[0]-c[0]),p=l,m=a,g=-a/l;if(h){if(!d){if(o&&!p)return{isBound:!1,offset:0};if(m){var _=(c[1]-u[1])/g+u[0];return j7(_,c[0],f[0],r,i)}else{var b=c[1]-u[1],w=Ne(b)<=(i||0);return{isBound:w,offset:w?b:0}}}}else{if(o&&!m)return{isBound:!1,offset:0};if(p){var v=g*(c[0]-u[0])+u[1];return j7(v,c[1],f[1],r,i)}else{var b=c[0]-u[0],w=Ne(b)<=(i||0);return{isBound:w,offset:w?b:0}}}return{isBound:!1,offset:0}}function dU(n,e,t){return e.map(function(r){var i=q6e(n,r),o=i.isBound,s=i.offset,a=i.isVerticalBound,l=i.isHorizontalBound,u=r.multiple,c=Ya({datas:t,distX:s[0],distY:s[1]}).map(function(f,d){return f*(u[d]?2/u[d]:0)});return{sign:u,isBound:o,isVerticalBound:a,isHorizontalBound:l,isSnap:!1,offset:c}})}function U6e(n,e,t){var r,i=PE(n,e,[0,0],!1).map(function(d){return se(se({},d),{multiple:d.multiple.map(function(h){return Ne(h)*2})})}),o=dU(n,i,t),s=Py(o,0),a=Py(o,1),l=0,u=0,c=s.isVerticalBound||a.isVerticalBound,f=s.isHorizontalBound||a.isHorizontalBound;return(c||f)&&(r=ce(m6e({datas:t,distX:-s.offset[0],distY:-a.offset[1]}),2),l=r[0],u=r[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:f,offset:u}}}function G6e(n,e){var t=[],r=n[0],i=n[1];return r&&i?t.push([[0,i*2],n,[-r,i]],[[r*2,0],n,[r,-i]]):r?(t.push([[r*2,0],[r,1],[r,-1]]),e&&t.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(t.push([[0,i*2],[1,i],[-1,i]]),e&&t.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):t.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),t}function PE(n,e,t,r){var i=n.state,o=i.allMatrix,s=i.is3d,a=Kf(o,100,100,s?4:3),l=Ur(a,[0,0]);return G6e(t,r).map(function(u){var c=ce(u,3),f=c[0],d=c[1],h=c[2],p=[Ur(a,d),Ur(a,h)],m=j6e(p),g=cU(l,p),v=g.vertical,b=g.horizontal,w=RE(l,p)<=0;return{multiple:f,centerSign:w,verticalSign:v,horizontalSign:b,lineConstants:m,line:[Ur(e,d),Ur(e,h)]}})}function H7(n,e,t,r){var i=r?n.map(function(o){return qg(o,r)}):n;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(o){var s=RE(t,o)<=0;return!fU(e,o,s)})}function K6e(n){var e=ce(n,2),t=e[0],r=e[1],i=r[0]-t[0],o=r[1]-t[1];if(!i)return Ne(t[0]);if(!o)return Ne(t[1]);var s=o/i;return Ne((-s*t[0]+t[1])/Math.sqrt(Math.pow(s,2)+1))}function J6e(n){var e=ce(n,2),t=e[0],r=e[1],i=r[0]-t[0],o=r[1]-t[1];if(!i)return[t[0],0];if(!o)return[0,t[1]];var s=o/i,a=-s*t[0]+t[1];return[-a/(s+1/s),a/(s*s+1)]}function Y6e(n,e,t,r,i){var o=n.props.innerBounds,s=i*Math.PI/180;if(!o)return[];var a=o.left,l=o.top,u=o.width,c=o.height,f=a-r[0],d=a+u-r[0],h=l-r[1],p=l+c-r[1],m=[[f,h],[d,h],[f,p],[d,p]],g=Ur(t,[0,0]);if(!H7(t,m,g,0))return[];var v=[],b=m.map(function(w){return[cs(w),Or([0,0],w)]});return[[t[0],t[1]],[t[1],t[3]],[t[3],t[2]],[t[2],t[0]]].forEach(function(w){var _=Or([0,0],J6e(w)),y=K6e(w);v.push.apply(v,He([],ce(b.filter(function(k){var S=ce(k,1),E=S[0];return E&&y<=E}).map(function(k){var S=ce(k,2),E=S[0],M=S[1],R=Math.acos(E?y/E:0),O=M+R,I=M-R;return[s+O-_,s+I-_]}).reduce(function(k,S){return k.push.apply(k,He([],ce(S),!1)),k},[]).filter(function(k){return!H7(e,m,g,k)}).map(function(k){return Ft(k*180/Math.PI,Qi)})),!1))}),v}function X6e(n){var e=n.props.innerBounds,t=Wd();if(!e)return{boundMap:t,vertical:[],horizontal:[]};var r=n.getRect(),i=r.pos1,o=r.pos2,s=r.pos3,a=r.pos4,l=[i,o,s,a],u=Ur(l,[0,0]),c=e.left,f=e.top,d=e.width,h=e.height,p=[[c,f],[c,f+h]],m=[[c,f],[c+d,f]],g=[[c+d,f],[c+d,f+h]],v=[[c,f+h],[c+d,f+h]],b=PE(n,l,[0,0],!1),w=[],_=[];return b.forEach(function(y){var k=y.line,S=y.lineConstants,E=cU(u,k),M=E.horizontal,R=E.vertical,O=Tu(k,S,m,R,1,!0),I=Tu(k,S,v,R,1,!0),P=Tu(k,S,p,M,1,!0),A=Tu(k,S,g,M,1,!0);O.isBound&&!t.top&&(w.push(f),t.top=!0),I.isBound&&!t.bottom&&(w.push(f+h),t.bottom=!0),P.isBound&&!t.left&&(_.push(c),t.left=!0),A.isBound&&!t.right&&(_.push(c+d),t.right=!0)}),{boundMap:t,horizontal:w,vertical:_}}function Q6e(n,e,t,r){var i=e[0]-n[0],o=e[1]-n[1];if(Ne(i)<Nr&&(i=0),Ne(o)<Nr&&(o=0),!i)return r?[0,0]:[0,t];if(!o)return r?[t,0]:[0,0];var s=o/i,a=n[1]-s*n[0];if(r){var l=s*(e[0]+t)+a;return[t,l-e[1]]}else{var u=(e[1]+t-a)/s;return[u-e[0],t]}}function l4(n,e,t,r,i){var o=Q6e(n,e,t,r);if(!o)return{isOutside:!1,offset:[0,0]};var s=Ol(n,e),a=Ol(o,n),l=Ol(o,e),u=a>s||l>s,c=ce(Ya({datas:i,distX:o[0],distY:o[1]}),2),f=c[0],d=c[1];return{offset:[f,d],isOutside:u}}function Iy(n,e){return n.isBound?n.offset:e.isSnap?a4(e).offset:0}function Z6e(n,e,t,r,i){var o=ce(e,2),s=o[0],a=o[1],l=ce(t,2),u=l[0],c=l[1],f=ce(r,2),d=f[0],h=f[1],p=ce(i,2),m=p[0],g=p[1],v=-m,b=-g;if(n&&s&&a){v=0,b=0;var w=[];if(u&&c?w.push([0,g],[m,0]):u?w.push([m,0]):c?w.push([0,g]):d&&h?w.push([0,g],[m,0]):d?w.push([m,0]):h&&w.push([0,g]),w.length){w.sort(function(S,E){return cs(Ct([s,a],S))-cs(Ct([s,a],E))});var _=w[0];if(_[0]&&Ne(s)>Nr)v=-_[0],b=a*Ne(s+v)/Ne(s)-a;else if(_[1]&&Ne(a)>Nr){var y=a;b=-_[1],v=s*Ne(a+b)/Ne(y)-s}if(n&&c&&u)if(Ne(v)>Nr&&Ne(v)<Ne(m)){var k=Ne(m)/Ne(v);v*=k,b*=k}else if(Ne(b)>Nr&&Ne(b)<Ne(g)){var k=Ne(g)/Ne(b);v*=k,b*=k}else v=Gh(-m,v),b=Gh(-g,b)}}else v=s||u?-m:0,b=a||c?-g:0;return[v,b]}function $6e(n,e,t,r,i,o){if(!yp(n,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=BE(o.absolutePoses,[e,t]),a=is(s),l=a.left,u=a.right,c=a.top,f=a.bottom,d={horizontal:s.map(function(A){return A[1]}),vertical:s.map(function(A){return A[0]})},h=OE(n.props.snapDirections),p=DE(h,{left:l,right:u,top:c,bottom:f,center:(l+u)/2,middle:(c+f)/2}),m=$_(n,i,p,d),g=m.vertical,v=m.horizontal,b=U6e(n,s,o),w=b.vertical,_=b.horizontal,y=g.isSnap,k=v.isSnap,S=g.isBound||w.isBound,E=v.isBound||_.isBound,M=Gh(g.offset,w.offset),R=Gh(v.offset,_.offset),O=ce(Z6e(r,[e,t],[S,E],[y,k],[M,R]),2),I=O[0],P=O[1];return[{isBound:S,isSnap:y,offset:I},{isBound:E,isSnap:k,offset:P}]}function $_(n,e,t,r){r===void 0&&(r=t);var i=TE(Q_(n),r.vertical,r.horizontal),o=i.horizontal,s=i.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Z_(n,t.vertical,t.horizontal),l=a.horizontal,u=a.vertical,c=Iy(o[0],l),f=Iy(s[0],u),d=Ne(c),h=Ne(f);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:d,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:h,bounds:s,snap:u}}}function V7(n,e,t,r,i){var o=TE(e,t,r),s=o.horizontal,a=o.vertical,l=lU(n,t,r,[],[],i),u=l.horizontal,c=l.vertical,f=Iy(s[0],u),d=Iy(a[0],c),h=Ne(f),p=Ne(d);return{horizontal:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:h,bounds:s,snap:u},vertical:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:a,snap:c}}}function eEe(n,e,t,r){var i=Or(n,e)/Math.PI*180,o=t.vertical,s=o.isBound,a=o.isSnap,l=o.dist,u=t.horizontal,c=u.isBound,f=u.isSnap,d=u.dist,h=i%180,p=h<3||h>177,m=h>87&&h<93;return d<l&&(s||a&&!m&&(!r||!p))?"vertical":c||f&&!p&&(!r||!m)?"horizontal":""}function tEe(n,e,t,r,i,o){return t.map(function(s){var a=ce(s,2),l=a[0],u=a[1],c=Ur(e,l),f=Ur(e,u),d=r?nEe(n,c,f,i):$_(n,i,{vertical:[f[0]],horizontal:[f[1]]}),h=d.horizontal,p=h.offset,m=h.isBound,g=h.isSnap,v=d.vertical,b=v.offset,w=v.isBound,_=v.isSnap,y=Ct(u,l);if(!b&&!p)return{isBound:w||m,isSnap:_||g,sign:y,offset:[0,0]};var k=eEe(c,f,d,r);if(!k)return{sign:y,isBound:!1,isSnap:!1,offset:[0,0]};var S=k==="vertical",E=[0,0];return!r&&Ne(u[0])===1&&Ne(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?E=Ya({datas:o,distX:-b,distY:-p}):E=l4(c,f,-(S?b:p),S,o).offset,E=E.map(function(M,R){return M*(y[R]?2/y[R]:0)}),{sign:y,isBound:S?w:m,isSnap:S?_:g,offset:E}})}function W7(n,e){return n.isBound?n.offset:e.isSnap?e.offset:0}function nEe(n,e,t,r){var i=P6e(n,e,t),o=i.horizontal,s=i.vertical,a=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:H6e(n,e,t),l=a.horizontal,u=a.vertical,c=W7(o,l),f=W7(s,u),d=Ne(c),h=Ne(f);return{horizontal:{isBound:o.isBound,isSnap:l.isSnap,offset:c,dist:d},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:f,dist:h}}}function rEe(n,e,t,r,i){var o=[-t[0],-t[1]],s=n.state,a=s.width,l=s.height,u=n.props.bounds,c=1/0,f=1/0;if(u){var d=[[t[0],-t[1]],[-t[0],t[1]]],h=u.left,p=h===void 0?-1/0:h,m=u.top,g=m===void 0?-1/0:m,v=u.right,b=v===void 0?1/0:v,w=u.bottom,_=w===void 0?1/0:w;d.forEach(function(y){var k=y[0]!==o[0],S=y[1]!==o[1],E=Ur(e,y),M=Or(r,E)*360/Math.PI;if(S){var R=E.slice();(Ne(M-360)<2||Ne(M-180)<2)&&(R[1]=r[1]);var O=l4(r,R,(r[1]<E[1]?_:g)-E[1],!1,i),I=ce(O.offset,2),P=I[1],A=O.isOutside;isNaN(P)||(f=l+(A?1:-1)*Ne(P))}if(k){var R=E.slice();(Ne(M-90)<2||Ne(M-270)<2)&&(R[0]=r[0]);var N=l4(r,R,(r[0]<E[0]?b:p)-E[0],!0,i),F=ce(N.offset,1),V=F[0],W=N.isOutside;isNaN(V)||(c=a+(W?1:-1)*Ne(V))}})}return{maxWidth:c,maxHeight:f}}var Hi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(n,e){var t=n.props,r=t.hideThrottleDragRotateLine,i=t.throttleDragRotate,o=t.zoom,s=n.getState(),a=s.dragInfo,l=s.beforeOrigin;if(r||!i||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var c=cs(u),f=Or(u,[0,0]);return[e.createElement("div",{className:kt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(f,"rad) scaleY(").concat(o,")")}})]},dragStart:function(n,e){var t=e.datas,r=e.parentEvent,i=e.parentGesto,o=n.state,s=o.gestos,a=o.style;if(s.draggable)return!1;s.draggable=i||n.targetGesto,t.datas={},t.left=parseFloat(a.left||"")||0,t.top=parseFloat(a.top||"")||0,t.bottom=parseFloat(a.bottom||"")||0,t.right=parseFloat(a.right||"")||0,t.startValue=[0,0],Gf(n,e),X_(n,e,"translate"),wEe(n,t),t.prevDist=[0,0],t.prevBeforeDist=[0,0],t.isDrag=!1,t.deltaOffset=[0,0];var l=zt(n,e,se({set:function(c){t.startValue=c}},Y_(n,e))),u=r||dt(n,"onDragStart",l);return u!==!1?(t.isDrag=!0,n.state.dragInfo={startRect:n.getRect(),dist:[0,0]}):(s.draggable=null,t.isPinch=!1),t.isDrag?l:!1},drag:function(n,e){if(e){K_(n,e,"translate");var t=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,s=e.deltaOffset,a=e.useSnap,l=e.isRequest,u=e.distX,c=e.distY,f=t.isDrag,d=t.prevDist,h=t.prevBeforeDist,p=t.startValue;if(f){s&&(u+=s[0],c+=s[1]);var m=n.props,g=m.parentMoveable,v=r?0:m.throttleDrag||0,b=r?0:m.throttleDragRotate||0,w=0,_=!1,y=!1,k=!1,S=!1;if(!r&&b>0&&(u||c)){var E=m.startDragRotate||0,M=Ft(E+Or([0,0],[u,c])*180/Math.PI,b)-E,R=c*Math.abs(Math.cos((M-90)/180*Math.PI)),O=u*Math.abs(Math.cos(M/180*Math.PI)),I=cs([O,R]);w=M*Math.PI/180,u=I*Math.cos(w),c=I*Math.sin(w)}if(!o&&!r&&!i){var P=ce($6e(n,u,c,b,!a&&l||s,t),2),A=P[0],N=P[1];_=A.isSnap,y=A.isBound,k=N.isSnap,S=N.isBound;var F=A.offset,V=N.offset;u+=F,c+=V}var W=fn(Qq({datas:t,distX:u,distY:c}),p),L=fn(p6e({datas:t,distX:u,distY:c}),p);k7(L,Qi),k7(W,Qi),b||(!_&&!y&&(L[0]=Ft(L[0],v),W[0]=Ft(W[0],v)),!k&&!S&&(L[1]=Ft(L[1],v),W[1]=Ft(W[1],v)));var z=Ct(W,p),q=Ct(L,p),te=Ct(q,d),re=Ct(z,h);t.prevDist=q,t.prevBeforeDist=z,t.passDelta=te,t.passDist=q;var ne=t.left+z[0],fe=t.top+z[1],ie=t.right-z[0],G=t.bottom-z[1],ae=J_(t,"translate(".concat(L[0],"px, ").concat(L[1],"px)"),"translate(".concat(q[0],"px, ").concat(q[1],"px)"));if(AE(e,ae),n.state.dragInfo.dist=r?[0,0]:q,!(!r&&!g&&te.every(function(Ce){return!Ce})&&re.some(function(Ce){return!Ce}))){var Me=n.state,X=Me.width,ge=Me.height,U=zt(n,e,se({transform:ae,dist:q,delta:te,translate:L,beforeDist:z,beforeDelta:re,beforeTranslate:W,left:ne,top:fe,right:ie,bottom:G,width:X,height:ge,isPinch:o},Ui({transform:ae},e)));return!r&&dt(n,"onDrag",U),U}}}},dragAfter:function(n,e){var t=e.datas,r=t.deltaOffset;return r[0]||r[1]?(t.deltaOffset=[0,0],this.drag(n,se(se({},e),{deltaOffset:r}))):!1},dragEnd:function(n,e){var t=e.parentEvent,r=e.datas;if(n.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=Mo(n,e,{});return!t&&dt(n,"onDragEnd",i),i}},dragGroupStart:function(n,e){var t=e.datas,r=e.clientX,i=e.clientY,o=this.dragStart(n,e);if(!o)return!1;var s=Uk(n,this,"dragStart",[r||0,i||0],e,!1,"draggable"),a=se(se({},o),{targets:n.props.targets,events:s}),l=dt(n,"onDragGroupStart",a);return t.isDrag=l!==!1,t.isDrag?o:!1},dragGroup:function(n,e){var t=e.datas;if(t.isDrag){var r=this.drag(n,e),i=e.datas.passDelta,o=Uk(n,this,"drag",i,e,!1,"draggable");if(r){var s=se({targets:n.props.targets,events:o},r);return dt(n,"onDragGroup",s),s}}},dragGroupEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(n,e);var i=Uk(n,this,"dragEnd",[0,0],e,!1,"draggable");return dt(n,"onDragGroupEnd",Mo(n,e,{targets:n.props.targets,events:i})),t}},request:function(n){var e={},t=n.getRect(),r=0,i=0,o=!1;return{isControl:!1,requestStart:function(s){return o=s.useSnap,{datas:e,useSnap:o}},request:function(s){return"x"in s?r=s.x-t.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-t.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:o}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:o}}}},unset:function(n){n.state.gestos.draggable=null,n.state.dragInfo=null}};function hU(n,e){var t=Ur(n,e),r=[0,0];return{fixedPosition:t,fixedDirection:e,fixedOffset:r}}function iEe(n,e){var t=n.allMatrix,r=n.is3d,i=n.width,o=n.height,s=r?4:3,a=[i/2*(1+e[0]),o/2*(1+e[1])],l=ur(t,a,s),u=[0,0];return{fixedPosition:l,fixedDirection:e,fixedOffset:u}}function pU(n,e){var t=n.allMatrix,r=n.is3d,i=n.width,o=n.height,s=r?4:3,a=k6e(e,i,o),l=ur(t,e,s),u=[i?0:e[0],o?0:e[1]];return{fixedPosition:l,fixedDirection:a,fixedOffset:u}}var q7=zE("resizable"),u4={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:oU("resizable"),dragControlCondition:q7,viewClassName:FE("resizable"),dragControlStart:function(n,e){var t,r=e.inputEvent,i=e.isPinch,o=e.isGroup,s=e.parentDirection,a=e.parentGesto,l=e.datas,u=e.parentFixedDirection,c=e.parentEvent,f=TU(s,i,r,l),d=n.state,h=d.target,p=d.width,m=d.height,g=d.gestos;if(!f||!h||g.resizable)return!1;g.resizable=a||n.controlGesto,!i&&Gf(n,e),l.datas={},l.direction=f,l.startOffsetWidth=p,l.startOffsetHeight=m,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],o||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var v=n.props.transformOrigin||"% %";l.transformOrigin=v&&uo(v)?v.split(" "):v,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=(t=e==null?void 0:e.parentIsWidth)!==null&&t!==void 0?t:!f[0]&&!f[1]||f[0]||!f[1];function b(M){l.ratio=M&&isFinite(M)?M:0}l.startPositions=fs(n.state);function w(M){var R=hU(l.startPositions,M);l.fixedDirection=R.fixedDirection,l.fixedPosition=R.fixedPosition,l.fixedOffset=R.fixedOffset}function _(M){var R=pU(n.state,M);l.fixedDirection=R.fixedDirection,l.fixedPosition=R.fixedPosition,l.fixedOffset=R.fixedOffset}function y(M){l.minSize=[Nn("".concat(M[0]),0)||0,Nn("".concat(M[1]),0)||0]}function k(M){var R=[M[0]||1/0,M[1]||1/0];(!Vh(R[0])||isFinite(R[0]))&&(R[0]=Nn("".concat(R[0]),0)||1/0),(!Vh(R[1])||isFinite(R[1]))&&(R[1]=Nn("".concat(R[1]),0)||1/0),l.maxSize=R}b(p/m),w(u||[-f[0],-f[1]]),l.setFixedDirection=w,l.setFixedPosition=_,l.setMin=y,l.setMax=k;var S=zt(n,e,{direction:f,startRatio:l.ratio,set:function(M){var R=ce(M,2),O=R[0],I=R[1];l.startWidth=O,l.startHeight=I},setMin:y,setMax:k,setRatio:b,setFixedDirection:w,setFixedPosition:_,setOrigin:function(M){l.transformOrigin=M},dragStart:Hi.dragStart(n,new qh().dragStart([0,0],e))}),E=c||dt(n,"onResizeStart",S);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,E!==!1&&(l.isResize=!0,n.state.snapRenderInfo={request:e.isRequest,direction:f}),l.isResize?S:!1},dragControl:function(n,e){var t,r=e.datas,i=e.parentFlag,o=e.isPinch,s=e.parentKeepRatio,a=e.dragClient,l=e.parentDist,u=e.useSnap,c=e.isRequest,f=e.isGroup,d=e.parentEvent,h=e.resolveMatrix,p=r.isResize,m=r.transformOrigin,g=r.startWidth,v=r.startHeight,b=r.prevWidth,w=r.prevHeight,_=r.minSize,y=r.maxSize,k=r.ratio,S=r.startOffsetWidth,E=r.startOffsetHeight,M=r.isWidth;if(!p)return;if(h){var R=n.state.is3d,O=r.startOffsetMatrix,I=r.startTransformOrigin,P=R?4:3,A=Ym(Dy(e)),N=Math.sqrt(A.length);P!==N&&(A=Js(A,N,P));var F=Yg(O,A,I,P),V=Kf(F,S,E,P);r.startPositions=V,r.nextTargetMatrix=A,r.nextAllMatrix=F}var W=Rf(n.props,"resizable"),L=W.resizeFormat,z=W.throttleResize,q=z===void 0?i?0:1:z,te=W.parentMoveable,re=W.keepRatioFinally,ne=r.direction,fe=ne,ie=0,G=0;!ne[0]&&!ne[1]&&(fe=[1,1]);var ae=k&&(s??W.keepRatio)||!1;function Me(){var Ve=r.fixedDirection,ct=BU(fe,ae,r,e);ie=ct.distWidth,G=ct.distHeight;var Pt=fe[0]-Ve[0]||ae?Math.max(S+ie,Qi):S,yt=fe[1]-Ve[1]||ae?Math.max(E+G,Qi):E;return ae&&S&&E&&(M?yt=Pt/k:Pt=yt*k),[Pt,yt]}var X=ce(Me(),2),ge=X[0],U=X[1];d||(r.setFixedDirection(r.fixedDirection),dt(n,"onBeforeResize",zt(n,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(Ve){var ct;return r.setFixedDirection(Ve),ct=ce(Me(),2),ge=ct[0],U=ct[1],[ge,U]},setFixedPosition:function(Ve){var ct;return r.setFixedPosition(Ve),ct=ce(Me(),2),ge=ct[0],U=ct[1],[ge,U]},boundingWidth:ge,boundingHeight:U,setSize:function(Ve){var ct;ct=ce(Ve,2),ge=ct[0],U=ct[1]}},!0)));var Ce=a;a||(!i&&o?Ce=E6e(n,[0,0]):Ce=r.fixedPosition);var Ee=[0,0];o||(Ee=yEe(n,ge,U,ne,Ce,!u&&c,r)),l&&(!l[0]&&(Ee[0]=0),!l[1]&&(Ee[1]=0));function Ae(){var Ve;L&&(Ve=ce(L([ge,U]),2),ge=Ve[0],U=Ve[1]),ge=Ft(ge,q),U=Ft(U,q)}if(ae){fe[0]&&fe[1]&&Ee[0]&&Ee[1]&&(Ne(Ee[0])>Ne(Ee[1])?Ee[1]=0:Ee[0]=0);var De=!Ee[0]&&!Ee[1];De&&Ae(),fe[0]&&!fe[1]||Ee[0]&&!Ee[1]||De&&M?(ge+=Ee[0],U=ge/k):(!fe[0]&&fe[1]||!Ee[0]&&Ee[1]||De&&!M)&&(U+=Ee[1],ge=U*k)}else ge+=Ee[0],U+=Ee[1],ge=Math.max(0,ge),U=Math.max(0,U);t=ce(fq([ge,U],_,y,ae?k:!1),2),ge=t[0],U=t[1],Ae(),ae&&(f||re)&&(M?U=ge/k:ge=U*k),ie=ge-S,G=U-E;var nt=[ie-b,G-w];r.prevWidth=ie,r.prevHeight=G;var ue=x6e(n,ge,U,Ce,m,r);if(!(!te&&nt.every(function(Ve){return!Ve})&&ue.every(function(Ve){return!Ve}))){var Oe=Hi.drag(n,Jg(e,n.state,ue,!!o,!1,"draggable")),Ue=Oe.transform,_e=g+ie,it=v+G,At=zt(n,e,se({width:_e,height:it,offsetWidth:Math.round(ge),offsetHeight:Math.round(U),startRatio:k,boundingWidth:ge,boundingHeight:U,direction:ne,dist:[ie,G],delta:nt,isPinch:!!o,drag:Oe},DU({style:{width:"".concat(_e,"px"),height:"".concat(it,"px")},transform:Ue},Oe,e)));return!d&&dt(n,"onResize",At),At}},dragControlAfter:function(n,e){var t=e.datas,r=t.isResize,i=t.startOffsetWidth,o=t.startOffsetHeight,s=t.prevWidth,a=t.prevHeight;if(!(!r||n.props.checkResizableError===!1)){var l=n.state,u=l.width,c=l.height,f=u-(i+s),d=c-(o+a),h=Ne(f)>3,p=Ne(d)>3;if(h&&(t.startWidth+=f,t.startOffsetWidth+=f,t.prevWidth+=f),p&&(t.startHeight+=d,t.startOffsetHeight+=d,t.prevHeight+=d),h||p)return this.dragControl(n,e)}},dragControlEnd:function(n,e){var t=e.datas,r=e.parentEvent;if(t.isResize){t.isResize=!1;var i=Mo(n,e,{});return!r&&dt(n,"onResizeEnd",i),i}},dragGroupControlCondition:q7,dragGroupControlStart:function(n,e){var t=e.datas,r=this.dragControlStart(n,se(se({},e),{isGroup:!0}));if(!r)return!1;var i=Ls(n,"resizable",e),o=t.startOffsetWidth,s=t.startOffsetHeight;function a(){var h=t.minSize;i.forEach(function(p){var m=p.datas,g=m.minSize,v=m.startOffsetWidth,b=m.startOffsetHeight,w=o*(v?g[0]/v:0),_=s*(b?g[1]/b:0);h[0]=Math.max(h[0],w),h[1]=Math.max(h[1],_)})}function l(){var h=t.maxSize;i.forEach(function(p){var m=p.datas,g=m.maxSize,v=m.startOffsetWidth,b=m.startOffsetHeight,w=o*(v?g[0]/v:0),_=s*(b?g[1]/b:0);h[0]=Math.min(h[0],w),h[1]=Math.min(h[1],_)})}var u=Dl(n,this,"dragControlStart",e,function(h,p){return Ry(n,h,t,p)});a(),l();var c=function(h){r.setFixedDirection(h),u.forEach(function(p,m){p.setFixedDirection(h),Ry(n,p.moveable,t,i[m])})};t.setFixedDirection=c;var f=se(se({},r),{targets:n.props.targets,events:u.map(function(h){return se(se({},h),{setMin:function(p){h.setMin(p),a()},setMax:function(p){h.setMax(p),l()}})}),setFixedDirection:c,setMin:function(h){r.setMin(h),a()},setMax:function(h){r.setMax(h),l()}}),d=dt(n,"onResizeGroupStart",f);return t.isResize=d!==!1,t.isResize?r:!1},dragGroupControl:function(n,e){var t=e.datas;if(t.isResize){var r=Rf(n.props,"resizable");tw(n,"onBeforeResize",function(h){dt(n,"onBeforeResizeGroup",zt(n,e,se(se({},h),{targets:r.targets}),!0))});var i=this.dragControl(n,se(se({},e),{isGroup:!0}));if(i){var o=i.boundingWidth,s=i.boundingHeight,a=i.dist,l=r.keepRatio,u=[o/(o-a[0]),s/(s-a[1])],c=t.fixedPosition,f=Dl(n,this,"dragControl",e,function(h,p){var m=ce(Ni(Ug(n.rotation/180*Math.PI,3),[p.datas.originalX*u[0],p.datas.originalY*u[1],1],3),2),g=m[0],v=m[1];return se(se({},p),{parentDist:null,parentScale:u,dragClient:fn(c,[g,v]),parentKeepRatio:l})}),d=se({targets:r.targets,events:f},i);return dt(n,"onResizeGroup",d),d}}},dragGroupControlEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(n,e);var i=Dl(n,this,"dragControlEnd",e),o=Mo(n,e,{targets:n.props.targets,events:i});return dt(n,"onResizeGroupEnd",o),t}},request:function(n){var e={},t=0,r=0,i=!1,o=n.getRect();return{isControl:!0,requestStart:function(s){var a;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(a=s==null?void 0:s.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?t=s.offsetWidth-o.offsetWidth:"deltaWidth"in s&&(t+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-o.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[t,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(n){n.state.gestos.resizable=null}};function Gk(n,e,t,r,i){var o=n.props.groupable,s=n.state,a=s.is3d?4:3,l=e.origin,u=ur(n.state.rootMatrix,Ct([l[0],l[1]],o?[0,0]:[s.left,s.top]),a),c=fn([i.left,i.top],u);e.startAbsoluteOrigin=c,e.prevDeg=Or(c,[t,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Ol(c,[t,r])}function ab(n,e,t){var r=t.defaultDeg,i=t.prevDeg,o=i%360,s=Math.floor(i/360);o<0&&(o+=360),o>n&&o>270&&n<90?++s:o<n&&o<90&&n>270&&--s;var a=e*(s*360+n-r);return t.prevDeg=r+a,a}function Kk(n,e,t,r){return ab(Or(r.startAbsoluteOrigin,[n,e])/Math.PI*180,t,r)}function Jk(n,e,t,r,i,o){var s=n.props.throttleRotate,a=s===void 0?0:s,l=t.prevSnapDeg,u=0,c=!1;if(o){var f=bEe(n,e,r,i+r);c=f.isSnap,u=i+f.dist}c||(u=Ft(i+r,a));var d=u-i;return t.prevSnapDeg=d,[d-l,d,u]}function mU(n,e,t){var r=ce(e,4),i=r[0],o=r[1],s=r[2],a=r[3];if(n==="none")return[];if(Fr(n))return n.map(function(g){return mU(g,[i,o,s,a],t)[0]});var l=ce((n||"top").split("-"),2),u=l[0],c=l[1],f=[i,o];u==="left"?f=[s,i]:u==="right"?f=[o,a]:u==="bottom"&&(f=[a,s]);var d=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],h=AU(f,t);if(c){var p=c==="top"||c==="left",m=u==="bottom"||u==="left";d=f[p&&!m||!p&&m?0:1]}return[[d,h]]}function c4(n,e){if(e.isRequest)return e.requestAble==="rotatable";var t=e.inputEvent.target;if(qr(t,kt("rotation-control"))||n.props.rotateAroundControls&&qr(t,kt("around-control"))||qr(t,kt("control"))&&qr(t,kt("rotatable")))return!0;var r=n.props.rotationTarget;return r?jE(r,!0).some(function(i){return i?t===i||t.contains(i):!1}):!1}var oEe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,sEe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[oEe],viewClassName:function(n){return n.isDragging("rotatable")?kt("view-rotation-dragging"):""},render:function(n,e){var t=Rf(n.props,"rotatable"),r=t.rotatable,i=t.rotationPosition,o=t.zoom,s=t.renderDirections,a=t.rotateAroundControls,l=t.resolveAblesWithRotatable,u=n.getState(),c=u.renderPoses,f=u.direction;if(!r)return null;var d=mU(i,c,f),h=[];if(d.forEach(function(v,b){var w=ce(v,2),_=w[0],y=w[1];h.push(e.createElement("div",{key:"rotation".concat(b),className:kt("rotation"),style:{transform:"translate(-50%) translate(".concat(_[0],"px, ").concat(_[1],"px) rotate(").concat(y,"rad)")}},e.createElement("div",{className:kt("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:kt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),s){var p=Wl(l||{}),m={};p.forEach(function(v){l[v].forEach(function(b){m[b]=v})});var g=[];Fr(s)&&(g=s.map(function(v){var b=m[v];return{data:b?{resolve:b}:{},classNames:b?["move"]:[],dir:v}})),h.push.apply(h,He([],ce(nU(n,"rotatable",g,e)),!1))}return a&&h.push.apply(h,He([],ce(aU(n,e)),!1)),h},dragControlCondition:c4,dragControlStart:function(n,e){var t,r,i=e.datas,o=e.clientX,s=e.clientY,a=e.parentRotate,l=e.parentFlag,u=e.isPinch,c=e.isRequest,f=n.state,d=f.target,h=f.left,p=f.top,m=f.direction,g=f.beforeDirection,v=f.targetTransform,b=f.moveableClientRect,w=f.offsetMatrix,_=f.targetMatrix,y=f.allMatrix,k=f.width,S=f.height;if(!c&&!d)return!1;var E=n.getRect();i.rect=E,i.transform=v,i.left=h,i.top=p;var M=function(fe){var ie=pU(n.state,fe);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,q&&q.setFixedPosition(fe)},R=function(fe){var ie=iEe(n.state,fe);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,q&&q.setFixedDirection(fe)},O=o,I=s;if(c||u||l){var P=a||0;i.beforeInfo={origin:E.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},i.afterInfo=se(se({},i.beforeInfo),{origin:E.origin}),i.absoluteInfo=se(se({},i.beforeInfo),{origin:E.origin,startValue:P})}else{var A=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(A){var N=A.getAttribute("data-direction")||"",F=d6e[N];if(F){i.isControl=!0,i.isAroundControl=qr(A,kt("around-control")),i.controlDirection=F;var V=A.getAttribute("data-resolve");V&&(i.resolveAble=V);var W=IEe(f.rootMatrix,f.renderPoses,b);t=ce(Ur(W,F),2),O=t[0],I=t[1]}}i.beforeInfo={origin:E.beforeOrigin},i.afterInfo={origin:E.origin},i.absoluteInfo={origin:E.origin,startValue:E.rotation};var L=M;M=function(fe){var ie=f.is3d?4:3,G=ce(fn(Nq(_,ie),fe),2),ae=G[0],Me=G[1],X=Ni(w,Tf([ae,Me],ie)),ge=Ni(y,Tf([fe[0],fe[1]],ie));L(fe);var U=f.posDelta;i.beforeInfo.origin=Ct(X,U),i.afterInfo.origin=Ct(ge,U),i.absoluteInfo.origin=Ct(ge,U),Gk(n,i.beforeInfo,O,I,b),Gk(n,i.afterInfo,O,I,b),Gk(n,i.absoluteInfo,O,I,b)},R=function(fe){var ie=Ur([[0,0],[k,0],[0,S],[k,S]],fe);M(ie)}}i.startClientX=O,i.startClientY=I,i.direction=m,i.beforeDirection=g,i.startValue=0,i.datas={},X_(n,e,"rotate");var z=!1,q=!1;if(i.isControl&&i.resolveAble){var te=i.resolveAble;te==="resizable"&&(q=u4.dragControlStart(n,se(se({},new qh("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}q||(z=Hi.dragStart(n,new qh().dragStart([0,0],e))),M(NEe(n));var re=zt(n,e,se(se({set:function(fe){i.startValue=fe*Math.PI/180},setFixedDirection:R,setFixedPosition:M},Y_(n,e)),{dragStart:z,resizeStart:q})),ne=dt(n,"onRotateStart",re);return i.isRotate=ne!==!1,f.snapRenderInfo={request:e.isRequest},i.isRotate?re:!1},dragControl:function(n,e){var t,r,i,o=e.datas,s=e.clientDistX,a=e.clientDistY,l=e.parentRotate,u=e.parentFlag,c=e.isPinch,f=e.groupDelta,d=e.resolveMatrix,h=o.beforeDirection,p=o.beforeInfo,m=o.afterInfo,g=o.absoluteInfo,v=o.isRotate,b=o.startValue,w=o.rect,_=o.startClientX,y=o.startClientY;if(v){K_(n,e,"rotate");var k=h6e(e),S=h*k,E=n.props.parentMoveable,M=0,R,O,I=0,P,A,N=0,F,V,W=180/Math.PI*b,L=g.startValue,z=!1,q=_+s,te=y+a;if(!u&&"parentDist"in e){var re=e.parentDist;R=re,P=re,F=re}else c||u?(R=ab(l,h,p),P=ab(l,S,m),F=ab(l,S,g)):(R=Kk(q,te,h,p),P=Kk(q,te,S,m),F=Kk(q,te,S,g),z=!0);if(O=W+R,A=W+P,V=L+F,dt(n,"onBeforeRotate",zt(n,e,{beforeRotation:O,rotation:A,absoluteRotation:V,setRotation:function(Ce){P=Ce-W,R=P,F=P}},!0)),t=ce(Jk(n,w,p,R,W,z),3),M=t[0],R=t[1],O=t[2],r=ce(Jk(n,w,m,P,W,z),3),I=r[0],P=r[1],A=r[2],i=ce(Jk(n,w,g,F,L,z),3),N=i[0],F=i[1],V=i[2],!(!N&&!I&&!M&&!E&&!d)){var ne=J_(o,"rotate(".concat(A,"deg)"),"rotate(".concat(P,"deg)"));d&&(o.fixedPosition=ME(n,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var fe=S6e(n,P,o),ie=Ct(fn(f||[0,0],fe),o.prevInverseDist||[0,0]);o.prevInverseDist=fe,o.requestValue=null;var G=$q(n,ne,ie,c,e),ae=G,Me=Ol([q,te],g.startAbsoluteOrigin)-g.startDist,X=void 0;if(o.resolveAble==="resizable"){var ge=u4.dragControl(n,se(se({},Jg(e,n.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:Me}));ge&&(X=ge,ae=DU(ae,ge,e))}var U=zt(n,e,se(se({delta:I,dist:P,rotate:A,rotation:A,beforeDist:R,beforeDelta:M,beforeRotate:O,beforeRotation:O,absoluteDist:F,absoluteDelta:N,absoluteRotate:V,absoluteRotation:V,isPinch:!!c,resize:X},G),ae));return dt(n,"onRotate",U),U}}},dragControlEnd:function(n,e){var t=e.datas;if(t.isRotate){t.isRotate=!1;var r=Mo(n,e,{});return dt(n,"onRotateEnd",r),r}},dragGroupControlCondition:c4,dragGroupControlStart:function(n,e){var t=e.datas,r=n.state,i=r.left,o=r.top,s=r.beforeOrigin,a=this.dragControlStart(n,e);if(!a)return!1;a.set(t.beforeDirection*n.rotation);var l=Dl(n,this,"dragControlStart",e,function(f,d){var h=f.state,p=h.left,m=h.top,g=h.beforeOrigin,v=fn(Ct([p,m],[i,o]),Ct(g,s));return d.datas.startGroupClient=v,d.datas.groupClient=v,se(se({},d),{parentRotate:0})}),u=se(se({},a),{targets:n.props.targets,events:l}),c=dt(n,"onRotateGroupStart",u);return t.isRotate=c!==!1,t.isRotate?a:!1},dragGroupControl:function(n,e){var t=e.datas;if(t.isRotate){tw(n,"onBeforeRotate",function(u){dt(n,"onBeforeRotateGroup",zt(n,e,se(se({},u),{targets:n.props.targets}),!0))});var r=this.dragControl(n,e);if(r){var i=t.beforeDirection,o=r.beforeDist,s=o/180*Math.PI,a=Dl(n,this,"dragControl",e,function(u,c){var f=c.datas.startGroupClient,d=ce(c.datas.groupClient,2),h=d[0],p=d[1],m=ce(qg(f,s*i),2),g=m[0],v=m[1],b=[g-h,v-p];return c.datas.groupClient=[g,v],se(se({},c),{parentRotate:o,groupDelta:b})});n.rotation=i*r.beforeRotation;var l=se({targets:n.props.targets,events:a,set:function(u){n.rotation=u},setGroupRotation:function(u){n.rotation=u}},r);return dt(n,"onRotateGroup",l),l}}},dragGroupControlEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(n,e);var i=Dl(n,this,"dragControlEnd",e),o=Mo(n,e,{targets:n.props.targets,events:i});return dt(n,"onRotateGroupEnd",o),t}},request:function(n){var e={},t=0,r=n.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?t+=i.deltaRotate:"rotate"in i&&(t=i.rotate-r),{datas:e,parentDist:t}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function aEe(n,e){var t,r=n.direction,i=n.classNames,o=n.size,s=n.pos,a=n.zoom,l=n.key,u=r==="horizontal",c=u?"Y":"X";return e.createElement("div",{key:l,className:i.join(" "),style:(t={},t[u?"width":"height"]="".concat(o),t.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(a,")"),t)})}function IE(n,e){return aEe(se(se({},n),{classNames:He([kt("line","guideline",n.direction)],ce(n.classNames),!1).filter(function(t){return t}),size:n.size||"".concat(n.sizeValue,"px"),pos:n.pos||n.posValue.map(function(t){return"".concat(Ft(t,.1),"px")})}),e)}function U7(n,e,t,r,i,o,s,a){var l=n.props.zoom;return t.map(function(u,c){var f=u.type,d=u.pos,h=[0,0];return h[s]=r,h[s?0:1]=-i+d,IE({key:"".concat(e,"TargetGuideline").concat(c),classNames:[kt("target","bold",f)],posValue:h,sizeValue:o,zoom:l,direction:e},a)})}function G7(n,e,t,r,i,o){var s=n.props,a=s.zoom,l=s.isDisplayInnerSnapDigit,u=e==="horizontal"?rc:ic,c=i[u.start],f=i[u.end];return t.filter(function(d){var h=d.hide,p=d.elementRect;if(h)return!1;if(l&&p){var m=p.rect;if(m[u.start]<=c&&f<=m[u.end])return!1}return!0}).map(function(d,h){var p=d.pos,m=d.size,g=d.element,v=d.className,b=[-r[0]+p[0],-r[1]+p[1]];return IE({key:"".concat(e,"-default-guideline-").concat(h),classNames:g?[kt("bold"),v]:[kt("normal"),v],direction:e,posValue:b,sizeValue:m,zoom:a},o)})}function d0(n,e,t,r,i,o,s,a){var l,u=n.props,c=u.snapDigit,f=c===void 0?0:c,d=u.isDisplaySnapDigit,h=d===void 0?!0:d,p=u.snapDistFormat,m=p===void 0?function(y,k){return y}:p,g=u.zoom,v=e==="horizontal"?"X":"Y",b=e==="vertical"?"height":"width",w=Math.abs(i),_=h?parseFloat(w.toFixed(f)):0;return a.createElement("div",{key:"".concat(e,"-").concat(t,"-guideline-").concat(r),className:kt("guideline-group",e),style:(l={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},l[b]="".concat(w,"px"),l)},IE({direction:e,classNames:[kt(t),s],size:"100%",posValue:[0,0],sizeValue:w,zoom:g},a),a.createElement("div",{className:kt("size-value","gap"),style:{transform:"translate".concat(v,"(-50%) scale(").concat(g,")")}},_>0?m(_,e):""))}function lEe(n,e,t,r){var i=n==="vertical"?0:1,o=n==="vertical"?1:0,s=i?rc:ic,a=t[s.start],l=t[s.end];return RU(e,function(u){return u.pos[i]}).map(function(u){var c=[],f=[],d=[];return u.forEach(function(h){var p,m,g=h.element,v=h.elementRect.rect;if(v[s.end]<a)c.push(h);else if(l<v[s.start])f.push(h);else if(v[s.start]<=a&&l<=v[s.end]&&r){var b=h.pos,w={element:g,rect:se(se({},v),(p={},p[s.end]=v[s.start],p))},_={element:g,rect:se(se({},v),(m={},m[s.start]=v[s.end],m))},y=[0,0],k=[0,0];y[i]=b[i],y[o]=b[o],k[i]=b[i],k[o]=b[o]+h.size,c.push({type:n,pos:y,size:0,elementRect:w,direction:"",elementDirection:"end"}),f.push({type:n,pos:k,size:0,elementRect:_,direction:"",elementDirection:"start"})}}),c.sort(function(h,p){return p.pos[o]-h.pos[o]}),f.sort(function(h,p){return h.pos[o]-p.pos[o]}),{total:u,start:c,end:f,inner:d}})}function uEe(n,e,t,r,i){var o=n.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(a){var l=e.filter(function(g){return g.type===a}),u=a==="vertical"?1:0,c=u?0:1,f=lEe(a,l,r,o),d=u?ic:rc,h=u?rc:ic,p=r[d.start],m=r[d.end];f.forEach(function(g){var v=g.total,b=g.start,w=g.end,_=g.inner,y=t[c]+v[0].pos[c]-r[h.start],k=r;b.forEach(function(S){var E=S.elementRect.rect,M=k[d.start]-E[d.end];if(M>0){var R=[0,0];R[u]=t[u]+k[d.start]-p-M,R[c]=y,s.push(d0(n,a,"dashed",s.length,M,R,S.className,i))}k=E}),k=r,w.forEach(function(S){var E=S.elementRect.rect,M=E[d.start]-k[d.end];if(M>0){var R=[0,0];R[u]=t[u]+k[d.end]-p,R[c]=y,s.push(d0(n,a,"dashed",s.length,M,R,S.className,i))}k=E}),_.forEach(function(S){var E=S.elementRect.rect,M=p-E[d.start],R=E[d.end]-m,O=[0,0],I=[0,0];O[u]=t[u]-M,O[c]=y,I[u]=t[u]+m-p,I[c]=y,s.push(d0(n,a,"dashed",s.length,M,O,S.className,i)),s.push(d0(n,a,"dashed",s.length,R,I,S.className,i))})})}),s}function cEe(n,e,t,r,i){var o=[];return["horizontal","vertical"].forEach(function(s){var a=e.filter(function(g){return g.type===s}).slice(0,1),l=s==="vertical"?0:1,u=l?0:1,c=l?ic:rc,f=l?rc:ic,d=r[c.start],h=r[c.end],p=r[f.start],m=r[f.end];a.forEach(function(g){var v=g.gap,b=g.gapRects,w=Math.max.apply(Math,He([p],ce(b.map(function(k){var S=k.rect;return S[f.start]})),!1)),_=Math.min.apply(Math,He([m],ce(b.map(function(k){var S=k.rect;return S[f.end]})),!1)),y=(w+_)/2;w===_||y===(p+m)/2||b.forEach(function(k){var S=k.rect,E=k.className,M=[t[0],t[1]];if(S[c.end]<d)M[l]+=S[c.end]-d;else if(h<S[c.start])M[l]+=S[c.start]-d-v;else return;M[u]+=y-p,o.push(d0(n,l?"vertical":"horizontal","gap",o.length,v,M,E,i))})})}),o}function f4(n){var e=n.state,t=e.containerClientRect,r=e.hasFixed,i=t.overflow,o=t.scrollHeight,s=t.scrollWidth,a=t.clientHeight,l=t.clientWidth,u=t.clientLeft,c=t.clientTop,f=n.props,d=f.snapGap,h=d===void 0?!0:d,p=f.verticalGuidelines,m=f.horizontalGuidelines,g=f.snapThreshold,v=g===void 0?5:g,b=f.snapGridWidth,w=b===void 0?0:b,_=f.snapGridHeight,y=_===void 0?0:_,k=f.maxSnapElementGuidelineDistance,S=k===void 0?1/0:k,E=f.isDisplayGridGuidelines,M=is(fs(n.state)),R=M.top,O=M.left,I=M.bottom,P=M.right,A={top:R,left:O,bottom:I,right:P,center:(O+P)/2,middle:(R+I)/2},N=hEe(n),F=He([],ce(N),!1);h&&F.push.apply(F,He([],ce(fEe(n,A,v)),!1));var V=se({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(F.push.apply(F,He([],ce(dEe(w,y,i?s:l,i?o:a,u,c,V,E)),!1)),r){var W=t.left,L=t.top;V.left+=W,V.top+=L,V.right+=W,V.bottom+=L}return F.push.apply(F,He([],ce(vU(m||!1,p||!1,i?s:l,i?o:a,u,c,V)),!1)),F=F.filter(function(z){var q=z.element,te=z.elementRect,re=z.type;if(!q||!te)return!0;var ne=te.rect;return gU(A,ne,re,S)}),F}function fEe(n,e,t){var r=n.props,i=r.maxSnapElementGuidelineDistance,o=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,a=s===void 0?1/0:s,l=n.state.elementRects,u=[];return[["vertical",rc,ic],["horizontal",ic,rc]].forEach(function(c){var f=ce(c,3),d=f[0],h=f[1],p=f[2],m=e[h.start],g=e[h.end],v=e[h.center],b=e[p.start],w=e[p.end];function _(S){var E=S.rect;return E[h.end]<m+t?m-E[h.end]:g-t<E[h.start]?E[h.start]-g:-1}var y=l.filter(function(S){var E=S.rect;return E[p.start]>w||E[p.end]<b?!1:_(S)>0}).sort(function(S,E){return _(S)-_(E)}),k=[];y.forEach(function(S){y.forEach(function(E){if(S!==E){var M=S.rect,R=E.rect,O=M[p.start],I=M[p.end],P=R[p.start],A=R[p.end];O>A||P>I||k.push([S,E])}})}),k.forEach(function(S){var E=ce(S,2),M=E[0],R=E[1],O=M.rect,I=R.rect,P=O[h.start],A=O[h.end],N=I[h.start],F=I[h.end],V=0,W=0,L=!1,z=!1,q=!1;if(A<=m&&g<=N){if(z=!0,V=(N-A-(g-m))/2,W=A+V+(g-m)/2,Ne(W-v)>t)return}else if(A<N&&F<m+t){if(L=!0,V=N-A,W=F+V,Ne(W-m)>t)return}else if(A<N&&g-t<P){if(q=!0,V=N-A,W=P-V,Ne(W-g)>t)return}else return;V&&gU(e,I,d,o)&&(V>a||u.push({type:d,pos:d==="vertical"?[W,0]:[0,W],element:R.element,size:0,className:R.className,isStart:L,isCenter:z,isEnd:q,gap:V,hide:!0,gapRects:[M,R],direction:"",elementDirection:""}))})}),u}function dEe(n,e,t,r,i,o,s,a){i===void 0&&(i=0),o===void 0&&(o=0);var l=[],u=s.left,c=s.top;if(e)for(var f=0;f<=r;f+=e)l.push({type:"horizontal",pos:[u,Ft(f-o+c,.1)],className:kt("grid-guideline"),size:t,hide:!a,direction:""});if(n)for(var f=0;f<=t;f+=n)l.push({type:"vertical",pos:[Ft(f-i+u,.1),c],className:kt("grid-guideline"),size:r,hide:!a,direction:""});return l}function gU(n,e,t,r){return t==="horizontal"?Ne(n.right-e.left)<=r||Ne(n.left-e.right)<=r||n.left<=e.right&&e.left<=n.right:t==="vertical"?Ne(n.bottom-e.top)<=r||Ne(n.top-e.bottom)<=r||n.top<=e.bottom&&e.top<=n.bottom:!0}function hEe(n){var e=n.state,t=n.props.elementGuidelines,r=t===void 0?[]:t;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(d){return!d.refresh}),o=r.map(function(d){return Ks(d)&&"element"in d?se(se({},d),{element:Oa(d.element,!0)}):{element:Oa(d,!0)}}).filter(function(d){return d.element}),s=Sxe(i.map(function(d){return d.element}),o.map(function(d){return d.element})),a=s.maintained,l=s.added,u=[];a.forEach(function(d){var h=ce(d,2),p=h[0],m=h[1];u[m]=i[p]}),pEe(n,l.map(function(d){return o[d]})).map(function(d,h){u[l[h]]=d}),e.elementRects=u;var c=OE(n.props.elementSnapDirections),f=[];return u.forEach(function(d){var h=d.element,p=d.top,m=p===void 0?c.top:p,g=d.left,v=g===void 0?c.left:g,b=d.right,w=b===void 0?c.right:b,_=d.bottom,y=_===void 0?c.bottom:_,k=d.center,S=k===void 0?c.center:k,E=d.middle,M=E===void 0?c.middle:E,R=d.className,O=d.rect,I=DE({top:m,right:w,left:v,bottom:y,center:S,middle:M},O),P=I.horizontal,A=I.vertical,N=I.horizontalNames,F=I.verticalNames,V=O.top,W=O.left,L=O.right-W,z=O.bottom-V,q=[L,z];A.forEach(function(te,re){f.push({type:"vertical",element:h,pos:[Ft(te,.1),V],size:z,sizes:q,className:R,elementRect:d,elementDirection:L7[F[re]]||F[re],direction:""})}),P.forEach(function(te,re){f.push({type:"horizontal",element:h,pos:[W,Ft(te,.1)],size:L,sizes:q,className:R,elementRect:d,elementDirection:L7[N[re]]||N[re],direction:""})})}),f}function K7(n,e){return n?n.map(function(t){var r=Ks(t)?t:{pos:t},i=r.pos;return Vh(i)?r:se(se({},r),{pos:Nn(i,e)})}):[]}function vU(n,e,t,r,i,o,s){i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var a=[],l=s.left,u=s.top,c=s.bottom,f=s.right,d=t+f-l,h=r+c-u;return K7(n,h).forEach(function(p){a.push({type:"horizontal",pos:[l,Ft(p.pos-o+u,.1)],size:d,className:p.className,direction:""})}),K7(e,d).forEach(function(p){a.push({type:"vertical",pos:[Ft(p.pos-i+l,.1),u],size:h,className:p.className,direction:""})}),a}function pEe(n,e){if(!e.length)return[];var t=n.props.groupable,r=n.state,i=r.containerClientRect,o=r.rootMatrix,s=r.is3d,a=r.offsetDelta,l=s?4:3,u=ce(z6e(o,i,l),2),c=u[0],f=u[1],d=t?0:a[0],h=t?0:a[1];return e.map(function(p){var m=p.element.getBoundingClientRect(),g=m.left-c-d,v=m.top-f-h,b=v+m.height,w=g+m.width,_=ce(Kh(o,[g,v],l),2),y=_[0],k=_[1],S=ce(Kh(o,[w,b],l),2),E=S[0],M=S[1];return se(se({},p),{rect:{left:y,right:E,top:k,bottom:M,center:(y+E)/2,middle:(k+M)/2}})})}function gv(n){var e=n.state,t=e.container,r=n.props.snapContainer||t;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(t!==r){var s=Oa(r,!0);if(s){var a=L0(s),l=Z7(e,[a.left-i.left,a.top-i.top]),u=Z7(e,[a.right-i.right,a.bottom-i.bottom]);o.left=Ft(l[0],1e-5),o.top=Ft(l[1],1e-5),o.right=Ft(u[0],1e-5),o.bottom=Ft(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=o,e.guidelines=f4(n),e.enableSnap=!0,!0}function bU(n,e,t,r,i,o){var s=Kf(n,e,t,o?4:3),a=Ur(s,r);return BE(s,Ct(i,a))}function J7(n){return n?n/Ne(n):0}function mEe(n,e,t,r,i,o){var s=o.fixedDirection,a=W6e(t,s,r),l=PE(n,e,t,r),u=He(He([],ce(tEe(n,e,a,r,i,o)),!1),ce(dU(n,l,o)),!1),c=Py(u,0),f=Py(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function gEe(n,e,t,r,i,o,s,a,l){var u=Ur(e,s),c=$_(n,a,{vertical:[u[0]],horizontal:[u[1]]}),f=c.horizontal.offset,d=c.vertical.offset;if(Ft(d,i4)||Ft(f,i4)){var h=ce(Ya({datas:l,distX:-d,distY:-f}),2),p=h[0],m=h[1],g=Math.min(i||1/0,t+s[0]*p),v=Math.min(o||1/0,r+s[1]*m);return[g-t,v-r]}return[0,0]}function yU(n,e,t,r,i,o,s,a){for(var l=fs(n.state),u=n.props.keepRatio,c=0,f=0,d=0;d<2;++d){var h=e(c,f),p=mEe(n,h,i,u,s,a),m=p.width,g=p.height,v=m.isBound,b=g.isBound,w=m.offset,_=g.offset;if(d===1&&(v||(w=0),b||(_=0)),d===0&&s&&!v&&!b)return[0,0];if(u){var y=Ne(w)*(t?1/t:1),k=Ne(_)*(r?1/r:1),S=v&&b?y<k:b||!v&&y<k;S?w=t*_/r:_=r*w/t}c+=w,f+=_}if(!u&&i[0]&&i[1]){var E=rEe(n,l,i,o,a),M=E.maxWidth,R=E.maxHeight,O=ce(gEe(n,e(c,f).map(function(A){return A.map(function(N){return Ft(N,i4)})}),t+c,r+f,M,R,i,s,a),2),w=O[0],_=O[1];c+=w,f+=_}return[c,f]}function N0(n){return n<0&&(n=n%360+360),n%=360,n}function vEe(n,e){e=N0(e);var t=Math.floor(n/360),r=t*360+360-e,i=t*360+e;return Ne(n-r)<Ne(n-i)?r:i}function Yk(n,e){n=N0(n),e=N0(e);var t=N0(n-e);return Math.min(t,360-t)}function bEe(n,e,t,r){var i,o=n.props,s=(i=o[_U])!==null&&i!==void 0?i:5,a=o[wU];if(yp(n,"rotatable")){var l=e.pos1,u=e.pos2,c=e.pos3,f=e.pos4,d=e.origin,h=t*Math.PI/180,p=[l,u,c,f].map(function(_){return Ct(_,d)}),m=p.map(function(_){return qg(_,h)}),g=He(He([],ce(N6e(n,p,m,d,t)),!1),ce(Y6e(n,p,m,d,t)),!1);g.sort(function(_,y){return Ne(_-t)-Ne(y-t)});var v=g.length>0;if(v)return{isSnap:v,dist:v?g[0]:t}}if(a!=null&&a.length&&s){var b=a.slice().sort(function(_,y){return Yk(_,r)-Yk(y,r)}),w=b[0];if(Yk(w,r)<=s)return{isSnap:!0,dist:t+vEe(r,w)-r}}return{isSnap:!1,dist:t}}function yEe(n,e,t,r,i,o,s){if(!yp(n,"resizable"))return[0,0];var a=s.fixedDirection,l=s.nextAllMatrix,u=n.state,c=u.allMatrix,f=u.is3d;return yU(n,function(d,h){return bU(l||c,e+d,t+h,a,i,f)},e,t,r,i,o,s)}function _Ee(n,e,t,r,i){if(!yp(n,"scalable"))return[0,0];var o=i.startOffsetWidth,s=i.startOffsetHeight,a=i.fixedPosition,l=i.fixedDirection,u=i.is3d,c=yU(n,function(f,d){return bU(_6e(i,fn(e,[f/o,d/s])),o,s,l,a,u)},o,s,t,a,r,i);return[c[0]/o,c[1]/s]}function wEe(n,e){e.absolutePoses=fs(n.state)}function Y7(n){var e=[];return n.forEach(function(t){t.guidelineInfos.forEach(function(r){var i=r.guideline;co(e,function(o){return o.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:t}))})}),e.map(function(t){var r=t.guideline,i=t.posInfo;return se(se({},r),{direction:i.direction})})}function X7(n,e,t,r,i,o){var s=TE(Q_(n,o),e,t),a=s.vertical,l=s.horizontal,u=Wd();a.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.left=!0),p.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:p.pos}))}),l.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.top=!0),p.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:p.pos}))});var c=X6e(n),f=c.boundMap,d=c.vertical,h=c.horizontal;return d.forEach(function(p){Vl(r,function(m){var g=m.type,v=m.pos;return g==="bounds"&&v===p})>=0||r.push({type:"bounds",pos:p})}),h.forEach(function(p){Vl(i,function(m){var g=m.type,v=m.pos;return g==="bounds"&&v===p})>=0||i.push({type:"bounds",pos:p})}),{boundMap:u,innerBoundMap:f}}var kEe=zE("",["resizable","scalable"]),_U="snapRotationThreshold",wU="snapRotationDegrees",CEe={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold",_U,wU,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(n,e){var t=n.state,r=t.top,i=t.left,o=t.pos1,s=t.pos2,a=t.pos3,l=t.pos4,u=t.snapRenderInfo,c=n.props.snapRenderThreshold,f=c===void 0?1:c;if(!u||!u.render||!yp(n,""))return Ud(n,"boundMap",Wd(),function(ne){return JSON.stringify(ne)}),Ud(n,"innerBoundMap",Wd(),function(ne){return JSON.stringify(ne)}),[];t.guidelines=f4(n);var d=Math.min(o[0],s[0],a[0],l[0]),h=Math.min(o[1],s[1],a[1],l[1]),p=u.externalPoses||[],m=fs(n.state),g=[],v=[],b=[],w=[],_=[],y=is(m),k=y.width,S=y.height,E=y.top,M=y.left,R=y.bottom,O=y.right,I={left:M,right:O,top:E,bottom:R,center:(M+O)/2,middle:(E+R)/2},P=p.length>0,A=P?is(p):{};if(!u.request){if(u.direction&&_.push(V6e(n,m,u.direction,f)),u.snap){var N=is(m);u.center&&(N.middle=(N.top+N.bottom)/2,N.center=(N.left+N.right)/2),_.push(F7(n,N,f))}P&&(u.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),_.push(F7(n,A,f))),_.forEach(function(ne){var fe=ne.vertical.posInfos,ie=ne.horizontal.posInfos;g.push.apply(g,He([],ce(fe.filter(function(G){var ae=G.guidelineInfos;return ae.some(function(Me){var X=Me.guideline;return!X.hide})}).map(function(G){return{type:"snap",pos:G.pos}})),!1)),v.push.apply(v,He([],ce(ie.filter(function(G){var ae=G.guidelineInfos;return ae.some(function(Me){var X=Me.guideline;return!X.hide})}).map(function(G){return{type:"snap",pos:G.pos}})),!1)),b.push.apply(b,He([],ce(Y7(fe)),!1)),w.push.apply(w,He([],ce(Y7(ie)),!1))})}var F=X7(n,[M,O],[E,R],g,v),V=F.boundMap,W=F.innerBoundMap;P&&X7(n,[A.left,A.right],[A.top,A.bottom],g,v,u.externalBounds);var L=He(He([],ce(b),!1),ce(w),!1),z=L.filter(function(ne){return ne.element&&!ne.gapRects}),q=L.filter(function(ne){return ne.gapRects}).sort(function(ne,fe){return ne.gap-fe.gap});dt(n,"onSnap",{guidelines:L.filter(function(ne){var fe=ne.element;return!fe}),elements:z,gaps:q},!0);var te=Ud(n,"boundMap",V,function(ne){return JSON.stringify(ne)},Wd()),re=Ud(n,"innerBoundMap",W,function(ne){return JSON.stringify(ne)},Wd());return(V===te||W===re)&&dt(n,"onBound",{bounds:V,innerBounds:W},!0),He(He(He(He(He(He([],ce(uEe(n,z,[d,h],I,e)),!1),ce(cEe(n,q,[d,h],I,e)),!1),ce(G7(n,"horizontal",w,[i,r],I,e)),!1),ce(G7(n,"vertical",b,[i,r],I,e)),!1),ce(U7(n,"horizontal",v,d,r,k,0,e)),!1),ce(U7(n,"vertical",g,h,i,S,1,e)),!1)},dragStart:function(n,e){n.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},gv(n)},drag:function(n){var e=n.state;gv(n)||(e.guidelines=f4(n)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(n){this.unset(n)},dragEnd:function(n){this.unset(n)},dragControlCondition:function(n,e){if(kEe(n,e)||c4(n,e))return!0;if(!e.isRequest&&e.inputEvent)return qr(e.inputEvent.target,kt("snap-control"))},dragControlStart:function(n){n.state.snapRenderInfo=null,gv(n)},dragControl:function(n){this.drag(n)},dragControlEnd:function(n){this.unset(n)},dragGroupStart:function(n,e){this.dragStart(n,e)},dragGroup:function(n){this.drag(n)},dragGroupEnd:function(n){this.unset(n)},dragGroupControlStart:function(n){n.state.snapRenderInfo=null,gv(n)},dragGroupControl:function(n){this.drag(n)},dragGroupControlEnd:function(n){this.unset(n)},unset:function(n){var e=n.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function SEe(n,e){return[n[0]*e[0],n[1]*e[1]]}function kt(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return b4e.apply(void 0,He([xE],ce(n),!1))}function kU(n){n()}function xEe(n){return!n||n==="none"?[1,0,0,1,0,0]:Ks(n)?n:Ym(n)}function B0(n,e,t){return Ty(e,Of(t,e),n,Of(t.map(function(r){return-r}),e))}function EEe(n,e,t){if(e==="%"){var r=NE(n.ownerSVGElement);return r[t?"width":"height"]/100}return 1}function AEe(n){var e=MEe(LE(n,":before"));return e.map(function(t,r){var i=jg(t),o=i.value,s=i.unit;return o*EEe(n,s,r===0)})}function Ny(n){return n?n.split(" "):["0","0"]}function MEe(n){return Ny(n.transformOrigin)}function CU(n){var e=fo(n),t=e("transform");if(t&&t!=="none")return t;if("transform"in n){var r=n.transform,i=r.baseVal;if(!i)return"";var o=i.length;if(!o)return"";for(var s=[],a=function(u){var c=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return c[f]}).join(", "),")"))},l=0;l<o;++l)a(l);return s.join(" ")}return""}function Qm(n,e,t,r,i){var o,s,a=pE(n)||bc(n),l=!1,u,c;if(!n||t)u=n;else{var f=(o=n==null?void 0:n.assignedSlot)===null||o===void 0?void 0:o.parentElement,d=n.parentElement;f?(l=!0,c=d,u=f):u=d}for(var h=!1,p=n===e||u===e,m="relative",g=1,v=parseFloat(i==null?void 0:i("zoom"))||1,b=i==null?void 0:i("position");u&&u!==a;){e===u&&(p=!0);var w=fo(u),_=u.tagName.toLowerCase(),y=CU(u),k=w("willChange"),S=parseFloat(w("zoom"))||1;if(m=w("position"),r&&S!==1){g=S;break}if(!t&&r&&v!==1&&b&&b!=="absolute"||_==="svg"||m!=="static"||y&&y!=="none"||k==="transform")break;var E=(s=n==null?void 0:n.assignedSlot)===null||s===void 0?void 0:s.parentNode,M=u.parentNode;E&&(l=!0,c=M);var R=M;if(R&&R.nodeType===11){u=R.host,h=!0,m=fo(u)("position");break}u=R,m="relative"}return{offsetZoom:g,hasSlot:l,parentSlotElement:c,isCustomElement:h,isStatic:m==="static",isEnd:p||!u||u===a,offsetParent:u||a}}function TEe(n,e){var t,r=n.tagName.toLowerCase(),i=n.offsetLeft,o=n.offsetTop,s=fo(n),a=W_(i),l=!a,u,c;return!l&&r!=="svg"?(u=qq?AEe(n):Ny(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice(),l=!0,t=ce(REe(n,u,n===e&&e.tagName.toLowerCase()==="g"),4),i=t[0],o=t[1],u[0]=t[2],u[1]=t[3]):(u=Ny(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice()),{tagName:r,isSVG:a,hasOffset:l,offset:[i||0,o||0],origin:u,targetOrigin:c}}function SU(n,e){var t=fo(n),r=fo(bc(n)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var o=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return t("position")==="absolute"&&((t("top")!=="auto"||t("bottom")!=="auto")&&(s=0),(t("left")!=="auto"||t("right")!=="auto")&&(o=0)),[o,s]}function d4(n){n.forEach(function(e){var t=e.matrix;t&&(e.matrix=Js(t,3,4))})}function OEe(n){for(var e=n.parentElement,t=!1,r=bc(n);e;){var i=LE(e).transform;if(i&&i!=="none"){t=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:t}}function ew(n,e){return e===void 0&&(e=n.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Bq(n,!e).join(","),")")}function NE(n){var e=n.clientWidth,t=n.clientHeight;if(!n)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:t};var r=n.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||t,clientWidth:e,clientHeight:t}}function DEe(n,e){var t,r=NE(n),i=r.width,o=r.height,s=r.clientWidth,a=r.clientHeight,l=s/i,u=a/o,c=n.preserveAspectRatio.baseVal,f=c.align,d=c.meetOrSlice,h=[0,0],p=[l,u],m=[0,0];if(f!==1){var g=(f-2)%3,v=Math.floor((f-2)/3);h[0]=i*g/2,h[1]=o*v/2;var b=d===2?Math.max(u,l):Math.min(l,u);p[0]=b,p[1]=b,m[0]=(s-i)/2*g,m[1]=(a-o)/2*v}var w=wE(p,e);return t=ce(m,2),w[e*(e-1)]=t[0],w[e*(e-1)+1]=t[1],B0(w,e,h)}function REe(n,e,t){if(!n.getBBox||!t&&n.tagName.toLowerCase()==="g")return[0,0,0,0];var r=fo(n),i=r("transform-box")==="fill-box",o=n.getBBox(),s=NE(n.ownerSVGElement),a=o.x-s.x,l=o.y-s.y,u=i?e[0]:e[0]-a,c=i?e[1]:e[1]-l;return[a,l,u,c]}function ur(n,e,t){return Ni(n,Tf(e,t),t)}function Kf(n,e,t,r){return[[0,0],[e,0],[0,t],[e,t]].map(function(i){return ur(n,i,r)})}function is(n){var e=n.map(function(u){return u[0]}),t=n.map(function(u){return u[1]}),r=Math.min.apply(Math,He([],ce(e),!1)),i=Math.min.apply(Math,He([],ce(t),!1)),o=Math.max.apply(Math,He([],ce(e),!1)),s=Math.max.apply(Math,He([],ce(t),!1)),a=o-r,l=s-i;return{left:r,top:i,right:o,bottom:s,width:a,height:l}}function Q7(n,e,t,r){var i=Kf(n,e,t,r);return is(i)}function PEe(n,e,t,r,i){var o,s=n.target,a=n.origin,l=e.matrix,u=EU(s),c=u.offsetWidth,f=u.offsetHeight,d=t.getBoundingClientRect(),h=[0,0];t===bc(t)&&(h=SU(s,!0));for(var p=s.getBoundingClientRect(),m=p.left-d.left+t.scrollLeft-(t.clientLeft||0)+h[0],g=p.top-d.top+t.scrollTop-(t.clientTop||0)+h[1],v=p.width,b=p.height,w=Ty(r,i,l),_=Q7(w,c,f,r),y=_.left,k=_.top,S=_.width,E=_.height,M=ur(w,a,r),R=Ct(M,[y,k]),O=[m+R[0]*v/S,g+R[1]*b/E],I=[0,0],P=0;++P<10;){var A=Wa(i,r);o=ce(Ct(ur(A,O,r),ur(A,M,r)),2),I[0]=o[0],I[1]=o[1];var N=Ty(r,i,Of(I,r),l),F=Q7(N,c,f,r),V=F.left,W=F.top,L=V-m,z=W-g;if(Ne(L)<2&&Ne(z)<2)break;O[0]-=L,O[1]-=z}return I.map(function(q){return Math.round(q)})}function IEe(n,e,t){var r=n.length===16,i=r?4:3,o=e.map(function(l){return ur(n,l,i)}),s=t.left,a=t.top;return o.map(function(l){return[l[0]+s,l[1]+a]})}function cs(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function xU(n,e){return cs([e[0]-n[0],e[1]-n[1]])}function h0(n,e,t,r){t===void 0&&(t=1),r===void 0&&(r=Or(n,e));var i=xU(n,e);return{transform:"translateY(-50%) translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(r,"rad) scaleY(").concat(t,")"),width:"".concat(i,"px")}}function By(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=t.length,o=t.reduce(function(a,l){return a+l[0]},0)/i,s=t.reduce(function(a,l){return a+l[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(s,"px) rotate(").concat(n,"rad) scale(").concat(e,")")}}function Rf(n,e){var t=n[e];return Ks(t)?se(se({},n),t):n}function EU(n){var e=n&&!W_(n.offsetWidth),t=0,r=0,i=0,o=0,s=0,a=0,l=0,u=0,c=0,f=0,d=0,h=0,p=1/0,m=1/0,g=1/0,v=1/0,b=0,w=0,_=!1;if(n)if(!e&&n.tagName.toLowerCase()!=="svg"){var y=n.getBBox();_=!0,t=y.width,r=y.height,s=t,a=r,l=t,u=r,i=t,o=r}else{var k=fo(n),S=n.style,E=k("boxSizing")==="border-box",M=parseFloat(k("borderLeftWidth"))||0,R=parseFloat(k("borderRightWidth"))||0,O=parseFloat(k("borderTopWidth"))||0,I=parseFloat(k("borderBottomWidth"))||0,P=parseFloat(k("paddingLeft"))||0,A=parseFloat(k("paddingRight"))||0,N=parseFloat(k("paddingTop"))||0,F=parseFloat(k("paddingBottom"))||0,V=P+A,W=N+F,L=M+R,z=O+I,q=V+L,te=W+z,re=k("position"),ne=0,fe=0;if("clientLeft"in n){var ie=null;if(re==="absolute"){var G=Qm(n,bc(n));ie=G.offsetParent}else ie=n.parentElement;if(ie){var ae=fo(ie);ne=parseFloat(ae("width")),fe=parseFloat(ae("height"))}}c=Math.max(V,Nn(k("minWidth"),ne)||0),f=Math.max(W,Nn(k("minHeight"),fe)||0),p=Nn(k("maxWidth"),ne),m=Nn(k("maxHeight"),fe),isNaN(p)&&(p=1/0),isNaN(m)&&(m=1/0),b=Nn(S.width,0)||0,w=Nn(S.height,0)||0,s=parseFloat(k("width"))||0,a=parseFloat(k("height"))||0,l=Ne(s-b)<1?qS(c,b||s,p):s,u=Ne(a-w)<1?qS(f,w||a,m):a,t=l,r=u,i=l,o=u,E?(g=p,v=m,d=c,h=f,l=t-q,u=r-te):(g=p+q,v=m+te,d=c+q,h=f+te,t=l+q,r=u+te),i=l+V,o=u+W}return{svg:_,offsetWidth:t,offsetHeight:r,clientWidth:i,clientHeight:o,contentWidth:l,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:w,cssWidth:s,cssHeight:a,minWidth:c,minHeight:f,maxWidth:p,maxHeight:m,minOffsetWidth:d,minOffsetHeight:h,maxOffsetWidth:g,maxOffsetHeight:v}}function AU(n,e){return Or(e>0?n[0]:n[1],e>0?n[1]:n[0])}function vv(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function MU(n,e){var t=n===bc(n)||n===pE(n),r={clientLeft:n.clientLeft,clientTop:n.clientTop,clientWidth:n.clientWidth,clientHeight:n.clientHeight,scrollWidth:n.scrollWidth,scrollHeight:n.scrollHeight,overflow:!1};return t&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=fo(n)("overflow")!=="visible",se(se({},e),r)}function Xk(n,e,t,r){var i=n.left,o=n.right,s=n.top,a=n.bottom,l=e.top,u=e.left,c={left:u+i,top:l+s,right:u+o,bottom:l+a,width:o-i,height:a-s};return t&&r?MU(t,c):c}function L0(n,e){var t=0,r=0,i=0,o=0;if(n){var s=n.getBoundingClientRect();t=s.left,r=s.top,i=s.width,o=s.height}var a={left:t,top:r,width:i,height:o,right:t+i,bottom:r+o};return n&&e?MU(n,a):a}function NEe(n){var e=n.props,t=e.groupable,r=e.svgOrigin,i=n.getState(),o=i.offsetWidth,s=i.offsetHeight,a=i.svg,l=i.transformOrigin;return!t&&a&&r?HE(r,o,s):l}function TU(n,e,t,r){var i;if(n)i=n;else if(e)i=[0,0];else{var o=t.target;i=OU(o,r)}return i}function OU(n,e){if(n){var t=n.getAttribute("data-rotation")||"",r=n.getAttribute("data-direction");if(e.deg=t,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function BE(n,e){return[fn(e,n[0]),fn(e,n[1]),fn(e,n[2]),fn(e,n[3])]}function fs(n){var e=n.left,t=n.top,r=n.pos1,i=n.pos2,o=n.pos3,s=n.pos4;return BE([r,i,o,s],[e,t])}function h4(n,e){n[e?"controlAbles":"targetAbles"].forEach(function(t){t.unset&&t.unset(n)})}function qd(n,e){var t=e?"controlGesto":"targetGesto",r=n[t];(r==null?void 0:r.isIdle())===!1&&h4(n,e),r==null||r.unset(),n[t]=null}function Ui(n,e){if(e){var t=bp(e);t.nextStyle=se(se({},t.nextStyle),n)}return{style:n,cssText:Wl(n).map(function(r){return"".concat(sb(r,"-"),": ").concat(n[r],";")}).join("")}}function DU(n,e,t){var r=e.afterTransform||e.transform;return se(se({},Ui(se(se(se({},n.style),e.style),{transform:r}),t)),{afterTransform:r,transform:n.transform})}function zt(n,e,t,r){var i=e.datas;i.datas||(i.datas={});var o=se(se({},t),{target:n.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:n,moveable:n,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=o):i.isStartEvent=!0,o}function Mo(n,e,t){var r=e.datas,i="isDrag"in t?t.isDrag:e.isDrag;return r.datas||(r.datas={}),se(se({isDrag:i},t),{moveable:n,target:n.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:n,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function tw(n,e,t){n._emitter.on(e,t)}function dt(n,e,t,r,i){return n.triggerEvent(e,t,r,i)}function LE(n,e){return Vu(n).getComputedStyle(n,e)}function bv(n,e,t){var r={},i={};return n.filter(function(o){var s=o.name;if(r[s]||!e.some(function(a){return o[a]}))return!1;if(!t&&o.ableGroup){if(i[o.ableGroup])return!1;i[o.ableGroup]=!0}return r[s]=!0,!0})}function p4(n,e){return n===e||n==null&&e==null}function BEe(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=n.length-1,r=0;r<t;++r){var i=n[r];if(!W_(i))return i}return n[t]}function RU(n,e){var t=[],r=[];return n.forEach(function(i,o){var s=e(i,o,n),a=r.indexOf(s),l=t[a]||[];a===-1&&(r.push(s),t.push(l)),l.push(i)}),t}function LEe(n,e){var t=[],r={};return n.forEach(function(i,o){var s=e(i,o,n),a=r[s];a||(a=[],r[s]=a,t.push(a)),a.push(i)}),t}function PU(n){return n.reduce(function(e,t){return e.concat(t)},[])}function Gh(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.sort(function(t,r){return Ne(r)-Ne(t)}),n[0]}function Kh(n,e,t){return Ni(Wa(n,t),Tf(e,t),t)}function IU(n,e){var t,r=n.is3d,i=n.rootMatrix,o=r?4:3;return t=ce(Kh(i,[e.distX,e.distY],o),2),e.distX=t[0],e.distY=t[1],e}function yv(n,e,t,r){if(!t[0]&&!t[1])return e;var i=ur(n,[J7(t[0]),0],r),o=ur(n,[0,J7(t[1])],r),s=ur(n,[t[0]/cs(i),t[1]/cs(o)],r);return fn(e,s)}function Ss(n,e,t){return t?"".concat(n/e*100,"%"):"".concat(n,"px")}function Ly(n){return Ne(n)<=Qi?0:n}function FE(n){return function(e){if(!e.isDragging(n))return"";var t=A6e(e,n),r=t.deg;return r?kt("view-control-rotation".concat(r)):""}}function zE(n,e){return e===void 0&&(e=[n]),function(t,r){if(r.isRequest)return e.some(function(o){return r.requestAble===o})?r.parentDirection:!1;var i=r.inputEvent.target;return qr(i,kt("direction"))&&(!n||qr(i,kt(n)))}}function FEe(n,e,t){var r,i=Wh(n,{"x%":function(y){return y/100*e.offsetWidth},"y%":function(y){return y/100*e.offsetHeight}}),o=n.slice(0,t<0?void 0:t),s=n.slice(0,t<0?void 0:t+1),a=n[t]||"",l=t<0?[]:n.slice(t),u=t<0?[]:n.slice(t+1),c=i.slice(0,t<0?void 0:t),f=i.slice(0,t<0?void 0:t+1),d=(r=i[t])!==null&&r!==void 0?r:Wh([""])[0],h=t<0?[]:i.slice(t),p=t<0?[]:i.slice(t+1),m=d?[d]:[],g=Ad(c),v=Ad(f),b=Ad(h),w=Ad(p),_=Ln(g,b,4);return{transforms:n,beforeFunctionMatrix:g,beforeFunctionMatrix2:v,targetFunctionMatrix:Ad(m),afterFunctionMatrix:b,afterFunctionMatrix2:w,allFunctionMatrix:_,beforeFunctions:c,beforeFunctions2:f,targetFunction:m[0],afterFunctions:h,afterFunctions2:p,beforeFunctionTexts:o,beforeFunctionTexts2:s,targetFunctionText:a,afterFunctionTexts:l,afterFunctionTexts2:u}}function zEe(n){return!n||!Ks(n)||gp(n)?!1:Fr(n)||"length"in n}function Oa(n,e){return n?gp(n)?n:uo(n)?e?document.querySelector(n):n:fE(n)?n():mq(n)?n:"current"in n?n.current:n:null}function jE(n,e){if(!n)return[];var t=zEe(n)?[].slice.call(n):[n];return t.reduce(function(r,i){return uo(i)&&e?He(He([],ce(r),!1),ce([].slice.call(document.querySelectorAll(i))),!1):(Fr(i)?r.push(jE(i,e)):r.push(Oa(i,e)),r)},[])}function jEe(n,e,t){var r=Or(n,e)/Math.PI*180;return r=t>=0?r:180-r,r=r>=0?r:360+r,r}function Z7(n,e){var t=n.rootMatrix,r=n.is3d,i=r?4:3,o=Wa(t,i);return r||(o=Js(o,3,4)),o[12]=0,o[13]=0,o[14]=0,kxe(o,e)}function NU(n,e,t,r,i){var o=ce(n,2),s=o[0],a=o[1],l=0,u=0;if(i&&s&&a){var c=Or([0,0],e),f=Or([0,0],r),d=cs(e),h=Math.cos(c-f)*d;if(!r[0])u=h,l=u*t;else if(!r[1])l=h,u=l/t;else{var p=r[0]*s,m=r[1]*a,g=Math.atan2(p+e[0],m+e[1]),v=Math.atan2(p,m);g<0&&(g+=Math.PI*2),v<0&&(v+=Math.PI*2);var b=0;Ne(g-v)<Math.PI/2||Ne(g-v)>Math.PI/2*3||(v+=Math.PI),b=g-v,b>Math.PI*2?b-=Math.PI*2:b>Math.PI?b=2*Math.PI-b:b<-Math.PI&&(b=-2*Math.PI-b);var w=cs([p+e[0],m+e[1]])*Math.cos(b);l=w*Math.sin(v)-p,u=w*Math.cos(v)-m,r[0]<0&&(l*=-1),r[1]<0&&(u*=-1)}}else l=r[0]*e[0],u=r[1]*e[1];return[l,u]}function BU(n,e,t,r){var i,o=t.ratio,s=t.startOffsetWidth,a=t.startOffsetHeight,l=0,u=0,c=r.distX,f=r.distY,d=r.pinchScale,h=r.parentDistance,p=r.parentDist,m=r.parentScale,g=t.fixedDirection,v=[0,1].map(function(S){return Ne(n[S]-g[S])}),b=[0,1].map(function(S){var E=v[S];return E!==0&&(E=2/E),E});if(p)l=p[0],u=p[1],e&&(l?u||(u=l/o):l=u*o);else if(Vh(d))l=(d-1)*s,u=(d-1)*a;else if(m)l=(m[0]-1)*s,u=(m[1]-1)*a;else if(h){var w=s*v[0],_=a*v[1],y=cs([w,_]);l=h/y*w*b[0],u=h/y*_*b[1]}else{var k=Ya({datas:t,distX:c,distY:f});k=b.map(function(S,E){return k[E]*S}),i=ce(NU([s,a],k,o,n,e),2),l=i[0],u=i[1]}return{distWidth:l,distHeight:u}}function m4(n,e){if(e){if(n==="left")return{x:"0%",y:"50%"};if(n==="top")return{x:"50%",y:"50%"};if(n==="center")return{x:"50%",y:"50%"};if(n==="right")return{x:"100%",y:"50%"};if(n==="bottom")return{x:"50%",y:"100%"};var t=ce(n.split(" "),2),r=t[0],i=t[1],o=m4(r||""),s=m4(i||""),a=se(se({},o),s),l={x:"50%",y:"50%"};return a.x&&(l.x=a.x),a.y&&(l.y=a.y),a.value&&(a.x&&!a.y&&(l.y=a.value),!a.x&&a.y&&(l.x=a.value)),l}return n==="left"?{x:"0%"}:n==="right"?{x:"100%"}:n==="top"?{y:"0%"}:n==="bottom"?{y:"100%"}:n?n==="center"?{value:"50%"}:{value:n}:{}}function HE(n,e,t){var r=m4(n,!0),i=r.x,o=r.y;return[Nn(i,e)||0,Nn(o,t)||0]}function HEe(n,e,t){var r=n.map(function(o){return Ct(o,e)}),i=r.map(function(o){return qg(o,t)});return{prev:r,next:i,result:i.map(function(o){return fn(o,e)})}}function LU(n,e){return n.length===e.length&&n.every(function(t,r){var i=e[r],o=Fr(t),s=Fr(i);return o&&s?LU(t,i):!o&&!s?t===i:!1})}function Ud(n,e,t,r,i){var o=n._store,s=o[e];if(!(e in o))if(i!=null)o[e]=i,s=i;else return o[e]=t,t;return s===t||r(s)===r(t)?s:(o[e]=t,t)}function Xo(n){return n>=0?1:-1}function Ne(n){return Math.abs(n)}function Qk(n,e){return I4e(n).map(function(t){return e(t)})}function FU(n){return Vh(n)?{top:n,left:n,right:n,bottom:n}:{left:n.left||0,top:n.top||0,right:n.right||0,bottom:n.bottom||0}}var VEe=Kg("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(n,e){var t=e.datas,r=e.targets,i=e.angle,o=e.originalDatas,s=n.props,a=s.pinchable,l=s.ables;if(!a)return!1;var u="onPinch".concat(r?"Group":"","Start"),c="drag".concat(r?"Group":"","ControlStart"),f=(a===!0?n.controlAbles:l.filter(function(m){return a.indexOf(m.name)>-1})).filter(function(m){return m.canPinch&&m[c]}),d=zt(n,e,{});r&&(d.targets=r);var h=dt(n,u,d);t.isPinch=h!==!1,t.ables=f;var p=t.isPinch;return p?(f.forEach(function(m){if(o[m.name]=o[m.name]||{},!!m[c]){var g=se(se({},e),{datas:o[m.name],parentRotate:i,isPinch:!0});m[c](n,g)}}),n.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p):!1},pinch:function(n,e){var t=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,s=e.inputEvent,a=e.targets,l=e.angle;if(t.isPinch){var u=i*(1-1/r),c=zt(n,e,{});a&&(c.targets=a);var f="onPinch".concat(a?"Group":"");dt(n,f,c);var d=t.ables,h="drag".concat(a?"Group":"","Control");return d.forEach(function(p){p[h]&&p[h](n,se(se({},e),{datas:o[p.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(n,e){var t=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,s=e.originalDatas;if(t.isPinch){var a="onPinch".concat(o?"Group":"","End"),l=Mo(n,e,{isDrag:r});o&&(l.targets=o),dt(n,a,l);var u=t.ables,c="drag".concat(o?"Group":"","ControlEnd");return u.forEach(function(f){f[c]&&f[c](n,se(se({},e),{isDrag:r,datas:s[f.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(n,e){return this.pinchStart(n,se(se({},e),{targets:n.props.targets}))},pinchGroup:function(n,e){return this.pinch(n,se(se({},e),{targets:n.props.targets}))},pinchGroupEnd:function(n,e){return this.pinchEnd(n,se(se({},e),{targets:n.props.targets}))}}),$7=zE("scalable"),WEe={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:oU("scalable"),dragControlCondition:$7,viewClassName:FE("scalable"),dragControlStart:function(n,e){var t=e.datas,r=e.isPinch,i=e.inputEvent,o=e.parentDirection,s=TU(o,r,i,t),a=n.state,l=a.width,u=a.height,c=a.targetTransform,f=a.target,d=a.pos1,h=a.pos2,p=a.pos4;if(!s||!f)return!1;r||Gf(n,e),t.datas={},t.transform=c,t.prevDist=[1,1],t.direction=s,t.startOffsetWidth=l,t.startOffsetHeight=u,t.startValue=[1,1];var m=!s[0]&&!s[1]||s[0]||!s[1];X_(n,e,"scale"),t.isWidth=m;function g(k){t.ratio=k&&isFinite(k)?k:0}t.startPositions=fs(n.state);function v(k){var S=hU(t.startPositions,k);t.fixedDirection=S.fixedDirection,t.fixedPosition=S.fixedPosition,t.fixedOffset=S.fixedOffset}t.setFixedDirection=v,g(Ol(d,h)/Ol(h,p)),v([-s[0],-s[1]]);var b=function(k){t.minScaleSize=k},w=function(k){t.maxScaleSize=k};b([-1/0,-1/0]),w([1/0,1/0]);var _=zt(n,e,se(se({direction:s,set:function(k){t.startValue=k},setRatio:g,setFixedDirection:v,setMinScaleSize:b,setMaxScaleSize:w},Y_(n,e)),{dragStart:Hi.dragStart(n,new qh().dragStart([0,0],e))})),y=dt(n,"onScaleStart",_);return t.startFixedDirection=t.fixedDirection,y!==!1&&(t.isScale=!0,n.state.snapRenderInfo={request:e.isRequest,direction:s}),t.isScale?_:!1},dragControl:function(n,e){K_(n,e,"scale");var t=e.datas,r=e.parentKeepRatio,i=e.parentFlag,o=e.isPinch,s=e.dragClient,a=e.isRequest,l=e.useSnap,u=e.resolveMatrix,c=t.prevDist,f=t.direction,d=t.startOffsetWidth,h=t.startOffsetHeight,p=t.isScale,m=t.startValue,g=t.isWidth,v=t.ratio;if(!p)return!1;var b=n.props,w=b.throttleScale,_=b.parentMoveable,y=f;!f[0]&&!f[1]&&(y=[1,1]);var k=v&&(r??b.keepRatio)||!1,S=n.state,E=[m[0],m[1]];function M(){var X=BU(y,k,t,e),ge=X.distWidth,U=X.distHeight,Ce=d?(d+ge)/d:1,Ee=h?(h+U)/h:1;m[0]||(E[0]=ge/d),m[1]||(E[1]=U/h);var Ae=(y[0]||k?Ce:1)*E[0],De=(y[1]||k?Ee:1)*E[1];return Ae===0&&(Ae=Xo(c[0])*hv),De===0&&(De=Xo(c[1])*hv),[Ae,De]}var R=M();if(!o&&n.props.groupable){var O=S.snapRenderInfo||{},I=O.direction;Fr(I)&&(I[0]||I[1])&&(S.snapRenderInfo={direction:f,request:e.isRequest})}dt(n,"onBeforeScale",zt(n,e,{scale:R,setFixedDirection:function(X){return t.setFixedDirection(X),R=M(),R},startFixedDirection:t.startFixedDirection,setScale:function(X){R=X}},!0));var P=[R[0]/E[0],R[1]/E[1]],A=s,N=[0,0],F=!s&&!i&&o;if(F||u?A=ME(n,t.targetAllTransform,[0,0],[0,0],t):s||(A=t.fixedPosition),o||(N=_Ee(n,P,f,!l&&a,t)),k){y[0]&&y[1]&&N[0]&&N[1]&&(Math.abs(N[0]*d)>Math.abs(N[1]*h)?N[1]=0:N[0]=0);var V=!N[0]&&!N[1];if(V&&(g?P[0]=Ft(P[0]*E[0],w)/E[0]:P[1]=Ft(P[1]*E[1],w)/E[1]),y[0]&&!y[1]||N[0]&&!N[1]||V&&g){P[0]+=N[0];var W=d*P[0]*E[0]/v;P[1]=W/h/E[1]}else if(!y[0]&&y[1]||!N[0]&&N[1]||V&&!g){P[1]+=N[1];var L=h*P[1]*E[1]*v;P[0]=L/d/E[0]}}else P[0]+=N[0],P[1]+=N[1],N[0]||(P[0]=Ft(P[0]*E[0],w)/E[0]),N[1]||(P[1]=Ft(P[1]*E[1],w)/E[1]);P[0]===0&&(P[0]=Xo(c[0])*hv),P[1]===0&&(P[1]=Xo(c[1])*hv),R=SEe(P,[E[0],E[1]]);var z=[d,h],q=[d*R[0],h*R[1]];q=fq(q,t.minScaleSize,t.maxScaleSize,k?v:!1),R=Qk(2,function(X){return z[X]?q[X]/z[X]:q[X]}),P=Qk(2,function(X){return R[X]/E[X]});var te=Qk(2,function(X){return c[X]?P[X]/c[X]:P[X]}),re="scale(".concat(P.join(", "),")"),ne="scale(".concat(R.join(", "),")"),fe=J_(t,ne,re),ie=!m[0]||!m[1],G=w6e(n,ie?ne:re,t.fixedDirection,A,t.fixedOffset,t,ie),ae=F?G:Ct(G,t.prevInverseDist||[0,0]);if(t.prevDist=P,t.prevInverseDist=G,R[0]===c[0]&&R[1]===c[1]&&ae.every(function(X){return!X})&&!_&&!F)return!1;var Me=zt(n,e,se({offsetWidth:d,offsetHeight:h,direction:f,scale:R,dist:P,delta:te,isPinch:!!o},$q(n,fe,ae,o,e)));return dt(n,"onScale",Me),Me},dragControlEnd:function(n,e){var t=e.datas;if(!t.isScale)return!1;t.isScale=!1;var r=Mo(n,e,{});return dt(n,"onScaleEnd",r),r},dragGroupControlCondition:$7,dragGroupControlStart:function(n,e){var t=e.datas,r=this.dragControlStart(n,e);if(!r)return!1;var i=Ls(n,"resizable",e);t.moveableScale=n.scale;var o=Dl(n,this,"dragControlStart",e,function(u,c){return Ry(n,u,t,c)}),s=function(u){r.setFixedDirection(u),o.forEach(function(c,f){c.setFixedDirection(u),Ry(n,c.moveable,t,i[f])})};t.setFixedDirection=s;var a=se(se({},r),{targets:n.props.targets,events:o,setFixedDirection:s}),l=dt(n,"onScaleGroupStart",a);return t.isScale=l!==!1,t.isScale?a:!1},dragGroupControl:function(n,e){var t=e.datas;if(t.isScale){tw(n,"onBeforeScale",function(c){dt(n,"onBeforeScaleGroup",zt(n,e,se(se({},c),{targets:n.props.targets}),!0))});var r=this.dragControl(n,e);if(r){var i=r.dist,o=t.moveableScale;n.scale=[i[0]*o[0],i[1]*o[1]];var s=n.props.keepRatio,a=t.fixedPosition,l=Dl(n,this,"dragControl",e,function(c,f){var d=ce(Ni(Ug(n.rotation/180*Math.PI,3),[f.datas.originalX*i[0],f.datas.originalY*i[1],1],3),2),h=d[0],p=d[1];return se(se({},f),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:fn(a,[h,p])})}),u=se({targets:n.props.targets,events:l},r);return dt(n,"onScaleGroup",u),u}}},dragGroupControlEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(n,e);var i=Dl(n,this,"dragControlEnd",e),o=Mo(n,e,{targets:n.props.targets,events:i});return dt(n,"onScaleGroupEnd",o),t}},request:function(){var n={},e=0,t=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:n,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,t+=i.deltaHeight,{datas:n,parentDist:[e,t],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:n,isDrag:!0,useSnap:r}}}}};function nu(n,e){return n.map(function(t,r){return Dc(t,e[r],1,2)})}function e9(n,e,t){var r=Or(n,e),i=Or(n,t),o=i-r;return o>=0?o:o+2*Math.PI}function qEe(n,e){var t=e9(n[0],n[1],n[2]),r=e9(e[0],e[1],e[2]),i=Math.PI;return!(t>=i&&r<=i||t<=i&&r>=i)}var UEe={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:FE("warpable"),render:function(n,e){var t=n.props,r=t.resizable,i=t.scalable,o=t.warpable,s=t.zoom;if(r||i||!o)return[];var a=n.state,l=a.pos1,u=a.pos2,c=a.pos3,f=a.pos4,d=nu(l,u),h=nu(u,l),p=nu(l,c),m=nu(c,l),g=nu(c,f),v=nu(f,c),b=nu(u,f),w=nu(f,u);return He([e.createElement("div",{className:kt("line"),key:"middeLine1",style:h0(d,g,s)}),e.createElement("div",{className:kt("line"),key:"middeLine2",style:h0(h,v,s)}),e.createElement("div",{className:kt("line"),key:"middeLine3",style:h0(p,b,s)}),e.createElement("div",{className:kt("line"),key:"middeLine4",style:h0(m,w,s)})],ce(sU(n,"warpable",e)),!1)},dragControlCondition:function(n,e){if(e.isRequest)return!1;var t=e.inputEvent.target;return qr(t,kt("direction"))&&qr(t,kt("warpable"))},dragControlStart:function(n,e){var t=e.datas,r=e.inputEvent,i=n.props.target,o=r.target,s=OU(o,t);if(!s||!i)return!1;var a=n.state,l=a.transformOrigin,u=a.is3d,c=a.targetTransform,f=a.targetMatrix,d=a.width,h=a.height,p=a.left,m=a.top;t.datas={},t.targetTransform=c,t.warpTargetMatrix=u?f:Js(f,3,4),t.targetInverseMatrix=Iq(Wa(t.warpTargetMatrix,4),3,4),t.direction=s,t.left=p,t.top=m,t.poses=[[0,0],[d,0],[0,h],[d,h]].map(function(b){return Ct(b,l)}),t.nextPoses=t.poses.map(function(b){var w=ce(b,2),_=w[0],y=w[1];return Ni(t.warpTargetMatrix,[_,y,0,1],4)}),t.startValue=$n(4),t.prevMatrix=$n(4),t.absolutePoses=fs(a),t.posIndexes=Zq(s),Gf(n,e),X_(n,e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:s};var g=zt(n,e,se({set:function(b){t.startValue=b}},Y_(n,e))),v=dt(n,"onWarpStart",g);return v!==!1&&(t.isWarp=!0),t.isWarp},dragControl:function(n,e){var t=e.datas,r=e.isRequest,i=e.distX,o=e.distY,s=t.targetInverseMatrix,a=t.prevMatrix,l=t.isWarp,u=t.startValue,c=t.poses,f=t.posIndexes,d=t.absolutePoses;if(!l)return!1;if(K_(n,e,"matrix3d"),yp(n,"warpable")){var h=f.map(function(M){return d[M]});h.length>1&&h.push([(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);var p=$_(n,r,{horizontal:h.map(function(M){return M[1]+o}),vertical:h.map(function(M){return M[0]+i})}),m=p.horizontal,g=p.vertical;o-=m.offset,i-=g.offset}var v=Ya({datas:t,distX:i,distY:o},!0),b=t.nextPoses.slice();if(f.forEach(function(M){b[M]=fn(b[M],v)}),!f6e.every(function(M){return qEe(M.map(function(R){return c[R]}),M.map(function(R){return b[R]}))}))return!1;var w=kE(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!w.length)return!1;var _=Ln(s,w,4),y=Xq(t,_,!0),k=Ln(Wa(a,4),y,4);t.prevMatrix=y;var S=Ln(u,y,4),E=J_(t,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(y.join(", "),")"));return AE(e,E),dt(n,"onWarp",zt(n,e,se({delta:k,matrix:S,dist:y,multiply:Ln,transform:E},Ui({transform:E},e)))),!0},dragControlEnd:function(n,e){var t=e.datas,r=e.isDrag;return t.isWarp?(t.isWarp=!1,dt(n,"onWarpEnd",Mo(n,e,{})),r):!1}},GEe=kt("area-pieces"),_v=kt("area-piece"),zU=kt("avoid"),KEe=kt("view-dragging");function Zk(n){var e=n.areaElement;if(e){var t=n.state,r=t.width,i=t.height;pq(e,zU),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function t9(n){return n.createElement("div",{key:"area_pieces",className:GEe},n.createElement("div",{className:_v}),n.createElement("div",{className:_v}),n.createElement("div",{className:_v}),n.createElement("div",{className:_v}))}var jU={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(n,e){var t=n.props,r=t.target,i=t.dragArea,o=t.groupable,s=t.passDragArea,a=n.getState(),l=a.width,u=a.height,c=a.renderPoses,f=s?kt("area","pass"):kt("area");if(o)return[e.createElement("div",{key:"area",ref:Tl(n,"areaElement"),className:f}),t9(e)];if(!r||!i)return[];var d=kE([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),h=d.length?ew(d,!0):"none";return[e.createElement("div",{key:"area",ref:Tl(n,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:h}}),t9(e)]},dragStart:function(n,e){var t=e.datas,r=e.clientX,i=e.clientY,o=e.inputEvent;if(!o)return!1;t.isDragArea=!1;var s=n.areaElement,a=n.state,l=a.moveableClientRect,u=a.renderPoses,c=a.rootMatrix,f=a.is3d,d=l.left,h=l.top,p=is(u),m=p.left,g=p.top,v=p.width,b=p.height,w=f?4:3,_=ce(Kh(c,[r-d,i-h],w),2),y=_[0],k=_[1];y-=m,k-=g;var S=[{left:m,top:g,width:v,height:k-10},{left:m,top:g,width:y-10,height:b},{left:m,top:g+k+10,width:v,height:b-k-10},{left:m+y+10,top:g,width:v-y-10,height:b}],E=[].slice.call(s.nextElementSibling.children);S.forEach(function(M,R){E[R].style.cssText="left: ".concat(M.left,"px;top: ").concat(M.top,"px; width: ").concat(M.width,"px; height: ").concat(M.height,"px;")}),hq(s,zU),a.disableNativeEvent=!0},drag:function(n,e){var t=e.datas,r=e.inputEvent;if(this.enableNativeEvent(n),!r)return!1;t.isDragArea||(t.isDragArea=!0,Zk(n))},dragEnd:function(n,e){this.enableNativeEvent(n);var t=e.inputEvent,r=e.datas;if(!t)return!1;r.isDragArea||Zk(n)},dragGroupStart:function(n,e){return this.dragStart(n,e)},dragGroup:function(n,e){return this.drag(n,e)},dragGroupEnd:function(n,e){return this.dragEnd(n,e)},unset:function(n){Zk(n),n.state.disableNativeEvent=!1},enableNativeEvent:function(n){var e=n.state;e.disableNativeEvent&&cq(function(){e.disableNativeEvent=!1})}},JEe=Kg("origin",{props:["origin","svgOrigin"],render:function(n,e){var t=n.props,r=t.zoom,i=t.svgOrigin,o=t.groupable,s=n.getState(),a=s.beforeOrigin,l=s.rotation,u=s.svg,c=s.allMatrix,f=s.is3d,d=s.left,h=s.top,p=s.offsetWidth,m=s.offsetHeight,g;if(!o&&u&&i){var v=ce(HE(i,p,m),2),b=v[0],w=v[1],_=f?4:3,y=ur(c,[b,w],_);g=By(l,r,Ct(y,[d,h]))}else g=By(l,r,a);return[e.createElement("div",{className:kt("control","origin"),style:g,key:"beforeOrigin"})]}});function YEe(n){var e=n.scrollContainer;return[e.scrollLeft,e.scrollTop]}var XEe={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(n,e){var t=n.props,r=t.scrollContainer,i=r===void 0?n.getContainer():r,o=t.scrollOptions,s=new Oxe,a=Oa(i,!0);e.datas.dragScroll=s,n.state.dragScroll=s;var l=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(c){var f=c.container,d=c.direction,h=zt(n,e,{scrollContainer:f,direction:d}),p=u?"onScrollGroup":"onScroll";u&&(h.targets=u),dt(n,p,h)}).on("move",function(c){var f=c.offsetX,d=c.offsetY,h=c.inputEvent;n[l].scrollBy(f,d,h.inputEvent,!1)}).on("scrollDrag",function(c){var f=c.next;f(n[l].getCurrentEvent())}),s.dragStart(e,se({container:a},o))},checkScroll:function(n,e){var t=e.datas.dragScroll;if(t){var r=n.props,i=r.scrollContainer,o=i===void 0?n.getContainer():i,s=r.scrollThreshold,a=s===void 0?0:s,l=r.scrollThrottleTime,u=l===void 0?0:l,c=r.getScrollPosition,f=c===void 0?YEe:c,d=r.scrollOptions;return t.drag(e,se({container:o,threshold:a,throttleTime:u,getScrollPosition:function(h){return f({scrollContainer:h.container,direction:h.direction})}},d)),!0}},drag:function(n,e){return this.checkScroll(n,e)},dragEnd:function(n,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(n,e){return this.dragStart(n,se(se({},e),{isControl:!0}))},dragControl:function(n,e){return this.drag(n,e)},dragControlEnd:function(n,e){return this.dragEnd(n,e)},dragGroupStart:function(n,e){return this.dragStart(n,se(se({},e),{targets:n.props.targets}))},dragGroup:function(n,e){return this.drag(n,se(se({},e),{targets:n.props.targets}))},dragGroupEnd:function(n,e){return this.dragEnd(n,se(se({},e),{targets:n.props.targets}))},dragGroupControlStart:function(n,e){return this.dragStart(n,se(se({},e),{targets:n.props.targets,isControl:!0}))},dragGroupControl:function(n,e){return this.drag(n,se(se({},e),{targets:n.props.targets}))},dragGroupControEnd:function(n,e){return this.dragEnd(n,se(se({},e),{targets:n.props.targets}))},unset:function(n){var e,t=n.state;(e=t.dragScroll)===null||e===void 0||e.dragEnd(),t.dragScroll=null}},HU={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","requestStyles"],events:["changeTargets"]},QEe=Kg("padding",{props:["padding"],render:function(n,e){var t=n.props;if(t.dragArea)return[];var r=FU(t.padding||{}),i=r.left,o=r.top,s=r.right,a=r.bottom,l=n.getState(),u=l.renderPoses,c=l.pos1,f=l.pos2,d=l.pos3,h=l.pos4,p=[c,f,d,h],m=[];return i>0&&m.push([0,2]),o>0&&m.push([0,1]),s>0&&m.push([1,3]),a>0&&m.push([2,3]),m.map(function(g,v){var b=ce(g,2),w=b[0],_=b[1],y=p[w],k=p[_],S=u[w],E=u[_],M=kE([0,0],[100,0],[0,100],[100,100],y,k,S,E);if(M.length)return e.createElement("div",{key:"padding".concat(v),className:kt("padding"),style:{transform:ew(M,!0)}})})}}),n9=["nw","ne","se","sw"];function wv(n,e){var t=n[0]+n[1],r=t>e?e/t:1;return n[0]*=r,n[1]=e-n[1]*r,n}var ZEe=[1,2,5,6],$Ee=[0,3,4,7],Vc=[1,-1,-1,1],Wc=[1,1,-1,-1];function VE(n,e,t,r,i,o,s,a){i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=t),a===void 0&&(a=r);var l=[],u=!1,c=n.filter(function(d){return!d.virtual}),f=c.map(function(d){var h=d.horizontal,p=d.vertical,m=d.pos;if(p&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,p===1?m[1]-o:a-m[1]);return l.push(Ss(g,r,e)),g}else{var g=Math.max(0,h===1?m[0]-i:s-m[0]);return l.push(Ss(g,t,e)),g}});return{radiusPoses:c,styles:l,raws:f}}function VU(n){for(var e=[0,0],t=[0,0],r=n.length,i=0;i<r;++i){var o=n[i];o.sub&&(o.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,t[0]=i+1),o.vertical&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1))}return{horizontalRange:e,verticalRange:t}}function WU(n,e,t,r,i,o,s){var a,l,u,c;o===void 0&&(o=[0,0]),s===void 0&&(s=!1);var f=n.indexOf("/"),d=(f>-1?n.slice(0,f):n).length,h=n.slice(0,d),p=n.slice(d+1),m=h.length,g=p.length,v=g>0,b=ce(h,4),w=b[0],_=w===void 0?"0px":w,y=b[1],k=y===void 0?_:y,S=b[2],E=S===void 0?_:S,M=b[3],R=M===void 0?k:M,O=ce(p,4),I=O[0],P=I===void 0?_:I,A=O[1],N=A===void 0?v?P:k:A,F=O[2],V=F===void 0?v?P:E:F,W=O[3],L=W===void 0?v?N:R:W,z=[_,k,E,R].map(function(ie){return Nn(ie,e)}),q=[P,N,V,L].map(function(ie){return Nn(ie,t)}),te=z.slice(),re=q.slice();a=ce(wv([te[0],te[1]],e),2),te[0]=a[0],te[1]=a[1],l=ce(wv([te[3],te[2]],e),2),te[3]=l[0],te[2]=l[1],u=ce(wv([re[0],re[3]],t),2),re[0]=u[0],re[3]=u[1],c=ce(wv([re[1],re[2]],t),2),re[1]=c[0],re[2]=c[1];var ne=s?te:te.slice(0,Math.max(o[0],m)),fe=s?re:re.slice(0,Math.max(o[1],g));return He(He([],ce(ne.map(function(ie,G){var ae=n9[G];return{virtual:G>=m,horizontal:Vc[G],vertical:0,pos:[r+ie,i+(Wc[G]===-1?t:0)],sub:!0,raw:z[G],direction:ae}})),!1),ce(fe.map(function(ie,G){var ae=n9[G];return{virtual:G>=g,horizontal:0,vertical:Wc[G],pos:[r+(Vc[G]===-1?e:0),i+ie],sub:!0,raw:q[G],direction:ae}})),!1)}function eAe(n,e,t,r,i){i===void 0&&(i=e.length);var o=VU(n.slice(r)),s=o.horizontalRange,a=o.verticalRange,l=t-r,u=0;if(l===0)u=i;else if(l>0&&l<s[1])u=s[1]-l;else if(l>=a[0])u=a[0]+a[1]-l;else return;n.splice(t,u),e.splice(t,u)}function tAe(n,e,t,r,i,o,s,a,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var f=VU(n.slice(t)),d=f.horizontalRange,h=f.verticalRange;if(r>-1)for(var p=Vc[r]===1?o-u:a-o,m=d[1];m<=r;++m){var g=Wc[m]===1?c:l,v=0;if(r===m?v=o:m===0?v=u+p:Vc[m]===-1&&(v=a-(e[t][0]-u)),n.splice(t+m,0,{horizontal:Vc[m],vertical:0,pos:[v,g]}),e.splice(t+m,0,[v,g]),m===0)break}else if(i>-1){var b=Wc[i]===1?s-c:l-s;if(d[1]===0&&h[1]===0){var w=[u+b,c];n.push({horizontal:Vc[0],vertical:0,pos:w}),e.push(w)}for(var _=h[0],m=h[1];m<=i;++m){var v=Vc[m]===1?u:a,g=0;if(i===m?g=s:m===0?g=c+b:Wc[m]===1?g=e[t+_][1]:Wc[m]===-1&&(g=l-(e[t+_][1]-c)),n.push({horizontal:0,vertical:Wc[m],pos:[v,g]}),e.push([v,g]),m===0)break}}}function nAe(n,e){e===void 0&&(e=n.map(function(i){return i.raw}));var t=n.map(function(i,o){return i.horizontal?e[o]:null}).filter(function(i){return i!=null}),r=n.map(function(i,o){return i.vertical?e[o]:null}).filter(function(i){return i!=null});return{horizontals:t,verticals:r}}var rAe=[[0,-1,"n"],[1,0,"e"]],iAe=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function WE(n,e,t){var r=n.props.clipRelative,i=n.state,o=i.width,s=i.height,a=e,l=a.type,u=a.poses,c=l==="rect",f=l==="circle";if(l==="polygon")return t.map(function(k){return"".concat(Ss(k[0],o,r)," ").concat(Ss(k[1],s,r))});if(c||l==="inset"){var d=t[1][1],h=t[3][0],p=t[7][0],m=t[5][1];if(c)return[d,h,m,p].map(function(k){return"".concat(k,"px")});var g=[d,o-h,s-m,p].map(function(k,S){return Ss(k,S%2?o:s,r)});if(t.length>8){var v=ce(Ct(t[4],t[0]),2),b=v[0],w=v[1];g.push.apply(g,He(["round"],ce(VE(u.slice(8).map(function(k,S){return se(se({},k),{pos:t[S]})}),r,b,w,p,d,h,m).styles),!1))}return g}else if(f||l==="ellipse"){var _=t[0],y=Ss(Ne(t[1][1]-_[1]),f?Math.sqrt((o*o+s*s)/2):s,r),g=f?[y]:[Ss(Ne(t[2][0]-_[0]),o,r),y];return g.push("at",Ss(_[0],o,r),Ss(_[1],s,r)),g}}function Fy(n,e,t,r){var i=[r,(r+e)/2,e],o=[n,(n+t)/2,t];return iAe.map(function(s){var a=ce(s,3),l=a[0],u=a[1],c=a[2],f=i[l+1],d=o[u+1];return{vertical:Ne(u),horizontal:Ne(l),direction:c,pos:[f,d]}})}function qU(n){var e=[1/0,-1/0],t=[1/0,-1/0];return n.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),t[0]=Math.min(t[0],i[1]),t[1]=Math.max(t[1],i[1])}),[Ne(e[1]-e[0]),Ne(t[1]-t[0])]}function r9(n,e,t,r,i){var o,s,a,l,u,c,f,d,h;if(n){var p=i;if(!p){var m=fo(n),g=m("clipPath");p=g!=="none"?g:m("clip")}if(!((!p||p==="none"||p==="auto")&&(p=r,!p))){var v=lq(p),b=v.prefix,w=b===void 0?p:b,_=v.value,y=_===void 0?"":_,k=w==="circle",S=" ";if(w==="polygon"){var E=Xc(y||"0% 0%, 100% 0%, 100% 100%, 0% 100%");S=",";var M=E.map(function(_e){var it=ce(_e.split(" "),2),At=it[0],Ve=it[1];return{vertical:1,horizontal:1,pos:[Nn(At,e),Nn(Ve,t)]}}),R=Df(M.map(function(_e){return _e.pos}));return{type:w,clipText:p,poses:M,splitter:S,left:R.minX,right:R.maxX,top:R.minY,bottom:R.maxY}}else if(k||w==="ellipse"){var O="",I="",P=0,A=0,E=nc(y);if(k){var N="";o=ce(E,4),s=o[0],N=s===void 0?"50%":s,a=o[2],O=a===void 0?"50%":a,l=o[3],I=l===void 0?"50%":l,P=Nn(N,Math.sqrt((e*e+t*t)/2)),A=P}else{var F="",V="";u=ce(E,5),c=u[0],F=c===void 0?"50%":c,f=u[1],V=f===void 0?"50%":f,d=u[3],O=d===void 0?"50%":d,h=u[4],I=h===void 0?"50%":h,P=Nn(F,e),A=Nn(V,t)}var W=[Nn(O,e),Nn(I,t)],M=He([{vertical:1,horizontal:1,pos:W,direction:"nesw"}],ce(rAe.slice(0,k?1:2).map(function(At){return{vertical:Ne(At[1]),horizontal:At[0],direction:At[2],sub:!0,pos:[W[0]+At[0]*P,W[1]+At[1]*A]}})),!1);return{type:w,clipText:p,radiusX:P,radiusY:A,left:W[0]-P,top:W[1]-A,right:W[0]+P,bottom:W[1]+A,poses:M,splitter:S}}else if(w==="inset"){var E=nc(y||"0 0 0 0"),L=E.indexOf("round"),z=(L>-1?E.slice(0,L):E).length,q=E.slice(z+1),te=ce(E.slice(0,z),4),re=te[0],ne=te[1],fe=ne===void 0?re:ne,ie=te[2],G=ie===void 0?re:ie,ae=te[3],Me=ae===void 0?fe:ae,X=ce([re,G].map(function(At){return Nn(At,t)}),2),ge=X[0],U=X[1],Ce=ce([Me,fe].map(function(At){return Nn(At,e)}),2),Ee=Ce[0],Ae=Ce[1],De=e-Ae,nt=t-U,ue=WU(q,De-Ee,nt-ge,Ee,ge),M=He(He([],ce(Fy(ge,De,nt,Ee)),!1),ce(ue),!1);return{type:"inset",clipText:p,poses:M,top:ge,left:Ee,right:De,bottom:nt,radius:q,splitter:S}}else if(w==="rect"){var E=Xc(y||"0px, ".concat(e,"px, ").concat(t,"px, 0px"));S=",";var Oe=ce(E.map(function(Pt){var yt=jg(Pt).value;return yt}),4),Ue=Oe[0],Ae=Oe[1],U=Oe[2],Ee=Oe[3],M=Fy(Ue,Ae,U,Ee);return{type:"rect",clipText:p,poses:M,top:Ue,right:Ae,bottom:U,left:Ee,values:E,splitter:S}}}}}function oAe(n,e,t,r,i){var o=n[e],s=o.direction,a=o.sub,l=n.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var c=u.filter(function(P){return P==="w"||P==="e"}),f=u.filter(function(P){return P==="n"||P==="s"}),d=c[0],h=f[0];l[e]=t;var p=ce(qU(n),2),m=p[0],g=p[1],v=m&&g?m/g:0;if(v&&i){var b=(e+4)%8,w=n[b].pos,_=[0,0];s.indexOf("w")>-1?_[0]=-1:s.indexOf("e")>-1&&(_[0]=1),s.indexOf("n")>-1?_[1]=-1:s.indexOf("s")>-1&&(_[1]=1);var y=NU([m,g],t,v,_,!0),k=m+y[0],S=g+y[1],E=w[1],M=w[1],R=w[0],O=w[0];_[0]===-1?R=O-k:_[0]===1?O=R+k:(R=R-k/2,O=O+k/2),_[1]===-1?E=M-S:(_[1]===1||(E=M-S/2),M=E+S);var I=Fy(E,O,M,R);n.forEach(function(P,A){l[A][0]=I[A].pos[0]-P.pos[0],l[A][1]=I[A].pos[1]-P.pos[1]})}else n.forEach(function(P,A){var N=P.direction;N&&(N.indexOf(d)>-1&&(l[A][0]=t[0]),N.indexOf(h)>-1&&(l[A][1]=t[1]))}),d&&(l[1][0]=t[0]/2,l[5][0]=t[0]/2),h&&(l[3][1]=t[1]/2,l[7][1]=t[1]/2)}else s&&!a?u.forEach(function(P){var A=P==="n"||P==="s";n.forEach(function(N,F){var V=N.direction,W=N.horizontal,L=N.vertical;!V||V.indexOf(P)===-1||(l[F]=[A||!W?0:t[0],!A||!L?0:t[1]])})}):l[e]=t;return l}function sAe(n,e){var t=ce(Yq(n,e),2),r=t[0],i=t[1],o=e.datas,s=o.clipPath,a=o.clipIndex,l=s,u=l.type,c=l.poses,f=l.splitter,d=c.map(function(b){return b.pos});if(u==="polygon")d.splice(a,0,[r,i]);else if(u==="inset"){var h=ZEe.indexOf(a),p=$Ee.indexOf(a),m=c.length;if(tAe(c,d,8,h,p,r,i,d[4][0],d[4][1],d[0][0],d[0][1]),m===c.length)return}else return;var g=WE(n,s,d),v="".concat(u,"(").concat(g.join(f),")");dt(n,"onClip",zt(n,e,se({clipEventType:"added",clipType:u,poses:d,clipStyles:g,clipStyle:v,distX:0,distY:0},Ui({clipPath:v},e))))}function aAe(n,e){var t=e.datas,r=t.clipPath,i=t.clipIndex,o=r,s=o.type,a=o.poses,l=o.splitter,u=a.map(function(h){return h.pos}),c=u.length;if(s==="polygon")a.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(eAe(a,u,i,8,c),c===a.length))return}else return;var f=WE(n,r,u),d="".concat(s,"(").concat(f.join(l),")");dt(n,"onClip",zt(n,e,se({clipEventType:"removed",clipType:s,poses:u,clipStyles:f,clipStyle:d,distX:0,distY:0},Ui({clipPath:d},e))))}var lAe={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(n,e){var t=n.props,r=t.customClipPath,i=t.defaultClipPath,o=t.clipArea,s=t.zoom,a=t.groupable,l=n.getState(),u=l.target,c=l.width,f=l.height,d=l.allMatrix,h=l.is3d,p=l.left,m=l.top,g=l.pos1,v=l.pos2,b=l.pos3,w=l.pos4,_=l.clipPathState,y=l.snapBoundInfos,k=l.rotation;if(!u||a)return[];var S=r9(u,c,f,i||"inset",_||r);if(!S)return[];var E=h?4:3,M=S.type,R=S.poses,O=R.map(function(Ae){var De=ur(d,Ae.pos,E);return[De[0]-p,De[1]-m]}),I=[],P=[],A=M==="rect",N=M==="inset",F=M==="polygon";if(A||N||F){var V=N?O.slice(0,8):O;P=V.map(function(Ae,De){var nt=De===0?V[V.length-1]:V[De-1],ue=Or(nt,Ae),Oe=xU(nt,Ae);return e.createElement("div",{key:"clipLine".concat(De),className:kt("line","clip-line","snap-control"),"data-clip-index":De,style:{width:"".concat(Oe,"px"),transform:"translate(".concat(nt[0],"px, ").concat(nt[1],"px) rotate(").concat(ue,"rad) scaleY(").concat(s,")")}})})}if(I=O.map(function(Ae,De){return e.createElement("div",{key:"clipControl".concat(De),className:kt("control","clip-control","snap-control"),"data-clip-index":De,style:{transform:"translate(".concat(Ae[0],"px, ").concat(Ae[1],"px) rotate(").concat(k,"rad) scale(").concat(s,")")}})}),N&&I.push.apply(I,He([],ce(O.slice(8).map(function(Ae,De){return e.createElement("div",{key:"clipRadiusControl".concat(De),className:kt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+De,style:{transform:"translate(".concat(Ae[0],"px, ").concat(Ae[1],"px) rotate(").concat(k,"rad) scale(").concat(s,")")}})})),!1)),M==="circle"||M==="ellipse"){var W=S.left,L=S.top,z=S.radiusX,q=S.radiusY,te=ce(Ct(ur(d,[W,L],E),ur(d,[0,0],E)),2),re=te[0],ne=te[1],fe="none";if(!o){for(var ie=Math.max(10,z/5,q/5),G=[],ae=0;ae<=ie;++ae){var Me=Math.PI*2/ie*ae;G.push([z+(z-s)*Math.cos(Me),q+(q-s)*Math.sin(Me)])}G.push([z,-2]),G.push([-2,-2]),G.push([-2,q*2+2]),G.push([z*2+2,q*2+2]),G.push([z*2+2,-2]),G.push([z,-2]),fe="polygon(".concat(G.map(function(Ae){return"".concat(Ae[0],"px ").concat(Ae[1],"px")}).join(", "),")")}I.push(e.createElement("div",{key:"clipEllipse",className:kt("clip-ellipse","snap-control"),style:{width:"".concat(z*2,"px"),height:"".concat(q*2,"px"),clipPath:fe,transform:"translate(".concat(-p+re,"px, ").concat(-m+ne,"px) ").concat(ew(d))}}))}if(o){var X=is(He([g,v,b,w],ce(O),!1)),ge=X.width,U=X.height,Ce=X.left,Ee=X.top;if(F||A||N){var G=N?O.slice(0,8):O;I.push(e.createElement("div",{key:"clipArea",className:kt("clip-area","snap-control"),style:{width:"".concat(ge,"px"),height:"".concat(U,"px"),transform:"translate(".concat(Ce,"px, ").concat(Ee,"px)"),clipPath:"polygon(".concat(G.map(function(De){return"".concat(De[0]-Ce,"px ").concat(De[1]-Ee,"px")}).join(", "),")")}}))}}return y&&["vertical","horizontal"].forEach(function(Ae){var De=y[Ae],nt=Ae==="horizontal";De.isSnap&&P.push.apply(P,He([],ce(De.snap.posInfos.map(function(ue,Oe){var Ue=ue.pos,_e=Ct(ur(d,nt?[0,Ue]:[Ue,0],E),[p,m]),it=Ct(ur(d,nt?[c,Ue]:[Ue,f],E),[p,m]);return Xm(e,"",_e,it,s,"clip".concat(Ae,"snap").concat(Oe),"guideline")})),!1)),De.isBound&&P.push.apply(P,He([],ce(De.bounds.map(function(ue,Oe){var Ue=ue.pos,_e=Ct(ur(d,nt?[0,Ue]:[Ue,0],E),[p,m]),it=Ct(ur(d,nt?[c,Ue]:[Ue,f],E),[p,m]);return Xm(e,"",_e,it,s,"clip".concat(Ae,"bounds").concat(Oe),"guideline","bounds","bold")})),!1))}),He(He([],ce(I),!1),ce(P),!1)},dragControlCondition:function(n,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(n,e){var t=n.props,r=t.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(n,e)},drag:function(n,e){return this.dragControl(n,se(se({},e),{isDragTarget:!0}))},dragEnd:function(n,e){return this.dragControlEnd(n,e)},dragControlStart:function(n,e){var t=n.state,r=n.props,i=r.defaultClipPath,o=r.customClipPath,s=t.target,a=t.width,l=t.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",f=e.datas,d=r9(s,a,l,i||"inset",o);if(!d)return!1;var h=d.clipText,p=d.type,m=d.poses,g=dt(n,"onClipStart",zt(n,e,{clipType:p,clipStyle:h,poses:m.map(function(v){return v.pos})}));return g===!1?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,f.clipPath=d,f.isClipStart=!0,t.clipPathState=h,Gf(n,e),!0)},dragControl:function(n,e){var t,r,i,o=e.datas,s=e.originalDatas,a=e.isDragTarget;if(!o.isClipStart)return!1;var l=o,u=l.isControl,c=l.isLine,f=l.isArea,d=l.clipIndex,h=l.clipPath;if(!h)return!1;var p=Rf(n.props,"clippable"),m=p.keepRatio,g=0,v=0,b=s.draggable,w=Ya(e);a&&b?(t=ce(b.prevBeforeDist,2),g=t[0],v=t[1]):(r=ce(w,2),g=r[0],v=r[1]);var _=[g,v],y=n.state,k=y.width,S=y.height,E=!f&&!u&&!c,M=h.type,R=h.poses,O=h.splitter,I=R.map(function(mt){return mt.pos});E&&(g=-g,v=-v);var P=!u||R[d].direction==="nesw",A=M==="inset"||M==="rect",N=R.map(function(){return[0,0]});if(u&&!P){var F=R[d],V=F.horizontal,W=F.vertical,L=[g*Ne(V),v*Ne(W)];N=oAe(R,d,L,A,m)}else P&&(N=I.map(function(){return[g,v]}));var z=I.map(function(mt,wt){return fn(mt,N[wt])}),q=He([],ce(z),!1);y.snapBoundInfos=null;var te=h.type==="circle",re=h.type==="ellipse";if(te||re){var ne=is(z),fe=Ne(ne.bottom-ne.top),ie=Ne(re?ne.right-ne.left:fe),G=z[0][1]+fe,ae=z[0][0]-ie,Me=z[0][0]+ie;te&&(q.push([Me,ne.bottom]),N.push([1,0])),q.push([ne.left,G]),N.push([0,1]),q.push([ae,ne.bottom]),N.push([1,0])}var X=vU((p.clipHorizontalGuidelines||[]).map(function(mt){return Nn("".concat(mt),S)}),(p.clipVerticalGuidelines||[]).map(function(mt){return Nn("".concat(mt),k)}),k,S),ge=[],U=[];if(te||re)ge=[q[4][0],q[2][0]],U=[q[1][1],q[3][1]];else if(A){var Ce=[q[0],q[2],q[4],q[6]],Ee=[N[0],N[2],N[4],N[6]];ge=Ce.filter(function(mt,wt){return Ee[wt][0]}).map(function(mt){return mt[0]}),U=Ce.filter(function(mt,wt){return Ee[wt][1]}).map(function(mt){return mt[1]})}else ge=q.filter(function(mt,wt){return N[wt][0]}).map(function(mt){return mt[0]}),U=q.filter(function(mt,wt){return N[wt][1]}).map(function(mt){return mt[1]});var Ae=[0,0],De=V7(X,p.clipTargetBounds&&{left:0,top:0,right:k,bottom:S},ge,U,5),nt=De.horizontal,ue=De.vertical,Oe=nt.offset,Ue=ue.offset;if(nt.isBound&&(Ae[1]+=Oe),ue.isBound&&(Ae[0]+=Ue),(re||te)&&N[0][0]===0&&N[0][1]===0){var ne=is(z),_e=ne.bottom-ne.top,it=re?ne.right-ne.left:_e,At=ue.isBound?Ne(Ue):ue.snapIndex===0?-Ue:Ue,Ve=nt.isBound?Ne(Oe):nt.snapIndex===0?-Oe:Oe;it-=At,_e-=Ve,te&&(_e=uU(ue,nt)>0?_e:it,it=_e);var ct=q[0];q[1][1]=ct[1]-_e,q[2][0]=ct[0]+it,q[3][1]=ct[1]+_e,q[4][0]=ct[0]-it}else if(A&&m&&u){var Pt=ce(qU(R),2),yt=Pt[0],mn=Pt[1],En=yt&&mn?yt/mn:0,Dn=R[d],Fn=Dn.direction||"",we=q[1][1],G=q[5][1],ae=q[7][0],Me=q[3][0];Ne(Oe)<=Ne(Ue)?Oe=Xo(Oe)*Ne(Ue)/En:Ue=Xo(Ue)*Ne(Oe)*En,Fn.indexOf("w")>-1?ae-=Ue:Fn.indexOf("e")>-1?Me-=Ue:(ae+=Ue/2,Me-=Ue/2),Fn.indexOf("n")>-1?we-=Oe:Fn.indexOf("s")>-1?G-=Oe:(we+=Oe/2,G-=Oe/2);var bt=Fy(we,Me,G,ae);q.forEach(function(Dr,wi){var rr;rr=ce(bt[wi].pos,2),Dr[0]=rr[0],Dr[1]=rr[1]})}else q.forEach(function(mt,wt){var Yr=N[wt];Yr[0]&&(mt[0]-=Ue),Yr[1]&&(mt[1]-=Oe)});var ve=WE(n,h,z),Ge="".concat(M,"(").concat(ve.join(O),")");if(y.clipPathState=Ge,te||re)ge=[q[4][0],q[2][0]],U=[q[1][1],q[3][1]];else if(A){var Ce=[q[0],q[2],q[4],q[6]];ge=Ce.map(function(wt){return wt[0]}),U=Ce.map(function(wt){return wt[1]})}else ge=q.map(function(mt){return mt[0]}),U=q.map(function(mt){return mt[1]});if(y.snapBoundInfos=V7(X,p.clipTargetBounds&&{left:0,top:0,right:k,bottom:S},ge,U,1),b){var $e=y.is3d,me=y.allMatrix,ft=$e?4:3,Gt=Ae;a&&(Gt=[_[0]+Ae[0]-w[0],_[1]+Ae[1]-w[1]]),b.deltaOffset=Ln(me,[Gt[0],Gt[1],0,0],ft)}return dt(n,"onClip",zt(n,e,se({clipEventType:"changed",clipType:M,poses:z,clipStyle:Ge,clipStyles:ve,distX:g,distY:v},Ui((i={},i[M==="rect"?"clip":"clipPath"]=Ge,i),e)))),!0},dragControlEnd:function(n,e){this.unset(n);var t=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,s=r.isClipStart,a=r.isControl;return s?(dt(n,"onClipEnd",Mo(n,e,{})),i&&(a?aAe(n,e):o&&sAe(n,e)),i||t):!1},unset:function(n){n.state.clipPathState="",n.state.snapBoundInfos=null}},uAe={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(n,e){return e.isRequest?e.requestAble==="originDraggable":qr(e.inputEvent.target,kt("origin"))},dragControlStart:function(n,e){var t=e.datas;Gf(n,e);var r=zt(n,e,{dragStart:Hi.dragStart(n,new qh().dragStart([0,0],e))}),i=dt(n,"onDragOriginStart",r);return t.startOrigin=n.state.transformOrigin,t.startTargetOrigin=n.state.targetOrigin,t.prevOrigin=[0,0],t.isDragOrigin=!0,i===!1?(t.isDragOrigin=!1,!1):r},dragControl:function(n,e){var t=e.datas,r=e.isPinch,i=e.isRequest;if(!t.isDragOrigin)return!1;var o=ce(Ya(e),2),s=o[0],a=o[1],l=n.state,u=l.width,c=l.height,f=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,p=n.props.originRelative,m=p===void 0?!0:p,g=h?4:3,v=[s,a];if(i){var b=e.distOrigin;(b[0]||b[1])&&(v=b)}var w=fn(t.startOrigin,v),_=fn(t.startTargetOrigin,v),y=Ct(v,t.prevOrigin),k=Yg(f,d,w,g),S=n.getRect(),E=is(Kf(k,u,c,g)),M=[S.left-E.left,S.top-E.top];t.prevOrigin=v;var R=[Ss(_[0],u,m),Ss(_[1],c,m)].join(" "),O=Hi.drag(n,Jg(e,n.state,M,!!r,!1)),I=zt(n,e,se(se({width:u,height:c,origin:w,dist:v,delta:y,transformOrigin:R,drag:O},Ui({transformOrigin:R,transform:O.transform},e)),{afterTransform:O.transform}));return dt(n,"onDragOrigin",I),I},dragControlEnd:function(n,e){var t=e.datas;return t.isDragOrigin?(dt(n,"onDragOriginEnd",Mo(n,e,{})),!0):!1},dragGroupControlCondition:function(n,e){return this.dragControlCondition(n,e)},dragGroupControlStart:function(n,e){var t=this.dragControlStart(n,e);return!!t},dragGroupControl:function(n,e){var t=this.dragControl(n,e);return t?(n.transformOrigin=t.transformOrigin,!0):!1},request:function(n){var e={},t=n.getRect(),r=0,i=0,o=t.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaOrigin"in a?(s[0]+=a.deltaOrigin[0],s[1]+=a.deltaOrigin[1]):"origin"in a?(s[0]=a.origin[0]-o[0],s[1]=a.origin[1]-o[1]):("x"in a?r=a.x-t.left:"deltaX"in a&&(r+=a.deltaX),"y"in a?i=a.y-t.top:"deltaY"in a&&(i+=a.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function cAe(n,e,t,r){var i=n.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,o=n.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(o===0?s=4:o<4&&(s=7)),e===1&&(o<=1?s=5:o<=2&&(s=6)),!(s===-1||!n[s].virtual)){var a=n[s];fAe(n,s),s<4?a.pos[0]=t:a.pos[1]=r}}function fAe(n,e){e<4?n.slice(0,e+1).forEach(function(t){t.virtual=!1}):(n[0].virtual&&(n[0].virtual=!1),n.slice(4,e+1).forEach(function(t){t.virtual=!1}))}function dAe(n,e){e<4?n.slice(e,4).forEach(function(t){t.virtual=!0}):n.slice(e).forEach(function(t){t.virtual=!0})}function i9(n,e,t,r,i){r===void 0&&(r=[0,0]);var o=[];return!n||n==="0px"?o=[]:o=nc(n),WU(o,e,t,0,0,r,i)}function o9(n,e,t,r,i){var o=n.state,s=o.width,a=o.height,l=VE(i,n.props.roundRelative,s,a),u=l.raws,c=l.styles,f=l.radiusPoses,d=nAe(f,u),h=d.horizontals,p=d.verticals,m=c.join(" ");o.borderRadiusState=m;var g=zt(n,e,se({horizontals:h,verticals:p,borderRadius:m,width:s,height:a,delta:r,dist:t},Ui({borderRadius:m},e)));return dt(n,"onRound",g),g}function s9(n){var e,t,r=n.getState().style,i=r.borderRadius||"";if(!i&&n.props.groupable){var o=n.moveables[0],s=n.getTargets()[0];s&&((o==null?void 0:o.props.target)===s?(i=(t=(e=n.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&t!==void 0?t:"",r.borderRadius=i):(i=LE(s).borderRadius,r.borderRadius=i))}return i}var hAe={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(n){var e=n.props.roundClickable;return e===!0||e==="line"?kt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(n,e){var t=n.getState(),r=t.target,i=t.width,o=t.height,s=t.allMatrix,a=t.is3d,l=t.left,u=t.top,c=t.borderRadiusState,f=n.props,d=f.minRoundControls,h=d===void 0?[0,0]:d,p=f.maxRoundControls,m=p===void 0?[4,4]:p,g=f.zoom,v=f.roundPadding,b=v===void 0?0:v,w=f.isDisplayShadowRoundControls,_=f.groupable;if(!r)return null;var y=c||s9(n),k=a?4:3,S=i9(y,i,o,h,!0);if(!S)return null;var E=0,M=0,R=_?[0,0]:[l,u];return S.map(function(O,I){var P=O.horizontal,A=O.vertical,N=O.direction||"",F=He([],ce(O.pos),!1);M+=Math.abs(P),E+=Math.abs(A),P&&N.indexOf("n")>-1&&(F[1]-=b),A&&N.indexOf("w")>-1&&(F[0]-=b),P&&N.indexOf("s")>-1&&(F[1]+=b),A&&N.indexOf("e")>-1&&(F[0]+=b);var V=Ct(ur(s,F,k),R),W=w&&w!=="horizontal",L=O.vertical?E<=m[1]&&(W||!O.virtual):M<=m[0]&&(w||!O.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(I),className:kt("control","border-radius",O.vertical?"vertical":"",O.virtual?"virtual":""),"data-radius-index":I,style:{display:L?"block":"none",transform:"translate(".concat(V[0],"px, ").concat(V[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(n,e){if(!e.inputEvent||e.isRequest)return!1;var t=e.inputEvent.target.getAttribute("class")||"";return t.indexOf("border-radius")>-1||t.indexOf("moveable-line")>-1&&t.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(n,e){return this.dragControlCondition(n,e)},dragControlStart:function(n,e){var t=e.inputEvent,r=e.datas,i=t.target,o=i.getAttribute("class")||"",s=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,l=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(a){var c=i.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!a)return!1;var f=zt(n,e,{}),d=dt(n,"onRoundStart",f);if(d===!1)return!1;r.lineIndex=u,r.controlIndex=l,r.isControl=s,r.isLine=a,Gf(n,e);var h=n.props,p=h.roundRelative,m=h.minRoundControls,g=m===void 0?[0,0]:m,v=n.state,b=v.width,w=v.height;r.isRound=!0,r.prevDist=[0,0];var _=s9(n),y=i9(_||"",b,w,g,!0)||[];return r.controlPoses=y,v.borderRadiusState=VE(y,p,b,w).styles.join(" "),f},dragControl:function(n,e){var t=e.datas,r=t.controlPoses;if(!t.isRound||!t.isControl||!r.length)return!1;var i=t.controlIndex,o=ce(Ya(e),2),s=o[0],a=o[1],l=[s,a],u=Ct(l,t.prevDist),c=n.props.maxRoundControls,f=c===void 0?[4,4]:c,d=n.state,h=d.width,p=d.height,m=r[i],g=m.vertical,v=m.horizontal,b=r.map(function(_){var y=_.horizontal,k=_.vertical,S=[y*v*l[0],k*g*l[1]];if(y){if(f[0]===1)return S;if(f[0]<4&&y!==v)return S}else{if(f[1]===0)return S[1]=k*v*l[0]/h*p,S;if(g){if(f[1]===1)return S;if(f[1]<4&&k!==g)return S}}return[0,0]});b[i]=l;var w=r.map(function(_,y){return se(se({},_),{pos:fn(_.pos,b[y])})});return i<4?w.slice(0,i+1).forEach(function(_){_.virtual=!1}):w.slice(4,i+1).forEach(function(_){_.virtual=!1}),t.prevDist=[s,a],o9(n,e,l,u,w)},dragControlEnd:function(n,e){var t=n.state;t.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var o=r.isControl,s=r.controlIndex,a=r.isLine,l=r.lineIndex,u=r.controlPoses,c=u.filter(function(v){var b=v.virtual;return b}).length,f=n.props.roundClickable,d=f===void 0?!0:f;if(i&&d){if(o&&(d===!0||d==="control"))dAe(u,s);else if(a&&(d===!0||d==="line")){var h=ce(Yq(n,e),2),p=h[0],m=h[1];cAe(u,l,p,m)}c!==u.filter(function(v){var b=v.virtual;return b}).length&&o9(n,e,[0,0],[0,0],u)}var g=Mo(n,e,{});return dt(n,"onRoundEnd",g),t.borderRadiusState="",g},dragGroupControlStart:function(n,e){var t=this.dragControlStart(n,e);if(!t)return!1;var r=n.moveables,i=n.props.targets,o=Ls(n,"roundable",e),s=se({targets:n.props.targets,events:o.map(function(a,l){return se(se({},a),{target:i[l],moveable:r[l],currentTarget:r[l]})})},t);return dt(n,"onRoundGroupStart",s),t},dragGroupControl:function(n,e){var t=this.dragControl(n,e);if(!t)return!1;var r=n.moveables,i=n.props.targets,o=Ls(n,"roundable",e),s=se({targets:n.props.targets,events:o.map(function(a,l){return se(se(se({},a),{target:i[l],moveable:r[l],currentTarget:r[l]}),Ui({borderRadius:t.borderRadius},a))})},t);return dt(n,"onRoundGroup",s),s},dragGroupControlEnd:function(n,e){var t=n.moveables,r=n.props.targets,i=Ls(n,"roundable",e);tw(n,"onRound",function(a){var l=se({targets:n.props.targets,events:i.map(function(u,c){return se(se(se({},u),{target:r[c],moveable:t[c],currentTarget:t[c]}),Ui({borderRadius:a.borderRadius},u))})},a);dt(n,"onRoundGroup",l)});var o=this.dragControlEnd(n,e);if(!o)return!1;var s=se({targets:n.props.targets,events:i.map(function(a,l){var u;return se(se({},a),{target:r[l],moveable:t[l],currentTarget:t[l],lastEvent:(u=a.datas)===null||u===void 0?void 0:u.lastEvent})})},o);return dt(n,"onRoundGroupEnd",s),s},unset:function(n){n.state.borderRadiusState=""}};function pAe(n,e){var t=e?4:3,r=$n(t),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return n===i||n==="matrix(1,0,0,1,0,0)"}var UU={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(n,e){var t=n.state,r=t.is3d,i=t.targetMatrix,o=t.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Bq(i,!0),")"),a=!o||o==="none"?s:o;e.datas.startTransforms=pAe(a,r)?[]:nc(a)},resetStyle:function(n){var e=n.datas;e.nextStyle={},e.nextTransforms=n.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(n,e){return zt(n,e,{setTransform:function(t){e.datas.startTransforms=Fr(t)?t:nc(t)},isPinch:!!e.isPinch})},fillDragParams:function(n,e){return zt(n,e,{isPinch:!!e.isPinch})},dragStart:function(n,e){this.setTransform(n,e),this.resetStyle(e),dt(n,"onBeforeRenderStart",this.fillDragStartParams(n,e))},drag:function(n,e){e.datas.startTransforms||this.setTransform(n,e),this.resetStyle(e),dt(n,"onBeforeRender",zt(n,e,{isPinch:!!e.isPinch}))},dragEnd:function(n,e){e.datas.startTransforms||(this.setTransform(n,e),this.resetStyle(e)),dt(n,"onBeforeRenderEnd",zt(n,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(n,e){var t=this;this.dragStart(n,e);var r=Ls(n,"beforeRenderable",e),i=n.moveables,o=r.map(function(s,a){var l=i[a];return t.setTransform(l,s),t.resetStyle(s),t.fillDragStartParams(l,s)});dt(n,"onBeforeRenderGroupStart",zt(n,e,{isPinch:!!e.isPinch,targets:n.props.targets,setTransform:function(){},events:o}))},dragGroup:function(n,e){var t=this;this.drag(n,e);var r=Ls(n,"beforeRenderable",e),i=n.moveables,o=r.map(function(s,a){var l=i[a];return t.resetStyle(s),t.fillDragParams(l,s)});dt(n,"onBeforeRenderGroup",zt(n,e,{isPinch:!!e.isPinch,targets:n.props.targets,events:o}))},dragGroupEnd:function(n,e){this.dragEnd(n,e),dt(n,"onBeforeRenderGroupEnd",zt(n,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:n.props.targets}))},dragControlStart:function(n,e){return this.dragStart(n,e)},dragControl:function(n,e){return this.drag(n,e)},dragControlEnd:function(n,e){return this.dragEnd(n,e)},dragGroupControlStart:function(n,e){return this.dragGroupStart(n,e)},dragGroupControl:function(n,e){return this.dragGroup(n,e)},dragGroupControlEnd:function(n,e){return this.dragGroupEnd(n,e)}},GU={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(n,e){dt(n,"onRenderStart",zt(n,e,{isPinch:!!e.isPinch}))},drag:function(n,e){dt(n,"onRender",this.fillDragParams(n,e))},dragAfter:function(n,e){return this.drag(n,e)},dragEnd:function(n,e){dt(n,"onRenderEnd",this.fillDragEndParams(n,e))},dragGroupStart:function(n,e){dt(n,"onRenderGroupStart",zt(n,e,{isPinch:!!e.isPinch,targets:n.props.targets}))},dragGroup:function(n,e){var t=this,r=Ls(n,"beforeRenderable",e),i=n.moveables,o=r.map(function(s,a){var l=i[a];return t.fillDragParams(l,s)});dt(n,"onRenderGroup",zt(n,e,se(se({isPinch:!!e.isPinch,targets:n.props.targets,transform:pv(e),transformObject:{}},Ui(mv(e))),{events:o})))},dragGroupEnd:function(n,e){var t=this,r=Ls(n,"beforeRenderable",e),i=n.moveables,o=r.map(function(s,a){var l=i[a];return t.fillDragEndParams(l,s)});dt(n,"onRenderGroupEnd",zt(n,e,se({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:n.props.targets,events:o,transformObject:{},transform:pv(e)},Ui(mv(e)))))},dragControlStart:function(n,e){return this.dragStart(n,e)},dragControl:function(n,e){return this.drag(n,e)},dragControlAfter:function(n,e){return this.dragAfter(n,e)},dragControlEnd:function(n,e){return this.dragEnd(n,e)},dragGroupControlStart:function(n,e){return this.dragGroupStart(n,e)},dragGroupControl:function(n,e){return this.dragGroup(n,e)},dragGroupControlEnd:function(n,e){return this.dragGroupEnd(n,e)},fillDragParams:function(n,e){var t={};return Wh(Dy(e)||[]).forEach(function(r){t[r.name]=r.functionValue}),zt(n,e,se({isPinch:!!e.isPinch,transformObject:t,transform:pv(e)},Ui(mv(e))))},fillDragEndParams:function(n,e){var t={};return Wh(Dy(e)||[]).forEach(function(r){t[r.name]=r.functionValue}),zt(n,e,se({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:t,transform:pv(e)},Ui(mv(e))))}};function F0(n,e,t,r,i,o,s){o.clientDistX=o.distX,o.clientDistY=o.distY;var a=i==="Start",l=i==="End",u=i==="After",c=n.state.target,f=o.isRequest,d=r.indexOf("Control")>-1;if(!c||a&&d&&!f&&n.areaElement===o.inputEvent.target)return!1;var h=He([],ce(e),!1);if(f){var p=o.requestAble;h.some(function(I){return I.name===p})||h.push.apply(h,He([],ce(n.props.ables.filter(function(I){return I.name===p})),!1))}if(!h.length||h.every(function(I){return I.dragRelation}))return!1;var m=o.inputEvent,g;l&&m&&(g=document.elementFromPoint(o.clientX,o.clientY)||m.target);var v=!1,b=function(){var I;v=!0,(I=o.stop)===null||I===void 0||I.call(o)},w=a&&(!n.targetGesto||!n.controlGesto||!n.targetGesto.isFlag()||!n.controlGesto.isFlag());w&&n.updateRect(i,!0,!1);var _=o.datas,y=d?"controlGesto":"targetGesto",k=n[y],S=function(I,P,A){if(!(P in I)||k!==n[y])return!1;var N=I.name,F=_[N]||(_[N]={});if(a&&(F.isEventStart=!A||!I[A]||I[A](n,o)),!F.isEventStart)return!1;var V=I[P](n,se(se({},o),{stop:b,datas:F,originalDatas:_,inputTarget:g}));return n._emitter.off(),a&&V===!1&&(F.isEventStart=!1),V};w&&h.forEach(function(I){I.unset&&I.unset(n)}),S(UU,"drag".concat(r).concat(i));var E=0,M=0;t.forEach(function(I){if(v)return!1;var P="".concat(I).concat(r).concat(i),A="".concat(I).concat(r,"Condition");i===""&&!f&&IU(n.state,o);var N=h.filter(function(W){return W[P]});N=N.filter(function(W,L){return W.name&&N.indexOf(W)===L});var F=N.filter(function(W){return S(W,P,A)}),V=F.length;v&&++E,V&&++M,!v&&a&&N.length&&!V&&(E+=N.filter(function(W){var L=W.name,z=_[L];return z.isEventStart?W.dragRelation!=="strong":!1}).length?1:0)}),(!u||M)&&S(GU,"drag".concat(r).concat(i));var R=k!==n[y]||E===t.length;if((l||v||R)&&(n.state.gestos={},n.moveables&&n.moveables.forEach(function(I){I.state.gestos={}}),h.forEach(function(I){I.unset&&I.unset(n)})),a&&!R&&!f&&M&&n.props.preventDefault&&(o==null||o.preventDefault()),n.isUnmounted||R)return!1;if(!a&&M&&!s||l){var O=n.props.flushSync||kU;O(function(){n.updateRect(l?i:"",!0,!1),n.forceUpdate()})}return!a&&!l&&!u&&M&&!s&&F0(n,e,t,r,i+"After",o),!0}function g4(n){return function(e){var t,r=e.inputEvent.target,i=n.areaElement,o=n._dragTarget;return!o||!((t=n.controlGesto)===null||t===void 0)&&t.isFlag()?!1:r===o||o.contains(r)||r===i||!n.isMoveableElement(r)&&!n.controlBox.contains(r)||qr(r,"moveable-area")||qr(r,"moveable-padding")||qr(r,"moveable-edgeDraggable")}}function KU(n,e,t){var r=n.controlBox,i=[],o=n.props,s=o.dragArea,a=n.state.target,l=o.dragTarget;return i.push(r),(!s||l)&&i.push(e),!s&&l&&a&&e!==a&&o.dragTargetSelf&&i.push(a),qE(n,i,"targetAbles",t,{dragStart:g4(n),pinchStart:g4(n)})}function qE(n,e,t,r,i){i===void 0&&(i={});var o=t==="targetAbles",s=n.props,a=s.pinchOutside,l=s.pinchThreshold,u=s.preventClickEventOnDrag,c=s.preventClickDefault,f=s.checkInput,d=s.dragFocusedInput,h=s.preventDefault,p=h===void 0?!0:h,m=s.dragContainer,g=Oa(m,!0),v={preventDefault:p,preventRightClick:!0,preventWheelClick:!0,container:g||Vu(n.getControlBoxElement()),pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:o?u:!1,preventClickEventOnDragStart:o?c:!1,preventClickEventByCondition:o?null:function(_){return n.controlBox.contains(_.target)},checkInput:o?f:!1,dragFocusedInput:d},b=new Vxe(e,v),w=r==="Control";return["drag","pinch"].forEach(function(_){["Start","","End"].forEach(function(y){b.on("".concat(_).concat(y),function(k){var S,E=k.eventType,M=_==="drag"&&k.isPinch;if(i[E]&&!i[E](k)){k.stop();return}if(!M){var R=_==="drag"?[_]:["drag",_],O=He([],ce(n[t]),!1),I=F0(n,O,R,r,y,k);I?(n.props.stopPropagation||y==="Start"&&w)&&((S=k==null?void 0:k.inputEvent)===null||S===void 0||S.stopPropagation()):k.stop()}})})}),b}var mAe=function(){function n(e,t,r){var i=this;this.target=e,this.moveable=t,this.eventName=r,this.ables=[],this._onEvent=function(o){var s=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(l){l[s](a,{inputEvent:o})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return n.prototype.setAbles=function(e){this.ables=e},n.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},n}();function gAe(n,e,t,r){var i;t===void 0&&(t=e);var o=tU(n,e),s=o.matrixes,a=o.is3d,l=o.targetMatrix,u=o.transformOrigin,c=o.targetOrigin,f=o.offsetContainer,d=o.hasFixed,h=o.zoom,p=D6e(f,t),m=p.matrixes,g=p.is3d,v=p.offsetContainer,b=p.zoom,w=r||g||a,_=w?4:3,y=n.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in n,k=l,S=$n(_),E=$n(_),M=$n(_),R=$n(_),O=s.length,I=m.map(function(L){return se(se({},L),{matrix:L.matrix?He([],ce(L.matrix),!1):void 0})}).reverse();s.reverse(),!a&&w&&(k=Js(k,3,4),d4(s)),!g&&w&&d4(I),I.forEach(function(L){E=Ln(E,L.matrix,_)});var P=t||bc(n),A=((i=I[0])===null||i===void 0?void 0:i.target)||Qm(P,P,!0).offsetParent,N=I.slice(1).reduce(function(L,z){return Ln(L,z.matrix,_)},$n(_));s.forEach(function(L,z){if(O-2===z&&(M=S.slice()),O-1===z&&(R=S.slice()),!L.matrix){var q=s[z+1],te=PEe(L,q,A,_,Ln(N,S,_));L.matrix=Of(te,_)}S=Ln(S,L.matrix,_)});var F=!y&&a;k||(k=$n(F?4:3));var V=ew(y&&k.length===16?Js(k,4,3):k,F),W=E;return E=Iq(E,_,_),{hasZoom:h!==1||b!==1,hasFixed:d,matrixes:s,rootMatrix:E,originalRootMatrix:W,beforeMatrix:M,offsetMatrix:R,allMatrix:S,targetMatrix:k,targetTransform:V,inlineTransform:n.style.transform,transformOrigin:u,targetOrigin:c,is3d:w,offsetContainer:f,offsetRootContainer:v}}function vAe(n,e,t,r){t===void 0&&(t=e);var i=0,o=0,s=0,a={},l=EU(n);if(n&&(i=l.offsetWidth,o=l.offsetHeight),n){var u=gAe(n,e,t,r),c=dh(u.allMatrix,u.transformOrigin,i,o);a=se(se({},u),c);var f=dh(u.allMatrix,[50,50],100,100);s=AU([f.pos1,f.pos2],f.direction)}var d=r?4:3;return se(se(se({hasZoom:!1,width:i,height:o,rotation:s},l),{originalRootMatrix:$n(d),rootMatrix:$n(d),beforeMatrix:$n(d),offsetMatrix:$n(d),allMatrix:$n(d),targetMatrix:$n(d),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function v4(n,e,t,r,i,o){o===void 0&&(o=[]);var s=1,a=[0,0],l=vv(),u=vv(),c=vv(),f=vv(),d=[0,0],h={},p=vAe(e,t,i,!0);if(e){var m=fo(e);o.forEach(function(I){h[I]=m(I)});var g=p.is3d?4:3,v=dh(p.offsetMatrix,fn(p.transformOrigin,Nq(p.targetMatrix,g)),p.width,p.height);s=v.direction,a=fn(v.origin,[v.left-p.left,v.top-p.top]),f=L0(p.offsetRootContainer);var b=Qm(r,r,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var w=dh(Ln(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),_=dh(p.originalRootMatrix,Ny(fo(b)("transformOrigin")).map(function(I){return parseFloat(I)}),b.offsetWidth,b.offsetHeight);if(l=Xk(w,f),c=Xk(_,f,b,!0),n){var y=w.left,k=w.top;u=Xk({left:y,top:k,bottom:k,right:k},f)}}else{l=L0(e),c=O6e(b),n&&(u=L0(n));var S=c.left,E=c.top,M=c.clientLeft,R=c.clientTop,O=[l.left-S,l.top-E];d=Ct(Kh(p.rootMatrix,O,4),[M+p.left,R+p.top])}}return se({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:f,beforeDirection:s,beforeOrigin:a,originalBeforeOrigin:a,target:e,style:h,offsetDelta:d},p)}function a9(n){var e=n.pos1,t=n.pos2,r=n.pos3,i=n.pos4;if(!e||!t||!r||!i)return null;var o=Df([e,t,r,i]),s=[o.minX,o.minY],a=Ct(n.origin,s);return e=Ct(e,s),t=Ct(t,s),r=Ct(r,s),i=Ct(i,s),se(se({},n),{left:n.left,top:n.top,posDelta:s,pos1:e,pos2:t,pos3:r,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var Jh=function(n){Gg(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state=se({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},v4(null)),t.renderState={},t.enabledAbles=[],t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isMoveableMounted=!1,t.isUnmounted=!1,t.events={mouseEnter:null,mouseLeave:null},t._emitter=new G_,t._prevOriginalDragTarget=null,t._originalDragTarget=null,t._prevDragTarget=null,t._dragTarget=null,t._prevPropTarget=null,t._propTarget=null,t._prevDragArea=!1,t._isPropTargetChanged=!1,t._hasFirstTarget=!1,t._reiszeObserver=null,t._observerId=0,t._mutationObserver=null,t._rootContainer=null,t._viewContainer=null,t._viewClassNames=[],t._store={},t.checkUpdateRect=function(){if(!t.isDragging()){var r=t.props.parentMoveable;if(r){r.checkUpdateRect();return}O4e(t._observerId),t._observerId=cq(function(){t.isDragging()||t.updateRect()})}},t._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},t}return e.prototype.render=function(){var t=this.props,r=this.getState(),i=t.parentPosition,o=t.className,s=t.target,a=t.zoom,l=t.cspNonce,u=t.translateZ,c=t.cssStyled,f=t.groupable,d=t.linePadding,h=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=ce(i||[0,0],2),m=p[0],g=p[1],v=r.left,b=r.top,w=r.target,_=r.direction,y=r.hasFixed,k=r.offsetDelta,S=t.targets,E=this.isDragging(),M={};this.getEnabledAbles().forEach(function(N){M["data-able-".concat(N.name.toLowerCase())]=!0});var R=this._getAbleClassName(),O=S&&S.length&&(w||f)||s||!this._hasFirstTarget&&this.state.isPersisted,I=this.controlBox||this.props.firstRenderState||this.props.persistData,P=[v-m,b-g];!f&&t.useAccuratePosition&&(P[0]+=k[0],P[1]+=k[1]);var A={position:y?"fixed":"absolute",display:O?"block":"none",visibility:I?"visible":"hidden",transform:"translate3d(".concat(P[0],"px, ").concat(P[1],"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return d&&(A["--moveable-line-padding"]=d),h&&(A["--moveable-control-padding"]=h),Bs(c,se({cspNonce:l,ref:Tl(this,"controlBox"),className:"".concat(kt("control-box",_===-1?"reverse":"",E?"dragging":"")," ").concat(R," ").concat(o)},M,{onClick:this._onPreventClick,style:A}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,r=t.parentMoveable,i=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){var t,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(t=this._reiszeObserver)===null||t===void 0||t.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),qd(this,!1),qd(this,!0);var o=this.events;for(var s in o){var a=o[s];a&&a.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){var r=this.props.ables||[];return co(r,function(i){return i.name===t})},e.prototype.getContainer=function(){var t=this.props,r=t.parentMoveable,i=t.wrapperMoveable,o=t.container;return o||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var r;return t&&(((r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"class"))||"").indexOf(xE)>-1},e.prototype.dragStart=function(t){var r=this.targetGesto,i=this.controlGesto;return r&&g4(this)({inputEvent:t})?r.isFlag()||r.triggerDragStart(t):i&&this.isMoveableElement(t.target)&&(i.isFlag()||i.triggerDragStart(t)),this},e.prototype.hitTest=function(t){var r=this.state,i=r.target,o=r.pos1,s=r.pos2,a=r.pos3,l=r.pos4,u=r.targetClientRect;if(!i)return 0;var c;if(gp(t)){var f=t.getBoundingClientRect();c={left:f.left,top:f.top,width:f.width,height:f.height}}else c=se({width:0,height:0},t);var d=c.left,h=c.top,p=c.width,m=c.height,g=D7([o,s,l,a],u),v=Bxe(g,[[d,h],[d+p,h],[d+p,h+m],[d,h+m]]),b=zq(g);return!v||!b?0:Math.min(100,v/b*100)},e.prototype.isInside=function(t,r){var i=this.state,o=i.target,s=i.pos1,a=i.pos2,l=i.pos3,u=i.pos4,c=i.targetClientRect;return o?$S([t,r],D7([s,a,u,l],c)):!1},e.prototype.updateRect=function(t,r,i){i===void 0&&(i=!0);var o=this.props,s=!o.parentPosition&&!o.wrapperMoveable;s&&Uh(!0);var a=o.parentMoveable,l=this.state,u=l.target||o.target,c=this.getContainer(),f=a?a._rootContainer:this._rootContainer,d=v4(this.controlBox,u,c,c,f||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&o.persistData){var h=a9(o.persistData);for(var p in h)d[p]=h[p]}s&&Uh(),this.updateState(d,a?!1:i)},e.prototype.isDragging=function(t){var r,i,o=this.targetGesto,s=this.controlGesto;if(o!=null&&o.isFlag()){if(!t)return!0;var a=o.getEventData();return!!(!((r=a[t])===null||r===void 0)&&r.isEventStart)}if(s!=null&&s.isFlag()){if(!t)return!0;var a=s.getEventData();return!!(!((i=a[t])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,r=fs(this.state),i=ce(r,4),o=i[0],s=i[1],a=i[2],l=i[3],u=is(r),c=t.width,f=t.height,d=u.width,h=u.height,p=u.left,m=u.top,g=[t.left,t.top],v=fn(g,t.origin),b=fn(g,t.beforeOrigin),w=t.transformOrigin;return{width:d,height:h,left:p,top:m,pos1:o,pos2:s,pos3:a,pos4:l,offsetWidth:c,offsetHeight:f,beforeOrigin:b,origin:v,transformOrigin:w,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){if(!t||t==="target"){var r=this.targetGesto;(r==null?void 0:r.isIdle())===!1&&h4(this,!1),r==null||r.stop()}if(!t||t==="control"){var r=this.controlGesto;(r==null?void 0:r.isIdle())===!1&&h4(this,!0),r==null||r.stop()}},e.prototype.getRotation=function(){var t=this.state,r=t.pos1,i=t.pos2,o=t.direction;return jEe(r,i,o)},e.prototype.request=function(t,r,i){r===void 0&&(r={});var o=this,s=o.props,a=s.parentMoveable||s.wrapperMoveable||o,l=a.props.ables,u=s.groupable,c=co(l,function(v){return v.name===t});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var f=c.request(o),d=i||r.isInstant,h=f.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(f.isControl?"Control":""),m=He([],ce(a[h]),!1),g={request:function(v){return F0(o,m,["drag"],p,"",se(se({},f.request(v)),{requestAble:t,isRequest:!0}),d),g},requestEnd:function(){return F0(o,m,["drag"],p,"End",se(se({},f.requestEnd()),{requestAble:t,isRequest:!0}),d),g}};return F0(o,m,["drag"],p,"Start",se(se({},f.requestStart(r)),{requestAble:t,isRequest:!0}),d),d?g.request(r).requestEnd():g},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),r=this.props,i=r.padding,o=t.originalBeforeOrigin,s=t.transformOrigin,a=t.allMatrix,l=t.is3d,u=t.pos1,c=t.pos2,f=t.pos3,d=t.pos4,h=t.left,p=t.top,m=t.isPersisted;if(!i){t.renderPoses=[u,c,f,d];return}var g=FU(i),v=g.left,b=g.top,w=g.bottom,_=g.right,y=l?4:3,k=[];m?k=s:this.controlBox&&r.groupable?k=o:k=fn(o,[h,p]);var S=Ty(y,Of(k.map(function(E){return-E}),y),a,Of(s,y));t.renderPoses=[yv(S,u,[-v,-b],y),yv(S,c,[_,-b],y),yv(S,f,[-v,w],y),yv(S,d,[_,w],y)]},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,r=t.target,i=t.container,o=t.parentMoveable,s=this.state,a=s.target,l=s.container;if(!(!a&&!r)){this.updateAbles();var u=!p4(a,r),c=u||!p4(l,i);if(c){var f=i||this.controlBox;f&&this.unsetAbles(),this.updateState({target:r,container:i}),!o&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(t,r){var i=this.props;if(this._emitter.trigger(t,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(t,r,!0);var o=i[t];return o&&o(r)},e.prototype.useCSS=function(t,r){var i=this.props.customStyledMap,o=t+r;return i[o]||(i[o]=Vq(t,r)),i[o]},e.prototype.getState=function(){var t,r=this.props;(r.target||!((t=r.targets)===null||t===void 0)&&t.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&o){var a=a9(o);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(t)})},e.prototype.updateAbles=function(t,r){t===void 0&&(t=this.props.ables),r===void 0&&(r="");var i=this.props,o=i.triggerAblesSimultaneously,s=this.getEnabledAbles(t),a="drag".concat(r,"Start"),l="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),c=bv(s,[a,l],o),f=bv(s,[u],o);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=f},e.prototype.updateState=function(t,r){if(r){if(this.isUnmounted)return;this.setState(t)}else{var i=this.state;for(var o in t)i[o]=t[o]}},e.prototype.getEnabledAbles=function(t){t===void 0&&(t=this.props.ables);var r=this.props;return t.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var t=this,r=this.props,i=r.triggerAblesSimultaneously,o={createElement:Bs};return this.renderState={},LEe(PU(bv(this.getEnabledAbles(),["render"],i).map(function(s){var a=s.render;return a(t,o)||[]})).filter(function(s){return s}),function(s){var a=s.key;return a}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var t=this.getEnabledAbles().reduce(function(r,i){var o,s,a=(s=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&s!==void 0?s:[];return He(He([],ce(r),!1),ce(a),!1)},He([],ce(this.props.requestStyles||[]),!1));return t},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.controlBox,r=this.targetAbles.length,i=this.controlAbles.length,o=this._dragTarget,s=!r&&this.targetGesto||this._isTargetChanged(!0);s&&(qd(this,!1),this.updateState({gestos:{}})),i||qd(this,!0),o&&r&&!this.targetGesto&&(this.targetGesto=KU(this,o,"")),!this.controlGesto&&i&&(this.controlGesto=qE(this,t,"controlAbles","Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=Oa(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,r=t,i=r.zoom,o=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,a=r.parentMoveable;if(o||a&&s)return[];var l=this.getState().renderPoses,u={createElement:Bs};return[[0,1],[1,3],[3,2],[2,0]].map(function(c,f){var d=ce(c,2),h=d[0],p=d[1];return Xm(u,"",l[h],l[p],i,"render-line-".concat(f))})},e.prototype._isTargetChanged=function(t){var r=this.props,i=r.dragTarget||r.target,o=this._prevOriginalDragTarget,s=this._prevDragArea,a=r.dragArea,l=!a&&o!==i,u=(t||a)&&s!==a;return l||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,o=this.events,s=Wl(o);if(this._isTargetChanged())for(var a in o){var l=o[a];l&&l.destroy(),o[a]=null}if(i){var u=this.enabledAbles;s.forEach(function(c){var f=bv(u,[c]),d=f.length>0,h=o[c];if(!d){h&&(h.destroy(),o[c]=null);return}h||(h=new mAe(i,t,c),o[c]=h),h.setAbles(f)})}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=Oa(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=Oa(t,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(He(He([],ce(this._getAbleViewClassNames()),!1),[this.isDragging()?KEe:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var r=this._viewContainer,i=RU(t.filter(Boolean),function(u){return u}).map(function(u){var c=ce(u,1),f=c[0];return f}),o=this._viewClassNames,s=Hg(o,i),a=s.removed,l=s.added;a.forEach(function(u){pq(r,o[u])}),l.forEach(function(u){hq(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,t))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var r=this;t===void 0&&(t="");var i=this.getEnabledAbles(),o=this.targetGesto,s=this.controlGesto,a=o!=null&&o.isFlag()?o.getEventData():{},l=s!=null&&s.isFlag()?s.getEventData():{};return i.map(function(u){var c,f,d,h=u.name,p=((c=u.className)===null||c===void 0?void 0:c.call(u,r))||"";return(!((f=a[h])===null||f===void 0)&&f.isEventStart||!((d=l[h])===null||d===void 0)&&d.isEventStart)&&(p+=" ".concat(kt("".concat(h).concat(t,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var r,i=this.props,o=i.target,s=Vu(this.getControlBoxElement());if(!s.ResizeObserver||!o||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(t.target===o&&this._reiszeObserver)){var a=new s.ResizeObserver(this.checkUpdateRect);a.observe(o,{box:"border-box"}),this._reiszeObserver=a}},e.prototype._updateMutationObserver=function(t){var r=this,i,o=this.props,s=o.target,a=Vu(this.getControlBoxElement());if(!a.MutationObserver||!s||!o.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(t.target===s&&this._mutationObserver)){var l=new a.MutationObserver(function(u){var c,f;try{for(var d=$xe(u),h=d.next();!h.done;h=d.next()){var p=h.value;p.type==="attributes"&&p.attributeName==="style"&&r.checkUpdateRect()}}catch(m){c={error:m}}finally{try{h&&!h.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}});l.observe(s,{attributes:!0}),this._mutationObserver=l}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:kU,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(wq),UE={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(n,e){var t,r=n.props,i=r.targets||[],o=n.getState(),s=o.left,a=o.top,l=o.isPersisted,u=r.zoom||1,c=n.renderGroupRects,f=((t=r.persistData)===null||t===void 0?void 0:t.children)||[];l?i=f.map(function(){return null}):f=[];var d=Ud(n,"parentPosition",[s,a],function(p){return p.join(",")}),h=Ud(n,"requestStyles",n.getRequestChildStyles(),function(p){return p.join(",")});return n.moveables=n.moveables.slice(0,i.length),He(He([],ce(i.map(function(p,m){return e.createElement(Jh,{key:"moveable"+m,ref:oq(n,"moveables",m),target:p,origin:!1,requestStyles:h,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:n,parentPosition:[s,a],persistData:f[m],zoom:u})})),!1),ce(PU(c.map(function(p,m){var g=p.pos1,v=p.pos2,b=p.pos3,w=p.pos4,_=[g,v,b,w];return[[0,1],[1,3],[3,2],[2,0]].map(function(y,k){var S=ce(y,2),E=S[0],M=S[1];return Xm(e,"",Ct(_[E],d),Ct(_[M],d),u,"group-rect-".concat(m,"-").concat(k))})}))),!1)}},bAe=Kg("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(n,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(n,e){var t=n.props.target,r=e.inputEvent,i=e.inputTarget,o=n.isMoveableElement(i),s=!o&&n.controlBox.contains(i);if(!(!r||!i||e.isDrag||n.isMoveableElement(i)||s)){var a=t.contains(i);dt(n,"onClick",zt(n,e,{isDouble:e.isDouble,inputTarget:i,isTarget:t===i,moveableTarget:n.props.target,containsTarget:a}))}},dragGroupEnd:function(n,e){var t=e.inputEvent,r=e.inputTarget;if(!(!t||!r||e.isDrag||n.isMoveableElement(r)||e.datas.inputTarget===r)){var i=n.props.targets,o=i.indexOf(r),s=o>-1,a=!1;o===-1&&(o=Vl(i,function(l){return l.contains(r)}),a=o>-1),dt(n,"onClickGroup",zt(n,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:o,isTarget:s,containsTarget:a,moveableTarget:i[o]}))}},dragControlEnd:function(n,e){this.dragEnd(n,e)},dragGroupControlEnd:function(n,e){this.dragEnd(n,e)}});function md(n){var e=n.originalDatas.draggable;return e||(n.originalDatas.draggable={},e=n.originalDatas.draggable),se(se({},n),{datas:e})}var yAe=Kg("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(n,e){var t=n.props,r=t.edgeDraggable;return r?iU(e,"edgeDraggable",r,n.getState().renderPoses,t.zoom):[]},dragCondition:function(n,e){var t,r=n.props,i=(t=e.inputEvent)===null||t===void 0?void 0:t.target;return!r.edgeDraggable||!i?!1:!r.draggable&&qr(i,kt("direction"))&&qr(i,kt("edge"))&&qr(i,kt("edgeDraggable"))},dragStart:function(n,e){return Hi.dragStart(n,md(e))},drag:function(n,e){return Hi.drag(n,md(e))},dragEnd:function(n,e){return Hi.dragEnd(n,md(e))},dragGroupCondition:function(n,e){var t,r=n.props,i=(t=e.inputEvent)===null||t===void 0?void 0:t.target;return!r.edgeDraggable||!i?!1:!r.draggable&&qr(i,kt("direction"))&&qr(i,kt("line"))},dragGroupStart:function(n,e){return Hi.dragGroupStart(n,md(e))},dragGroup:function(n,e){return Hi.dragGroup(n,md(e))},dragGroupEnd:function(n,e){return Hi.dragGroupEnd(n,md(e))},unset:function(n){return Hi.unset(n)}}),JU={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},GE=[UU,HU,CEe,VEe,Hi,yAe,u4,WEe,UEe,sEe,XEe,QEe,JEe,uAe,lAe,hAe,UE,JU,bAe,jU,GU],_Ae=GE.reduce(function(n,e){return(e.events||[]).forEach(function(t){dq(n,t)}),n},[]),wAe=GE.reduce(function(n,e){return(e.props||[]).forEach(function(t){dq(n,t)}),n},[]);function l9(n,e){var t=ce(n,3),r=t[0],i=t[1],o=t[2];return(r*e[0]+i*e[1]+o)/Math.sqrt(r*r+i*i)}function kv(n,e){var t=ce(n,2),r=t[0],i=t[1];return-r*e[0]-i*e[1]}function u9(n,e){return Math.max.apply(Math,He([],ce(n.map(function(t){var r=ce(t,4),i=r[0],o=r[1],s=r[2],a=r[3];return Math.max(i[e],o[e],s[e],a[e])})),!1))}function c9(n,e){return Math.min.apply(Math,He([],ce(n.map(function(t){var r=ce(t,4),i=r[0],o=r[1],s=r[2],a=r[3];return Math.min(i[e],o[e],s[e],a[e])})),!1))}function kAe(n,e){var t,r,i,o=[0,0],s=[0,0],a=[0,0],l=[0,0],u=0,c=0;if(!n.length)return{pos1:o,pos2:s,pos3:a,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:e};var f=Ft(e,Qi);if(f%90){var d=f/180*Math.PI,h=Math.tan(d),p=-1/h,m=[o4,I7],g=[[0,0],[0,0]],v=[o4,I7],b=[[0,0],[0,0]];n.forEach(function(re){re.forEach(function(ne){var fe=l9([-h,1,0],ne),ie=l9([-p,1,0],ne);m[0]>fe&&(g[0]=ne,m[0]=fe),m[1]<fe&&(g[1]=ne,m[1]=fe),v[0]>ie&&(b[0]=ne,v[0]=ie),v[1]<ie&&(b[1]=ne,v[1]=ie)})});var w=ce(g,2),_=w[0],y=w[1],k=ce(b,2),S=k[0],E=k[1],M=[-h,1,kv([-h,1],_)],R=[-h,1,kv([-h,1],y)],O=[-p,1,kv([-p,1],S)],I=[-p,1,kv([-p,1],E)];t=ce([[M,O],[M,I],[R,O],[R,I]].map(function(re){var ne=ce(re,2),fe=ne[0],ie=ne[1];return CE(fe,ie)[0]}),4),o=t[0],s=t[1],a=t[2],l=t[3],u=v[1]-v[0],c=m[1]-m[0]}else{var P=c9(n,0),A=c9(n,1),N=u9(n,0),F=u9(n,1);if(o=[P,A],s=[N,A],a=[P,F],l=[N,F],u=N-P,c=F-A,f%180){var V=[a,o,l,s];r=ce(V,4),o=r[0],s=r[1],a=r[2],l=r[3],u=F-A,c=N-P}}if(f%360>180){var V=[l,a,s,o];i=ce(V,4),o=i[0],s=i[1],a=i[2],l=i[3]}var W=Df([o,s,a,l]),L=W.minX,z=W.minY,q=W.maxX,te=W.maxY;return{pos1:o,pos2:s,pos3:a,pos4:l,width:u,height:c,minX:L,minY:z,maxX:q,maxY:te,rotation:e}}function YU(n,e){var t=e.map(function(r){if(Fr(r)){var i=YU(n,r),o=i.length;return o>1?i:o===1?i[0]:null}else{var s=co(n,function(a){var l=a.manager;return l.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return t.length===1&&Fr(t[0])?t[0]:t}var CAe=function(n){Gg(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.differ=new Fq,t.moveables=[],t.transformOrigin="50% 50%",t.renderGroupRects=[],t._targetGroups=[],t._hasFirstTargets=!1,t}return e.prototype.componentDidMount=function(){n.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,r,i){var o;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;Uh(!0),this.moveables.forEach(function(ae){ae.updateRect(t,!1,!1)});var a=this.props,l=this.moveables,u=s.target||a.target,c=l.map(function(ae){return{finded:!1,manager:ae}}),f=this.props.targetGroups||[],d=YU(c,f),h=a.useDefaultGroupRotate;d.push.apply(d,He([],ce(c.filter(function(ae){var Me=ae.finded;return!Me}).map(function(ae){var Me=ae.manager;return Me})),!1));var p=[],m=!r||t!==""&&a.updateGroup,g=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var v=(o=a.persistData)===null||o===void 0?void 0:o.rotation;v!=null&&(g=v)}function b(ae,Me,X){var ge=ae.map(function(ue){if(Fr(ue)){var Oe=b(ue,Me),Ue=[Oe.pos1,Oe.pos2,Oe.pos3,Oe.pos4];return p.push(Oe),{poses:Ue,rotation:Oe.rotation}}else return{poses:fs(ue.state),rotation:ue.getRotation()}}),U=ge.map(function(ue){var Oe=ue.rotation;return Oe}),Ce=0,Ee=U[0],Ae=U.every(function(ue){return Math.abs(Ee-ue)<.1});m?Ce=!h&&Ae?Ee:g:Ce=!h&&!X&&Ae?Ee:Me;var De=ge.map(function(ue){var Oe=ue.poses;return Oe}),nt=kAe(De,Ce);return nt}var w=b(d,this.rotation,!0);m&&(this.rotation=w.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=p;var _=this.transformOrigin,y=this.rotation,k=this.scale,S=w.width,E=w.height,M=w.minX,R=w.minY,O=HEe([[0,0],[S,0],[0,E],[S,E]],HE(_,S,E),this.rotation/180*Math.PI),I=Df(O.result),P=I.minX,A=I.minY,N=" rotate(".concat(y,"deg)")+" scale(".concat(Xo(k[0]),", ").concat(Xo(k[1]),")"),F="translate(".concat(-P,"px, ").concat(-A,"px)").concat(N);this.controlBox.style.transform="translate3d(".concat(M,"px, ").concat(R,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(_,";")+"width:".concat(S,"px;height:").concat(E,"px;")+"transform: ".concat(F),s.width=S,s.height=E;var V=this.getContainer(),W=v4(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||V,[]),L=[W.left,W.top],z=ce(fs(W),4),q=z[0],te=z[1],re=z[2],ne=z[3],fe=Df([q,te,re,ne]),ie=[fe.minX,fe.minY],G=Xo(k[0]*k[1]);W.pos1=Ct(q,ie),W.pos2=Ct(te,ie),W.pos3=Ct(re,ie),W.pos4=Ct(ne,ie),W.left=M-W.left+ie[0],W.top=R-W.top+ie[1],W.origin=Ct(fn(L,W.origin),ie),W.beforeOrigin=Ct(fn(L,W.beforeOrigin),ie),W.originalBeforeOrigin=fn(L,W.originalBeforeOrigin),W.transformOrigin=Ct(fn(L,W.transformOrigin),ie),u.style.transform="translate(".concat(-P-ie[0],"px, ").concat(-A-ie[1],"px)")+N,Uh(),this.updateState(se(se({},W),{posDelta:ie,direction:G,beforeDirection:G}),i)},e.prototype.getRect=function(){return se(se({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.triggerEvent=function(t,r,i){if(i||t.indexOf("Group")>-1)return n.prototype.triggerEvent.call(this,t,r);this._emitter.trigger(t,r)},e.prototype.getRequestChildStyles=function(){var t=this.getEnabledAbles().reduce(function(r,i){var o,s,a=(s=(o=i.requestChildStyle)===null||o===void 0?void 0:o.call(i))!==null&&s!==void 0?s:[];return He(He([],ce(r),!1),ce(a),!1)},[]);return t},e.prototype.getMoveables=function(){return He([],ce(this.moveables),!1)},e.prototype.updateAbles=function(){n.prototype.updateAbles.call(this,He(He([],ce(this.props.ables),!1),[UE],!1),"Group")},e.prototype._updateTargets=function(){n.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Oa(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,r=this.props,i=this._prevDragTarget,o=r.dragTarget||this.areaElement,s=r.targets,a=this.differ.update(s),l=a.added,u=a.changed,c=a.removed,f=l.length||c.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(qd(this,!1),qd(this,!0),this.updateState({gestos:{}})),i!==o&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=KU(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=qE(this,this.controlBox,"controlAbles","GroupControl")));var d=!p4(t.container,r.container);d&&(t.container=r.container),(d||f||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!LU(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},e.prototype._updateObserver=function(){},e.defaultProps=se(se({},Jh.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Jh),SAe=function(n){Gg(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.moveables=[],t}return e.prototype.render=function(){var t=this,r,i=this.props,o=i.cspNonce,s=i.cssStyled,a=i.persistData,l=i.targets||[],u=l.length,c=this.isUnmounted||!u,f=(r=a==null?void 0:a.children)!==null&&r!==void 0?r:[];return c&&!u&&f.length?l=f.map(function(){return null}):c||(f=[]),Bs(s,{cspNonce:o,ref:Tl(this,"controlBox"),className:kt("control-box")},l.map(function(d,h){var p,m,g=(m=(p=i.individualGroupableProps)===null||p===void 0?void 0:p.call(i,d,h))!==null&&m!==void 0?m:{};return Bs(Jh,se({key:"moveable"+h,ref:oq(t,"moveables",h)},i,g,{target:d,wrapperMoveable:t,isWrapperMounted:t.isMoveableMounted,persistData:f[h]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,r,i){i===void 0&&(i=!0),Uh(!0),this.moveables.forEach(function(o){o.updateRect(t,r,i)}),Uh()},e.prototype.getRect=function(){return se(se({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.request=function(t,r,i){r===void 0&&(r={});var o=this.moveables.map(function(l){return l.request(t,se(se({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,a={request:function(l){return o.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return o.forEach(function(l){return l.requestEnd()}),this}};return s?a.request(r).requestEnd():a},e.prototype.dragStart=function(t){var r=t.target,i=co(this.moveables,function(o){var s=o.getTargets()[0],a=o.getControlBoxElement(),l=o.getDragElement();return!s||!l?!1:l===r||l.contains(r)||l!==s&&s===r||s.contains(r)||a===r||a.contains(r)});return i&&i.dragStart(t),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return He([],ce(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(Jh);function XU(n,e){var t=[];return n.forEach(function(r){if(r){if(uo(r)){e[r]&&t.push.apply(t,He([],ce(e[r]),!1));return}Fr(r)?t.push.apply(t,He([],ce(XU(r,e)),!1)):t.push(r)}}),t}function QU(n,e){var t=[];return n.forEach(function(r){if(r){if(uo(r)){e[r]&&t.push.apply(t,He([],ce(e[r]),!1));return}Fr(r)?t.push(QU(r,e)):t.push(r)}}),t}function ZU(n,e){return n.length!==e.length||n.some(function(t,r){var i=e[r];return!t&&!i?!1:t!=i?Fr(t)&&Fr(i)?ZU(t,i):!0:!1})}var xAe=function(n){Gg(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t._differ=new Fq,t._elementTargets=[],t._tmpRefTargets=[],t._tmpSelectorMap={},t._onChangeTargets=null,t}return e.makeStyled=function(){var t={},r=this.getTotalAbles();r.forEach(function(o){var s=o.css;s&&s.forEach(function(a){t[a]=!0})});var i=Wl(t).join(`
`);this.defaultStyled=Vq("div",y4e(xE,c6e+i))},e.getTotalAbles=function(){return He([HU,UE,JU,jU],ce(this.defaultAbles),!1)},e.prototype.render=function(){var t,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,o=i.ables,s=i.props,a=Qxe(i,["ables","props"]),l=ce(this._updateRefs(!0),2),u=l[0],c=l[1],f=XU(u,c),d=f.length>1,h=r.getTotalAbles(),p=He(He([],ce(h),!1),ce(o||[]),!1),m=se(se(se({},a),s||{}),{ables:p,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=f;var g=null,v=this.moveable,b=a.persistData;if(b!=null&&b.children&&(d=!0),a.individualGroupable)return Bs(SAe,se({key:"individual-group",ref:Tl(this,"moveable")},m,{target:null,targets:f}));if(d){var w=QU(u,c);if(v&&!v.props.groupable&&!v.props.individualGroupable){var _=v.props.target;_&&f.indexOf(_)>-1&&(g=se({},v.state))}return Bs(CAe,se({key:"group",ref:Tl(this,"moveable")},m,(t=a.groupableProps)!==null&&t!==void 0?t:{},{target:null,targets:f,targetGroups:w,firstRenderState:g}))}else{var y=f[0];if(v&&(v.props.groupable||v.props.individualGroupable)){var k=v.moveables||[],S=co(k,function(E){return E.props.target===y});S&&(g=se({},S.state))}return Bs(Jh,se({key:"single",ref:Tl(this,"moveable")},m,{target:y,firstRenderState:g}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var t,r;return(r=(t=this.moveable)===null||t===void 0?void 0:t.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs()},e.prototype.waitToChangeTarget=function(){var t=this,r;return this._onChangeTargets=function(){t._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(t){var r=this.refTargets,i=jE(this.props.target||this.props.targets),o=typeof document<"u",s=ZU(r,i),a=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(uo(c)){var f=a[c];f?l[c]=a[c]:o&&(s=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else Fr(c)&&c.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=l,[i,l,!t&&s]},e.prototype._checkChangeTargets=function(){var t,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var o=this._differ.update(this._elementTargets),s=o.added,a=o.removed,l=s.length||a.length;l&&((r=(t=this.props).onChangeTargets)===null||r===void 0||r.call(t,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=ce(this._updateRefs(),3),c=u[0],f=u[1],d=u[2];this.refTargets=c,this.selectorMap=f,d&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,Zxe([_4e(Jq)],e.prototype,"moveable",void 0),e}(wq),EAe=function(n){Gg(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.defaultAbles=GE,e}(xAe),b4=function(n,e){return b4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},b4(n,e)};function KE(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");b4(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Zm=function(){return Zm=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Zm.apply(this,arguments)};function AAe(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}var MAe=function(n){KE(e,n);function e(r){var i=n.call(this,r)||this;return i.state={},i.state=i.props,i}var t=e.prototype;return t.render=function(){return Bs(EAe,Zm({ref:Tl(this,"moveable")},this.state))},e}(vE),$U=wAe,eG=Jq,tG=_Ae,TAe=function(n){KE(e,n);function e(r,i){i===void 0&&(i={});var o=n.call(this)||this;o.containerProvider=null,o.selfElement=null,o._warp=!1;var s=Zm({},i),a={};tG.forEach(function(c){a[uq("on ".concat(c))]=function(f){return o.trigger(c,f)}});var l;i.warpSelf?(delete i.warpSelf,o._warp=!0,l=r):(l=mp(r).createElement("div"),r.appendChild(l)),o.containerProvider=M7(Bs(MAe,Zm({ref:Tl(o,"innerMoveable")},s,a)),l),o.selfElement=l;var u=s.target;return Fr(u)&&u.length>1&&o.updateRect(),o}var t=e.prototype;return t.setState=function(r,i){this.innerMoveable.setState(r,i)},t.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},t.dragStart=function(r){var i=this.innerMoveable;i.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r)},t.destroy=function(){var r,i=this.selfElement;M7(null,i,this.containerProvider),this._warp||(r=i==null?void 0:i.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},t.getMoveable=function(){return this.innerMoveable.moveable},e=AAe([y7(eG,function(r,i){r[i]||(r[i]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=this.getMoveable();if(!(!a||!a[i]))return a[i].apply(a,o)})}),y7($U,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(o){var s;this.setState((s={},s[i]=o,s))},enumerable:!0,configurable:!0})})],e),e}(G_),OAe=function(n){KE(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(TAe);function DAe(n){let e;return{c(){e=B("div")},m(t,r){H(t,e,r),n[2](e)},p:pe,i:pe,o:pe,d(t){t&&j(e),n[2](null)}}}function RAe(n,e,t){const r=Ga();let i={},o,s;U4(()=>{const u=e;i={},$U.forEach(c=>{c in u&&(i[c]=u[c])}),s&&dn().then(()=>{s.setState({...i})})}),Tn(()=>{s=new OAe(o,{...i,warpSelf:!0}),tG.forEach(u=>{const c=uq(`on ${u}`);s.on(u,f=>{e[c]&&e[c](f),r(u,f)})})}),Kr(()=>{s&&s.destroy()});function a(){return s}function l(u){rt[u?"unshift":"push"](()=>{o=u,t(0,o)})}return n.$$set=u=>{t(6,e=Te(Te({},e),_t(u)))},e=_t(e),[o,a,l]}let PAe=class extends ye{constructor(e){super(),be(this,e,RAe,DAe,Be,{getInstance:1})}get getInstance(){return this.$$.ctx[1]}};const $k=PAe,IAe=(()=>{const n=$k.prototype;return n&&eG.forEach(e=>{n[e]=function(...t){const r=this.getInstance(),i=r[e](...t);return i===r?this:i}}),$k})();function f9(n){let e,t;return e=new IAe({props:{target:document.querySelector(".ProseMirror-selectednode"),container:null,origin:!1,edge:!1,throttleDrag:0,keepRatio:!0,resizable:!0,throttleResize:0,scalable:!0,throttleScale:0,renderDirections:["w","e"]}}),e.$on("resize",BAe),e.$on("resizeEnd",n[3]),e.$on("scale",LAe),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function NAe(n){let e=n[0],t,r,i=f9(n);return{c(){i.c(),t=Ze()},m(o,s){i.m(o,s),H(o,t,s),r=!0},p(o,[s]){s&1&&Be(e,e=o[0])?(de(),D(i,1,1,pe),he(),i=f9(o),i.c(),x(i,1),i.m(t.parentNode,t)):i.p(o,s)},i(o){r||(x(i),r=!0)},o(o){D(i),r=!1},d(o){o&&j(t),i.d(o)}}}const BAe=({detail:{target:n,width:e,height:t,delta:r}})=>{r[0]&&(n.style.width=`${e}px`),r[1]&&(n.style.height=`${t}px`)},LAe=({detail:{target:n,transform:e}})=>{n.style.transform=e};function FAe(n,e,t){let{editor:r}=e;const i=()=>{const a=document.querySelector(".ProseMirror-selectednode");if(a){const l=r.state.selection;r.commands.setImage({src:a.src,width:Number(a.style.width.replace("px","")),height:Number(a.style.height.replace("px",""))}),r.commands.setNodeSelection(l.from)}};let o=0;const s=()=>{i(),t(0,o++,o)};return n.$$set=a=>{"editor"in a&&t(2,r=a.editor)},[o,i,r,s]}class zAe extends ye{constructor(e){super(),be(this,e,FAe,NAe,Be,{editor:2})}}const jAe={type:"doc",content:[{type:"heading",attrs:{level:2},content:[{type:"text",text:"Introducing Novel Svelte"}]},{type:"paragraph",content:[{type:"text",marks:[{type:"link",attrs:{href:"https://github.com/tglide/novel-svelte",target:"_blank",class:"text-stone-400 underline underline-offset-[3px] hover:text-stone-600 transition-colors cursor-pointer"}}],text:"Novel Svelte"},{type:"text",text:" is a Notion-style WYSIWYG editor with AI-powered autocompletion. Built with "},{type:"text",marks:[{type:"link",attrs:{href:"https://tiptap.dev/",target:"_blank",class:"text-stone-400 underline underline-offset-[3px] hover:text-stone-600 transition-colors cursor-pointer"}}],text:"Tiptap"},{type:"text",text:" + "},{type:"text",marks:[{type:"link",attrs:{href:"https://sdk.vercel.ai/docs",target:"_blank",class:"text-stone-400 underline underline-offset-[3px] hover:text-stone-600 transition-colors cursor-pointer text-stone-400 underline underline-offset-[3px] hover:text-stone-600 transition-colors cursor-pointer"}}],text:"Vercel AI SDK"},{type:"text",text:". Ported From Steven Tey's "},{type:"text",marks:[{type:"link",attrs:{href:"https://github.com/steven-tey/novel",target:"_blank",class:"text-stone-400 underline underline-offset-[3px] hover:text-stone-600 transition-colors cursor-pointer"}}],text:"Novel"},{type:"text",text:" project."}]},{type:"heading",attrs:{level:3},content:[{type:"text",text:"Installation"}]},{type:"codeBlock",attrs:{language:null},content:[{type:"text",text:"npm i novel-svelte"}]},{type:"heading",attrs:{level:3},content:[{type:"text",text:"Usage"}]},{type:"codeBlock",attrs:{language:null},content:[{type:"text",text:`<script>
	import { Editor } from "novel-svelte";
<\/script>

<Editor />`}]},{type:"heading",attrs:{level:3},content:[{type:"text",text:"Features"}]},{type:"orderedList",attrs:{tight:!0,start:1},content:[{type:"listItem",content:[{type:"paragraph",content:[{type:"text",text:"Slash menu & bubble menu"}]}]},{type:"listItem",content:[{type:"paragraph",content:[{type:"text",text:"AI autocomplete (type "},{type:"text",marks:[{type:"code"}],text:"++"},{type:"text",text:" to activate, or select from slash menu)"}]}]},{type:"listItem",content:[{type:"paragraph",content:[{type:"text",text:"Image uploads (drag & drop / copy & paste, or select from slash menu) "}]}]}]},{type:"image",attrs:{src:"https://public.blob.vercel-storage.com/pJrjXbdONOnAeZAZ/banner-2wQk82qTwyVgvlhTW21GIkWgqPGD2C.png",alt:"banner.png",title:"banner.png",width:null,height:null}},{type:"horizontalRule"},{type:"heading",attrs:{level:3},content:[{type:"text",text:"Learn more"}]},{type:"taskList",content:[{type:"taskItem",attrs:{checked:!1},content:[{type:"paragraph",content:[{type:"text",text:"Star us on "},{type:"text",marks:[{type:"link",attrs:{href:"https://github.com/tglide/novel-svelte",target:"_blank",class:"text-stone-400 underline underline-offset-[3px] hover:text-stone-600 transition-colors cursor-pointer"}}],text:"GitHub"}]}]},{type:"taskItem",attrs:{checked:!1},content:[{type:"paragraph",content:[{type:"text",text:"Install the "},{type:"text",marks:[{type:"link",attrs:{href:"https://www.npmjs.com/package/novel-svelte",target:"_blank",class:"text-stone-400 underline underline-offset-[3px] hover:text-stone-600 transition-colors cursor-pointer"}}],text:"NPM package"}]}]}]}]},HAe=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,i;const o=t.getAttribute("style"),s=(i=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");t.setAttribute("style",`${s};${o}`)})},VAe=ii.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&HAe(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),WAe=Cr.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;return(e=n.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),qAe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,UAe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,GAe=ii.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Mf({find:qAe,type:this.type})]},addPasteRules(){return[tc({find:UAe,type:this.type})]}}),nG=On.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",gr(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,o=n();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):qW(t)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:a})=>{var l;if(a){const{$to:u}=s.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Lt.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(Dt.create(s.doc,u.pos)):s.setSelection(Lt.create(s.doc,u.pos));else{const f=(l=u.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();f&&(s.insert(c,f),s.setSelection(Lt.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[$W({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),KAe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,rG=On.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",gr(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[$W({find:KAe,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}}),JAe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",YAe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Yh=(n,e)=>{for(const t in e)n[t]=e[t];return n},y4="numeric",_4="ascii",w4="alpha",z0="asciinumeric",p0="alphanumeric",k4="domain",iG="emoji",XAe="scheme",QAe="slashscheme",e3="whitespace";function ZAe(n,e){return n in e||(e[n]=[]),e[n]}function Qc(n,e,t){e[y4]&&(e[z0]=!0,e[p0]=!0),e[_4]&&(e[z0]=!0,e[w4]=!0),e[z0]&&(e[p0]=!0),e[w4]&&(e[p0]=!0),e[p0]&&(e[k4]=!0),e[iG]&&(e[k4]=!0);for(const r in e){const i=ZAe(r,t);i.indexOf(n)<0&&i.push(n)}}function $Ae(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function to(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}to.groups={};to.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||to.groups;let i;return e&&e.j?i=e:(i=new to(e),t&&r&&Qc(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const o=n.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(n[s]);return i.tt(n[o-1],e,t,r)},tt(n,e,t,r){r=r||to.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const o=e;let s,a=i.go(n);if(a?(s=new to,Yh(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new to,o){if(r)if(s.t&&typeof s.t=="string"){const l=Yh($Ae(s.t,r),t);Qc(o,l,r)}else t&&Qc(o,t,r);s.t=o}return i.j[n]=s,s}};const Kt=(n,e,t,r,i)=>n.ta(e,t,r,i),br=(n,e,t,r,i)=>n.tr(e,t,r,i),d9=(n,e,t,r,i)=>n.ts(e,t,r,i),je=(n,e,t,r,i)=>n.tt(e,t,r,i),hl="WORD",C4="UWORD",oG="ASCIINUMERICAL",sG="ALPHANUMERICAL",$m="LOCALHOST",S4="TLD",x4="UTLD",lb="SCHEME",Md="SLASH_SCHEME",JE="NUM",E4="WS",YE="NL",j0="OPENBRACE",H0="CLOSEBRACE",zy="OPENBRACKET",jy="CLOSEBRACKET",Hy="OPENPAREN",Vy="CLOSEPAREN",Wy="OPENANGLEBRACKET",qy="CLOSEANGLEBRACKET",Uy="FULLWIDTHLEFTPAREN",Gy="FULLWIDTHRIGHTPAREN",Ky="LEFTCORNERBRACKET",Jy="RIGHTCORNERBRACKET",Yy="LEFTWHITECORNERBRACKET",Xy="RIGHTWHITECORNERBRACKET",Qy="FULLWIDTHLESSTHAN",Zy="FULLWIDTHGREATERTHAN",$y="AMPERSAND",e2="APOSTROPHE",t2="ASTERISK",cu="AT",n2="BACKSLASH",r2="BACKTICK",i2="CARET",bu="COLON",XE="COMMA",o2="DOLLAR",ca="DOT",s2="EQUALS",QE="EXCLAMATION",No="HYPHEN",V0="PERCENT",a2="PIPE",l2="PLUS",u2="POUND",W0="QUERY",ZE="QUOTE",aG="FULLWIDTHMIDDLEDOT",$E="SEMI",fa="SLASH",q0="TILDE",c2="UNDERSCORE",lG="EMOJI",f2="SYM";var uG=Object.freeze({__proto__:null,ALPHANUMERICAL:sG,AMPERSAND:$y,APOSTROPHE:e2,ASCIINUMERICAL:oG,ASTERISK:t2,AT:cu,BACKSLASH:n2,BACKTICK:r2,CARET:i2,CLOSEANGLEBRACKET:qy,CLOSEBRACE:H0,CLOSEBRACKET:jy,CLOSEPAREN:Vy,COLON:bu,COMMA:XE,DOLLAR:o2,DOT:ca,EMOJI:lG,EQUALS:s2,EXCLAMATION:QE,FULLWIDTHGREATERTHAN:Zy,FULLWIDTHLEFTPAREN:Uy,FULLWIDTHLESSTHAN:Qy,FULLWIDTHMIDDLEDOT:aG,FULLWIDTHRIGHTPAREN:Gy,HYPHEN:No,LEFTCORNERBRACKET:Ky,LEFTWHITECORNERBRACKET:Yy,LOCALHOST:$m,NL:YE,NUM:JE,OPENANGLEBRACKET:Wy,OPENBRACE:j0,OPENBRACKET:zy,OPENPAREN:Hy,PERCENT:V0,PIPE:a2,PLUS:l2,POUND:u2,QUERY:W0,QUOTE:ZE,RIGHTCORNERBRACKET:Jy,RIGHTWHITECORNERBRACKET:Xy,SCHEME:lb,SEMI:$E,SLASH:fa,SLASH_SCHEME:Md,SYM:f2,TILDE:q0,TLD:S4,UNDERSCORE:c2,UTLD:x4,UWORD:C4,WORD:hl,WS:E4});const fl=/[a-z]/,Kp=/\p{L}/u,t3=/\p{Emoji}/u,dl=/\d/,n3=/\s/,h9="\r",r3=`
`,e8e="",t8e="",i3="";let Cv=null,Sv=null;function n8e(n=[]){const e={};to.groups=e;const t=new to;Cv==null&&(Cv=p9(JAe)),Sv==null&&(Sv=p9(YAe)),je(t,"'",e2),je(t,"{",j0),je(t,"}",H0),je(t,"[",zy),je(t,"]",jy),je(t,"(",Hy),je(t,")",Vy),je(t,"<",Wy),je(t,">",qy),je(t,"",Uy),je(t,"",Gy),je(t,"",Ky),je(t,"",Jy),je(t,"",Yy),je(t,"",Xy),je(t,"",Qy),je(t,"",Zy),je(t,"&",$y),je(t,"*",t2),je(t,"@",cu),je(t,"`",r2),je(t,"^",i2),je(t,":",bu),je(t,",",XE),je(t,"$",o2),je(t,".",ca),je(t,"=",s2),je(t,"!",QE),je(t,"-",No),je(t,"%",V0),je(t,"|",a2),je(t,"+",l2),je(t,"#",u2),je(t,"?",W0),je(t,'"',ZE),je(t,"/",fa),je(t,";",$E),je(t,"~",q0),je(t,"_",c2),je(t,"\\",n2),je(t,"",aG);const r=br(t,dl,JE,{[y4]:!0});br(r,dl,r);const i=br(r,fl,oG,{[z0]:!0}),o=br(r,Kp,sG,{[p0]:!0}),s=br(t,fl,hl,{[_4]:!0});br(s,dl,i),br(s,fl,s),br(i,dl,i),br(i,fl,i);const a=br(t,Kp,C4,{[w4]:!0});br(a,fl),br(a,dl,o),br(a,Kp,a),br(o,dl,o),br(o,fl),br(o,Kp,o);const l=je(t,r3,YE,{[e3]:!0}),u=je(t,h9,E4,{[e3]:!0}),c=br(t,n3,E4,{[e3]:!0});je(t,i3,c),je(u,r3,l),je(u,i3,c),br(u,n3,c),je(c,h9),je(c,r3),br(c,n3,c),je(c,i3,c);const f=br(t,t3,lG,{[iG]:!0});je(f,"#"),br(f,t3,f),je(f,e8e,f);const d=je(f,t8e);je(d,"#"),br(d,t3,f);const h=[[fl,s],[dl,i]],p=[[fl,null],[Kp,a],[dl,o]];for(let m=0;m<Cv.length;m++)ru(t,Cv[m],S4,hl,h);for(let m=0;m<Sv.length;m++)ru(t,Sv[m],x4,C4,p);Qc(S4,{tld:!0,ascii:!0},e),Qc(x4,{utld:!0,alpha:!0},e),ru(t,"file",lb,hl,h),ru(t,"mailto",lb,hl,h),ru(t,"http",Md,hl,h),ru(t,"https",Md,hl,h),ru(t,"ftp",Md,hl,h),ru(t,"ftps",Md,hl,h),Qc(lb,{scheme:!0,ascii:!0},e),Qc(Md,{slashscheme:!0,ascii:!0},e),n=n.sort((m,g)=>m[0]>g[0]?1:-1);for(let m=0;m<n.length;m++){const g=n[m][0],b=n[m][1]?{[XAe]:!0}:{[QAe]:!0};g.indexOf("-")>=0?b[k4]=!0:fl.test(g)?dl.test(g)?b[z0]=!0:b[_4]=!0:b[y4]=!0,d9(t,g,g,b)}return d9(t,"localhost",$m,{ascii:!0}),t.jd=new to(f2),{start:t,tokens:Yh({groups:e},uG)}}function cG(n,e){const t=r8e(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=t.length,i=[];let o=0,s=0;for(;s<r;){let a=n,l=null,u=0,c=null,f=-1,d=-1;for(;s<r&&(l=a.go(t[s]));)a=l,a.accepts()?(f=0,d=0,c=a):f>=0&&(f+=t[s].length,d++),u+=t[s].length,o+=t[s].length,s++;o-=f,s-=d,u-=f,i.push({t:c.t,v:e.slice(o-u,o),s:o-u,e:o})}return i}function r8e(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),o,s=i<55296||i>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(s),r+=s.length}return e}function ru(n,e,t,r,i){let o;const s=e.length;for(let a=0;a<s-1;a++){const l=e[a];n.j[l]?o=n.j[l]:(o=new to(r),o.jr=i.slice(),n.j[l]=o),n=o}return o=new to(t),o.jr=i.slice(),n.j[e[s-1]]=o,o}function p9(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let o=0;for(;i.indexOf(n[r+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let s=parseInt(n.substring(r,r+o),10);s>0;s--)t.pop();r+=o}else t.push(n[r]),r++}return e}const eg={defaultProtocol:"http",events:null,format:m9,formatHref:m9,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function eA(n,e=null){let t=Yh({},eg);n&&(t=Yh(t,n instanceof eA?n.o:n));const r=t.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}eA.prototype={o:eg,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:eg[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function m9(n){return n}function fG(n,e){this.t="token",this.v=n,this.tk=e}fG.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=eg.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),o=this.toFormattedString(n),s={},a=n.get("className",t,e),l=n.get("target",t,e),u=n.get("rel",t,e),c=n.getObj("attributes",t,e),f=n.getObj("events",t,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),u&&(s.rel=u),c&&Yh(s,c),{tagName:i,attributes:s,content:o,eventListeners:f}}};function nw(n,e){class t extends fG{constructor(i,o){super(i,o),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const g9=nw("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),v9=nw("text"),i8e=nw("nl"),xv=nw("url",{isLink:!0,toHref(n=eg.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==$m&&n[1].t===bu}}),Io=n=>new to(n);function o8e({groups:n}){const e=n.domain.concat([$y,t2,cu,n2,r2,i2,o2,s2,No,JE,V0,a2,l2,u2,fa,f2,q0,c2]),t=[e2,bu,XE,ca,QE,V0,W0,ZE,$E,Wy,qy,j0,H0,jy,zy,Hy,Vy,Uy,Gy,Ky,Jy,Yy,Xy,Qy,Zy],r=[$y,e2,t2,n2,r2,i2,o2,s2,No,j0,H0,V0,a2,l2,u2,W0,fa,f2,q0,c2],i=Io(),o=je(i,q0);Kt(o,r,o),Kt(o,n.domain,o);const s=Io(),a=Io(),l=Io();Kt(i,n.domain,s),Kt(i,n.scheme,a),Kt(i,n.slashscheme,l),Kt(s,r,o),Kt(s,n.domain,s);const u=je(s,cu);je(o,cu,u),je(a,cu,u),je(l,cu,u);const c=je(o,ca);Kt(c,r,o),Kt(c,n.domain,o);const f=Io();Kt(u,n.domain,f),Kt(f,n.domain,f);const d=je(f,ca);Kt(d,n.domain,f);const h=Io(g9);Kt(d,n.tld,h),Kt(d,n.utld,h),je(u,$m,h);const p=je(f,No);je(p,No,p),Kt(p,n.domain,f),Kt(h,n.domain,f),je(h,ca,d),je(h,No,p);const m=je(h,bu);Kt(m,n.numeric,g9);const g=je(s,No),v=je(s,ca);je(g,No,g),Kt(g,n.domain,s),Kt(v,r,o),Kt(v,n.domain,s);const b=Io(xv);Kt(v,n.tld,b),Kt(v,n.utld,b),Kt(b,n.domain,s),Kt(b,r,o),je(b,ca,v),je(b,No,g),je(b,cu,u);const w=je(b,bu),_=Io(xv);Kt(w,n.numeric,_);const y=Io(xv),k=Io();Kt(y,e,y),Kt(y,t,k),Kt(k,e,y),Kt(k,t,k),je(b,fa,y),je(_,fa,y);const S=je(a,bu),E=je(l,bu),M=je(E,fa),R=je(M,fa);Kt(a,n.domain,s),je(a,ca,v),je(a,No,g),Kt(l,n.domain,s),je(l,ca,v),je(l,No,g),Kt(S,n.domain,y),je(S,fa,y),je(S,W0,y),Kt(R,n.domain,y),Kt(R,e,y),je(R,fa,y);const O=[[j0,H0],[zy,jy],[Hy,Vy],[Wy,qy],[Uy,Gy],[Ky,Jy],[Yy,Xy],[Qy,Zy]];for(let I=0;I<O.length;I++){const[P,A]=O[I],N=je(y,P);je(k,P,N),je(N,A,y);const F=Io(xv);Kt(N,e,F);const V=Io();Kt(N,t),Kt(F,e,F),Kt(F,t,V),Kt(V,e,F),Kt(V,t,V),je(F,A,y),je(V,A,y)}return je(i,$m,b),je(i,YE,i8e),{start:i,tokens:uG}}function s8e(n,e,t){let r=t.length,i=0,o=[],s=[];for(;i<r;){let a=n,l=null,u=null,c=0,f=null,d=-1;for(;i<r&&!(l=a.go(t[i].t));)s.push(t[i++]);for(;i<r&&(u=l||a.go(t[i].t));)l=null,a=u,a.accepts()?(d=0,f=a):d>=0&&d++,i++,c++;if(d<0)i-=c,i<r&&(s.push(t[i]),i++);else{s.length>0&&(o.push(o3(v9,e,s)),s=[]),i-=d,c-=d;const h=f.t,p=t.slice(i-c,i);o.push(o3(h,e,p))}}return s.length>0&&o.push(o3(v9,e,s)),o}function o3(n,e,t){const r=t[0].s,i=t[t.length-1].e,o=e.slice(r,i);return new n(o,t)}const a8e=typeof console<"u"&&console&&console.warn||(()=>{}),l8e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Qn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function u8e(){return to.groups={},Qn.scanner=null,Qn.parser=null,Qn.tokenQueue=[],Qn.pluginQueue=[],Qn.customSchemes=[],Qn.initialized=!1,Qn}function b9(n,e=!1){if(Qn.initialized&&a8e(`linkifyjs: already initialized - will not register custom scheme "${n}" ${l8e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Qn.customSchemes.push([n,e])}function c8e(){Qn.scanner=n8e(Qn.customSchemes);for(let n=0;n<Qn.tokenQueue.length;n++)Qn.tokenQueue[n][1]({scanner:Qn.scanner});Qn.parser=o8e(Qn.scanner.tokens);for(let n=0;n<Qn.pluginQueue.length;n++)Qn.pluginQueue[n][1]({scanner:Qn.scanner,parser:Qn.parser});return Qn.initialized=!0,Qn}function tA(n){return Qn.initialized||c8e(),s8e(Qn.parser.start,n,cG(Qn.scanner.start,n))}tA.scan=cG;function dG(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new eA(t),i=tA(n),o=[];for(let s=0;s<i.length;s++){const a=i[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}function f8e(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function d8e(n){return new Sr({key:new si("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(u=>u.docChanged)&&!t.doc.eq(r.doc),o=e.some(u=>u.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,a=lSe(t.doc,[...e]);if(gSe(a).forEach(({newRange:u})=>{const c=cSe(r.doc,u,h=>h.isTextblock);let f,d;if(c.length>1?(f=c[0],d=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ")):c.length&&r.doc.textBetween(u.from,u.to," "," ").endsWith(" ")&&(f=c[0],d=r.doc.textBetween(f.pos,u.to,void 0," ")),f&&d){const h=d.split(" ").filter(v=>v!=="");if(h.length<=0)return!1;const p=h[h.length-1],m=f.pos+d.lastIndexOf(p);if(!p)return!1;const g=tA(p).map(v=>v.toObject(n.defaultProtocol));if(!f8e(g))return!1;g.filter(v=>v.isLink).map(v=>({...v,from:m+v.start+1,to:m+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>n.validate(v.value)).filter(v=>n.shouldAutoLink(v.value)).forEach(v=>{lE(v.from,v.to,r.doc).some(b=>b.mark.type===n.type)||s.addMark(v.from,v.to,n.type.create({href:v.href}))})}}),!!s.steps.length)return s}})}function h8e(n){return new Sr({key:new si("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let s=r.target;const a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(d=>d.nodeName==="A"))return!1;const l=WW(e.state,n.type.name),u=r.target,c=(i=u==null?void 0:u.href)!==null&&i!==void 0?i:l.href,f=(o=u==null?void 0:u.target)!==null&&o!==void 0?o:l.target;return u&&c?(window.open(c,f),!0):!1}}})}function p8e(n){return new Sr({key:new si("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:o}=i,{empty:s}=o;if(s)return!1;let a="";r.content.forEach(u=>{a+=u.textContent});const l=dG(a,{defaultProtocol:n.defaultProtocol}).find(u=>u.isLink&&u.value===a);return!a||!l?!1:n.editor.commands.setMark(n.type,{href:l.href})}}})}const m8e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Tc(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(m8e,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const g8e=ii.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){b9(n);return}b9(n.scheme,n.optionalSlashes)})},onDestroy(){u8e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Tc(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Tc(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Tc(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",gr(this.options.HTMLAttributes,n),0]:["a",gr(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Tc(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Tc(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[tc({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=dG(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:s=>!!Tc(s,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(d8e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Tc(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(h8e({type:this.type})),this.options.linkOnPaste&&n.push(p8e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),v8e=Cr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Sr({key:new si("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const o=n.type.createAndFill(),s=(o==null?void 0:o.sameMarkup(n))&&o.content.findDiffStart(n.content)===null;return n.descendants((a,l)=>{const u=r>=l&&r<=l+a.nodeSize,c=!a.isLeaf&&!a.childCount;if((u||!this.options.showOnlyCurrent)&&c){const f=[this.options.emptyNodeClass];s&&f.push(this.options.emptyEditorClass);const d=qi.node(l,l+a.nodeSize,{class:f.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:u}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),_r.create(n,i)}}})]}}),b8e=/^\s*(\[([( |x])?\])\s$/,y8e=On.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",gr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:c}=u.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const d=t();if(typeof d!="number")return!1;const h=f.doc.nodeAt(d);return f.setNodeMarkup(d,void 0,{...h==null?void 0:h.attrs,checked:c}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,c)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,c])=>{i.setAttribute(u,c)}),i.dataset.checked=n.attrs.checked,a.checked=n.attrs.checked,o.append(a,s),i.append(o,l),Object.entries(e).forEach(([u,c])=>{i.setAttribute(u,c)}),{dom:i,contentDOM:l,update:u=>u.type!==this.type?!1:(i.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,!0)}}},addInputRules(){return[jh({find:b8e,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),_8e=On.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",gr(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),w8e=ii.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),k8e=/^\s*>\s$/,C8e=On.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[jh({find:k8e,type:this.type})]}}),S8e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,x8e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,E8e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,A8e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,M8e=ii.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Mf({find:S8e,type:this.type}),Mf({find:E8e,type:this.type})]},addPasteRules(){return[tc({find:x8e,type:this.type}),tc({find:A8e,type:this.type})]}}),T8e="listItem",y9="textStyle",_9=/^\s*([-+*])\s$/,O8e=On.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(T8e,this.editor.getAttributes(y9)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=jh({find:_9,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=jh({find:_9,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(y9),editor:this.editor})),[n]}}),D8e=/(^|[^`])`([^`]+)`(?!`)/,R8e=/(^|[^`])`([^`]+)`(?!`)/g,P8e=ii.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Mf({find:D8e,type:this.type})]},addPasteRules(){return[tc({find:R8e,type:this.type})]}}),I8e=/^```([a-z]+)?[\s\n]$/,N8e=/^~~~([a-z]+)?[\s\n]$/,B8e=On.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",gr(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:o}=t;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:u})=>(u.setSelection(qt.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[HS({find:I8e,type:this.type,getAttributes:n=>({language:n[1]})}),HS({find:N8e,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Sr({key:new si("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!t||!o)return!1;const{tr:s,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(Lt.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),n.dispatch(s),!0}}})]}}),L8e=On.create({name:"doc",topNode:!0,content:"block+"});function F8e(n={}){return new Sr({view(e){return new z8e(e,n)}})}class z8e{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),s=o.width/i.offsetWidth,a=o.height/i.offsetHeight;if(t){let f=e.nodeBefore,d=e.nodeAfter;if(f||d){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let p=h.getBoundingClientRect(),m=f?p.bottom:p.top;f&&d&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*a;r={left:p.left,right:p.right,top:m-g,bottom:m+g}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),d=this.width/2*s;r={left:f.left-d,right:f.left+d,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let u,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,c=-pageYOffset;else{let f=l.getBoundingClientRect(),d=f.width/l.offsetWidth,h=f.height/l.offsetHeight;u=f.left-l.scrollLeft*d,c=f.top-l.scrollTop*h}this.element.style.left=(r.left-u)/s+"px",this.element.style.top=(r.top-c)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!o){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=FV(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const j8e=Cr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[F8e(this.options)]}});class wr extends qt{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return wr.valid(r)?new wr(r):qt.near(r)}content(){return at.empty}eq(e){return e instanceof wr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new wr(e.resolve(t.pos))}getBookmark(){return new nA(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!H8e(e)||!V8e(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&wr.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(t>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=t;let l=e.doc.resolve(i);if(wr.valid(l))return l}for(;;){let s=t>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!Dt.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=s,i+=t;let a=e.doc.resolve(i);if(wr.valid(a))return a}return null}}}wr.prototype.visible=!1;wr.findFrom=wr.findGapCursorFrom;qt.jsonID("gapcursor",wr);class nA{constructor(e){this.pos=e}map(e){return new nA(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return wr.valid(t)?new wr(t):qt.near(t)}}function H8e(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function V8e(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function W8e(){return new Sr({props:{decorations:K8e,createSelectionBetween(n,e,t){return e.pos==t.pos&&wr.valid(t)?new wr(t):null},handleClick:U8e,handleKeyDown:q8e,handleDOMEvents:{beforeinput:G8e}}})}const q8e=EW({ArrowLeft:Ev("horiz",-1),ArrowRight:Ev("horiz",1),ArrowUp:Ev("vert",-1),ArrowDown:Ev("vert",1)});function Ev(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof Lt){if(!o.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=wr.findGapCursorFrom(a,e,l);return u?(i&&i(r.tr.setSelection(new wr(u))),!0):!1}}function U8e(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!wr.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Dt.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new wr(r))),!0)}function G8e(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof wr))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=Fe.empty;for(let s=r.length-1;s>=0;s--)i=Fe.from(r[s].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new at(i,0,0));return o.setSelection(Lt.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function K8e(n){if(!(n.selection instanceof wr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",_r.create(n.doc,[qi.widget(n.selection.head,e,{key:"gapcursor"})])}const J8e=Cr.create({name:"gapCursor",addProseMirrorPlugins(){return[W8e()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Xt(vt(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),Y8e=On.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",gr(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:o}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&s){const f=l.filter(d=>a.includes(d.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),X8e=On.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,gr(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>HS({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var d2=200,ni=function(){};ni.prototype.append=function(e){return e.length?(e=ni.from(e),!this.length&&e||e.length<d2&&this.leafAppend(e)||this.length<d2&&e.leafPrepend(this)||this.appendInner(e)):this};ni.prototype.prepend=function(e){return e.length?ni.from(e).append(this):this};ni.prototype.appendInner=function(e){return new Q8e(this,e)};ni.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ni.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ni.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ni.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};ni.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},t,r),i};ni.from=function(e){return e instanceof ni?e:e&&e.length?new hG(e):ni.empty};var hG=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=d2)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=d2)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(ni);ni.empty=new hG([]);var Q8e=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ni);const Z8e=500;class Ts{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,u=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),o=i.maps.length),o--,c.push(f);return}if(i){c.push(new da(f.map));let h=f.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],u.push(new da(p,void 0,void 0,u.length+c.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(o)):f.selection,l=new Ts(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,t,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),d=new da(e.mapping.maps[c],f,t),h;(h=l&&l.merge(d))&&(d=h,c?o.pop():a=a.slice(0,a.length-1)),o.push(d),t&&(s++,t=void 0),i||(l=d)}let u=s-r.depth;return u>eMe&&(a=$8e(a,u),s-=u),new Ts(a.append(o),s)}remapping(e,t){let r=new Dm;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,t),r}addMaps(e){return this.eventCount==0?this:new Ts(this.items.append(e.map(t=>new da(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=t;this.items.forEach(d=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(d.step){let m=e.steps[h].invert(e.docs[h]),g=d.selection&&d.selection.map(o.slice(l+1,h));g&&a++,r.push(new da(p,m,g))}else r.push(new da(p))},i);let u=[];for(let d=t;d<s;d++)u.push(new da(o.maps[d]));let c=this.items.slice(0,i).append(u).append(r),f=new Ts(c,a);return f.emptyItemCount()>Z8e&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(t.slice(r)),u=l&&l.getMap();if(r--,u&&t.appendMap(u,r),l){let c=s.selection&&s.selection.map(t.slice(r));c&&o++;let f=new da(u.invert(),l,c),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else s.map&&r--},this.items.length,0),new Ts(ni.from(i.reverse()),o)}}Ts.empty=new Ts(ni.empty,0);function $8e(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class da{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new da(t.getMap().invert(),t,this.selection)}}}class fu{constructor(e,t,r,i,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const eMe=20;function tMe(n,e,t,r){let i=t.getMeta(af),o;if(i)return i.historyState;t.getMeta(iMe)&&(n=new fu(n.done,n.undone,null,0,-1));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(s&&s.getMeta(af))return s.getMeta(af).redo?new fu(n.done.addTransform(t,void 0,r,ub(e)),n.undone,w9(t.mapping.maps),n.prevTime,n.prevComposition):new fu(n.done,n.undone.addTransform(t,void 0,r,ub(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!s&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!nMe(t,n.prevRanges)),u=s?s3(n.prevRanges,t.mapping):w9(t.mapping.maps);return new fu(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,ub(e)),Ts.empty,u,t.time,a??n.prevComposition)}else return(o=t.getMeta("rebased"))?new fu(n.done.rebased(t,o),n.undone.rebased(t,o),s3(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new fu(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),s3(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function nMe(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function w9(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,o,s)=>e.push(o,s));return e}function s3(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function rMe(n,e,t){let r=ub(e),i=af.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new fu(t?a:o.remaining,t?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(af,{redo:t,historyState:l})}let a3=!1,k9=null;function ub(n){let e=n.plugins;if(k9!=e){a3=!1,k9=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){a3=!0;break}}return a3}const af=new si("history"),iMe=new si("closeHistory");function oMe(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Sr({key:af,state:{init(){return new fu(Ts.empty,Ts.empty,null,0,-1)},apply(e,t,r){return tMe(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?mG:r=="historyRedo"?gG:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function pG(n,e){return(t,r)=>{let i=af.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let o=rMe(i,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const mG=pG(!1,!0),gG=pG(!0,!0),sMe=Cr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>mG(n,e),redo:()=>({state:n,dispatch:e})=>gG(n,e)}},addProseMirrorPlugins(){return[oMe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),aMe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,lMe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,uMe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,cMe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,fMe=ii.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Mf({find:aMe,type:this.type}),Mf({find:uMe,type:this.type})]},addPasteRules(){return[tc({find:lMe,type:this.type}),tc({find:cMe,type:this.type})]}}),dMe=On.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",gr(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),hMe="listItem",C9="textStyle",S9=/^(\d+)\.\s$/,pMe=On.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",gr(this.options.HTMLAttributes,t),0]:["ol",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hMe,this.editor.getAttributes(C9)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=jh({find:S9,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=jh({find:S9,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(C9)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),mMe=On.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),gMe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,vMe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,bMe=ii.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",gr(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Mf({find:gMe,type:this.type})]},addPasteRules(){return[tc({find:vMe,type:this.type})]}}),yMe=On.create({name:"text",group:"inline"}),_Me=Cr.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(M8e.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(C8e.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(O8e.configure(this.options.bulletList)),this.options.code!==!1&&n.push(P8e.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(B8e.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(L8e.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(j8e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(J8e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(Y8e.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(X8e.configure(this.options.heading)),this.options.history!==!1&&n.push(sMe.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(nG.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(fMe.configure(this.options.italic)),this.options.listItem!==!1&&n.push(dMe.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(pMe.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(mMe.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(bMe.configure(this.options.strike)),this.options.text!==!1&&n.push(yMe.configure(this.options.text)),n}}),x9={};function wMe(n){let e=x9[n];if(e)return e;e=x9[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);e.push(r)}for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function Xh(n,e){typeof e!="string"&&(e=Xh.defaultChars);const t=wMe(e);return n.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let o=0,s=r.length;o<s;o+=3){const a=parseInt(r.slice(o+1,o+3),16);if(a<128){i+=t[a];continue}if((a&224)===192&&o+3<s){const l=parseInt(r.slice(o+4,o+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),o+=3;continue}}if((a&240)===224&&o+6<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16);if((l&192)===128&&(u&192)===128){const c=a<<12&61440|l<<6&4032|u&63;c<2048||c>=55296&&c<=57343?i+="":i+=String.fromCharCode(c),o+=6;continue}}if((a&248)===240&&o+9<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16),c=parseInt(r.slice(o+10,o+12),16);if((l&192)===128&&(u&192)===128&&(c&192)===128){let f=a<<18&1835008|l<<12&258048|u<<6&4032|c&63;f<65536||f>1114111?i+="":(f-=65536,i+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),o+=9;continue}}i+=""}return i})}Xh.defaultChars=";/?:@&=+$,#";Xh.componentChars="";const E9={};function kMe(n){let e=E9[n];if(e)return e;e=E9[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<n.length;t++)e[n.charCodeAt(t)]=n[t];return e}function Xg(n,e,t){typeof e!="string"&&(t=e,e=Xg.defaultChars),typeof t>"u"&&(t=!0);const r=kMe(e);let i="";for(let o=0,s=n.length;o<s;o++){const a=n.charCodeAt(o);if(t&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(n.slice(o+1,o+3))){i+=n.slice(o,o+3),o+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){const l=n.charCodeAt(o+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(n[o]+n[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(n[o])}return i}Xg.defaultChars=";/?:@&=+$,-_.!~*'()#";Xg.componentChars="-_.!~*'()";function rA(n){let e="";return e+=n.protocol||"",e+=n.slashes?"//":"",e+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?e+="["+n.hostname+"]":e+=n.hostname||"",e+=n.port?":"+n.port:"",e+=n.pathname||"",e+=n.search||"",e+=n.hash||"",e}function h2(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const CMe=/^([a-z0-9.+-]+:)/i,SMe=/:[0-9]*$/,xMe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,EMe=["<",">",'"',"`"," ","\r",`
`,"	"],AMe=["{","}","|","\\","^","`"].concat(EMe),MMe=["'"].concat(AMe),A9=["%","/","?",";","#"].concat(MMe),M9=["/","?","#"],TMe=255,T9=/^[+a-z0-9A-Z_-]{0,63}$/,OMe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,O9={javascript:!0,"javascript:":!0},D9={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function iA(n,e){if(n&&n instanceof h2)return n;const t=new h2;return t.parse(n,e),t}h2.prototype.parse=function(n,e){let t,r,i,o=n;if(o=o.trim(),!e&&n.split("#").length===1){const u=xMe.exec(o);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=CMe.exec(o);if(s&&(s=s[0],t=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&O9[s])&&(o=o.substr(2),this.slashes=!0)),!O9[s]&&(i||s&&!D9[s])){let u=-1;for(let p=0;p<M9.length;p++)r=o.indexOf(M9[p]),r!==-1&&(u===-1||r<u)&&(u=r);let c,f;u===-1?f=o.lastIndexOf("@"):f=o.lastIndexOf("@",u),f!==-1&&(c=o.slice(0,f),o=o.slice(f+1),this.auth=c),u=-1;for(let p=0;p<A9.length;p++)r=o.indexOf(A9[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=o.length),o[u-1]===":"&&u--;const d=o.slice(0,u);o=o.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let m=0,g=p.length;m<g;m++){const v=p[m];if(v&&!v.match(T9)){let b="";for(let w=0,_=v.length;w<_;w++)v.charCodeAt(w)>127?b+="x":b+=v[w];if(!b.match(T9)){const w=p.slice(0,m),_=p.slice(m+1),y=v.match(OMe);y&&(w.push(y[1]),_.unshift(y[2])),_.length&&(o=_.join(".")+o),this.hostname=w.join(".");break}}}}this.hostname.length>TMe&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));const l=o.indexOf("?");return l!==-1&&(this.search=o.substr(l),o=o.slice(0,l)),o&&(this.pathname=o),D9[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};h2.prototype.parseHost=function(n){let e=SMe.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const DMe=Object.freeze(Object.defineProperty({__proto__:null,decode:Xh,encode:Xg,format:rA,parse:iA},Symbol.toStringTag,{value:"Module"})),vG=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,bG=/[\0-\x1F\x7F-\x9F]/,RMe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,oA=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,yG=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,_G=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,PMe=Object.freeze(Object.defineProperty({__proto__:null,Any:vG,Cc:bG,Cf:RMe,P:oA,S:yG,Z:_G},Symbol.toStringTag,{value:"Module"})),IMe=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(n=>n.charCodeAt(0))),NMe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(n=>n.charCodeAt(0)));var l3;const BMe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),LMe=(l3=String.fromCodePoint)!==null&&l3!==void 0?l3:function(n){let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e};function FMe(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=BMe.get(n))!==null&&e!==void 0?e:n}var $r;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})($r||($r={}));const zMe=32;var Ou;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(Ou||(Ou={}));function A4(n){return n>=$r.ZERO&&n<=$r.NINE}function jMe(n){return n>=$r.UPPER_A&&n<=$r.UPPER_F||n>=$r.LOWER_A&&n<=$r.LOWER_F}function HMe(n){return n>=$r.UPPER_A&&n<=$r.UPPER_Z||n>=$r.LOWER_A&&n<=$r.LOWER_Z||A4(n)}function VMe(n){return n===$r.EQUALS||HMe(n)}var Xr;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(Xr||(Xr={}));var yu;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(yu||(yu={}));class WMe{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=Xr.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=yu.Strict}startEntity(e){this.decodeMode=e,this.state=Xr.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case Xr.EntityStart:return e.charCodeAt(t)===$r.NUM?(this.state=Xr.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=Xr.NamedEntity,this.stateNamedEntity(e,t));case Xr.NumericStart:return this.stateNumericStart(e,t);case Xr.NumericDecimal:return this.stateNumericDecimal(e,t);case Xr.NumericHex:return this.stateNumericHex(e,t);case Xr.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|zMe)===$r.LOWER_X?(this.state=Xr.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=Xr.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,i){if(t!==r){const o=r-t;this.result=this.result*Math.pow(i,o)+parseInt(e.substr(t,o),i),this.consumed+=o}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(A4(i)||jMe(i))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(A4(i))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===$r.SEMI)this.consumed+=1;else if(this.decodeMode===yu.Strict)return 0;return this.emitCodePoint(FMe(this.result),this.consumed),this.errors&&(e!==$r.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&Ou.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const s=e.charCodeAt(t);if(this.treeIndex=qMe(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===yu.Attribute&&(o===0||VMe(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&Ou.VALUE_LENGTH)>>14,o!==0){if(s===$r.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==yu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,i=(r[t]&Ou.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~Ou.VALUE_LENGTH:i[e+1],r),t===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case Xr.NamedEntity:return this.result!==0&&(this.decodeMode!==yu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Xr.NumericDecimal:return this.emitNumericEntity(0,2);case Xr.NumericHex:return this.emitNumericEntity(0,3);case Xr.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Xr.EntityStart:return 0}}}function wG(n){let e="";const t=new WMe(n,r=>e+=LMe(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(s,a),t.startEntity(o);const u=t.write(i,a+1);if(u<0){s=a+t.end();break}s=a+u,a=u===0?s+1:s}const l=e+i.slice(s);return e="",l}}function qMe(n,e,t,r){const i=(e&Ou.BRANCH_LENGTH)>>7,o=e&Ou.JUMP_TABLE;if(i===0)return o!==0&&r===o?t:-1;if(o){const l=r-o;return l<0||l>=i?-1:n[t+l]-1}let s=t,a=s+i-1;for(;s<=a;){const l=s+a>>>1,u=n[l];if(u<r)s=l+1;else if(u>r)a=l-1;else return n[l+i]}return-1}const UMe=wG(IMe);wG(NMe);function kG(n,e=yu.Legacy){return UMe(n,e)}function GMe(n){return Object.prototype.toString.call(n)}function sA(n){return GMe(n)==="[object String]"}const KMe=Object.prototype.hasOwnProperty;function JMe(n,e){return KMe.call(n,e)}function rw(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){n[r]=t[r]})}}),n}function CG(n,e,t){return[].concat(n.slice(0,e),t,n.slice(e+1))}function aA(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function p2(n){if(n>65535){n-=65536;const e=55296+(n>>10),t=56320+(n&1023);return String.fromCharCode(e,t)}return String.fromCharCode(n)}const SG=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,YMe=/&([a-z#][a-z0-9]{1,31});/gi,XMe=new RegExp(SG.source+"|"+YMe.source,"gi"),QMe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function ZMe(n,e){if(e.charCodeAt(0)===35&&QMe.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return aA(r)?p2(r):n}const t=kG(n);return t!==n?t:n}function $Me(n){return n.indexOf("\\")<0?n:n.replace(SG,"$1")}function Qh(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(XMe,function(e,t,r){return t||ZMe(e,r)})}const e5e=/[&<>"]/,t5e=/[&<>"]/g,n5e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function r5e(n){return n5e[n]}function oc(n){return e5e.test(n)?n.replace(t5e,r5e):n}const i5e=/[.?*+^$[\]\\(){}|-]/g;function o5e(n){return n.replace(i5e,"\\$&")}function Kn(n){switch(n){case 9:case 32:return!0}return!1}function tg(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function ng(n){return oA.test(n)||yG.test(n)}function rg(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function iw(n){return n=n.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(n=n.replace(//g,"")),n.toLowerCase().toUpperCase()}const s5e={mdurl:DMe,ucmicro:PMe},a5e=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:CG,assign:rw,escapeHtml:oc,escapeRE:o5e,fromCodePoint:p2,has:JMe,isMdAsciiPunct:rg,isPunctChar:ng,isSpace:Kn,isString:sA,isValidEntityCode:aA,isWhiteSpace:tg,lib:s5e,normalizeReference:iw,unescapeAll:Qh,unescapeMd:$Me},Symbol.toStringTag,{value:"Module"}));function l5e(n,e,t){let r,i,o,s;const a=n.posMax,l=n.pos;for(n.pos=e+1,r=1;n.pos<a;){if(o=n.src.charCodeAt(n.pos),o===93&&(r--,r===0)){i=!0;break}if(s=n.pos,n.md.inline.skipToken(n),o===91){if(s===n.pos-1)r++;else if(t)return n.pos=l,-1}}let u=-1;return i&&(u=n.pos),n.pos=l,u}function u5e(n,e,t){let r,i=e;const o={ok:!1,pos:0,str:""};if(n.charCodeAt(i)===60){for(i++;i<t;){if(r=n.charCodeAt(i),r===10||r===60)return o;if(r===62)return o.pos=i+1,o.str=Qh(n.slice(e+1,i)),o.ok=!0,o;if(r===92&&i+1<t){i+=2;continue}i++}return o}let s=0;for(;i<t&&(r=n.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<t){if(n.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(s++,s>32))return o;if(r===41){if(s===0)break;s--}i++}return e===i||s!==0||(o.str=Qh(n.slice(e,i)),o.pos=i,o.ok=!0),o}function c5e(n,e,t,r){let i,o=e;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(o>=t)return s;let a=n.charCodeAt(o);if(a!==34&&a!==39&&a!==40)return s;e++,o++,a===40&&(a=41),s.marker=a}for(;o<t;){if(i=n.charCodeAt(o),i===s.marker)return s.pos=o+1,s.str+=Qh(n.slice(e,o)),s.ok=!0,s;if(i===40&&s.marker===41)return s;i===92&&o+1<t&&o++,o++}return s.can_continue=!0,s.str+=Qh(n.slice(e,o)),s}const f5e=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:u5e,parseLinkLabel:l5e,parseLinkTitle:c5e},Symbol.toStringTag,{value:"Module"})),Xa={};Xa.code_inline=function(n,e,t,r,i){const o=n[e];return"<code"+i.renderAttrs(o)+">"+oc(o.content)+"</code>"};Xa.code_block=function(n,e,t,r,i){const o=n[e];return"<pre"+i.renderAttrs(o)+"><code>"+oc(n[e].content)+`</code></pre>
`};Xa.fence=function(n,e,t,r,i){const o=n[e],s=o.info?Qh(o.info).trim():"";let a="",l="";if(s){const c=s.split(/(\s+)/g);a=c[0],l=c.slice(2).join("")}let u;if(t.highlight?u=t.highlight(o.content,a,l)||oc(o.content):u=oc(o.content),u.indexOf("<pre")===0)return u+`
`;if(s){const c=o.attrIndex("class"),f=o.attrs?o.attrs.slice():[];c<0?f.push(["class",t.langPrefix+a]):(f[c]=f[c].slice(),f[c][1]+=" "+t.langPrefix+a);const d={attrs:f};return`<pre><code${i.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${u}</code></pre>
`};Xa.image=function(n,e,t,r,i){const o=n[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,t,r),i.renderToken(n,e,t)};Xa.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};Xa.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};Xa.text=function(n,e){return oc(n[e].content)};Xa.html_block=function(n,e){return n[e].content};Xa.html_inline=function(n,e){return n[e].content};function _p(){this.rules=rw({},Xa)}_p.prototype.renderAttrs=function(e){let t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+oc(e.attrs[t][0])+'="'+oc(e.attrs[t][1])+'"';return i};_p.prototype.renderToken=function(e,t,r){const i=e[t];let o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&t&&e[t-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&t+1<e.length)){const a=e[t+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};_p.prototype.renderInline=function(n,e,t){let r="";const i=this.rules;for(let o=0,s=n.length;o<s;o++){const a=n[o].type;typeof i[a]<"u"?r+=i[a](n,o,e,t,this):r+=this.renderToken(n,o,e)}return r};_p.prototype.renderInlineAsText=function(n,e,t){let r="";for(let i=0,o=n.length;i<o;i++)switch(n[i].type){case"text":r+=n[i].content;break;case"image":r+=this.renderInlineAsText(n[i].children,e,t);break;case"html_inline":case"html_block":r+=n[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};_p.prototype.render=function(n,e,t){let r="";const i=this.rules;for(let o=0,s=n.length;o<s;o++){const a=n[o].type;a==="inline"?r+=this.renderInline(n[o].children,e,t):typeof i[a]<"u"?r+=i[a](n,o,e,t,this):r+=this.renderToken(n,o,e,t)}return r};function ho(){this.__rules__=[],this.__cache__=null}ho.prototype.__find__=function(n){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};ho.prototype.__compile__=function(){const n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||n.__cache__[t].push(r.fn))})})};ho.prototype.at=function(n,e,t){const r=this.__find__(n),i=t||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};ho.prototype.before=function(n,e,t,r){const i=this.__find__(n),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};ho.prototype.after=function(n,e,t,r){const i=this.__find__(n),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};ho.prototype.push=function(n,e,t){const r=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};ho.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,t.push(r)},this),this.__cache__=null,t};ho.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};ho.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,t.push(r)},this),this.__cache__=null,t};ho.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};function ea(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}ea.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,i=t.length;r<i;r++)if(t[r][0]===e)return r;return-1};ea.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};ea.prototype.attrSet=function(e,t){const r=this.attrIndex(e),i=[e,t];r<0?this.attrPush(i):this.attrs[r]=i};ea.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r};ea.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};function xG(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}xG.prototype.Token=ea;const d5e=/\r\n?|\n/g,h5e=/\0/g;function p5e(n){let e;e=n.src.replace(d5e,`
`),e=e.replace(h5e,""),n.src=e}function m5e(n){let e;n.inlineMode?(e=new n.Token("inline","",0),e.content=n.src,e.map=[0,1],e.children=[],n.tokens.push(e)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function g5e(n){const e=n.tokens;for(let t=0,r=e.length;t<r;t++){const i=e[t];i.type==="inline"&&n.md.inline.parse(i.content,n.md,n.env,i.children)}}function v5e(n){return/^<a[>\s]/i.test(n)}function b5e(n){return/^<\/a\s*>/i.test(n)}function y5e(n){const e=n.tokens;if(n.md.options.linkify)for(let t=0,r=e.length;t<r;t++){if(e[t].type!=="inline"||!n.md.linkify.pretest(e[t].content))continue;let i=e[t].children,o=0;for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(v5e(a.content)&&o>0&&o--,b5e(a.content)&&o++),!(o>0)&&a.type==="text"&&n.md.linkify.test(a.content)){const l=a.content;let u=n.md.linkify.match(l);const c=[];let f=a.level,d=0;u.length>0&&u[0].index===0&&s>0&&i[s-1].type==="text_special"&&(u=u.slice(1));for(let h=0;h<u.length;h++){const p=u[h].url,m=n.md.normalizeLink(p);if(!n.md.validateLink(m))continue;let g=u[h].text;u[h].schema?u[h].schema==="mailto:"&&!/^mailto:/i.test(g)?g=n.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=n.md.normalizeLinkText(g):g=n.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");const v=u[h].index;if(v>d){const y=new n.Token("text","",0);y.content=l.slice(d,v),y.level=f,c.push(y)}const b=new n.Token("link_open","a",1);b.attrs=[["href",m]],b.level=f++,b.markup="linkify",b.info="auto",c.push(b);const w=new n.Token("text","",0);w.content=g,w.level=f,c.push(w);const _=new n.Token("link_close","a",-1);_.level=--f,_.markup="linkify",_.info="auto",c.push(_),d=u[h].lastIndex}if(d<l.length){const h=new n.Token("text","",0);h.content=l.slice(d),h.level=f,c.push(h)}e[t].children=i=CG(i,s,c)}}}}const EG=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,_5e=/\((c|tm|r)\)/i,w5e=/\((c|tm|r)\)/ig,k5e={c:"",r:"",tm:""};function C5e(n,e){return k5e[e.toLowerCase()]}function S5e(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&(r.content=r.content.replace(w5e,C5e)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function x5e(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&EG.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function E5e(n){let e;if(n.md.options.typographer)for(e=n.tokens.length-1;e>=0;e--)n.tokens[e].type==="inline"&&(_5e.test(n.tokens[e].content)&&S5e(n.tokens[e].children),EG.test(n.tokens[e].content)&&x5e(n.tokens[e].children))}const A5e=/['"]/,R9=/['"]/g,P9="";function Av(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function M5e(n,e){let t;const r=[];for(let i=0;i<n.length;i++){const o=n[i],s=n[i].level;for(t=r.length-1;t>=0&&!(r[t].level<=s);t--);if(r.length=t+1,o.type!=="text")continue;let a=o.content,l=0,u=a.length;e:for(;l<u;){R9.lastIndex=l;const c=R9.exec(a);if(!c)break;let f=!0,d=!0;l=c.index+1;const h=c[0]==="'";let p=32;if(c.index-1>=0)p=a.charCodeAt(c.index-1);else for(t=i-1;t>=0&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t--)if(n[t].content){p=n[t].content.charCodeAt(n[t].content.length-1);break}let m=32;if(l<u)m=a.charCodeAt(l);else for(t=i+1;t<n.length&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t++)if(n[t].content){m=n[t].content.charCodeAt(0);break}const g=rg(p)||ng(String.fromCharCode(p)),v=rg(m)||ng(String.fromCharCode(m)),b=tg(p),w=tg(m);if(w?f=!1:v&&(b||g||(f=!1)),b?d=!1:g&&(w||v||(d=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(d=f=!1),f&&d&&(f=g,d=v),!f&&!d){h&&(o.content=Av(o.content,c.index,P9));continue}if(d)for(t=r.length-1;t>=0;t--){let _=r[t];if(r[t].level<s)break;if(_.single===h&&r[t].level===s){_=r[t];let y,k;h?(y=e.md.options.quotes[2],k=e.md.options.quotes[3]):(y=e.md.options.quotes[0],k=e.md.options.quotes[1]),o.content=Av(o.content,c.index,k),n[_.token].content=Av(n[_.token].content,_.pos,y),l+=k.length-1,_.token===i&&(l+=y.length-1),a=o.content,u=a.length,r.length=t;continue e}}f?r.push({token:i,pos:c.index,single:h,level:s}):d&&h&&(o.content=Av(o.content,c.index,P9))}}}function T5e(n){if(n.md.options.typographer)for(let e=n.tokens.length-1;e>=0;e--)n.tokens[e].type!=="inline"||!A5e.test(n.tokens[e].content)||M5e(n.tokens[e].children,n)}function O5e(n){let e,t;const r=n.tokens,i=r.length;for(let o=0;o<i;o++){if(r[o].type!=="inline")continue;const s=r[o].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=t=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==t&&(s[t]=s[e]),t++);e!==t&&(s.length=t)}}const u3=[["normalize",p5e],["block",m5e],["inline",g5e],["linkify",y5e],["replacements",E5e],["smartquotes",T5e],["text_join",O5e]];function lA(){this.ruler=new ho;for(let n=0;n<u3.length;n++)this.ruler.push(u3[n][0],u3[n][1])}lA.prototype.process=function(n){const e=this.ruler.getRules("");for(let t=0,r=e.length;t<r;t++)e[t](n)};lA.prototype.State=xG;function Qa(n,e,t,r){this.src=n,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let o=0,s=0,a=0,l=0,u=i.length,c=!1;s<u;s++){const f=i.charCodeAt(s);if(!c)if(Kn(f)){a++,f===9?l+=4-l%4:l++;continue}else c=!0;(f===10||s===u-1)&&(f!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),c=!1,a=0,l=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Qa.prototype.push=function(n,e,t){const r=new ea(n,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};Qa.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Qa.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Qa.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const r=this.src.charCodeAt(e);if(!Kn(r))break}return e};Qa.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Kn(this.src.charCodeAt(--e)))return e+1;return e};Qa.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};Qa.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};Qa.prototype.getLines=function(e,t,r,i){if(e>=t)return"";const o=new Array(t-e);for(let s=0,a=e;a<t;a++,s++){let l=0;const u=this.bMarks[a];let c=u,f;for(a+1<t||i?f=this.eMarks[a]+1:f=this.eMarks[a];c<f&&l<r;){const d=this.src.charCodeAt(c);if(Kn(d))d===9?l+=4-(l+this.bsCount[a])%4:l++;else if(c-u<this.tShift[a])l++;else break;c++}l>r?o[s]=new Array(l-r+1).join(" ")+this.src.slice(c,f):o[s]=this.src.slice(c,f)}return o.join("")};Qa.prototype.Token=ea;const D5e=65536;function c3(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];return n.src.slice(t,r)}function I9(n){const e=[],t=n.length;let r=0,i=n.charCodeAt(r),o=!1,s=0,a="";for(;r<t;)i===124&&(o?(a+=n.substring(s,r-1),s=r):(e.push(a+n.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=n.charCodeAt(r);return e.push(a+n.substring(s)),e}function R5e(n,e,t,r){if(e+2>t)return!1;let i=e+1;if(n.sCount[i]<n.blkIndent||n.sCount[i]-n.blkIndent>=4)return!1;let o=n.bMarks[i]+n.tShift[i];if(o>=n.eMarks[i])return!1;const s=n.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=n.eMarks[i])return!1;const a=n.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!Kn(a)||s===45&&Kn(a))return!1;for(;o<n.eMarks[i];){const _=n.src.charCodeAt(o);if(_!==124&&_!==45&&_!==58&&!Kn(_))return!1;o++}let l=c3(n,e+1),u=l.split("|");const c=[];for(let _=0;_<u.length;_++){const y=u[_].trim();if(!y){if(_===0||_===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(y))return!1;y.charCodeAt(y.length-1)===58?c.push(y.charCodeAt(0)===58?"center":"right"):y.charCodeAt(0)===58?c.push("left"):c.push("")}if(l=c3(n,e).trim(),l.indexOf("|")===-1||n.sCount[e]-n.blkIndent>=4)return!1;u=I9(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const f=u.length;if(f===0||f!==c.length)return!1;if(r)return!0;const d=n.parentType;n.parentType="table";const h=n.md.block.ruler.getRules("blockquote"),p=n.push("table_open","table",1),m=[e,0];p.map=m;const g=n.push("thead_open","thead",1);g.map=[e,e+1];const v=n.push("tr_open","tr",1);v.map=[e,e+1];for(let _=0;_<u.length;_++){const y=n.push("th_open","th",1);c[_]&&(y.attrs=[["style","text-align:"+c[_]]]);const k=n.push("inline","",0);k.content=u[_].trim(),k.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let b,w=0;for(i=e+2;i<t&&!(n.sCount[i]<n.blkIndent);i++){let _=!1;for(let k=0,S=h.length;k<S;k++)if(h[k](n,i,t,!0)){_=!0;break}if(_||(l=c3(n,i).trim(),!l)||n.sCount[i]-n.blkIndent>=4||(u=I9(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),w+=f-u.length,w>D5e))break;if(i===e+2){const k=n.push("tbody_open","tbody",1);k.map=b=[e+2,0]}const y=n.push("tr_open","tr",1);y.map=[i,i+1];for(let k=0;k<f;k++){const S=n.push("td_open","td",1);c[k]&&(S.attrs=[["style","text-align:"+c[k]]]);const E=n.push("inline","",0);E.content=u[k]?u[k].trim():"",E.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return b&&(n.push("tbody_close","tbody",-1),b[1]=i),n.push("table_close","table",-1),m[1]=i,n.parentType=d,n.line=i,!0}function P5e(n,e,t){if(n.sCount[e]-n.blkIndent<4)return!1;let r=e+1,i=r;for(;r<t;){if(n.isEmpty(r)){r++;continue}if(n.sCount[r]-n.blkIndent>=4){r++,i=r;continue}break}n.line=i;const o=n.push("code_block","code",0);return o.content=n.getLines(e,i,4+n.blkIndent,!1)+`
`,o.map=[e,n.line],!0}function I5e(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||i+3>o)return!1;const s=n.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=n.skipChars(i,s);let l=i-a;if(l<3)return!1;const u=n.src.slice(a,i),c=n.src.slice(i,o);if(s===96&&c.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let f=e,d=!1;for(;f++,!(f>=t||(i=a=n.bMarks[f]+n.tShift[f],o=n.eMarks[f],i<o&&n.sCount[f]<n.blkIndent));)if(n.src.charCodeAt(i)===s&&!(n.sCount[f]-n.blkIndent>=4)&&(i=n.skipChars(i,s),!(i-a<l)&&(i=n.skipSpaces(i),!(i<o)))){d=!0;break}l=n.sCount[e],n.line=f+(d?1:0);const h=n.push("fence","code",0);return h.info=c,h.content=n.getLines(e+1,f,l,!0),h.markup=u,h.map=[e,n.line],!0}function N5e(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];const s=n.lineMax;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],c=[],f=n.md.block.ruler.getRules("blockquote"),d=n.parentType;n.parentType="blockquote";let h=!1,p;for(p=e;p<t;p++){const w=n.sCount[p]<n.blkIndent;if(i=n.bMarks[p]+n.tShift[p],o=n.eMarks[p],i>=o)break;if(n.src.charCodeAt(i++)===62&&!w){let y=n.sCount[p]+1,k,S;n.src.charCodeAt(i)===32?(i++,y++,S=!1,k=!0):n.src.charCodeAt(i)===9?(k=!0,(n.bsCount[p]+y)%4===3?(i++,y++,S=!1):S=!0):k=!1;let E=y;for(a.push(n.bMarks[p]),n.bMarks[p]=i;i<o;){const M=n.src.charCodeAt(i);if(Kn(M))M===9?E+=4-(E+n.bsCount[p]+(S?1:0))%4:E++;else break;i++}h=i>=o,l.push(n.bsCount[p]),n.bsCount[p]=n.sCount[p]+1+(k?1:0),u.push(n.sCount[p]),n.sCount[p]=E-y,c.push(n.tShift[p]),n.tShift[p]=i-n.bMarks[p];continue}if(h)break;let _=!1;for(let y=0,k=f.length;y<k;y++)if(f[y](n,p,t,!0)){_=!0;break}if(_){n.lineMax=p,n.blkIndent!==0&&(a.push(n.bMarks[p]),l.push(n.bsCount[p]),c.push(n.tShift[p]),u.push(n.sCount[p]),n.sCount[p]-=n.blkIndent);break}a.push(n.bMarks[p]),l.push(n.bsCount[p]),c.push(n.tShift[p]),u.push(n.sCount[p]),n.sCount[p]=-1}const m=n.blkIndent;n.blkIndent=0;const g=n.push("blockquote_open","blockquote",1);g.markup=">";const v=[e,0];g.map=v,n.md.block.tokenize(n,e,p);const b=n.push("blockquote_close","blockquote",-1);b.markup=">",n.lineMax=s,n.parentType=d,v[1]=n.line;for(let w=0;w<c.length;w++)n.bMarks[w+e]=a[w],n.tShift[w+e]=c[w],n.sCount[w+e]=u[w],n.bsCount[w+e]=l[w];return n.blkIndent=m,!0}function B5e(n,e,t,r){const i=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let o=n.bMarks[e]+n.tShift[e];const s=n.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){const u=n.src.charCodeAt(o++);if(u!==s&&!Kn(u))return!1;u===s&&a++}if(a<3)return!1;if(r)return!0;n.line=e+1;const l=n.push("hr","hr",0);return l.map=[e,n.line],l.markup=Array(a+1).join(String.fromCharCode(s)),!0}function N9(n,e){const t=n.eMarks[e];let r=n.bMarks[e]+n.tShift[e];const i=n.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<t){const o=n.src.charCodeAt(r);if(!Kn(o))return-1}return r}function B9(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];let i=t;if(i+1>=r)return-1;let o=n.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=r)return-1;if(o=n.src.charCodeAt(i++),o>=48&&o<=57){if(i-t>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<r&&(o=n.src.charCodeAt(i),!Kn(o))?-1:i}function L5e(n,e){const t=n.level+2;for(let r=e+2,i=n.tokens.length-2;r<i;r++)n.tokens[r].level===t&&n.tokens[r].type==="paragraph_open"&&(n.tokens[r+2].hidden=!0,n.tokens[r].hidden=!0,r+=2)}function F5e(n,e,t,r){let i,o,s,a,l=e,u=!0;if(n.sCount[l]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[l]-n.listIndent>=4&&n.sCount[l]<n.blkIndent)return!1;let c=!1;r&&n.parentType==="paragraph"&&n.sCount[l]>=n.blkIndent&&(c=!0);let f,d,h;if((h=B9(n,l))>=0){if(f=!0,s=n.bMarks[l]+n.tShift[l],d=Number(n.src.slice(s,h-1)),c&&d!==1)return!1}else if((h=N9(n,l))>=0)f=!1;else return!1;if(c&&n.skipSpaces(h)>=n.eMarks[l])return!1;if(r)return!0;const p=n.src.charCodeAt(h-1),m=n.tokens.length;f?(a=n.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=n.push("bullet_list_open","ul",1);const g=[l,0];a.map=g,a.markup=String.fromCharCode(p);let v=!1;const b=n.md.block.ruler.getRules("list"),w=n.parentType;for(n.parentType="list";l<t;){o=h,i=n.eMarks[l];const _=n.sCount[l]+h-(n.bMarks[l]+n.tShift[l]);let y=_;for(;o<i;){const N=n.src.charCodeAt(o);if(N===9)y+=4-(y+n.bsCount[l])%4;else if(N===32)y++;else break;o++}const k=o;let S;k>=i?S=1:S=y-_,S>4&&(S=1);const E=_+S;a=n.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const M=[l,0];a.map=M,f&&(a.info=n.src.slice(s,h-1));const R=n.tight,O=n.tShift[l],I=n.sCount[l],P=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=E,n.tight=!0,n.tShift[l]=k-n.bMarks[l],n.sCount[l]=y,k>=i&&n.isEmpty(l+1)?n.line=Math.min(n.line+2,t):n.md.block.tokenize(n,l,t,!0),(!n.tight||v)&&(u=!1),v=n.line-l>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=P,n.tShift[l]=O,n.sCount[l]=I,n.tight=R,a=n.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=n.line,M[1]=l,l>=t||n.sCount[l]<n.blkIndent||n.sCount[l]-n.blkIndent>=4)break;let A=!1;for(let N=0,F=b.length;N<F;N++)if(b[N](n,l,t,!0)){A=!0;break}if(A)break;if(f){if(h=B9(n,l),h<0)break;s=n.bMarks[l]+n.tShift[l]}else if(h=N9(n,l),h<0)break;if(p!==n.src.charCodeAt(h-1))break}return f?a=n.push("ordered_list_close","ol",-1):a=n.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),g[1]=l,n.line=l,n.parentType=w,u&&L5e(n,m),!0}function z5e(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e],s=e+1;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==91)return!1;function a(b){const w=n.lineMax;if(b>=w||n.isEmpty(b))return null;let _=!1;if(n.sCount[b]-n.blkIndent>3&&(_=!0),n.sCount[b]<0&&(_=!0),!_){const S=n.md.block.ruler.getRules("reference"),E=n.parentType;n.parentType="reference";let M=!1;for(let R=0,O=S.length;R<O;R++)if(S[R](n,b,w,!0)){M=!0;break}if(n.parentType=E,M)return null}const y=n.bMarks[b]+n.tShift[b],k=n.eMarks[b];return n.src.slice(y,k+1)}let l=n.src.slice(i,o+1);o=l.length;let u=-1;for(i=1;i<o;i++){const b=l.charCodeAt(i);if(b===91)return!1;if(b===93){u=i;break}else if(b===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(b===92&&(i++,i<o&&l.charCodeAt(i)===10)){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<o;i++){const b=l.charCodeAt(i);if(b===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(!Kn(b))break}const c=n.md.helpers.parseLinkDestination(l,i,o);if(!c.ok)return!1;const f=n.md.normalizeLink(c.str);if(!n.md.validateLink(f))return!1;i=c.pos;const d=i,h=s,p=i;for(;i<o;i++){const b=l.charCodeAt(i);if(b===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(!Kn(b))break}let m=n.md.helpers.parseLinkTitle(l,i,o);for(;m.can_continue;){const b=a(s);if(b===null)break;l+=b,i=o,o=l.length,s++,m=n.md.helpers.parseLinkTitle(l,i,o,m)}let g;for(i<o&&p!==i&&m.ok?(g=m.str,i=m.pos):(g="",i=d,s=h);i<o;){const b=l.charCodeAt(i);if(!Kn(b))break;i++}if(i<o&&l.charCodeAt(i)!==10&&g)for(g="",i=d,s=h;i<o;){const b=l.charCodeAt(i);if(!Kn(b))break;i++}if(i<o&&l.charCodeAt(i)!==10)return!1;const v=iw(l.slice(1,u));return v?(r||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[v]>"u"&&(n.env.references[v]={title:g,href:f}),n.line=s),!0):!1}const j5e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],H5e="[a-zA-Z_:][a-zA-Z0-9:._-]*",V5e="[^\"'=<>`\\x00-\\x20]+",W5e="'[^']*'",q5e='"[^"]*"',U5e="(?:"+V5e+"|"+W5e+"|"+q5e+")",G5e="(?:\\s+"+H5e+"(?:\\s*=\\s*"+U5e+")?)",AG="<[A-Za-z][A-Za-z0-9\\-]*"+G5e+"*\\s*\\/?>",MG="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",K5e="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",J5e="<[?][\\s\\S]*?[?]>",Y5e="<![A-Za-z][^>]*>",X5e="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Q5e=new RegExp("^(?:"+AG+"|"+MG+"|"+K5e+"|"+J5e+"|"+Y5e+"|"+X5e+")"),Z5e=new RegExp("^(?:"+AG+"|"+MG+")"),gd=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+j5e.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Z5e.source+"\\s*$"),/^$/,!1]];function $5e(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(i)!==60)return!1;let s=n.src.slice(i,o),a=0;for(;a<gd.length&&!gd[a][0].test(s);a++);if(a===gd.length)return!1;if(r)return gd[a][2];let l=e+1;if(!gd[a][1].test(s)){for(;l<t&&!(n.sCount[l]<n.blkIndent);l++)if(i=n.bMarks[l]+n.tShift[l],o=n.eMarks[l],s=n.src.slice(i,o),gd[a][1].test(s)){s.length!==0&&l++;break}}n.line=l;const u=n.push("html_block","",0);return u.map=[e,l],u.content=n.getLines(e,l,n.blkIndent,!0),!0}function eTe(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let s=n.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=n.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=n.src.charCodeAt(++i);if(a>6||i<o&&!Kn(s))return!1;if(r)return!0;o=n.skipSpacesBack(o,i);const l=n.skipCharsBack(o,35,i);l>i&&Kn(n.src.charCodeAt(l-1))&&(o=l),n.line=e+1;const u=n.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,n.line];const c=n.push("inline","",0);c.content=n.src.slice(i,o).trim(),c.map=[e,n.line],c.children=[];const f=n.push("heading_close","h"+String(a),-1);return f.markup="########".slice(0,a),!0}function tTe(n,e,t){const r=n.md.block.ruler.getRules("paragraph");if(n.sCount[e]-n.blkIndent>=4)return!1;const i=n.parentType;n.parentType="paragraph";let o=0,s,a=e+1;for(;a<t&&!n.isEmpty(a);a++){if(n.sCount[a]-n.blkIndent>3)continue;if(n.sCount[a]>=n.blkIndent){let h=n.bMarks[a]+n.tShift[a];const p=n.eMarks[a];if(h<p&&(s=n.src.charCodeAt(h),(s===45||s===61)&&(h=n.skipChars(h,s),h=n.skipSpaces(h),h>=p))){o=s===61?1:2;break}}if(n.sCount[a]<0)continue;let d=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](n,a,t,!0)){d=!0;break}if(d)break}if(!o)return!1;const l=n.getLines(e,a,n.blkIndent,!1).trim();n.line=a+1;const u=n.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(s),u.map=[e,n.line];const c=n.push("inline","",0);c.content=l,c.map=[e,n.line-1],c.children=[];const f=n.push("heading_close","h"+String(o),-1);return f.markup=String.fromCharCode(s),n.parentType=i,!0}function nTe(n,e,t){const r=n.md.block.ruler.getRules("paragraph"),i=n.parentType;let o=e+1;for(n.parentType="paragraph";o<t&&!n.isEmpty(o);o++){if(n.sCount[o]-n.blkIndent>3||n.sCount[o]<0)continue;let u=!1;for(let c=0,f=r.length;c<f;c++)if(r[c](n,o,t,!0)){u=!0;break}if(u)break}const s=n.getLines(e,o,n.blkIndent,!1).trim();n.line=o;const a=n.push("paragraph_open","p",1);a.map=[e,n.line];const l=n.push("inline","",0);return l.content=s,l.map=[e,n.line],l.children=[],n.push("paragraph_close","p",-1),n.parentType=i,!0}const Mv=[["table",R5e,["paragraph","reference"]],["code",P5e],["fence",I5e,["paragraph","reference","blockquote","list"]],["blockquote",N5e,["paragraph","reference","blockquote","list"]],["hr",B5e,["paragraph","reference","blockquote","list"]],["list",F5e,["paragraph","reference","blockquote"]],["reference",z5e],["html_block",$5e,["paragraph","reference","blockquote"]],["heading",eTe,["paragraph","reference","blockquote"]],["lheading",tTe],["paragraph",nTe]];function ow(){this.ruler=new ho;for(let n=0;n<Mv.length;n++)this.ruler.push(Mv[n][0],Mv[n][1],{alt:(Mv[n][2]||[]).slice()})}ow.prototype.tokenize=function(n,e,t){const r=this.ruler.getRules(""),i=r.length,o=n.md.options.maxNesting;let s=e,a=!1;for(;s<t&&(n.line=s=n.skipEmptyLines(s),!(s>=t||n.sCount[s]<n.blkIndent));){if(n.level>=o){n.line=t;break}const l=n.line;let u=!1;for(let c=0;c<i;c++)if(u=r[c](n,s,t,!1),u){if(l>=n.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");n.tight=!a,n.isEmpty(n.line-1)&&(a=!0),s=n.line,s<t&&n.isEmpty(s)&&(a=!0,s++,n.line=s)}};ow.prototype.parse=function(n,e,t,r){if(!n)return;const i=new this.State(n,e,t,r);this.tokenize(i,i.line,i.lineMax)};ow.prototype.State=Qa;function Qg(n,e,t,r){this.src=n,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Qg.prototype.pushPending=function(){const n=new ea("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};Qg.prototype.push=function(n,e,t){this.pending&&this.pushPending();const r=new ea(n,e,t);let i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};Qg.prototype.scanDelims=function(n,e){const t=this.posMax,r=this.src.charCodeAt(n),i=n>0?this.src.charCodeAt(n-1):32;let o=n;for(;o<t&&this.src.charCodeAt(o)===r;)o++;const s=o-n,a=o<t?this.src.charCodeAt(o):32,l=rg(i)||ng(String.fromCharCode(i)),u=rg(a)||ng(String.fromCharCode(a)),c=tg(i),f=tg(a),d=!f&&(!u||c||l),h=!c&&(!l||f||u);return{can_open:d&&(e||!h||l),can_close:h&&(e||!d||u),length:s}};Qg.prototype.Token=ea;function rTe(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function iTe(n,e){let t=n.pos;for(;t<n.posMax&&!rTe(n.src.charCodeAt(t));)t++;return t===n.pos?!1:(e||(n.pending+=n.src.slice(n.pos,t)),n.pos=t,!0)}const oTe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function sTe(n,e){if(!n.md.options.linkify||n.linkLevel>0)return!1;const t=n.pos,r=n.posMax;if(t+3>r||n.src.charCodeAt(t)!==58||n.src.charCodeAt(t+1)!==47||n.src.charCodeAt(t+2)!==47)return!1;const i=n.pending.match(oTe);if(!i)return!1;const o=i[1],s=n.md.linkify.matchAtStart(n.src.slice(t-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");const l=n.md.normalizeLink(a);if(!n.md.validateLink(l))return!1;if(!e){n.pending=n.pending.slice(0,-o.length);const u=n.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const c=n.push("text","",0);c.content=n.md.normalizeLinkText(a);const f=n.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return n.pos+=a.length-o.length,!0}function aTe(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==10)return!1;const r=n.pending.length-1,i=n.posMax;if(!e)if(r>=0&&n.pending.charCodeAt(r)===32)if(r>=1&&n.pending.charCodeAt(r-1)===32){let o=r-1;for(;o>=1&&n.pending.charCodeAt(o-1)===32;)o--;n.pending=n.pending.slice(0,o),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(t++;t<i&&Kn(n.src.charCodeAt(t));)t++;return n.pos=t,!0}const uA=[];for(let n=0;n<256;n++)uA.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){uA[n.charCodeAt(0)]=1});function lTe(n,e){let t=n.pos;const r=n.posMax;if(n.src.charCodeAt(t)!==92||(t++,t>=r))return!1;let i=n.src.charCodeAt(t);if(i===10){for(e||n.push("hardbreak","br",0),t++;t<r&&(i=n.src.charCodeAt(t),!!Kn(i));)t++;return n.pos=t,!0}let o=n.src[t];if(i>=55296&&i<=56319&&t+1<r){const a=n.src.charCodeAt(t+1);a>=56320&&a<=57343&&(o+=n.src[t+1],t++)}const s="\\"+o;if(!e){const a=n.push("text_special","",0);i<256&&uA[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return n.pos=t+1,!0}function uTe(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==96)return!1;const i=t;t++;const o=n.posMax;for(;t<o&&n.src.charCodeAt(t)===96;)t++;const s=n.src.slice(i,t),a=s.length;if(n.backticksScanned&&(n.backticks[a]||0)<=i)return e||(n.pending+=s),n.pos+=a,!0;let l=t,u;for(;(u=n.src.indexOf("`",l))!==-1;){for(l=u+1;l<o&&n.src.charCodeAt(l)===96;)l++;const c=l-u;if(c===a){if(!e){const f=n.push("code_inline","code",0);f.markup=s,f.content=n.src.slice(t,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=l,!0}n.backticks[c]=u}return n.backticksScanned=!0,e||(n.pending+=s),n.pos+=a,!0}function cTe(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==126)return!1;const i=n.scanDelims(n.pos,!0);let o=i.length;const s=String.fromCharCode(r);if(o<2)return!1;let a;o%2&&(a=n.push("text","",0),a.content=s,o--);for(let l=0;l<o;l+=2)a=n.push("text","",0),a.content=s+s,n.delimiters.push({marker:r,length:0,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return n.pos+=i.length,!0}function L9(n,e){let t;const r=[],i=e.length;for(let o=0;o<i;o++){const s=e[o];if(s.marker!==126||s.end===-1)continue;const a=e[s.end];t=n.tokens[s.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=n.tokens[a.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",n.tokens[a.token-1].type==="text"&&n.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const o=r.pop();let s=o+1;for(;s<n.tokens.length&&n.tokens[s].type==="s_close";)s++;s--,o!==s&&(t=n.tokens[s],n.tokens[s]=n.tokens[o],n.tokens[o]=t)}}function fTe(n){const e=n.tokens_meta,t=n.tokens_meta.length;L9(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&L9(n,e[r].delimiters)}const TG={tokenize:cTe,postProcess:fTe};function dTe(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==95&&r!==42)return!1;const i=n.scanDelims(n.pos,r===42);for(let o=0;o<i.length;o++){const s=n.push("text","",0);s.content=String.fromCharCode(r),n.delimiters.push({marker:r,length:i.length,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return n.pos+=i.length,!0}function F9(n,e){const t=e.length;for(let r=t-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const o=e[i.end],s=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),l=n.tokens[i.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?a+a:a,l.content="";const u=n.tokens[o.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?a+a:a,u.content="",s&&(n.tokens[e[r-1].token].content="",n.tokens[e[i.end+1].token].content="",r--)}}function hTe(n){const e=n.tokens_meta,t=n.tokens_meta.length;F9(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&F9(n,e[r].delimiters)}const OG={tokenize:dTe,postProcess:hTe};function pTe(n,e){let t,r,i,o,s="",a="",l=n.pos,u=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;const c=n.pos,f=n.posMax,d=n.pos+1,h=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(h<0)return!1;let p=h+1;if(p<f&&n.src.charCodeAt(p)===40){for(u=!1,p++;p<f&&(t=n.src.charCodeAt(p),!(!Kn(t)&&t!==10));p++);if(p>=f)return!1;if(l=p,i=n.md.helpers.parseLinkDestination(n.src,p,n.posMax),i.ok){for(s=n.md.normalizeLink(i.str),n.md.validateLink(s)?p=i.pos:s="",l=p;p<f&&(t=n.src.charCodeAt(p),!(!Kn(t)&&t!==10));p++);if(i=n.md.helpers.parseLinkTitle(n.src,p,n.posMax),p<f&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<f&&(t=n.src.charCodeAt(p),!(!Kn(t)&&t!==10));p++);}(p>=f||n.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof n.env.references>"u")return!1;if(p<f&&n.src.charCodeAt(p)===91?(l=p+1,p=n.md.helpers.parseLinkLabel(n,p),p>=0?r=n.src.slice(l,p++):p=h+1):p=h+1,r||(r=n.src.slice(d,h)),o=n.env.references[iw(r)],!o)return n.pos=c,!1;s=o.href,a=o.title}if(!e){n.pos=d,n.posMax=h;const m=n.push("link_open","a",1),g=[["href",s]];m.attrs=g,a&&g.push(["title",a]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=p,n.posMax=f,!0}function mTe(n,e){let t,r,i,o,s,a,l,u,c="";const f=n.pos,d=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;const h=n.pos+2,p=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(p<0)return!1;if(o=p+1,o<d&&n.src.charCodeAt(o)===40){for(o++;o<d&&(t=n.src.charCodeAt(o),!(!Kn(t)&&t!==10));o++);if(o>=d)return!1;for(u=o,a=n.md.helpers.parseLinkDestination(n.src,o,n.posMax),a.ok&&(c=n.md.normalizeLink(a.str),n.md.validateLink(c)?o=a.pos:c=""),u=o;o<d&&(t=n.src.charCodeAt(o),!(!Kn(t)&&t!==10));o++);if(a=n.md.helpers.parseLinkTitle(n.src,o,n.posMax),o<d&&u!==o&&a.ok)for(l=a.str,o=a.pos;o<d&&(t=n.src.charCodeAt(o),!(!Kn(t)&&t!==10));o++);else l="";if(o>=d||n.src.charCodeAt(o)!==41)return n.pos=f,!1;o++}else{if(typeof n.env.references>"u")return!1;if(o<d&&n.src.charCodeAt(o)===91?(u=o+1,o=n.md.helpers.parseLinkLabel(n,o),o>=0?i=n.src.slice(u,o++):o=p+1):o=p+1,i||(i=n.src.slice(h,p)),s=n.env.references[iw(i)],!s)return n.pos=f,!1;c=s.href,l=s.title}if(!e){r=n.src.slice(h,p);const m=[];n.md.inline.parse(r,n.md,n.env,m);const g=n.push("image","img",0),v=[["src",c],["alt",""]];g.attrs=v,g.children=m,g.content=r,l&&v.push(["title",l])}return n.pos=o,n.posMax=d,!0}const gTe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,vTe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function bTe(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==60)return!1;const r=n.pos,i=n.posMax;for(;;){if(++t>=i)return!1;const s=n.src.charCodeAt(t);if(s===60)return!1;if(s===62)break}const o=n.src.slice(r+1,t);if(vTe.test(o)){const s=n.md.normalizeLink(o);if(!n.md.validateLink(s))return!1;if(!e){const a=n.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=n.push("text","",0);l.content=n.md.normalizeLinkText(o);const u=n.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return n.pos+=o.length+2,!0}if(gTe.test(o)){const s=n.md.normalizeLink("mailto:"+o);if(!n.md.validateLink(s))return!1;if(!e){const a=n.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=n.push("text","",0);l.content=n.md.normalizeLinkText(o);const u=n.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return n.pos+=o.length+2,!0}return!1}function yTe(n){return/^<a[>\s]/i.test(n)}function _Te(n){return/^<\/a\s*>/i.test(n)}function wTe(n){const e=n|32;return e>=97&&e<=122}function kTe(n,e){if(!n.md.options.html)return!1;const t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==60||r+2>=t)return!1;const i=n.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!wTe(i))return!1;const o=n.src.slice(r).match(Q5e);if(!o)return!1;if(!e){const s=n.push("html_inline","",0);s.content=o[0],yTe(s.content)&&n.linkLevel++,_Te(s.content)&&n.linkLevel--}return n.pos+=o[0].length,!0}const CTe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,STe=/^&([a-z][a-z0-9]{1,31});/i;function xTe(n,e){const t=n.pos,r=n.posMax;if(n.src.charCodeAt(t)!==38||t+1>=r)return!1;if(n.src.charCodeAt(t+1)===35){const o=n.src.slice(t).match(CTe);if(o){if(!e){const s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=n.push("text_special","",0);a.content=aA(s)?p2(s):p2(65533),a.markup=o[0],a.info="entity"}return n.pos+=o[0].length,!0}}else{const o=n.src.slice(t).match(STe);if(o){const s=kG(o[0]);if(s!==o[0]){if(!e){const a=n.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return n.pos+=o[0].length,!0}}}return!1}function z9(n){const e={},t=n.length;if(!t)return;let r=0,i=-2;const o=[];for(let s=0;s<t;s++){const a=n[s];if(o.push(0),(n[r].marker!==a.marker||i!==a.token-1)&&(r=s),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[a.marker][(a.open?3:0)+a.length%3];let u=r-o[r]-1,c=u;for(;u>l;u-=o[u]+1){const f=n[u];if(f.marker===a.marker&&f.open&&f.end<0){let d=!1;if((f.close||a.open)&&(f.length+a.length)%3===0&&(f.length%3!==0||a.length%3!==0)&&(d=!0),!d){const h=u>0&&!n[u-1].open?o[u-1]+1:0;o[s]=s-u+h,o[u]=h,a.open=!1,f.end=s,f.close=!1,c=-1,i=-2;break}}}c!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=c)}}function ETe(n){const e=n.tokens_meta,t=n.tokens_meta.length;z9(n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&z9(e[r].delimiters)}function ATe(n){let e,t,r=0;const i=n.tokens,o=n.tokens.length;for(e=t=0;e<o;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<o&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==t&&(i[t]=i[e]),t++);e!==t&&(i.length=t)}const f3=[["text",iTe],["linkify",sTe],["newline",aTe],["escape",lTe],["backticks",uTe],["strikethrough",TG.tokenize],["emphasis",OG.tokenize],["link",pTe],["image",mTe],["autolink",bTe],["html_inline",kTe],["entity",xTe]],d3=[["balance_pairs",ETe],["strikethrough",TG.postProcess],["emphasis",OG.postProcess],["fragments_join",ATe]];function Zg(){this.ruler=new ho;for(let n=0;n<f3.length;n++)this.ruler.push(f3[n][0],f3[n][1]);this.ruler2=new ho;for(let n=0;n<d3.length;n++)this.ruler2.push(d3[n][0],d3[n][1])}Zg.prototype.skipToken=function(n){const e=n.pos,t=this.ruler.getRules(""),r=t.length,i=n.md.options.maxNesting,o=n.cache;if(typeof o[e]<"u"){n.pos=o[e];return}let s=!1;if(n.level<i){for(let a=0;a<r;a++)if(n.level++,s=t[a](n,!0),n.level--,s){if(e>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;s||n.pos++,o[e]=n.pos};Zg.prototype.tokenize=function(n){const e=this.ruler.getRules(""),t=e.length,r=n.posMax,i=n.md.options.maxNesting;for(;n.pos<r;){const o=n.pos;let s=!1;if(n.level<i){for(let a=0;a<t;a++)if(s=e[a](n,!1),s){if(o>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(n.pos>=r)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};Zg.prototype.parse=function(n,e,t,r){const i=new this.State(n,e,t,r);this.tokenize(i);const o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};Zg.prototype.State=Qg;function MTe(n){const e={};n=n||{},e.src_Any=vG.source,e.src_Cc=bG.source,e.src_Z=_G.source,e.src_P=oA.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function M4(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function sw(n){return Object.prototype.toString.call(n)}function TTe(n){return sw(n)==="[object String]"}function OTe(n){return sw(n)==="[object Object]"}function DTe(n){return sw(n)==="[object RegExp]"}function j9(n){return sw(n)==="[object Function]"}function RTe(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const DG={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function PTe(n){return Object.keys(n||{}).reduce(function(e,t){return e||DG.hasOwnProperty(t)},!1)}const ITe={"http:":{validate:function(n,e,t){const r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){const r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){const r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},NTe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",BTe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function LTe(n){n.__index__=-1,n.__text_cache__=""}function FTe(n){return function(e,t){const r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function H9(){return function(n,e){e.normalize(n)}}function m2(n){const e=n.re=MTe(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(NTe),t.push(e.src_xn),e.src_tlds=t.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];n.__compiled__={};function o(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(n.__schemas__).forEach(function(a){const l=n.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(n.__compiled__[a]=u,OTe(l)){DTe(l.validate)?u.validate=FTe(l.validate):j9(l.validate)?u.validate=l.validate:o(a,l),j9(l.normalize)?u.normalize=l.normalize:l.normalize?o(a,l):u.normalize=H9();return}if(TTe(l)){i.push(a);return}o(a,l)}),i.forEach(function(a){n.__compiled__[n.__schemas__[a]]&&(n.__compiled__[a].validate=n.__compiled__[n.__schemas__[a]].validate,n.__compiled__[a].normalize=n.__compiled__[n.__schemas__[a]].normalize)}),n.__compiled__[""]={validate:null,normalize:H9()};const s=Object.keys(n.__compiled__).filter(function(a){return a.length>0&&n.__compiled__[a]}).map(RTe).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),LTe(n)}function zTe(n,e){const t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function T4(n,e){const t=new zTe(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function To(n,e){if(!(this instanceof To))return new To(n,e);e||PTe(n)&&(e=n,n={}),this.__opts__=M4({},DG,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=M4({},ITe,n),this.__compiled__={},this.__tlds__=BTe,this.__tlds_replaced__=!1,this.re={},m2(this)}To.prototype.add=function(e,t){return this.__schemas__[e]=t,m2(this),this};To.prototype.set=function(e){return this.__opts__=M4(this.__opts__,e),this};To.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,i,o,s,a,l,u,c;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(t=l.exec(e))!==null;)if(o=this.testSchemaAt(e,t[2],l.lastIndex),o){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};To.prototype.pretest=function(e){return this.re.pretest.test(e)};To.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};To.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(T4(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)t.push(T4(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};To.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,T4(this,0)):null};To.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),m2(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,m2(this),this)};To.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};To.prototype.onCompile=function(){};const hh=2147483647,ka=36,cA=1,ig=26,jTe=38,HTe=700,RG=72,PG=128,IG="-",VTe=/^xn--/,WTe=/[^\0-\x7F]/,qTe=/[\x2E\u3002\uFF0E\uFF61]/g,UTe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h3=ka-cA,Ca=Math.floor,p3=String.fromCharCode;function du(n){throw new RangeError(UTe[n])}function GTe(n,e){const t=[];let r=n.length;for(;r--;)t[r]=e(n[r]);return t}function NG(n,e){const t=n.split("@");let r="";t.length>1&&(r=t[0]+"@",n=t[1]),n=n.replace(qTe,".");const i=n.split("."),o=GTe(i,e).join(".");return r+o}function BG(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const o=n.charCodeAt(t++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}const KTe=n=>String.fromCodePoint(...n),JTe=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:ka},V9=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},LG=function(n,e,t){let r=0;for(n=t?Ca(n/HTe):n>>1,n+=Ca(n/e);n>h3*ig>>1;r+=ka)n=Ca(n/h3);return Ca(r+(h3+1)*n/(n+jTe))},FG=function(n){const e=[],t=n.length;let r=0,i=PG,o=RG,s=n.lastIndexOf(IG);s<0&&(s=0);for(let a=0;a<s;++a)n.charCodeAt(a)>=128&&du("not-basic"),e.push(n.charCodeAt(a));for(let a=s>0?s+1:0;a<t;){const l=r;for(let c=1,f=ka;;f+=ka){a>=t&&du("invalid-input");const d=JTe(n.charCodeAt(a++));d>=ka&&du("invalid-input"),d>Ca((hh-r)/c)&&du("overflow"),r+=d*c;const h=f<=o?cA:f>=o+ig?ig:f-o;if(d<h)break;const p=ka-h;c>Ca(hh/p)&&du("overflow"),c*=p}const u=e.length+1;o=LG(r-l,u,l==0),Ca(r/u)>hh-i&&du("overflow"),i+=Ca(r/u),r%=u,e.splice(r++,0,i)}return String.fromCodePoint(...e)},zG=function(n){const e=[];n=BG(n);const t=n.length;let r=PG,i=0,o=RG;for(const l of n)l<128&&e.push(p3(l));const s=e.length;let a=s;for(s&&e.push(IG);a<t;){let l=hh;for(const c of n)c>=r&&c<l&&(l=c);const u=a+1;l-r>Ca((hh-i)/u)&&du("overflow"),i+=(l-r)*u,r=l;for(const c of n)if(c<r&&++i>hh&&du("overflow"),c===r){let f=i;for(let d=ka;;d+=ka){const h=d<=o?cA:d>=o+ig?ig:d-o;if(f<h)break;const p=f-h,m=ka-h;e.push(p3(V9(h+p%m,0))),f=Ca(p/m)}e.push(p3(V9(f,0))),o=LG(i,u,a===s),i=0,++a}++i,++r}return e.join("")},YTe=function(n){return NG(n,function(e){return VTe.test(e)?FG(e.slice(4).toLowerCase()):e})},XTe=function(n){return NG(n,function(e){return WTe.test(e)?"xn--"+zG(e):e})},jG={version:"2.3.1",ucs2:{decode:BG,encode:KTe},decode:FG,encode:zG,toASCII:XTe,toUnicode:YTe},QTe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},ZTe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},$Te={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},eOe={default:QTe,zero:ZTe,commonmark:$Te},tOe=/^(vbscript|javascript|file|data):/,nOe=/^data:image\/(gif|png|jpeg|webp);/;function rOe(n){const e=n.trim().toLowerCase();return tOe.test(e)?nOe.test(e):!0}const HG=["http:","https:","mailto:"];function iOe(n){const e=iA(n,!0);if(e.hostname&&(!e.protocol||HG.indexOf(e.protocol)>=0))try{e.hostname=jG.toASCII(e.hostname)}catch{}return Xg(rA(e))}function oOe(n){const e=iA(n,!0);if(e.hostname&&(!e.protocol||HG.indexOf(e.protocol)>=0))try{e.hostname=jG.toUnicode(e.hostname)}catch{}return Xh(rA(e),Xh.defaultChars+"%")}function po(n,e){if(!(this instanceof po))return new po(n,e);e||sA(n)||(e=n||{},n="default"),this.inline=new Zg,this.block=new ow,this.core=new lA,this.renderer=new _p,this.linkify=new To,this.validateLink=rOe,this.normalizeLink=iOe,this.normalizeLinkText=oOe,this.utils=a5e,this.helpers=rw({},f5e),this.options={},this.configure(n),e&&this.set(e)}po.prototype.set=function(n){return rw(this.options,n),this};po.prototype.configure=function(n){const e=this;if(sA(n)){const t=n;if(n=eOe[t],!n)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(t){n.components[t].rules&&e[t].ruler.enableOnly(n.components[t].rules),n.components[t].rules2&&e[t].ruler2.enableOnly(n.components[t].rules2)}),this};po.prototype.enable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};po.prototype.disable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};po.prototype.use=function(n){const e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};po.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");const t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};po.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};po.prototype.parseInline=function(n,e){const t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};po.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};const sOe=new H6({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(n){return["h"+n.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:n=>({params:n.getAttribute("data-params")||""})}],toDOM(n){return["pre",n.attrs.params?{"data-params":n.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(n){return{order:n.hasAttribute("start")?+n.getAttribute("start"):1,tight:n.hasAttribute("data-tight")}}}],toDOM(n){return["ol",{start:n.attrs.order==1?null:n.attrs.order,"data-tight":n.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:n=>({tight:n.hasAttribute("data-tight")})}],toDOM(n){return["ul",{"data-tight":n.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(n){return{src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt")}}}],toDOM(n){return["img",n.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:n=>n.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name=="strong"},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(n){return{href:n.getAttribute("href"),title:n.getAttribute("title")}}}],toDOM(n){return["a",n.attrs]}},code:{code:!0,parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function aOe(n,e){if(n.isText&&e.isText&&kn.sameSet(n.marks,e.marks))return n.withText(n.text+e.text)}class lOe{constructor(e,t){this.schema=e,this.tokenHandlers=t,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:kn.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let t=this.top(),r=t.content,i=r[r.length-1],o=this.schema.text(e,t.marks),s;i&&(s=aOe(i,o))?r[r.length-1]=s:r.push(o)}openMark(e){let t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){let t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){let r=e[t],i=this.tokenHandlers[r.type];if(!i)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");i(this,r,e,t)}}addNode(e,t,r){let i=this.top(),o=e.createAndFill(t,r,i?i.marks:[]);return o?(this.push(o),o):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[],marks:kn.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function Jp(n,e,t,r){return n.getAttrs?n.getAttrs(e,t,r):n.attrs instanceof Function?n.attrs(e):n.attrs}function m3(n,e){return n.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function W9(n){return n[n.length-1]==`
`?n.slice(0,n.length-1):n}function g3(){}function uOe(n,e){let t=Object.create(null);for(let r in e){let i=e[r];if(i.block){let o=n.nodeType(i.block);m3(i,r)?t[r]=(s,a,l,u)=>{s.openNode(o,Jp(i,a,l,u)),s.addText(W9(a.content)),s.closeNode()}:(t[r+"_open"]=(s,a,l,u)=>s.openNode(o,Jp(i,a,l,u)),t[r+"_close"]=s=>s.closeNode())}else if(i.node){let o=n.nodeType(i.node);t[r]=(s,a,l,u)=>s.addNode(o,Jp(i,a,l,u))}else if(i.mark){let o=n.marks[i.mark];m3(i,r)?t[r]=(s,a,l,u)=>{s.openMark(o.create(Jp(i,a,l,u))),s.addText(W9(a.content)),s.closeMark(o)}:(t[r+"_open"]=(s,a,l,u)=>s.openMark(o.create(Jp(i,a,l,u))),t[r+"_close"]=s=>s.closeMark(o))}else if(i.ignore)m3(i,r)?t[r]=g3:(t[r+"_open"]=g3,t[r+"_close"]=g3);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return t.text=(r,i)=>r.addText(i.content),t.inline=(r,i)=>r.parseTokens(i.children),t.softbreak=t.softbreak||(r=>r.addText(" ")),t}let cOe=class{constructor(e,t,r){this.schema=e,this.tokenizer=t,this.tokens=r,this.tokenHandlers=uOe(e,r)}parse(e,t={}){let r=new lOe(this.schema,this.tokenHandlers),i;r.parseTokens(this.tokenizer.parse(e,t));do i=r.closeNode();while(r.stack.length);return i||this.schema.topNodeType.createAndFill()}};function q9(n,e){for(;++e<n.length;)if(n[e].type!="list_item_open")return n[e].hidden;return!1}new cOe(sOe,po("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(n,e,t)=>({tight:q9(e,t)})},ordered_list:{block:"ordered_list",getAttrs:(n,e,t)=>({order:+n.attrGet("start")||1,tight:q9(e,t)})},heading:{block:"heading",getAttrs:n=>({level:+n.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:n=>({params:n.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:n=>({src:n.attrGet("src"),title:n.attrGet("title")||null,alt:n.children[0]&&n.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:n=>({href:n.attrGet("href"),title:n.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});const fOe={open:"",close:"",mixable:!0};let dOe=class{constructor(e,t,r={}){this.nodes=e,this.marks=t,this.options=r}serialize(e,t={}){t=Object.assign({},this.options,t);let r=new VG(this.nodes,this.marks,t);return r.renderContent(e),r.out}};const Za=new dOe({blockquote(n,e){n.wrapBlock("> ",null,e,()=>n.renderContent(e))},code_block(n,e){const t=e.textContent.match(/`{3,}/gm),r=t?t.sort().slice(-1)[0]+"`":"```";n.write(r+(e.attrs.params||"")+`
`),n.text(e.textContent,!1),n.write(`
`),n.write(r),n.closeBlock(e)},heading(n,e){n.write(n.repeat("#",e.attrs.level)+" "),n.renderInline(e,!1),n.closeBlock(e)},horizontal_rule(n,e){n.write(e.attrs.markup||"---"),n.closeBlock(e)},bullet_list(n,e){n.renderList(e,"  ",()=>(e.attrs.bullet||"*")+" ")},ordered_list(n,e){let t=e.attrs.order||1,r=String(t+e.childCount-1).length,i=n.repeat(" ",r+2);n.renderList(e,i,o=>{let s=String(t+o);return n.repeat(" ",r-s.length)+s+". "})},list_item(n,e){n.renderContent(e)},paragraph(n,e){n.renderInline(e),n.closeBlock(e)},image(n,e){n.write("!["+n.esc(e.attrs.alt||"")+"]("+e.attrs.src.replace(/[\(\)]/g,"\\$&")+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(n,e,t,r){for(let i=r+1;i<t.childCount;i++)if(t.child(i).type!=e.type){n.write(`\\
`);return}},text(n,e){n.text(e.text,!n.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(n,e,t,r){return n.inAutolink=hOe(e,t,r),n.inAutolink?"<":"["},close(n,e,t,r){let{inAutolink:i}=n;return n.inAutolink=void 0,i?">":"]("+e.attrs.href.replace(/[\(\)"]/g,"\\$&")+(e.attrs.title?` "${e.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(n,e,t,r){return U9(t.child(r),-1)},close(n,e,t,r){return U9(t.child(r-1),1)},escape:!1}});function U9(n,e){let t=/`+/g,r,i=0;if(n.isText)for(;r=t.exec(n.text);)i=Math.max(i,r[0].length);let o=i>0&&e>0?" `":"`";for(let s=0;s<i;s++)o+="`";return i>0&&e<0&&(o+=" "),o}function hOe(n,e,t){if(n.attrs.title||!/^\w+:/.test(n.attrs.href))return!1;let r=e.child(t);return!r.isText||r.text!=n.attrs.href||r.marks[r.marks.length-1]!=n?!1:t==e.childCount-1||!n.isInSet(e.child(t+1).marks)}let VG=class{constructor(e,t,r){this.nodes=e,this.marks=t,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let t=this.delim,r=/\s+$/.exec(t);r&&(t=t.slice(0,t.length-r[0].length));for(let i=1;i<e;i++)this.out+=t+`
`}this.closed=null}}getMark(e){let t=this.marks[e];if(!t){if(this.options.strict!==!1)throw new Error(`Mark type \`${e}\` not supported by Markdown renderer`);t=fOe}return t}wrapBlock(e,t,r,i){let o=this.delim;this.write(t??e),this.delim+=e,i(),this.delim=o,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,t=!0){let r=e.split(`
`);for(let i=0;i<r.length;i++)this.write(),!t&&r[i][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(r[i],this.atBlockStart):r[i],i!=r.length-1&&(this.out+=`
`)}render(e,t,r){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,t,r);else{if(this.options.strict!==!1)throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");e.type.isLeaf||(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}}renderContent(e){e.forEach((t,r,i)=>this.render(t,e,i))}renderInline(e,t=!0){this.atBlockStart=t;let r=[],i="",o=(s,a,l)=>{let u=s?s.marks:[];s&&s.type.name===this.options.hardBreakNodeName&&(u=u.filter(m=>{if(l+1==e.childCount)return!1;let g=e.child(l+1);return m.isInSet(g.marks)&&(!g.isText||/\S/.test(g.text))}));let c=i;if(i="",s&&s.isText&&u.some(m=>{let g=this.getMark(m.type.name);return g&&g.expelEnclosingWhitespace&&!m.isInSet(r)})){let[m,g,v]=/^(\s*)(.*)$/m.exec(s.text);g&&(c+=g,s=v?s.withText(v):null,s||(u=r))}if(s&&s.isText&&u.some(m=>{let g=this.getMark(m.type.name);return g&&g.expelEnclosingWhitespace&&(l==e.childCount-1||!m.isInSet(e.child(l+1).marks))})){let[m,g,v]=/^(.*?)(\s*)$/m.exec(s.text);v&&(i=v,s=g?s.withText(g):null,s||(u=r))}let f=u.length?u[u.length-1]:null,d=f&&this.getMark(f.type.name).escape===!1,h=u.length-(d?1:0);e:for(let m=0;m<h;m++){let g=u[m];if(!this.getMark(g.type.name).mixable)break;for(let v=0;v<r.length;v++){let b=r[v];if(!this.getMark(b.type.name).mixable)break;if(g.eq(b)){m>v?u=u.slice(0,v).concat(g).concat(u.slice(v,m)).concat(u.slice(m+1,h)):v>m&&(u=u.slice(0,m).concat(u.slice(m+1,v)).concat(g).concat(u.slice(v,h)));continue e}}}let p=0;for(;p<Math.min(r.length,h)&&u[p].eq(r[p]);)++p;for(;p<r.length;)this.text(this.markString(r.pop(),!1,e,l),!1);if(c&&this.text(c),s){for(;r.length<h;){let m=u[r.length];r.push(m),this.text(this.markString(m,!0,e,l),!1),this.atBlockStart=!1}d&&s.isText?this.text(this.markString(f,!0,e,l)+s.text+this.markString(f,!1,e,l+1),!1):this.render(s,e,l),this.atBlockStart=!1}s!=null&&s.isText&&s.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(o),o(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,r){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let i=typeof e.attrs.tight<"u"?e.attrs.tight:this.options.tightLists,o=this.inTightList;this.inTightList=i,e.forEach((s,a,l)=>{l&&i&&this.flushClose(1),this.wrapBlock(t,r(l),e,()=>this.render(s,e,l))}),this.inTightList=o}esc(e,t=!1){return e=e.replace(/[`*\\~\[\]_]/g,(r,i)=>r=="_"&&i>0&&i+1<e.length&&e[i-1].match(/\w/)&&e[i+1].match(/\w/)?r:"\\"+r),t&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let t=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return t[0]+e+t[1]}repeat(e,t){let r="";for(let i=0;i<t;i++)r+=e;return r}markString(e,t,r,i){let o=this.getMark(e.type.name),s=t?o.open:o.close;return typeof s=="string"?s:s(this,e,r,i)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}};var O4=!0,WG=!1,qG=!1,pOe=function(n,e){e&&(O4=!e.enabled,WG=!!e.label,qG=!!e.labelAfter),n.core.ruler.after("inline","github-task-lists",function(t){for(var r=t.tokens,i=2;i<r.length;i++)gOe(r,i)&&(vOe(r[i],t.Token),G9(r[i-2],"class","task-list-item"+(O4?"":" enabled")),G9(r[mOe(r,i-2)],"class","contains-task-list"))})};function G9(n,e,t){var r=n.attrIndex(e),i=[e,t];r<0?n.attrPush(i):n.attrs[r]=i}function mOe(n,e){for(var t=n[e].level-1,r=e-1;r>=0;r--)if(n[r].level===t)return r;return-1}function gOe(n,e){return kOe(n[e])&&COe(n[e-1])&&SOe(n[e-2])&&xOe(n[e])}function vOe(n,e){if(n.children.unshift(bOe(n,e)),n.children[1].content=n.children[1].content.slice(3),n.content=n.content.slice(3),WG)if(qG){n.children.pop();var t="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);n.children[0].content=n.children[0].content.slice(0,-1)+' id="'+t+'">',n.children.push(wOe(n.content,t,e))}else n.children.unshift(yOe(e)),n.children.push(_Oe(e))}function bOe(n,e){var t=new e("html_inline","",0),r=O4?' disabled="" ':"";return n.content.indexOf("[ ] ")===0?t.content='<input class="task-list-item-checkbox"'+r+'type="checkbox">':(n.content.indexOf("[x] ")===0||n.content.indexOf("[X] ")===0)&&(t.content='<input class="task-list-item-checkbox" checked=""'+r+'type="checkbox">'),t}function yOe(n){var e=new n("html_inline","",0);return e.content="<label>",e}function _Oe(n){var e=new n("html_inline","",0);return e.content="</label>",e}function wOe(n,e,t){var r=new t("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+e+'">'+n+"</label>",r.attrs=[{for:e}],r}function kOe(n){return n.type==="inline"}function COe(n){return n.type==="paragraph_open"}function SOe(n){return n.type==="list_item_open"}function xOe(n){return n.content.indexOf("[ ] ")===0||n.content.indexOf("[x] ")===0||n.content.indexOf("[X] ")===0}const EOe=N2(pOe);var AOe=Object.defineProperty,MOe=(n,e,t)=>e in n?AOe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,g2=(n,e,t)=>(MOe(n,typeof e!="symbol"?e+"":e,t),t);const TOe=Cr.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:n=>n.getAttribute("data-tight")==="true"||!n.querySelector("p"),renderHTML:n=>({class:n.tight?this.options.tightClass:null,"data-tight":n.tight?"true":null})}}}]},addCommands(){var n=this;return{toggleTight:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t=>{let{editor:r,commands:i}=t;function o(s){if(!r.isActive(s))return!1;const a=r.getAttributes(s);return i.updateAttributes(s,{tight:e??!(a!=null&&a.tight)})}return n.options.listTypes.some(s=>o(s))}}}}}),K9=po();function UG(n,e){return K9.inline.State.prototype.scanDelims.call({src:n,posMax:n.length}),new K9.inline.State(n,null,null,[]).scanDelims(e,!0)}function GG(n,e,t,r){let i=n.substring(0,t)+n.substring(t+e.length);return i=i.substring(0,t+r)+e+i.substring(t+r),i}function OOe(n,e,t,r){let i=t,o=n;for(;i<r&&!UG(o,i).can_open;)o=GG(o,e,i,1),i++;return{text:o,from:i,to:r}}function DOe(n,e,t,r){let i=r,o=n;for(;i>t&&!UG(o,i).can_close;)o=GG(o,e,i,-1),i--;return{text:o,from:t,to:i}}function ROe(n,e,t,r){let i={text:n,from:t,to:r};return i=OOe(i.text,e,i.from,i.to),i=DOe(i.text,e,i.from,i.to),i.to-i.from<e.length+1&&(i.text=i.text.substring(0,i.from)+i.text.substring(i.to+e.length)),i.text}class POe extends VG{constructor(e,t,r){super(e,t,r??{}),g2(this,"inTable",!1),this.inlines=[]}render(e,t,r){super.render(e,t,r);const i=this.inlines[this.inlines.length-1];if(i!=null&&i.start&&i!==null&&i!==void 0&&i.end){const{delimiter:o,start:s,end:a}=this.normalizeInline(i);this.out=ROe(this.out,o,s,a),this.inlines.pop()}}markString(e,t,r,i){const o=this.marks[e.type.name];if(o.expelEnclosingWhitespace)if(t)this.inlines.push({start:this.out.length,delimiter:o.open});else{const s=this.inlines.pop();this.inlines.push({...s,end:this.out.length})}return super.markString(e,t,r,i)}normalizeInline(e){let{start:t,end:r}=e;for(;this.out.charAt(t).match(/\s/);)t++;return{...e,start:t}}}const KG=ii.create({name:"markdownHTMLMark",addStorage(){return{markdown:{serialize:{open(n,e){var t,r;return this.editor.storage.markdown.options.html?(t=(r=J9(e))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:"":(console.warn(`Tiptap Markdown: "${e.type.name}" mark is only available in html mode`),"")},close(n,e){var t,r;return this.editor.storage.markdown.options.html&&(t=(r=J9(e))===null||r===void 0?void 0:r[1])!==null&&t!==void 0?t:""}},parse:{}}}}});function J9(n){const e=n.type.schema,t=e.text(" ",[n]),i=Fg(Fe.from(t),e).match(/^(<.*?>) (<\/.*?>)$/);return i?[i[1],i[2]]:null}function fA(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function IOe(n){return n==null?void 0:n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function NOe(n){const e=n.parentElement,t=e.cloneNode();for(;e.firstChild&&e.firstChild!==n;)t.appendChild(e.firstChild);t.childNodes.length>0&&e.parentElement.insertBefore(t,e),e.parentElement.insertBefore(n,e),e.childNodes.length===0&&e.remove()}function BOe(n){const e=n.parentNode;for(;n.firstChild;)e.insertBefore(n.firstChild,n);e.removeChild(n)}const aw=On.create({name:"markdownHTMLNode",addStorage(){return{markdown:{serialize(n,e,t){this.editor.storage.markdown.options.html?n.write(LOe(e,t)):(console.warn(`Tiptap Markdown: "${e.type.name}" node is only available in html mode`),n.write(`[${e.type.name}]`)),e.isBlock&&n.closeBlock(e)},parse:{}}}}});function LOe(n,e){const t=n.type.schema,r=Fg(Fe.from(n),t);return n.isBlock&&(e instanceof Fe||e.type.name===t.topNodeType.name)?FOe(r):r}function FOe(n){const t=fA(n).firstElementChild;return t.innerHTML=t.innerHTML.trim()?`
${t.innerHTML}
`:`
`,t.outerHTML}const zOe=On.create({name:"blockquote"}),jOe=zOe.extend({addStorage(){return{markdown:{serialize:Za.nodes.blockquote,parse:{}}}}}),HOe=On.create({name:"bulletList"}),JG=HOe.extend({addStorage(){return{markdown:{serialize(n,e){return n.renderList(e,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}}}}),VOe=On.create({name:"codeBlock"}),WOe=VOe.extend({addStorage(){return{markdown:{serialize(n,e){n.write("```"+(e.attrs.language||"")+`
`),n.text(e.textContent,!1),n.ensureNewLine(),n.write("```"),n.closeBlock(e)},parse:{setup(n){var e;n.set({langPrefix:(e=this.options.languageClassPrefix)!==null&&e!==void 0?e:"language-"})},updateDOM(n){n.innerHTML=n.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}}}),qOe=On.create({name:"hardBreak"}),YG=qOe.extend({addStorage(){return{markdown:{serialize(n,e,t,r){for(let i=r+1;i<t.childCount;i++)if(t.child(i).type!=e.type){n.write(n.inTable?aw.storage.markdown.serialize.call(this,n,e,t):`\\
`);return}},parse:{}}}}}),UOe=On.create({name:"heading"}),GOe=UOe.extend({addStorage(){return{markdown:{serialize:Za.nodes.heading,parse:{}}}}}),KOe=On.create({name:"horizontalRule"}),JOe=KOe.extend({addStorage(){return{markdown:{serialize:Za.nodes.horizontal_rule,parse:{}}}}}),YOe=On.create({name:"image"}),XOe=YOe.extend({addStorage(){return{markdown:{serialize:Za.nodes.image,parse:{}}}}}),QOe=On.create({name:"listItem"}),ZOe=QOe.extend({addStorage(){return{markdown:{serialize:Za.nodes.list_item,parse:{}}}}}),$Oe=On.create({name:"orderedList"});function eDe(n,e,t){let r=0;for(;t-r>0&&e.child(t-r-1).type.name===n.type.name;r++);return r}const tDe=$Oe.extend({addStorage(){return{markdown:{serialize(n,e,t,r){const i=e.attrs.start||1,o=String(i+e.childCount-1).length,s=n.repeat(" ",o+2),l=eDe(e,t,r)%2?") ":". ";n.renderList(e,s,u=>{const c=String(i+u);return n.repeat(" ",o-c.length)+c+l})},parse:{}}}}}),nDe=On.create({name:"paragraph"}),rDe=nDe.extend({addStorage(){return{markdown:{serialize:Za.nodes.paragraph,parse:{}}}}});function v3(n){var e,t;return(e=n==null||(t=n.content)===null||t===void 0?void 0:t.content)!==null&&e!==void 0?e:[]}const iDe=On.create({name:"table"}),oDe=iDe.extend({addStorage(){return{markdown:{serialize(n,e,t){if(!sDe(e)){aw.storage.markdown.serialize.call(this,n,e,t);return}n.inTable=!0,e.forEach((r,i,o)=>{if(n.write("| "),r.forEach((s,a,l)=>{l&&n.write(" | ");const u=s.firstChild;u.textContent.trim()&&n.renderInline(u)}),n.write(" |"),n.ensureNewLine(),!o){const s=Array.from({length:r.childCount}).map(()=>"---").join(" | ");n.write(`| ${s} |`),n.ensureNewLine()}}),n.closeBlock(e),n.inTable=!1},parse:{}}}}});function Y9(n){return n.attrs.colspan>1||n.attrs.rowspan>1}function sDe(n){const e=v3(n),t=e[0],r=e.slice(1);return!(v3(t).some(i=>i.type.name!=="tableHeader"||Y9(i)||i.childCount>1)||r.some(i=>v3(i).some(o=>o.type.name==="tableHeader"||Y9(o)||o.childCount>1)))}const aDe=On.create({name:"taskItem"}),lDe=aDe.extend({addStorage(){return{markdown:{serialize(n,e){const t=e.attrs.checked?"[x]":"[ ]";n.write(`${t} `),n.renderContent(e)},parse:{updateDOM(n){[...n.querySelectorAll(".task-list-item")].forEach(e=>{const t=e.querySelector("input");e.setAttribute("data-type","taskItem"),t&&(e.setAttribute("data-checked",t.checked),t.remove())})}}}}}}),uDe=On.create({name:"taskList"}),cDe=uDe.extend({addStorage(){return{markdown:{serialize:JG.storage.markdown.serialize,parse:{setup(n){n.use(EOe)},updateDOM(n){[...n.querySelectorAll(".contains-task-list")].forEach(e=>{e.setAttribute("data-type","taskList")})}}}}}}),fDe=On.create({name:"text"}),dDe=fDe.extend({addStorage(){return{markdown:{serialize(n,e){n.text(IOe(e.text))},parse:{}}}}}),hDe=ii.create({name:"bold"}),pDe=hDe.extend({addStorage(){return{markdown:{serialize:Za.marks.strong,parse:{}}}}}),mDe=ii.create({name:"code"}),gDe=mDe.extend({addStorage(){return{markdown:{serialize:Za.marks.code,parse:{}}}}}),vDe=ii.create({name:"italic"}),bDe=vDe.extend({addStorage(){return{markdown:{serialize:Za.marks.em,parse:{}}}}}),yDe=ii.create({name:"link"}),_De=yDe.extend({addStorage(){return{markdown:{serialize:Za.marks.link,parse:{}}}}}),wDe=ii.create({name:"strike"}),kDe=wDe.extend({addStorage(){return{markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}}}}),CDe=[jOe,JG,WOe,YG,GOe,JOe,aw,XOe,ZOe,tDe,rDe,oDe,lDe,cDe,dDe,pDe,gDe,KG,bDe,_De,kDe];function v2(n){var e,t;const r=(e=n.storage)===null||e===void 0?void 0:e.markdown,i=(t=CDe.find(o=>o.name===n.name))===null||t===void 0?void 0:t.storage.markdown;return r||i?{...i,...r}:null}class SDe{constructor(e){g2(this,"editor",null),this.editor=e}serialize(e){const t=new POe(this.nodes,this.marks,{hardBreakNodeName:YG.name});return t.renderContent(e),t.out}get nodes(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(t=>[t,this.serializeNode(aw)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(t=>t.type==="node"&&this.serializeNode(t)).map(t=>[t.name,this.serializeNode(t)]))!==null&&e!==void 0?e:[])}}get marks(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(t=>[t,this.serializeMark(KG)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(t=>t.type==="mark"&&this.serializeMark(t)).map(t=>[t.name,this.serializeMark(t)]))!==null&&e!==void 0?e:[])}}serializeNode(e){var t;return(t=v2(e))===null||t===void 0||(t=t.serialize)===null||t===void 0?void 0:t.bind({editor:this.editor,options:e.options})}serializeMark(e){var t;const r=(t=v2(e))===null||t===void 0?void 0:t.serialize;return r?{...r,open:typeof r.open=="function"?r.open.bind({editor:this.editor,options:e.options}):r.open,close:typeof r.close=="function"?r.close.bind({editor:this.editor,options:e.options}):r.close}:null}}class xDe{constructor(e,t){g2(this,"editor",null),g2(this,"md",null);let{html:r,linkify:i,breaks:o}=t;this.editor=e,this.md=this.withPatchedRenderer(po({html:r,linkify:i,breaks:o}))}parse(e){let{inline:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){this.editor.extensionManager.extensions.forEach(o=>{var s;return(s=v2(o))===null||s===void 0||(s=s.parse)===null||s===void 0||(s=s.setup)===null||s===void 0?void 0:s.call({editor:this.editor,options:o.options},this.md)});const r=this.md.render(e),i=fA(r);return this.editor.extensionManager.extensions.forEach(o=>{var s;return(s=v2(o))===null||s===void 0||(s=s.parse)===null||s===void 0||(s=s.updateDOM)===null||s===void 0?void 0:s.call({editor:this.editor,options:o.options},i)}),this.normalizeDOM(i,{inline:t,content:e}),i.innerHTML}return e}normalizeDOM(e,t){let{inline:r,content:i}=t;return this.normalizeBlocks(e),e.querySelectorAll("*").forEach(o=>{var s;((s=o.nextSibling)===null||s===void 0?void 0:s.nodeType)===Node.TEXT_NODE&&!o.closest("pre")&&(o.nextSibling.textContent=o.nextSibling.textContent.replace(/^\n/,""))}),r&&this.normalizeInline(e,i),e}normalizeBlocks(e){const r=Object.values(this.editor.schema.nodes).filter(i=>i.isBlock).map(i=>{var o;return(o=i.spec.parseDOM)===null||o===void 0?void 0:o.map(s=>s.tag)}).flat().filter(Boolean).join(",");r&&[...e.querySelectorAll(r)].forEach(i=>{i.parentElement.matches("p")&&NOe(i)})}normalizeInline(e,t){var r;if((r=e.firstElementChild)!==null&&r!==void 0&&r.matches("p")){var i,o,s,a;const l=e.firstElementChild,{nextElementSibling:u}=l,c=(i=(o=t.match(/^\s+/))===null||o===void 0?void 0:o[0])!==null&&i!==void 0?i:"",f=u?"":(s=(a=t.match(/\s+$/))===null||a===void 0?void 0:a[0])!==null&&s!==void 0?s:"";if(t.match(/^\n\n/)){l.innerHTML=`${l.innerHTML}${f}`;return}BOe(l),e.innerHTML=`${c}${e.innerHTML}${f}`}}withPatchedRenderer(e){const t=r=>function(){const i=r(...arguments);return i===`
`?i:i[i.length-1]===`
`?i.slice(0,-1):i};return e.renderer.rules.hardbreak=t(e.renderer.rules.hardbreak),e.renderer.rules.softbreak=t(e.renderer.rules.softbreak),e.renderer.rules.fence=t(e.renderer.rules.fence),e.renderer.rules.code_block=t(e.renderer.rules.code_block),e.renderer.renderToken=t(e.renderer.renderToken.bind(e.renderer)),e}}const EDe=Cr.create({name:"markdownClipboard",addOptions(){return{transformPastedText:!1,transformCopiedText:!1}},addProseMirrorPlugins(){return[new Sr({key:new si("markdownClipboard"),props:{clipboardTextParser:(n,e,t)=>{if(t||!this.options.transformPastedText)return null;const r=this.editor.storage.markdown.parser.parse(n,{inline:!0});return Al.fromSchema(this.editor.schema).parseSlice(fA(r),{preserveWhitespace:!0,context:e})},clipboardTextSerializer:n=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(n.content):null}})]}}),ADe=Cr.create({name:"markdown",priority:50,addOptions(){return{html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}},addCommands(){const n=zSe.Commands.config.addCommands();return{setContent:(e,t,r)=>i=>n.setContent(i.editor.storage.markdown.parser.parse(e),t,r)(i),insertContentAt:(e,t,r)=>i=>n.insertContentAt(e,i.editor.storage.markdown.parser.parse(t,{inline:!0}),r)(i)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new xDe(this.editor,this.options),serializer:new SDe(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage(){return{}},addExtensions(){return[TOe.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),EDe.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}});function X9(n){function e(t){return t(n),()=>{}}return{subscribe:e}}const Tv=n=>new Proxy(n,{get(e,t,r){return Reflect.get(e,t,r)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}}),Q9=n=>typeof n=="function";function Du(n,e){const{stores:t,action:r,returned:i}=e??{},o=(()=>{if(t&&i)return hg(t,a=>{const l=i(a);if(Q9(l)){const u=(...c)=>Tv({...l(...c),[`data-melt-${n}`]:"",action:r??Vo});return u.action=r??Vo,u}return Tv({...l,[`data-melt-${n}`]:"",action:r??Vo})});{const a=i,l=a==null?void 0:a();if(Q9(l)){const u=(...c)=>Tv({...l(...c),[`data-melt-${n}`]:"",action:r??Vo});return u.action=r??Vo,X9(u)}return X9(Tv({...l,[`data-melt-${n}`]:"",action:r??Vo}))}})(),s=r??(()=>{});return s.subscribe=o.subscribe,s}function XG(n){const e=o=>o?`${n}-${o}`:n,t=o=>`data-melt-${n}${o?`-${o}`:""}`,r=o=>`[data-melt-${n}${o?`-${o}`:""}]`;return{name:e,attribute:t,selector:r,getEl:o=>document.querySelector(r(o))}}const Z9=typeof document<"u",QG=n=>typeof n=="function";function sc(n){return n instanceof HTMLElement}function $9(n){return n.pointerType==="touch"}function og(...n){return(...e)=>{for(const t of n)typeof t=="function"&&t(...e)}}function Vo(){}function ZG(n,e,t,r){const i=Array.isArray(e)?e:[e];return i.forEach(o=>n.addEventListener(o,t,r)),()=>{i.forEach(o=>n.removeEventListener(o,t,r))}}function Ru(n,e,t,r){const i=Array.isArray(e)?e:[e];if(typeof t=="function"){const o=TDe(s=>t(s));return i.forEach(s=>n.addEventListener(s,o,r)),()=>{i.forEach(s=>n.removeEventListener(s,o,r))}}return()=>void 0}function MDe(n){const e=n.currentTarget;if(!sc(e))return null;const t=new CustomEvent(`m-${n.type}`,{detail:{originalEvent:n},cancelable:!0});return e.dispatchEvent(t),t}function TDe(n){return e=>{const t=MDe(e);if(!(t!=null&&t.defaultPrevented))return n(e)}}function ODe(n,...e){const t={};for(const r of Object.keys(n))e.includes(r)||(t[r]=n[r]);return t}const DDe=(n,e)=>{const t=(i,o)=>{n.update(s=>{const a=i(s);let l=a;return e&&(l=e({curr:s,next:a})),o==null||o(l),l})};return{...n,update:t,set:i=>{t(()=>i)}}};function eI(n){return Object.keys(n).reduce((e,t)=>n[t]===void 0?e:e+`${t}:${n[t]};`,"")}let RDe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",PDe=(n=21)=>{let e="",t=n;for(;t--;)e+=RDe[Math.random()*64|0];return e};function U0(){return PDe(10)}const Zc={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control"},$G=()=>typeof window<"u";function IDe(){const n=navigator.userAgentData;return(n==null?void 0:n.platform)??navigator.platform}const eK=n=>$G()&&n.test(IDe()),NDe=()=>$G()&&!!navigator.maxTouchPoints,BDe=()=>eK(/^Mac/)&&!NDe(),LDe=()=>eK(/mac|iphone|ipad|ipod/i),FDe=()=>LDe()&&!BDe(),b3="data-melt-scroll-lock";function tI(n,e){if(!n)return;const t=n.style.cssText;return Object.assign(n.style,e),()=>{n.style.cssText=t}}function zDe(n,e,t){if(!n)return;const r=n.style.getPropertyValue(e);return n.style.setProperty(e,t),()=>{r?n.style.setProperty(e,r):n.style.removeProperty(e)}}function jDe(n){const e=n.getBoundingClientRect().left;return Math.round(e)+n.scrollLeft?"paddingLeft":"paddingRight"}function HDe(n){const e=n??document,t=e.defaultView??window,{documentElement:r,body:i}=e;if(i.hasAttribute(b3))return Vo;i.setAttribute(b3,"");const s=t.innerWidth-r.clientWidth,a=()=>zDe(r,"--scrollbar-width",`${s}px`),l=jDe(r),u=t.getComputedStyle(i)[l],c=()=>tI(i,{overflow:"hidden",[l]:`calc(${u} + ${s}px)`}),f=()=>{const{scrollX:h,scrollY:p,visualViewport:m}=t,g=(m==null?void 0:m.offsetLeft)??0,v=(m==null?void 0:m.offsetTop)??0,b=tI(i,{position:"fixed",overflow:"hidden",top:`${-(p-Math.floor(v))}px`,left:`${-(h-Math.floor(g))}px`,right:"0",[l]:`calc(${u} + ${s}px)`});return()=>{b==null||b(),t.scrollTo(h,p)}},d=[a(),FDe()?f():c()];return()=>{d.forEach(h=>h==null?void 0:h()),i.removeAttribute(b3)}}function VDe(n){const{open:e,forceVisible:t,activeTrigger:r}=n;return hg([e,t,r],([i,o,s])=>(i||o)&&s!==null)}function WDe(n,e){let t=[];const r=a=>{t.push(a)},i=()=>{t.forEach(a=>a()),t=[]},o=hg(n,a=>(i(),e(a,r)));return Kr(i),{...o,subscribe:(...a)=>{const l=o.subscribe(...a);return()=>{l(),i()}}}}function nI(n,e){const t=WDe(n,(r,i)=>({stores:r,onUnsubscribe:i})).subscribe(({stores:r,onUnsubscribe:i})=>{const o=e(r);o&&i(o)});return Kr(t),t}function tK(n){const e={};return Object.keys(n).forEach(t=>{const r=t,i=n[r];e[r]=Bn(i)}),e}function qDe(n){let e=n.parentElement;for(;sc(e)&&!e.hasAttribute("data-portal");)e=e.parentElement;return e||"body"}function UDe(n,e){const t=qDe(n);return e!==void 0?e:t==="body"?document.body:null}const GDe=J4(void 0,n=>{function e(r){n(r),n(void 0)}return ZG(document,"pointerdown",e,{passive:!1,capture:!0})}),KDe=(n,e={})=>{let t={enabled:!0,...e};function r(){return typeof t.enabled=="boolean"?t.enabled:Wo(t.enabled)}const i=GDe.subscribe(o=>{var a;if(!r()||!o||o.target===n)return;const s=o.composedPath();if(!s.includes(n)){if(t.ignore){if(QG(t.ignore)){if(t.ignore(o))return}else if(Array.isArray(t.ignore)&&t.ignore.length>0&&t.ignore.some(l=>l&&(o.target===l||s.includes(l))))return}(a=t.handler)==null||a.call(t,o)}});return{update(o){t={...t,...o}},destroy(){i()}}},JDe=J4(void 0,n=>{function e(r){r&&r.key===Zc.ESCAPE&&n(r),n(void 0)}return ZG(document,"keydown",e,{passive:!1,capture:!0})}),YDe=(n,e={})=>{n.dataset.escapee="";let t={enabled:!0,...e};function r(){return typeof t.enabled=="boolean"?t.enabled:Wo(t.enabled)}const i=JDe.subscribe(o=>{var a;if(!o||!r())return;const s=o.target;if(!(!sc(s)||s.closest("[data-escapee]")!==n)){if(t.ignore){if(QG(t.ignore)){if(t.ignore(o))return}else if(Array.isArray(t.ignore)&&t.ignore.length>0&&t.ignore.some(l=>l&&s===l))return}(a=t.handler)==null||a.call(t,o)}});return{update(o){t={...t,...o}},destroy(){n.removeAttribute("data-escapee"),i()}}},ac=Math.min,wo=Math.max,b2=Math.round,Ov=Math.floor,Da=n=>({x:n,y:n}),XDe={left:"right",right:"left",bottom:"top",top:"bottom"},QDe={start:"end",end:"start"};function D4(n,e,t){return wo(n,ac(e,t))}function wp(n,e){return typeof n=="function"?n(e):n}function lc(n){return n.split("-")[0]}function kp(n){return n.split("-")[1]}function nK(n){return n==="x"?"y":"x"}function dA(n){return n==="y"?"height":"width"}function kl(n){return["top","bottom"].includes(lc(n))?"y":"x"}function hA(n){return nK(kl(n))}function ZDe(n,e,t){t===void 0&&(t=!1);const r=kp(n),i=hA(n),o=dA(i);let s=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=y2(s)),[s,y2(s)]}function $De(n){const e=y2(n);return[R4(n),e,R4(e)]}function R4(n){return n.replace(/start|end/g,e=>QDe[e])}function eRe(n,e,t){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function tRe(n,e,t,r){const i=kp(n);let o=eRe(lc(n),t==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(R4)))),o}function y2(n){return n.replace(/left|right|bottom|top/g,e=>XDe[e])}function nRe(n){return{top:0,right:0,bottom:0,left:0,...n}}function rK(n){return typeof n!="number"?nRe(n):{top:n,right:n,bottom:n,left:n}}function _2(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function rI(n,e,t){let{reference:r,floating:i}=n;const o=kl(e),s=hA(e),a=dA(s),l=lc(e),u=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(kp(e)){case"start":h[s]-=d*(t&&u?-1:1);break;case"end":h[s]+=d*(t&&u?-1:1);break}return h}const rRe=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=t,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:f}=rI(u,r,l),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:b,y:w,data:_,reset:y}=await v({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:n,floating:e}});c=b??c,f=w??f,h={...h,[g]:{...h[g],..._}},y&&p<=50&&(p++,typeof y=="object"&&(y.placement&&(d=y.placement),y.rects&&(u=y.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:i}):y.rects),{x:c,y:f}=rI(u,d,l)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function pA(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=wp(e,n),p=rK(h),g=a[d?f==="floating"?"reference":"floating":f],v=_2(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(g)))==null||t?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),b=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},y=_2(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:l}):b);return{top:(v.top-y.top+p.top)/_.y,bottom:(y.bottom-v.bottom+p.bottom)/_.y,left:(v.left-y.left+p.left)/_.x,right:(y.right-v.right+p.right)/_.x}}const iRe=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=wp(n,e)||{};if(u==null)return{};const f=rK(c),d={x:t,y:r},h=hA(i),p=dA(h),m=await s.getDimensions(u),g=h==="y",v=g?"top":"left",b=g?"bottom":"right",w=g?"clientHeight":"clientWidth",_=o.reference[p]+o.reference[h]-d[h]-o.floating[p],y=d[h]-o.reference[h],k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let S=k?k[w]:0;(!S||!await(s.isElement==null?void 0:s.isElement(k)))&&(S=a.floating[w]||o.floating[p]);const E=_/2-y/2,M=S/2-m[p]/2-1,R=ac(f[v],M),O=ac(f[b],M),I=R,P=S-m[p]-O,A=S/2-m[p]/2+E,N=D4(I,A,P),F=!l.arrow&&kp(i)!=null&&A!==N&&o.reference[p]/2-(A<I?R:O)-m[p]/2<0,V=F?A<I?A-I:A-P:0;return{[h]:d[h]+V,data:{[h]:N,centerOffset:A-N-V,...F&&{alignmentOffset:V}},reset:F}}}),oRe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=wp(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const v=lc(i),b=kl(a),w=lc(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),y=d||(w||!m?[y2(a)]:$De(a)),k=p!=="none";!d&&k&&y.push(...tRe(a,m,p,_));const S=[a,...y],E=await pA(e,g),M=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&M.push(E[v]),f){const A=ZDe(i,s,_);M.push(E[A[0]],E[A[1]])}if(R=[...R,{placement:i,overflows:M}],!M.every(A=>A<=0)){var O,I;const A=(((O=o.flip)==null?void 0:O.index)||0)+1,N=S[A];if(N&&(!(f==="alignment"?b!==kl(N):!1)||R.every(W=>W.overflows[0]>0&&kl(W.placement)===b)))return{data:{index:A,overflows:R},reset:{placement:N}};let F=(I=R.filter(V=>V.overflows[0]<=0).sort((V,W)=>V.overflows[1]-W.overflows[1])[0])==null?void 0:I.placement;if(!F)switch(h){case"bestFit":{var P;const V=(P=R.filter(W=>{if(k){const L=kl(W.placement);return L===b||L==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(L=>L>0).reduce((L,z)=>L+z,0)]).sort((W,L)=>W[1]-L[1])[0])==null?void 0:P[0];V&&(F=V);break}case"initialPlacement":F=a;break}if(i!==F)return{reset:{placement:F}}}return{}}}};async function sRe(n,e){const{placement:t,platform:r,elements:i}=n,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=lc(t),a=kp(t),l=kl(t)==="y",u=["left","top"].includes(s)?-1:1,c=o&&l?-1:1,f=wp(e,n);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:d*u}:{x:d*u,y:h*c}}const aRe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await sRe(e,n);return s===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},lRe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:v,y:b}=g;return{x:v,y:b}}},...l}=wp(n,e),u={x:t,y:r},c=await pA(e,l),f=kl(lc(i)),d=nK(f);let h=u[d],p=u[f];if(o){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=h+c[g],w=h-c[v];h=D4(b,h,w)}if(s){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=p+c[g],w=p-c[v];p=D4(b,p,w)}const m=a.fn({...e,[d]:h,[f]:p});return{...m,data:{x:m.x-t,y:m.y-r,enabled:{[d]:o,[f]:s}}}}}},uRe=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:o,platform:s,elements:a}=e,{apply:l=()=>{},...u}=wp(n,e),c=await pA(e,u),f=lc(i),d=kp(i),h=kl(i)==="y",{width:p,height:m}=o.floating;let g,v;f==="top"||f==="bottom"?(g=f,v=d===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(v=f,g=d==="end"?"top":"bottom");const b=m-c.top-c.bottom,w=p-c.left-c.right,_=ac(m-c[g],b),y=ac(p-c[v],w),k=!e.middlewareData.shift;let S=_,E=y;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(E=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=b),k&&!d){const R=wo(c.left,0),O=wo(c.right,0),I=wo(c.top,0),P=wo(c.bottom,0);h?E=p-2*(R!==0||O!==0?R+O:wo(c.left,c.right)):S=m-2*(I!==0||P!==0?I+P:wo(c.top,c.bottom))}await l({...e,availableWidth:E,availableHeight:S});const M=await s.getDimensions(a.floating);return p!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}};function lw(){return typeof window<"u"}function Cp(n){return iK(n)?(n.nodeName||"").toLowerCase():"#document"}function Ao(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function $a(n){var e;return(e=(iK(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function iK(n){return lw()?n instanceof Node||n instanceof Ao(n).Node:!1}function Ys(n){return lw()?n instanceof Element||n instanceof Ao(n).Element:!1}function qa(n){return lw()?n instanceof HTMLElement||n instanceof Ao(n).HTMLElement:!1}function iI(n){return!lw()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ao(n).ShadowRoot}function $g(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Xs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function cRe(n){return["table","td","th"].includes(Cp(n))}function uw(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function mA(n){const e=gA(),t=Ys(n)?Xs(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function fRe(n){let e=uc(n);for(;qa(e)&&!Zh(e);){if(mA(e))return e;if(uw(e))return null;e=uc(e)}return null}function gA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Zh(n){return["html","body","#document"].includes(Cp(n))}function Xs(n){return Ao(n).getComputedStyle(n)}function cw(n){return Ys(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function uc(n){if(Cp(n)==="html")return n;const e=n.assignedSlot||n.parentNode||iI(n)&&n.host||$a(n);return iI(e)?e.host:e}function oK(n){const e=uc(n);return Zh(e)?n.ownerDocument?n.ownerDocument.body:n.body:qa(e)&&$g(e)?e:oK(e)}function sg(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=oK(n),o=i===((r=n.ownerDocument)==null?void 0:r.body),s=Ao(i);if(o){const a=P4(s);return e.concat(s,s.visualViewport||[],$g(i)?i:[],a&&t?sg(a):[])}return e.concat(i,sg(i,[],t))}function P4(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function sK(n){const e=Xs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=qa(n),o=i?n.offsetWidth:t,s=i?n.offsetHeight:r,a=b2(t)!==o||b2(r)!==s;return a&&(t=o,r=s),{width:t,height:r,$:a}}function vA(n){return Ys(n)?n:n.contextElement}function ph(n){const e=vA(n);if(!qa(e))return Da(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:o}=sK(e);let s=(o?b2(t.width):t.width)/r,a=(o?b2(t.height):t.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const dRe=Da(0);function aK(n){const e=Ao(n);return!gA()||!e.visualViewport?dRe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function hRe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ao(n)?!1:e}function Pf(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),o=vA(n);let s=Da(1);e&&(r?Ys(r)&&(s=ph(r)):s=ph(n));const a=hRe(o,t,r)?aK(o):Da(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(o){const d=Ao(o),h=r&&Ys(r)?Ao(r):r;let p=d,m=P4(p);for(;m&&r&&h!==p;){const g=ph(m),v=m.getBoundingClientRect(),b=Xs(m),w=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,_=v.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,f*=g.y,l+=w,u+=_,p=Ao(m),m=P4(p)}}return _2({width:c,height:f,x:l,y:u})}function bA(n,e){const t=cw(n).scrollLeft;return e?e.left+t:Pf($a(n)).left+t}function lK(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:bA(n,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function pRe(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const o=i==="fixed",s=$a(r),a=e?uw(e.floating):!1;if(r===s||a&&o)return t;let l={scrollLeft:0,scrollTop:0},u=Da(1);const c=Da(0),f=qa(r);if((f||!f&&!o)&&((Cp(r)!=="body"||$g(s))&&(l=cw(r)),qa(r))){const h=Pf(r);u=ph(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const d=s&&!f&&!o?lK(s,l,!0):Da(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x+d.x,y:t.y*u.y-l.scrollTop*u.y+c.y+d.y}}function mRe(n){return Array.from(n.getClientRects())}function gRe(n){const e=$a(n),t=cw(n),r=n.ownerDocument.body,i=wo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=wo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-t.scrollLeft+bA(n);const a=-t.scrollTop;return Xs(r).direction==="rtl"&&(s+=wo(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function vRe(n,e){const t=Ao(n),r=$a(n),i=t.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=gA();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function bRe(n,e){const t=Pf(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,o=qa(n)?ph(n):Da(1),s=n.clientWidth*o.x,a=n.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function oI(n,e,t){let r;if(e==="viewport")r=vRe(n,t);else if(e==="document")r=gRe($a(n));else if(Ys(e))r=bRe(e,t);else{const i=aK(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return _2(r)}function uK(n,e){const t=uc(n);return t===e||!Ys(t)||Zh(t)?!1:Xs(t).position==="fixed"||uK(t,e)}function yRe(n,e){const t=e.get(n);if(t)return t;let r=sg(n,[],!1).filter(a=>Ys(a)&&Cp(a)!=="body"),i=null;const o=Xs(n).position==="fixed";let s=o?uc(n):n;for(;Ys(s)&&!Zh(s);){const a=Xs(s),l=mA(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||$g(s)&&!l&&uK(n,s))?r=r.filter(c=>c!==s):i=a,s=uc(s)}return e.set(n,r),r}function _Re(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const s=[...t==="clippingAncestors"?uw(e)?[]:yRe(e,this._c):[].concat(t),r],a=s[0],l=s.reduce((u,c)=>{const f=oI(e,c,i);return u.top=wo(f.top,u.top),u.right=ac(f.right,u.right),u.bottom=ac(f.bottom,u.bottom),u.left=wo(f.left,u.left),u},oI(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function wRe(n){const{width:e,height:t}=sK(n);return{width:e,height:t}}function kRe(n,e,t){const r=qa(e),i=$a(e),o=t==="fixed",s=Pf(n,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=Da(0);function u(){l.x=bA(i)}if(r||!r&&!o)if((Cp(e)!=="body"||$g(i))&&(a=cw(e)),r){const h=Pf(e,!0,o,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&u();o&&!r&&i&&u();const c=i&&!r&&!o?lK(i,a):Da(0),f=s.left+a.scrollLeft-l.x-c.x,d=s.top+a.scrollTop-l.y-c.y;return{x:f,y:d,width:s.width,height:s.height}}function y3(n){return Xs(n).position==="static"}function sI(n,e){if(!qa(n)||Xs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return $a(n)===t&&(t=t.ownerDocument.body),t}function cK(n,e){const t=Ao(n);if(uw(n))return t;if(!qa(n)){let i=uc(n);for(;i&&!Zh(i);){if(Ys(i)&&!y3(i))return i;i=uc(i)}return t}let r=sI(n,e);for(;r&&cRe(r)&&y3(r);)r=sI(r,e);return r&&Zh(r)&&y3(r)&&!mA(r)?t:r||fRe(n)||t}const CRe=async function(n){const e=this.getOffsetParent||cK,t=this.getDimensions,r=await t(n.floating);return{reference:kRe(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function SRe(n){return Xs(n).direction==="rtl"}const xRe={convertOffsetParentRelativeRectToViewportRelativeRect:pRe,getDocumentElement:$a,getClippingRect:_Re,getOffsetParent:cK,getElementRects:CRe,getClientRects:mRe,getDimensions:wRe,getScale:ph,isElement:Ys,isRTL:SRe};function fK(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function ERe(n,e){let t=null,r;const i=$a(n);function o(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=n.getBoundingClientRect(),{left:c,top:f,width:d,height:h}=u;if(a||e(),!d||!h)return;const p=Ov(f),m=Ov(i.clientWidth-(c+d)),g=Ov(i.clientHeight-(f+h)),v=Ov(c),w={rootMargin:-p+"px "+-m+"px "+-g+"px "+-v+"px",threshold:wo(0,ac(1,l))||1};let _=!0;function y(k){const S=k[0].intersectionRatio;if(S!==l){if(!_)return s();S?s(!1,S):r=setTimeout(()=>{s(!1,1e-7)},1e3)}S===1&&!fK(u,n.getBoundingClientRect())&&s(),_=!1}try{t=new IntersectionObserver(y,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(y,w)}t.observe(n)}return s(!0),o}function ARe(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=vA(n),c=i||o?[...u?sg(u):[],...sg(e)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",t,{passive:!0}),o&&v.addEventListener("resize",t)});const f=u&&a?ERe(u,t):null;let d=-1,h=null;s&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),t()}),u&&!l&&h.observe(u),h.observe(e));let p,m=l?Pf(n):null;l&&g();function g(){const v=Pf(n);m&&!fK(m,v)&&t(),m=v,p=requestAnimationFrame(g)}return t(),()=>{var v;c.forEach(b=>{i&&b.removeEventListener("scroll",t),o&&b.removeEventListener("resize",t)}),f==null||f(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const MRe=aRe,TRe=lRe,ORe=oRe,DRe=uRe,RRe=iRe,PRe=(n,e,t)=>{const r=new Map,i={platform:xRe,...t},o={...i.platform,_c:r};return rRe(n,e,{...i,platform:o})},IRe={strategy:"absolute",placement:"top",gutter:5,flip:!0,sameWidth:!1,overflowPadding:8},NRe={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function BRe(n,e,t={}){if(!e||!n)return{destroy:Vo};const r={...IRe,...t},i=e.querySelector("[data-arrow=true]"),o=[];r.flip&&o.push(ORe({boundary:r.boundary,padding:r.overflowPadding}));const s=sc(i)?i.offsetHeight/2:0;if(r.gutter||r.offset){const l=r.gutter?{mainAxis:r.gutter}:r.offset;(l==null?void 0:l.mainAxis)!=null&&(l.mainAxis+=s),o.push(MRe(l))}o.push(TRe({boundary:r.boundary,crossAxis:r.overlap,padding:r.overflowPadding})),i&&o.push(RRe({element:i,padding:8})),o.push(DRe({padding:r.overflowPadding,apply({rects:l,availableHeight:u,availableWidth:c}){r.sameWidth&&Object.assign(e.style,{width:`${Math.round(l.reference.width)}px`,minWidth:"unset"}),r.fitViewport&&Object.assign(e.style,{maxWidth:`${c}px`,maxHeight:`${u}px`})}}));function a(){if(!n||!e)return;const{placement:l,strategy:u}=r;PRe(n,e,{placement:l,middleware:o,strategy:u}).then(c=>{const f=Math.round(c.x),d=Math.round(c.y);if(Object.assign(e.style,{position:r.strategy,top:`${d}px`,left:`${f}px`}),sc(i)&&c.middlewareData.arrow){const{x:h,y:p}=c.middlewareData.arrow,m=c.placement.split("-")[0];Object.assign(i.style,{position:"absolute",left:h!=null?`${h}px`:"",top:p!=null?`${p}px`:"",[m]:`calc(100% - ${s}px)`,transform:NRe[m],backgroundColor:"inherit",zIndex:"inherit"})}return c})}return Object.assign(e.style,{position:r.strategy}),{destroy:ARe(n,e,a)}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var dK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],w2=dK.join(","),hK=typeof Element>"u",If=hK?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,k2=!hK&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},C2=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),o=i===""||i==="true",s=o||t&&e&&n(e.parentNode);return s},LRe=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},pK=function(e,t,r){if(C2(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(w2));return t&&If.call(e,w2)&&i.unshift(e),i=i.filter(r),i},mK=function n(e,t,r){for(var i=[],o=Array.from(e);o.length;){var s=o.shift();if(!C2(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),l=a.length?a:s.children,u=n(l,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:s,candidates:u})}else{var c=If.call(s,w2);c&&r.filter(s)&&(t||!e.includes(s))&&i.push(s);var f=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),d=!C2(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(f&&d){var h=n(f===!0?s.children:f.children,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:s,candidates:h})}else o.unshift.apply(o,s.children)}}return i},gK=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},qc=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||LRe(e))&&!gK(e)?0:e.tabIndex},FRe=function(e,t){var r=qc(e);return r<0&&t&&!gK(e)?0:r},zRe=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},vK=function(e){return e.tagName==="INPUT"},jRe=function(e){return vK(e)&&e.type==="hidden"},HRe=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},VRe=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},WRe=function(e){if(!e.name)return!0;var t=e.form||k2(e),r=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=VRe(i,e.form);return!o||o===e},qRe=function(e){return vK(e)&&e.type==="radio"},URe=function(e){return qRe(e)&&!WRe(e)},GRe=function(e){var t,r=e&&k2(e),i=(t=r)===null||t===void 0?void 0:t.host,o=!1;if(r&&r!==e){var s,a,l;for(o=!!((s=i)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!o&&i;){var u,c,f;r=k2(i),i=(u=r)===null||u===void 0?void 0:u.host,o=!!((c=i)!==null&&c!==void 0&&(f=c.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return o},aI=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},KRe=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=If.call(e,"details>summary:first-of-type"),s=o?e.parentElement:e;if(If.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,u=k2(e);if(l&&!l.shadowRoot&&i(l)===!0)return aI(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(GRe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return aI(e);return!1},JRe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return If.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},S2=function(e,t){return!(t.disabled||C2(t)||jRe(t)||KRe(t,e)||HRe(t)||JRe(t))},I4=function(e,t){return!(URe(t)||qc(t)<0||!S2(e,t))},YRe=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},XRe=function n(e){var t=[],r=[];return e.forEach(function(i,o){var s=!!i.scopeParent,a=s?i.scopeParent:i,l=FRe(a,s),u=s?n(i.candidates):a;l===0?s?t.push.apply(t,u):t.push(a):r.push({documentOrder:o,tabIndex:l,item:i,isScope:s,content:u})}),r.sort(zRe).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(t)},QRe=function(e,t){t=t||{};var r;return t.getShadowRoot?r=mK([e],t.includeContainer,{filter:I4.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:YRe}):r=pK(e,t.includeContainer,I4.bind(null,t)),XRe(r)},ZRe=function(e,t){t=t||{};var r;return t.getShadowRoot?r=mK([e],t.includeContainer,{filter:S2.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=pK(e,t.includeContainer,S2.bind(null,t)),r},vd=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return If.call(e,w2)===!1?!1:I4(t,e)},$Re=dK.concat("iframe").join(","),_3=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return If.call(e,$Re)===!1?!1:S2(t,e)};/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function N4(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ePe(n){if(Array.isArray(n))return N4(n)}function tPe(n,e,t){return(e=sPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nPe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function rPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function uI(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lI(Object(t),!0).forEach(function(r){tPe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iPe(n){return ePe(n)||nPe(n)||aPe(n)||rPe()}function oPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sPe(n){var e=oPe(n,"string");return typeof e=="symbol"?e:e+""}function aPe(n,e){if(n){if(typeof n=="string")return N4(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N4(n,e):void 0}}var cI={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r._setPausedState(!0)}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},lPe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},uPe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},G0=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},cPe=function(e){return G0(e)&&!e.shiftKey},fPe=function(e){return G0(e)&&e.shiftKey},fI=function(e){return setTimeout(e,0)},Yp=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Dv=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},dPe=[],hPe=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||dPe,o=uI({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:cPe,isKeyBackward:fPe},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(P,A,N){return P&&P[A]!==void 0?P[A]:o[N||A]},u=function(P,A){var N=typeof(A==null?void 0:A.composedPath)=="function"?A.composedPath():void 0;return s.containerGroups.findIndex(function(F){var V=F.container,W=F.tabbableNodes;return V.contains(P)||(N==null?void 0:N.includes(V))||W.find(function(L){return L===P})})},c=function(P){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=A.hasFallback,F=N===void 0?!1:N,V=A.params,W=V===void 0?[]:V,L=o[P];if(typeof L=="function"&&(L=L.apply(void 0,iPe(W))),L===!0&&(L=void 0),!L){if(L===void 0||L===!1)return L;throw new Error("`".concat(P,"` was specified but was not a node, or did not return a node"))}var z=L;if(typeof L=="string"){try{z=r.querySelector(L)}catch(q){throw new Error("`".concat(P,'` appears to be an invalid selector; error="').concat(q.message,'"'))}if(!z&&!F)throw new Error("`".concat(P,"` as selector refers to no known node"))}return z},f=function(){var P=c("initialFocus",{hasFallback:!0});if(P===!1)return!1;if(P===void 0||P&&!_3(P,o.tabbableOptions))if(u(r.activeElement)>=0)P=r.activeElement;else{var A=s.tabbableGroups[0],N=A&&A.firstTabbableNode;P=N||c("fallbackFocus")}else P===null&&(P=c("fallbackFocus"));if(!P)throw new Error("Your focus-trap needs to have at least one focusable element");return P},d=function(){if(s.containerGroups=s.containers.map(function(P){var A=QRe(P,o.tabbableOptions),N=ZRe(P,o.tabbableOptions),F=A.length>0?A[0]:void 0,V=A.length>0?A[A.length-1]:void 0,W=N.find(function(q){return vd(q)}),L=N.slice().reverse().find(function(q){return vd(q)}),z=!!A.find(function(q){return qc(q)>0});return{container:P,tabbableNodes:A,focusableNodes:N,posTabIndexesFound:z,firstTabbableNode:F,lastTabbableNode:V,firstDomTabbableNode:W,lastDomTabbableNode:L,nextTabbableNode:function(te){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ne=A.indexOf(te);return ne<0?re?N.slice(N.indexOf(te)+1).find(function(fe){return vd(fe)}):N.slice(0,N.indexOf(te)).reverse().find(function(fe){return vd(fe)}):A[ne+(re?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(P){return P.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(P){return P.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},h=function(P){var A=P.activeElement;if(A)return A.shadowRoot&&A.shadowRoot.activeElement!==null?h(A.shadowRoot):A},p=function(P){if(P!==!1&&P!==h(document)){if(!P||!P.focus){p(f());return}P.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=P,lPe(P)&&P.select()}},m=function(P){var A=c("setReturnFocus",{params:[P]});return A||(A===!1?!1:P)},g=function(P){var A=P.target,N=P.event,F=P.isBackward,V=F===void 0?!1:F;A=A||Dv(N),d();var W=null;if(s.tabbableGroups.length>0){var L=u(A,N),z=L>=0?s.containerGroups[L]:void 0;if(L<0)V?W=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:W=s.tabbableGroups[0].firstTabbableNode;else if(V){var q=s.tabbableGroups.findIndex(function(G){var ae=G.firstTabbableNode;return A===ae});if(q<0&&(z.container===A||_3(A,o.tabbableOptions)&&!vd(A,o.tabbableOptions)&&!z.nextTabbableNode(A,!1))&&(q=L),q>=0){var te=q===0?s.tabbableGroups.length-1:q-1,re=s.tabbableGroups[te];W=qc(A)>=0?re.lastTabbableNode:re.lastDomTabbableNode}else G0(N)||(W=z.nextTabbableNode(A,!1))}else{var ne=s.tabbableGroups.findIndex(function(G){var ae=G.lastTabbableNode;return A===ae});if(ne<0&&(z.container===A||_3(A,o.tabbableOptions)&&!vd(A,o.tabbableOptions)&&!z.nextTabbableNode(A))&&(ne=L),ne>=0){var fe=ne===s.tabbableGroups.length-1?0:ne+1,ie=s.tabbableGroups[fe];W=qc(A)>=0?ie.firstTabbableNode:ie.firstDomTabbableNode}else G0(N)||(W=z.nextTabbableNode(A))}}else W=c("fallbackFocus");return W},v=function(P){var A=Dv(P);if(!(u(A,P)>=0)){if(Yp(o.clickOutsideDeactivates,P)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}Yp(o.allowOutsideClick,P)||P.preventDefault()}},b=function(P){var A=Dv(P),N=u(A,P)>=0;if(N||A instanceof Document)N&&(s.mostRecentlyFocusedNode=A);else{P.stopImmediatePropagation();var F,V=!0;if(s.mostRecentlyFocusedNode)if(qc(s.mostRecentlyFocusedNode)>0){var W=u(s.mostRecentlyFocusedNode),L=s.containerGroups[W].tabbableNodes;if(L.length>0){var z=L.findIndex(function(q){return q===s.mostRecentlyFocusedNode});z>=0&&(o.isKeyForward(s.recentNavEvent)?z+1<L.length&&(F=L[z+1],V=!1):z-1>=0&&(F=L[z-1],V=!1))}}else s.containerGroups.some(function(q){return q.tabbableNodes.some(function(te){return qc(te)>0})})||(V=!1);else V=!1;V&&(F=g({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),p(F||s.mostRecentlyFocusedNode||f())}s.recentNavEvent=void 0},w=function(P){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=P;var N=g({event:P,isBackward:A});N&&(G0(P)&&P.preventDefault(),p(N))},_=function(P){(o.isKeyForward(P)||o.isKeyBackward(P))&&w(P,o.isKeyBackward(P))},y=function(P){uPe(P)&&Yp(o.escapeDeactivates,P)!==!1&&(P.preventDefault(),a.deactivate())},k=function(P){var A=Dv(P);u(A,P)>=0||Yp(o.clickOutsideDeactivates,P)||Yp(o.allowOutsideClick,P)||(P.preventDefault(),P.stopImmediatePropagation())},S=function(){if(s.active)return cI.activateTrap(i,a),s.delayInitialFocusTimer=o.delayInitialFocus?fI(function(){p(f())}):p(f()),r.addEventListener("focusin",b,!0),r.addEventListener("mousedown",v,{capture:!0,passive:!1}),r.addEventListener("touchstart",v,{capture:!0,passive:!1}),r.addEventListener("click",k,{capture:!0,passive:!1}),r.addEventListener("keydown",_,{capture:!0,passive:!1}),r.addEventListener("keydown",y),a},E=function(){if(s.active)return r.removeEventListener("focusin",b,!0),r.removeEventListener("mousedown",v,!0),r.removeEventListener("touchstart",v,!0),r.removeEventListener("click",k,!0),r.removeEventListener("keydown",_,!0),r.removeEventListener("keydown",y),a},M=function(P){var A=P.some(function(N){var F=Array.from(N.removedNodes);return F.some(function(V){return V===s.mostRecentlyFocusedNode})});A&&p(f())},R=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(M):void 0,O=function(){R&&(R.disconnect(),s.active&&!s.paused&&s.containers.map(function(P){R.observe(P,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(P){if(s.active)return this;var A=l(P,"onActivate"),N=l(P,"onPostActivate"),F=l(P,"checkCanFocusTrap");F||d(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=h(r),A==null||A();var V=function(){F&&d(),S(),O(),N==null||N()};return F?(F(s.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(P){if(!s.active)return this;var A=uI({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},P);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,E(),s.active=!1,s.paused=!1,O(),cI.deactivateTrap(i,a);var N=l(A,"onDeactivate"),F=l(A,"onPostDeactivate"),V=l(A,"checkCanReturnFocus"),W=l(A,"returnFocus","returnFocusOnDeactivate");N==null||N();var L=function(){fI(function(){W&&p(m(s.nodeFocusedBeforeActivation)),F==null||F()})};return W&&V?(V(m(s.nodeFocusedBeforeActivation)).then(L,L),this):(L(),this)},pause:function(P){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,P)):this},unpause:function(P){return s.active?(s.manuallyPaused=!1,i[i.length-1]!==this?this:this._setPausedState(!1,P)):this},updateContainerElements:function(P){var A=[].concat(P).filter(Boolean);return s.containers=A.map(function(N){return typeof N=="string"?r.querySelector(N):N}),s.active&&d(),O(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(P,A){if(s.paused===P)return this;if(s.paused=P,P){var N=l(A,"onPause"),F=l(A,"onPostPause");N==null||N(),E(),O(),F==null||F()}else{var V=l(A,"onUnpause"),W=l(A,"onPostUnpause");V==null||V(),d(),S(),O(),W==null||W()}return this}}}),a.updateContainerElements(e),a};function pPe(n={}){let e;const{immediate:t,...r}=n,i=Bn(!1),o=Bn(!1),s=f=>e==null?void 0:e.activate(f),a=f=>{e==null||e.deactivate(f)},l=()=>{e&&(e.pause(),o.set(!0))},u=()=>{e&&(e.unpause(),o.set(!1))};return{useFocusTrap:f=>(e=hPe(f,{...r,onActivate(){var d;i.set(!0),(d=n.onActivate)==null||d.call(n)},onDeactivate(){var d;i.set(!1),(d=n.onDeactivate)==null||d.call(n)}}),t&&s(),{destroy(){a(),e=void 0}}),hasFocus:O3(i),isPaused:O3(o),activate:s,deactivate:a,pause:l,unpause:u}}const mPe={floating:{},focusTrap:{},clickOutside:{},escapeKeydown:{},portal:"body"},gPe=(n,e)=>{n.dataset.escapee="";const{anchorElement:t,open:r,options:i}=e;if(!t||!r||!i)return{destroy:Vo};const o={...mPe,...i},s=[];if(o.portal!==null){const l=bK(n,o.portal);l!=null&&l.destroy&&s.push(l.destroy)}if(s.push(BRe(t,n,o.floating).destroy),o.focusTrap!==null){const{useFocusTrap:l}=pPe({immediate:!0,escapeDeactivates:!1,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:n,...o.focusTrap}),u=l(n);u!=null&&u.destroy&&s.push(u.destroy)}o.clickOutside!==null&&s.push(KDe(n,{enabled:r,handler:l=>{l.defaultPrevented||sc(t)&&!t.contains(l.target)&&(r.set(!1),t.focus())},...o.clickOutside}).destroy),o.escapeKeydown!==null&&s.push(YDe(n,{enabled:r,handler:l=>{l.defaultPrevented||r.set(!1)},...o.escapeKeydown}).destroy);const a=og(...s);return{destroy(){a()}}},bK=(n,e="body")=>{let t;if(!sc(e)&&typeof e!="string")return{destroy:Vo};async function r(o){if(e=o,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await dn(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.dataset.portal="",t.appendChild(n),n.hidden=!1}function i(){n.remove()}return r(e),{update:r,destroy:i}},vPe={positioning:{placement:"bottom"},arrowSize:8,defaultOpen:!1,disableFocusTrap:!1,closeOnEscape:!0,preventScroll:!1,onOpenChange:void 0,closeOnOutsideClick:!0,portal:void 0,forceVisible:!1},{name:Rv}=XG("popover");function yK(n){const e={...vPe,...n},t=tK(ODe(e,"open")),{positioning:r,arrowSize:i,disableFocusTrap:o,preventScroll:s,closeOnEscape:a,closeOnOutsideClick:l,portal:u,forceVisible:c}=t,f=e.open??Bn(e.defaultOpen),d=DDe(f,e==null?void 0:e.onOpenChange),h=Bn(null),p={content:U0(),trigger:U0()};Tn(()=>{h.set(document.getElementById(p.trigger))});function m(){d.set(!1);const k=document.getElementById(p.trigger);k&&dn().then(()=>{k.focus()})}const g=VDe({open:d,activeTrigger:h,forceVisible:c}),v=Du(Rv("content"),{stores:[g,u],returned:([k,S])=>({hidden:k&&Z9?void 0:!0,tabindex:-1,style:eI({display:k?void 0:"none"}),id:p.content,"data-state":k?"open":"closed","data-portal":S?"":void 0}),action:k=>{let S=Vo;const E=nI([g,h,r,o,a,l,u],([M,R,O,I,P,A,N])=>{if(S(),!M||!R)return;const F=gPe(k,{anchorElement:R,open:d,options:{floating:O,focusTrap:I?null:void 0,clickOutside:A?void 0:null,escapeKeydown:P?{handler:()=>{m()}}:null,portal:UDe(k,N)}});F&&F.destroy&&(S=F.destroy)});return{destroy(){E(),S()}}}});function b(k){d.update(S=>!S),k&&h.set(k)}const w=Du(Rv("trigger"),{stores:d,returned:k=>({role:"button","aria-haspopup":"dialog","aria-expanded":k,"data-state":k?"open":"closed","aria-controls":p.content,id:p.trigger}),action:k=>({destroy:og(Ru(k,"click",()=>{b(k)}),Ru(k,"keydown",E=>{E.key!==Zc.ENTER&&E.key!==Zc.SPACE||(E.preventDefault(),b(k))}))})}),_=Du(Rv("arrow"),{stores:i,returned:k=>({"data-arrow":!0,style:eI({position:"absolute",width:`var(--arrow-size, ${k}px)`,height:`var(--arrow-size, ${k}px)`})})}),y=Du(Rv("close"),{returned:()=>({type:"button"}),action:k=>({destroy:og(Ru(k,"click",()=>{m()}),Ru(k,"keydown",E=>{E.key!==Zc.ENTER&&E.key!==Zc.SPACE||(E.preventDefault(),b())}))})});return nI([d,h,s],([k,S,E])=>{if(!Z9)return;const M=[];return k&&(S||dn().then(()=>{const R=document.getElementById(p.trigger);sc(R)&&h.set(R)}),E&&M.push(HDe())),()=>{M.forEach(R=>R())}}),{elements:{trigger:w,content:v,arrow:_,close:y},states:{open:d},options:t}}const{name:Pv}=XG("toast"),bPe={closeDelay:5e3,type:"foreground"};function yPe(n){const e={...bPe,...n},t=tK(e),{closeDelay:r,type:i}=t,o=Bn(new Map),s=p=>{const m={closeDelay:Wo(r),type:Wo(i),...p},g={content:U0(),title:U0(),description:U0()},v=m.closeDelay===0?null:window.setTimeout(()=>{a(g.content)},m.closeDelay),b=()=>{const{createdAt:_,pauseDuration:y,closeDelay:k,pausedAt:S}=w;return k===0?0:S?100*(S-_-y)/k:100*(performance.now()-_-y)/k},w={id:g.content,ids:g,...m,timeout:v,createdAt:performance.now(),pauseDuration:0,getPercentage:b};return o.update(_=>(_.set(g.content,w),new Map(_))),w},a=p=>{o.update(m=>(m.delete(p),new Map(m)))},l=(p,m)=>{o.update(g=>{const v=g.get(p);return v?(g.set(p,{...v,data:m}),new Map(g)):g})},u=Du(Pv("content"),{stores:o,returned:p=>m=>{const g=p.get(m);if(!g)return null;const{...v}=g;return{id:m,role:"alert","aria-describedby":v.ids.description,"aria-labelledby":v.ids.title,"aria-live":v.type==="foreground"?"assertive":"polite",tabindex:-1}},action:p=>{let m=Vo;return m=og(Ru(p,"pointerenter",g=>{$9(g)||o.update(v=>{const b=v.get(p.id);return!b||b.closeDelay===0?v:(b.timeout!==null&&window.clearTimeout(b.timeout),b.pausedAt=performance.now(),new Map(v))})}),Ru(p,"pointerleave",g=>{$9(g)||o.update(v=>{const b=v.get(p.id);if(!b||b.closeDelay===0)return v;const w=b.pausedAt??b.createdAt,_=w-b.createdAt-b.pauseDuration,y=b.closeDelay-_;return b.timeout=window.setTimeout(()=>{a(p.id)},y),b.pauseDuration+=performance.now()-w,b.pausedAt=void 0,new Map(v)})}),()=>{a(p.id)}),{destroy:m}}}),c=Du(Pv("title"),{stores:o,returned:p=>m=>{const g=p.get(m);return g?{id:g.ids.title}:null}}),f=Du(Pv("description"),{stores:o,returned:p=>m=>{const g=p.get(m);return g?{id:g.ids.description}:null}}),d=Du(Pv("close"),{returned:()=>p=>({type:"button","data-id":p}),action:p=>{function m(){p.dataset.id&&a(p.dataset.id)}return{destroy:og(Ru(p,"click",()=>{m()}),Ru(p,"keydown",v=>{v.key!==Zc.ENTER&&v.key!==Zc.SPACE||(v.preventDefault(),m())}))}}}),h=hg(o,p=>Array.from(p.values()));return{elements:{content:u,title:c,description:f,close:d},states:{toasts:O3(h)},helpers:{addToast:s,removeToast:a,updateToast:l},actions:{portal:bK},options:t}}const dI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function hI(n,e,t){const r=n.slice();return r[10]=e[t][0],r[11]=e[t][1],r}function w3(n){let e,t=[n[11]],r={};for(let i=0;i<t.length;i+=1)r=Te(r,t[i]);return{c(){e=Ti(n[10]),Ia(e,r)},m(i,o){H(i,e,o)},p(i,o){Ia(e,r=Ot(t,[o&32&&i[11]]))},d(i){i&&j(e)}}}function pI(n){let e=n[10],t,r=n[10]&&w3(n);return{c(){r&&r.c(),t=Ze()},m(i,o){r&&r.m(i,o),H(i,t,o)},p(i,o){i[10]?e?Be(e,i[10])?(r.d(1),r=w3(i),e=i[10],r.c(),r.m(t.parentNode,t)):r.p(i,o):(r=w3(i),e=i[10],r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null,e=i[10])},d(i){i&&j(t),r&&r.d(i)}}}function _Pe(n){let e,t,r,i,o,s=n[5],a=[];for(let d=0;d<s.length;d+=1)a[d]=pI(hI(n,s,d));const l=n[9].default,u=Je(l,n,n[8],null);let c=[dI,n[6],{width:n[2]},{height:n[2]},{stroke:n[1]},{"stroke-width":r=n[4]?Number(n[3])*24/Number(n[2]):n[3]},{class:i=`lucide-icon lucide lucide-${n[0]} ${n[7].class??""}`}],f={};for(let d=0;d<c.length;d+=1)f=Te(f,c[d]);return{c(){e=Ti("svg");for(let d=0;d<a.length;d+=1)a[d].c();t=Ze(),u&&u.c(),Ia(e,f)},m(d,h){H(d,e,h);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null);T(e,t),u&&u.m(e,null),o=!0},p(d,[h]){if(h&32){s=d[5];let p;for(p=0;p<s.length;p+=1){const m=hI(d,s,p);a[p]?a[p].p(m,h):(a[p]=pI(m),a[p].c(),a[p].m(e,t))}for(;p<a.length;p+=1)a[p].d(1);a.length=s.length}u&&u.p&&(!o||h&256)&&Xe(u,l,d,d[8],o?Ye(l,d[8],h,null):Qe(d[8]),null),Ia(e,f=Ot(c,[dI,h&64&&d[6],(!o||h&4)&&{width:d[2]},(!o||h&4)&&{height:d[2]},(!o||h&2)&&{stroke:d[1]},(!o||h&28&&r!==(r=d[4]?Number(d[3])*24/Number(d[2]):d[3]))&&{"stroke-width":r},(!o||h&129&&i!==(i=`lucide-icon lucide lucide-${d[0]} ${d[7].class??""}`))&&{class:i}]))},i(d){o||(x(u,d),o=!0)},o(d){D(u,d),o=!1},d(d){d&&j(e),rn(a,d),u&&u.d(d)}}}function wPe(n,e,t){const r=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let i=Wu(e,r),{$$slots:o={},$$scope:s}=e,{name:a}=e,{color:l="currentColor"}=e,{size:u=24}=e,{strokeWidth:c=2}=e,{absoluteStrokeWidth:f=!1}=e,{iconNode:d}=e;return n.$$set=h=>{t(7,e=Te(Te({},e),_t(h))),t(6,i=Wu(e,r)),"name"in h&&t(0,a=h.name),"color"in h&&t(1,l=h.color),"size"in h&&t(2,u=h.size),"strokeWidth"in h&&t(3,c=h.strokeWidth),"absoluteStrokeWidth"in h&&t(4,f=h.absoluteStrokeWidth),"iconNode"in h&&t(5,d=h.iconNode),"$$scope"in h&&t(8,s=h.$$scope)},e=_t(e),[a,l,u,c,f,d,i,e,s,o]}class kPe extends ye{constructor(e){super(),be(this,e,wPe,_Pe,Be,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}const zr=kPe;function CPe(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function SPe(n){let e,t;const r=[{name:"alert-circle"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[CPe]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function xPe(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class EPe extends ye{constructor(e){super(),be(this,e,xPe,SPe,Be,{})}}const APe=EPe;function MPe(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function TPe(n){let e,t;const r=[{name:"bold"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[MPe]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function OPe(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class DPe extends ye{constructor(e){super(),be(this,e,OPe,TPe,Be,{})}}const RPe=DPe;function PPe(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function IPe(n){let e,t;const r=[{name:"check-circle"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[PPe]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function NPe(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}],["polyline",{points:"22 4 12 14.01 9 11.01"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class BPe extends ye{constructor(e){super(),be(this,e,NPe,IPe,Be,{})}}const LPe=BPe;function FPe(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function zPe(n){let e,t;const r=[{name:"check-square"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[FPe]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function jPe(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["polyline",{points:"9 11 12 14 22 4"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class HPe extends ye{constructor(e){super(),be(this,e,jPe,zPe,Be,{})}}const _K=HPe;function VPe(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function WPe(n){let e,t;const r=[{name:"check"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[VPe]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function qPe(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["polyline",{points:"20 6 9 17 4 12"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class UPe extends ye{constructor(e){super(),be(this,e,qPe,WPe,Be,{})}}const fw=UPe;function GPe(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function KPe(n){let e,t;const r=[{name:"chevron-down"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[GPe]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function JPe(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"m6 9 6 6 6-6"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class YPe extends ye{constructor(e){super(),be(this,e,JPe,KPe,Be,{})}}const wK=YPe;function XPe(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function QPe(n){let e,t;const r=[{name:"code"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[XPe]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function ZPe(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["polyline",{points:"16 18 22 12 16 6"}],["polyline",{points:"8 6 2 12 8 18"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}let $Pe=class extends ye{constructor(e){super(),be(this,e,ZPe,QPe,Be,{})}};const yA=$Pe;function e7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function t7e(n){let e,t;const r=[{name:"heading-1"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[e7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function n7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}],["path",{d:"M12 18V6"}],["path",{d:"m17 12 3-2v8"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class r7e extends ye{constructor(e){super(),be(this,e,n7e,t7e,Be,{})}}const kK=r7e;function i7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function o7e(n){let e,t;const r=[{name:"heading-2"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[i7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function s7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}],["path",{d:"M12 18V6"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class a7e extends ye{constructor(e){super(),be(this,e,s7e,o7e,Be,{})}}const CK=a7e;function l7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function u7e(n){let e,t;const r=[{name:"heading-3"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[l7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function c7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}],["path",{d:"M12 18V6"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class f7e extends ye{constructor(e){super(),be(this,e,c7e,u7e,Be,{})}}const SK=f7e;function d7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function h7e(n){let e,t;const r=[{name:"italic"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[d7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function p7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["line",{x1:"19",x2:"10",y1:"4",y2:"4"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class m7e extends ye{constructor(e){super(),be(this,e,p7e,h7e,Be,{})}}const g7e=m7e;function v7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function b7e(n){let e,t;const r=[{name:"list-ordered"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[v7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function y7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["line",{x1:"10",x2:"21",y1:"6",y2:"6"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18"}],["path",{d:"M4 6h1v4"}],["path",{d:"M4 10h2"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class _7e extends ye{constructor(e){super(),be(this,e,y7e,b7e,Be,{})}}const B4=_7e;function w7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function k7e(n){let e,t;const r=[{name:"list"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[w7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function C7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["line",{x1:"8",x2:"21",y1:"6",y2:"6"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}let S7e=class extends ye{constructor(e){super(),be(this,e,C7e,k7e,Be,{})}};const x7e=S7e;function E7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function A7e(n){let e,t;const r=[{name:"loader"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[E7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function M7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["line",{x1:"12",x2:"12",y1:"2",y2:"6"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class T7e extends ye{constructor(e){super(),be(this,e,M7e,A7e,Be,{})}}const O7e=T7e;function D7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function R7e(n){let e,t;const r=[{name:"strikethrough"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[D7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function P7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class I7e extends ye{constructor(e){super(),be(this,e,P7e,R7e,Be,{})}}const N7e=I7e;function B7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function L7e(n){let e,t;const r=[{name:"text-quote"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[B7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function F7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M17 6H3"}],["path",{d:"M21 12H8"}],["path",{d:"M21 18H8"}],["path",{d:"M3 12v6"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class z7e extends ye{constructor(e){super(),be(this,e,F7e,L7e,Be,{})}}const xK=z7e;function j7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function H7e(n){let e,t;const r=[{name:"text"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[j7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function V7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M17 6.1H3"}],["path",{d:"M21 12.1H3"}],["path",{d:"M15.1 18H3"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}let W7e=class extends ye{constructor(e){super(),be(this,e,V7e,H7e,Be,{})}};const EK=W7e;function q7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function U7e(n){let e,t;const r=[{name:"trash"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[q7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function G7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class K7e extends ye{constructor(e){super(),be(this,e,G7e,U7e,Be,{})}}const J7e=K7e;function Y7e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function X7e(n){let e,t;const r=[{name:"underline"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[Y7e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function Q7e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class Z7e extends ye{constructor(e){super(),be(this,e,Q7e,X7e,Be,{})}}const $7e=Z7e;function e9e(n){let e;const t=n[2].default,r=Je(t,n,n[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8)&&Xe(r,t,i,i[3],e?Ye(t,i[3],o,null):Qe(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function t9e(n){let e,t;const r=[{name:"x-circle"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[e9e]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new zr({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,[s]){const a=s&3?Ot(r,[r[0],s&2&&an(o[1]),s&1&&{iconNode:o[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function n9e(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];return n.$$set=s=>{t(1,e=Te(Te({},e),_t(s))),"$$scope"in s&&t(3,i=s.$$scope)},e=_t(e),[o,e,r,i]}class r9e extends ye{constructor(e){super(),be(this,e,n9e,t9e,Be,{})}}const i9e=r9e;function o9e(n,{from:e,to:t},r={}){const i=getComputedStyle(n),o=i.transform==="none"?"":i.transform,[s,a]=i.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*s/t.width-(t.left+s),u=e.top+e.height*a/t.height-(t.top+a),{delay:c=0,duration:f=h=>Math.sqrt(h)*120,easing:d=pg}=r;return{delay:c,duration:dr(f)?f(Math.sqrt(l*l+u*u)):f,easing:d,css:(h,p)=>{const m=p*l,g=p*u,v=h+p*e.width/t.width,b=h+p*e.height/t.height;return`transform: ${o} translate(${m}px, ${g}px) scale(${v}, ${b});`}}}function mI(n,e,t){const r=n.slice();r[4]=e[t].id,r[5]=e[t].data;const i=r[1](r[4]);r[6]=i;const o=r[2](r[4]);return r[7]=o,r}function gI(n,e){let t,r,i,o,s=e[5].text+"",a,l,u,c,f,d=pe,h,p,m;var g=e[3][e[5].type];function v(k){return{props:{class:"square-6"}}}g&&(r=Ht(g,v()));let b=[{class:"leading-relaxed"},e[6]],w={};for(let k=0;k<b.length;k+=1)w=Te(w,b[k]);let _=[e[7],{class:"rounded-xl bg-stone-100 border border-stone-300 text-stone-700 shadow flex w-[24rem] max-w-[calc(100vw-2rem)] items-center gap-2 p-4"}],y={};for(let k=0;k<_.length;k+=1)y=Te(y,_[k]);return{key:n,first:null,c(){t=B("div"),r&&$(r.$$.fragment),i=K(),o=B("p"),a=Se(s),l=K(),Gn(o,w),Gn(t,y),this.first=t},m(k,S){H(k,t,S),r&&Q(r,t,null),T(t,i),T(t,o),T(o,a),T(t,l),h=!0,p||(m=[Mn(e[6].action(o)),Mn(e[7].action(t))],p=!0)},p(k,S){if(e=k,S&1&&g!==(g=e[3][e[5].type])){if(r){de();const E=r;D(E.$$.fragment,1,0,()=>{Z(E,1)}),he()}g?(r=Ht(g,v()),$(r.$$.fragment),x(r.$$.fragment,1),Q(r,t,i)):r=null}(!h||S&1)&&s!==(s=e[5].text+"")&&wJ(a,s,w.contenteditable),Gn(o,w=Ot(b,[{class:"leading-relaxed"},S&3&&e[6]])),Gn(t,y=Ot(_,[S&5&&e[7],{class:"rounded-xl bg-stone-100 border border-stone-300 text-stone-700 shadow flex w-[24rem] max-w-[calc(100vw-2rem)] items-center gap-2 p-4"}]))},r(){f=t.getBoundingClientRect()},f(){AJ(t),d(),VN(t,f)},a(){d(),d=EJ(t,f,o9e,{duration:500})},i(k){h||(r&&x(r.$$.fragment,k),Tr(()=>{h&&(c&&c.end(1),u=UN(t,vb,{duration:150,x:"100%"}),u.start())}),h=!0)},o(k){r&&D(r.$$.fragment,k),u&&u.invalidate(),c=GN(t,vb,{duration:150,x:"100%"}),h=!1},d(k){k&&j(t),r&&Z(r),k&&c&&c.end(),p=!1,It(m)}}}function s9e(n){let e,t=[],r=new Map,i,o,s,a=n[0];const l=u=>u[4];for(let u=0;u<a.length;u+=1){let c=mI(n,a,u),f=l(c);r.set(f,t[u]=gI(f,c))}return{c(){e=B("div");for(let u=0;u<t.length;u+=1)t[u].c();C(e,"class","fixed right-0 top-0 z-50 m-4 flex flex-col items-end gap-2 md:bottom-0 md:top-auto")},m(u,c){H(u,e,c);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);i=!0,o||(s=Mn(c9e.call(null,e)),o=!0)},p(u,[c]){if(c&15){a=u[0],de();for(let f=0;f<t.length;f+=1)t[f].r();t=zs(t,c,l,1,u,a,r,e,DJ,gI,null,mI);for(let f=0;f<t.length;f+=1)t[f].a();he()}},i(u){if(!i){for(let c=0;c<a.length;c+=1)x(t[c]);i=!0}},o(u){for(let c=0;c<t.length;c+=1)D(t[c]);i=!1},d(u){u&&j(e);for(let c=0;c<t.length;c+=1)t[c].d();o=!1,s()}}}const{elements:{content:a9e,description:l9e},helpers:_A,states:{toasts:u9e},actions:{portal:c9e}}=yPe({closeDelay:5e3}),ag=_A.addToast;_A.removeToast;_A.updateToast;function f9e(n,e,t){let r,i,o;return nn(n,u9e,a=>t(0,r=a)),nn(n,l9e,a=>t(1,i=a)),nn(n,a9e,a=>t(2,o=a)),[r,i,o,{success:LPe,warning:APe,error:i9e,loading:O7e}]}class d9e extends ye{constructor(e){super(),be(this,e,f9e,s9e,Be,{})}}const x2=new si("upload-image"),h9e=()=>new Sr({key:x2,state:{init(){return _r.empty},apply(n,e){e=e.map(n.mapping,n.doc);const t=n.getMeta(this);if(t&&t.add){const{id:r,pos:i,src:o}=t.add,s=document.createElement("div");s.setAttribute("class","img-placeholder");const a=document.createElement("img");a.setAttribute("class","opacity-40 rounded-lg border border-stone-200"),a.src=o,s.appendChild(a);const l=qi.widget(i+1,s,{id:r});e=e.add(n.doc,[l])}else t&&t.remove&&(e=e.remove(e.find(null,null,r=>r.id==t.remove.id)));return e}},props:{decorations(n){return this.getState(n)}}});function p9e(n,e){const r=x2.getState(n).find(null,null,i=>i.id==e);return r.length?r[0].from:null}function vI(n,e,t){if(n.type.includes("image/")){if(n.size/1024/1024>20){ag({data:{text:"File size too big (max 20MB).",type:"error"}});return}}else{ag({data:{text:"File type not supported.",type:"error"}});return}const r={},i=e.state.tr;i.selection.empty||i.deleteSelection();const o=new FileReader;o.readAsDataURL(n),o.onload=()=>{i.setMeta(x2,{add:{id:r,pos:t,src:o.result}}),e.dispatch(i)},g9e(n).then(s=>{const{schema:a}=e.state,l=p9e(e.state,r);if(l==null)return;const u=typeof s=="object"?o.result:s,c=a.nodes.image.create({src:u}),f=e.state.tr.replaceWith(l,l,c).setMeta(x2,{remove:{id:r}});e.dispatch(f)})}const m9e=n=>new Promise(e=>setTimeout(e,n)),g9e=async n=>(await m9e(1e3),n);function v9e(n){var e;const{char:t,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:o,startOfLine:s,$position:a}=n,l=r&&!i,u=WSe(t),c=new RegExp(`\\s${u}$`),f=s?"^":"",d=i?"":u,h=l?new RegExp(`${f}${u}.*?(?=\\s${d}|$)`,"gm"):new RegExp(`${f}(?:^)?${u}[^\\s${d}]*`,"gm"),p=((e=a.nodeBefore)===null||e===void 0?void 0:e.isText)&&a.nodeBefore.text;if(!p)return null;const m=a.pos-p.length,g=Array.from(p.matchAll(h)).pop();if(!g||g.input===void 0||g.index===void 0)return null;const v=g.input.slice(Math.max(0,g.index-1),g.index),b=new RegExp(`^[${o==null?void 0:o.join("")}\0]?$`).test(v);if(o!==null&&!b)return null;const w=m+g.index;let _=w+g[0].length;return l&&c.test(p.slice(_-1,_+1))&&(g[0]+=" ",_+=1),w<a.pos&&_>=a.pos?{range:{from:w,to:_},query:g[0].slice(t.length),text:g[0]}:null}const b9e=new si("suggestion");function y9e({pluginKey:n=b9e,editor:e,char:t="@",allowSpaces:r=!1,allowToIncludeChar:i=!1,allowedPrefixes:o=[" "],startOfLine:s=!1,decorationTag:a="span",decorationClass:l="suggestion",command:u=()=>null,items:c=()=>[],render:f=()=>({}),allow:d=()=>!0,findSuggestionMatch:h=v9e}){let p;const m=f==null?void 0:f(),g=new Sr({key:n,view(){return{update:async(v,b)=>{var w,_,y,k,S,E,M;const R=(w=this.key)===null||w===void 0?void 0:w.getState(b),O=(_=this.key)===null||_===void 0?void 0:_.getState(v.state),I=R.active&&O.active&&R.range.from!==O.range.from,P=!R.active&&O.active,A=R.active&&!O.active,N=!P&&!A&&R.query!==O.query,F=P||I&&N,V=N||I,W=A||I&&N;if(!F&&!V&&!W)return;const L=W&&!F?R:O,z=v.dom.querySelector(`[data-decoration-id="${L.decorationId}"]`);p={editor:e,range:L.range,query:L.query,text:L.text,items:[],command:q=>u({editor:e,range:L.range,props:q}),decorationNode:z,clientRect:z?()=>{var q;const{decorationId:te}=(q=this.key)===null||q===void 0?void 0:q.getState(e.state),re=v.dom.querySelector(`[data-decoration-id="${te}"]`);return(re==null?void 0:re.getBoundingClientRect())||null}:null},F&&((y=m==null?void 0:m.onBeforeStart)===null||y===void 0||y.call(m,p)),V&&((k=m==null?void 0:m.onBeforeUpdate)===null||k===void 0||k.call(m,p)),(V||F)&&(p.items=await c({editor:e,query:L.query})),W&&((S=m==null?void 0:m.onExit)===null||S===void 0||S.call(m,p)),V&&((E=m==null?void 0:m.onUpdate)===null||E===void 0||E.call(m,p)),F&&((M=m==null?void 0:m.onStart)===null||M===void 0||M.call(m,p))},destroy:()=>{var v;p&&((v=m==null?void 0:m.onExit)===null||v===void 0||v.call(m,p))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(v,b,w,_){const{isEditable:y}=e,{composing:k}=e.view,{selection:S}=v,{empty:E,from:M}=S,R={...b};if(R.composing=k,y&&(E||e.view.composing)){(M<b.range.from||M>b.range.to)&&!k&&!b.composing&&(R.active=!1);const O=h({char:t,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:o,startOfLine:s,$position:S.$from}),I=`id_${Math.floor(Math.random()*4294967295)}`;O&&d({editor:e,state:_,range:O.range,isActive:b.active})?(R.active=!0,R.decorationId=b.decorationId?b.decorationId:I,R.range=O.range,R.query=O.query,R.text=O.text):R.active=!1}else R.active=!1;return R.active||(R.decorationId=null,R.range={from:0,to:0},R.query=null,R.text=null),R}},props:{handleKeyDown(v,b){var w;const{active:_,range:y}=g.getState(v.state);return _&&((w=m==null?void 0:m.onKeyDown)===null||w===void 0?void 0:w.call(m,{view:v,event:b,range:y}))||!1},decorations(v){const{active:b,range:w,decorationId:_}=g.getState(v);return b?_r.create(v.doc,[qi.inline(w.from,w.to,{nodeName:a,class:l,"data-decoration-id":_})]):null}}});return g}var so="top",ds="bottom",hs="right",ao="left",wA="auto",e1=[so,ds,hs,ao],$h="start",lg="end",_9e="clippingParents",AK="viewport",Xp="popper",w9e="reference",bI=e1.reduce(function(n,e){return n.concat([e+"-"+$h,e+"-"+lg])},[]),MK=[].concat(e1,[wA]).reduce(function(n,e){return n.concat([e,e+"-"+$h,e+"-"+lg])},[]),k9e="beforeRead",C9e="read",S9e="afterRead",x9e="beforeMain",E9e="main",A9e="afterMain",M9e="beforeWrite",T9e="write",O9e="afterWrite",D9e=[k9e,C9e,S9e,x9e,E9e,A9e,M9e,T9e,O9e];function Ua(n){return n?(n.nodeName||"").toLowerCase():null}function Oo(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Nf(n){var e=Oo(n).Element;return n instanceof e||n instanceof Element}function ss(n){var e=Oo(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function kA(n){if(typeof ShadowRoot>"u")return!1;var e=Oo(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function R9e(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];!ss(o)||!Ua(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function P9e(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=s.reduce(function(l,u){return l[u]="",l},{});!ss(i)||!Ua(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const TK={name:"applyStyles",enabled:!0,phase:"write",fn:R9e,effect:P9e,requires:["computeStyles"]};function Ra(n){return n.split("-")[0]}var lf=Math.max,E2=Math.min,ep=Math.round;function L4(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function OK(){return!/^((?!chrome|android).)*safari/i.test(L4())}function tp(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),i=1,o=1;e&&ss(n)&&(i=n.offsetWidth>0&&ep(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&ep(r.height)/n.offsetHeight||1);var s=Nf(n)?Oo(n):window,a=s.visualViewport,l=!OK()&&t,u=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/o,f=r.width/i,d=r.height/o;return{width:f,height:d,top:c,right:u+f,bottom:c+d,left:u,x:u,y:c}}function CA(n){var e=tp(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function DK(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&kA(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ql(n){return Oo(n).getComputedStyle(n)}function I9e(n){return["table","td","th"].indexOf(Ua(n))>=0}function yc(n){return((Nf(n)?n.ownerDocument:n.document)||window.document).documentElement}function dw(n){return Ua(n)==="html"?n:n.assignedSlot||n.parentNode||(kA(n)?n.host:null)||yc(n)}function yI(n){return!ss(n)||ql(n).position==="fixed"?null:n.offsetParent}function N9e(n){var e=/firefox/i.test(L4()),t=/Trident/i.test(L4());if(t&&ss(n)){var r=ql(n);if(r.position==="fixed")return null}var i=dw(n);for(kA(i)&&(i=i.host);ss(i)&&["html","body"].indexOf(Ua(i))<0;){var o=ql(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function t1(n){for(var e=Oo(n),t=yI(n);t&&I9e(t)&&ql(t).position==="static";)t=yI(t);return t&&(Ua(t)==="html"||Ua(t)==="body"&&ql(t).position==="static")?e:t||N9e(n)||e}function SA(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function K0(n,e,t){return lf(n,E2(e,t))}function B9e(n,e,t){var r=K0(n,e,t);return r>t?t:r}function RK(){return{top:0,right:0,bottom:0,left:0}}function PK(n){return Object.assign({},RK(),n)}function IK(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var L9e=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,PK(typeof e!="number"?e:IK(e,e1))};function F9e(n){var e,t=n.state,r=n.name,i=n.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,a=Ra(t.placement),l=SA(a),u=[ao,hs].indexOf(a)>=0,c=u?"height":"width";if(!(!o||!s)){var f=L9e(i.padding,t),d=CA(o),h=l==="y"?so:ao,p=l==="y"?ds:hs,m=t.rects.reference[c]+t.rects.reference[l]-s[l]-t.rects.popper[c],g=s[l]-t.rects.reference[l],v=t1(o),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,w=m/2-g/2,_=f[h],y=b-d[c]-f[p],k=b/2-d[c]/2+w,S=K0(_,k,y),E=l;t.modifiersData[r]=(e={},e[E]=S,e.centerOffset=S-k,e)}}function z9e(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||DK(e.elements.popper,i)&&(e.elements.arrow=i))}const j9e={name:"arrow",enabled:!0,phase:"main",fn:F9e,effect:z9e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function np(n){return n.split("-")[1]}var H9e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function V9e(n,e){var t=n.x,r=n.y,i=e.devicePixelRatio||1;return{x:ep(t*i)/i||0,y:ep(r*i)/i||0}}function _I(n){var e,t=n.popper,r=n.popperRect,i=n.placement,o=n.variation,s=n.offsets,a=n.position,l=n.gpuAcceleration,u=n.adaptive,c=n.roundOffsets,f=n.isFixed,d=s.x,h=d===void 0?0:d,p=s.y,m=p===void 0?0:p,g=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=g.x,m=g.y;var v=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),w=ao,_=so,y=window;if(u){var k=t1(t),S="clientHeight",E="clientWidth";if(k===Oo(t)&&(k=yc(t),ql(k).position!=="static"&&a==="absolute"&&(S="scrollHeight",E="scrollWidth")),k=k,i===so||(i===ao||i===hs)&&o===lg){_=ds;var M=f&&k===y&&y.visualViewport?y.visualViewport.height:k[S];m-=M-r.height,m*=l?1:-1}if(i===ao||(i===so||i===ds)&&o===lg){w=hs;var R=f&&k===y&&y.visualViewport?y.visualViewport.width:k[E];h-=R-r.width,h*=l?1:-1}}var O=Object.assign({position:a},u&&H9e),I=c===!0?V9e({x:h,y:m},Oo(t)):{x:h,y:m};if(h=I.x,m=I.y,l){var P;return Object.assign({},O,(P={},P[_]=b?"0":"",P[w]=v?"0":"",P.transform=(y.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",P))}return Object.assign({},O,(e={},e[_]=b?m+"px":"",e[w]=v?h+"px":"",e.transform="",e))}function W9e(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,o=t.adaptive,s=o===void 0?!0:o,a=t.roundOffsets,l=a===void 0?!0:a,u={placement:Ra(e.placement),variation:np(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,_I(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,_I(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const q9e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:W9e,data:{}};var Iv={passive:!0};function U9e(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=Oo(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",t.update,Iv)}),a&&l.addEventListener("resize",t.update,Iv),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",t.update,Iv)}),a&&l.removeEventListener("resize",t.update,Iv)}}const G9e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:U9e,data:{}};var K9e={left:"right",right:"left",bottom:"top",top:"bottom"};function cb(n){return n.replace(/left|right|bottom|top/g,function(e){return K9e[e]})}var J9e={start:"end",end:"start"};function wI(n){return n.replace(/start|end/g,function(e){return J9e[e]})}function xA(n){var e=Oo(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function EA(n){return tp(yc(n)).left+xA(n).scrollLeft}function Y9e(n,e){var t=Oo(n),r=yc(n),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var u=OK();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+EA(n),y:l}}function X9e(n){var e,t=yc(n),r=xA(n),i=(e=n.ownerDocument)==null?void 0:e.body,o=lf(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=lf(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+EA(n),l=-r.scrollTop;return ql(i||t).direction==="rtl"&&(a+=lf(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function AA(n){var e=ql(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function NK(n){return["html","body","#document"].indexOf(Ua(n))>=0?n.ownerDocument.body:ss(n)&&AA(n)?n:NK(dw(n))}function J0(n,e){var t;e===void 0&&(e=[]);var r=NK(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),o=Oo(r),s=i?[o].concat(o.visualViewport||[],AA(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(J0(dw(s)))}function F4(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Q9e(n,e){var t=tp(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function kI(n,e,t){return e===AK?F4(Y9e(n,t)):Nf(e)?Q9e(e,t):F4(X9e(yc(n)))}function Z9e(n){var e=J0(dw(n)),t=["absolute","fixed"].indexOf(ql(n).position)>=0,r=t&&ss(n)?t1(n):n;return Nf(r)?e.filter(function(i){return Nf(i)&&DK(i,r)&&Ua(i)!=="body"}):[]}function $9e(n,e,t,r){var i=e==="clippingParents"?Z9e(n):[].concat(e),o=[].concat(i,[t]),s=o[0],a=o.reduce(function(l,u){var c=kI(n,u,r);return l.top=lf(c.top,l.top),l.right=E2(c.right,l.right),l.bottom=E2(c.bottom,l.bottom),l.left=lf(c.left,l.left),l},kI(n,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function BK(n){var e=n.reference,t=n.element,r=n.placement,i=r?Ra(r):null,o=r?np(r):null,s=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(i){case so:l={x:s,y:e.y-t.height};break;case ds:l={x:s,y:e.y+e.height};break;case hs:l={x:e.x+e.width,y:a};break;case ao:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?SA(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case $h:l[u]=l[u]-(e[c]/2-t[c]/2);break;case lg:l[u]=l[u]+(e[c]/2-t[c]/2);break}}return l}function ug(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,o=t.strategy,s=o===void 0?n.strategy:o,a=t.boundary,l=a===void 0?_9e:a,u=t.rootBoundary,c=u===void 0?AK:u,f=t.elementContext,d=f===void 0?Xp:f,h=t.altBoundary,p=h===void 0?!1:h,m=t.padding,g=m===void 0?0:m,v=PK(typeof g!="number"?g:IK(g,e1)),b=d===Xp?w9e:Xp,w=n.rects.popper,_=n.elements[p?b:d],y=$9e(Nf(_)?_:_.contextElement||yc(n.elements.popper),l,c,s),k=tp(n.elements.reference),S=BK({reference:k,element:w,strategy:"absolute",placement:i}),E=F4(Object.assign({},w,S)),M=d===Xp?E:k,R={top:y.top-M.top+v.top,bottom:M.bottom-y.bottom+v.bottom,left:y.left-M.left+v.left,right:M.right-y.right+v.right},O=n.modifiersData.offset;if(d===Xp&&O){var I=O[i];Object.keys(R).forEach(function(P){var A=[hs,ds].indexOf(P)>=0?1:-1,N=[so,ds].indexOf(P)>=0?"y":"x";R[P]+=I[N]*A})}return R}function eIe(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,o=t.rootBoundary,s=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?MK:l,c=np(r),f=c?a?bI:bI.filter(function(p){return np(p)===c}):e1,d=f.filter(function(p){return u.indexOf(p)>=0});d.length===0&&(d=f);var h=d.reduce(function(p,m){return p[m]=ug(n,{placement:m,boundary:i,rootBoundary:o,padding:s})[Ra(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function tIe(n){if(Ra(n)===wA)return[];var e=cb(n);return[wI(n),e,wI(e)]}function nIe(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,a=s===void 0?!0:s,l=t.fallbackPlacements,u=t.padding,c=t.boundary,f=t.rootBoundary,d=t.altBoundary,h=t.flipVariations,p=h===void 0?!0:h,m=t.allowedAutoPlacements,g=e.options.placement,v=Ra(g),b=v===g,w=l||(b||!p?[cb(g)]:tIe(g)),_=[g].concat(w).reduce(function(ne,fe){return ne.concat(Ra(fe)===wA?eIe(e,{placement:fe,boundary:c,rootBoundary:f,padding:u,flipVariations:p,allowedAutoPlacements:m}):fe)},[]),y=e.rects.reference,k=e.rects.popper,S=new Map,E=!0,M=_[0],R=0;R<_.length;R++){var O=_[R],I=Ra(O),P=np(O)===$h,A=[so,ds].indexOf(I)>=0,N=A?"width":"height",F=ug(e,{placement:O,boundary:c,rootBoundary:f,altBoundary:d,padding:u}),V=A?P?hs:ao:P?ds:so;y[N]>k[N]&&(V=cb(V));var W=cb(V),L=[];if(o&&L.push(F[I]<=0),a&&L.push(F[V]<=0,F[W]<=0),L.every(function(ne){return ne})){M=O,E=!1;break}S.set(O,L)}if(E)for(var z=p?3:1,q=function(fe){var ie=_.find(function(G){var ae=S.get(G);if(ae)return ae.slice(0,fe).every(function(Me){return Me})});if(ie)return M=ie,"break"},te=z;te>0;te--){var re=q(te);if(re==="break")break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}}const rIe={name:"flip",enabled:!0,phase:"main",fn:nIe,requiresIfExists:["offset"],data:{_skip:!1}};function CI(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function SI(n){return[so,hs,ds,ao].some(function(e){return n[e]>=0})}function iIe(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=ug(e,{elementContext:"reference"}),a=ug(e,{altBoundary:!0}),l=CI(s,r),u=CI(a,i,o),c=SI(l),f=SI(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const oIe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:iIe};function sIe(n,e,t){var r=Ra(n),i=[ao,so].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[ao,hs].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function aIe(n){var e=n.state,t=n.options,r=n.name,i=t.offset,o=i===void 0?[0,0]:i,s=MK.reduce(function(c,f){return c[f]=sIe(f,e.rects,o),c},{}),a=s[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}const lIe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:aIe};function uIe(n){var e=n.state,t=n.name;e.modifiersData[t]=BK({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const cIe={name:"popperOffsets",enabled:!0,phase:"read",fn:uIe,data:{}};function fIe(n){return n==="x"?"y":"x"}function dIe(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,a=s===void 0?!1:s,l=t.boundary,u=t.rootBoundary,c=t.altBoundary,f=t.padding,d=t.tether,h=d===void 0?!0:d,p=t.tetherOffset,m=p===void 0?0:p,g=ug(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),v=Ra(e.placement),b=np(e.placement),w=!b,_=SA(v),y=fIe(_),k=e.modifiersData.popperOffsets,S=e.rects.reference,E=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,R=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(k){if(o){var P,A=_==="y"?so:ao,N=_==="y"?ds:hs,F=_==="y"?"height":"width",V=k[_],W=V+g[A],L=V-g[N],z=h?-E[F]/2:0,q=b===$h?S[F]:E[F],te=b===$h?-E[F]:-S[F],re=e.elements.arrow,ne=h&&re?CA(re):{width:0,height:0},fe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:RK(),ie=fe[A],G=fe[N],ae=K0(0,S[F],ne[F]),Me=w?S[F]/2-z-ae-ie-R.mainAxis:q-ae-ie-R.mainAxis,X=w?-S[F]/2+z+ae+G+R.mainAxis:te+ae+G+R.mainAxis,ge=e.elements.arrow&&t1(e.elements.arrow),U=ge?_==="y"?ge.clientTop||0:ge.clientLeft||0:0,Ce=(P=O==null?void 0:O[_])!=null?P:0,Ee=V+Me-Ce-U,Ae=V+X-Ce,De=K0(h?E2(W,Ee):W,V,h?lf(L,Ae):L);k[_]=De,I[_]=De-V}if(a){var nt,ue=_==="x"?so:ao,Oe=_==="x"?ds:hs,Ue=k[y],_e=y==="y"?"height":"width",it=Ue+g[ue],At=Ue-g[Oe],Ve=[so,ao].indexOf(v)!==-1,ct=(nt=O==null?void 0:O[y])!=null?nt:0,Pt=Ve?it:Ue-S[_e]-E[_e]-ct+R.altAxis,yt=Ve?Ue+S[_e]+E[_e]-ct-R.altAxis:At,mn=h&&Ve?B9e(Pt,Ue,yt):K0(h?Pt:it,Ue,h?yt:At);k[y]=mn,I[y]=mn-Ue}e.modifiersData[r]=I}}const hIe={name:"preventOverflow",enabled:!0,phase:"main",fn:dIe,requiresIfExists:["offset"]};function pIe(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function mIe(n){return n===Oo(n)||!ss(n)?xA(n):pIe(n)}function gIe(n){var e=n.getBoundingClientRect(),t=ep(e.width)/n.offsetWidth||1,r=ep(e.height)/n.offsetHeight||1;return t!==1||r!==1}function vIe(n,e,t){t===void 0&&(t=!1);var r=ss(e),i=ss(e)&&gIe(e),o=yc(e),s=tp(n,i,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((Ua(e)!=="body"||AA(o))&&(a=mIe(e)),ss(e)?(l=tp(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=EA(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function bIe(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function i(o){t.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||i(o)}),r}function yIe(n){var e=bIe(n);return D9e.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function _Ie(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function wIe(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var xI={placement:"bottom",modifiers:[],strategy:"absolute"};function EI(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function kIe(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,o=i===void 0?xI:i;return function(a,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},xI,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],d=!1,h={state:c,setOptions:function(v){var b=typeof v=="function"?v(c.options):v;m(),c.options=Object.assign({},o,c.options,b),c.scrollParents={reference:Nf(a)?J0(a):a.contextElement?J0(a.contextElement):[],popper:J0(l)};var w=yIe(wIe([].concat(r,c.options.modifiers)));return c.orderedModifiers=w.filter(function(_){return _.enabled}),p(),h.update()},forceUpdate:function(){if(!d){var v=c.elements,b=v.reference,w=v.popper;if(EI(b,w)){c.rects={reference:vIe(b,t1(w),c.options.strategy==="fixed"),popper:CA(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(R){return c.modifiersData[R.name]=Object.assign({},R.data)});for(var _=0;_<c.orderedModifiers.length;_++){if(c.reset===!0){c.reset=!1,_=-1;continue}var y=c.orderedModifiers[_],k=y.fn,S=y.options,E=S===void 0?{}:S,M=y.name;typeof k=="function"&&(c=k({state:c,options:E,name:M,instance:h})||c)}}}},update:_Ie(function(){return new Promise(function(g){h.forceUpdate(),g(c)})}),destroy:function(){m(),d=!0}};if(!EI(a,l))return h;h.setOptions(u).then(function(g){!d&&u.onFirstUpdate&&u.onFirstUpdate(g)});function p(){c.orderedModifiers.forEach(function(g){var v=g.name,b=g.options,w=b===void 0?{}:b,_=g.effect;if(typeof _=="function"){var y=_({state:c,name:v,instance:h,options:w}),k=function(){};f.push(y||k)}})}function m(){f.forEach(function(g){return g()}),f=[]}return h}}var CIe=[G9e,cIe,q9e,TK,lIe,rIe,hIe,j9e,oIe],SIe=kIe({defaultModifiers:CIe}),xIe="tippy-box",LK="tippy-content",EIe="tippy-backdrop",FK="tippy-arrow",zK="tippy-svg-arrow",Rc={passive:!0,capture:!0},jK=function(){return document.body};function k3(n,e,t){if(Array.isArray(n)){var r=n[e];return r??(Array.isArray(t)?t[e]:t)}return n}function MA(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function HK(n,e){return typeof n=="function"?n.apply(void 0,e):n}function AI(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function AIe(n){return n.split(/\s+/).filter(Boolean)}function Td(n){return[].concat(n)}function MI(n,e){n.indexOf(e)===-1&&n.push(e)}function MIe(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function TIe(n){return n.split("-")[0]}function A2(n){return[].slice.call(n)}function TI(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Y0(){return document.createElement("div")}function hw(n){return["Element","Fragment"].some(function(e){return MA(n,e)})}function OIe(n){return MA(n,"NodeList")}function DIe(n){return MA(n,"MouseEvent")}function RIe(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function PIe(n){return hw(n)?[n]:OIe(n)?A2(n):Array.isArray(n)?n:A2(document.querySelectorAll(n))}function C3(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function OI(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function IIe(n){var e,t=Td(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function NIe(n,e){var t=e.clientX,r=e.clientY;return n.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,u=TIe(s.placement),c=s.modifiersData.offset;if(!c)return!0;var f=u==="bottom"?c.top.y:0,d=u==="top"?c.bottom.y:0,h=u==="right"?c.left.x:0,p=u==="left"?c.right.x:0,m=o.top-r+f>l,g=r-o.bottom-d>l,v=o.left-t+h>l,b=t-o.right-p>l;return m||g||v||b})}function S3(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){n[r](i,t)})}function DI(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var ha={isTouch:!1},RI=0;function BIe(){ha.isTouch||(ha.isTouch=!0,window.performance&&document.addEventListener("mousemove",VK))}function VK(){var n=performance.now();n-RI<20&&(ha.isTouch=!1,document.removeEventListener("mousemove",VK)),RI=n}function LIe(){var n=document.activeElement;if(RIe(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function FIe(){document.addEventListener("touchstart",BIe,Rc),window.addEventListener("blur",LIe)}var zIe=typeof window<"u"&&typeof document<"u",jIe=zIe?!!window.msCrypto:!1,HIe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},VIe={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Rs=Object.assign({appendTo:jK,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},HIe,VIe),WIe=Object.keys(Rs),qIe=function(e){var t=Object.keys(e);t.forEach(function(r){Rs[r]=e[r]})};function WK(n){var e=n.plugins||[],t=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var a;r[o]=n[o]!==void 0?n[o]:(a=Rs[o])!=null?a:s}return r},{});return Object.assign({},n,t)}function UIe(n,e){var t=e?Object.keys(WK(Object.assign({},Rs,{plugins:e}))):WIe,r=t.reduce(function(i,o){var s=(n.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function PI(n,e){var t=Object.assign({},e,{content:HK(e.content,[n])},e.ignoreAttributes?{}:UIe(n,e.plugins));return t.aria=Object.assign({},Rs.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var GIe=function(){return"innerHTML"};function z4(n,e){n[GIe()]=e}function II(n){var e=Y0();return n===!0?e.className=FK:(e.className=zK,hw(n)?e.appendChild(n):z4(e,n)),e}function NI(n,e){hw(e.content)?(z4(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?z4(n,e.content):n.textContent=e.content)}function j4(n){var e=n.firstElementChild,t=A2(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(LK)}),arrow:t.find(function(r){return r.classList.contains(FK)||r.classList.contains(zK)}),backdrop:t.find(function(r){return r.classList.contains(EIe)})}}function qK(n){var e=Y0(),t=Y0();t.className=xIe,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Y0();r.className=LK,r.setAttribute("data-state","hidden"),NI(r,n.props),e.appendChild(t),t.appendChild(r),i(n.props,n.props);function i(o,s){var a=j4(e),l=a.box,u=a.content,c=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&NI(u,n.props),s.arrow?c?o.arrow!==s.arrow&&(l.removeChild(c),l.appendChild(II(s.arrow))):l.appendChild(II(s.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:i}}qK.$$tippy=!0;var KIe=1,Nv=[],x3=[];function JIe(n,e){var t=PI(n,Object.assign({},Rs,WK(TI(e)))),r,i,o,s=!1,a=!1,l=!1,u=!1,c,f,d,h=[],p=AI(Ee,t.interactiveDebounce),m,g=KIe++,v=null,b=MIe(t.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},_={id:g,reference:n,popper:Y0(),popperInstance:v,props:t,state:w,plugins:b,clearDelayTimeouts:Pt,setProps:yt,setContent:mn,show:En,hide:Dn,hideWithInteractivity:Fn,enable:Ve,disable:ct,unmount:we,destroy:bt};if(!t.render)return _;var y=t.render(_),k=y.popper,S=y.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+_.id,_.popper=k,n._tippy=_,k._tippy=_;var E=b.map(function(ve){return ve.fn(_)}),M=n.hasAttribute("aria-expanded");return ge(),z(),V(),W("onCreate",[_]),t.showOnCreate&&it(),k.addEventListener("mouseenter",function(){_.props.interactive&&_.state.isVisible&&_.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){_.props.interactive&&_.props.trigger.indexOf("mouseenter")>=0&&A().addEventListener("mousemove",p)}),_;function R(){var ve=_.props.touch;return Array.isArray(ve)?ve:[ve,0]}function O(){return R()[0]==="hold"}function I(){var ve;return!!((ve=_.props.render)!=null&&ve.$$tippy)}function P(){return m||n}function A(){var ve=P().parentNode;return ve?IIe(ve):document}function N(){return j4(k)}function F(ve){return _.state.isMounted&&!_.state.isVisible||ha.isTouch||c&&c.type==="focus"?0:k3(_.props.delay,ve?0:1,Rs.delay)}function V(ve){ve===void 0&&(ve=!1),k.style.pointerEvents=_.props.interactive&&!ve?"":"none",k.style.zIndex=""+_.props.zIndex}function W(ve,Ge,$e){if($e===void 0&&($e=!0),E.forEach(function(ft){ft[ve]&&ft[ve].apply(ft,Ge)}),$e){var me;(me=_.props)[ve].apply(me,Ge)}}function L(){var ve=_.props.aria;if(ve.content){var Ge="aria-"+ve.content,$e=k.id,me=Td(_.props.triggerTarget||n);me.forEach(function(ft){var Gt=ft.getAttribute(Ge);if(_.state.isVisible)ft.setAttribute(Ge,Gt?Gt+" "+$e:$e);else{var mt=Gt&&Gt.replace($e,"").trim();mt?ft.setAttribute(Ge,mt):ft.removeAttribute(Ge)}})}}function z(){if(!(M||!_.props.aria.expanded)){var ve=Td(_.props.triggerTarget||n);ve.forEach(function(Ge){_.props.interactive?Ge.setAttribute("aria-expanded",_.state.isVisible&&Ge===P()?"true":"false"):Ge.removeAttribute("aria-expanded")})}}function q(){A().removeEventListener("mousemove",p),Nv=Nv.filter(function(ve){return ve!==p})}function te(ve){if(!(ha.isTouch&&(l||ve.type==="mousedown"))){var Ge=ve.composedPath&&ve.composedPath()[0]||ve.target;if(!(_.props.interactive&&DI(k,Ge))){if(Td(_.props.triggerTarget||n).some(function($e){return DI($e,Ge)})){if(ha.isTouch||_.state.isVisible&&_.props.trigger.indexOf("click")>=0)return}else W("onClickOutside",[_,ve]);_.props.hideOnClick===!0&&(_.clearDelayTimeouts(),_.hide(),a=!0,setTimeout(function(){a=!1}),_.state.isMounted||ie())}}}function re(){l=!0}function ne(){l=!1}function fe(){var ve=A();ve.addEventListener("mousedown",te,!0),ve.addEventListener("touchend",te,Rc),ve.addEventListener("touchstart",ne,Rc),ve.addEventListener("touchmove",re,Rc)}function ie(){var ve=A();ve.removeEventListener("mousedown",te,!0),ve.removeEventListener("touchend",te,Rc),ve.removeEventListener("touchstart",ne,Rc),ve.removeEventListener("touchmove",re,Rc)}function G(ve,Ge){Me(ve,function(){!_.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&Ge()})}function ae(ve,Ge){Me(ve,Ge)}function Me(ve,Ge){var $e=N().box;function me(ft){ft.target===$e&&(S3($e,"remove",me),Ge())}if(ve===0)return Ge();S3($e,"remove",f),S3($e,"add",me),f=me}function X(ve,Ge,$e){$e===void 0&&($e=!1);var me=Td(_.props.triggerTarget||n);me.forEach(function(ft){ft.addEventListener(ve,Ge,$e),h.push({node:ft,eventType:ve,handler:Ge,options:$e})})}function ge(){O()&&(X("touchstart",Ce,{passive:!0}),X("touchend",Ae,{passive:!0})),AIe(_.props.trigger).forEach(function(ve){if(ve!=="manual")switch(X(ve,Ce),ve){case"mouseenter":X("mouseleave",Ae);break;case"focus":X(jIe?"focusout":"blur",De);break;case"focusin":X("focusout",De);break}})}function U(){h.forEach(function(ve){var Ge=ve.node,$e=ve.eventType,me=ve.handler,ft=ve.options;Ge.removeEventListener($e,me,ft)}),h=[]}function Ce(ve){var Ge,$e=!1;if(!(!_.state.isEnabled||nt(ve)||a)){var me=((Ge=c)==null?void 0:Ge.type)==="focus";c=ve,m=ve.currentTarget,z(),!_.state.isVisible&&DIe(ve)&&Nv.forEach(function(ft){return ft(ve)}),ve.type==="click"&&(_.props.trigger.indexOf("mouseenter")<0||s)&&_.props.hideOnClick!==!1&&_.state.isVisible?$e=!0:it(ve),ve.type==="click"&&(s=!$e),$e&&!me&&At(ve)}}function Ee(ve){var Ge=ve.target,$e=P().contains(Ge)||k.contains(Ge);if(!(ve.type==="mousemove"&&$e)){var me=_e().concat(k).map(function(ft){var Gt,mt=ft._tippy,wt=(Gt=mt.popperInstance)==null?void 0:Gt.state;return wt?{popperRect:ft.getBoundingClientRect(),popperState:wt,props:t}:null}).filter(Boolean);NIe(me,ve)&&(q(),At(ve))}}function Ae(ve){var Ge=nt(ve)||_.props.trigger.indexOf("click")>=0&&s;if(!Ge){if(_.props.interactive){_.hideWithInteractivity(ve);return}At(ve)}}function De(ve){_.props.trigger.indexOf("focusin")<0&&ve.target!==P()||_.props.interactive&&ve.relatedTarget&&k.contains(ve.relatedTarget)||At(ve)}function nt(ve){return ha.isTouch?O()!==ve.type.indexOf("touch")>=0:!1}function ue(){Oe();var ve=_.props,Ge=ve.popperOptions,$e=ve.placement,me=ve.offset,ft=ve.getReferenceClientRect,Gt=ve.moveTransition,mt=I()?j4(k).arrow:null,wt=ft?{getBoundingClientRect:ft,contextElement:ft.contextElement||P()}:n,Yr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(rr){var on=rr.state;if(I()){var ln=N(),gn=ln.box;["placement","reference-hidden","escaped"].forEach(function(xr){xr==="placement"?gn.setAttribute("data-placement",on.placement):on.attributes.popper["data-popper-"+xr]?gn.setAttribute("data-"+xr,""):gn.removeAttribute("data-"+xr)}),on.attributes.popper={}}}},Dr=[{name:"offset",options:{offset:me}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Gt}},Yr];I()&&mt&&Dr.push({name:"arrow",options:{element:mt,padding:3}}),Dr.push.apply(Dr,(Ge==null?void 0:Ge.modifiers)||[]),_.popperInstance=SIe(wt,k,Object.assign({},Ge,{placement:$e,onFirstUpdate:d,modifiers:Dr}))}function Oe(){_.popperInstance&&(_.popperInstance.destroy(),_.popperInstance=null)}function Ue(){var ve=_.props.appendTo,Ge,$e=P();_.props.interactive&&ve===jK||ve==="parent"?Ge=$e.parentNode:Ge=HK(ve,[$e]),Ge.contains(k)||Ge.appendChild(k),_.state.isMounted=!0,ue()}function _e(){return A2(k.querySelectorAll("[data-tippy-root]"))}function it(ve){_.clearDelayTimeouts(),ve&&W("onTrigger",[_,ve]),fe();var Ge=F(!0),$e=R(),me=$e[0],ft=$e[1];ha.isTouch&&me==="hold"&&ft&&(Ge=ft),Ge?r=setTimeout(function(){_.show()},Ge):_.show()}function At(ve){if(_.clearDelayTimeouts(),W("onUntrigger",[_,ve]),!_.state.isVisible){ie();return}if(!(_.props.trigger.indexOf("mouseenter")>=0&&_.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(ve.type)>=0&&s)){var Ge=F(!1);Ge?i=setTimeout(function(){_.state.isVisible&&_.hide()},Ge):o=requestAnimationFrame(function(){_.hide()})}}function Ve(){_.state.isEnabled=!0}function ct(){_.hide(),_.state.isEnabled=!1}function Pt(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function yt(ve){if(!_.state.isDestroyed){W("onBeforeUpdate",[_,ve]),U();var Ge=_.props,$e=PI(n,Object.assign({},Ge,TI(ve),{ignoreAttributes:!0}));_.props=$e,ge(),Ge.interactiveDebounce!==$e.interactiveDebounce&&(q(),p=AI(Ee,$e.interactiveDebounce)),Ge.triggerTarget&&!$e.triggerTarget?Td(Ge.triggerTarget).forEach(function(me){me.removeAttribute("aria-expanded")}):$e.triggerTarget&&n.removeAttribute("aria-expanded"),z(),V(),S&&S(Ge,$e),_.popperInstance&&(ue(),_e().forEach(function(me){requestAnimationFrame(me._tippy.popperInstance.forceUpdate)})),W("onAfterUpdate",[_,ve])}}function mn(ve){_.setProps({content:ve})}function En(){var ve=_.state.isVisible,Ge=_.state.isDestroyed,$e=!_.state.isEnabled,me=ha.isTouch&&!_.props.touch,ft=k3(_.props.duration,0,Rs.duration);if(!(ve||Ge||$e||me)&&!P().hasAttribute("disabled")&&(W("onShow",[_],!1),_.props.onShow(_)!==!1)){if(_.state.isVisible=!0,I()&&(k.style.visibility="visible"),V(),fe(),_.state.isMounted||(k.style.transition="none"),I()){var Gt=N(),mt=Gt.box,wt=Gt.content;C3([mt,wt],0)}d=function(){var Dr;if(!(!_.state.isVisible||u)){if(u=!0,k.offsetHeight,k.style.transition=_.props.moveTransition,I()&&_.props.animation){var wi=N(),rr=wi.box,on=wi.content;C3([rr,on],ft),OI([rr,on],"visible")}L(),z(),MI(x3,_),(Dr=_.popperInstance)==null||Dr.forceUpdate(),W("onMount",[_]),_.props.animation&&I()&&ae(ft,function(){_.state.isShown=!0,W("onShown",[_])})}},Ue()}}function Dn(){var ve=!_.state.isVisible,Ge=_.state.isDestroyed,$e=!_.state.isEnabled,me=k3(_.props.duration,1,Rs.duration);if(!(ve||Ge||$e)&&(W("onHide",[_],!1),_.props.onHide(_)!==!1)){if(_.state.isVisible=!1,_.state.isShown=!1,u=!1,s=!1,I()&&(k.style.visibility="hidden"),q(),ie(),V(!0),I()){var ft=N(),Gt=ft.box,mt=ft.content;_.props.animation&&(C3([Gt,mt],me),OI([Gt,mt],"hidden"))}L(),z(),_.props.animation?I()&&G(me,_.unmount):_.unmount()}}function Fn(ve){A().addEventListener("mousemove",p),MI(Nv,p),p(ve)}function we(){_.state.isVisible&&_.hide(),_.state.isMounted&&(Oe(),_e().forEach(function(ve){ve._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),x3=x3.filter(function(ve){return ve!==_}),_.state.isMounted=!1,W("onHidden",[_]))}function bt(){_.state.isDestroyed||(_.clearDelayTimeouts(),_.unmount(),U(),delete n._tippy,_.state.isDestroyed=!0,W("onDestroy",[_]))}}function Sp(n,e){e===void 0&&(e={});var t=Rs.plugins.concat(e.plugins||[]);FIe();var r=Object.assign({},e,{plugins:t}),i=PIe(n),o=i.reduce(function(s,a){var l=a&&JIe(a,r);return l&&s.push(l),s},[]);return hw(n)?o[0]:o}Sp.defaultProps=Rs;Sp.setDefaultProps=qIe;Sp.currentInput=ha;Object.assign({},TK,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});Sp.setDefaultProps({render:qK});function YIe(n){let e,t,r,i;return{c(){e=Ti("svg"),t=Ti("path"),r=Ti("path"),C(t,"d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"),C(t,"fill","currentColor"),C(r,"d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"),C(r,"fill","currentFill"),C(e,"aria-hidden","true"),C(e,"class",i=(n[0]||"h-4 w-4")+" animate-spin fill-stone-600 text-stone-200"),C(e,"viewBox","0 0 100 101"),C(e,"fill","none"),C(e,"xmlns","http://www.w3.org/2000/svg")},m(o,s){H(o,e,s),T(e,t),T(e,r)},p(o,[s]){s&1&&i!==(i=(o[0]||"h-4 w-4")+" animate-spin fill-stone-600 text-stone-200")&&C(e,"class",i)},i:pe,o:pe,d(o){o&&j(e)}}}function XIe(n,e,t){let{dimensions:r=""}=e;return n.$$set=i=>{"dimensions"in i&&t(0,r=i.dimensions)},[r]}class QIe extends ye{constructor(e){super(),be(this,e,XIe,YIe,Be,{dimensions:0})}}function BI(n,e,t){const r=n.slice();return r[14]=e[t],r[16]=t,r}function LI(n){let e,t=[],r=new Map,i,o=n[0];const s=a=>a[16];for(let a=0;a<o.length;a+=1){let l=BI(n,o,a),u=s(l);r.set(u,t[a]=FI(u,l))}return{c(){e=B("div");for(let a=0;a<t.length;a+=1)t[a].c();C(e,"id","slash-command"),C(e,"class","z-50 h-auto max-h-[330px] w-72 overflow-y-auto rounded-md border border-stone-200 bg-white px-1 py-2 shadow-md transition-all")},m(a,l){H(a,e,l);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);n[11](e),i=!0},p(a,l){l&43&&(o=a[0],de(),t=zs(t,l,s,1,a,o,r,e,Rl,FI,null,BI),he())},i(a){if(!i){for(let l=0;l<o.length;l+=1)x(t[l]);i=!0}},o(a){for(let l=0;l<t.length;l+=1)D(t[l]);i=!1},d(a){a&&j(e);for(let l=0;l<t.length;l+=1)t[l].d();n[11](null)}}}function ZIe(n){let e,t,r;var i=n[14].icon;function o(s){return{props:{size:"18"}}}return i&&(e=Ht(i,o())),{c(){e&&$(e.$$.fragment),t=Ze()},m(s,a){e&&Q(e,s,a),H(s,t,a),r=!0},p(s,a){if(a&1&&i!==(i=s[14].icon)){if(e){de();const l=e;D(l.$$.fragment,1,0,()=>{Z(l,1)}),he()}i?(e=Ht(i,o()),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}},i(s){r||(e&&x(e.$$.fragment,s),r=!0)},o(s){e&&D(e.$$.fragment,s),r=!1},d(s){s&&j(t),e&&Z(e,s)}}}function $Ie(n){let e,t;return e=new QIe({}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p:pe,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function FI(n,e){let t,r,i,o,s,a,l,u=e[14].title+"",c,f,d,h=e[14].description+"",p,m,g,v,b,w,_;const y=[$Ie,ZIe],k=[];function S(M,R){return M[14].title==="Continue writing"&&M[3]?0:1}i=S(e),o=k[i]=y[i](e);function E(){return e[10](e[16])}return{key:n,first:null,c(){t=B("button"),r=B("div"),o.c(),s=K(),a=B("div"),l=B("p"),c=Se(u),f=K(),d=B("p"),p=Se(h),m=K(),C(r,"class","flex h-10 w-10 items-center justify-center rounded-md border border-stone-200 bg-white"),C(l,"class","font-medium"),C(d,"class","text-xs text-stone-500"),C(t,"class",g="flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm text-stone-900 hover:bg-stone-100 scroll-my-2 "+(e[16]===e[1]?"bg-stone-100 text-stone-900":"")),C(t,"data-index",v=e[16]),C(t,"type","button"),this.first=t},m(M,R){H(M,t,R),T(t,r),k[i].m(r,null),T(t,s),T(t,a),T(a,l),T(l,c),T(a,f),T(a,d),T(d,p),T(t,m),b=!0,w||(_=le(t,"click",E),w=!0)},p(M,R){e=M;let O=i;i=S(e),i===O?k[i].p(e,R):(de(),D(k[O],1,1,()=>{k[O]=null}),he(),o=k[i],o?o.p(e,R):(o=k[i]=y[i](e),o.c()),x(o,1),o.m(r,null)),(!b||R&1)&&u!==(u=e[14].title+"")&&ze(c,u),(!b||R&1)&&h!==(h=e[14].description+"")&&ze(p,h),(!b||R&3&&g!==(g="flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm text-stone-900 hover:bg-stone-100 scroll-my-2 "+(e[16]===e[1]?"bg-stone-100 text-stone-900":"")))&&C(t,"class",g),(!b||R&1&&v!==(v=e[16]))&&C(t,"data-index",v)},i(M){b||(x(o),b=!0)},o(M){D(o),b=!1},d(M){M&&j(t),k[i].d(),w=!1,_()}}}function eNe(n){let e,t,r,i,o=n[0].length>0&&LI(n);return{c(){o&&o.c(),e=Ze()},m(s,a){o&&o.m(s,a),H(s,e,a),t=!0,r||(i=le(window,"keydown",n[6]),r=!0)},p(s,[a]){s[0].length>0?o?(o.p(s,a),a&1&&x(o,1)):(o=LI(s),o.c(),x(o,1),o.m(e.parentNode,e)):o&&(de(),D(o,1,1,()=>{o=null}),he())},i(s){t||(x(o),t=!0)},o(s){D(o),t=!1},d(s){o&&o.d(s),s&&j(e),r=!1,i()}}}function tNe(n,e,t){let r,{items:i=[]}=e,{command:o}=e,{editor:s}=e,{range:a}=e,l=0;const{complete:u,isLoading:c}=iq({id:"novel",api:"/api/generate",onResponse:v=>{if(v.status===429){ag({data:{text:"You have reached your request limit for the day.",type:"error"}});return}s.chain().focus().deleteRange(a).run()},onFinish:(v,b)=>{s.commands.setTextSelection({from:a.from,to:a.from+b.length})},onError:v=>{ag({data:{text:v.message,type:"error"}})}});nn(n,c,v=>t(3,r=v));const f=v=>{const b=i[v];if(b)if(b.title==="Continue writing"){if(r)return;u(bS(s,{chars:5e3,offset:1}))}else o(b)},d=["ArrowUp","ArrowDown","Enter"],h=v=>{if(!d.includes(v.key))return;v.preventDefault(),v.key==="ArrowUp"?t(1,l=(l+i.length-1)%i.length):v.key==="ArrowDown"?t(1,l=(l+1)%i.length):v.key==="Enter"&&f(l);const b=p.querySelector(`[data-index="${l}"]`);b&&b.scrollIntoView({block:"nearest"})};let p;const m=v=>f(v);function g(v){rt[v?"unshift":"push"](()=>{p=v,t(2,p)})}return n.$$set=v=>{"items"in v&&t(0,i=v.items),"command"in v&&t(7,o=v.command),"editor"in v&&t(8,s=v.editor),"range"in v&&t(9,a=v.range)},[i,l,p,r,c,f,h,o,s,a,m,g]}class nNe extends ye{constructor(e){super(),be(this,e,tNe,eNe,Be,{items:0,command:7,editor:8,range:9})}}const rNe=Cr.create({name:"slash-command",addOptions(){return{suggestion:{char:"/",command:({editor:n,range:e,props:t})=>{t.command({editor:n,range:e})}}}},addProseMirrorPlugins(){return[y9e({editor:this.editor,...this.options.suggestion})]}}),iNe=({query:n})=>[{title:"Text",description:"Just start typing with plain text.",searchTerms:["p","paragraph"],icon:EK,command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).toggleNode("paragraph","paragraph").run()}},{title:"To-do List",description:"Track tasks with a to-do list.",searchTerms:["todo","task","list","check","checkbox"],icon:_K,command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).toggleTaskList().run()}},{title:"Heading 1",description:"Big section heading.",searchTerms:["title","big","large"],icon:kK,command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).setNode("heading",{level:1}).run()}},{title:"Heading 2",description:"Medium section heading.",searchTerms:["subtitle","medium"],icon:CK,command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).setNode("heading",{level:2}).run()}},{title:"Heading 3",description:"Small section heading.",searchTerms:["subtitle","small"],icon:SK,command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).setNode("heading",{level:3}).run()}},{title:"Bullet List",description:"Create a simple bullet list.",searchTerms:["unordered","point"],icon:x7e,command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).toggleBulletList().run()}},{title:"Numbered List",description:"Create a list with numbering.",searchTerms:["ordered"],icon:B4,command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).toggleOrderedList().run()}},{title:"Quote",description:"Capture a quote.",searchTerms:["blockquote"],icon:xK,command:({editor:e,range:t})=>e.chain().focus().deleteRange(t).toggleNode("paragraph","paragraph").toggleBlockquote().run()},{title:"Code",description:"Capture a code snippet.",searchTerms:["codeblock"],icon:yA,command:({editor:e,range:t})=>e.chain().focus().deleteRange(t).toggleCodeBlock().run()}].filter(e=>{if(typeof n=="string"&&n.length>0){const t=n.toLowerCase();return e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.searchTerms&&e.searchTerms.some(r=>r.includes(t))}return!0}),oNe=()=>{let n=null,e=null;return{onStart:t=>{const r=document.createElement("div");n=BJ(nNe,{target:r,props:t}),e=Sp("body",{getReferenceClientRect:t.clientRect,appendTo:()=>document.body,content:r,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate:t=>{n==null||n.$set(t),e&&e[0].setProps({getReferenceClientRect:t.clientRect})},onKeyDown:t=>{if(t.event.key==="Escape")return e==null||e[0].hide(),!0},onExit:()=>{e==null||e[0].destroy(),LJ(n)}}},sNe=rNe.configure({suggestion:{items:iNe,render:oNe}}),aNe=rG.extend({addAttributes(){var n;return{...(n=this.parent)==null?void 0:n.call(this),width:{default:null},height:{default:null}}}}),lNe=[_Me.configure({bulletList:{HTMLAttributes:{class:"list-disc list-outside leading-3 -mt-2"}},orderedList:{HTMLAttributes:{class:"list-decimal list-outside leading-3 -mt-2"}},listItem:{HTMLAttributes:{class:"leading-normal -mb-2"}},blockquote:{HTMLAttributes:{class:"border-l-4 border-stone-700"}},codeBlock:{HTMLAttributes:{class:"rounded-sm bg-stone-100 p-5 font-mono font-medium text-stone-800"}},code:{HTMLAttributes:{class:"rounded-md bg-stone-200 px-1.5 py-1 font-mono font-medium text-stone-900",spellcheck:"false"}},horizontalRule:!1,dropcursor:{color:"#DBEAFE",width:4},gapcursor:!1}),nG.extend({addInputRules(){return[new zg({find:/^(?:---|-|___\s|\*\*\*\s)$/,handler:({state:n,range:e})=>{const t={},{tr:r}=n,i=e.from,o=e.to;r.insert(i-1,this.type.create(t)).delete(r.mapping.map(i),r.mapping.map(o))}})]}}).configure({HTMLAttributes:{class:"mt-4 mb-6 border-t border-stone-300"}}),g8e.configure({HTMLAttributes:{class:"text-stone-400 underline underline-offset-[3px] hover:text-stone-600 transition-colors cursor-pointer"}}),rG.extend({addProseMirrorPlugins(){return[h9e()]}}).configure({allowBase64:!0,HTMLAttributes:{class:"rounded-lg border border-stone-200"}}),aNe.configure({HTMLAttributes:{class:"rounded-lg border border-stone-200"}}),v8e.configure({placeholder:({node:n})=>n.type.name==="heading"?`Heading ${n.attrs.level}`:"Press '/' for commands, or '++' for AI autocomplete...",includeChildren:!0}),sNe,w8e,VAe,WAe,GAe.configure({multicolor:!0}),_8e.configure({HTMLAttributes:{class:"not-prose pl-2"}}),y8e.configure({HTMLAttributes:{class:"flex items-start my-4"},nested:!0}),ADe.configure({html:!1,transformCopiedText:!0})],uNe={attributes:{class:"prose-lg prose-stone dark:prose-invert prose-headings:font-title font-default focus:outline-none max-w-full"},handleDOMEvents:{keydown:(n,e)=>{if(["ArrowUp","ArrowDown","Enter"].includes(e.key)&&document.querySelector("#slash-command"))return!0}},handlePaste:(n,e)=>{if(e.clipboardData&&e.clipboardData.files&&e.clipboardData.files[0]){e.preventDefault();const t=e.clipboardData.files[0],r=n.state.selection.from;return vI(t,n,r),!0}return!1},handleDrop:(n,e,t,r)=>{if(!r&&e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files[0]){e.preventDefault();const i=e.dataTransfer.files[0],o=n.posAtCoords({left:e.clientX,top:e.clientY});return vI(i,n,(o==null?void 0:o.pos)||0-1),!0}return!1}};function zI(n,e,t){const r=n.slice();return r[13]=e[t].name,r[14]=e[t].color,r[16]=t,r}function jI(n,e,t){const r=n.slice();return r[13]=e[t].name,r[14]=e[t].color,r[16]=t,r}function HI(n){let e,t;return e=new fw({props:{class:"h-4 w-4"}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function VI(n,e){let t,r,i,o,s,a=e[13]+"",l,u,c=e[1].isActive("textStyle",{color:e[14]}),f,d,h,p=c&&HI();function m(){return e[10](e[13],e[14])}return{key:n,first:null,c(){t=B("button"),r=B("div"),i=B("div"),i.textContent="A",o=K(),s=B("span"),l=Se(a),u=K(),p&&p.c(),C(i,"class","rounded-sm border border-stone-200 px-1 py-px font-medium"),sr(i,"color",e[14]),C(r,"class","flex items-center space-x-2"),C(t,"class","flex items-center justify-between rounded-sm px-2 py-1 text-sm text-stone-600 hover:bg-stone-100"),C(t,"type","button"),this.first=t},m(g,v){H(g,t,v),T(t,r),T(r,i),T(r,o),T(r,s),T(s,l),T(t,u),p&&p.m(t,null),f=!0,d||(h=le(t,"click",m),d=!0)},p(g,v){e=g,v&2&&(c=e[1].isActive("textStyle",{color:e[14]})),c?p?v&2&&x(p,1):(p=HI(),p.c(),x(p,1),p.m(t,null)):p&&(de(),D(p,1,1,()=>{p=null}),he())},i(g){f||(x(p),f=!0)},o(g){D(p),f=!1},d(g){g&&j(t),p&&p.d(),d=!1,h()}}}function WI(n){let e,t;return e=new fw({props:{class:"h-4 w-4"}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function qI(n,e){let t,r,i,o,s,a=e[13]+"",l,u,c=e[1].isActive("highlight",{color:e[14]}),f,d,h,p,m=c&&WI();function g(){return e[11](e[13],e[14])}return{key:n,first:null,c(){t=B("button"),r=B("div"),i=B("div"),i.textContent="A",o=K(),s=B("span"),l=Se(a),u=K(),m&&m.c(),f=K(),C(i,"class","rounded-sm border border-stone-200 px-1 py-px font-medium"),sr(i,"background-color",e[14]),C(r,"class","flex items-center space-x-2"),C(t,"class","flex items-center justify-between rounded-sm px-2 py-1 text-sm text-stone-600 hover:bg-stone-100"),C(t,"type","button"),this.first=t},m(v,b){H(v,t,b),T(t,r),T(r,i),T(r,o),T(r,s),T(s,l),T(t,u),m&&m.m(t,null),T(t,f),d=!0,h||(p=le(t,"click",g),h=!0)},p(v,b){e=v,b&2&&(c=e[1].isActive("highlight",{color:e[14]})),c?m?b&2&&x(m,1):(m=WI(),m.c(),x(m,1),m.m(t,f)):m&&(de(),D(m,1,1,()=>{m=null}),he())},i(v){d||(x(m),d=!0)},o(v){D(m),d=!1},d(v){v&&j(t),m&&m.d(),h=!1,p()}}}function cNe(n){let e,t,r,i,o,s,a,l,u,c,f=[],d=new Map,h,p,m,g=[],v=new Map,b,w,_;s=new wK({props:{class:"h-4 w-4"}});let y=[{type:"button"},n[2],{class:"flex h-full items-center gap-1 p-2 text-sm font-medium text-stone-600 hover:bg-stone-100 active:bg-stone-200"}],k={};for(let P=0;P<y.length;P+=1)k=Te(k,y[P]);let S=n[4];const E=P=>P[16];for(let P=0;P<S.length;P+=1){let A=jI(n,S,P),N=E(A);d.set(N,f[P]=VI(N,A))}let M=n[5];const R=P=>P[16];for(let P=0;P<M.length;P+=1){let A=zI(n,M,P),N=R(A);v.set(N,g[P]=qI(N,A))}let O=[n[3],{align:"start"},{class:"z-[99999] my-1 flex max-h-80 w-48 flex-col overflow-hidden overflow-y-auto rounded border border-stone-200 bg-white p-1 shadow-xl animate-in fade-in slide-in-from-top-1"}],I={};for(let P=0;P<O.length;P+=1)I=Te(I,O[P]);return{c(){var P,A;e=B("div"),t=B("div"),r=B("button"),i=B("span"),i.textContent="A",o=K(),$(s.$$.fragment),a=K(),l=B("div"),u=B("div"),u.textContent="Color",c=K();for(let N=0;N<f.length;N+=1)f[N].c();h=K(),p=B("div"),p.textContent="Background",m=K();for(let N=0;N<g.length;N+=1)g[N].c();C(i,"class","rounded-sm px-1"),sr(i,"color",(P=n[6])==null?void 0:P.color),sr(i,"background-color",(A=n[7])==null?void 0:A.color),Gn(r,k),C(u,"class","my-1 px-2 text-sm text-stone-500"),C(p,"class","mb-1 mt-2 px-2 text-sm text-stone-500"),Gn(l,I),C(t,"class","relative h-full")},m(P,A){H(P,e,A),T(e,t),T(t,r),T(r,i),T(r,o),Q(s,r,null),r.autofocus&&r.focus(),T(t,a),T(t,l),T(l,u),T(l,c);for(let N=0;N<f.length;N+=1)f[N]&&f[N].m(l,null);T(l,h),T(l,p),T(l,m);for(let N=0;N<g.length;N+=1)g[N]&&g[N].m(l,null);b=!0,w||(_=[Mn(n[2].action(r)),Mn(n[3].action(l))],w=!0)},p(P,[A]){Gn(r,k=Ot(y,[{type:"button"},A&4&&P[2],{class:"flex h-full items-center gap-1 p-2 text-sm font-medium text-stone-600 hover:bg-stone-100 active:bg-stone-200"}])),A&19&&(S=P[4],de(),f=zs(f,A,E,1,P,S,d,l,Rl,VI,h,jI),he()),A&35&&(M=P[5],de(),g=zs(g,A,R,1,P,M,v,l,Rl,qI,null,zI),he()),Gn(l,I=Ot(O,[A&8&&P[3],{align:"start"},{class:"z-[99999] my-1 flex max-h-80 w-48 flex-col overflow-hidden overflow-y-auto rounded border border-stone-200 bg-white p-1 shadow-xl animate-in fade-in slide-in-from-top-1"}]))},i(P){if(!b){x(s.$$.fragment,P);for(let A=0;A<S.length;A+=1)x(f[A]);for(let A=0;A<M.length;A+=1)x(g[A]);b=!0}},o(P){D(s.$$.fragment,P);for(let A=0;A<f.length;A+=1)D(f[A]);for(let A=0;A<g.length;A+=1)D(g[A]);b=!1},d(P){P&&j(e),Z(s);for(let A=0;A<f.length;A+=1)f[A].d();for(let A=0;A<g.length;A+=1)g[A].d();w=!1,It(_)}}}function fNe(n,e,t){let r,i,{editor:o}=e,{isOpen:s}=e;const a=[{name:"Default",color:"var(--novel-black)"},{name:"Purple",color:"#9333EA"},{name:"Red",color:"#E00000"},{name:"Yellow",color:"#EAB308"},{name:"Blue",color:"#2563EB"},{name:"Green",color:"#008A00"},{name:"Orange",color:"#FFA500"},{name:"Pink",color:"#BA4081"},{name:"Gray",color:"#A8A29E"}],l=[{name:"Default",color:"var(--novel-highlight-default)"},{name:"Purple",color:"var(--novel-highlight-purple)"},{name:"Red",color:"var(--novel-highlight-red)"},{name:"Yellow",color:"var(--novel-highlight-yellow)"},{name:"Blue",color:"var(--novel-highlight-blue)"},{name:"Green",color:"var(--novel-highlight-green)"},{name:"Orange",color:"var(--novel-highlight-orange)"},{name:"Pink",color:"var(--novel-highlight-pink)"},{name:"Gray",color:"var(--novel-highlight-gray)"}],u=a.find(({color:g})=>o.isActive("textStyle",{color:g})),c=l.find(({color:g})=>o.isActive("highlight",{color:g})),{elements:{trigger:f,content:d},states:{open:h}}=yK({defaultOpen:s,onOpenChange({next:g}){return t(0,s=g),g}});nn(n,f,g=>t(2,r=g)),nn(n,d,g=>t(3,i=g));const p=(g,v)=>{o.commands.unsetColor(),g!=="Default"&&o.chain().focus().setColor(v||"").run(),t(0,s=!1)},m=(g,v)=>{o.commands.unsetHighlight(),g!=="Default"&&o.commands.setHighlight({color:v}),t(0,s=!1)};return n.$$set=g=>{"editor"in g&&t(1,o=g.editor),"isOpen"in g&&t(0,s=g.isOpen)},n.$$.update=()=>{n.$$.dirty&1&&h.set(s)},[s,o,r,i,a,l,u,c,f,d,p,m]}class dNe extends ye{constructor(e){super(),be(this,e,fNe,cNe,Be,{editor:1,isOpen:0})}}function UI(n){let e,t,r,i,o,s,a,l,u,c;const f=[pNe,hNe],d=[];function h(p,m){return m&2&&(o=null),o==null&&(o=!!p[1].getAttributes("link").href),o?0:1}return s=h(n,-1),a=d[s]=f[s](n),{c(){e=B("form"),t=B("input"),i=K(),a.c(),t.autofocus=!0,C(t,"type","text"),C(t,"placeholder","Paste a link"),C(t,"class","flex-1 bg-white p-1 text-sm outline-none"),t.value=r=n[1].getAttributes("link").href||"",C(e,"class","fixed top-full z-[99999] mt-1 flex w-60 overflow-hidden rounded border border-stone-200 bg-white p-1 shadow-xl animate-in fade-in slide-in-from-top-1")},m(p,m){H(p,e,m),T(e,t),n[4](t),T(e,i),d[s].m(e,null),l=!0,t.focus(),u||(c=le(e,"submit",n[6]),u=!0)},p(p,m){(!l||m&2&&r!==(r=p[1].getAttributes("link").href||"")&&t.value!==r)&&(t.value=r);let g=s;s=h(p,m),s===g?d[s].p(p,m):(de(),D(d[g],1,1,()=>{d[g]=null}),he(),a=d[s],a?a.p(p,m):(a=d[s]=f[s](p),a.c()),x(a,1),a.m(e,null))},i(p){l||(x(a),l=!0)},o(p){D(a),l=!1},d(p){p&&j(e),n[4](null),d[s].d(),u=!1,c()}}}function hNe(n){let e,t,r;return t=new fw({props:{class:"h-4 w-4"}}),{c(){e=B("button"),$(t.$$.fragment),C(e,"class","flex items-center rounded-sm p-1 text-stone-600 transition-all hover:bg-stone-100")},m(i,o){H(i,e,o),Q(t,e,null),r=!0},p:pe,i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&j(e),Z(t)}}}function pNe(n){let e,t,r,i,o;return t=new J7e({props:{class:"h-4 w-4"}}),{c(){e=B("button"),$(t.$$.fragment),C(e,"type","button"),C(e,"class","flex items-center rounded-sm p-1 text-red-600 transition-all hover:bg-red-100 dark:hover:bg-red-800")},m(s,a){H(s,e,a),Q(t,e,null),r=!0,i||(o=le(e,"click",n[5]),i=!0)},p:pe,i(s){r||(x(t.$$.fragment,s),r=!0)},o(s){D(t.$$.fragment,s),r=!1},d(s){s&&j(e),Z(t),i=!1,o()}}}function mNe(n){let e,t,r,i,o,s,a,l,u,c,f,d=n[0]&&UI(n);return{c(){e=B("div"),t=B("button"),r=B("p"),r.textContent="",i=K(),o=B("p"),s=Se("Link"),l=K(),d&&d.c(),C(r,"class","text-base"),C(o,"class",a=wS("underline decoration-stone-400 underline-offset-4",{"text-blue-500":n[1].isActive("link")})),C(t,"type","button"),C(t,"class","flex h-full items-center space-x-2 px-3 py-1.5 text-sm font-medium text-stone-600 hover:bg-stone-100 active:bg-stone-200"),C(e,"class","relative")},m(h,p){H(h,e,p),T(e,t),T(t,r),T(t,i),T(t,o),T(o,s),T(e,l),d&&d.m(e,null),u=!0,c||(f=le(t,"click",n[3]),c=!0)},p(h,[p]){(!u||p&2&&a!==(a=wS("underline decoration-stone-400 underline-offset-4",{"text-blue-500":h[1].isActive("link")})))&&C(o,"class",a),h[0]?d?(d.p(h,p),p&1&&x(d,1)):(d=UI(h),d.c(),x(d,1),d.m(e,null)):d&&(de(),D(d,1,1,()=>{d=null}),he())},i(h){u||(x(d),u=!0)},o(h){D(d),u=!1},d(h){h&&j(e),d&&d.d(),c=!1,f()}}}function gNe(n,e,t){let{editor:r}=e,{isOpen:i}=e,o;const s=()=>{t(0,i=!i)};function a(c){rt[c?"unshift":"push"](()=>{o=c,t(2,o)})}const l=()=>{r.chain().focus().unsetLink().run(),t(0,i=!1)},u=c=>{c.preventDefault();const f=c.target[0],d=J_e(f.value);d&&r.chain().focus().setLink({href:d}).run(),t(0,i=!1)};return n.$$set=c=>{"editor"in c&&t(1,r=c.editor),"isOpen"in c&&t(0,i=c.isOpen)},[i,r,o,s,a,l,u]}class vNe extends ye{constructor(e){super(),be(this,e,gNe,mNe,Be,{editor:1,isOpen:0})}}function GI(n,e,t){const r=n.slice();return r[10]=e[t],r[12]=t,r}function KI(n){let e,t;return e=new fw({props:{class:"h-4 w-4"}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function JI(n,e){let t,r,i,o,s,a,l=e[10].name+"",u,c,f,d,h,p;var m=e[10].icon;function g(w){return{props:{class:"h-3 w-3"}}}m&&(o=Ht(m,g()));let v=e[2].name===e[10].name&&KI();function b(){return e[8](e[10])}return{key:n,first:null,c(){t=B("button"),r=B("div"),i=B("div"),o&&$(o.$$.fragment),s=K(),a=B("span"),u=Se(l),c=K(),v&&v.c(),f=K(),C(i,"class","rounded-sm border border-stone-200 p-1"),C(r,"class","flex items-center space-x-2"),C(t,"class","flex items-center justify-between rounded-sm px-2 py-1 text-sm text-stone-600 hover:bg-stone-100"),C(t,"type","button"),this.first=t},m(w,_){H(w,t,_),T(t,r),T(r,i),o&&Q(o,i,null),T(r,s),T(r,a),T(a,u),T(t,c),v&&v.m(t,null),T(t,f),d=!0,h||(p=le(t,"click",b),h=!0)},p(w,_){if(e=w,_&2&&m!==(m=e[10].icon)){if(o){de();const y=o;D(y.$$.fragment,1,0,()=>{Z(y,1)}),he()}m?(o=Ht(m,g()),$(o.$$.fragment),x(o.$$.fragment,1),Q(o,i,null)):o=null}(!d||_&2)&&l!==(l=e[10].name+"")&&ze(u,l),e[2].name===e[10].name?v?_&6&&x(v,1):(v=KI(),v.c(),x(v,1),v.m(t,f)):v&&(de(),D(v,1,1,()=>{v=null}),he())},i(w){d||(o&&x(o.$$.fragment,w),x(v),d=!0)},o(w){o&&D(o.$$.fragment,w),D(v),d=!1},d(w){w&&j(t),o&&Z(o),v&&v.d(),h=!1,p()}}}function bNe(n){var k;let e,t,r,i,o=((k=n[2])==null?void 0:k.name)+"",s,a,l,u,c,f=[],d=new Map,h,p,m;l=new wK({props:{class:"h-4 w-4"}});let g=[n[3],{class:"flex h-full items-center gap-1 whitespace-nowrap p-2 text-sm font-medium text-stone-600 hover:bg-stone-100 active:bg-stone-200"},{type:"button"}],v={};for(let S=0;S<g.length;S+=1)v=Te(v,g[S]);let b=n[1];const w=S=>S[12];for(let S=0;S<b.length;S+=1){let E=GI(n,b,S),M=w(E);d.set(M,f[S]=JI(M,E))}let _=[n[4],{align:"start"},{class:"z-[99999] my-1 flex max-h-80 w-48 flex-col overflow-hidden overflow-y-auto rounded border border-stone-200 bg-white p-1 shadow-xl animate-in fade-in slide-in-from-top-1"}],y={};for(let S=0;S<_.length;S+=1)y=Te(y,_[S]);return{c(){e=B("div"),t=B("div"),r=B("button"),i=B("span"),s=Se(o),a=K(),$(l.$$.fragment),u=K(),c=B("div");for(let S=0;S<f.length;S+=1)f[S].c();Gn(r,v),Gn(c,y),C(t,"class","relative h-full")},m(S,E){H(S,e,E),T(e,t),T(t,r),T(r,i),T(i,s),T(r,a),Q(l,r,null),r.autofocus&&r.focus(),T(t,u),T(t,c);for(let M=0;M<f.length;M+=1)f[M]&&f[M].m(c,null);h=!0,p||(m=[Mn(n[3].action(r)),Mn(n[4].action(c))],p=!0)},p(S,[E]){var M;(!h||E&4)&&o!==(o=((M=S[2])==null?void 0:M.name)+"")&&ze(s,o),Gn(r,v=Ot(g,[E&8&&S[3],{class:"flex h-full items-center gap-1 whitespace-nowrap p-2 text-sm font-medium text-stone-600 hover:bg-stone-100 active:bg-stone-200"},{type:"button"}])),E&7&&(b=S[1],de(),f=zs(f,E,w,1,S,b,d,c,Rl,JI,null,GI),he()),Gn(c,y=Ot(_,[E&16&&S[4],{align:"start"},{class:"z-[99999] my-1 flex max-h-80 w-48 flex-col overflow-hidden overflow-y-auto rounded border border-stone-200 bg-white p-1 shadow-xl animate-in fade-in slide-in-from-top-1"}]))},i(S){if(!h){x(l.$$.fragment,S);for(let E=0;E<b.length;E+=1)x(f[E]);h=!0}},o(S){D(l.$$.fragment,S);for(let E=0;E<f.length;E+=1)D(f[E]);h=!1},d(S){S&&j(e),Z(l);for(let E=0;E<f.length;E+=1)f[E].d();p=!1,It(m)}}}function yNe(n,e,t){let r,i,o,s,{editor:a}=e,{isOpen:l}=e;const{elements:{trigger:u,content:c},states:{open:f}}=yK({defaultOpen:l,onOpenChange({next:h}){return t(0,l=h),h}});nn(n,u,h=>t(3,o=h)),nn(n,c,h=>t(4,s=h));const d=h=>{h.command(),t(0,l=!1)};return n.$$set=h=>{"editor"in h&&t(7,a=h.editor),"isOpen"in h&&t(0,l=h.isOpen)},n.$$.update=()=>{n.$$.dirty&128&&t(1,r=[{name:"Text",icon:EK,command:()=>a.chain().focus().toggleNode("paragraph","paragraph").run(),isActive:a.isActive("paragraph")&&!a.isActive("bulletList")&&!a.isActive("orderedList")},{name:"Heading 1",icon:kK,command:()=>a.chain().focus().toggleHeading({level:1}).run(),isActive:a.isActive("heading",{level:1})},{name:"Heading 2",icon:CK,command:()=>a.chain().focus().toggleHeading({level:2}).run(),isActive:a.isActive("heading",{level:2})},{name:"Heading 3",icon:SK,command:()=>a.chain().focus().toggleHeading({level:3}).run(),isActive:a.isActive("heading",{level:3})},{name:"To-do List",icon:_K,command:()=>a.chain().focus().toggleTaskList().run(),isActive:a.isActive("taskItem")},{name:"Bullet List",icon:B4,command:()=>a.chain().focus().toggleBulletList().run(),isActive:a.isActive("bulletList")},{name:"Numbered List",icon:B4,command:()=>a.chain().focus().toggleOrderedList().run(),isActive:a.isActive("orderedList")},{name:"Quote",icon:xK,command:()=>a.chain().focus().toggleNode("paragraph","paragraph").toggleBlockquote().run(),isActive:a.isActive("blockquote")},{name:"Code",icon:yA,command:()=>a.chain().focus().toggleCodeBlock().run(),isActive:a.isActive("codeBlock")}]),n.$$.dirty&2&&t(2,i=r.filter(h=>h.isActive).pop()??{name:"Multiple"}),n.$$.dirty&1&&f.set(l)},[l,r,i,o,s,u,c,a,d]}class _Ne extends ye{constructor(e){super(),be(this,e,yNe,bNe,Be,{editor:7,isOpen:0})}}class wNe{constructor({editor:e,element:t,view:r,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:u,to:c})=>{const{doc:f,selection:d}=l,{empty:h}=d,p=!f.textBetween(u,c).length&&oE(l.selection),m=this.element.contains(document.activeElement);return!(!(a.hasFocus()||m)||h||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||(a==null?void 0:a.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const u=!(l!=null&&l.selection.eq(a.state.selection)),c=!(l!=null&&l.doc.eq(a.state.doc));!u&&!c||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,u,c,l)},this.updateDelay))},this.updateHandler=(a,l,u,c)=>{var f,d,h;const{state:p,composing:m}=a,{selection:g}=p;if(m||!l&&!u)return;this.createTooltip();const{ranges:b}=g,w=Math.min(...b.map(k=>k.$from.pos)),_=Math.max(...b.map(k=>k.$to.pos));if(!((f=this.shouldShow)===null||f===void 0?void 0:f.call(this,{editor:this.editor,element:this.element,view:a,state:p,oldState:c,from:w,to:_}))){this.hide();return}(d=this.tippy)===null||d===void 0||d.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(qW(p.selection)){let k=a.nodeDOM(w);if(k){const S=k.dataset.nodeViewWrapper?k:k.querySelector("[data-node-view-wrapper]");if(S&&(k=S.firstChild),k)return k.getBoundingClientRect()}}return bSe(a,w,_)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=Sp(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,t);return}const o=!(t!=null&&t.selection.eq(e.state.selection)),s=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,o,s,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const UK=n=>new Sr({key:typeof n.pluginKey=="string"?new si(n.pluginKey):n.pluginKey,view:e=>new wNe({view:e,...n})});Cr.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[UK({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function YI(n,e,t){const r=n.slice();return r[18]=e[t],r[20]=t,r}function XI(n,e){let t,r,i,o,s,a;var l=e[18].icon;function u(c){return{props:{class:wS("h-4 w-4",{"text-blue-500":c[18].isActive()})}}}return l&&(r=Ht(l,u(e))),{key:n,first:null,c(){t=B("button"),r&&$(r.$$.fragment),i=K(),C(t,"class","p-2 text-stone-600 hover:bg-stone-100 active:bg-stone-200"),C(t,"type","button"),this.first=t},m(c,f){H(c,t,f),r&&Q(r,t,null),T(t,i),o=!0,s||(a=le(t,"click",e[18].command),s=!0)},p(c,f){if(e=c,l!==(l=e[18].icon)){if(r){de();const d=r;D(d.$$.fragment,1,0,()=>{Z(d,1)}),he()}l?(r=Ht(l,u(e)),$(r.$$.fragment),x(r.$$.fragment,1),Q(r,t,i)):r=null}},i(c){o||(r&&x(r.$$.fragment,c),o=!0)},o(c){r&&D(r.$$.fragment,c),o=!1},d(c){c&&j(t),r&&Z(r),s=!1,a()}}}function kNe(n){let e,t,r,i,o,s,a,l,u=[],c=new Map,f,d,h,p;function m(S){n[13](S)}let g={editor:n[0]};n[3]!==void 0&&(g.isOpen=n[3]),t=new _Ne({props:g}),rt.push(()=>fr(t,"isOpen",m));function v(S){n[14](S)}let b={editor:n[0]};n[1]!==void 0&&(b.isOpen=n[1]),o=new vNe({props:b}),rt.push(()=>fr(o,"isOpen",v));let w=n[8];const _=S=>S[20];for(let S=0;S<w.length;S+=1){let E=YI(n,w,S),M=_(E);c.set(M,u[S]=XI(M,E))}function y(S){n[15](S)}let k={editor:n[0]};return n[2]!==void 0&&(k.isOpen=n[2]),d=new dNe({props:k}),rt.push(()=>fr(d,"isOpen",y)),{c(){e=B("div"),$(t.$$.fragment),i=K(),$(o.$$.fragment),a=K(),l=B("div");for(let S=0;S<u.length;S+=1)u[S].c();f=K(),$(d.$$.fragment),C(l,"class","flex"),C(e,"class","flex w-fit divide-x divide-stone-200 rounded border border-stone-200 bg-white shadow-xl")},m(S,E){H(S,e,E),Q(t,e,null),T(e,i),Q(o,e,null),T(e,a),T(e,l);for(let M=0;M<u.length;M+=1)u[M]&&u[M].m(l,null);T(e,f),Q(d,e,null),n[16](e),p=!0},p(S,[E]){const M={};E&1&&(M.editor=S[0]),!r&&E&8&&(r=!0,M.isOpen=S[3],cr(()=>r=!1)),t.$set(M);const R={};E&1&&(R.editor=S[0]),!s&&E&2&&(s=!0,R.isOpen=S[1],cr(()=>s=!1)),o.$set(R),E&256&&(w=S[8],de(),u=zs(u,E,_,1,S,w,c,l,Rl,XI,null,YI),he());const O={};E&1&&(O.editor=S[0]),!h&&E&4&&(h=!0,O.isOpen=S[2],cr(()=>h=!1)),d.$set(O)},i(S){if(!p){x(t.$$.fragment,S),x(o.$$.fragment,S);for(let E=0;E<w.length;E+=1)x(u[E]);x(d.$$.fragment,S),p=!0}},o(S){D(t.$$.fragment,S),D(o.$$.fragment,S);for(let E=0;E<u.length;E+=1)D(u[E]);D(d.$$.fragment,S),p=!1},d(S){S&&j(e),Z(t),Z(o);for(let E=0;E<u.length;E+=1)u[E].d();Z(d),n[16](null)}}}function CNe(n,e,t){let r,i,o,s,a=Bn(!1);nn(n,a,y=>t(3,o=y));let l=Bn(!1);nn(n,l,y=>t(2,i=y));let u=Bn(!1);nn(n,u,y=>t(1,r=y));let{editor:c}=e,{tippyOptions:f={moveTransition:"transform 0.15s ease-out",onHidden:()=>{a.set(!1),l.set(!1),u.set(!1)}}}=e,{pluginKey:d="SvelteTiptapBubbleMenu"}=e,{shouldShow:h=({editor:y})=>y.isActive("image")?!1:y.view.state.selection.content().size>0}=e,{updateDelay:p=250}=e;const m=[{name:"bold",isActive:()=>c.isActive("bold"),command:()=>c.chain().focus().toggleBold().run(),icon:RPe},{name:"italic",isActive:()=>c.isActive("italic"),command:()=>c.chain().focus().toggleItalic().run(),icon:g7e},{name:"underline",isActive:()=>c.isActive("underline"),command:()=>c.chain().focus().toggleUnderline().run(),icon:$7e},{name:"strike",isActive:()=>c.isActive("strike"),command:()=>c.chain().focus().toggleStrike().run(),icon:N7e},{name:"code",isActive:()=>c.isActive("code"),command:()=>c.chain().focus().toggleCode().run(),icon:yA}],g=()=>{a.set(!1),l.set(!1),u.set(!1)};if(!c)throw new Error("Missing editor instance.");Tn(()=>{const y=UK({pluginKey:d,editor:c,element:s,tippyOptions:f,shouldShow:h,updateDelay:p});c.registerPlugin(y)}),Kr(()=>{c.unregisterPlugin(d)});function v(y){o=y,a.set(o)}function b(y){r=y,u.set(r)}function w(y){i=y,l.set(i)}function _(y){rt[y?"unshift":"push"](()=>{s=y,t(4,s)})}return n.$$set=y=>{"editor"in y&&t(0,c=y.editor),"tippyOptions"in y&&t(9,f=y.tippyOptions),"pluginKey"in y&&t(10,d=y.pluginKey),"shouldShow"in y&&t(11,h=y.shouldShow),"updateDelay"in y&&t(12,p=y.updateDelay)},n.$$.update=()=>{n.$$.dirty&8&&(o||g()),n.$$.dirty&4&&(i||g()),n.$$.dirty&2&&(r||g())},[c,r,i,o,s,a,l,u,m,f,d,h,p,v,b,w,_]}class SNe extends ye{constructor(e){super(),be(this,e,CNe,kNe,Be,{editor:0,tippyOptions:9,pluginKey:10,shouldShow:11,updateDelay:12})}}function QI(n){let e,t;return e=new SNe({props:{editor:n[0]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.editor=r[0]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function ZI(n){let e,t;return e=new zAe({props:{editor:n[0]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.editor=r[0]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function xNe(n){var d;let e,t,r,i=(d=n[0])==null?void 0:d.isActive("image"),o,s,a,l=n[0]&&n[0].isEditable&&QI(n);const u=n[21].default,c=Je(u,n,n[20],null);let f=i&&ZI(n);return s=new d9e({}),{c(){l&&l.c(),e=K(),t=B("div"),c&&c.c(),r=K(),f&&f.c(),o=K(),$(s.$$.fragment),C(t,"id","editor"),C(t,"class",n[1])},m(h,p){l&&l.m(h,p),H(h,e,p),H(h,t,p),c&&c.m(t,null),T(t,r),f&&f.m(t,null),n[22](t),H(h,o,p),Q(s,h,p),a=!0},p(h,[p]){var m;h[0]&&h[0].isEditable?l?(l.p(h,p),p&1&&x(l,1)):(l=QI(h),l.c(),x(l,1),l.m(e.parentNode,e)):l&&(de(),D(l,1,1,()=>{l=null}),he()),c&&c.p&&(!a||p&1048576)&&Xe(c,u,h,h[20],a?Ye(u,h[20],p,null):Qe(h[20]),null),p&1&&(i=(m=h[0])==null?void 0:m.isActive("image")),i?f?(f.p(h,p),p&1&&x(f,1)):(f=ZI(h),f.c(),x(f,1),f.m(t,null)):f&&(de(),D(f,1,1,()=>{f=null}),he()),(!a||p&2)&&C(t,"class",h[1])},i(h){a||(x(l),x(c,h),x(f),x(s.$$.fragment,h),a=!0)},o(h){D(l),D(c,h),D(f),D(s.$$.fragment,h),a=!1},d(h){l&&l.d(h),h&&j(e),h&&j(t),c&&c.d(h),f&&f.d(),n[22](null),h&&j(o),Z(s,h)}}}function ENe(n,e,t){let r,i,o,{$$slots:s={},$$scope:a}=e,{completionApi:l="/api/generate"}=e,{class:u="relative min-h-[500px] w-full max-w-screen-lg border-stone-200 bg-white p-12 pb-24 sm:pb-12 px-8 sm:mb-[calc(20vh)] sm:rounded-lg sm:border sm:px-12 sm:shadow-lg"}=e,{defaultValue:c=jAe}=e,{extensions:f=[]}=e,{editorProps:d={}}=e,{onUpdate:h=lP}=e,{onDebouncedUpdate:p=lP}=e,{debounceDuration:m=750}=e,{storageKey:g="novel__content"}=e,{disableLocalStorage:v=!1}=e,{isEditable:b=!0}=e,{autofocus:w=!1}=e,{editor:_=void 0}=e,y;const{complete:k,completion:S,isLoading:E,stop:M}=iq({id:"novel",api:l,onFinish:(F,V)=>{_==null||_.commands.setTextSelection({from:_.state.selection.from-V.length,to:_.state.selection.from})},onError:F=>{ag({data:{text:F.message,type:"error"}})}});nn(n,S,F=>t(18,i=F)),nn(n,E,F=>t(24,r=F));const R=X_e(g,c);nn(n,R,F=>t(19,o=F));let O=!1,I="";function P(){const F=i.slice(I.length);I=i,_==null||_.commands.insertContent(F)}const A=Y_e(async({editor:F})=>{if(!v){const V=F.getJSON();R.set(V)}p(F)},m);Tn(()=>(t(0,_=new VSe({element:y,onTransaction:()=>{t(0,_)},extensions:[...lNe,...f],editorProps:{...uNe,...d},onUpdate:F=>{const V=F.editor.state.selection;bS(F.editor,{chars:2})==="++"&&!r?(F.editor.commands.deleteRange({from:V.from-2,to:V.from}),k(bS(F.editor,{chars:5e3}))):(h(F.editor),A(F))},autofocus:w})),b||_.setEditable(!1),()=>_.destroy()));function N(F){rt[F?"unshift":"push"](()=>{y=F,t(2,y)})}return n.$$set=F=>{"completionApi"in F&&t(6,l=F.completionApi),"class"in F&&t(1,u=F.class),"defaultValue"in F&&t(7,c=F.defaultValue),"extensions"in F&&t(8,f=F.extensions),"editorProps"in F&&t(9,d=F.editorProps),"onUpdate"in F&&t(10,h=F.onUpdate),"onDebouncedUpdate"in F&&t(11,p=F.onDebouncedUpdate),"debounceDuration"in F&&t(12,m=F.debounceDuration),"storageKey"in F&&t(13,g=F.storageKey),"disableLocalStorage"in F&&t(14,v=F.disableLocalStorage),"isEditable"in F&&t(15,b=F.isEditable),"autofocus"in F&&t(16,w=F.autofocus),"editor"in F&&t(0,_=F.editor),"$$scope"in F&&t(20,a=F.$$scope)},n.$$.update=()=>{if(n.$$.dirty&671873&&_&&!O){const F=v?c:o;F&&_.commands.setContent(F),t(17,O=!0)}n.$$.dirty&262144&&P()},[_,u,y,S,E,R,l,c,f,d,h,p,m,g,v,b,w,O,i,o,a,s,N]}class ANe extends ye{constructor(e){super(),be(this,e,ENe,xNe,Be,{completionApi:6,class:1,defaultValue:7,extensions:8,editorProps:9,onUpdate:10,onDebouncedUpdate:11,debounceDuration:12,storageKey:13,disableLocalStorage:14,isEditable:15,autofocus:16,editor:0})}}function MNe(n){let e,t;return e=new ANe({props:{defaultValue:n[0],isEditable:!n[1],disableLocalStorage:!0,onUpdate:n[2]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.defaultValue=r[0]),i&2&&(o.isEditable=!r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function TNe(n,e,t){let{html:r=""}=e,{readOnly:i=!1}=e;const o=s=>{t(0,r=s.getHTML())};return n.$$set=s=>{"html"in s&&t(0,r=s.html),"readOnly"in s&&t(1,i=s.readOnly)},[r,i,o]}class ONe extends ye{constructor(e){super(),be(this,e,TNe,MNe,Be,{html:0,readOnly:1})}}function DNe(){const n=console.warn;console.warn=e=>{e.includes("unknown prop")||e.includes("unexpected slot")||n(e)},Tn(()=>{console.warn=n})}function $I(n,e,t){const r=n.slice();return r[18]=e[t],r}function eN(n,e,t){const r=n.slice();return r[18]=e[t],r}function tN(n,e,t){const r=n.slice();return r[10]=e[t],r}function nN(n,e,t){const r=n.slice();return r[13]=e[t],r[15]=t,r}function rN(n,e,t){const r=n.slice();return r[16]=e[t],r[15]=t,r}function iN(n,e,t){const r=n.slice();return r[7]=e[t],r}function RNe(n){let e,t,r,i;const o=[BNe,NNe,INe],s=[];function a(l,u){return l[0]==="table"?0:l[0]==="list"?1:2}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=Ze()},m(l,u){s[e].m(l,u),H(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?s[e].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r))},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){s[e].d(l),l&&j(r)}}}function PNe(n){let e,t,r=n[1],i=[];for(let s=0;s<r.length;s+=1)i[s]=cN(iN(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a&34){r=s[1];let l;for(l=0;l<r.length;l+=1){const u=iN(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=cN(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function INe(n){let e,t,r;const i=[n[6]];var o=n[5][n[0]];function s(a){let l={$$slots:{default:[zNe]},$$scope:{ctx:a}};for(let u=0;u<i.length;u+=1)l=Te(l,i[u]);return{props:l}}return o&&(e=Ht(o,s(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(a,l){e&&Q(e,a,l),H(a,t,l),r=!0},p(a,l){const u=l&64?Ot(i,[an(a[6])]):{};if(l&8388706&&(u.$$scope={dirty:l,ctx:a}),l&33&&o!==(o=a[5][a[0]])){if(e){de();const c=e;D(c.$$.fragment,1,0,()=>{Z(c,1)}),he()}o?(e=Ht(o,s(a)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&x(e.$$.fragment,a),r=!0)},o(a){e&&D(e.$$.fragment,a),r=!1},d(a){a&&j(t),e&&Z(e,a)}}}function NNe(n){let e,t,r,i;const o=[HNe,jNe],s=[];function a(l,u){return l[4]?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=Ze()},m(l,u){s[e].m(l,u),H(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?s[e].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r))},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){s[e].d(l),l&&j(r)}}}function BNe(n){let e,t,r;var i=n[5].table;function o(s){return{props:{$$slots:{default:[ZNe]},$$scope:{ctx:s}}}}return i&&(e=Ht(i,o(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(s,a){e&&Q(e,s,a),H(s,t,a),r=!0},p(s,a){const l={};if(a&8388716&&(l.$$scope={dirty:a,ctx:s}),a&32&&i!==(i=s[5].table)){if(e){de();const u=e;D(u.$$.fragment,1,0,()=>{Z(u,1)}),he()}i?(e=Ht(i,o(s)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&x(e.$$.fragment,s),r=!0)},o(s){e&&D(e.$$.fragment,s),r=!1},d(s){s&&j(t),e&&Z(e,s)}}}function LNe(n){let e=n[6].raw+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&64&&e!==(e=r[6].raw+"")&&ze(t,e)},i:pe,o:pe,d(r){r&&j(t)}}}function FNe(n){let e,t;return e=new Jf({props:{tokens:n[1],renderers:n[5]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&2&&(o.tokens=r[1]),i&32&&(o.renderers=r[5]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function zNe(n){let e,t,r,i;const o=[FNe,LNe],s=[];function a(l,u){return l[1]?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=Ze()},m(l,u){s[e].m(l,u),H(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?s[e].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r))},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){s[e].d(l),l&&j(r)}}}function jNe(n){let e,t,r;const i=[{ordered:n[4]},n[6]];var o=n[5].list;function s(a){let l={$$slots:{default:[WNe]},$$scope:{ctx:a}};for(let u=0;u<i.length;u+=1)l=Te(l,i[u]);return{props:l}}return o&&(e=Ht(o,s(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(a,l){e&&Q(e,a,l),H(a,t,l),r=!0},p(a,l){const u=l&80?Ot(i,[l&16&&{ordered:a[4]},l&64&&an(a[6])]):{};if(l&8388704&&(u.$$scope={dirty:l,ctx:a}),l&32&&o!==(o=a[5].list)){if(e){de();const c=e;D(c.$$.fragment,1,0,()=>{Z(c,1)}),he()}o?(e=Ht(o,s(a)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&x(e.$$.fragment,a),r=!0)},o(a){e&&D(e.$$.fragment,a),r=!1},d(a){a&&j(t),e&&Z(e,a)}}}function HNe(n){let e,t,r;const i=[{ordered:n[4]},n[6]];var o=n[5].list;function s(a){let l={$$slots:{default:[UNe]},$$scope:{ctx:a}};for(let u=0;u<i.length;u+=1)l=Te(l,i[u]);return{props:l}}return o&&(e=Ht(o,s(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(a,l){e&&Q(e,a,l),H(a,t,l),r=!0},p(a,l){const u=l&80?Ot(i,[l&16&&{ordered:a[4]},l&64&&an(a[6])]):{};if(l&8388704&&(u.$$scope={dirty:l,ctx:a}),l&32&&o!==(o=a[5].list)){if(e){de();const c=e;D(c.$$.fragment,1,0,()=>{Z(c,1)}),he()}o?(e=Ht(o,s(a)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&x(e.$$.fragment,a),r=!0)},o(a){e&&D(e.$$.fragment,a),r=!1},d(a){a&&j(t),e&&Z(e,a)}}}function VNe(n){let e,t,r;return e=new Jf({props:{tokens:n[18].tokens,renderers:n[5]}}),{c(){$(e.$$.fragment),t=K()},m(i,o){Q(e,i,o),H(i,t,o),r=!0},p(i,o){const s={};o&64&&(s.tokens=i[18].tokens),o&32&&(s.renderers=i[5]),e.$set(s)},i(i){r||(x(e.$$.fragment,i),r=!0)},o(i){D(e.$$.fragment,i),r=!1},d(i){Z(e,i),i&&j(t)}}}function oN(n){let e,t,r;const i=[n[18]];var o=n[5].unorderedlistitem||n[5].listitem;function s(a){let l={$$slots:{default:[VNe]},$$scope:{ctx:a}};for(let u=0;u<i.length;u+=1)l=Te(l,i[u]);return{props:l}}return o&&(e=Ht(o,s(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(a,l){e&&Q(e,a,l),H(a,t,l),r=!0},p(a,l){const u=l&64?Ot(i,[an(a[18])]):{};if(l&8388704&&(u.$$scope={dirty:l,ctx:a}),l&32&&o!==(o=a[5].unorderedlistitem||a[5].listitem)){if(e){de();const c=e;D(c.$$.fragment,1,0,()=>{Z(c,1)}),he()}o?(e=Ht(o,s(a)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&x(e.$$.fragment,a),r=!0)},o(a){e&&D(e.$$.fragment,a),r=!1},d(a){a&&j(t),e&&Z(e,a)}}}function WNe(n){let e,t,r=n[6].items,i=[];for(let s=0;s<r.length;s+=1)i[s]=oN($I(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a&96){r=s[6].items;let l;for(l=0;l<r.length;l+=1){const u=$I(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=oN(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function qNe(n){let e,t,r;return e=new Jf({props:{tokens:n[18].tokens,renderers:n[5]}}),{c(){$(e.$$.fragment),t=K()},m(i,o){Q(e,i,o),H(i,t,o),r=!0},p(i,o){const s={};o&64&&(s.tokens=i[18].tokens),o&32&&(s.renderers=i[5]),e.$set(s)},i(i){r||(x(e.$$.fragment,i),r=!0)},o(i){D(e.$$.fragment,i),r=!1},d(i){Z(e,i),i&&j(t)}}}function sN(n){let e,t,r;const i=[n[18]];var o=n[5].orderedlistitem||n[5].listitem;function s(a){let l={$$slots:{default:[qNe]},$$scope:{ctx:a}};for(let u=0;u<i.length;u+=1)l=Te(l,i[u]);return{props:l}}return o&&(e=Ht(o,s(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(a,l){e&&Q(e,a,l),H(a,t,l),r=!0},p(a,l){const u=l&64?Ot(i,[an(a[18])]):{};if(l&8388704&&(u.$$scope={dirty:l,ctx:a}),l&32&&o!==(o=a[5].orderedlistitem||a[5].listitem)){if(e){de();const c=e;D(c.$$.fragment,1,0,()=>{Z(c,1)}),he()}o?(e=Ht(o,s(a)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&x(e.$$.fragment,a),r=!0)},o(a){e&&D(e.$$.fragment,a),r=!1},d(a){a&&j(t),e&&Z(e,a)}}}function UNe(n){let e,t,r=n[6].items,i=[];for(let s=0;s<r.length;s+=1)i[s]=sN(eN(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a&96){r=s[6].items;let l;for(l=0;l<r.length;l+=1){const u=eN(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=sN(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function GNe(n){let e,t,r;return e=new Jf({props:{tokens:n[16].tokens,renderers:n[5]}}),{c(){$(e.$$.fragment),t=K()},m(i,o){Q(e,i,o),H(i,t,o),r=!0},p(i,o){const s={};o&4&&(s.tokens=i[16].tokens),o&32&&(s.renderers=i[5]),e.$set(s)},i(i){r||(x(e.$$.fragment,i),r=!0)},o(i){D(e.$$.fragment,i),r=!1},d(i){Z(e,i),i&&j(t)}}}function aN(n){let e,t,r;var i=n[5].tablecell;function o(s){return{props:{header:!0,align:s[6].align[s[15]]||"center",$$slots:{default:[GNe]},$$scope:{ctx:s}}}}return i&&(e=Ht(i,o(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(s,a){e&&Q(e,s,a),H(s,t,a),r=!0},p(s,a){const l={};if(a&64&&(l.align=s[6].align[s[15]]||"center"),a&8388644&&(l.$$scope={dirty:a,ctx:s}),a&32&&i!==(i=s[5].tablecell)){if(e){de();const u=e;D(u.$$.fragment,1,0,()=>{Z(u,1)}),he()}i?(e=Ht(i,o(s)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&x(e.$$.fragment,s),r=!0)},o(s){e&&D(e.$$.fragment,s),r=!1},d(s){s&&j(t),e&&Z(e,s)}}}function KNe(n){let e,t,r=n[2],i=[];for(let s=0;s<r.length;s+=1)i[s]=aN(rN(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a&100){r=s[2];let l;for(l=0;l<r.length;l+=1){const u=rN(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=aN(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function JNe(n){let e,t,r;var i=n[5].tablerow;function o(s){return{props:{$$slots:{default:[KNe]},$$scope:{ctx:s}}}}return i&&(e=Ht(i,o(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(s,a){e&&Q(e,s,a),H(s,t,a),r=!0},p(s,a){const l={};if(a&8388708&&(l.$$scope={dirty:a,ctx:s}),a&32&&i!==(i=s[5].tablerow)){if(e){de();const u=e;D(u.$$.fragment,1,0,()=>{Z(u,1)}),he()}i?(e=Ht(i,o(s)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&x(e.$$.fragment,s),r=!0)},o(s){e&&D(e.$$.fragment,s),r=!1},d(s){s&&j(t),e&&Z(e,s)}}}function YNe(n){let e,t;return e=new Jf({props:{tokens:n[13].tokens,renderers:n[5]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&8&&(o.tokens=r[13].tokens),i&32&&(o.renderers=r[5]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function lN(n){let e,t,r;var i=n[5].tablecell;function o(s){return{props:{header:!1,align:s[6].align[s[15]]||"center",$$slots:{default:[YNe]},$$scope:{ctx:s}}}}return i&&(e=Ht(i,o(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(s,a){e&&Q(e,s,a),H(s,t,a),r=!0},p(s,a){const l={};if(a&64&&(l.align=s[6].align[s[15]]||"center"),a&8388648&&(l.$$scope={dirty:a,ctx:s}),a&32&&i!==(i=s[5].tablecell)){if(e){de();const u=e;D(u.$$.fragment,1,0,()=>{Z(u,1)}),he()}i?(e=Ht(i,o(s)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&x(e.$$.fragment,s),r=!0)},o(s){e&&D(e.$$.fragment,s),r=!1},d(s){s&&j(t),e&&Z(e,s)}}}function XNe(n){let e,t,r=n[10],i=[];for(let s=0;s<r.length;s+=1)i[s]=lN(nN(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=K()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a&104){r=s[10];let l;for(l=0;l<r.length;l+=1){const u=nN(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=lN(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function uN(n){let e,t,r;var i=n[5].tablerow;function o(s){return{props:{$$slots:{default:[XNe]},$$scope:{ctx:s}}}}return i&&(e=Ht(i,o(n))),{c(){e&&$(e.$$.fragment),t=Ze()},m(s,a){e&&Q(e,s,a),H(s,t,a),r=!0},p(s,a){const l={};if(a&8388712&&(l.$$scope={dirty:a,ctx:s}),a&32&&i!==(i=s[5].tablerow)){if(e){de();const u=e;D(u.$$.fragment,1,0,()=>{Z(u,1)}),he()}i?(e=Ht(i,o(s)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&x(e.$$.fragment,s),r=!0)},o(s){e&&D(e.$$.fragment,s),r=!1},d(s){s&&j(t),e&&Z(e,s)}}}function QNe(n){let e,t,r=n[3],i=[];for(let s=0;s<r.length;s+=1)i[s]=uN(tN(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a&104){r=s[3];let l;for(l=0;l<r.length;l+=1){const u=tN(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=uN(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function ZNe(n){let e,t,r,i,o;var s=n[5].tablehead;function a(c){return{props:{$$slots:{default:[JNe]},$$scope:{ctx:c}}}}s&&(e=Ht(s,a(n)));var l=n[5].tablebody;function u(c){return{props:{$$slots:{default:[QNe]},$$scope:{ctx:c}}}}return l&&(r=Ht(l,u(n))),{c(){e&&$(e.$$.fragment),t=K(),r&&$(r.$$.fragment),i=Ze()},m(c,f){e&&Q(e,c,f),H(c,t,f),r&&Q(r,c,f),H(c,i,f),o=!0},p(c,f){const d={};if(f&8388708&&(d.$$scope={dirty:f,ctx:c}),f&32&&s!==(s=c[5].tablehead)){if(e){de();const p=e;D(p.$$.fragment,1,0,()=>{Z(p,1)}),he()}s?(e=Ht(s,a(c)),$(e.$$.fragment),x(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else s&&e.$set(d);const h={};if(f&8388712&&(h.$$scope={dirty:f,ctx:c}),f&32&&l!==(l=c[5].tablebody)){if(r){de();const p=r;D(p.$$.fragment,1,0,()=>{Z(p,1)}),he()}l?(r=Ht(l,u(c)),$(r.$$.fragment),x(r.$$.fragment,1),Q(r,i.parentNode,i)):r=null}else l&&r.$set(h)},i(c){o||(e&&x(e.$$.fragment,c),r&&x(r.$$.fragment,c),o=!0)},o(c){e&&D(e.$$.fragment,c),r&&D(r.$$.fragment,c),o=!1},d(c){e&&Z(e,c),c&&j(t),c&&j(i),r&&Z(r,c)}}}function cN(n){let e,t;const r=[n[7],{renderers:n[5]}];let i={};for(let o=0;o<r.length;o+=1)i=Te(i,r[o]);return e=new Jf({props:i}),{c(){$(e.$$.fragment)},m(o,s){Q(e,o,s),t=!0},p(o,s){const a=s&34?Ot(r,[s&2&&an(o[7]),s&32&&{renderers:o[5]}]):{};e.$set(a)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function $Ne(n){let e,t,r,i;const o=[PNe,RNe],s=[];function a(l,u){return l[0]?l[5][l[0]]?1:-1:0}return~(e=a(n))&&(t=s[e]=o[e](n)),{c(){t&&t.c(),r=Ze()},m(l,u){~e&&s[e].m(l,u),H(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?~e&&s[e].p(l,u):(t&&(de(),D(s[c],1,1,()=>{s[c]=null}),he()),~e?(t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r)):t=null)},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){~e&&s[e].d(l),l&&j(r)}}}function eBe(n,e,t){const r=["type","tokens","header","rows","ordered","renderers"];let i=Wu(e,r),{type:o=void 0}=e,{tokens:s=void 0}=e,{header:a=void 0}=e,{rows:l=void 0}=e,{ordered:u=!1}=e,{renderers:c}=e;return DNe(),n.$$set=f=>{e=Te(Te({},e),_t(f)),t(6,i=Wu(e,r)),"type"in f&&t(0,o=f.type),"tokens"in f&&t(1,s=f.tokens),"header"in f&&t(2,a=f.header),"rows"in f&&t(3,l=f.rows),"ordered"in f&&t(4,u=f.ordered),"renderers"in f&&t(5,c=f.renderers)},[o,s,a,l,u,c,i]}let Jf=class extends ye{constructor(e){super(),be(this,e,eBe,$Ne,Be,{type:0,tokens:1,header:2,rows:3,ordered:4,renderers:5})}};function TA(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let _c=TA();function GK(n){_c=n}const KK=/[&<>"']/,tBe=new RegExp(KK.source,"g"),JK=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,nBe=new RegExp(JK.source,"g"),rBe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fN=n=>rBe[n];function Ci(n,e){if(e){if(KK.test(n))return n.replace(tBe,fN)}else if(JK.test(n))return n.replace(nBe,fN);return n}const iBe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function YK(n){return n.replace(iBe,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const oBe=/(^|[^\[])\^/g;function xn(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,i)=>(i=i.source||i,i=i.replace(oBe,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}const sBe=/[^\w:]/g,aBe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function dN(n,e,t){if(n){let r;try{r=decodeURIComponent(YK(t)).replace(sBe,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!aBe.test(t)&&(t=fBe(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Bv={},lBe=/^[^:]+:\/*[^/]*$/,uBe=/^([^:]+:)[\s\S]*$/,cBe=/^([^:]+:\/*[^/]*)[\s\S]*$/;function fBe(n,e){Bv[" "+n]||(lBe.test(n)?Bv[" "+n]=n+"/":Bv[" "+n]=fb(n,"/",!0)),n=Bv[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(uBe,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(cBe,"$1")+e:n+e}const M2={exec:function(){}};function hN(n,e){const t=n.replace(/\|/g,(o,s,a)=>{let l=!1,u=s;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function fb(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r;){const o=n.charAt(r-i-1);if(o===e&&!t)i++;else if(o!==e&&t)i++;else break}return n.slice(0,r-i)}function dBe(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let r=0,i=0;for(;i<t;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return-1}function hBe(n,e){!n||n.silent||(e&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(n.sanitize||n.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(n.highlight||n.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),n.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),n.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),n.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),n.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(n.headerIds||n.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function pN(n,e,t,r){const i=e.href,o=e.title?Ci(e.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:t,href:i,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:o,text:Ci(s)}}function pBe(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const o=i.match(/^\s+/);if(o===null)return i;const[s]=o;return s.length>=r.length?i.slice(r.length):i}).join(`
`)}class T2{constructor(e){this.options=e||_c}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:fb(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=pBe(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=fb(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:o,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,i,o,s,a,l,u,c,f,d,h,p,m=t[1].trim();const g=m.length>1,v={type:"list",raw:"",ordered:g,start:g?+m.slice(0,-1):"",loose:!1,items:[]};m=g?`\\d{1,9}\\${m.slice(-1)}`:`\\${m}`,this.options.pedantic&&(m=g?m:"[*+-]");const b=new RegExp(`^( {0,3}${m})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(p=!1,!(!(t=b.exec(e))||this.rules.block.hr.test(e)));){if(r=t[0],e=e.substring(r.length),c=t[2].split(`
`,1)[0].replace(/^\t+/,_=>" ".repeat(3*_.length)),f=e.split(`
`,1)[0],this.options.pedantic?(s=2,h=c.trimLeft()):(s=t[2].search(/[^ ]/),s=s>4?1:s,h=c.slice(s),s+=t[1].length),l=!1,!c&&/^ *$/.test(f)&&(r+=f+`
`,e=e.substring(f.length+1),p=!0),!p){const _=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),k=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),S=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(d=e.split(`
`,1)[0],f=d,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(k.test(f)||S.test(f)||_.test(f)||y.test(e)));){if(f.search(/[^ ]/)>=s||!f.trim())h+=`
`+f.slice(s);else{if(l||c.search(/[^ ]/)>=4||k.test(c)||S.test(c)||y.test(c))break;h+=`
`+f}!l&&!f.trim()&&(l=!0),r+=d+`
`,e=e.substring(d.length+1),c=f.slice(s)}}v.loose||(u?v.loose=!0:/\n *\n *$/.test(r)&&(u=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(h),i&&(o=i[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),v.items.push({type:"list_item",raw:r,task:!!i,checked:o,loose:!1,text:h}),v.raw+=r}v.items[v.items.length-1].raw=r.trimRight(),v.items[v.items.length-1].text=h.trimRight(),v.raw=v.raw.trimRight();const w=v.items.length;for(a=0;a<w;a++)if(this.lexer.state.top=!1,v.items[a].tokens=this.lexer.blockTokens(v.items[a].text,[]),!v.loose){const _=v.items[a].tokens.filter(k=>k.type==="space"),y=_.length>0&&_.some(k=>/\n.*\n/.test(k.raw));v.loose=y}if(v.loose)for(a=0;a<w;a++)v.items[a].loose=!0;return v}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",block:!0,raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(t[0]):Ci(t[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:o}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:hN(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=t[0];let i=r.align.length,o,s,a,l;for(o=0;o<i;o++)/^ *-+: *$/.test(r.align[o])?r.align[o]="right":/^ *:-+: *$/.test(r.align[o])?r.align[o]="center":/^ *:-+ *$/.test(r.align[o])?r.align[o]="left":r.align[o]=null;for(i=r.rows.length,o=0;o<i;o++)r.rows[o]=hN(r.rows[o],r.header.length).map(u=>({text:u}));for(i=r.header.length,s=0;s<i;s++)r.header[s].tokens=this.lexer.inline(r.header[s].text);for(i=r.rows.length,s=0;s<i;s++)for(l=r.rows[s],a=0;a<l.length;a++)l[a].tokens=this.lexer.inline(l[a].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ci(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Ci(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const s=fb(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=dBe(t[2],"()");if(s>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),pN(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return pN(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=i[0].length-1;let a,l,u=s,c=0;const f=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(f.lastIndex=0,t=t.slice(-1*e.length+s);(i=f.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=a.length,i[3]||i[4]){u+=l;continue}else if((i[5]||i[6])&&s%3&&!((s+l)%3)){c+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+c);const d=e.slice(0,s+i.index+l+1);if(Math.min(s,l)%2){const p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}const h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return i&&o&&(r=r.substring(1,r.length-1)),r=Ci(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let i,o;return r[2]==="@"?(i=Ci(this.options.mangle?t(r[1]):r[1]),o="mailto:"+i):(i=Ci(r[1]),o=i),{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let i,o;if(r[2]==="@")i=Ci(this.options.mangle?t(r[0]):r[0]),o="mailto:"+i;else{let s;do s=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(s!==r[0]);i=Ci(r[0]),r[1]==="www."?o="http://"+r[0]:o=r[0]}return{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Ci(r[0]):r[0]:i=Ci(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const St={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:M2,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};St._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;St._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;St.def=xn(St.def).replace("label",St._label).replace("title",St._title).getRegex();St.bullet=/(?:[*+-]|\d{1,9}[.)])/;St.listItemStart=xn(/^( *)(bull) */).replace("bull",St.bullet).getRegex();St.list=xn(St.list).replace(/bull/g,St.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+St.def.source+")").getRegex();St._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";St._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;St.html=xn(St.html,"i").replace("comment",St._comment).replace("tag",St._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();St.lheading=xn(St.lheading).replace(/bull/g,St.bullet).getRegex();St.paragraph=xn(St._paragraph).replace("hr",St.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",St._tag).getRegex();St.blockquote=xn(St.blockquote).replace("paragraph",St.paragraph).getRegex();St.normal={...St};St.gfm={...St.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};St.gfm.table=xn(St.gfm.table).replace("hr",St.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",St._tag).getRegex();St.gfm.paragraph=xn(St._paragraph).replace("hr",St.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",St.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",St._tag).getRegex();St.pedantic={...St.normal,html:xn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",St._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:M2,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:xn(St.normal._paragraph).replace("hr",St.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",St.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const st={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:M2,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:M2,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};st._punctuation="\\p{P}$+<=>`^|~";st.punctuation=xn(st.punctuation,"u").replace(/punctuation/g,st._punctuation).getRegex();st.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;st.anyPunctuation=/\\[punct]/g;st._escapes=/\\([punct])/g;st._comment=xn(St._comment).replace("(?:-->|$)","-->").getRegex();st.emStrong.lDelim=xn(st.emStrong.lDelim,"u").replace(/punct/g,st._punctuation).getRegex();st.emStrong.rDelimAst=xn(st.emStrong.rDelimAst,"gu").replace(/punct/g,st._punctuation).getRegex();st.emStrong.rDelimUnd=xn(st.emStrong.rDelimUnd,"gu").replace(/punct/g,st._punctuation).getRegex();st.anyPunctuation=xn(st.anyPunctuation,"gu").replace(/punct/g,st._punctuation).getRegex();st._escapes=xn(st._escapes,"gu").replace(/punct/g,st._punctuation).getRegex();st._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;st._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;st.autolink=xn(st.autolink).replace("scheme",st._scheme).replace("email",st._email).getRegex();st._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;st.tag=xn(st.tag).replace("comment",st._comment).replace("attribute",st._attribute).getRegex();st._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;st._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;st._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;st.link=xn(st.link).replace("label",st._label).replace("href",st._href).replace("title",st._title).getRegex();st.reflink=xn(st.reflink).replace("label",st._label).replace("ref",St._label).getRegex();st.nolink=xn(st.nolink).replace("ref",St._label).getRegex();st.reflinkSearch=xn(st.reflinkSearch,"g").replace("reflink",st.reflink).replace("nolink",st.nolink).getRegex();st.normal={...st};st.pedantic={...st.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:xn(/^!?\[(label)\]\((.*?)\)/).replace("label",st._label).getRegex(),reflink:xn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",st._label).getRegex()};st.gfm={...st.normal,escape:xn(st.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};st.gfm.url=xn(st.gfm.url,"i").replace("email",st.gfm._extended_email).getRegex();st.breaks={...st.gfm,br:xn(st.br).replace("{2,}","*").getRegex(),text:xn(st.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function mBe(n){return n.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function mN(n){let e="",t,r;const i=n.length;for(t=0;t<i;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}class Ps{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||_c,this.options.tokenizer=this.options.tokenizer||new T2,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:St.normal,inline:st.normal};this.options.pedantic?(t.block=St.pedantic,t.inline=st.pedantic):this.options.gfm&&(t.block=St.gfm,this.options.breaks?t.inline=st.breaks:t.inline=st.gfm),this.tokenizer.rules=t}static get rules(){return{block:St,inline:st}}static lex(e,t){return new Ps(t).lex(e)}static lexInline(e,t){return new Ps(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,u)=>l+"    ".repeat(u.length));let r,i,o,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let u;this.options.extensions.startBlock.forEach(function(c){u=c.call({lexer:this},l),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=t[t.length-1],s&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),s=o.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,o,s=e,a,l,u;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(r=c.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,s,u)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,mN)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,mN))){e=e.substring(r.raw.length),t.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const f=e.slice(1);let d;this.options.extensions.startInline.forEach(function(h){d=h.call({lexer:this},f),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(o=e.substring(0,c+1))}if(r=this.tokenizer.inlineText(o,mBe)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}}class O2{constructor(e){this.options=e||_c}code(e,t,r){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,i);o!=null&&o!==e&&(r=!0,e=o)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+Ci(i)+'">'+(r?e:Ci(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:Ci(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r,i){if(this.options.headerIds){const o=this.options.headerPrefix+i.slug(r);return`<h${t} id="${o}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,r){const i=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+i+o+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(e=dN(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>",i}image(e,t,r){if(e=dN(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}}class OA{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class pw{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do i++,r=e+"-"+i;while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=i,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class Sa{constructor(e){this.options=e||_c,this.options.renderer=this.options.renderer||new O2,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new OA,this.slugger=new pw}static parse(e,t){return new Sa(t).parse(e)}static parseInline(e,t){return new Sa(t).parseInline(e)}parse(e,t=!0){let r="",i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k;const S=e.length;for(i=0;i<S;i++){if(h=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(k=this.options.extensions.renderers[h.type].call({parser:this},h),k!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){r+=k||"";continue}switch(h.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(h.tokens),h.depth,YK(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(f="",c="",a=h.header.length,o=0;o<a;o++)c+=this.renderer.tablecell(this.parseInline(h.header[o].tokens),{header:!0,align:h.align[o]});for(f+=this.renderer.tablerow(c),d="",a=h.rows.length,o=0;o<a;o++){for(u=h.rows[o],c="",l=u.length,s=0;s<l;s++)c+=this.renderer.tablecell(this.parseInline(u[s].tokens),{header:!1,align:h.align[s]});d+=this.renderer.tablerow(c)}r+=this.renderer.table(f,d);continue}case"blockquote":{d=this.parse(h.tokens),r+=this.renderer.blockquote(d);continue}case"list":{for(p=h.ordered,m=h.start,g=h.loose,a=h.items.length,d="",o=0;o<a;o++)b=h.items[o],w=b.checked,_=b.task,v="",b.task&&(y=this.renderer.checkbox(w),g?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=y+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=y+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:y}):v+=y),v+=this.parse(b.tokens,g),d+=this.renderer.listitem(v,_,w);r+=this.renderer.list(d,p,m);continue}case"html":{r+=this.renderer.html(h.text,h.block);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(d=h.tokens?this.parseInline(h.tokens):h.text;i+1<S&&e[i+1].type==="text";)h=e[++i],d+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);r+=t?this.renderer.paragraph(d):d;continue}default:{const E='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(E);return}else throw new Error(E)}}}return r}parseInline(e,t){t=t||this.renderer;let r="",i,o,s;const a=e.length;for(i=0;i<a;i++){if(o=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))){r+=s||"";continue}switch(o.type){case"escape":{r+=t.text(o.text);break}case"html":{r+=t.html(o.text);break}case"link":{r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{r+=t.image(o.href,o.title,o.text);break}case"strong":{r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{r+=t.del(this.parseInline(o.tokens,t));break}case"text":{r+=t.text(o.text);break}default:{const l='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return r}}class X0{constructor(e){this.options=e||_c}preprocess(e){return e}postprocess(e){return e}}zi(X0,"passThroughHooks",new Set(["preprocess","postprocess"]));var cg,H4,D2,XK;class gBe{constructor(...e){mw(this,cg);mw(this,D2);zi(this,"defaults",TA());zi(this,"options",this.setOptions);zi(this,"parse",o1(this,cg,H4).call(this,Ps.lex,Sa.parse));zi(this,"parseInline",o1(this,cg,H4).call(this,Ps.lexInline,Sa.parseInline));zi(this,"Parser",Sa);zi(this,"parser",Sa.parse);zi(this,"Renderer",O2);zi(this,"TextRenderer",OA);zi(this,"Lexer",Ps);zi(this,"lexer",Ps.lex);zi(this,"Tokenizer",T2);zi(this,"Slugger",pw);zi(this,"Hooks",X0);this.use(...e)}walkTokens(e,t){let r=[];for(const i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{for(const o of i.header)r=r.concat(this.walkTokens(o.tokens,t));for(const o of i.rows)for(const s of o)r=r.concat(this.walkTokens(s.tokens,t));break}case"list":{r=r.concat(this.walkTokens(i.items,t));break}default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{r=r.concat(this.walkTokens(i[o],t))}):i.tokens&&(r=r.concat(this.walkTokens(i.tokens,t)))}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){const s=t.renderers[o.name];s?t.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:t.renderers[o.name]=o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[o.level]?t[o.level].unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),i.extensions=t),r.renderer){const o=this.defaults.renderer||new O2(this.defaults);for(const s in r.renderer){const a=o[s];o[s]=(...l)=>{let u=r.renderer[s].apply(o,l);return u===!1&&(u=a.apply(o,l)),u}}i.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new T2(this.defaults);for(const s in r.tokenizer){const a=o[s];o[s]=(...l)=>{let u=r.tokenizer[s].apply(o,l);return u===!1&&(u=a.apply(o,l)),u}}i.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new X0;for(const s in r.hooks){const a=o[s];X0.passThroughHooks.has(s)?o[s]=l=>{if(this.defaults.async)return Promise.resolve(r.hooks[s].call(o,l)).then(c=>a.call(o,c));const u=r.hooks[s].call(o,l);return a.call(o,u)}:o[s]=(...l)=>{let u=r.hooks[s].apply(o,l);return u===!1&&(u=a.apply(o,l)),u}}i.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens;i.walkTokens=function(s){let a=[];return a.push(r.walkTokens.call(this,s)),o&&(a=a.concat(o.call(this,s))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}}cg=new WeakSet,H4=function(e,t){return(r,i,o)=>{typeof i=="function"&&(o=i,i=null);const s={...i};i={...this.defaults,...s};const a=o1(this,D2,XK).call(this,i.silent,i.async,o);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(hBe(i,o),i.hooks&&(i.hooks.options=i),o){const l=i.highlight;let u;try{i.hooks&&(r=i.hooks.preprocess(r)),u=e(r,i)}catch(d){return a(d)}const c=d=>{let h;if(!d)try{i.walkTokens&&this.walkTokens(u,i.walkTokens),h=t(u,i),i.hooks&&(h=i.hooks.postprocess(h))}catch(p){d=p}return i.highlight=l,d?a(d):o(null,h)};if(!l||l.length<3||(delete i.highlight,!u.length))return c();let f=0;this.walkTokens(u,d=>{d.type==="code"&&(f++,setTimeout(()=>{l(d.text,d.lang,(h,p)=>{if(h)return c(h);p!=null&&p!==d.text&&(d.text=p,d.escaped=!0),f--,f===0&&c()})},0))}),f===0&&c();return}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(r):r).then(l=>e(l,i)).then(l=>i.walkTokens?Promise.all(this.walkTokens(l,i.walkTokens)).then(()=>l):l).then(l=>t(l,i)).then(l=>i.hooks?i.hooks.postprocess(l):l).catch(a);try{i.hooks&&(r=i.hooks.preprocess(r));const l=e(r,i);i.walkTokens&&this.walkTokens(l,i.walkTokens);let u=t(l,i);return i.hooks&&(u=i.hooks.postprocess(u)),u}catch(l){return a(l)}}},D2=new WeakSet,XK=function(e,t,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const o="<p>An error occurred:</p><pre>"+Ci(i.message+"",!0)+"</pre>";if(t)return Promise.resolve(o);if(r){r(null,o);return}return o}if(t)return Promise.reject(i);if(r){r(i);return}throw i}};const Bf=new gBe(_c);function An(n,e,t){return Bf.parse(n,e,t)}An.options=An.setOptions=function(n){return Bf.setOptions(n),An.defaults=Bf.defaults,GK(An.defaults),An};An.getDefaults=TA;An.defaults=_c;An.use=function(...n){return Bf.use(...n),An.defaults=Bf.defaults,GK(An.defaults),An};An.walkTokens=function(n,e){return Bf.walkTokens(n,e)};An.parseInline=Bf.parseInline;An.Parser=Sa;An.parser=Sa.parse;An.Renderer=O2;An.TextRenderer=OA;An.Lexer=Ps;An.lexer=Ps.lex;An.Tokenizer=T2;An.Slugger=pw;An.Hooks=X0;An.parse=An;An.options;An.setOptions;An.use;An.walkTokens;An.parseInline;Sa.parse;Ps.lex;const QK={};function vBe(n){let e;return{c(){e=Se(n[1])},m(t,r){H(t,e,r)},p(t,r){r&2&&ze(e,t[1])},i:pe,o:pe,d(t){t&&j(e)}}}function bBe(n){let e,t;const r=n[5].default,i=Je(r,n,n[4],null);return{c(){e=B("h6"),i&&i.c(),C(e,"id",n[2])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&16)&&Xe(i,r,o,o[4],t?Ye(r,o[4],s,null):Qe(o[4]),null),(!t||s&4)&&C(e,"id",o[2])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function yBe(n){let e,t;const r=n[5].default,i=Je(r,n,n[4],null);return{c(){e=B("h5"),i&&i.c(),C(e,"id",n[2])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&16)&&Xe(i,r,o,o[4],t?Ye(r,o[4],s,null):Qe(o[4]),null),(!t||s&4)&&C(e,"id",o[2])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function _Be(n){let e,t;const r=n[5].default,i=Je(r,n,n[4],null);return{c(){e=B("h4"),i&&i.c(),C(e,"id",n[2])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&16)&&Xe(i,r,o,o[4],t?Ye(r,o[4],s,null):Qe(o[4]),null),(!t||s&4)&&C(e,"id",o[2])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function wBe(n){let e,t;const r=n[5].default,i=Je(r,n,n[4],null);return{c(){e=B("h3"),i&&i.c(),C(e,"id",n[2])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&16)&&Xe(i,r,o,o[4],t?Ye(r,o[4],s,null):Qe(o[4]),null),(!t||s&4)&&C(e,"id",o[2])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function kBe(n){let e,t;const r=n[5].default,i=Je(r,n,n[4],null);return{c(){e=B("h2"),i&&i.c(),C(e,"id",n[2])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&16)&&Xe(i,r,o,o[4],t?Ye(r,o[4],s,null):Qe(o[4]),null),(!t||s&4)&&C(e,"id",o[2])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function CBe(n){let e,t;const r=n[5].default,i=Je(r,n,n[4],null);return{c(){e=B("h1"),i&&i.c(),C(e,"id",n[2])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&16)&&Xe(i,r,o,o[4],t?Ye(r,o[4],s,null):Qe(o[4]),null),(!t||s&4)&&C(e,"id",o[2])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function SBe(n){let e,t,r,i;const o=[CBe,kBe,wBe,_Be,yBe,bBe,vBe],s=[];function a(l,u){return l[0]===1?0:l[0]===2?1:l[0]===3?2:l[0]===4?3:l[0]===5?4:l[0]===6?5:6}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=Ze()},m(l,u){s[e].m(l,u),H(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?s[e].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r))},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){s[e].d(l),l&&j(r)}}}function xBe(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{depth:s}=e,{raw:a}=e,{text:l}=e;const{slug:u,getOptions:c}=pr(QK),f=c();return n.$$set=d=>{"depth"in d&&t(0,s=d.depth),"raw"in d&&t(1,a=d.raw),"text"in d&&t(3,l=d.text),"$$scope"in d&&t(4,o=d.$$scope)},n.$$.update=()=>{n.$$.dirty&8&&t(2,r=f.headerIds?f.headerPrefix+u(l):void 0)},[s,a,r,l,o,i]}class EBe extends ye{constructor(e){super(),be(this,e,xBe,SBe,Be,{depth:0,raw:1,text:3})}}function ABe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("p"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function MBe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class TBe extends ye{constructor(e){super(),be(this,e,MBe,ABe,Be,{})}}function OBe(n){let e;const t=n[3].default,r=Je(t,n,n[2],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&4)&&Xe(r,t,i,i[2],e?Ye(t,i[2],o,null):Qe(i[2]),null)},i(i){e||(x(r,i),e=!0)},o(i){D(r,i),e=!1},d(i){r&&r.d(i)}}}function DBe(n,e,t){let{$$slots:r={},$$scope:i}=e,{text:o}=e,{raw:s}=e;return n.$$set=a=>{"text"in a&&t(0,o=a.text),"raw"in a&&t(1,s=a.raw),"$$scope"in a&&t(2,i=a.$$scope)},[o,s,i,r]}class RBe extends ye{constructor(e){super(),be(this,e,DBe,OBe,Be,{text:0,raw:1})}}function PBe(n){let e,t;return{c(){e=B("img"),E3(e.src,t=n[0])||C(e,"src",t),C(e,"title",n[1]),C(e,"alt",n[2])},m(r,i){H(r,e,i)},p(r,[i]){i&1&&!E3(e.src,t=r[0])&&C(e,"src",t),i&2&&C(e,"title",r[1]),i&4&&C(e,"alt",r[2])},i:pe,o:pe,d(r){r&&j(e)}}}function IBe(n,e,t){let{href:r=""}=e,{title:i=void 0}=e,{text:o=""}=e;return n.$$set=s=>{"href"in s&&t(0,r=s.href),"title"in s&&t(1,i=s.title),"text"in s&&t(2,o=s.text)},[r,i,o]}class NBe extends ye{constructor(e){super(),be(this,e,IBe,PBe,Be,{href:0,title:1,text:2})}}function BBe(n){let e,t;const r=n[3].default,i=Je(r,n,n[2],null);return{c(){e=B("a"),i&&i.c(),C(e,"href",n[0]),C(e,"title",n[1])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&4)&&Xe(i,r,o,o[2],t?Ye(r,o[2],s,null):Qe(o[2]),null),(!t||s&1)&&C(e,"href",o[0]),(!t||s&2)&&C(e,"title",o[1])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function LBe(n,e,t){let{$$slots:r={},$$scope:i}=e,{href:o=""}=e,{title:s=void 0}=e;return n.$$set=a=>{"href"in a&&t(0,o=a.href),"title"in a&&t(1,s=a.title),"$$scope"in a&&t(2,i=a.$$scope)},[o,s,i,r]}class FBe extends ye{constructor(e){super(),be(this,e,LBe,BBe,Be,{href:0,title:1})}}function zBe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("em"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function jBe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class HBe extends ye{constructor(e){super(),be(this,e,jBe,zBe,Be,{})}}function VBe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("del"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function WBe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class qBe extends ye{constructor(e){super(),be(this,e,WBe,VBe,Be,{})}}function UBe(n){let e,t=n[0].replace(/`/g,"")+"",r;return{c(){e=B("code"),r=Se(t)},m(i,o){H(i,e,o),T(e,r)},p(i,[o]){o&1&&t!==(t=i[0].replace(/`/g,"")+"")&&ze(r,t)},i:pe,o:pe,d(i){i&&j(e)}}}function GBe(n,e,t){let{raw:r}=e;return n.$$set=i=>{"raw"in i&&t(0,r=i.raw)},[r]}class KBe extends ye{constructor(e){super(),be(this,e,GBe,UBe,Be,{raw:0})}}function JBe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("strong"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function YBe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class XBe extends ye{constructor(e){super(),be(this,e,YBe,JBe,Be,{})}}function QBe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("table"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function ZBe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class $Be extends ye{constructor(e){super(),be(this,e,ZBe,QBe,Be,{})}}function eLe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("thead"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function tLe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class nLe extends ye{constructor(e){super(),be(this,e,tLe,eLe,Be,{})}}function rLe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("tbody"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function iLe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class oLe extends ye{constructor(e){super(),be(this,e,iLe,rLe,Be,{})}}function sLe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("tr"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function aLe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class lLe extends ye{constructor(e){super(),be(this,e,aLe,sLe,Be,{})}}function uLe(n){let e,t;const r=n[3].default,i=Je(r,n,n[2],null);return{c(){e=B("td"),i&&i.c(),C(e,"align",n[1])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&4)&&Xe(i,r,o,o[2],t?Ye(r,o[2],s,null):Qe(o[2]),null),(!t||s&2)&&C(e,"align",o[1])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function cLe(n){let e,t;const r=n[3].default,i=Je(r,n,n[2],null);return{c(){e=B("th"),i&&i.c(),C(e,"align",n[1])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&4)&&Xe(i,r,o,o[2],t?Ye(r,o[2],s,null):Qe(o[2]),null),(!t||s&2)&&C(e,"align",o[1])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function fLe(n){let e,t,r,i;const o=[cLe,uLe],s=[];function a(l,u){return l[0]?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=Ze()},m(l,u){s[e].m(l,u),H(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?s[e].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r))},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){s[e].d(l),l&&j(r)}}}function dLe(n,e,t){let{$$slots:r={},$$scope:i}=e,{header:o}=e,{align:s}=e;return n.$$set=a=>{"header"in a&&t(0,o=a.header),"align"in a&&t(1,s=a.align),"$$scope"in a&&t(2,i=a.$$scope)},[o,s,i,r]}class hLe extends ye{constructor(e){super(),be(this,e,dLe,fLe,Be,{header:0,align:1})}}function pLe(n){let e,t;const r=n[3].default,i=Je(r,n,n[2],null);return{c(){e=B("ul"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&4)&&Xe(i,r,o,o[2],t?Ye(r,o[2],s,null):Qe(o[2]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function mLe(n){let e,t;const r=n[3].default,i=Je(r,n,n[2],null);return{c(){e=B("ol"),i&&i.c(),C(e,"start",n[1])},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,s){i&&i.p&&(!t||s&4)&&Xe(i,r,o,o[2],t?Ye(r,o[2],s,null):Qe(o[2]),null),(!t||s&2)&&C(e,"start",o[1])},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function gLe(n){let e,t,r,i;const o=[mLe,pLe],s=[];function a(l,u){return l[0]?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=Ze()},m(l,u){s[e].m(l,u),H(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?s[e].p(l,u):(de(),D(s[c],1,1,()=>{s[c]=null}),he(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),x(t,1),t.m(r.parentNode,r))},i(l){i||(x(t),i=!0)},o(l){D(t),i=!1},d(l){s[e].d(l),l&&j(r)}}}function vLe(n,e,t){let{$$slots:r={},$$scope:i}=e,{ordered:o}=e,{start:s}=e;return n.$$set=a=>{"ordered"in a&&t(0,o=a.ordered),"start"in a&&t(1,s=a.start),"$$scope"in a&&t(2,i=a.$$scope)},[o,s,i,r]}class bLe extends ye{constructor(e){super(),be(this,e,vLe,gLe,Be,{ordered:0,start:1})}}function yLe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("li"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function _Le(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class wLe extends ye{constructor(e){super(),be(this,e,_Le,yLe,Be,{})}}function kLe(n){let e;return{c(){e=B("hr")},m(t,r){H(t,e,r)},p:pe,i:pe,o:pe,d(t){t&&j(e)}}}class CLe extends ye{constructor(e){super(),be(this,e,null,kLe,Be,{})}}function SLe(n){let e,t;return{c(){e=new HN(!1),t=Ze(),e.a=t},m(r,i){e.m(n[0],r,i),H(r,t,i)},p(r,[i]){i&1&&e.p(r[0])},i:pe,o:pe,d(r){r&&j(t),r&&e.d()}}}function xLe(n,e,t){let{text:r}=e;return n.$$set=i=>{"text"in i&&t(0,r=i.text)},[r]}class ELe extends ye{constructor(e){super(),be(this,e,xLe,SLe,Be,{text:0})}}function ALe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("blockquote"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function MLe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class TLe extends ye{constructor(e){super(),be(this,e,MLe,ALe,Be,{})}}function OLe(n){let e,t,r;return{c(){e=B("pre"),t=B("code"),r=Se(n[1]),C(e,"class",n[0])},m(i,o){H(i,e,o),T(e,t),T(t,r)},p(i,[o]){o&2&&ze(r,i[1]),o&1&&C(e,"class",i[0])},i:pe,o:pe,d(i){i&&j(e)}}}function DLe(n,e,t){let{lang:r}=e,{text:i}=e;return n.$$set=o=>{"lang"in o&&t(0,r=o.lang),"text"in o&&t(1,i=o.text)},[r,i]}class RLe extends ye{constructor(e){super(),be(this,e,DLe,OLe,Be,{lang:0,text:1})}}function PLe(n){let e,t;const r=n[1].default,i=Je(r,n,n[0],null);return{c(){e=B("br"),i&&i.c()},m(o,s){H(o,e,s),i&&i.m(o,s),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&Xe(i,r,o,o[0],t?Ye(r,o[0],s,null):Qe(o[0]),null)},i(o){t||(x(i,o),t=!0)},o(o){D(i,o),t=!1},d(o){o&&j(e),i&&i.d(o)}}}function ILe(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,r]}class NLe extends ye{constructor(e){super(),be(this,e,ILe,PLe,Be,{})}}const BLe={heading:EBe,paragraph:TBe,text:RBe,image:NBe,link:FBe,em:HBe,strong:XBe,codespan:KBe,del:qBe,table:$Be,tablehead:nLe,tablebody:oLe,tablerow:lLe,tablecell:hLe,list:bLe,orderedlistitem:null,unorderedlistitem:null,listitem:wLe,hr:CLe,html:ELe,blockquote:TLe,code:RLe,br:NLe},LLe={baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,xhtml:!1};function FLe(n){let e,t;return e=new Jf({props:{tokens:n[0],renderers:n[1]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.tokens=r[0]),i&2&&(o.renderers=r[1]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function zLe(n,e,t){let r,i,o,s,{source:a=[]}=e,{renderers:l={}}=e,{options:u={}}=e,{isInline:c=!1}=e;const f=Ga();let d,h,p;return dg(QK,{slug:m=>i?i.slug(m):"",getOptions:()=>o}),Tn(()=>{t(7,p=!0)}),n.$$set=m=>{"source"in m&&t(2,a=m.source),"renderers"in m&&t(3,l=m.renderers),"options"in m&&t(4,u=m.options),"isInline"in m&&t(5,c=m.isInline)},n.$$.update=()=>{n.$$.dirty&4&&t(8,r=Array.isArray(a)),n.$$.dirty&4&&(i=a?new pw:void 0),n.$$.dirty&16&&t(9,o={...LLe,...u}),n.$$.dirty&869&&(r?t(0,d=a):(t(6,h=new Ps(o)),t(0,d=c?h.inlineTokens(a):h.lex(a)),f("parsed",{tokens:d}))),n.$$.dirty&8&&t(1,s={...BLe,...l}),n.$$.dirty&385&&p&&!r&&f("parsed",{tokens:d})},[d,s,a,l,u,c,h,p,r,o]}class jLe extends ye{constructor(e){super(),be(this,e,zLe,FLe,Be,{source:2,renderers:3,options:4,isInline:5})}}function HLe(n){let e,t,r,i,o,s,a;const l=[qLe,WLe],u=[];function c(f,d){return f[3]?0:1}return e=c(n),t=u[e]=l[e](n),{c(){t.c(),r=K(),i=B("button"),i.textContent="Edit",C(i,"class","button is-light")},m(f,d){u[e].m(f,d),H(f,r,d),H(f,i,d),o=!0,s||(a=le(i,"click",n[6]),s=!0)},p(f,d){let h=e;e=c(f),e===h?u[e].p(f,d):(de(),D(u[h],1,1,()=>{u[h]=null}),he(),t=u[e],t?t.p(f,d):(t=u[e]=l[e](f),t.c()),x(t,1),t.m(r.parentNode,r))},i(f){o||(x(t),o=!0)},o(f){D(t),o=!1},d(f){u[e].d(f),f&&j(r),f&&j(i),s=!1,a()}}}function VLe(n){let e,t,r,i,o,s,a;function l(c){n[5](c)}let u={};return n[1].body!==void 0&&(u.html=n[1].body),e=new ONe({props:u}),rt.push(()=>fr(e,"html",l)),{c(){$(e.$$.fragment),r=K(),i=B("button"),i.textContent="Save",C(i,"class","button is-primary")},m(c,f){Q(e,c,f),H(c,r,f),H(c,i,f),o=!0,s||(a=le(i,"click",n[4]),s=!0)},p(c,f){const d={};!t&&f&2&&(t=!0,d.html=c[1].body,cr(()=>t=!1)),e.$set(d)},i(c){o||(x(e.$$.fragment,c),o=!0)},o(c){D(e.$$.fragment,c),o=!1},d(c){Z(e,c),c&&j(r),c&&j(i),s=!1,a()}}}function WLe(n){let e,t;return e=new jLe({props:{source:n[1].body}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&2&&(o.source=r[1].body),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function qLe(n){let e,t=n[1].body+"";return{c(){e=B("div"),C(e,"class","prose"),C(e,"tabindex","0")},m(r,i){H(r,e,i),e.innerHTML=t},p(r,i){i&2&&t!==(t=r[1].body+"")&&(e.innerHTML=t)},i:pe,o:pe,d(r){r&&j(e)}}}function ULe(n){let e,t,r=n[1].title+"",i,o,s,a,l;const u=[VLe,HLe],c=[];function f(d,h){return d[2]?0:1}return s=f(n),a=c[s]=u[s](n),{c(){e=B("div"),t=B("h2"),i=Se(r),o=K(),a.c(),C(t,"class","svelte-gdgq5o"),C(e,"class","box wrapper svelte-gdgq5o")},m(d,h){H(d,e,h),T(e,t),T(t,i),T(e,o),c[s].m(e,null),l=!0},p(d,h){(!l||h&2)&&r!==(r=d[1].title+"")&&ze(i,r);let p=s;s=f(d),s===p?c[s].p(d,h):(de(),D(c[p],1,1,()=>{c[p]=null}),he(),a=c[s],a?a.p(d,h):(a=c[s]=u[s](d),a.c()),x(a,1),a.m(e,null))},i(d){l||(x(a),l=!0)},o(d){D(a),l=!1},d(d){d&&j(e),c[s].d()}}}function GLe(n){let e,t,r;function i(s){n[7](s)}let o={$$slots:{default:[ULe]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.active=n[0]),e=new ex({props:o}),rt.push(()=>fr(e,"active",i)),{c(){$(e.$$.fragment)},m(s,a){Q(e,s,a),r=!0},p(s,[a]){const l={};a&1038&&(l.$$scope={dirty:a,ctx:s}),!t&&a&1&&(t=!0,l.active=s[0],cr(()=>t=!1)),e.$set(l)},i(s){r||(x(e.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),r=!1},d(s){Z(e,s)}}}function KLe(n,e,t){let r,i;nn(n,Na,h=>t(8,i=h));let{active:o=!1}=e,{item:s}=e,a=!1;async function l(){if(i)try{const h=await Yo("get_document",{document_id:s.id});h!=null&&h.document&&t(1,s=h.document)}catch(h){console.error("Failed to load document",h)}}async function u(){if(!i){t(2,a=!1);return}try{await Yo("create_document",{document:s}),t(2,a=!1)}catch(h){console.error("Failed to save document",h)}}function c(h){n.$$.not_equal(s.body,h)&&(s.body=h,t(1,s))}const f=()=>t(2,a=!0);function d(h){o=h,t(0,o)}return n.$$set=h=>{"active"in h&&t(0,o=h.active),"item"in h&&t(1,s=h.item)},n.$$.update=()=>{n.$$.dirty&7&&o&&s&&!a&&l(),n.$$.dirty&2&&t(3,r=/<\w+/.test((s==null?void 0:s.body)??""))},[o,s,a,r,u,c,f,d]}class JLe extends ye{constructor(e){super(),be(this,e,KLe,GLe,Be,{active:0,item:1})}}async function ZK(n){return Yo("tauri",n)}async function YLe(n,e){return ZK({__tauriModule:"Event",message:{cmd:"unlisten",event:n,eventId:e}})}async function XLe(n,e,t){return ZK({__tauriModule:"Event",message:{cmd:"listen",event:n,windowLabel:e,handler:vS(t)}}).then(r=>async()=>YLe(n,r))}var gN;(function(n){n.WINDOW_RESIZED="tauri://resize",n.WINDOW_MOVED="tauri://move",n.WINDOW_CLOSE_REQUESTED="tauri://close-requested",n.WINDOW_CREATED="tauri://window-created",n.WINDOW_DESTROYED="tauri://destroyed",n.WINDOW_FOCUS="tauri://focus",n.WINDOW_BLUR="tauri://blur",n.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",n.WINDOW_THEME_CHANGED="tauri://theme-changed",n.WINDOW_FILE_DROP="tauri://file-drop",n.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",n.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",n.MENU="tauri://menu",n.CHECK_UPDATE="tauri://update",n.UPDATE_AVAILABLE="tauri://update-available",n.INSTALL_UPDATE="tauri://update-install",n.STATUS_UPDATE="tauri://update-status",n.DOWNLOAD_PROGRESS="tauri://update-download-progress"})(gN||(gN={}));async function QLe(n,e){return XLe(n,null,e)}function vN(n,e,t){const r=n.slice();return r[9]=e[t],r}function bN(n){let e,t=n[9].name+"",r,i;return{c(){e=B("option"),r=Se(t),e.__value=i=n[9].name,e.value=e.__value},m(o,s){H(o,e,s),T(e,r)},p(o,s){s&1&&t!==(t=o[9].name+"")&&ze(r,t),s&1&&i!==(i=o[9].name)&&(e.__value=i,e.value=e.__value)},d(o){o&&j(e)}}}function ZLe(n){let e,t,r,i,o,s,a=n[0],l=[];for(let u=0;u<a.length;u+=1)l[u]=bN(vN(n,a,u));return{c(){e=B("div"),t=B("div"),r=B("div"),i=B("select");for(let u=0;u<l.length;u+=1)l[u].c();C(r,"class","select"),C(t,"class","control"),C(e,"class","field is-grouped is-grouped-right")},m(u,c){H(u,e,c),T(e,t),T(t,r),T(r,i);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(i,null);ma(i,n[1]),o||(s=le(i,"change",n[2]),o=!0)},p(u,[c]){if(c&1){a=u[0];let f;for(f=0;f<a.length;f+=1){const d=vN(u,a,f);l[f]?l[f].p(d,c):(l[f]=bN(d),l[f].c(),l[f].m(i,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}c&3&&ma(i,u[1])},i:pe,o:pe,d(u){u&&j(e),rn(l,u),o=!1,s()}}}function $Le(n,e,t){let r,i,o,s;nn(n,xa,d=>t(5,r=d)),nn(n,Na,d=>t(6,i=d)),nn(n,BA,d=>t(0,o=d)),nn(n,v0,d=>t(1,s=d));let a="";async function l(){try{Na.set(window.__TAURI__!==void 0),i?(console.log("Loading config from Tauri"),Yo("get_config").then(d=>{console.log("get_config response",d),d&&d.status==="success"&&u(d.config)}).catch(d=>console.error("Error fetching config in Tauri:",d))):(console.log("Loading config from server"),a=`${Jd.ServerURL}/config/`,fetch(a).then(d=>d.json()).then(d=>{console.log("Config received",d),d&&d.status==="success"&&u(d.config)}).catch(d=>console.error("Error fetching config:",d)))}catch(d){console.error("Unhandled error in loadConfig:",d)}}function u(d){var g;console.log("Updating stores from config:",d);const h={default_role:d.selected_role,...d};xa.set(h);const p=Object.entries(d.roles).map(([v,b])=>({name:v,...b}));BA.set(p),v0.set(d.selected_role);const m=d.roles[d.selected_role];if(console.log("Selected role settings:",m),m){const v=m.theme||"spacelab";console.log("Setting theme to:",v),g0.set(v),(g=m.kg)!=null&&g.publish?i&&Yo("publish_thesaurus",{roleName:d.selected_role}).then(b=>{console.log("publish_thesaurus response",b),D3.set(b),Qp.set(!0)}):Qp.set(!1)}else console.warn("No role settings found for:",d.selected_role),g0.set("spacelab")}typeof window<"u"&&window.__TAURI__&&QLe("role_changed",d=>{console.log("Role changed event received from backend:",d.payload),u(d.payload)});async function c(){await l()}c(),console.log("Using Terraphim Server URL:",Jd.ServerURL);function f(d){var v;const p=d.target.value;console.log("Role change requested:",p),v0.set(p);const m=o.find(b=>b.name===p);if(!m){console.error(`No role settings found for role: ${p}.`);return}const g=m.theme||"spacelab";g0.set(g),console.log(`Theme changed to ${g}`),xa.update(b=>(b.selected_role=p,b)),i?(Yo("select_role",{roleName:p}).catch(b=>console.error("Error selecting role:",b)),(v=m.kg)!=null&&v.publish?(console.log("Publishing thesaurus for role",p),Yo("publish_thesaurus",{roleName:p}).then(b=>{D3.set(b),Qp.set(!0)})):Qp.set(!1)):fetch(`${Jd.ServerURL}/config/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(b=>console.error("Error updating config on server:",b))}return[o,s,f,l]}class db extends ye{constructor(e){super(),be(this,e,$Le,ZLe,Be,{loadConfig:3})}get loadConfig(){return this.$$.ctx[3]}}function yN(n,e,t){const r=n.slice();return r[5]=e[t],r}function _N(n){let e,t;return e=new aB({props:{$$slots:{default:[tFe]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&257&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function eFe(n){let e=n[5]+"",t;return{c(){t=Se(e)},m(r,i){H(r,t,i)},p(r,i){i&1&&e!==(e=r[5]+"")&&ze(t,e)},d(r){r&&j(t)}}}function wN(n){let e,t,r,i;return t=new sB({props:{rounded:!0,$$slots:{default:[eFe]},$$scope:{ctx:n}}}),{c(){e=B("a"),$(t.$$.fragment),C(e,"href",r="https://terraphim.github.io/terraphim-project/#/page/"+n[5]),C(e,"target","_blank")},m(o,s){H(o,e,s),Q(t,e,null),i=!0},p(o,s){const a={};s&257&&(a.$$scope={dirty:s,ctx:o}),t.$set(a),(!i||s&1&&r!==(r="https://terraphim.github.io/terraphim-project/#/page/"+o[5]))&&C(e,"href",r)},i(o){i||(x(t.$$.fragment,o),i=!0)},o(o){D(t.$$.fragment,o),i=!1},d(o){o&&j(e),Z(t)}}}function tFe(n){let e,t,r=n[0].tags,i=[];for(let s=0;s<r.length;s+=1)i[s]=wN(yN(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a&1){r=s[0].tags;let l;for(l=0;l<r.length;l+=1){const u=yN(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=wN(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function nFe(n){let e,t=n[0].rank+"",r;return{c(){e=Se("Rank "),r=Se(t)},m(i,o){H(i,e,o),H(i,r,o)},p(i,o){o&1&&t!==(t=i[0].rank+"")&&ze(r,t)},d(i){i&&j(e),i&&j(r)}}}function rFe(n){let e,t;return e=new sB({props:{rounded:!0,$$slots:{default:[nFe]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&257&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function kN(n){let e,t,r;return{c(){e=B("a"),t=B("span"),t.innerHTML='<i class="fas fa-link"></i>',C(t,"class","icon is-medium"),C(e,"href",r=n[0].url),C(e,"target","_blank"),C(e,"class","level-item"),C(e,"aria-label","URL")},m(i,o){H(i,e,o),T(e,t)},p(i,o){o&1&&r!==(r=i[0].url)&&C(e,"href",r)},d(i){i&&j(e)}}}function iFe(n){let e,t,r,i,o,s,a,l,u,c,f,d,h=n[0].title+"",p,m,g,v,b=(n[0].description||"No description available")+"",w,_,y,k,S,E,M,R,O,I,P,A,N,F,V,W,L,z,q,te,re,ne=n[0].tags&&_N(n);l=new aB({props:{$$slots:{default:[rFe]},$$scope:{ctx:n}}});let fe="url"in n[0]&&kN(n);function ie(ae){n[3](ae)}let G={item:n[0]};return n[1]!==void 0&&(G.active=n[1]),L=new JLe({props:G}),rt.push(()=>fr(L,"active",ie)),{c(){e=B("div"),t=B("article"),r=B("div"),i=B("div"),o=B("div"),ne&&ne.c(),s=K(),a=B("div"),$(l.$$.fragment),u=K(),c=B("div"),f=B("button"),d=B("h2"),p=Se(h),m=K(),g=B("small"),v=Se("Description: "),w=Se(b),_=K(),y=B("br"),S=K(),E=B("div"),M=B("nav"),R=B("div"),fe&&fe.c(),O=K(),I=B("a"),I.innerHTML='<span class="icon is-medium"><i class="fas fa-plus" aria-hidden="true"></i></span>',P=K(),A=B("a"),N=B("span"),N.innerHTML='<i class="fas fa-code" aria-hidden="true"></i>',W=K(),$(L.$$.fragment),C(o,"class","level-right"),C(a,"class","level-right"),C(d,"class","title svelte-1sikyk6"),C(f,"class","svelte-1sikyk6"),C(i,"class","content"),C(I,"href","#"),C(I,"class","level-item"),C(I,"aria-label","like"),C(N,"class","icon is-medium"),C(A,"href",F=`vscode://${encodeURIComponent(n[0].title)}.md?${encodeURIComponent(n[0].body)}`),C(A,"class","level-item"),C(A,"aria-label","Open in VSCode"),C(R,"class","level-right"),C(M,"class","level is-mobile"),C(E,"class","level-right"),C(r,"class","media-content"),C(t,"class","media"),C(e,"class","box")},m(ae,Me){H(ae,e,Me),T(e,t),T(t,r),T(r,i),T(i,o),ne&&ne.m(o,null),T(i,s),T(i,a),Q(l,a,null),T(i,u),T(i,c),T(c,f),T(f,d),T(d,p),T(c,m),T(c,g),T(g,v),T(g,w),T(c,_),T(c,y),T(r,S),T(r,E),T(E,M),T(M,R),fe&&fe.m(R,null),T(R,O),T(R,I),T(R,P),T(R,A),T(A,N),H(ae,W,Me),Q(L,ae,Me),q=!0,te||(re=le(f,"click",n[2]),te=!0)},p(ae,[Me]){ae[0].tags?ne?(ne.p(ae,Me),Me&1&&x(ne,1)):(ne=_N(ae),ne.c(),x(ne,1),ne.m(o,null)):ne&&(de(),D(ne,1,1,()=>{ne=null}),he());const X={};Me&257&&(X.$$scope={dirty:Me,ctx:ae}),l.$set(X),(!q||Me&1)&&h!==(h=ae[0].title+"")&&ze(p,h),(!q||Me&1)&&b!==(b=(ae[0].description||"No description available")+"")&&ze(w,b),"url"in ae[0]?fe?fe.p(ae,Me):(fe=kN(ae),fe.c(),fe.m(R,O)):fe&&(fe.d(1),fe=null),(!q||Me&1&&F!==(F=`vscode://${encodeURIComponent(ae[0].title)}.md?${encodeURIComponent(ae[0].body)}`))&&C(A,"href",F);const ge={};Me&1&&(ge.item=ae[0]),!z&&Me&2&&(z=!0,ge.active=ae[1],cr(()=>z=!1)),L.$set(ge)},i(ae){q||(x(ne),x(l.$$.fragment,ae),Tr(()=>{q&&(k||(k=Ai(c,vl,{},!0)),k.run(1))}),Tr(()=>{q&&(V||(V=Ai(M,vl,{},!0)),V.run(1))}),x(L.$$.fragment,ae),q=!0)},o(ae){D(ne),D(l.$$.fragment,ae),k||(k=Ai(c,vl,{},!1)),k.run(0),V||(V=Ai(M,vl,{},!1)),V.run(0),D(L.$$.fragment,ae),q=!1},d(ae){ae&&j(e),ne&&ne.d(),Z(l),ae&&k&&k.end(),fe&&fe.d(),ae&&V&&V.end(),ae&&j(W),Z(L,ae),te=!1,re()}}}function oFe(n,e,t){let r;nn(n,v0,l=>t(4,r=l));let{document:i}=e,o=!1;const s=()=>{t(1,o=!0)};db[r]!==void 0&&(console.log("Have attribute",db[r]),db[r].hasOwnProperty("enableLogseq")?console.log("enable logseq True"):console.log("Didn't make it"));function a(l){o=l,t(1,o)}return n.$$set=l=>{"document"in l&&t(0,i=l.document)},[i,o,s,a]}class sFe extends ye{constructor(e){super(),be(this,e,oFe,iFe,Be,{document:0})}}const aFe="/assets/terraphim_gray.png";function CN(n,e,t){const r=n.slice();return r[18]=e[t],r}function SN(n,e,t){const r=n.slice();return r[21]=e[t],r[23]=t,r}function xN(n){let e,t=n[2],r=[];for(let i=0;i<t.length;i+=1)r[i]=EN(SN(n,t,i));return{c(){e=B("ul");for(let i=0;i<r.length;i+=1)r[i].c();C(e,"class","suggestions svelte-13t09eu")},m(i,o){H(i,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(i,o){if(o&524){t=i[2];let s;for(s=0;s<t.length;s+=1){const a=SN(i,t,s);r[s]?r[s].p(a,o):(r[s]=EN(a),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},d(i){i&&j(e),rn(r,i)}}}function EN(n){let e,t=n[21]+"",r,i,o,s;function a(){return n[13](n[21])}return{c(){e=B("li"),r=Se(t),i=K(),C(e,"class","svelte-13t09eu"),oe(e,"active",n[23]===n[3])},m(l,u){H(l,e,u),T(e,r),T(e,i),o||(s=le(e,"click",a),o=!0)},p(l,u){n=l,u&4&&t!==(t=n[21]+"")&&ze(r,t),u&8&&oe(e,"active",n[23]===n[3])},d(l){l&&j(e),o=!1,s()}}}function lFe(n){let e,t,r,i,o;function s(u){n[12](u)}let a={type:"search",placeholder:n[6]?`Search over Knowledge graph for ${n[4]}`:"Search",icon:"search",expanded:!0,autofocus:!0};n[5]!==void 0&&(a.value=n[5]),t=new mg({props:a}),rt.push(()=>fr(t,"value",s)),t.$on("click",n[10]),t.$on("submit",n[10]),t.$on("keydown",n[8]),t.$on("input",n[7]);let l=n[2].length>0&&xN(n);return{c(){e=B("div"),$(t.$$.fragment),i=K(),l&&l.c(),C(e,"class","input-wrapper svelte-13t09eu")},m(u,c){H(u,e,c),Q(t,e,null),T(e,i),l&&l.m(e,null),o=!0},p(u,c){const f={};c&80&&(f.placeholder=u[6]?`Search over Knowledge graph for ${u[4]}`:"Search"),!r&&c&32&&(r=!0,f.value=u[5],cr(()=>r=!1)),t.$set(f),u[2].length>0?l?l.p(u,c):(l=xN(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(u){o||(x(t.$$.fragment,u),o=!0)},o(u){D(t.$$.fragment,u),o=!1},d(u){u&&j(e),Z(t),l&&l.d()}}}function uFe(n){let e,t,r,i,o,s;return{c(){e=B("section"),t=B("div"),r=B("img"),o=K(),s=B("p"),s.textContent="I am Terraphim, your personal assistant.",E3(r.src,i=aFe)||C(r,"src",i),C(r,"alt","Terraphim Logo"),C(r,"class","svelte-13t09eu"),C(t,"class","content has-text-grey has-text-centered svelte-13t09eu"),C(e,"class","section")},m(a,l){H(a,e,l),T(e,t),T(t,r),T(t,o),T(t,s)},p:pe,i:pe,o:pe,d(a){a&&j(e)}}}function cFe(n){let e,t,r=n[0],i=[];for(let s=0;s<r.length;s+=1)i[s]=AN(CN(n,r,s));const o=s=>D(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ze()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);H(s,e,a),t=!0},p(s,a){if(a&1){r=s[0];let l;for(l=0;l<r.length;l+=1){const u=CN(s,r,l);i[l]?(i[l].p(u,a),x(i[l],1)):(i[l]=AN(u),i[l].c(),x(i[l],1),i[l].m(e.parentNode,e))}for(de(),l=r.length;l<i.length;l+=1)o(l);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)x(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)D(i[a]);t=!1},d(s){rn(i,s),s&&j(e)}}}function fFe(n){let e,t;return{c(){e=B("p"),t=Se(n[1]),C(e,"class","error svelte-13t09eu")},m(r,i){H(r,e,i),T(e,t)},p(r,i){i&2&&ze(t,r[1])},i:pe,o:pe,d(r){r&&j(e)}}}function AN(n){let e,t;return e=new sFe({props:{document:n[18]}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.document=r[18]),e.$set(o)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function dFe(n){let e,t,r,i,o,s,a,l,u;t=new Pu({props:{$$slots:{default:[lFe]},$$scope:{ctx:n}}});const c=[fFe,cFe,uFe],f=[];function d(h,p){return h[1]?0:h[0].length?1:2}return i=d(n),o=f[i]=c[i](n),{c(){e=B("form"),$(t.$$.fragment),r=K(),o.c(),s=Ze()},m(h,p){H(h,e,p),Q(t,e,null),H(h,r,p),f[i].m(h,p),H(h,s,p),a=!0,l||(u=le(e,"submit",Pa(n[10])),l=!0)},p(h,[p]){const m={};p&16777340&&(m.$$scope={dirty:p,ctx:h}),t.$set(m);let g=i;i=d(h),i===g?f[i].p(h,p):(de(),D(f[g],1,1,()=>{f[g]=null}),he(),o=f[i],o?o.p(h,p):(o=f[i]=c[i](h),o.c()),x(o,1),o.m(s.parentNode,s))},i(h){a||(x(t.$$.fragment,h),x(o),a=!0)},o(h){D(t.$$.fragment,h),D(o),a=!1},d(h){h&&j(e),Z(t),h&&j(r),f[i].d(h),h&&j(s),l=!1,u()}}}function hFe(n,e,t){let r,i,o,s,a,l,u;nn(n,IJ,y=>t(15,i=y)),nn(n,v0,y=>t(4,o=y)),nn(n,vw,y=>t(5,s=y)),nn(n,Na,y=>t(16,a=y)),nn(n,D3,y=>t(11,l=y)),nn(n,Qp,y=>t(6,u=y));let c=[],f=null,d=[],h=-1;function p(y){const k=y.trim().toLowerCase();return k.length===0?[]:r.filter(([E])=>E.toLowerCase().includes(k)).map(([E])=>E).slice(0,5)}function m(y){const k=y.target;if(!k||k.selectionStart==null)return;const S=k.selectionStart,M=s.slice(0,S).split(/\s+/),R=M[M.length-1];t(2,d=p(R)),t(3,h=-1)}function g(y){d.length!==0&&(y.key==="ArrowDown"?(y.preventDefault(),t(3,h=(h+1)%d.length)):y.key==="ArrowUp"?(y.preventDefault(),t(3,h=(h-1+d.length)%d.length)):(y.key==="Enter"||y.key==="Tab")&&h!==-1&&(y.preventDefault(),v(d[h])))}function v(y){var O;const k=document.querySelector('input[type="search"]'),S=(k==null?void 0:k.selectionStart)??0,E=s.slice(0,S),M=s.slice(S),R=E.split(/\s+/);R[R.length-1]=y,pJ(vw,s=[...R,M].join(" "),s),(O=k==null?void 0:k.setSelectionRange)==null||O.call(k,S+y.length,S+y.length),t(2,d=[]),t(3,h=-1)}async function b(){if(t(1,f=null),a)try{const y=await Yo("search",{searchQuery:{search_term:s,skip:0,limit:10,role:o}});y.status==="success"?(t(0,c=y.results),console.log("Response results"),console.log(c)):(t(1,f=`Search failed: ${y.status}`),console.error("Search failed:",y))}catch(y){t(1,f=`Error in Tauri search: ${y}`),console.error("Error in Tauri search:",y)}else{if(!s.trim())return;const y=JSON.stringify({search_term:s,skip:0,limit:10,role:o});try{const k=await fetch(i,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:y}),S=await k.json();if(!k.ok)throw new Error(`HTTP error! Status: ${k.status}`);t(0,c=S.results)}catch(k){console.error("Error fetching data:",k),t(1,f=`Error fetching data: ${k}`)}}}function w(y){s=y,vw.set(s)}const _=y=>v(y);return n.$$.update=()=>{n.$$.dirty&2048&&(r=Object.entries(l))},[c,f,d,h,o,s,u,m,g,v,b,l,w,_]}class pFe extends ye{constructor(e){super(),be(this,e,hFe,dFe,Be,{})}}function MN(n,e,t){const r=n.slice();return r[32]=e[t],r[33]=e,r[34]=t,r}function TN(n,e,t){const r=n.slice();return r[35]=e[t],r[36]=e,r[37]=t,r}function ON(n,e,t){const r=n.slice();return r[29]=e[t],r}function mFe(n){let e,t,r,i=JSON.stringify(n[1],null,2)+"",o;return{c(){e=B("h4"),e.textContent="Review",t=K(),r=B("pre"),o=Se(i),C(e,"class","title is-5"),sr(r,"max-height","300px"),sr(r,"overflow","auto")},m(s,a){H(s,e,a),H(s,t,a),H(s,r,a),T(r,o)},p(s,a){a[0]&2&&i!==(i=JSON.stringify(s[1],null,2)+"")&&ze(o,i)},d(s){s&&j(e),s&&j(t),s&&j(r)}}}function gFe(n){let e,t,r=[],i=new Map,o,s,a,l,u=n[1].roles;const c=f=>f[32].name;for(let f=0;f<u.length;f+=1){let d=MN(n,u,f),h=c(d);i.set(h,r[f]=RN(h,d))}return{c(){e=B("h4"),e.textContent="Roles",t=K();for(let f=0;f<r.length;f+=1)r[f].c();o=K(),s=B("button"),s.textContent="Add Role",C(e,"class","title is-5"),C(s,"class","button is-link is-light")},m(f,d){H(f,e,d),H(f,t,d);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(f,d);H(f,o,d),H(f,s,d),a||(l=le(s,"click",n[5]),a=!0)},p(f,d){d[0]&450&&(u=f[1].roles,r=zs(r,d,c,1,f,u,i,o.parentNode,KN,RN,o,MN))},d(f){f&&j(e),f&&j(t);for(let d=0;d<r.length;d+=1)r[d].d(f);f&&j(o),f&&j(s),a=!1,l()}}}function vFe(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S,E,M,R,O,I,P,A,N=n[1].roles,F=[];for(let V=0;V<N.length;V+=1)F[V]=PN(ON(n,N,V));return{c(){e=B("div"),t=B("label"),t.textContent="Configuration ID",r=K(),i=B("div"),o=B("div"),s=B("select"),a=B("option"),a.textContent="Desktop",l=B("option"),l.textContent="Server",u=B("option"),u.textContent="Embedded",c=K(),f=B("div"),d=B("label"),d.textContent="Global shortcut",h=K(),p=B("div"),m=B("input"),g=K(),v=B("div"),b=B("label"),b.textContent="Default theme",w=K(),_=B("div"),y=B("input"),k=K(),S=B("div"),E=B("label"),E.textContent="Default Role",M=K(),R=B("div"),O=B("div"),I=B("select");for(let V=0;V<F.length;V+=1)F[V].c();C(t,"class","label"),a.__value="Desktop",a.value=a.__value,l.__value="Server",l.value=l.__value,u.__value="Embedded",u.value=u.__value,n[1].id===void 0&&Tr(()=>n[10].call(s)),C(o,"class","select"),C(i,"class","control"),C(e,"class","field"),C(d,"class","label"),C(m,"class","input"),C(m,"type","text"),C(p,"class","control"),C(f,"class","field"),C(b,"class","label"),C(y,"class","input"),C(y,"type","text"),C(_,"class","control"),C(v,"class","field"),C(E,"class","label"),n[1].default_role===void 0&&Tr(()=>n[13].call(I)),C(O,"class","select"),C(R,"class","control"),C(S,"class","field")},m(V,W){H(V,e,W),T(e,t),T(e,r),T(e,i),T(i,o),T(o,s),T(s,a),T(s,l),T(s,u),ma(s,n[1].id,!0),H(V,c,W),H(V,f,W),T(f,d),T(f,h),T(f,p),T(p,m),In(m,n[1].global_shortcut),H(V,g,W),H(V,v,W),T(v,b),T(v,w),T(v,_),T(_,y),In(y,n[1].default_theme),H(V,k,W),H(V,S,W),T(S,E),T(S,M),T(S,R),T(R,O),T(O,I);for(let L=0;L<F.length;L+=1)F[L]&&F[L].m(I,null);ma(I,n[1].default_role,!0),P||(A=[le(s,"change",n[10]),le(m,"input",n[11]),le(y,"input",n[12]),le(I,"change",n[13])],P=!0)},p(V,W){if(W[0]&2&&ma(s,V[1].id),W[0]&2&&m.value!==V[1].global_shortcut&&In(m,V[1].global_shortcut),W[0]&2&&y.value!==V[1].default_theme&&In(y,V[1].default_theme),W[0]&2){N=V[1].roles;let L;for(L=0;L<N.length;L+=1){const z=ON(V,N,L);F[L]?F[L].p(z,W):(F[L]=PN(z),F[L].c(),F[L].m(I,null))}for(;L<F.length;L+=1)F[L].d(1);F.length=N.length}W[0]&2&&ma(I,V[1].default_role)},d(V){V&&j(e),V&&j(c),V&&j(f),V&&j(g),V&&j(v),V&&j(k),V&&j(S),rn(F,V),P=!1,It(A)}}}function DN(n){let e,t,r,i,o,s,a,l,u,c,f;function d(){n[18].call(r,n[34],n[37])}function h(){n[19].call(s,n[34],n[37])}function p(){return n[20](n[34],n[37])}return{c(){e=B("div"),t=B("div"),r=B("input"),i=K(),o=B("label"),s=B("input"),a=Se(`
              Read-only`),l=K(),u=B("button"),u.textContent="-",C(r,"class","input"),C(r,"type","text"),C(r,"placeholder","/path/to/haystack"),C(t,"class","control is-expanded"),C(s,"type","checkbox"),C(o,"class","checkbox"),sr(o,"margin-right","0.5rem"),C(u,"class","button is-small is-danger"),C(e,"class","field is-grouped")},m(m,g){H(m,e,g),T(e,t),T(t,r),In(r,n[1].roles[n[34]].haystacks[n[37]].path),T(e,i),T(e,o),T(o,s),s.checked=n[1].roles[n[34]].haystacks[n[37]].read_only,T(o,a),T(e,l),T(e,u),c||(f=[le(r,"input",d),le(s,"change",h),le(u,"click",p)],c=!0)},p(m,g){n=m,g[0]&2&&r.value!==n[1].roles[n[34]].haystacks[n[37]].path&&In(r,n[1].roles[n[34]].haystacks[n[37]].path),g[0]&2&&(s.checked=n[1].roles[n[34]].haystacks[n[37]].read_only)},d(m){m&&j(e),c=!1,It(f)}}}function RN(n,e){let t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S,E,M,R,O,I,P,A,N,F,V,W,L,z,q,te,re,ne,fe,ie,G,ae,Me,X,ge,U,Ce,Ee,Ae,De,nt,ue,Oe,Ue,_e,it,At,Ve,ct,Pt,yt,mn,En,Dn,Fn,we;function bt(){e[14].call(a,e[34])}function ve(){e[15].call(h,e[34])}function Ge(){e[16].call(w,e[34])}function $e(){e[17].call(M,e[34])}let me=e[32].haystacks,ft=[];for(let on=0;on<me.length;on+=1)ft[on]=DN(TN(e,me,on));function Gt(){return e[21](e[34])}function mt(){e[22].call(te,e[34])}function wt(){e[23].call(ae,e[34])}function Yr(){e[24].call(Ce,e[34])}function Dr(){e[25].call(_e,e[34])}function wi(){e[26].call(ct,e[34])}function rr(){return e[27](e[34])}return{key:n,first:null,c(){t=B("div"),r=B("div"),i=B("label"),i.textContent="Role name",o=K(),s=B("div"),a=B("input"),l=K(),u=B("div"),c=B("label"),c.textContent="Short name",f=K(),d=B("div"),h=B("input"),p=K(),m=B("div"),g=B("label"),g.textContent="Theme",v=K(),b=B("div"),w=B("input"),_=K(),y=B("div"),k=B("label"),k.textContent="Relevance function",S=K(),E=B("div"),M=B("input"),R=K(),O=B("h5"),O.textContent="Haystacks",I=K();for(let on=0;on<ft.length;on+=1)ft[on].c();P=K(),A=B("button"),A.textContent="Add Haystack",N=K(),F=B("h5"),F.textContent="Knowledge Graph",V=K(),W=B("div"),L=B("label"),L.textContent="Remote automata URL",z=K(),q=B("div"),te=B("input"),re=K(),ne=B("div"),fe=B("label"),fe.textContent="Local KG path",ie=K(),G=B("div"),ae=B("input"),Me=K(),X=B("div"),ge=B("div"),U=B("div"),Ce=B("select"),Ee=B("option"),Ee.textContent="markdown",Ae=B("option"),Ae.textContent="json",De=K(),nt=B("div"),nt.innerHTML='<label class="label">Local KG type</label>',ue=K(),Oe=B("div"),Ue=B("label"),_e=B("input"),it=Se(`
            Public`),At=K(),Ve=B("label"),ct=B("input"),Pt=Se(`
            Publish`),yt=K(),mn=B("hr"),En=K(),Dn=B("button"),Dn.textContent="Remove Role",C(i,"class","label"),C(a,"class","input"),C(a,"type","text"),C(s,"class","control"),C(r,"class","field"),C(c,"class","label"),C(h,"class","input"),C(h,"type","text"),C(d,"class","control"),C(u,"class","field"),C(g,"class","label"),C(w,"class","input"),C(w,"type","text"),C(b,"class","control"),C(m,"class","field"),C(k,"class","label"),C(M,"class","input"),C(M,"type","text"),C(E,"class","control"),C(y,"class","field"),C(O,"class","title is-6"),C(A,"class","button is-small"),C(F,"class","title is-6"),C(L,"class","label"),C(te,"class","input"),C(te,"type","text"),C(te,"placeholder","https://example.com/thesaurus.json"),C(q,"class","control"),C(W,"class","field"),C(fe,"class","label"),C(ae,"class","input"),C(ae,"type","text"),C(ae,"placeholder","/path/to/markdown"),C(G,"class","control"),C(ne,"class","field"),Ee.__value="markdown",Ee.value=Ee.__value,Ae.__value="json",Ae.value=Ae.__value,e[1].roles[e[34]].kg.local_type===void 0&&Tr(Yr),C(U,"class","select"),C(ge,"class","control"),C(nt,"class","control"),C(X,"class","field is-grouped"),C(_e,"type","checkbox"),C(Ue,"class","checkbox"),sr(Ue,"margin-right","1rem"),C(ct,"type","checkbox"),C(Ve,"class","checkbox"),C(Oe,"class","field is-grouped"),C(Dn,"class","button is-small is-danger"),C(t,"class","box"),this.first=t},m(on,ln){H(on,t,ln),T(t,r),T(r,i),T(r,o),T(r,s),T(s,a),In(a,e[1].roles[e[34]].name),T(t,l),T(t,u),T(u,c),T(u,f),T(u,d),T(d,h),In(h,e[1].roles[e[34]].shortname),T(t,p),T(t,m),T(m,g),T(m,v),T(m,b),T(b,w),In(w,e[1].roles[e[34]].theme),T(t,_),T(t,y),T(y,k),T(y,S),T(y,E),T(E,M),In(M,e[1].roles[e[34]].relevance_function),T(t,R),T(t,O),T(t,I);for(let gn=0;gn<ft.length;gn+=1)ft[gn]&&ft[gn].m(t,null);T(t,P),T(t,A),T(t,N),T(t,F),T(t,V),T(t,W),T(W,L),T(W,z),T(W,q),T(q,te),In(te,e[1].roles[e[34]].kg.url),T(t,re),T(t,ne),T(ne,fe),T(ne,ie),T(ne,G),T(G,ae),In(ae,e[1].roles[e[34]].kg.local_path),T(t,Me),T(t,X),T(X,ge),T(ge,U),T(U,Ce),T(Ce,Ee),T(Ce,Ae),ma(Ce,e[1].roles[e[34]].kg.local_type,!0),T(X,De),T(X,nt),T(t,ue),T(t,Oe),T(Oe,Ue),T(Ue,_e),_e.checked=e[1].roles[e[34]].kg.public,T(Ue,it),T(Oe,At),T(Oe,Ve),T(Ve,ct),ct.checked=e[1].roles[e[34]].kg.publish,T(Ve,Pt),T(t,yt),T(t,mn),T(t,En),T(t,Dn),Fn||(we=[le(a,"input",bt),le(h,"input",ve),le(w,"input",Ge),le(M,"input",$e),le(A,"click",Gt),le(te,"input",mt),le(ae,"input",wt),le(Ce,"change",Yr),le(_e,"change",Dr),le(ct,"change",wi),le(Dn,"click",rr)],Fn=!0)},p(on,ln){if(e=on,ln[0]&2&&a.value!==e[1].roles[e[34]].name&&In(a,e[1].roles[e[34]].name),ln[0]&2&&h.value!==e[1].roles[e[34]].shortname&&In(h,e[1].roles[e[34]].shortname),ln[0]&2&&w.value!==e[1].roles[e[34]].theme&&In(w,e[1].roles[e[34]].theme),ln[0]&2&&M.value!==e[1].roles[e[34]].relevance_function&&In(M,e[1].roles[e[34]].relevance_function),ln[0]&258){me=e[32].haystacks;let gn;for(gn=0;gn<me.length;gn+=1){const xr=TN(e,me,gn);ft[gn]?ft[gn].p(xr,ln):(ft[gn]=DN(xr),ft[gn].c(),ft[gn].m(t,P))}for(;gn<ft.length;gn+=1)ft[gn].d(1);ft.length=me.length}ln[0]&2&&te.value!==e[1].roles[e[34]].kg.url&&In(te,e[1].roles[e[34]].kg.url),ln[0]&2&&ae.value!==e[1].roles[e[34]].kg.local_path&&In(ae,e[1].roles[e[34]].kg.local_path),ln[0]&2&&ma(Ce,e[1].roles[e[34]].kg.local_type),ln[0]&2&&(_e.checked=e[1].roles[e[34]].kg.public),ln[0]&2&&(ct.checked=e[1].roles[e[34]].kg.publish)},d(on){on&&j(t),rn(ft,on),Fn=!1,It(we)}}}function PN(n){let e,t=n[29].name+"",r,i;return{c(){e=B("option"),r=Se(t),e.__value=i=n[29].name,e.value=e.__value},m(o,s){H(o,e,s),T(e,r)},p(o,s){s[0]&2&&t!==(t=o[29].name+"")&&ze(r,t),s[0]&2&&i!==(i=o[29].name)&&(e.__value=i,e.value=e.__value)},d(o){o&&j(e)}}}function IN(n){let e,t,r;return{c(){e=B("button"),e.textContent="Back",C(e,"class","button")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[4]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function bFe(n){let e,t,r;return{c(){e=B("button"),e.textContent="Save",C(e,"class","button is-success")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[9]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function yFe(n){let e,t,r;return{c(){e=B("button"),e.textContent="Next",C(e,"class","button is-primary")},m(i,o){H(i,e,o),t||(r=le(e,"click",n[3]),t=!0)},p:pe,d(i){i&&j(e),t=!1,r()}}}function _Fe(n){let e,t,r,i,o,s,a,l;function u(g,v){return g[0]===1?vFe:g[0]===2?gFe:mFe}let c=u(n),f=c(n),d=n[0]>1&&IN(n);function h(g,v){return g[0]<$K?yFe:bFe}let p=h(n),m=p(n);return{c(){e=B("div"),t=B("h3"),t.textContent="Configuration Wizard",r=K(),f.c(),i=K(),o=B("nav"),s=B("div"),d&&d.c(),a=K(),l=B("div"),m.c(),C(t,"class","title is-4"),C(s,"class","level-left"),C(l,"class","level-right"),C(o,"class","level"),C(e,"class","box")},m(g,v){H(g,e,v),T(e,t),T(e,r),f.m(e,null),T(e,i),T(e,o),T(o,s),d&&d.m(s,null),T(o,a),T(o,l),m.m(l,null)},p(g,v){c===(c=u(g))&&f?f.p(g,v):(f.d(1),f=c(g),f&&(f.c(),f.m(e,i))),g[0]>1?d?d.p(g,v):(d=IN(g),d.c(),d.m(s,null)):d&&(d.d(1),d=null),p===(p=h(g))&&m?m.p(g,v):(m.d(1),m=p(g),m&&(m.c(),m.m(l,null)))},i:pe,o:pe,d(g){g&&j(e),f.d(),d&&d.d(),m.d()}}}const $K=3;function wFe(n,e,t){let r;const i=Bn(null),o=Bn({id:"Desktop",global_shortcut:"Ctrl+X",default_theme:"spacelab",default_role:"Default",roles:[]});nn(n,o,F=>t(1,r=F)),Tn(async()=>{try{let F;Wo(Na)?F=await Yo("get_config_schema"):F=await(await fetch("/config/schema")).json(),i.set(F);const V=Wo(xa);V&&V.id&&o.update(W=>{var L;return{...W,id:V.id,global_shortcut:V.global_shortcut,default_theme:((L=V.roles[V.default_role])==null?void 0:L.theme)??"spacelab",default_role:V.default_role,roles:Object.values(V.roles).map(z=>{var ne,fe,ie,G,ae,Me,X;const q=(ne=z.kg)==null?void 0:ne.automata_path,te=(q==null?void 0:q.Remote)??"",re=((ie=(fe=z.kg)==null?void 0:fe.knowledge_graph_local)==null?void 0:ie.path)??"";return{name:z.name,shortname:z.shortname,relevance_function:z.relevance_function,theme:z.theme,haystacks:(z.haystacks??[]).map(ge=>({path:ge.path,read_only:ge.read_only??!1})),kg:{url:te,local_path:re,local_type:((ae=(G=z.kg)==null?void 0:G.knowledge_graph_local)==null?void 0:ae.input_type)??"markdown",public:((Me=z.kg)==null?void 0:Me.public)??!1,publish:((X=z.kg)==null?void 0:X.publish)??!1}}})}})}catch(F){console.error("Failed to load schema",F)}});let s=1;function a(){s<$K&&t(0,s+=1)}function l(){s>1&&t(0,s-=1)}function u(){o.update(F=>({...F,roles:[...F.roles,{name:"New Role",shortname:"new",relevance_function:"TitleScorer",theme:"spacelab",haystacks:[],kg:{url:"",local_path:"",local_type:"markdown",public:!1,publish:!1}}]}))}function c(F){o.update(V=>({...V,roles:V.roles.filter((W,L)=>L!==F)}))}function f(F){o.update(V=>(V.roles[F].haystacks.push({path:"",read_only:!1}),V))}function d(F,V){o.update(W=>(W.roles[F].haystacks=W.roles[F].haystacks.filter((L,z)=>z!==V),W))}async function h(){var z;const F=Wo(o),V=Wo(xa);let W={...V};W.id=F.id,W.global_shortcut=F.global_shortcut,W.default_role=F.default_role;const L={};F.roles.forEach(q=>{var ne,fe;const te=q.name,re=te.replace(/^"|"$/g,"");L[re]={extra:((fe=(ne=V.roles)==null?void 0:ne[te])==null?void 0:fe.extra)??{},name:q.name,shortname:q.shortname,theme:q.theme,relevance_function:q.relevance_function,haystacks:q.haystacks.map(ie=>({path:ie.path,service:"Ripgrep",read_only:ie.read_only})),kg:q.kg.url||q.kg.local_path?{automata_path:q.kg.url?{Remote:q.kg.url}:null,knowledge_graph_local:q.kg.local_path?{input_type:q.kg.local_type,path:q.kg.local_path}:null,public:q.kg.public,publish:q.kg.publish}:null}}),W.roles=L,(!W.default_role||!L[W.default_role])&&(W.default_role=((z=F.roles[0])==null?void 0:z.name)??"Default"),W.selected_role=W.default_role;try{Wo(Na)?await Yo("update_config",{configNew:W}):await fetch("/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}),xa.set(W),alert("Configuration saved")}catch(q){console.error(q),alert("Failed to save config")}}function p(){r.id=Lv(this),o.set(r)}function m(){r.global_shortcut=this.value,o.set(r)}function g(){r.default_theme=this.value,o.set(r)}function v(){r.default_role=Lv(this),o.set(r)}function b(F){r.roles[F].name=this.value,o.set(r)}function w(F){r.roles[F].shortname=this.value,o.set(r)}function _(F){r.roles[F].theme=this.value,o.set(r)}function y(F){r.roles[F].relevance_function=this.value,o.set(r)}function k(F,V){r.roles[F].haystacks[V].path=this.value,o.set(r)}function S(F,V){r.roles[F].haystacks[V].read_only=this.checked,o.set(r)}const E=(F,V)=>d(F,V),M=F=>f(F);function R(F){r.roles[F].kg.url=this.value,o.set(r)}function O(F){r.roles[F].kg.local_path=this.value,o.set(r)}function I(F){r.roles[F].kg.local_type=Lv(this),o.set(r)}function P(F){r.roles[F].kg.public=this.checked,o.set(r)}function A(F){r.roles[F].kg.publish=this.checked,o.set(r)}return[s,r,o,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S,E,M,R,O,I,P,A,F=>c(F)]}class kFe extends ye{constructor(e){super(),be(this,e,wFe,_Fe,Be,{},null,[-1,-1])}}function CFe(n){let e,t,r,i,o,s;return o=new sV({props:{content:n[0],onChange:n[1]}}),{c(){e=B("div"),t=B("p"),t.innerHTML="<i>The best editing experience is to configure Atomic Server, in the meantime use editor below. You will need to refresh page via Command R or Ctrl-R to see changes</i>",r=K(),i=B("div"),$(o.$$.fragment),C(i,"class","editor"),C(e,"class","box")},m(a,l){H(a,e,l),T(e,t),T(e,r),T(e,i),Q(o,i,null),s=!0},p(a,[l]){const u={};l&1&&(u.content=a[0]),o.$set(u)},i(a){s||(x(o.$$.fragment,a),s=!0)},o(a){D(o.$$.fragment,a),s=!1},d(a){a&&j(e),Z(o)}}}function SFe(n,e,t){let r,i;nn(n,xa,a=>t(2,r=a)),nn(n,Na,a=>t(3,i=a));let o={json:r};function s(a){if(console.log("contents changed:",a),console.log("is tauri",i),xa.update(l=>(l=a.json,l)),Wo(Na))console.log("Updating config on server"),Yo("update_config",{configNew:a.json}).then(l=>{console.log(`Message: ${l}`)}).catch(l=>console.error(l));else{let l=`${Jd.ServerURL}/config/`;fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.json)})}t(0,o=a)}return Tn(()=>{t(0,o={json:r})}),[o,s]}class xFe extends ye{constructor(e){super(),be(this,e,SFe,CFe,Be,{})}}function EFe(n){let e,t;return e=new pFe({}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function AFe(n){let e,t;return e=new v_e({}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function MFe(n){let e,t;return e=new kFe({}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function TFe(n){let e,t;return e=new xFe({}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),t=!0},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function OFe(n){let e;return{c(){e=B("nav"),e.innerHTML=`<div class="navbar-brand"><a class="navbar-item" href="/"><span class="icon" style="color: #333;"><i class="fas fa-home"></i></span></a> 
            <a class="navbar-item" href="/config/wizard">Wizard</a> 
            <a class="navbar-item" href="/config/json">JSONEditor</a> 
            <a class="navbar-item" href="/contacts">Contacts</a></div>`,C(e,"class","navbar")},m(t,r){H(t,e,r)},p:pe,d(t){t&&j(e)}}}function DFe(n){let e,t,r,i,o,s,a,l,u,c,f,d,h,p,m,g,v,b,w,_,y,k,S,E,M,R;return a=new db({}),c=new hu({props:{path:"/",$$slots:{default:[EFe]},$$scope:{ctx:n}}}),p=new hu({props:{path:"/fetch/*",$$slots:{default:[AFe]},$$scope:{ctx:n}}}),g=new hu({props:{path:"/config/wizard",$$slots:{default:[MFe]},$$scope:{ctx:n}}}),b=new hu({props:{path:"/config/json",$$slots:{default:[TFe]},$$scope:{ctx:n}}}),k=new hu({props:{path:"/",$$slots:{default:[OFe]},$$scope:{ctx:n}}}),{c(){e=B("meta"),t=K(),r=B("div"),i=B("main"),o=B("div"),s=B("div"),$(a.$$.fragment),l=K(),u=B("div"),$(c.$$.fragment),f=K(),d=B("br"),h=K(),$(p.$$.fragment),m=K(),$(g.$$.fragment),v=K(),$(b.$$.fragment),w=K(),_=B("footer"),y=B("div"),$(k.$$.fragment),C(e,"name","color-scheme"),C(e,"content",n[1]),document.title="Terraphim",C(s,"class","role-selector svelte-1bfpta4"),C(o,"class","top-controls svelte-1bfpta4"),C(u,"class","search-area svelte-1bfpta4"),C(i,"class","main-content svelte-1bfpta4"),C(y,"class",S=qn(n[0])+" svelte-1bfpta4"),C(_,"class","svelte-1bfpta4"),C(r,"class","is-full-height svelte-1bfpta4")},m(O,I){T(document.head,e),H(O,t,I),H(O,r,I),T(r,i),T(i,o),T(o,s),Q(a,s,null),T(i,l),T(i,u),Q(c,u,null),T(i,f),T(i,d),T(i,h),Q(p,i,null),T(i,m),Q(g,i,null),T(i,v),Q(b,i,null),T(r,w),T(r,_),T(_,y),Q(k,y,null),E=!0,M||(R=[le(_,"mouseover",n[2]),le(_,"focus",n[2])],M=!0)},p(O,[I]){(!E||I&2)&&C(e,"content",O[1]);const P={};I&8&&(P.$$scope={dirty:I,ctx:O}),c.$set(P);const A={};I&8&&(A.$$scope={dirty:I,ctx:O}),p.$set(A);const N={};I&8&&(N.$$scope={dirty:I,ctx:O}),g.$set(N);const F={};I&8&&(F.$$scope={dirty:I,ctx:O}),b.$set(F);const V={};I&8&&(V.$$scope={dirty:I,ctx:O}),k.$set(V),(!E||I&1&&S!==(S=qn(O[0])+" svelte-1bfpta4"))&&C(y,"class",S)},i(O){E||(x(a.$$.fragment,O),x(c.$$.fragment,O),x(p.$$.fragment,O),x(g.$$.fragment,O),x(b.$$.fragment,O),x(k.$$.fragment,O),E=!0)},o(O){D(a.$$.fragment,O),D(c.$$.fragment,O),D(p.$$.fragment,O),D(g.$$.fragment,O),D(b.$$.fragment,O),D(k.$$.fragment,O),E=!1},d(O){j(e),O&&j(t),O&&j(r),Z(a),Z(c),Z(p),Z(g),Z(b),Z(k),M=!1,It(R)}}}function RFe(n,e,t){let r;nn(n,g0,s=>t(1,r=s));let i="is-hidden";function o(){t(0,i="")}return[i,r,o]}class PFe extends ye{constructor(e){super(),be(this,e,RFe,DFe,Be,{})}}const IFe=new IQ;vX(IFe);new PFe({target:document.getElementById("app")})});export default NFe();
