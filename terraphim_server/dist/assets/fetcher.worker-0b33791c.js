(function(){"use strict";let n;async function g(o,s){try{const t=await(await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();console.log("posted"),console.log(t)}catch(e){console.log(e),n=e}}async function r(o,s,e=!1){let t;e&&(o=o+"?action=raw");try{if(t=await(await fetch(o)).json(),console.log(t),console.log("fetched now post"),e)console.log("is wiki"),console.log("Processing to be written");else{let i=t;for(let l=0;l<i.length;l++){let a=i[l];console.log(a),console.log("posting"),g(s,a)}}}catch(c){console.log(c),n=c}}onmessage=({data:{data:o,msg:s}})=>{console.log(s,o),r(o.url,o.postUrl,o.isWiki),postMessage({msg:"response1",data:{text:n}})}})();
