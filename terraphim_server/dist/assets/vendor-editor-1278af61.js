import{S as je,i as ze,s as xn,c as tn,a as Q,b as j,l as ue,t as C,g as ce,d as v,e as fe,u as nn,f as rn,h as on,j as z,k as yS,o as Ki,m as br,n as t2,p as bo,q as D,r as $,v as k,w as Zt,x as le,y as x,z as ee,A as Ei,B as te,C as fy,D as Kf,E as fn,F as ut,G as xO,H as ft,I as he,J as kS,K as us,L as yf,M as Qi,N as Ze,O as mn,P as yo,Q as eu,R as hd,T as wS,U as Tr,V as Dr,W as li,X as Vn,Y as we,Z as We,_ as vn,$ as an,a0 as hy,a1 as Js,a2 as Fl,a3 as MO,a4 as AO,a5 as Lr,a6 as Gf,a7 as _p,a8 as n2,a9 as EO}from"./vendor-ui-9d42ca49.js";const OO="modulepreload",TO=function(n){return"/"+n},dy={},DO=function(e,t,i){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=TO(o),o in dy)return;dy[o]=!0;const s=o.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const f=r[c];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":OO,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};var Fae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Wn(n,e=PO(n)){if(!e)return RO;const t=IO(n);return function(...r){console.log(`%c${n}`,`color:${t}`,...r)}}function PO(n){const e=NO("debug");return e!=null&&e.endsWith("*")?n.startsWith(e.slice(0,-1)):n===e}function RO(){}function NO(n){try{if(typeof window<"u"&&typeof window.localStorage<"u")return window.localStorage[n]}catch{}}function IO(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return py[Math.abs(e)%py.length]}const py=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"];const{window:BO}=t2;function my(n){let e,t,i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y,_=n[1].closeButton&&gy(n);var M=n[2];function w(S){return{}}return M&&(s=bo(M,w())),{c(){e=D("div"),t=D("div"),i=D("div"),_&&_.c(),r=Q(),o=D("div"),s&&$(s.$$.fragment),k(o,"class",l=Zt(n[1].classContent)+" svelte-n7cvum"),k(o,"style",n[9]),le(o,"content",!n[0]),k(i,"class",a=Zt(n[1].classWindow)+" svelte-n7cvum"),k(i,"role","dialog"),k(i,"aria-modal","true"),k(i,"aria-label",u=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),k(i,"aria-labelledby",c=n[1].ariaLabelledBy||null),k(i,"style",n[8]),le(i,"window",!n[0]),k(t,"class",h=Zt(n[1].classWindowWrap)+" svelte-n7cvum"),k(t,"style",n[7]),le(t,"wrap",!n[0]),k(e,"aria-hidden","true"),k(e,"id",d=n[1].id),k(e,"class",p=Zt(n[1].classBg)+" svelte-n7cvum"),k(e,"style",n[6]),le(e,"bg",!n[0])},m(S,E){j(S,e,E),x(e,t),x(t,i),_&&_.m(i,null),x(i,r),x(i,o),s&&ee(s,o,null),n[50](i),n[51](t),n[52](e),g=!0,b||(y=[ue(i,"introstart",function(){Ei(n[13])&&n[13].apply(this,arguments)}),ue(i,"outrostart",function(){Ei(n[14])&&n[14].apply(this,arguments)}),ue(i,"introend",function(){Ei(n[15])&&n[15].apply(this,arguments)}),ue(i,"outroend",function(){Ei(n[16])&&n[16].apply(this,arguments)}),ue(e,"mousedown",n[20]),ue(e,"mouseup",n[21])],b=!0)},p(S,E){if(n=S,n[1].closeButton?_?(_.p(n,E),E[0]&2&&C(_,1)):(_=gy(n),_.c(),C(_,1),_.m(i,r)):_&&(ce(),v(_,1,1,()=>{_=null}),fe()),E[0]&4&&M!==(M=n[2])){if(s){ce();const I=s;v(I.$$.fragment,1,0,()=>{te(I,1)}),fe()}M?(s=bo(M,w()),$(s.$$.fragment),C(s.$$.fragment,1),ee(s,o,null)):s=null}(!g||E[0]&2&&l!==(l=Zt(n[1].classContent)+" svelte-n7cvum"))&&k(o,"class",l),(!g||E[0]&512)&&k(o,"style",n[9]),(!g||E[0]&3)&&le(o,"content",!n[0]),(!g||E[0]&2&&a!==(a=Zt(n[1].classWindow)+" svelte-n7cvum"))&&k(i,"class",a),(!g||E[0]&2&&u!==(u=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&k(i,"aria-label",u),(!g||E[0]&2&&c!==(c=n[1].ariaLabelledBy||null))&&k(i,"aria-labelledby",c),(!g||E[0]&256)&&k(i,"style",n[8]),(!g||E[0]&3)&&le(i,"window",!n[0]),(!g||E[0]&2&&h!==(h=Zt(n[1].classWindowWrap)+" svelte-n7cvum"))&&k(t,"class",h),(!g||E[0]&128)&&k(t,"style",n[7]),(!g||E[0]&3)&&le(t,"wrap",!n[0]),(!g||E[0]&2&&d!==(d=n[1].id))&&k(e,"id",d),(!g||E[0]&2&&p!==(p=Zt(n[1].classBg)+" svelte-n7cvum"))&&k(e,"class",p),(!g||E[0]&64)&&k(e,"style",n[6]),(!g||E[0]&3)&&le(e,"bg",!n[0])},i(S){g||(C(_),s&&C(s.$$.fragment,S),fy(()=>{g&&(f||(f=Kf(i,n[12],n[1].transitionWindowProps,!0)),f.run(1))}),fy(()=>{g&&(m||(m=Kf(e,n[11],n[1].transitionBgProps,!0)),m.run(1))}),g=!0)},o(S){v(_),s&&v(s.$$.fragment,S),f||(f=Kf(i,n[12],n[1].transitionWindowProps,!1)),f.run(0),m||(m=Kf(e,n[11],n[1].transitionBgProps,!1)),m.run(0),g=!1},d(S){S&&z(e),_&&_.d(),s&&te(s),n[50](null),S&&f&&f.end(),n[51](null),n[52](null),S&&m&&m.end(),b=!1,fn(y)}}}function gy(n){let e,t,i,r,o;const s=[FO,LO],l=[];function a(u,c){return c[0]&2&&(e=null),e==null&&(e=!!u[17](u[1].closeButton)),e?0:1}return t=a(n,[-1,-1,-1]),i=l[t]=s[t](n),{c(){i.c(),r=ut()},m(u,c){l[t].m(u,c),j(u,r,c),o=!0},p(u,c){let f=t;t=a(u,c),t===f?l[t].p(u,c):(ce(),v(l[f],1,1,()=>{l[f]=null}),fe(),i=l[t],i?i.p(u,c):(i=l[t]=s[t](u),i.c()),C(i,1),i.m(r.parentNode,r))},i(u){o||(C(i),o=!0)},o(u){v(i),o=!1},d(u){l[t].d(u),u&&z(r)}}}function LO(n){let e,t,i,r;return{c(){e=D("button"),k(e,"class",t=Zt(n[1].classCloseButton)+" svelte-n7cvum"),k(e,"aria-label","Close modal"),k(e,"style",n[10]),k(e,"type","button"),le(e,"close",!n[0])},m(o,s){j(o,e,s),i||(r=ue(e,"click",n[18]),i=!0)},p(o,s){s[0]&2&&t!==(t=Zt(o[1].classCloseButton)+" svelte-n7cvum")&&k(e,"class",t),s[0]&1024&&k(e,"style",o[10]),s[0]&3&&le(e,"close",!o[0])},i:he,o:he,d(o){o&&z(e),i=!1,r()}}}function FO(n){let e,t,i;var r=n[1].closeButton;function o(s){return{props:{onClose:s[18]}}}return r&&(e=bo(r,o(n))),{c(){e&&$(e.$$.fragment),t=ut()},m(s,l){e&&ee(e,s,l),j(s,t,l),i=!0},p(s,l){if(l[0]&2&&r!==(r=s[1].closeButton)){if(e){ce();const a=e;v(a.$$.fragment,1,0,()=>{te(a,1)}),fe()}r?(e=bo(r,o(s)),$(e.$$.fragment),C(e.$$.fragment,1),ee(e,t.parentNode,t)):e=null}},i(s){i||(e&&C(e.$$.fragment,s),i=!0)},o(s){e&&v(e.$$.fragment,s),i=!1},d(s){s&&z(t),e&&te(e,s)}}}function jO(n){let e,t,i,r,o=n[2]&&my(n);const s=n[49].default,l=tn(s,n,n[48],null);return{c(){o&&o.c(),e=Q(),l&&l.c()},m(a,u){o&&o.m(a,u),j(a,e,u),l&&l.m(a,u),t=!0,i||(r=ue(BO,"keydown",n[19]),i=!0)},p(a,u){a[2]?o?(o.p(a,u),u[0]&4&&C(o,1)):(o=my(a),o.c(),C(o,1),o.m(e.parentNode,e)):o&&(ce(),v(o,1,1,()=>{o=null}),fe()),l&&l.p&&(!t||u[1]&131072)&&nn(l,s,a,a[48],t?on(s,a[48],u,null):rn(a[48]),null)},i(a){t||(C(o),C(l,a),t=!0)},o(a){v(o),v(l,a),t=!1},d(a){o&&o.d(a),a&&z(e),l&&l.d(a),i=!1,r()}}}function _S(n,e={}){return function(i){return new n({...i,props:{...e,...i.props}})}}function zO(n,e,t){let{$$slots:i={},$$scope:r}=e;const o=yS(),s=kS,l=de=>de.tabIndex>=0&&!de.hidden&&!de.disabled&&de.style.display!=="none"&&de.type!=="hidden"&&!!(de.offsetWidth||de.offsetHeight||de.getClientRects().length);let{isTabbable:a=l}=e,{show:u=null}=e,{id:c=null}=e,{key:f="simple-modal"}=e,{ariaLabel:h=null}=e,{ariaLabelledBy:d=null}=e,{closeButton:p=!0}=e,{closeOnEsc:m=!0}=e,{closeOnOuterClick:g=!0}=e,{styleBg:b={}}=e,{styleWindowWrap:y={}}=e,{styleWindow:_={}}=e,{styleContent:M={}}=e,{styleCloseButton:w={}}=e,{classBg:S=null}=e,{classWindowWrap:E=null}=e,{classWindow:I=null}=e,{classContent:O=null}=e,{classCloseButton:P=null}=e,{unstyled:A=!1}=e,{setContext:H=s}=e,{transitionBg:W=xO}=e,{transitionBgProps:q={duration:250}}=e,{transitionWindow:L=W}=e,{transitionWindowProps:X=q}=e,{disableFocusTrap:Y=!1}=e;const G={id:c,ariaLabel:h,ariaLabelledBy:d,closeButton:p,closeOnEsc:m,closeOnOuterClick:g,styleBg:b,styleWindowWrap:y,styleWindow:_,styleContent:M,styleCloseButton:w,classBg:S,classWindowWrap:E,classWindow:I,classContent:O,classCloseButton:P,transitionBg:W,transitionBgProps:q,transitionWindow:L,transitionWindowProps:X,disableFocusTrap:Y,isTabbable:a,unstyled:A};let T={...G},B=null,J,ne,_e,ae,Te,re,U,Ce,Ke,K,De,F,ke,Me,Ae;const Le=de=>de.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),ct=de=>de?Object.keys(de).reduce((ni,Rn)=>`${ni}; ${Le(Rn)}: ${de[Rn]}`,""):"",Z=de=>!!(de&&de.constructor&&de.call&&de.apply),Ve=()=>{t(6,Te=ct(Object.assign({},{width:window.innerWidth,height:window.innerHeight},T.styleBg))),t(7,re=ct(T.styleWindowWrap)),t(8,U=ct(T.styleWindow)),t(9,Ce=ct(T.styleContent)),t(10,Ke=ct(T.styleCloseButton)),t(11,K=T.transitionBg),t(12,De=T.transitionWindow)},bt=()=>{};let me=bt,$e=bt,Ut=bt,Ue=bt;const wt=(de,ni={},Rn={},sn={})=>{t(2,B=_S(de,ni)),t(1,T={...G,...Rn}),Ve(),Dn(),t(13,me=Mt=>{sn.onOpen&&sn.onOpen(Mt),o("open"),o("opening")}),t(14,$e=Mt=>{sn.onClose&&sn.onClose(Mt),o("close"),o("closing")}),t(15,Ut=Mt=>{sn.onOpened&&sn.onOpened(Mt),o("opened")}),t(16,Ue=Mt=>{sn.onClosed&&sn.onClosed(Mt),o("closed")})},_t=(de={})=>{B&&(t(14,$e=de.onClose||$e),t(16,Ue=de.onClosed||Ue),t(2,B=null),ti())},it=de=>{if(T.closeOnEsc&&B&&de.key==="Escape"&&(de.preventDefault(),_t()),B&&de.key==="Tab"&&!T.disableFocusTrap){const ni=_e.querySelectorAll("*"),Rn=Array.from(ni).filter(T.isTabbable).sort((Mt,Do)=>Mt.tabIndex-Do.tabIndex);let sn=Rn.indexOf(document.activeElement);sn===-1&&de.shiftKey&&(sn=0),sn+=Rn.length+(de.shiftKey?-1:1),sn%=Rn.length,Rn[sn].focus(),de.preventDefault()}},Mn=de=>{T.closeOnOuterClick&&(de.target===J||de.target===ne)&&(Ae=de.target)},gn=de=>{T.closeOnOuterClick&&de.target===Ae&&(de.preventDefault(),_t())},Dn=()=>{ae=window.scrollY,F=document.body.style.position,ke=document.body.style.overflow,Me=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${ae}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},ti=()=>{document.body.style.position=F||"",document.body.style.top="",document.body.style.overflow=ke||"",document.body.style.width=Me||"",window.scrollTo({top:ae,left:0,behavior:"instant"})};H(f,{open:wt,close:_t});let Je=!1;Ki(()=>{Je&&_t()}),br(()=>{t(47,Je=!0)});function Bt(de){ft[de?"unshift":"push"](()=>{_e=de,t(5,_e)})}function Pn(de){ft[de?"unshift":"push"](()=>{ne=de,t(4,ne)})}function xt(de){ft[de?"unshift":"push"](()=>{J=de,t(3,J)})}return n.$$set=de=>{"isTabbable"in de&&t(22,a=de.isTabbable),"show"in de&&t(23,u=de.show),"id"in de&&t(24,c=de.id),"key"in de&&t(25,f=de.key),"ariaLabel"in de&&t(26,h=de.ariaLabel),"ariaLabelledBy"in de&&t(27,d=de.ariaLabelledBy),"closeButton"in de&&t(28,p=de.closeButton),"closeOnEsc"in de&&t(29,m=de.closeOnEsc),"closeOnOuterClick"in de&&t(30,g=de.closeOnOuterClick),"styleBg"in de&&t(31,b=de.styleBg),"styleWindowWrap"in de&&t(32,y=de.styleWindowWrap),"styleWindow"in de&&t(33,_=de.styleWindow),"styleContent"in de&&t(34,M=de.styleContent),"styleCloseButton"in de&&t(35,w=de.styleCloseButton),"classBg"in de&&t(36,S=de.classBg),"classWindowWrap"in de&&t(37,E=de.classWindowWrap),"classWindow"in de&&t(38,I=de.classWindow),"classContent"in de&&t(39,O=de.classContent),"classCloseButton"in de&&t(40,P=de.classCloseButton),"unstyled"in de&&t(0,A=de.unstyled),"setContext"in de&&t(41,H=de.setContext),"transitionBg"in de&&t(42,W=de.transitionBg),"transitionBgProps"in de&&t(43,q=de.transitionBgProps),"transitionWindow"in de&&t(44,L=de.transitionWindow),"transitionWindowProps"in de&&t(45,X=de.transitionWindowProps),"disableFocusTrap"in de&&t(46,Y=de.disableFocusTrap),"$$scope"in de&&t(48,r=de.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8388608|n.$$.dirty[1]&65536&&Je&&(Z(u)?wt(u):_t())},[A,T,B,J,ne,_e,Te,re,U,Ce,Ke,K,De,me,$e,Ut,Ue,Z,_t,it,Mn,gn,a,u,c,f,h,d,p,m,g,b,y,_,M,w,S,E,I,O,P,H,W,q,L,X,Y,Je,r,i,Bt,Pn,xt]}class SS extends je{constructor(e){super(),ze(this,e,zO,jO,xn,{isTabbable:22,show:23,id:24,key:25,ariaLabel:26,ariaLabelledBy:27,closeButton:28,closeOnEsc:29,closeOnOuterClick:30,styleBg:31,styleWindowWrap:32,styleWindow:33,styleContent:34,styleCloseButton:35,classBg:36,classWindowWrap:37,classWindow:38,classContent:39,classCloseButton:40,unstyled:0,setContext:41,transitionBg:42,transitionBgProps:43,transitionWindow:44,transitionWindowProps:45,disableFocusTrap:46},null,[-1,-1,-1])}}var Gn;(function(n){n.text="text",n.tree="tree",n.table="table"})(Gn||(Gn={}));var Tt;(function(n){n.after="after",n.inside="inside",n.key="key",n.value="value",n.multi="multi",n.text="text"})(Tt||(Tt={}));var Pr;(function(n){n.after="after",n.key="key",n.value="value",n.inside="inside"})(Pr||(Pr={}));var $o;(function(n){n.info="info",n.warning="warning",n.error="error"})($o||($o={}));var Ir;(function(n){n.key="key",n.value="value"})(Ir||(Ir={}));var cr;(function(n){n.asc="asc",n.desc="desc"})(cr||(cr={}));var Fs;(function(n){n.no="no",n.self="self",n.nextInside="nextInside"})(Fs||(Fs={}));const $m=300,vS=300,by=300,VO=300,yy=50,HO=200,qO=400,WO=1200,e1=1e3,Oc=100,Ea=100,t1=2e4,ky=50,wy=50,jl=[{start:0,end:Oc}],UO=100*1024*1024,JO=1024*1024,n1=10*1024*1024,xS=10*1024,zl={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-container"},KO={...zl,classWindow:"jse-modal-window jse-modal-window-sort"},GO={...zl,classWindow:"jse-modal-window jse-modal-window-transform"},Cy={...zl,classWindow:"jse-modal-window jse-modal-window-jsoneditor"},i2="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",r2="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",es="hover-insert-inside",Tc="hover-insert-after",i1="hover-collection",P0="valid",_y="repairable",QO="invalid",Wo=(40+2)*8,Uo=260,XO={[cr.asc]:"ascending",[cr.desc]:"descending"};let Sy=0;function gc(){return Sy++,Sy}function Nt(n){return Array.isArray(n)}function Yt(n){return n!==null&&typeof n=="object"&&(n.constructor===void 0||n.constructor.name==="Object")}function MS(n){return n&&typeof n=="object"?n.op==="add":!1}function AS(n){return n&&typeof n=="object"?n.op==="remove":!1}function o2(n){return n&&typeof n=="object"?n.op==="replace":!1}function r1(n){return n&&typeof n=="object"?n.op==="copy":!1}function tu(n){return n&&typeof n=="object"?n.op==="move":!1}function YO(n,e){return JSON.stringify(n)===JSON.stringify(e)}function ZO(n,e){return n===e}function ES(n){return n.slice(0,n.length-1)}function $O(n){return n[n.length-1]}function eT(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ZO;if(n.length<e.length)return!1;for(let i=0;i<e.length;i++)if(!t(n[i],e[i]))return!1;return!0}function OS(n){return typeof n=="object"&&n!==null}function s2(n){if(Nt(n)){const e=n.slice();return Object.getOwnPropertySymbols(n).forEach(t=>{e[t]=n[t]}),e}else if(Yt(n)){const e={...n};return Object.getOwnPropertySymbols(n).forEach(t=>{e[t]=n[t]}),e}else return n}function l2(n,e,t){if(n[e]===t)return n;{const i=s2(n);return i[e]=t,i}}function Pe(n,e){let t=n,i=0;for(;i<e.length;)Yt(t)?t=t[e[i]]:Nt(t)?t=t[parseInt(e[i])]:t=void 0,i++;return t}function Or(n,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.length===0)return t;const r=e[0],o=Or(n?n[r]:void 0,e.slice(1),t,i);if(Yt(n)||Nt(n))return l2(n,r,o);if(i){const s=tT.test(r)?[]:{};return s[r]=o,s}else throw new Error("Path does not exist")}const tT=/^\d+$/;function TS(n,e,t){if(e.length===0)return t(n);if(!OS(n))throw new Error("Path doesn't exist");const i=e[0],r=TS(n[i],e.slice(1),t);return l2(n,i,r)}function a2(n,e){if(e.length===0)return n;if(!OS(n))throw new Error("Path does not exist");if(e.length===1){const r=e[0];if(r in n){const o=s2(n);return Nt(o)&&o.splice(parseInt(r),1),Yt(o)&&delete o[r],o}else return n}const t=e[0],i=a2(n[t],e.slice(1));return l2(n,t,i)}function u2(n,e,t){const i=e.slice(0,e.length-1),r=e[e.length-1];return TS(n,i,o=>{if(!Array.isArray(o))throw new TypeError("Array expected at path "+JSON.stringify(i));const s=s2(o);return s.splice(parseInt(r),0,t),s})}function fr(n,e){return n===void 0?!1:e.length===0?!0:n===null?!1:fr(n[e[0]],e.slice(1))}function Fr(n){const e=n.split("/");return e.shift(),e.map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function xe(n){return n.map(DS).join("")}function DS(n){return"/"+String(n).replace(/~/g,"~0").replace(/\//g,"~1")}function vy(n,e){return n+DS(e)}function Sp(n,e){return n.startsWith(e)&&(n.length===e.length||n[e.length]==="/")}function Br(n,e,t){let i=n;for(let r=0;r<e.length;r++){uT(e[r]);let o=e[r];if(t&&t.before){const a=t.before(i,o);if(a!==void 0){if(a.document!==void 0&&(i=a.document),a.json!==void 0)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');a.operation!==void 0&&(o=a.operation)}}const s=i,l=ho(i,o.path);if(o.op==="add")i=rT(i,l,o.value);else if(o.op==="remove")i=iT(i,l);else if(o.op==="replace")i=nT(i,l,o.value);else if(o.op==="copy")i=oT(i,l,o1(o.from));else if(o.op==="move")i=sT(i,l,o1(o.from));else if(o.op==="test")lT(i,l,o.value);else throw new Error("Unknown JSONPatch operation "+JSON.stringify(o));if(t&&t.after){const a=t.after(i,o,s);a!==void 0&&(i=a)}}return i}function nT(n,e,t){return Or(n,e,t)}function iT(n,e){return a2(n,e)}function rT(n,e,t){return kf(n,e)?u2(n,e,t):Or(n,e,t)}function oT(n,e,t){const i=Pe(n,t);if(kf(n,e))return u2(n,e,i);{const r=Pe(n,t);return Or(n,e,r)}}function sT(n,e,t){const i=Pe(n,t),r=a2(n,t);return kf(r,e)?u2(r,e,i):Or(r,e,i)}function lT(n,e,t){if(t===void 0)throw new Error(`Test failed: no value provided (path: "${xe(e)}")`);if(!fr(n,e))throw new Error(`Test failed: path not found (path: "${xe(e)}")`);const i=Pe(n,e);if(!YO(i,t))throw new Error(`Test failed, value differs (path: "${xe(e)}")`)}function kf(n,e){if(e.length===0)return!1;const t=Pe(n,ES(e));return Array.isArray(t)}function aT(n,e){if($O(e)!=="-")return e;const t=ES(e),i=Pe(n,t);return t.concat(i.length)}function uT(n){if(!["add","remove","replace","copy","move","test"].includes(n.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(n.op));if(typeof n.path!="string")throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(n));if((n.op==="copy"||n.op==="move")&&typeof n.from!="string")throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(n))}function ho(n,e){return aT(n,Fr(e))}function o1(n){return Fr(n)}function PS(n,e,t){let i=[];return Br(n,e,{before:(o,s)=>{let l;const a=ho(o,s.path);if(s.op==="add")l=IS(o,a);else if(s.op==="remove")l=NS(o,a);else if(s.op==="replace")l=RS(o,a);else if(s.op==="copy")l=cT(o,a);else if(s.op==="move")l=fT(o,a,o1(s.from));else if(s.op==="test")l=[];else throw new Error("Unknown JSONPatch operation "+JSON.stringify(s));let u;if(t&&t.before){const c=t.before(o,s,l);if(c&&c.revertOperations&&(l=c.revertOperations),c&&c.document&&(u=c.document),c&&c.json)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"')}if(i=l.concat(i),u!==void 0)return{document:u}}}),i}function RS(n,e){return[{op:"replace",path:xe(e),value:Pe(n,e)}]}function NS(n,e){return[{op:"add",path:xe(e),value:Pe(n,e)}]}function IS(n,e){return kf(n,e)||!fr(n,e)?[{op:"remove",path:xe(e)}]:RS(n,e)}function cT(n,e){return IS(n,e)}function fT(n,e,t){if(e.length<t.length&&eT(t,e))return[{op:"replace",path:xe(e),value:n}];const i={op:"move",from:xe(e),path:xe(t)};return!kf(n,e)&&fr(n,e)?[i,...NS(n,e)]:[i]}var vp={},xy={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},hT="a".charCodeAt();vp.parse=function(n,e,t){var i={},r=0,o=0,s=0,l=t&&t.bigint&&typeof BigInt<"u";return{data:a("",!0),pointers:i};function a(O,P){u();var A;_(O,"value");var H=m();switch(H){case"t":p("rue"),A=!0;break;case"f":p("alse"),A=!1;break;case"n":p("ull"),A=null;break;case'"':A=c();break;case"[":A=h(O);break;case"{":A=d(O);break;default:g(),"-0123456789".indexOf(H)>=0?A=f():S()}return _(O,"valueEnd"),u(),P&&s<n.length&&S(),A}function u(){e:for(;s<n.length;){switch(n[s]){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,r++;break;default:break e}s++}}function c(){for(var O="",P;P=m(),P!='"';)P=="\\"?(P=m(),P in xy?O+=xy[P]:P=="u"?O+=b():E()):O+=P;return O}function f(){var O="",P=!0;n[s]=="-"&&(O+=m()),O+=n[s]=="0"?m():y(),n[s]=="."&&(O+=m()+y(),P=!1),(n[s]=="e"||n[s]=="E")&&(O+=m(),(n[s]=="+"||n[s]=="-")&&(O+=m()),O+=y(),P=!1);var A=+O;return l&&P&&(A>Number.MAX_SAFE_INTEGER||A<Number.MIN_SAFE_INTEGER)?BigInt(O):A}function h(O){u();var P=[],A=0;if(m()=="]")return P;for(g();;){var H=O+"/"+A;P.push(a(H)),u();var W=m();if(W=="]")break;W!=","&&E(),u(),A++}return P}function d(O){u();var P={};if(m()=="}")return P;for(g();;){var A=w();m()!='"'&&E();var H=c(),W=O+"/"+s1(H);M(W,"key",A),_(W,"keyEnd"),u(),m()!=":"&&E(),u(),P[H]=a(W),u();var q=m();if(q=="}")break;q!=","&&E(),u()}return P}function p(O){for(var P=0;P<O.length;P++)m()!==O[P]&&E()}function m(){I();var O=n[s];return s++,o++,O}function g(){s--,o--}function b(){for(var O=4,P=0;O--;){P<<=4;var A=m().toLowerCase();A>="a"&&A<="f"?P+=A.charCodeAt()-hT+10:A>="0"&&A<="9"?P+=+A:E()}return String.fromCharCode(P)}function y(){for(var O="";n[s]>="0"&&n[s]<="9";)O+=m();if(O.length)return O;I(),S()}function _(O,P){M(O,P,w())}function M(O,P,A){i[O]=i[O]||{},i[O][P]=A}function w(){return{line:r,column:o,pos:s}}function S(){throw new SyntaxError("Unexpected token "+n[s]+" in JSON at position "+s)}function E(){g(),S()}function I(){if(s>=n.length)throw new SyntaxError("Unexpected end of JSON input")}};vp.stringify=function(n,e,t){if(!Qf(n))return;var i=0,r,o,s=typeof t=="object"?t.space:t;switch(typeof s){case"number":var l=s>10?10:s<0?0:Math.floor(s);s=l&&M(l," "),r=l,o=l;break;case"string":s=s.slice(0,10),r=0,o=0;for(var a=0;a<s.length;a++){var u=s[a];switch(u){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,i++;break;default:throw new Error("whitespace characters not allowed in JSON")}r++}break;default:s=void 0}var c="",f={},h=0,d=0,p=0,m=t&&t.es6&&typeof Map=="function";return g(n,0,""),{json:c,pointers:f};function g(w,S,E){switch(_(E,"value"),typeof w){case"number":case"bigint":case"boolean":b(""+w);break;case"string":b(Xf(w));break;case"object":w===null?b("null"):typeof w.toJSON=="function"?b(Xf(w.toJSON())):Array.isArray(w)?I():m?w.constructor.BYTES_PER_ELEMENT?I():w instanceof Map?P():w instanceof Set?P(!0):O():O()}_(E,"valueEnd");function I(){if(w.length){b("[");for(var A=S+1,H=0;H<w.length;H++){H&&b(","),y(A);var W=Qf(w[H])?w[H]:null,q=E+"/"+H;g(W,A,q)}y(S),b("]")}else b("[]")}function O(){var A=Object.keys(w);if(A.length){b("{");for(var H=S+1,W=0;W<A.length;W++){var q=A[W],L=w[q];if(Qf(L)){W&&b(",");var X=E+"/"+s1(q);y(H),_(X,"key"),b(Xf(q)),_(X,"keyEnd"),b(":"),s&&b(" "),g(L,H,X)}}y(S),b("}")}else b("{}")}function P(A){if(w.size){b("{");for(var H=S+1,W=!0,q=w.entries(),L=q.next();!L.done;){var X=L.value,Y=X[0],G=A?!0:X[1];if(Qf(G)){W||b(","),W=!1;var T=E+"/"+s1(Y);y(H),_(T,"key"),b(Xf(Y)),_(T,"keyEnd"),b(":"),s&&b(" "),g(G,H,T)}L=q.next()}y(S),b("}")}else b("{}")}}function b(w){d+=w.length,p+=w.length,c+=w}function y(w){if(s){for(c+=`
`+M(w,s),h++,d=0;w--;)i?(h+=i,d=o):d+=o,p+=r;p+=1}}function _(w,S){f[w]=f[w]||{},f[w][S]={line:h,column:d,pos:p}}function M(w,S){return Array(w+1).join(S)}};var dT=["number","bigint","boolean","string","object"];function Qf(n){return dT.indexOf(typeof n)>=0}var pT=/"|\\/g,mT=/[\b]/g,gT=/\f/g,bT=/\n/g,yT=/\r/g,kT=/\t/g;function Xf(n){return n=n.replace(pT,"\\$&").replace(gT,"\\f").replace(mT,"\\b").replace(bT,"\\n").replace(yT,"\\r").replace(kT,"\\t"),'"'+n+'"'}var wT=/~/g,CT=/\//g;function s1(n){return n.replace(wT,"~0").replace(CT,"~1")}class ha extends Error{constructor(e,t){super("".concat(e," at position ").concat(t)),this.position=t}}const Yf=92,R0=47,_T=42,My=123,Zf=125,Ay=91,$f=93,ST=40,vT=41,xT=32,c2=10,BS=9,LS=13,MT=8,AT=12,dd=34,Ey=43,Oy=45,FS=39,jS=48,zS=57,bl=44,eh=46,ET=58,OT=59,TT=65,DT=97,PT=69,RT=101,NT=70,IT=102,BT=160,LT=8192,FT=8202,jT=8239,zT=8287,VT=12288,HT=8220,qT=8221,WT=8216,UT=8217,JT=96,KT=180;function GT(n){return n>=jS&&n<=zS||n>=TT&&n<=NT||n>=DT&&n<=IT}function yl(n){return n>=jS&&n<=zS}function QT(n){return n>=32&&n<=1114111}function wa(n){return XT.test(n)}const XT=/^[,:[\]/{}()\n+]$/;function YT(n){return wa(n)&&n!=="/"}function Ty(n){return ZT.test(n)||n&&Jh(n.charCodeAt(0))}const ZT=/^[[{\w-]$/;function $T(n){return n===c2||n===LS||n===BS||n===MT||n===AT}function Oa(n){return n===xT||n===c2||n===BS||n===LS}function e7(n){return n===BT||n>=LT&&n<=FT||n===jT||n===zT||n===VT}function Jh(n){return VS(n)||l1(n)}function VS(n){return n===dd||n===HT||n===qT}function Dy(n){return n===dd}function l1(n){return n===FS||n===WT||n===UT||n===JT||n===KT}function Py(n){return n===FS}function Ju(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=n.lastIndexOf(e);return i!==-1?n.substring(0,i)+(t?"":n.substring(i+1)):n}function Zr(n,e){let t=n.length;if(!Oa(n.charCodeAt(t-1)))return n+e;for(;Oa(n.charCodeAt(t-1));)t--;return n.substring(0,t)+e+n.substring(t)}function t7(n,e,t){return n.substring(0,e)+n.substring(e+t)}function n7(n){return/[,\n][ \t\r]*$/.test(n)}function i7(n){return/^\w+$/.test(n)}const r7={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},o7={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function po(n){let e=0,t="";o()||A();const r=u(bl);for(r&&s(),Ty(n[e])&&n7(t)?(r||(t=Zr(t,",")),m()):r&&(t=Ju(t,","));n.charCodeAt(e)===Zf||n.charCodeAt(e)===$f;)e++,s();if(e>=n.length)return t;P();function o(){s();const L=d()||p()||g()||y()||_()||w();return s(),L}function s(){const L=e;let X=l();do X=a(),X&&(X=l());while(X);return e>L}function l(){let L="",X;for(;(X=Oa(n.charCodeAt(e)))||e7(n.charCodeAt(e));)X?L+=n[e]:L+=" ",e++;return L.length>0?(t+=L,!0):!1}function a(){if(n.charCodeAt(e)===R0&&n.charCodeAt(e+1)===_T){for(;e<n.length&&!s7(n,e);)e++;return e+=2,!0}if(n.charCodeAt(e)===R0&&n.charCodeAt(e+1)===R0){for(;e<n.length&&n.charCodeAt(e)!==c2;)e++;return!0}return!1}function u(L){return n.charCodeAt(e)===L?(t+=n[e],e++,!0):!1}function c(L){return n.charCodeAt(e)===L?(e++,!0):!1}function f(){return c(Yf)}function h(){return s(),n.charCodeAt(e)===eh&&n.charCodeAt(e+1)===eh&&n.charCodeAt(e+2)===eh?(e+=3,s(),c(bl),!0):!1}function d(){if(n.charCodeAt(e)===My){t+="{",e++,s(),c(bl)&&s();let L=!0;for(;e<n.length&&n.charCodeAt(e)!==Zf;){let X;if(L?(X=!0,L=!1):(X=u(bl),X||(t=Zr(t,",")),s()),h(),!(g()||w())){n.charCodeAt(e)===Zf||n.charCodeAt(e)===My||n.charCodeAt(e)===$f||n.charCodeAt(e)===Ay||n[e]===void 0?t=Ju(t,","):H();break}s();const G=u(ET),T=e>=n.length;G||(Ty(n[e])||T?t=Zr(t,":"):W()),o()||(G||T?t+="null":W())}return n.charCodeAt(e)===Zf?(t+="}",e++):t=Zr(t,"}"),!0}return!1}function p(){if(n.charCodeAt(e)===Ay){t+="[",e++,s(),c(bl)&&s();let L=!0;for(;e<n.length&&n.charCodeAt(e)!==$f;)if(L?L=!1:u(bl)||(t=Zr(t,",")),h(),!o()){t=Ju(t,",");break}return n.charCodeAt(e)===$f?(t+="]",e++):t=Zr(t,"]"),!0}return!1}function m(){let L=!0,X=!0;for(;X;)L?L=!1:u(bl)||(t=Zr(t,",")),X=o();X||(t=Ju(t,",")),t=`[
`.concat(t,`
]`)}function g(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,X=n.charCodeAt(e)===Yf;if(X&&(e++,X=!0),Jh(n.charCodeAt(e))){const Y=Dy(n.charCodeAt(e))?Dy:Py(n.charCodeAt(e))?Py:l1(n.charCodeAt(e))?l1:VS,G=e,T=t.length;let B='"';for(e++;;){if(e>=n.length){const J=S(e-1);return!L&&wa(n.charAt(J))?(e=G,t=t.substring(0,T),g(!0)):(B=Zr(B,'"'),t+=B,!0)}else if(Y(n.charCodeAt(e))){const J=e,ne=B.length;if(B+='"',e++,t+=B,s(),L||e>=n.length||wa(n.charAt(e))||Jh(n.charCodeAt(e))||yl(n.charCodeAt(e)))return b(),!0;if(wa(n.charAt(S(J-1))))return e=G,t=t.substring(0,T),g(!0);t=t.substring(0,T),e=J+1,B="".concat(B.substring(0,ne),"\\").concat(B.substring(ne))}else{if(L&&wa(n[e]))return B=Zr(B,'"'),t+=B,b(),!0;if(n.charCodeAt(e)===Yf){const J=n.charAt(e+1);if(o7[J]!==void 0)B+=n.slice(e,e+2),e+=2;else if(J==="u"){let _e=2;for(;_e<6&&GT(n.charCodeAt(e+_e));)_e++;_e===6?(B+=n.slice(e,e+6),e+=6):e+_e>=n.length?e=n.length:q()}else B+=J,e+=2}else{const J=n.charAt(e),ne=n.charCodeAt(e);ne===dd&&n.charCodeAt(e-1)!==Yf?(B+="\\".concat(J),e++):$T(ne)?(B+=r7[J],e++):(QT(ne)||O(J),B+=J,e++)}}X&&f()}}return!1}function b(){let L=!1;for(s();n.charCodeAt(e)===Ey;){L=!0,e++,s(),t=Ju(t,'"',!0);const X=t.length;g()?t=t7(t,X,1):t=Zr(t,'"')}return L}function y(){const L=e;if(n.charCodeAt(e)===Oy){if(e++,E())return I(L),!0;if(!yl(n.charCodeAt(e)))return e=L,!1}for(;yl(n.charCodeAt(e));)e++;if(n.charCodeAt(e)===eh){if(e++,E())return I(L),!0;if(!yl(n.charCodeAt(e)))return e=L,!1;for(;yl(n.charCodeAt(e));)e++}if(n.charCodeAt(e)===RT||n.charCodeAt(e)===PT){if(e++,(n.charCodeAt(e)===Oy||n.charCodeAt(e)===Ey)&&e++,E())return I(L),!0;if(!yl(n.charCodeAt(e)))return e=L,!1;for(;yl(n.charCodeAt(e));)e++}if(!E())return e=L,!1;if(e>L){const X=n.slice(L,e),Y=/^0\d/.test(X);return t+=Y?'"'.concat(X,'"'):X,!0}return!1}function _(){return M("true","true")||M("false","false")||M("null","null")||M("True","true")||M("False","false")||M("None","null")}function M(L,X){return n.slice(e,e+L.length)===L?(t+=X,e+=L.length,!0):!1}function w(){const L=e;for(;e<n.length&&!YT(n[e])&&!Jh(n.charCodeAt(e));)e++;if(e>L){if(n.charCodeAt(e)===ST&&i7(n.slice(L,e).trim()))return e++,o(),n.charCodeAt(e)===vT&&(e++,n.charCodeAt(e)===OT&&e++),!0;{for(;Oa(n.charCodeAt(e-1))&&e>0;)e--;const X=n.slice(L,e);return t+=X==="undefined"?"null":JSON.stringify(X),n.charCodeAt(e)===dd&&e++,!0}}}function S(L){let X=L;for(;X>0&&Oa(n.charCodeAt(X));)X--;return X}function E(){return e>=n.length||wa(n[e])||Oa(n.charCodeAt(e))}function I(L){t+="".concat(n.slice(L,e),"0")}function O(L){throw new ha("Invalid character ".concat(JSON.stringify(L)),e)}function P(){throw new ha("Unexpected character ".concat(JSON.stringify(n[e])),e)}function A(){throw new ha("Unexpected end of json string",n.length)}function H(){throw new ha("Object key expected",e)}function W(){throw new ha("Colon expected",e)}function q(){const L=n.slice(e,e+6);throw new ha('Invalid unicode character "'.concat(L,'"'),e)}}function s7(n,e){return n[e]==="*"&&n[e+1]==="/"}function ei(n){return parseInt(n,10)}function f2(n){return l7.test(n)}const l7=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function Rt(n){return typeof n=="object"&&n!==null&&(n.constructor===void 0||n.constructor.name==="Object")}function Qt(n){return typeof n=="object"&&n!==null&&(n.constructor===void 0||n.constructor.name==="Object"||n.constructor.name==="Array")}function a7(n){return n===!0||n===!1}function a1(n){if(typeof n=="number")return n>9466848e5&&isFinite(n)&&Math.floor(n)===n&&!isNaN(new Date(n).valueOf());if(typeof n=="bigint")return a1(Number(n));try{const t=n&&n.valueOf();if(t!==n)return a1(t)}catch{return!1}return!1}function HS(n){Ku=Ku||window.document.createElement("div"),Ku.style.color="",Ku.style.color=n;const e=Ku.style.color;return e!==""?e.replace(/\s+/g,"").toLowerCase():null}let Ku=null;function u7(n){return typeof n=="string"&&n.length<99&&!!HS(n)}function h2(n,e){if(typeof n=="number"||typeof n=="string"||typeof n=="boolean"||typeof n>"u")return typeof n;if(typeof n=="bigint")return"number";if(n===null)return"null";if(Array.isArray(n))return"array";if(Rt(n))return"object";const t=e.stringify(n);return t&&f2(t)?"number":t==="true"||t==="false"?"boolean":t==="null"?"null":"unknown"}const c7=/^https?:\/\/\S+$/;function xp(n){return typeof n=="string"&&c7.test(n)}function Eu(n,e){if(n==="")return"";const t=n.trim();return t==="null"?null:t==="true"?!0:t==="false"?!1:f2(t)?e.parse(t):n}function f7(n,e){return typeof n=="string"&&typeof Eu(n,e)!="string"}function h7(n){return d7.test(n)}const d7=/^-?[0-9]+$/;var p7=typeof global=="object"&&global&&global.Object===Object&&global;const qS=p7;var m7=typeof self=="object"&&self&&self.Object===Object&&self,g7=qS||m7||Function("return this")();const Ur=g7;var b7=Ur.Symbol;const yr=b7;var WS=Object.prototype,y7=WS.hasOwnProperty,k7=WS.toString,Gu=yr?yr.toStringTag:void 0;function w7(n){var e=y7.call(n,Gu),t=n[Gu];try{n[Gu]=void 0;var i=!0}catch{}var r=k7.call(n);return i&&(e?n[Gu]=t:delete n[Gu]),r}var C7=Object.prototype,_7=C7.toString;function S7(n){return _7.call(n)}var v7="[object Null]",x7="[object Undefined]",Ry=yr?yr.toStringTag:void 0;function Ou(n){return n==null?n===void 0?x7:v7:Ry&&Ry in Object(n)?w7(n):S7(n)}function Ks(n){return n!=null&&typeof n=="object"}var M7="[object Symbol]";function Vl(n){return typeof n=="symbol"||Ks(n)&&Ou(n)==M7}function bc(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var A7=Array.isArray;const fi=A7;var E7=1/0,Ny=yr?yr.prototype:void 0,Iy=Ny?Ny.toString:void 0;function US(n){if(typeof n=="string")return n;if(fi(n))return bc(n,US)+"";if(Vl(n))return Iy?Iy.call(n):"";var e=n+"";return e=="0"&&1/n==-E7?"-0":e}var O7=/\s/;function T7(n){for(var e=n.length;e--&&O7.test(n.charAt(e)););return e}var D7=/^\s+/;function P7(n){return n&&n.slice(0,T7(n)+1).replace(D7,"")}function jr(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var By=0/0,R7=/^[-+]0x[0-9a-f]+$/i,N7=/^0b[01]+$/i,I7=/^0o[0-7]+$/i,B7=parseInt;function u1(n){if(typeof n=="number")return n;if(Vl(n))return By;if(jr(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=jr(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=P7(n);var t=N7.test(n);return t||I7.test(n)?B7(n.slice(2),t?2:8):R7.test(n)?By:+n}var Ly=1/0,L7=17976931348623157e292;function Kh(n){if(!n)return n===0?n:0;if(n=u1(n),n===Ly||n===-Ly){var e=n<0?-1:1;return e*L7}return n===n?n:0}function F7(n){var e=Kh(n),t=e%1;return e===e?t?e-t:e:0}function wf(n){return n}var j7="[object AsyncFunction]",z7="[object Function]",V7="[object GeneratorFunction]",H7="[object Proxy]";function JS(n){if(!jr(n))return!1;var e=Ou(n);return e==z7||e==V7||e==j7||e==H7}var q7=Ur["__core-js_shared__"];const N0=q7;var Fy=function(){var n=/[^.]+$/.exec(N0&&N0.keys&&N0.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function W7(n){return!!Fy&&Fy in n}var U7=Function.prototype,J7=U7.toString;function ia(n){if(n!=null){try{return J7.call(n)}catch{}try{return n+""}catch{}}return""}var K7=/[\\^$.*+?()[\]{}|]/g,G7=/^\[object .+?Constructor\]$/,Q7=Function.prototype,X7=Object.prototype,Y7=Q7.toString,Z7=X7.hasOwnProperty,$7=RegExp("^"+Y7.call(Z7).replace(K7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function e9(n){if(!jr(n)||W7(n))return!1;var e=JS(n)?$7:G7;return e.test(ia(n))}function t9(n,e){return n==null?void 0:n[e]}function ra(n,e){var t=t9(n,e);return e9(t)?t:void 0}var n9=ra(Ur,"WeakMap");const c1=n9;var jy=Object.create,i9=function(){function n(){}return function(e){if(!jr(e))return{};if(jy)return jy(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const r9=i9;function o9(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function $t(){}function s9(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var l9=800,a9=16,u9=Date.now;function c9(n){var e=0,t=0;return function(){var i=u9(),r=a9-(i-t);if(t=i,r>0){if(++e>=l9)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function f9(n){return function(){return n}}var h9=function(){try{var n=ra(Object,"defineProperty");return n({},"",{}),n}catch{}}();const pd=h9;var d9=pd?function(n,e){return pd(n,"toString",{configurable:!0,enumerable:!1,value:f9(e),writable:!0})}:wf;const p9=d9;var m9=c9(p9);const g9=m9;function b9(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var y9=9007199254740991,k9=/^(?:0|[1-9]\d*)$/;function d2(n,e){var t=typeof n;return e=e??y9,!!e&&(t=="number"||t!="symbol"&&k9.test(n))&&n>-1&&n%1==0&&n<e}function Mp(n,e,t){e=="__proto__"&&pd?pd(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Ap(n,e){return n===e||n!==n&&e!==e}var w9=Object.prototype,C9=w9.hasOwnProperty;function KS(n,e,t){var i=n[e];(!(C9.call(n,e)&&Ap(i,t))||t===void 0&&!(e in n))&&Mp(n,e,t)}function Ep(n,e,t,i){var r=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var l=e[o],a=i?i(t[l],n[l],l,t,n):void 0;a===void 0&&(a=n[l]),r?Mp(t,l,a):KS(t,l,a)}return t}var zy=Math.max;function _9(n,e,t){return e=zy(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,o=zy(i.length-e,0),s=Array(o);++r<o;)s[r]=i[e+r];r=-1;for(var l=Array(e+1);++r<e;)l[r]=i[r];return l[e]=t(s),o9(n,this,l)}}function S9(n,e){return g9(_9(n,e,wf),n+"")}var v9=9007199254740991;function p2(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=v9}function Tu(n){return n!=null&&p2(n.length)&&!JS(n)}function f1(n,e,t){if(!jr(t))return!1;var i=typeof e;return(i=="number"?Tu(t)&&d2(e,t.length):i=="string"&&e in t)?Ap(t[e],n):!1}var x9=Object.prototype;function Op(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||x9;return n===t}function GS(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var M9="[object Arguments]";function Vy(n){return Ks(n)&&Ou(n)==M9}var QS=Object.prototype,A9=QS.hasOwnProperty,E9=QS.propertyIsEnumerable,O9=Vy(function(){return arguments}())?Vy:function(n){return Ks(n)&&A9.call(n,"callee")&&!E9.call(n,"callee")};const Tp=O9;function T9(){return!1}var XS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Hy=XS&&typeof module=="object"&&module&&!module.nodeType&&module,D9=Hy&&Hy.exports===XS,qy=D9?Ur.Buffer:void 0,P9=qy?qy.isBuffer:void 0,R9=P9||T9;const Dc=R9;var N9="[object Arguments]",I9="[object Array]",B9="[object Boolean]",L9="[object Date]",F9="[object Error]",j9="[object Function]",z9="[object Map]",V9="[object Number]",H9="[object Object]",q9="[object RegExp]",W9="[object Set]",U9="[object String]",J9="[object WeakMap]",K9="[object ArrayBuffer]",G9="[object DataView]",Q9="[object Float32Array]",X9="[object Float64Array]",Y9="[object Int8Array]",Z9="[object Int16Array]",$9="[object Int32Array]",eD="[object Uint8Array]",tD="[object Uint8ClampedArray]",nD="[object Uint16Array]",iD="[object Uint32Array]",Kt={};Kt[Q9]=Kt[X9]=Kt[Y9]=Kt[Z9]=Kt[$9]=Kt[eD]=Kt[tD]=Kt[nD]=Kt[iD]=!0;Kt[N9]=Kt[I9]=Kt[K9]=Kt[B9]=Kt[G9]=Kt[L9]=Kt[F9]=Kt[j9]=Kt[z9]=Kt[V9]=Kt[H9]=Kt[q9]=Kt[W9]=Kt[U9]=Kt[J9]=!1;function rD(n){return Ks(n)&&p2(n.length)&&!!Kt[Ou(n)]}function Dp(n){return function(e){return n(e)}}var YS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yc=YS&&typeof module=="object"&&module&&!module.nodeType&&module,oD=yc&&yc.exports===YS,I0=oD&&qS.process,sD=function(){try{var n=yc&&yc.require&&yc.require("util").types;return n||I0&&I0.binding&&I0.binding("util")}catch{}}();const nu=sD;var Wy=nu&&nu.isTypedArray,lD=Wy?Dp(Wy):rD;const m2=lD;var aD=Object.prototype,uD=aD.hasOwnProperty;function ZS(n,e){var t=fi(n),i=!t&&Tp(n),r=!t&&!i&&Dc(n),o=!t&&!i&&!r&&m2(n),s=t||i||r||o,l=s?GS(n.length,String):[],a=l.length;for(var u in n)(e||uD.call(n,u))&&!(s&&(u=="length"||r&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||d2(u,a)))&&l.push(u);return l}function $S(n,e){return function(t){return n(e(t))}}var cD=$S(Object.keys,Object);const fD=cD;var hD=Object.prototype,dD=hD.hasOwnProperty;function ev(n){if(!Op(n))return fD(n);var e=[];for(var t in Object(n))dD.call(n,t)&&t!="constructor"&&e.push(t);return e}function Du(n){return Tu(n)?ZS(n):ev(n)}function pD(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var mD=Object.prototype,gD=mD.hasOwnProperty;function bD(n){if(!jr(n))return pD(n);var e=Op(n),t=[];for(var i in n)i=="constructor"&&(e||!gD.call(n,i))||t.push(i);return t}function g2(n){return Tu(n)?ZS(n,!0):bD(n)}var yD=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kD=/^\w*$/;function b2(n,e){if(fi(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Vl(n)?!0:kD.test(n)||!yD.test(n)||e!=null&&n in Object(e)}var wD=ra(Object,"create");const Pc=wD;function CD(){this.__data__=Pc?Pc(null):{},this.size=0}function _D(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var SD="__lodash_hash_undefined__",vD=Object.prototype,xD=vD.hasOwnProperty;function MD(n){var e=this.__data__;if(Pc){var t=e[n];return t===SD?void 0:t}return xD.call(e,n)?e[n]:void 0}var AD=Object.prototype,ED=AD.hasOwnProperty;function OD(n){var e=this.__data__;return Pc?e[n]!==void 0:ED.call(e,n)}var TD="__lodash_hash_undefined__";function DD(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Pc&&e===void 0?TD:e,this}function Hl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Hl.prototype.clear=CD;Hl.prototype.delete=_D;Hl.prototype.get=MD;Hl.prototype.has=OD;Hl.prototype.set=DD;function PD(){this.__data__=[],this.size=0}function Pp(n,e){for(var t=n.length;t--;)if(Ap(n[t][0],e))return t;return-1}var RD=Array.prototype,ND=RD.splice;function ID(n){var e=this.__data__,t=Pp(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():ND.call(e,t,1),--this.size,!0}function BD(n){var e=this.__data__,t=Pp(e,n);return t<0?void 0:e[t][1]}function LD(n){return Pp(this.__data__,n)>-1}function FD(n,e){var t=this.__data__,i=Pp(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function cs(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}cs.prototype.clear=PD;cs.prototype.delete=ID;cs.prototype.get=BD;cs.prototype.has=LD;cs.prototype.set=FD;var jD=ra(Ur,"Map");const Rc=jD;function zD(){this.size=0,this.__data__={hash:new Hl,map:new(Rc||cs),string:new Hl}}function VD(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Rp(n,e){var t=n.__data__;return VD(e)?t[typeof e=="string"?"string":"hash"]:t.map}function HD(n){var e=Rp(this,n).delete(n);return this.size-=e?1:0,e}function qD(n){return Rp(this,n).get(n)}function WD(n){return Rp(this,n).has(n)}function UD(n,e){var t=Rp(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function fs(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}fs.prototype.clear=zD;fs.prototype.delete=HD;fs.prototype.get=qD;fs.prototype.has=WD;fs.prototype.set=UD;var JD="Expected a function";function Np(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(JD);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=t.cache;if(o.has(r))return o.get(r);var s=n.apply(this,i);return t.cache=o.set(r,s)||o,s};return t.cache=new(Np.Cache||fs),t}Np.Cache=fs;var KD=500;function GD(n){var e=Np(n,function(i){return t.size===KD&&t.clear(),i}),t=e.cache;return e}var QD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,XD=/\\(\\)?/g,YD=GD(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(QD,function(t,i,r,o){e.push(r?o.replace(XD,"$1"):i||t)}),e});const ZD=YD;function tv(n){return n==null?"":US(n)}function nv(n,e){return fi(n)?n:b2(n,e)?[n]:ZD(tv(n))}var $D=1/0;function Ip(n){if(typeof n=="string"||Vl(n))return n;var e=n+"";return e=="0"&&1/n==-$D?"-0":e}function y2(n,e){e=nv(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[Ip(e[t++])];return t&&t==i?n:void 0}function eP(n,e,t){var i=n==null?void 0:y2(n,e);return i===void 0?t:i}function k2(n,e){for(var t=-1,i=e.length,r=n.length;++t<i;)n[r+t]=e[t];return n}var Uy=yr?yr.isConcatSpreadable:void 0;function tP(n){return fi(n)||Tp(n)||!!(Uy&&n&&n[Uy])}function iv(n,e,t,i,r){var o=-1,s=n.length;for(t||(t=tP),r||(r=[]);++o<s;){var l=n[o];e>0&&t(l)?e>1?iv(l,e-1,t,i,r):k2(r,l):i||(r[r.length]=l)}return r}var nP=$S(Object.getPrototypeOf,Object);const rv=nP;function iP(n,e,t){var i=-1,r=n.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=n[i+e];return o}function rP(){this.__data__=new cs,this.size=0}function oP(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function sP(n){return this.__data__.get(n)}function lP(n){return this.__data__.has(n)}var aP=200;function uP(n,e){var t=this.__data__;if(t instanceof cs){var i=t.__data__;if(!Rc||i.length<aP-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new fs(i)}return t.set(n,e),this.size=t.size,this}function mo(n){var e=this.__data__=new cs(n);this.size=e.size}mo.prototype.clear=rP;mo.prototype.delete=oP;mo.prototype.get=sP;mo.prototype.has=lP;mo.prototype.set=uP;function cP(n,e){return n&&Ep(e,Du(e),n)}function fP(n,e){return n&&Ep(e,g2(e),n)}var ov=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Jy=ov&&typeof module=="object"&&module&&!module.nodeType&&module,hP=Jy&&Jy.exports===ov,Ky=hP?Ur.Buffer:void 0,Gy=Ky?Ky.allocUnsafe:void 0;function dP(n,e){if(e)return n.slice();var t=n.length,i=Gy?Gy(t):new n.constructor(t);return n.copy(i),i}function pP(n,e){for(var t=-1,i=n==null?0:n.length,r=0,o=[];++t<i;){var s=n[t];e(s,t,n)&&(o[r++]=s)}return o}function sv(){return[]}var mP=Object.prototype,gP=mP.propertyIsEnumerable,Qy=Object.getOwnPropertySymbols,bP=Qy?function(n){return n==null?[]:(n=Object(n),pP(Qy(n),function(e){return gP.call(n,e)}))}:sv;const w2=bP;function yP(n,e){return Ep(n,w2(n),e)}var kP=Object.getOwnPropertySymbols,wP=kP?function(n){for(var e=[];n;)k2(e,w2(n)),n=rv(n);return e}:sv;const lv=wP;function CP(n,e){return Ep(n,lv(n),e)}function av(n,e,t){var i=e(n);return fi(n)?i:k2(i,t(n))}function h1(n){return av(n,Du,w2)}function _P(n){return av(n,g2,lv)}var SP=ra(Ur,"DataView");const d1=SP;var vP=ra(Ur,"Promise");const p1=vP;var xP=ra(Ur,"Set");const m1=xP;var Xy="[object Map]",MP="[object Object]",Yy="[object Promise]",Zy="[object Set]",$y="[object WeakMap]",ek="[object DataView]",AP=ia(d1),EP=ia(Rc),OP=ia(p1),TP=ia(m1),DP=ia(c1),Cl=Ou;(d1&&Cl(new d1(new ArrayBuffer(1)))!=ek||Rc&&Cl(new Rc)!=Xy||p1&&Cl(p1.resolve())!=Yy||m1&&Cl(new m1)!=Zy||c1&&Cl(new c1)!=$y)&&(Cl=function(n){var e=Ou(n),t=e==MP?n.constructor:void 0,i=t?ia(t):"";if(i)switch(i){case AP:return ek;case EP:return Xy;case OP:return Yy;case TP:return Zy;case DP:return $y}return e});const iu=Cl;var PP=Object.prototype,RP=PP.hasOwnProperty;function NP(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&RP.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var IP=Ur.Uint8Array;const md=IP;function C2(n){var e=new n.constructor(n.byteLength);return new md(e).set(new md(n)),e}function BP(n,e){var t=e?C2(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var LP=/\w*$/;function FP(n){var e=new n.constructor(n.source,LP.exec(n));return e.lastIndex=n.lastIndex,e}var tk=yr?yr.prototype:void 0,nk=tk?tk.valueOf:void 0;function jP(n){return nk?Object(nk.call(n)):{}}function zP(n,e){var t=e?C2(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var VP="[object Boolean]",HP="[object Date]",qP="[object Map]",WP="[object Number]",UP="[object RegExp]",JP="[object Set]",KP="[object String]",GP="[object Symbol]",QP="[object ArrayBuffer]",XP="[object DataView]",YP="[object Float32Array]",ZP="[object Float64Array]",$P="[object Int8Array]",eR="[object Int16Array]",tR="[object Int32Array]",nR="[object Uint8Array]",iR="[object Uint8ClampedArray]",rR="[object Uint16Array]",oR="[object Uint32Array]";function sR(n,e,t){var i=n.constructor;switch(e){case QP:return C2(n);case VP:case HP:return new i(+n);case XP:return BP(n,t);case YP:case ZP:case $P:case eR:case tR:case nR:case iR:case rR:case oR:return zP(n,t);case qP:return new i;case WP:case KP:return new i(n);case UP:return FP(n);case JP:return new i;case GP:return jP(n)}}function lR(n){return typeof n.constructor=="function"&&!Op(n)?r9(rv(n)):{}}var aR="[object Map]";function uR(n){return Ks(n)&&iu(n)==aR}var ik=nu&&nu.isMap,cR=ik?Dp(ik):uR;const fR=cR;var hR="[object Set]";function dR(n){return Ks(n)&&iu(n)==hR}var rk=nu&&nu.isSet,pR=rk?Dp(rk):dR;const mR=pR;var gR=1,bR=2,yR=4,uv="[object Arguments]",kR="[object Array]",wR="[object Boolean]",CR="[object Date]",_R="[object Error]",cv="[object Function]",SR="[object GeneratorFunction]",vR="[object Map]",xR="[object Number]",fv="[object Object]",MR="[object RegExp]",AR="[object Set]",ER="[object String]",OR="[object Symbol]",TR="[object WeakMap]",DR="[object ArrayBuffer]",PR="[object DataView]",RR="[object Float32Array]",NR="[object Float64Array]",IR="[object Int8Array]",BR="[object Int16Array]",LR="[object Int32Array]",FR="[object Uint8Array]",jR="[object Uint8ClampedArray]",zR="[object Uint16Array]",VR="[object Uint32Array]",zt={};zt[uv]=zt[kR]=zt[DR]=zt[PR]=zt[wR]=zt[CR]=zt[RR]=zt[NR]=zt[IR]=zt[BR]=zt[LR]=zt[vR]=zt[xR]=zt[fv]=zt[MR]=zt[AR]=zt[ER]=zt[OR]=zt[FR]=zt[jR]=zt[zR]=zt[VR]=!0;zt[_R]=zt[cv]=zt[TR]=!1;function Gh(n,e,t,i,r,o){var s,l=e&gR,a=e&bR,u=e&yR;if(t&&(s=r?t(n,i,r,o):t(n)),s!==void 0)return s;if(!jr(n))return n;var c=fi(n);if(c){if(s=NP(n),!l)return s9(n,s)}else{var f=iu(n),h=f==cv||f==SR;if(Dc(n))return dP(n,l);if(f==fv||f==uv||h&&!r){if(s=a||h?{}:lR(n),!l)return a?CP(n,fP(s,n)):yP(n,cP(s,n))}else{if(!zt[f])return r?n:{};s=sR(n,f,l)}}o||(o=new mo);var d=o.get(n);if(d)return d;o.set(n,s),mR(n)?n.forEach(function(g){s.add(Gh(g,e,t,g,n,o))}):fR(n)&&n.forEach(function(g,b){s.set(b,Gh(g,e,t,b,n,o))});var p=u?a?_P:h1:a?g2:Du,m=c?void 0:p(n);return b9(m||n,function(g,b){m&&(b=g,g=n[b]),KS(s,b,Gh(g,e,t,b,n,o))}),s}var HR=1,qR=4;function WR(n,e){return e=typeof e=="function"?e:void 0,Gh(n,HR|qR,e)}var UR="__lodash_hash_undefined__";function JR(n){return this.__data__.set(n,UR),this}function KR(n){return this.__data__.has(n)}function gd(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new fs;++e<t;)this.add(n[e])}gd.prototype.add=gd.prototype.push=JR;gd.prototype.has=KR;function GR(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function QR(n,e){return n.has(e)}var XR=1,YR=2;function hv(n,e,t,i,r,o){var s=t&XR,l=n.length,a=e.length;if(l!=a&&!(s&&a>l))return!1;var u=o.get(n),c=o.get(e);if(u&&c)return u==e&&c==n;var f=-1,h=!0,d=t&YR?new gd:void 0;for(o.set(n,e),o.set(e,n);++f<l;){var p=n[f],m=e[f];if(i)var g=s?i(m,p,f,e,n,o):i(p,m,f,n,e,o);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!GR(e,function(b,y){if(!QR(d,y)&&(p===b||r(p,b,t,i,o)))return d.push(y)})){h=!1;break}}else if(!(p===m||r(p,m,t,i,o))){h=!1;break}}return o.delete(n),o.delete(e),h}function ZR(n){var e=-1,t=Array(n.size);return n.forEach(function(i,r){t[++e]=[r,i]}),t}function $R(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var eN=1,tN=2,nN="[object Boolean]",iN="[object Date]",rN="[object Error]",oN="[object Map]",sN="[object Number]",lN="[object RegExp]",aN="[object Set]",uN="[object String]",cN="[object Symbol]",fN="[object ArrayBuffer]",hN="[object DataView]",ok=yr?yr.prototype:void 0,B0=ok?ok.valueOf:void 0;function dN(n,e,t,i,r,o,s){switch(t){case hN:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case fN:return!(n.byteLength!=e.byteLength||!o(new md(n),new md(e)));case nN:case iN:case sN:return Ap(+n,+e);case rN:return n.name==e.name&&n.message==e.message;case lN:case uN:return n==e+"";case oN:var l=ZR;case aN:var a=i&eN;if(l||(l=$R),n.size!=e.size&&!a)return!1;var u=s.get(n);if(u)return u==e;i|=tN,s.set(n,e);var c=hv(l(n),l(e),i,r,o,s);return s.delete(n),c;case cN:if(B0)return B0.call(n)==B0.call(e)}return!1}var pN=1,mN=Object.prototype,gN=mN.hasOwnProperty;function bN(n,e,t,i,r,o){var s=t&pN,l=h1(n),a=l.length,u=h1(e),c=u.length;if(a!=c&&!s)return!1;for(var f=a;f--;){var h=l[f];if(!(s?h in e:gN.call(e,h)))return!1}var d=o.get(n),p=o.get(e);if(d&&p)return d==e&&p==n;var m=!0;o.set(n,e),o.set(e,n);for(var g=s;++f<a;){h=l[f];var b=n[h],y=e[h];if(i)var _=s?i(y,b,h,e,n,o):i(b,y,h,n,e,o);if(!(_===void 0?b===y||r(b,y,t,i,o):_)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var M=n.constructor,w=e.constructor;M!=w&&"constructor"in n&&"constructor"in e&&!(typeof M=="function"&&M instanceof M&&typeof w=="function"&&w instanceof w)&&(m=!1)}return o.delete(n),o.delete(e),m}var yN=1,sk="[object Arguments]",lk="[object Array]",th="[object Object]",kN=Object.prototype,ak=kN.hasOwnProperty;function wN(n,e,t,i,r,o){var s=fi(n),l=fi(e),a=s?lk:iu(n),u=l?lk:iu(e);a=a==sk?th:a,u=u==sk?th:u;var c=a==th,f=u==th,h=a==u;if(h&&Dc(n)){if(!Dc(e))return!1;s=!0,c=!1}if(h&&!c)return o||(o=new mo),s||m2(n)?hv(n,e,t,i,r,o):dN(n,e,a,t,i,r,o);if(!(t&yN)){var d=c&&ak.call(n,"__wrapped__"),p=f&&ak.call(e,"__wrapped__");if(d||p){var m=d?n.value():n,g=p?e.value():e;return o||(o=new mo),r(m,g,t,i,o)}}return h?(o||(o=new mo),bN(n,e,t,i,r,o)):!1}function Bp(n,e,t,i,r){return n===e?!0:n==null||e==null||!Ks(n)&&!Ks(e)?n!==n&&e!==e:wN(n,e,t,i,Bp,r)}var CN=1,_N=2;function SN(n,e,t,i){var r=t.length,o=r,s=!i;if(n==null)return!o;for(n=Object(n);r--;){var l=t[r];if(s&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++r<o;){l=t[r];var a=l[0],u=n[a],c=l[1];if(s&&l[2]){if(u===void 0&&!(a in n))return!1}else{var f=new mo;if(i)var h=i(u,c,a,n,e,f);if(!(h===void 0?Bp(c,u,CN|_N,i,f):h))return!1}}return!0}function dv(n){return n===n&&!jr(n)}function vN(n){for(var e=Du(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,dv(r)]}return e}function pv(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function xN(n){var e=vN(n);return e.length==1&&e[0][2]?pv(e[0][0],e[0][1]):function(t){return t===n||SN(t,n,e)}}function MN(n,e){return n!=null&&e in Object(n)}function AN(n,e,t){e=nv(e,n);for(var i=-1,r=e.length,o=!1;++i<r;){var s=Ip(e[i]);if(!(o=n!=null&&t(n,s)))break;n=n[s]}return o||++i!=r?o:(r=n==null?0:n.length,!!r&&p2(r)&&d2(s,r)&&(fi(n)||Tp(n)))}function EN(n,e){return n!=null&&AN(n,e,MN)}var ON=1,TN=2;function DN(n,e){return b2(n)&&dv(e)?pv(Ip(n),e):function(t){var i=eP(t,n);return i===void 0&&i===e?EN(t,n):Bp(e,i,ON|TN)}}function PN(n){return function(e){return e==null?void 0:e[n]}}function RN(n){return function(e){return y2(e,n)}}function NN(n){return b2(n)?PN(Ip(n)):RN(n)}function Cf(n){return typeof n=="function"?n:n==null?wf:typeof n=="object"?fi(n)?DN(n[0],n[1]):xN(n):NN(n)}function IN(n,e,t,i){for(var r=-1,o=n==null?0:n.length;++r<o;){var s=n[r];e(i,s,t(s),n)}return i}function mv(n){return function(e,t,i){for(var r=-1,o=Object(e),s=i(e),l=s.length;l--;){var a=s[n?l:++r];if(t(o[a],a,o)===!1)break}return e}}var BN=mv();const LN=BN;function gv(n,e){return n&&LN(n,e,Du)}function bv(n,e){return function(t,i){if(t==null)return t;if(!Tu(t))return n(t,i);for(var r=t.length,o=e?r:-1,s=Object(t);(e?o--:++o<r)&&i(s[o],o,s)!==!1;);return t}}var FN=bv(gv);const yv=FN;function jN(n,e,t,i){return yv(n,function(r,o,s){e(i,r,t(r),s)}),i}function kv(n,e){return function(t,i){var r=fi(t)?IN:jN,o=e?e():{};return r(t,n,Cf(i),o)}}var zN=function(){return Ur.Date.now()};const L0=zN;var VN="Expected a function",HN=Math.max,qN=Math.min;function Lp(n,e,t){var i,r,o,s,l,a,u=0,c=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(VN);e=u1(e)||0,jr(t)&&(c=!!t.leading,f="maxWait"in t,o=f?HN(u1(t.maxWait)||0,e):o,h="trailing"in t?!!t.trailing:h);function d(S){var E=i,I=r;return i=r=void 0,u=S,s=n.apply(I,E),s}function p(S){return u=S,l=setTimeout(b,e),c?d(S):s}function m(S){var E=S-a,I=S-u,O=e-E;return f?qN(O,o-I):O}function g(S){var E=S-a,I=S-u;return a===void 0||E>=e||E<0||f&&I>=o}function b(){var S=L0();if(g(S))return y(S);l=setTimeout(b,m(S))}function y(S){return l=void 0,h&&i?d(S):(i=r=void 0,s)}function _(){l!==void 0&&clearTimeout(l),u=0,i=a=r=l=void 0}function M(){return l===void 0?s:y(L0())}function w(){var S=L0(),E=g(S);if(i=arguments,r=this,a=S,E){if(l===void 0)return p(a);if(f)return clearTimeout(l),l=setTimeout(b,e),d(a)}return l===void 0&&(l=setTimeout(b,e)),s}return w.cancel=_,w.flush=M,w}function rt(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function wv(n){return typeof n=="function"?n:wf}function WN(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var UN=mv(!0);const JN=UN;function KN(n,e){return n&&JN(n,e,Du)}var GN=bv(KN,!0);const QN=GN;function XN(n,e){var t=fi(n)?WN:QN;return t(n,wv(e))}function Go(n){return n&&n.length?n[0]:void 0}function Cv(n,e){var t=-1,i=Tu(n)?Array(n.length):[];return yv(n,function(r,o,s){i[++t]=e(r,o,s)}),i}function YN(n,e){var t=fi(n)?bc:Cv;return t(n,Cf(e))}var ZN=Object.prototype,$N=ZN.hasOwnProperty,eI=kv(function(n,e,t){$N.call(n,t)?n[t].push(e):Mp(n,t,[e])});const Fp=eI;function at(n){var e=n==null?0:n.length;return e?iP(n,0,-1):[]}var tI="[object Map]",nI="[object Set]",iI=Object.prototype,rI=iI.hasOwnProperty;function yt(n){if(n==null)return!0;if(Tu(n)&&(fi(n)||typeof n=="string"||typeof n.splice=="function"||Dc(n)||m2(n)||Tp(n)))return!n.length;var e=iu(n);if(e==tI||e==nI)return!n.size;if(Op(n))return!ev(n).length;for(var t in n)if(rI.call(n,t))return!1;return!0}function st(n,e){return Bp(n,e)}function oI(n,e){return n<e}function sI(n,e){var t={};return e=Cf(e),gv(n,function(i,r,o){Mp(t,r,e(i,r,o))}),t}function lI(n,e,t){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=e(o);if(s!=null&&(l===void 0?s===s&&!Vl(s):t(s,l)))var l=s,a=o}return a}function nh(n,e){return n&&n.length?lI(n,Cf(e),oI):void 0}function aI(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function uI(n,e){if(n!==e){var t=n!==void 0,i=n===null,r=n===n,o=Vl(n),s=e!==void 0,l=e===null,a=e===e,u=Vl(e);if(!l&&!u&&!o&&n>e||o&&s&&a&&!l&&!u||i&&s&&a||!t&&a||!r)return 1;if(!i&&!o&&!u&&n<e||u&&t&&r&&!i&&!o||l&&t&&r||!s&&r||!a)return-1}return 0}function cI(n,e,t){for(var i=-1,r=n.criteria,o=e.criteria,s=r.length,l=t.length;++i<s;){var a=uI(r[i],o[i]);if(a){if(i>=l)return a;var u=t[i];return a*(u=="desc"?-1:1)}}return n.index-e.index}function fI(n,e,t){e.length?e=bc(e,function(o){return fi(o)?function(s){return y2(s,o.length===1?o[0]:o)}:o}):e=[wf];var i=-1;e=bc(e,Dp(Cf));var r=Cv(n,function(o,s,l){var a=bc(e,function(u){return u(o)});return{criteria:a,index:++i,value:o}});return aI(r,function(o,s){return cI(o,s,t)})}var hI=kv(function(n,e,t){n[t?0:1].push(e)},function(){return[[],[]]});const dI=hI;var pI=Math.ceil,mI=Math.max;function gI(n,e,t,i){for(var r=-1,o=mI(pI((e-n)/(t||1)),0),s=Array(o);o--;)s[i?o:++r]=n,n+=t;return s}function bI(n){return function(e,t,i){return i&&typeof i!="number"&&f1(e,t,i)&&(t=i=void 0),e=Kh(e),t===void 0?(t=e,e=0):t=Kh(t),i=i===void 0?e<t?1:-1:Kh(i),gI(e,t,i,n)}}var yI=bI();const kI=yI;var wI=S9(function(n,e){if(n==null)return[];var t=e.length;return t>1&&f1(n,e[0],e[1])?e=[]:t>2&&f1(e[0],e[1],e[2])&&(e=[e[0]]),fI(n,iv(e,1),[])});const CI=wI;var _I="Expected a function";function SI(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(_I);return jr(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),Lp(n,e,{leading:i,maxWait:e,trailing:r})}var vI=9007199254740991,F0=4294967295,xI=Math.min;function uk(n,e){if(n=F7(n),n<1||n>vI)return[];var t=F0,i=xI(n,F0);e=wv(e),n-=F0;for(var r=GS(i,e);++t<n;)e(t);return r}var MI=0;function ru(n){var e=++MI;return tv(n)+e}const AI=1e4,EI=[];function g1(n,e=!1){const t={};if(!Array.isArray(n))throw new TypeError("Array expected");function i(s,l){(!Array.isArray(s)&&!Rt(s)||e&&l.length>0)&&(t[xe(l)]=!0),Rt(s)&&Object.keys(s).forEach(u=>{i(s[u],l.concat(u))})}const r=Math.min(n.length,AI);for(let s=0;s<r;s++){const l=n[s];i(l,EI)}return Object.keys(t).sort().map(Fr)}function _v(n,e,t){if(!(e<=n))for(let i=n;i<e;i++)t(i)}function bd(n,e){return n.length>e?n.slice(0,e):n}function ck(n){return{...n}}function fk(n){return Object.values(n)}function hk(n,e,t,i){const r=n.slice(0),o=r.splice(e,t);return r.splice.apply(r,[e+i,0,...o]),r}function OI(n,e,t){if(n.length<e)n.forEach(t);else{const i=e>1?(n.length-1)/(e-1):n.length;for(let r=0;r<e;r++){const o=Math.floor(r*i);t(n[o],o,n)}}}function _f(n,e){try{return e.parse(n)}catch{return e.parse(po(n))}}function Sv(n,e){try{return _f(n,e)}catch{return}}function jp(n,e){n=n.replace(xv,"");try{return e(n)}catch{}try{return e("["+n+"]")}catch{}try{return e("{"+n+"}")}catch{}throw new Error("Failed to parse partial JSON")}function vv(n){n=n.replace(xv,"");try{return po(n)}catch{}try{const e=po("["+n+"]");return e.substring(1,e.length-1)}catch{}try{const e=po("{"+n+"}");return e.substring(1,e.length-1)}catch{}throw new Error("Failed to repair partial JSON")}const xv=/,\s*$/;function ou(n,e){const t=pk.exec(e);if(t){const i=ei(t[2]),r=DI(n,`
`,0,i),o=n.lastIndexOf(`
`,i),s=i-o-1;return{position:i,line:r,column:s,message:e.replace(pk,()=>`line ${r+1} column ${s+1}`)}}else{const i=BI.exec(e),r=i?ei(i[1]):null,o=r!==null?r-1:null,s=LI.exec(e),l=s?ei(s[1]):null,a=l!==null?l-1:null;return{position:o!==null&&a!==null?TI(n,o,a):null,line:o,column:a,message:e.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function TI(n,e,t){let i=n.indexOf(`
`),r=1;for(;r<e&&i!==-1;)i=n.indexOf(`
`,i+1),r++;return i!==-1?i+t+1:null}function DI(n,e,t=0,i=n.length){let r=0;for(let o=t;o<i;o++)n.charAt(o)===e&&r++;return r}function PI(n,e){try{const t=vp.parse(n),i=xe(e),r=t.pointers[i];if(r)return{path:e,line:r.key?r.key.line:r.value?r.value.line:0,column:r.key?r.key.column:r.value?r.value.column:0,from:r.key?r.key.pos:r.value?r.value.pos:0,to:r.keyEnd?r.keyEnd.pos:r.valueEnd?r.valueEnd.pos:0}}catch(t){console.error(t)}return{path:e,line:0,column:0,from:0,to:0}}function RI(n,e,t){if(e==="array"){if(Array.isArray(n))return n;if(Rt(n))return fk(n);if(typeof n=="string")try{const i=t.parse(n);if(Array.isArray(i))return i;if(Rt(i))return fk(i)}catch{return[n]}return[n]}if(e==="object"){if(Array.isArray(n))return ck(n);if(Rt(n))return n;if(typeof n=="string")try{const i=t.parse(n);if(Rt(i))return i;if(Array.isArray(i))return ck(i)}catch{return{value:n}}return{value:n}}if(e==="value")return Qt(n)?t.stringify(n):n;throw new Error(`Cannot convert ${h2(n,t)} to ${e}`)}function j0(n){return Rt(n)?n.json!==void 0?n.text!==void 0?'Content must contain either a property "json" or a property "text" but not both':null:n.text===void 0?'Content must contain either a property "json" or a property "text"':typeof n.text!="string"?'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?':null:"Content must be an object"}function su(n){return Rt(n)&&typeof n.text=="string"}function Nc(n){return Rt(n)&&typeof n.json<"u"}function NI(n,e=void 0,t=JSON){return su(n)?n:{text:t.stringify(n.json,null,e)}}function dk(n,e=JSON){return Nc(n)?n:{json:e.parse(n.text)}}function b1(n,e,t){return NI(n,e,t).text}function Mv(n,e){return II(n,e)>e}function II(n,e=1/0){if(su(n))return n.text.length;const t=n.json;let i=0;function r(o){if(Array.isArray(o)){if(i+=2+(o.length-1),i>e)return i;for(let s=0;s<o.length;s++){const l=o[s];if(r(l),i>e)return i}}else if(Rt(o)){const s=Object.keys(o);i+=2+s.length+(s.length-1);for(let l=0;l<s.length;l++){const a=s[l],u=o[a];i+=a.length+2,r(u)}}else typeof o=="string"?i+=o.length+2:i+=String(o).length}return r(t),i}const pk=/(position|char) (\d+)/,BI=/line (\d+)/,LI=/column (\d+)/;function FI(n,e){return n.parse===e.parse&&n.stringify===e.stringify}function mk(n){const t=n.substring(0,999);return!t.includes(`
`)&&jI.test(t)}const jI=/[,:]\S/;function _2({escapeControlCharacters:n,escapeUnicodeCharacters:e}){return n?e?zI:VI:e?HI:qI}const zI={escapeValue:n=>Av(Tv(String(n))),unescapeValue:n=>Dv(Ev(n))},VI={escapeValue:n=>Tv(String(n)),unescapeValue:n=>Dv(n)},HI={escapeValue:n=>Av(String(n)),unescapeValue:n=>Ev(n)},qI={escapeValue:n=>String(n),unescapeValue:n=>n};function Av(n){return n.replace(/[^\x20-\x7F]/g,e=>{var t;return e==="\b"||e==="\f"||e===`
`||e==="\r"||e==="	"?e:"\\u"+("000"+((t=e.codePointAt(0))==null?void 0:t.toString(16))).slice(-4)})}function Ev(n){return n.replace(/\\u[a-fA-F0-9]{4}/g,e=>{try{const t=JSON.parse('"'+e+'"');return Ov[t]||t}catch{return e}})}const Ov={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},WI={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"};function Tv(n){return n.replace(/["\b\f\n\r\t\\]/g,e=>Ov[e]||e)}function Dv(n){return n.replace(/\\["bfnrt\\]/g,e=>WI[e]||e)}function ql(n){return typeof n!="string"?String(n):n.endsWith(`
`)?n+`
`:n}function UI(n){return n.replace(/\n$/,"")}function S2(n,e){return Sf(n,t=>t.nodeName.toUpperCase()===e.toUpperCase())}function Al(n,e,t){return Sf(n,i=>KI(i,e,t))}function JI(n){return n.nodeName==="DIV"&&n.contentEditable==="true"}function KI(n,e,t){return typeof n.getAttribute=="function"&&n.getAttribute(e)===t}function Sf(n,e){return!!v2(n,e)}function v2(n,e){let t=n;for(;t&&!e(t);)t=t.parentNode;return t||void 0}function Pv(n){if(n.firstChild==null){n.focus();return}const e=document.createRange(),t=window.getSelection();e.setStart(n,1),e.collapse(!0),t==null||t.removeAllRanges(),t==null||t.addRange(e)}function yd(n,e,t,i){const r=Pu(n);if(!r)return;const o=r.document.activeElement?r.document.activeElement:null;o&&o.isContentEditable&&(o.textContent=t?e:o.textContent+e,Pv(o),i&&i(o))}function Pu(n){return n&&n.ownerDocument?n.ownerDocument.defaultView:null}function x2(n){const e=Pu(n),t=e==null?void 0:e.document.activeElement;return t?Sf(t,i=>i===n):!1}function Rv(n,e){return v2(n,t=>t.nodeName===e)}function z0(n){return Al(n,"data-type","selectable-key")?Tt.key:Al(n,"data-type","selectable-value")?Tt.value:Al(n,"data-type","insert-selection-area-inside")?Tt.inside:Al(n,"data-type","insert-selection-area-after")?Tt.after:Tt.multi}function lu(n){return encodeURIComponent(xe(n))}function GI(n){return Fr(decodeURIComponent(n))}function Nv(n){const e=v2(n,i=>i!=null&&i.hasAttribute?i.hasAttribute("data-path"):!1),t=e==null?void 0:e.getAttribute("data-path");return t?GI(t):null}function QI({allElements:n,currentElement:e,direction:t,hasPrio:i=()=>!0,margin:r=10}){const o=YN(n.filter(l),a),s=a(e);function l(b){const y=b.getBoundingClientRect();return y.width>0&&y.height>0}function a(b){const y=b.getBoundingClientRect();return{x:y.left+y.width/2,y:y.top+y.height/2,rect:y,element:b}}const u=(b,y)=>Math.abs(b.y-y.y)<r,c=(b,y)=>b.rect.left+r<y.rect.left,f=(b,y)=>b.rect.right>y.rect.right+r,h=(b,y)=>b.y+r<y.y,d=(b,y)=>b.y>y.y+r;function p(b,y,_=1){const M=b.x-y.x,w=(b.y-y.y)*_;return Math.sqrt(M*M+w*w)}const m=b=>p(b,s),g=b=>p(b,s,10);if(t==="Left"||t==="Right"){const b=t==="Left"?o.filter(M=>c(M,s)):o.filter(M=>f(M,s)),y=b.filter(M=>u(M,s)),_=nh(y,m)||nh(b,g);return _==null?void 0:_.element}if(t==="Up"||t==="Down"){const b=t==="Up"?o.filter(M=>h(M,s)):o.filter(M=>d(M,s)),y=b.filter(M=>i(M.element)),_=nh(y,m)||nh(b,m);return _==null?void 0:_.element}}function Iv(n){return!!n&&n.nodeName==="DIV"&&typeof n.refresh=="function"&&typeof n.cancel=="function"}function ol(n,e="+"){const t=[];n.ctrlKey&&t.push("Ctrl"),n.metaKey&&t.push("Ctrl"),n.altKey&&t.push("Alt"),n.shiftKey&&t.push("Shift");const i=n.key.length===1?n.key.toUpperCase():n.key;return i in XI||t.push(i),t.join(e)}const XI={Ctrl:!0,Command:!0,Control:!0,Alt:!0,Option:!0,Shift:!0};const{window:V0}=t2;function gk(n){let e,t,i,r,o,s;const l=[n[0].props];var a=n[0].component;function u(c){let f={};for(let h=0;h<l.length;h+=1)f=Qi(f,l[h]);return{props:f}}return a&&(r=bo(a,u())),{c(){e=D("div"),t=D("input"),i=Q(),r&&$(r.$$.fragment),k(t,"type","text"),t.readOnly=!0,k(t,"tabindex","-1"),k(t,"class","jse-hidden-input svelte-15awhio"),k(e,"class","jse-absolute-popup-content svelte-15awhio"),k(e,"style",o=bk(n[1],n[0].options))},m(c,f){j(c,e,f),x(e,t),n[7](t),x(e,i),r&&ee(r,e,null),s=!0},p(c,f){const h=f&1?us(l,[yf(c[0].props)]):{};if(f&1&&a!==(a=c[0].component)){if(r){ce();const d=r;v(d.$$.fragment,1,0,()=>{te(d,1)}),fe()}a?(r=bo(a,u()),$(r.$$.fragment),C(r.$$.fragment,1),ee(r,e,null)):r=null}else a&&r.$set(h);(!s||f&3&&o!==(o=bk(c[1],c[0].options)))&&k(e,"style",o)},i(c){s||(r&&C(r.$$.fragment,c),s=!0)},o(c){r&&v(r.$$.fragment,c),s=!1},d(c){c&&z(e),n[7](null),r&&te(r)}}}function YI(n){let e,t,i,r,o=n[1]&&gk(n);return{c(){e=D("div"),o&&o.c(),k(e,"role","none"),k(e,"class","jse-absolute-popup svelte-15awhio")},m(s,l){j(s,e,l),o&&o.m(e,null),n[8](e),t=!0,i||(r=[ue(V0,"mousedown",n[3],!0),ue(V0,"keydown",n[4],!0),ue(V0,"wheel",n[5],!0),ue(e,"mousedown",ZI),ue(e,"keydown",n[4])],i=!0)},p(s,[l]){s[1]?o?(o.p(s,l),l&2&&C(o,1)):(o=gk(s),o.c(),C(o,1),o.m(e,null)):o&&(ce(),v(o,1,1,()=>{o=null}),fe())},i(s){t||(C(o),t=!0)},o(s){v(o),t=!1},d(s){s&&z(e),o&&o.d(),n[8](null),i=!1,fn(r)}}}function ZI(n){n.stopPropagation()}function bk(n,e){function t(){if(e.anchor){const{anchor:c,width:f=0,height:h=0,offsetTop:d=0,offsetLeft:p=0,position:m}=e,{left:g,top:b,bottom:y,right:_}=c.getBoundingClientRect(),M=m==="top"||b+h>window.innerHeight&&b>h,w=m==="left"||g+f>window.innerWidth&&g>f;return{left:w?_-p:g+p,top:M?b-d:y+d,positionAbove:M,positionLeft:w}}else if(typeof e.left=="number"&&typeof e.top=="number"){const{left:c,top:f,width:h=0,height:d=0}=e,p=f+d>window.innerHeight&&f>d,m=c+h>window.innerWidth&&c>h;return{left:c,top:f,positionAbove:p,positionLeft:m}}else throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}const i=n.getBoundingClientRect(),{left:r,top:o,positionAbove:s,positionLeft:l}=t(),a=s?`bottom: ${i.top-o}px;`:`top: ${o-i.top}px;`,u=l?`right: ${i.left-r}px;`:`left: ${r-i.left}px;`;return a+u}function $I(n,e,t){let{popup:i}=e,{closeAbsolutePopup:r}=e,o,s;br(f);function l(p){i.options&&i.options.closeOnOuterClick&&!Sf(p.target,m=>m===o)&&r(i.id)}function a(p){l(p)}function u(p){ol(p)==="Escape"&&r(i.id)}function c(p){l(p)}function f(){s&&s.focus()}function h(p){ft[p?"unshift":"push"](()=>{s=p,t(2,s)})}function d(p){ft[p?"unshift":"push"](()=>{o=p,t(1,o)})}return n.$$set=p=>{"popup"in p&&t(0,i=p.popup),"closeAbsolutePopup"in p&&t(6,r=p.closeAbsolutePopup)},[i,o,s,a,u,c,r,h,d]}class eB extends je{constructor(e){super(),ze(this,e,$I,YI,xn,{popup:0,closeAbsolutePopup:6})}}const tB=eB;function yk(n,e,t){const i=n.slice();return i[6]=e[t],i}function kk(n){let e,t;return e=new tB({props:{popup:n[6],closeAbsolutePopup:n[1]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.popup=i[6]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function nB(n){let e,t,i=n[0],r=[];for(let a=0;a<i.length;a+=1)r[a]=kk(yk(n,i,a));const o=a=>v(r[a],1,1,()=>{r[a]=null}),s=n[3].default,l=tn(s,n,n[2],null);return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Q(),l&&l.c()},m(a,u){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,u);j(a,e,u),l&&l.m(a,u),t=!0},p(a,[u]){if(u&3){i=a[0];let c;for(c=0;c<i.length;c+=1){const f=yk(a,i,c);r[c]?(r[c].p(f,u),C(r[c],1)):(r[c]=kk(f),r[c].c(),C(r[c],1),r[c].m(e.parentNode,e))}for(ce(),c=i.length;c<r.length;c+=1)o(c);fe()}l&&l.p&&(!t||u&4)&&nn(l,s,a,a[2],t?on(s,a[2],u,null):rn(a[2]),null)},i(a){if(!t){for(let u=0;u<i.length;u+=1)C(r[u]);C(l,a),t=!0}},o(a){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)v(r[u]);v(l,a),t=!1},d(a){mn(r,a),a&&z(e),l&&l.d(a)}}}function iB(n,e,t){let{$$slots:i={},$$scope:r}=e;const o=Wn("jsoneditor:AbsolutePopup");let s=[];function l(u,c,f){o("open...",c,f);const h={id:gc(),component:u,props:c||{},options:f||{}};return t(0,s=[...s,h]),h.id}function a(u){const c=s.findIndex(f=>f.id===u);if(c!==-1){const f=s[c];f.options.onClose&&f.options.onClose(),t(0,s=s.filter(h=>h.id!==u))}}return kS("absolute-popup",{openAbsolutePopup:l,closeAbsolutePopup:a}),n.$$set=u=>{"$$scope"in u&&t(2,r=u.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&o("popups",s)},[s,a,r,i]}class rB extends je{constructor(e){super(),ze(this,e,iB,nB,Ze,{})}}const Bv=rB;function Ri(n){return n.map((e,t)=>Lv.test(e)?"["+e+"]":/[.[\]]/.test(e)||e===""?'["'+oB(e)+'"]':(t>0?".":"")+e).join("")}function oB(n){return n.replace(/"/g,'\\"')}function sB(n){const e=[];let t=0;for(;t<n.length;)n[t]==="."&&t++,n[t]==="["?(t++,n[t]==='"'?(t++,e.push(i(o=>o==='"',!0)),r('"')):e.push(i(o=>o==="]")),r("]")):e.push(i(o=>o==="."||o==="["));function i(o,s=!1){let l="";for(;t<n.length&&!o(n[t]);)s&&n[t]==="\\"&&n[t+1]==='"'?(l+='"',t+=2):(l+=n[t],t++);return l}function r(o){if(n[t]!==o)throw new SyntaxError(`Invalid JSON path: ${o} expected at position ${t}`);t++}return e}function rc(n){return{value:n,label:yt(n)?"(item root)":Ri(n)}}function kl(n){return n.map(e=>Lv.test(e)?`?.[${e}]`:lB.test(e)?`?.${e}`:`?.[${JSON.stringify(e)}]`).join("")}const lB=/^[a-zA-Z$_][a-zA-Z$_\d]*$/,Lv=/^\d+$/;function aB(){return Np(n=>n,Ri)}function vf(n,e){const t=new Set(e),i=n.replace(/ \(copy( \d+)?\)$/,"");let r=n,o=1;for(;t.has(r);){const s="copy"+(o>1?" "+o:"");r=`${i} (${s})`,o++}return r}function ts(n,e){const t="...",i=e-t.length;return n.length>e?n.substring(0,i)+t:n}function uB(n){if(n==="")return"";const e=n.toLowerCase();if(e==="null")return null;if(e==="true")return!0;if(e==="false")return!1;if(e==="undefined")return;const t=Number(n),i=parseFloat(n);return!isNaN(t)&&!isNaN(i)?t:n}const cB=`
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`,fB={id:"javascript",name:"JavaScript",description:cB,createQuery:hB,executeQuery:dB};function hB(n,e){const{filter:t,sort:i,projection:r}=e,o=[`  return data
`];if(t&&t.path&&t.relation&&t.value){const s=`item => item${kl(t.path)}`,l=uB(t.value),a=typeof l=="string"?`'${t.value}'`:h7(t.value)&&!Number.isSafeInteger(l)?`${t.value}n`:t.value;o.push(`    .filter(${s} ${t.relation} ${a})
`)}if(i&&i.path&&i.direction&&(i.direction==="desc"?o.push(`    .slice()
    .sort((a, b) => {
      // sort descending
      const valueA = a${kl(i.path)}
      const valueB = b${kl(i.path)}
      return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
    })
`):o.push(`    .slice()
    .sort((a, b) => {
      // sort ascending
      const valueA = a${kl(i.path)}
      const valueB = b${kl(i.path)}
      return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
    })
`)),r&&r.paths)if(r.paths.length>1){const s=r.paths.map(l=>{const a=l[l.length-1]||"item",u=`item${kl(l)}`;return`      ${JSON.stringify(a)}: ${u}`});o.push(`    .map(item => ({
${s.join(`,
`)}})
    )
`)}else{const s=`item${kl(r.paths[0])}`;o.push(`    .map(item => ${s})
`)}return`function query (data) {
${o.join("")}}`}function dB(n,e){const i=new Function(`"use strict";

`+e+`

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(n);return i!==void 0?i:null}const pB={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7c0 0 0 0 0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5L109 384c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8c0 0 0 0 0 0s0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4c0 0 0 0 0 0s0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5l-48.6 0c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8c0 0 0 0 0 0s0 0 0 0s0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80l0-16 160 0 0 16c0 44.2-35.8 80-80 80z"]},mB={prefix:"far",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},Ic=mB,Bc={prefix:"far",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M384 80c8.8 0 16 7.2 16 16l0 320c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16L48 96c0-8.8 7.2-16 16-16l320 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"]},gB={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]};function bB(n){let e;return{c(){e=yo("g")},m(t,i){j(t,e,i),e.innerHTML=n[0]},p(t,[i]){i&1&&(e.innerHTML=t[0])},i:he,o:he,d(t){t&&z(e)}}}function yB(n,e,t){let i=870711;function r(){return i+=1,`fa-${i.toString(16)}`}let o="",{data:s}=e;function l(a){if(!a||!a.raw)return"";let u=a.raw;const c={};return u=u.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(f,h)=>{const d=r();return c[h]=d,` id="${d}"`}),u=u.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(f,h,d,p)=>{const m=h||p;return!m||!c[m]?f:`#${c[m]}`}),u}return n.$$set=a=>{"data"in a&&t(1,s=a.data)},n.$$.update=()=>{n.$$.dirty&2&&t(0,o=l(s))},[o,s]}class kB extends je{constructor(e){super(),ze(this,e,yB,bB,xn,{data:1})}}function wB(n){let e,t,i,r;const o=n[12].default,s=tn(o,n,n[11],null);let l=[{version:"1.1"},{class:t="fa-icon "+n[0]},{width:n[1]},{height:n[2]},{"aria-label":n[9]},{role:i=n[9]?"img":"presentation"},{viewBox:n[3]},{style:n[8]},n[10]],a={};for(let u=0;u<l.length;u+=1)a=Qi(a,l[u]);return{c(){e=yo("svg"),s&&s.c(),eu(e,a),le(e,"fa-spin",n[4]),le(e,"fa-pulse",n[6]),le(e,"fa-inverse",n[5]),le(e,"fa-flip-horizontal",n[7]==="horizontal"),le(e,"fa-flip-vertical",n[7]==="vertical"),le(e,"svelte-1mc5hvj",!0)},m(u,c){j(u,e,c),s&&s.m(e,null),r=!0},p(u,[c]){s&&s.p&&(!r||c&2048)&&nn(s,o,u,u[11],r?on(o,u[11],c,null):rn(u[11]),null),eu(e,a=us(l,[{version:"1.1"},(!r||c&1&&t!==(t="fa-icon "+u[0]))&&{class:t},(!r||c&2)&&{width:u[1]},(!r||c&4)&&{height:u[2]},(!r||c&512)&&{"aria-label":u[9]},(!r||c&512&&i!==(i=u[9]?"img":"presentation"))&&{role:i},(!r||c&8)&&{viewBox:u[3]},(!r||c&256)&&{style:u[8]},c&1024&&u[10]])),le(e,"fa-spin",u[4]),le(e,"fa-pulse",u[6]),le(e,"fa-inverse",u[5]),le(e,"fa-flip-horizontal",u[7]==="horizontal"),le(e,"fa-flip-vertical",u[7]==="vertical"),le(e,"svelte-1mc5hvj",!0)},i(u){r||(C(s,u),r=!0)},o(u){v(s,u),r=!1},d(u){u&&z(e),s&&s.d(u)}}}function CB(n,e,t){const i=["class","width","height","box","spin","inverse","pulse","flip","style","label"];let r=hd(e,i),{$$slots:o={},$$scope:s}=e,{class:l=""}=e,{width:a}=e,{height:u}=e,{box:c="0 0 0 0"}=e,{spin:f=!1}=e,{inverse:h=!1}=e,{pulse:d=!1}=e,{flip:p="none"}=e,{style:m=""}=e,{label:g=""}=e;return n.$$set=b=>{e=Qi(Qi({},e),wS(b)),t(10,r=hd(e,i)),"class"in b&&t(0,l=b.class),"width"in b&&t(1,a=b.width),"height"in b&&t(2,u=b.height),"box"in b&&t(3,c=b.box),"spin"in b&&t(4,f=b.spin),"inverse"in b&&t(5,h=b.inverse),"pulse"in b&&t(6,d=b.pulse),"flip"in b&&t(7,p=b.flip),"style"in b&&t(8,m=b.style),"label"in b&&t(9,g=b.label),"$$scope"in b&&t(11,s=b.$$scope)},[l,a,u,c,f,h,d,p,m,g,r,s,o]}class _B extends je{constructor(e){super(),ze(this,e,CB,wB,xn,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,style:8,label:9})}}function wk(n,e,t){const i=n.slice();return i[24]=e[t],i}function Ck(n,e,t){const i=n.slice();return i[27]=e[t],i}function _k(n){let e,t=[n[27]],i={};for(let r=0;r<t.length;r+=1)i=Qi(i,t[r]);return{c(){e=yo("path"),eu(e,i)},m(r,o){j(r,e,o)},p(r,o){eu(e,i=us(t,[o&64&&r[27]]))},d(r){r&&z(e)}}}function Sk(n){let e,t=[n[24]],i={};for(let r=0;r<t.length;r+=1)i=Qi(i,t[r]);return{c(){e=yo("polygon"),eu(e,i)},m(r,o){j(r,e,o)},p(r,o){eu(e,i=us(t,[o&64&&r[24]]))},d(r){r&&z(e)}}}function vk(n){let e,t,i;function r(s){n[16](s)}let o={};return n[6]!==void 0&&(o.data=n[6]),e=new kB({props:o}),ft.push(()=>Tr(e,"data",r)),{c(){$(e.$$.fragment)},m(s,l){ee(e,s,l),i=!0},p(s,l){const a={};!t&&l&64&&(t=!0,a.data=s[6],Dr(()=>t=!1)),e.$set(a)},i(s){i||(C(e.$$.fragment,s),i=!0)},o(s){v(e.$$.fragment,s),i=!1},d(s){te(e,s)}}}function SB(n){var c,f,h;let e,t,i,r,o=((c=n[6])==null?void 0:c.paths)||[],s=[];for(let d=0;d<o.length;d+=1)s[d]=_k(Ck(n,o,d));let l=((f=n[6])==null?void 0:f.polygons)||[],a=[];for(let d=0;d<l.length;d+=1)a[d]=Sk(wk(n,l,d));let u=((h=n[6])==null?void 0:h.raw)&&vk(n);return{c(){for(let d=0;d<s.length;d+=1)s[d].c();e=Q();for(let d=0;d<a.length;d+=1)a[d].c();t=Q(),u&&u.c(),i=ut()},m(d,p){for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(d,p);j(d,e,p);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(d,p);j(d,t,p),u&&u.m(d,p),j(d,i,p),r=!0},p(d,p){var m,g,b;if(p&64){o=((m=d[6])==null?void 0:m.paths)||[];let y;for(y=0;y<o.length;y+=1){const _=Ck(d,o,y);s[y]?s[y].p(_,p):(s[y]=_k(_),s[y].c(),s[y].m(e.parentNode,e))}for(;y<s.length;y+=1)s[y].d(1);s.length=o.length}if(p&64){l=((g=d[6])==null?void 0:g.polygons)||[];let y;for(y=0;y<l.length;y+=1){const _=wk(d,l,y);a[y]?a[y].p(_,p):(a[y]=Sk(_),a[y].c(),a[y].m(t.parentNode,t))}for(;y<a.length;y+=1)a[y].d(1);a.length=l.length}(b=d[6])!=null&&b.raw?u?(u.p(d,p),p&64&&C(u,1)):(u=vk(d),u.c(),C(u,1),u.m(i.parentNode,i)):u&&(ce(),v(u,1,1,()=>{u=null}),fe())},i(d){r||(C(u),r=!0)},o(d){v(u),r=!1},d(d){mn(s,d),d&&z(e),mn(a,d),d&&z(t),u&&u.d(d),d&&z(i)}}}function vB(n){let e;const t=n[15].default,i=tn(t,n,n[17],null),r=i||SB(n);return{c(){r&&r.c()},m(o,s){r&&r.m(o,s),e=!0},p(o,s){i?i.p&&(!e||s&131072)&&nn(i,t,o,o[17],e?on(t,o[17],s,null):rn(o[17]),null):r&&r.p&&(!e||s&64)&&r.p(o,e?s:-1)},i(o){e||(C(r,o),e=!0)},o(o){v(r,o),e=!1},d(o){r&&r.d(o)}}}function xB(n){let e,t;const i=[{label:n[5]},{width:n[7]},{height:n[8]},{box:n[10]},{style:n[9]},{spin:n[1]},{flip:n[4]},{inverse:n[2]},{pulse:n[3]},{class:n[0]},n[11]];let r={$$slots:{default:[vB]},$$scope:{ctx:n}};for(let o=0;o<i.length;o+=1)r=Qi(r,i[o]);return e=new _B({props:r}),{c(){$(e.$$.fragment)},m(o,s){ee(e,o,s),t=!0},p(o,[s]){const l=s&4031?us(i,[s&32&&{label:o[5]},s&128&&{width:o[7]},s&256&&{height:o[8]},s&1024&&{box:o[10]},s&512&&{style:o[9]},s&2&&{spin:o[1]},s&16&&{flip:o[4]},s&4&&{inverse:o[2]},s&8&&{pulse:o[3]},s&1&&{class:o[0]},s&2048&&yf(o[11])]):{};s&131136&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){t||(C(e.$$.fragment,o),t=!0)},o(o){v(e.$$.fragment,o),t=!1},d(o){te(e,o)}}}let xk=1;function MB(n){let e,t;if(n)if("definition"in n){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in n&&"icon"in n){e=n.iconName;const[i,r,,,o]=n.icon,s=Array.isArray(o)?o:[o];t={width:i,height:r,paths:s.map(l=>({d:l}))}}else e=Object.keys(n)[0],t=n[e];else return;return t}function AB(n,e,t){const i=["class","data","scale","spin","inverse","pulse","flip","label","style"];let r=hd(e,i),{$$slots:o={},$$scope:s}=e,{class:l=""}=e,{data:a}=e,u,{scale:c=1}=e,{spin:f=!1}=e,{inverse:h=!1}=e,{pulse:d=!1}=e,{flip:p=void 0}=e,{label:m=""}=e,{style:g=""}=e,b=10,y=10,_,M;function w(){let H=1;return typeof c<"u"&&(H=Number(c)),isNaN(H)||H<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),xk):H*xk}function S(){return u?`0 0 ${u.width} ${u.height}`:`0 0 ${b} ${y}`}function E(){return u?Math.max(u.width,u.height)/16:1}function I(){return u?u.width/E()*w():0}function O(){return u?u.height/E()*w():0}function P(){let H="";g!==null&&(H+=g);let W=w();return W===1?H.length===0?"":H:(H!==""&&!H.endsWith(";")&&(H+="; "),`${H}font-size: ${W}em`)}function A(H){u=H,t(6,u),t(12,a),t(14,g),t(13,c)}return n.$$set=H=>{e=Qi(Qi({},e),wS(H)),t(11,r=hd(e,i)),"class"in H&&t(0,l=H.class),"data"in H&&t(12,a=H.data),"scale"in H&&t(13,c=H.scale),"spin"in H&&t(1,f=H.spin),"inverse"in H&&t(2,h=H.inverse),"pulse"in H&&t(3,d=H.pulse),"flip"in H&&t(4,p=H.flip),"label"in H&&t(5,m=H.label),"style"in H&&t(14,g=H.style),"$$scope"in H&&t(17,s=H.$$scope)},n.$$.update=()=>{n.$$.dirty&28672&&(t(6,u=MB(a)),t(7,b=I()),t(8,y=O()),t(9,_=P()),t(10,M=S()))},[l,f,h,d,p,m,u,b,y,_,M,r,a,c,g,o,A,s]}class ht extends je{constructor(e){super(),ze(this,e,AB,xB,xn,{class:0,data:12,scale:13,spin:1,inverse:2,pulse:3,flip:4,label:5,style:14})}}function EB(n){let e,t,i,r,o,s,l;return t=new ht({props:{data:n[0]===!0?Ic:Bc}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"role","checkbox"),k(e,"tabindex","-1"),k(e,"aria-checked",i=n[0]===!0),k(e,"class","jse-boolean-toggle svelte-68vtq4"),k(e,"title",r=n[1]?`Boolean value ${n[0]}`:"Click to toggle this boolean value"),le(e,"jse-readonly",n[1])},m(a,u){j(a,e,u),ee(t,e,null),o=!0,s||(l=ue(e,"mousedown",n[2]),s=!0)},p(a,[u]){const c={};u&1&&(c.data=a[0]===!0?Ic:Bc),t.$set(c),(!o||u&1&&i!==(i=a[0]===!0))&&k(e,"aria-checked",i),(!o||u&3&&r!==(r=a[1]?`Boolean value ${a[0]}`:"Click to toggle this boolean value"))&&k(e,"title",r),(!o||u&2)&&le(e,"jse-readonly",a[1])},i(a){o||(C(t.$$.fragment,a),o=!0)},o(a){v(t.$$.fragment,a),o=!1},d(a){a&&z(e),te(t),s=!1,l()}}}function OB(n,e,t){let{path:i}=e,{value:r}=e,{readOnly:o}=e,{onPatch:s}=e,{focus:l}=e;function a(u){u.stopPropagation(),!o&&(s([{op:"replace",path:xe(i),value:!r}]),l())}return n.$$set=u=>{"path"in u&&t(3,i=u.path),"value"in u&&t(0,r=u.value),"readOnly"in u&&t(1,o=u.readOnly),"onPatch"in u&&t(4,s=u.onPatch),"focus"in u&&t(5,l=u.focus)},[r,o,a,i,s,l]}class TB extends je{constructor(e){super(),ze(this,e,OB,EB,Ze,{path:3,value:0,readOnly:1,onPatch:4,focus:5})}}const DB=TB;function PB(n){let e;return{c(){e=D("div"),k(e,"class","jse-color-picker-popup svelte-1mgcg2f")},m(t,i){j(t,e,i),n[4](e)},p:he,i:he,o:he,d(t){t&&z(e),n[4](null)}}}function RB(n,e,t){let{color:i}=e,{onChange:r}=e,{showOnTop:o}=e,s,l=()=>{};br(async()=>{var f;const u=(f=await DO(()=>import("./vanilla-picker-2033e4d0.js"),[]))==null?void 0:f.default,c=new u({parent:s,color:i,popup:o?"top":"bottom",onDone(h){const p=h.rgba[3]===1?h.hex.substring(0,7):h.hex;r(p)}});c.show(),l=()=>{c.destroy()}}),Ki(()=>{l()});function a(u){ft[u?"unshift":"push"](()=>{s=u,t(0,s)})}return n.$$set=u=>{"color"in u&&t(1,i=u.color),"onChange"in u&&t(2,r=u.onChange),"showOnTop"in u&&t(3,o=u.showOnTop)},[s,i,r,o,a]}class NB extends je{constructor(e){super(),ze(this,e,RB,PB,xn,{color:1,onChange:2,showOnTop:3})}}const IB=NB;function BB(n){let e,t,i,r;return{c(){e=D("button"),k(e,"type","button"),k(e,"class","jse-color-picker-button svelte-1zzxwe"),li(e,"background",n[2]),k(e,"title",t=n[1]?`Color ${n[0]}`:"Click to open a color picker"),le(e,"jse-readonly",n[1])},m(o,s){j(o,e,s),i||(r=ue(e,"click",n[3]),i=!0)},p(o,[s]){s&4&&li(e,"background",o[2]),s&3&&t!==(t=o[1]?`Color ${o[0]}`:"Click to open a color picker")&&k(e,"title",t),s&2&&le(e,"jse-readonly",o[1])},i:he,o:he,d(o){o&&z(e),i=!1,r()}}}function LB(n,e,t){let i;const{openAbsolutePopup:r}=Vn("absolute-popup");let{path:o}=e,{value:s}=e,{readOnly:l}=e,{onPatch:a}=e,{focus:u}=e;function c(d){a([{op:"replace",path:xe(o),value:d}]),f()}function f(){u()}function h(d){var M;if(l)return;const p=300,m=d.target,g=m.getBoundingClientRect().top,y=(((M=Pu(m))==null?void 0:M.innerHeight)??0)-g<p&&g>p;r(IB,{color:s,onChange:c,showOnTop:y},{anchor:m,closeOnOuterClick:!0,onClose:f,offsetTop:18,offsetLeft:-8,height:p})}return n.$$set=d=>{"path"in d&&t(4,o=d.path),"value"in d&&t(0,s=d.value),"readOnly"in d&&t(1,l=d.readOnly),"onPatch"in d&&t(5,a=d.onPatch),"focus"in d&&t(6,u=d.focus)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=HS(s))},[s,l,i,h,o,a,u]}class FB extends je{constructor(e){super(),ze(this,e,LB,BB,Ze,{path:4,value:0,readOnly:1,onPatch:5,focus:6})}}const jB=FB;function zB(n,e){const t={start:n,end:Math.min(y1(n),e)},i=Math.max(kd((n+e)/2),n),r={start:i,end:Math.min(y1(i),e)},o=kd(e),s=o===e?o-Oc:o,l={start:Math.max(s,n),end:e},a=[t],u=r.start>=t.end&&r.end<=l.start;return u&&a.push(r),l.start>=(u?r.end:t.end)&&a.push(l),a}function Fv(n){const e=CI(n,i=>i.start),t=[e[0]];for(let i=0;i<e.length;i++){const r=t.length-1,o=t[r],s=e[i];s.start<=o.end?t[r]={start:Math.min(o.start,s.start),end:Math.max(o.end,s.end)}:t.push(s)}return t}function VB(n,e){return n.some(t=>e>=t.start&&e<t.end)}function y1(n){return kd(n)+Oc}function kd(n){return Math.floor(n/Oc)*Oc}function wd(n){let e={expandedMap:{},enforceStringMap:{},visibleSectionsMap:{},selection:null,sortedColumn:null};return n!=null&&n.select&&n.json!==void 0&&(e={...e,selection:n.select(n.json,e)}),n!=null&&n.expand&&(e=ir(n.json,e,[],n.expand)),e}function zp(n,e){return n.visibleSectionsMap[e]||jl}function M2(n,e,t){e.forEach(({start:i,end:r})=>{_v(i,Math.min(n.length,r),t)})}function k1(n,e,t){const i={...e.expandedMap},r={...e.visibleSectionsMap};for(let o=0;o<t.length;o++){const s=t.slice(0,o),l=xe(s),a=Pe(n,s);if(Qt(a)&&(i[l]=!0),Array.isArray(a)&&o<t.length){const u=r[l]||jl,c=ei(t[o]);if(!VB(u,c)){const f=kd(c),h=y1(f),d={start:f,end:h};r[l]=Fv(u.concat(d))}}}return{...e,expandedMap:i,visibleSectionsMap:r}}function ir(n,e,t,i){const r={...e.expandedMap};function o(a){const u=s.length;if(Array.isArray(a)){if(i(s)){const c=xe(s);if(r[c]=!0,a.length>0){const f=zp(e,c);M2(a,f,h=>{s[u]=String(h),o(a[h])}),s.pop()}}}else if(Rt(a)&&i(s)){r[xe(s)]=!0;const c=Object.keys(a);if(c.length>0){for(const f of c)s[u]=f,o(a[f]);s.pop()}}}const s=t.slice(),l=n!==void 0?Pe(n,t):n;return l!==void 0&&o(l),{...e,expandedMap:r}}function HB(n,e){return{...n,expandedMap:{...n.expandedMap,[xe(e)]:!0}}}function jv(n,e){const t=Fa(n.expandedMap,e),i=Fa(n.enforceStringMap,e),r=Fa(n.visibleSectionsMap,e);return{...n,expandedMap:t,enforceStringMap:i,visibleSectionsMap:r}}function zv(n,e,t){if(t){const i={...n.enforceStringMap};return i[e]=t,{...n,enforceStringMap:i}}else if(typeof n.enforceStringMap[e]=="boolean"){const i={...n.enforceStringMap};return delete i[e],{...n,enforceStringMap:i}}else return n}function qB(n,e,t,i){return{...e,visibleSectionsMap:{...e.visibleSectionsMap,[t]:Fv(zp(e,t).concat(i))}}}function Vv(n,e,t){const i=Br(n,t),r=t.reduce((o,s)=>MS(s)?Hv(i,o,s):AS(s)?qv(i,o,s):o2(s)?WB(i,o,s):r1(s)||tu(s)?UB(i,o,s):o,e);return{json:i,documentState:r}}function Hv(n,e,t){const i=ho(n,t.path),r=at(i),o=xe(r),s=Pe(n,r);if(Nt(s)){const l=ei(rt(i)),a=ja(e.expandedMap,r,l,1),u=ja(e.enforceStringMap,r,l,1);let c=ja(e.visibleSectionsMap,r,l,1);return c=Wv(c,o,f=>Uv(f,l,1)),{...e,expandedMap:a,enforceStringMap:u,visibleSectionsMap:c}}return e}function qv(n,e,t){const i=ho(n,t.path),r=at(i),o=xe(r),s=Pe(n,r);let{expandedMap:l,enforceStringMap:a,visibleSectionsMap:u}=e;if(l=Fa(l,i),a=Fa(a,i),u=Fa(u,i),Nt(s)){const c=ei(rt(i));l=ja(l,r,c,-1),a=ja(a,r,c,-1),u=ja(u,r,c,-1),u=Wv(u,o,f=>Uv(f,c,-1))}return{...e,expandedMap:l,enforceStringMap:a,visibleSectionsMap:u}}function WB(n,e,t){const i=t.path,r=U0(n,e.expandedMap),o=U0(n,e.enforceStringMap),s=U0(n,e.visibleSectionsMap);return!Yt(t.value)&&!Nt(t.value)&&delete r[i],Nt(t.value)||delete s[i],(Yt(t.value)||Nt(t.value))&&delete o[i],{...e,expandedMap:r,enforceStringMap:o,visibleSectionsMap:s}}function UB(n,e,t){if(tu(t)&&t.from===t.path)return e;const i=f=>t.path+f.substring(t.from.length),r=W0(H0(e.expandedMap,t.from),i),o=W0(H0(e.enforceStringMap,t.from),i),s=W0(H0(e.visibleSectionsMap,t.from),i);let l=e;tu(t)&&(l=qv(n,l,{op:"remove",path:t.from})),l=Hv(n,l,{op:"add",path:t.path,value:null});const a=q0(l.expandedMap,r),u=q0(l.enforceStringMap,o),c=q0(l.visibleSectionsMap,s);return{...e,expandedMap:a,enforceStringMap:u,visibleSectionsMap:c}}function Fa(n,e){const t={},i=xe(e);return Object.keys(n).forEach(r=>{Sp(r,i)||(t[r]=n[r])}),t}function H0(n,e){const t={};return Object.keys(n).forEach(i=>{Sp(i,e)&&(t[i]=n[i])}),t}function q0(n,e){return{...n,...e}}function W0(n,e){const t={};return Object.keys(n).forEach(i=>{const r=e(i);t[r]=n[i]}),t}function ja(n,e,t,i){const r=e.length,o=xe(e),s=[];for(const a of Object.keys(n))if(Sp(a,o)){const u=Fr(a),c=ei(u[r]);c>=t&&(u[r]=String(c+i),s.push({oldPointer:a,newPointer:xe(u),value:n[a]}))}if(s.length===0)return n;const l={...n};return s.forEach(a=>{delete l[a.oldPointer]}),s.forEach(a=>{l[a.newPointer]=a.value}),l}function U0(n,e){const t={};return Object.keys(e).filter(i=>fr(n,ho(n,i))).forEach(i=>{t[i]=e[i]}),t}function Wv(n,e,t){const i=n[e];if(e in n){const r=t(i);if(!st(i,r)){const o={...n};return r===void 0?delete o[e]:o[e]=r,o}}return n}function Uv(n,e,t){const i=n.map(r=>({start:r.start>e?r.start+t:r.start,end:r.end>e?r.end+t:r.end}));return JB(i)}function JB(n){const e=n.slice(0);let t=1;for(;t<e.length;)e[t-1].end===e[t].start&&(e[t-1]={start:e[t-1].start,end:e[t].end},e.splice(t)),t++;return e}function ns(n,e,t,i){const r=e?e[t]:void 0;return typeof r=="boolean"?r:f7(n,i)}function xf(n,e,t=!1){const i=n.indexOf(e);return i!==-1?t?n.slice(i):n.slice(i+1):[]}function A2(n,e){const t=[];function i(r,o){t.push(o);const s=xe(o);if(r&&e.expandedMap[s]===!0){if(Nt(r)){const l=zp(e,s);M2(r,l,a=>{i(r[a],o.concat(String(a)))})}Yt(r)&&Object.keys(r).forEach(l=>{i(r[l],o.concat(l))})}}return i(n,[]),t}function Jv(n,e,t=!0){const i=[];function r(o,s){i.push({path:s,type:Pr.value});const l=xe(s);if(o&&e.expandedMap[l]===!0){if(t&&i.push({path:s,type:Pr.inside}),Nt(o)){const a=zp(e,l);M2(o,a,u=>{const c=s.concat(String(u));r(o[u],c),t&&i.push({path:c,type:Pr.after})})}Yt(o)&&Object.keys(o).forEach(u=>{const c=s.concat(u);i.push({path:c,type:Pr.key}),r(o[u],c),t&&i.push({path:c,type:Pr.after})})}}return r(n,[]),i}function KB(n,e,t){const i=A2(n,e),r=i.map(xe),o=xe(t),s=r.indexOf(o);return s!==-1&&s>0?i[s-1]:null}function w1(n,e,t){const i=A2(n,e),o=i.map(xe).indexOf(xe(t));return o!==-1&&o<i.length-1?i[o+1]:null}function vs(n,e,t){const i=Pe(n,t);if(i===void 0)return e;const o=!Mv({json:i},xS)?Lc:so;return ir(n,e,t,o)}function so(n){return n.length===0?!0:n.length===1&&n[0]==="0"}function Lc(){return!0}function GB(n){return Mv({json:n},xS)?so:Lc}function Oi(n){return n&&n.type===Tt.after||!1}function pn(n){return n&&n.type===Tt.inside||!1}function un(n){return n&&n.type===Tt.key||!1}function mt(n){return n&&n.type===Tt.value||!1}function vt(n){return n&&n.type===Tt.multi||!1}function Vp(n){return vt(n)&&st(n.focusPath,n.anchorPath)}function E2(n){return vt(n)||Oi(n)||pn(n)||un(n)||mt(n)}function Mk(n){return n&&n.type===Tt.text||!1}function Gs(n,e){const t=[];return QB(n,e,i=>{t.push(i)}),t}function QB(n,e,t){if(!e)return;const i=Wl(e),r=Fe(e);if(st(i,r))return t(i);{if(n===void 0)return;const o=Qv(i,r);if(i.length===o.length||r.length===o.length)return t(o);const s=ui(i,r),l=is(n,s),a=sl(n,s),u=Qo(n,s,l),c=Qo(n,s,a);if(u===-1||c===-1)return;const f=Pe(n,o);if(Yt(f)){const h=Object.keys(f);for(let d=u;d<=c;d++){const p=t(o.concat(h[d]));if(p!==void 0)return p}return}if(Nt(f)){for(let h=u;h<=c;h++){const d=t(o.concat(String(h)));if(d!==void 0)return d}return}}throw new Error("Failed to create selection")}function Kv(n){return pn(n)?n.path:at(Fe(n))}function is(n,e){if(!vt(e))return e.path;const t=Qo(n,e,e.anchorPath);return Qo(n,e,e.focusPath)<t?e.focusPath:e.anchorPath}function sl(n,e){if(!vt(e))return e.path;const t=Qo(n,e,e.anchorPath);return Qo(n,e,e.focusPath)>t?e.focusPath:e.anchorPath}function XB(n,e){return Qs(Fe(n),e)&&(Fe(n).length>e.length||pn(n))}function Ak(n,e,t=!1){const i=e.selection;if(!i)return null;const r=t?Fe(i):is(n,i),o=KB(n,e,r);if(t)return pn(i)||Oi(i)?o!==null?ui(r,r):null:o!==null?ui(Wl(i),o):null;if(Oi(i)||pn(i))return tt(r,!1);if(un(i)){if(o==null||o.length===0)return null;const s=at(o),l=Pe(n,s);return Array.isArray(l)||yt(o)?tt(o,!1):hr(o,!1)}return mt(i),o!==null?tt(o,!1):null}function YB(n,e,t=!1){const i=e.selection;if(!i)return null;const r=t?Fe(i):sl(n,i),o=Qt(Pe(n,r))?jv(e,r):e,s=w1(n,e,r),l=w1(n,o,r);if(t)return pn(i)?s!==null?ui(s,s):null:Oi(i)?l!==null?ui(l,l):null:l!==null?ui(Wl(i),l):null;if(Oi(i))return l!==null?tt(l,!1):null;if(pn(i)||mt(i))return s!==null?tt(s,!1):null;if(un(i)){if(s===null||s.length===0)return null;const a=at(s),u=Pe(n,a);return Array.isArray(u)?tt(s,!1):hr(s,!1)}return vt(i)?l!==null?tt(l,!1):s!==null?tt(s,!1):null:null}function ZB(n,e,t){const i=at(t),r=[rt(t)],o=Pe(n,i),s=o?w1(o,e,r):void 0;return s?tt(i.concat(s),!1):ss(t)}function Gv(n,e,t){const i=e.selection;if(!i)return{caret:null,previous:null,next:null};const r=Jv(n,e,t),o=r.findIndex(s=>st(s.path,Fe(i))&&String(s.type)===String(i.type));return{caret:o!==-1?r[o]:null,previous:o!==-1&&o>0?r[o-1]:null,next:o!==-1&&o<r.length-1?r[o+1]:null}}function $B(n,e,t=!1,i=!0){const r=e.selection;if(!r)return null;const{caret:o,previous:s}=Gv(n,e,i);if(t)return vt(r)?null:ui(r.path,r.path);if(o&&s)return O2(s);const l=at(Fe(r)),a=Pe(n,l);return mt(r)&&Array.isArray(a)?ui(r.path,r.path):vt(r)&&!Array.isArray(a)?hr(r.focusPath,!1):null}function eL(n,e,t=!1,i=!0){const r=e.selection;if(!r)return null;const{caret:o,next:s}=Gv(n,e,i);return t?vt(r)?null:ui(r.path,r.path):o&&s?O2(s):vt(r)?tt(r.focusPath,!1):null}function da(n,e){const t=A2(n,e);let i=0;for(;i<t.length-1&&t[i+1].length>t[i].length;)i++;const r=t[i];return r===void 0||r.length===0||Array.isArray(Pe(n,at(r)))?tt(r,!1):hr(r,!1)}function au(n,e){if(e.length===1){const i=Go(e);if(i.op==="replace"){const r=ho(n,i.path);return tt(r,!1)}}if(!yt(e)&&e.every(i=>i.op==="move")){const i=Go(e),r=e.slice(1);if((r1(i)||tu(i))&&i.from!==i.path&&r.every(o=>(r1(o)||tu(o))&&o.from===o.path)){const o=ho(n,i.path);return hr(o,!1)}}const t=e.filter(i=>i.op!=="test"&&i.op!=="remove"&&(i.op!=="move"||i.from!==i.path)&&typeof i.path=="string").map(i=>ho(n,i.path));return yt(t)?null:{type:Tt.multi,anchorPath:Go(t),focusPath:rt(t)}}function Qv(n,e){let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function Cd(n){return un(n)||mt(n)||Vp(n)}function Ek(n,e){return Cd(e)&&Qt(Pe(n,Fe(e)))?Fe(e):at(Fe(e))}function Qs(n,e){if(n.length<e.length)return!1;for(let t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0}function ri(n){const e=n.selection;return(un(e)||mt(e))&&e.edit?{...n,selection:{...e,edit:!1}}:n}function hr(n,e){return{type:Tt.key,path:n,edit:e}}function tt(n,e){return{type:Tt.value,path:n,edit:e}}function rs(n){return{type:Tt.inside,path:n}}function ss(n){return{type:Tt.after,path:n}}function ui(n,e){const t=Qv(n,e),i=n.length>t.length&&e.length>t.length;return{type:Tt.multi,anchorPath:i?t.concat(n[t.length]):t,focusPath:i?t.concat(e[t.length]):t}}function Xv(n,e,t,i){if(un(e))return String(rt(e.path));if(mt(e)){const r=Pe(n,e.path);return typeof r=="string"?r:i.stringify(r,null,t)??null}if(vt(e)){if(yt(e.focusPath))return i.stringify(n,null,t)??null;const r=Kv(e),o=Pe(n,r);if(Array.isArray(o))if(Vp(e)){const s=Pe(n,e.focusPath);return i.stringify(s,null,t)??null}else return Gs(n,e).map(s=>{const l=Pe(n,s);return`${i.stringify(l,null,t)},`}).join(`
`);else return Gs(n,e).map(s=>{const l=rt(s),a=Pe(n,s);return`${i.stringify(l)}: ${i.stringify(a,null,t)},`}).join(`
`)}return null}function hi(n){return(un(n)||mt(n))&&n.edit===!0}function tL(n,e,t=!0){return!e&&!t?n:{...n,selection:e}}function nL(){return tt([],!1)}function Ru(n){return un(n)||mt(n)||vt(n)}function Qh(n){return un(n)||mt(n)||Vp(n)}function O2(n){switch(n.type){case Pr.key:return hr(n.path,!1);case Pr.value:return tt(n.path,!1);case Pr.after:return ss(n.path);case Pr.inside:return rs(n.path)}}function Ok(n,e,t){switch(e){case Tt.key:return hr(t,!1);case Tt.value:return tt(t,!1);case Tt.after:return ss(t);case Tt.inside:return rs(t);case Tt.multi:case Tt.text:return ui(t,t)}}function Tk(n,e,t){if(!e)return null;if(Fc(n,e,t))return e;const i=vt(e)?at(e.focusPath):e.path;return Qs(i,t)?e:null}function Fc(n,e,t){if(n===void 0||!e)return!1;if(un(e)||pn(e)||Oi(e))return st(e.path,t);if(mt(e))return Qs(t,e.path);if(vt(e)){const i=is(n,e),r=sl(n,e),o=at(e.focusPath);if(!Qs(t,o)||t.length<=o.length)return!1;const s=Qo(n,e,i),l=Qo(n,e,r),a=Qo(n,e,t);return a!==-1&&a>=s&&a<=l}return!1}function Qo(n,e,t){const i=at(e.focusPath);if(!Qs(t,i)||t.length<=i.length)return-1;const r=t[i.length],o=Pe(n,i);if(Yt(o))return Object.keys(o).indexOf(r);if(Nt(o)){const s=ei(r);if(s<o.length)return s}return-1}function Fe(n){return vt(n)?n.focusPath:n.path}function Wl(n){return vt(n)?n.anchorPath:n.path}function ko(...n){const e=[];for(const t of n)if(typeof t=="string"&&e.push(t),t&&typeof t=="object")for(const i in t)Object.hasOwnProperty.call(t,i)&&t[i]&&e.push(i);return e.join(" ")}function C1(n,e){const t=h2(n,e);return ko("jse-value","jse-"+t,{"jse-url":xp(n),"jse-empty":typeof n=="string"&&n.length===0})}function iL(n){let e,t,i,r;return{c(){e=D("div"),k(e,"role","textbox"),k(e,"tabindex","0"),k(e,"class",t=Zt(ko("jse-editable-div",n[2],{"jse-short-text":n[0]}))+" svelte-2dn3wv"),k(e,"contenteditable","true"),k(e,"spellcheck","false")},m(o,s){j(o,e,s),n[13](e),i||(r=[ue(e,"input",n[3]),ue(e,"keydown",n[4]),ue(e,"paste",n[5]),ue(e,"blur",n[6])],i=!0)},p(o,[s]){s&5&&t!==(t=Zt(ko("jse-editable-div",o[2],{"jse-short-text":o[0]}))+" svelte-2dn3wv")&&k(e,"class",t)},i:he,o:he,d(o){o&&z(e),n[13](null),i=!1,fn(r)}}}function rL(n,e,t){const i=Wn("jsoneditor:EditableDiv");let{value:r}=e,{shortText:o=!1}=e,{onChange:s}=e,{onCancel:l}=e,{onFind:a}=e,{onPaste:u=$t}=e,{onValueClass:c=()=>""}=e,f,h,d=!1;br(()=>{i("onMount",{value:r}),m(r),f&&(Pv(f),t(1,f.refresh=g,f),t(1,f.cancel=b,f))}),Ki(()=>{const S=p();i("onDestroy",{closed:d,value:r,newValue:S}),!d&&S!==r&&s(S,Fs.no)});function p(){return f?UI(f.innerText):""}function m(S){f&&t(1,f.innerText=ql(S),f)}function g(){const S=p();S===""&&m(""),t(2,h=c(S))}function b(){d=!0,l()}function y(S){S.stopPropagation();const E=ol(S);if(E==="Escape"&&b(),E==="Enter"||E==="Tab"){d=!0;const I=p();s(I,Fs.nextInside)}E==="Ctrl+F"&&(S.preventDefault(),a(!1)),E==="Ctrl+H"&&(S.preventDefault(),a(!0))}function _(S){if(S.stopPropagation(),!u||!S.clipboardData)return;const E=S.clipboardData.getData("text/plain");u(E)}function M(){const S=document.hasFocus(),E=p();i("handleBlur",{hasFocus:S,closed:d,value:r,newValue:E}),document.hasFocus()&&!d&&(d=!0,E!==r&&s(E,Fs.self))}function w(S){ft[S?"unshift":"push"](()=>{f=S,t(1,f)})}return n.$$set=S=>{"value"in S&&t(7,r=S.value),"shortText"in S&&t(0,o=S.shortText),"onChange"in S&&t(8,s=S.onChange),"onCancel"in S&&t(9,l=S.onCancel),"onFind"in S&&t(10,a=S.onFind),"onPaste"in S&&t(11,u=S.onPaste),"onValueClass"in S&&t(12,c=S.onValueClass)},n.$$.update=()=>{n.$$.dirty&4224&&t(2,h=c(r))},[o,f,h,g,y,_,M,r,s,l,a,u,c,w]}class oL extends je{constructor(e){super(),ze(this,e,rL,iL,Ze,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}const Yv=oL;function sL(n){let e,t;return e=new Yv({props:{value:n[1].escapeValue(n[0]),onChange:n[3],onCancel:n[4],onPaste:n[5],onFind:n[2],onValueClass:n[6]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,[r]){const o={};r&3&&(o.value=i[1].escapeValue(i[0])),r&4&&(o.onFind=i[2]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function lL(n,e,t){let{path:i}=e,{value:r}=e,{parser:o}=e,{normalization:s}=e,{enforceString:l}=e,{onPatch:a}=e,{onPasteJson:u}=e,{onSelect:c}=e,{onFind:f}=e,{focus:h}=e,{findNextInside:d}=e;function p(_){return l?_:Eu(_,o)}function m(_,M){a([{op:"replace",path:xe(i),value:p(s.unescapeValue(_))}],(w,S)=>{if(S.selection&&!st(i,Fe(S.selection)))return;const E=M===Fs.nextInside?d(i):tt(i,!1);return{state:{...S,selection:E}}}),h()}function g(){c(tt(i,!1)),h()}function b(_){try{const M=o.parse(_);Qt(M)&&u({path:i,contents:M})}catch{}}function y(_){return C1(p(s.unescapeValue(_)),o)}return n.$$set=_=>{"path"in _&&t(7,i=_.path),"value"in _&&t(0,r=_.value),"parser"in _&&t(8,o=_.parser),"normalization"in _&&t(1,s=_.normalization),"enforceString"in _&&t(9,l=_.enforceString),"onPatch"in _&&t(10,a=_.onPatch),"onPasteJson"in _&&t(11,u=_.onPasteJson),"onSelect"in _&&t(12,c=_.onSelect),"onFind"in _&&t(2,f=_.onFind),"focus"in _&&t(13,h=_.focus),"findNextInside"in _&&t(14,d=_.findNextInside)},[r,s,f,m,g,b,y,i,o,l,a,u,c,h,d]}class aL extends je{constructor(e){super(),ze(this,e,lL,sL,Ze,{path:7,value:0,parser:8,normalization:1,enforceString:9,onPatch:10,onPasteJson:11,onSelect:12,onFind:2,focus:13,findNextInside:14})}}const uL=aL;function Ta(n,e,t){const i=at(e),r=Pe(n,i);if(Nt(r)){const o=ei(rt(e));return t.map((s,l)=>({op:"add",path:xe(i.concat(String(o+l))),value:s.value}))}else if(Yt(r)){const o=rt(e),s=Object.keys(r),l=o!==void 0?xf(s,o,!0):[];return[...t.map(a=>{const u=vf(a.key,s);return{op:"add",path:xe(i.concat(u)),value:a.value}}),...l.map(a=>Ul(i,a))]}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}function _1(n,e,t){const i=Pe(n,e);if(Array.isArray(i)){const r=i.length;return t.map((o,s)=>({op:"add",path:xe(e.concat(String(r+s))),value:o.value}))}else return t.map(r=>{const o=vf(r.key,Object.keys(i));return{op:"add",path:xe(e.concat(o)),value:r.value}})}function Mf(n,e,t,i){const r=e.filter(l=>l!==t),o=vf(i,r),s=xf(e,t,!1);return[{op:"move",from:xe(n.concat(t)),path:xe(n.concat(o))},...s.map(l=>Ul(n,l))]}function cL(n,e,t){const i=Go(e),r=at(i),o=Pe(n,r);if(Nt(o)){const s=Go(e),l=s?ei(rt(s)):0;return[..._d(e),...t.map((a,u)=>({op:"add",path:xe(r.concat(String(u+l))),value:a.value}))]}else if(Yt(o)){const s=rt(e),l=at(s),a=rt(s),u=Object.keys(o),c=a!==void 0?xf(u,a,!1):[],f=new Set(e.map(d=>rt(d))),h=u.filter(d=>!f.has(d));return[..._d(e),...t.map(d=>{const p=vf(d.key,h);return{op:"add",path:xe(l.concat(p)),value:d.value}}),...c.map(d=>Ul(l,d))]}else throw new Error("Cannot create replace operations: parent must be an Object or Array")}function Zv(n,e){const t=rt(e);if(yt(t))throw new Error("Cannot duplicate root object");const i=at(t),r=rt(t),o=Pe(n,i);if(Nt(o)){const s=rt(e),l=s?ei(rt(s))+1:0;return[...e.map((a,u)=>({op:"copy",from:xe(a),path:xe(i.concat(String(u+l)))}))]}else if(Yt(o)){const s=Object.keys(o),l=r!==void 0?xf(s,r,!1):[];return[...e.map(a=>{const u=rt(a),c=vf(u,s);return{op:"copy",from:xe(a),path:xe(i.concat(c))}}),...l.map(a=>Ul(i,a))]}else throw new Error("Cannot create duplicate operations: parent must be an Object or Array")}function fL(n,e){if(mt(e))return[{op:"move",from:xe(e.path),path:""}];if(vt(e)){const t=at(e.focusPath),i=Pe(n,t);if(Nt(i))return[{op:"replace",path:"",value:Gs(n,e).map(o=>{const s=ei(rt(o));return i[s]})}];if(Yt(i)){const r={};return Gs(n,e).forEach(o=>{const s=String(rt(o));r[s]=i[s]}),[{op:"replace",path:"",value:r}]}}else throw new Error("Cannot create extract operations: parent must be an Object or Array");throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(e))}function $v(n,e,t,i){if(un(e)){const r=Sv(t,i),o=at(e.path),s=Pe(n,o),l=Object.keys(s),a=rt(e.path);return Mf(o,l,a,typeof r=="string"?r:t)}if(mt(e)||vt(e)&&yt(e.focusPath))try{return[{op:"replace",path:xe(Fe(e)),value:jp(t,r=>_f(r,i))}]}catch{return[{op:"replace",path:xe(Fe(e)),value:t}]}if(vt(e)){const r=J0(t,i);return cL(n,Gs(n,e),r)}if(Oi(e)){const r=J0(t,i),o=e.path,s=at(o),l=Pe(n,s);if(Nt(l)){const a=ei(rt(o)),u=s.concat(String(a+1));return Ta(n,u,r)}else if(Yt(l)){const a=String(rt(o)),u=Object.keys(l);if(yt(u)||rt(u)===a)return _1(n,s,r);{const c=u.indexOf(a),f=u[c+1],h=s.concat(f);return Ta(n,h,r)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}if(pn(e)){const r=J0(t,i),o=e.path,s=Pe(n,o);if(Nt(s)){const l=o.concat("0");return Ta(n,l,r)}else if(Yt(s)){const l=Object.keys(s);if(yt(l))return _1(n,o,r);{const a=Go(l),u=o.concat(a);return Ta(n,u,r)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(e))}function hL(n,e,t){if(!e)return[];const i="beforePath"in t?t.beforePath:void 0,r="append"in t?t.append:void 0,o=at(Fe(e)),s=Pe(n,o);if(!r&&!(i&&Qs(i,o)&&i.length>o.length))return[];const l=is(n,e),a=sl(n,e),u=rt(l),c=rt(a),f=i?i[o.length]:void 0;if(Yt(s)){const h=Object.keys(s),d=h.indexOf(u),p=h.indexOf(c),m=r?h.length:f!==void 0?h.indexOf(f):-1;if(d!==-1&&p!==-1&&m!==-1)return m>d?[...h.slice(d,p+1),...h.slice(m,h.length)].map(g=>Ul(o,g)):[...h.slice(m,d),...h.slice(p+1,h.length)].map(g=>Ul(o,g))}else if(Nt(s)){const h=ei(u),d=ei(c),p=f!==void 0?ei(f):s.length,m=d-h+1;return p<h?uk(m,g=>({op:"move",from:xe(o.concat(String(h+g))),path:xe(o.concat(String(p+g)))})):uk(m,()=>({op:"move",from:xe(o.concat(String(h))),path:xe(o.concat(String(p)))}))}else throw new Error("Cannot create move operations: parent must be an Object or Array");return[]}function dL(n,e,t){if(t==="object")return{};if(t==="array")return[];if(t==="structure"&&n!==void 0){const i=e?Kv(e):[],r=Pe(n,i);if(Array.isArray(r)&&!yt(r)){const o=Go(r);return Qt(o)?WR(o,s=>Array.isArray(s)?[]:Rt(s)?void 0:""):""}}return""}function _d(n){return n.map(e=>({op:"remove",path:xe(e)})).reverse()}function Ul(n,e){return{op:"move",from:xe(n.concat(e)),path:xe(n.concat(e))}}function J0(n,e){const t=/^\s*{/.test(n),i=/^\s*\[/.test(n),r=Sv(n,e),o=r!==void 0?r:jp(n,s=>_f(s,e));return t&&Rt(o)||i&&Array.isArray(o)?[{key:"New item",value:o}]:Array.isArray(o)?o.map((s,l)=>({key:"New item "+l,value:s})):Rt(o)?Object.keys(o).map(s=>({key:s,value:o[s]})):[{key:"New item",value:o}]}function e8(n,e){if(un(e)){const t=at(e.path),i=Pe(n,t),r=Object.keys(i),o=rt(e.path),l=Mf(t,r,o,""),a=au(n,l);return{operations:l,newSelection:a}}if(mt(e))return{operations:[{op:"replace",path:xe(e.path),value:""}],newSelection:e};if(vt(e)){const t=Gs(n,e),i=_d(t),r=rt(t);if(yt(r)){const l=[{op:"replace",path:"",value:""}],a=tt([],!1);return{operations:l,newSelection:a}}const o=at(r),s=Pe(n,o);if(Nt(s)){const l=Go(t),a=ei(rt(l)),u=a===0?rs(o):ss(o.concat(String(a-1)));return{operations:i,newSelection:u}}else if(Yt(s)){const l=Object.keys(s),a=Go(t),u=rt(a),c=l.indexOf(u),f=l[c-1],h=c===0?rs(o):ss(o.concat(f));return{operations:i,newSelection:h}}else throw new Error("Cannot create remove operations: parent must be an Object or Array")}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(e))}function t8(n,e){return PS(n,e,{before:(t,i,r)=>{if(AS(i)){const o=Fr(i.path);return{revertOperations:[...r,...Dk(t,o)]}}if(tu(i)){const o=Fr(i.from);return{revertOperations:[...r,...Dk(t,o)]}}return{document:t}}})}function Dk(n,e){const t=at(e),i=rt(e),r=Pe(n,t);if(Yt(r)){const o=Object.keys(r);return xf(o,i,!1).map(l=>Ul(t,l))}return[]}function pL(n,e){return n.flatMap(t=>{if(o2(t)){const i=Fr(t.path);if(i.length>0){const r=[t];let o=at(i);for(;o.length>0&&!fr(e,o);)r.unshift({op:"add",path:xe(o),value:{}}),o=at(o);return r}}return t})}function mL(n,e,t){const i=t!=null&&t.activeItem?Nk(t.activeItem):void 0,r=e.findIndex(a=>st(i,Nk(a))),o=r!==-1?r:(t==null?void 0:t.activeIndex)!==void 0&&(t==null?void 0:t.activeIndex)<e.length?t==null?void 0:t.activeIndex:e.length>0?0:-1,s=e.map((a,u)=>({...a,active:u===o})),l=s[o];return{items:s,itemsMap:Fp(s,a=>xe(a.path)),activeItem:l,activeIndex:o}}function gL(n){const e=n.activeIndex<n.items.length-1?n.activeIndex+1:n.items.length>0?0:-1,t=n.items[e],i=n.items.map((r,o)=>({...r,active:o===e}));return{...n,items:i,itemsMap:Fp(i,r=>xe(r.path)),activeItem:t,activeIndex:e}}function bL(n){const e=n.activeIndex>0?n.activeIndex-1:n.items.length-1,t=n.items[e],i=n.items.map((r,o)=>({...r,active:o===e}));return{...n,items:i,itemsMap:Fp(i,r=>xe(r.path)),activeItem:t,activeIndex:e}}function n8(n,e,t=1/0){const i=[],r=[];function o(l){i.length<t&&i.push(l)}function s(l,a){if(Nt(a)){const u=r.length;r.push("0");for(let c=0;c<a.length;c++)if(r[u]=String(c),s(l,a[c]),i.length>=t)return;r.pop()}else if(Yt(a)){const u=Object.keys(a),c=r.length;r.push("");for(const f of u)if(r[c]=f,Pk(f,l,r,Ir.key,o),s(l,a[f]),i.length>=t)return;r.pop()}else Pk(String(a),l,r,Ir.value,o)}if(typeof n=="string"&&n!==""){const l=n.toLowerCase();s(l,e)}return i}function Pk(n,e,t,i,r){const o=n.toLowerCase();let s=0,l=-1,a=-1;do a=o.indexOf(e,l),a!==-1&&(l=a+e.length,r({path:t.slice(0),field:i,fieldIndex:s,start:a,end:l}),s++);while(a!==-1)}function S1(n,e,t,i){return n.substring(0,t)+e+n.substring(i)}function Rk(n,e,t){let i=n;return XN(t,r=>{i=S1(i,e,r.start,r.end)}),i}function yL(n,e,t,i,r){const{field:o,path:s,start:l,end:a}=i;if(o===Ir.key){const u=at(s),c=Pe(n,u),f=rt(s),h=Object.keys(c),d=S1(f,t,l,a),p=Mf(u,h,f,d);return{newSelection:au(n,p),operations:p}}else if(o===Ir.value){const u=Pe(n,s);if(u===void 0)throw new Error(`Cannot replace: path not found ${xe(s)}`);const c=typeof u=="string"?u:String(u),f=xe(s),h=ns(u,e.enforceStringMap,f,r),d=S1(c,t,l,a),p=[{op:"replace",path:xe(s),value:h?d:Eu(d,r)}];return{newSelection:au(n,p),operations:p}}else throw new Error(`Cannot replace: unknown type of search result field ${o}`)}function kL(n,e,t,i,r){const o=n8(t,n,1/0),s=[];for(let u=0;u<o.length;u++){const c=o[u-1],f=o[u];u===0||f.field!==c.field||!st(f.path,c.path)?s.push({path:f.path,field:f.field,items:[f]}):rt(s).items.push(f)}s.sort((u,c)=>u.field!==c.field?u.field===Ir.key?1:-1:c.path.length-u.path.length);let l=[],a=null;return s.forEach(u=>{const{field:c,path:f,items:h}=u;if(c===Ir.key){const d=at(f),p=Pe(n,d),m=rt(f),g=Object.keys(p),b=Rk(m,i,h),y=Mf(d,g,m,b);l=l.concat(y),a=au(n,y)}else if(c===Ir.value){const d=Pe(n,f);if(d===void 0)throw new Error(`Cannot replace: path not found ${xe(f)}`);const p=typeof d=="string"?d:String(d),m=xe(f),g=ns(d,e.enforceStringMap,m,r),b=Rk(p,i,h),y=[{op:"replace",path:xe(f),value:g?b:Eu(b,r)}];l=l.concat(y),a=au(n,y)}else throw new Error(`Cannot replace: unknown type of search result field ${c}`)}),{operations:l,newSelection:a}}function wL(n,e){const t=[];let i=0;for(const o of e){const s=n.slice(i,o.start);s!==""&&t.push({type:"normal",text:s,active:!1});const l=n.slice(o.start,o.end);t.push({type:"highlight",text:l,active:o.active}),i=o.end}const r=rt(e);return r&&r.end<n.length&&t.push({type:"normal",text:n.slice(r.end),active:!1}),t}function Nk(n){return n.path.concat(n.field,String(n.fieldIndex))}function CL(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(r=>r.field===Ir.key);if(!(!t||t.length===0))return t}function Ik(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(r=>r.field===Ir.value);if(!(!t||t.length===0))return t}function Bk(n,e,t){const i=n.slice();return i[3]=e[t],i}function _L(n){let e,t=ql(n[3].text)+"",i;return{c(){e=D("span"),i=we(t),k(e,"class","jse-highlight svelte-1c35ovg"),le(e,"jse-active",n[3].active)},m(r,o){j(r,e,o),x(e,i)},p(r,o){o&1&&t!==(t=ql(r[3].text)+"")&&We(i,t),o&1&&le(e,"jse-active",r[3].active)},d(r){r&&z(e)}}}function SL(n){let e=n[3].text+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r&1&&e!==(e=i[3].text+"")&&We(t,e)},d(i){i&&z(t)}}}function Lk(n){let e;function t(o,s){return o[3].type==="normal"?SL:_L}let i=t(n),r=i(n);return{c(){r.c(),e=ut()},m(o,s){r.m(o,s),j(o,e,s)},p(o,s){i===(i=t(o))&&r?r.p(o,s):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){r.d(o),o&&z(e)}}}function vL(n){let e,t=n[0],i=[];for(let r=0;r<t.length;r+=1)i[r]=Lk(Bk(n,t,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=ut()},m(r,o){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(r,o);j(r,e,o)},p(r,[o]){if(o&1){t=r[0];let s;for(s=0;s<t.length;s+=1){const l=Bk(r,t,s);i[s]?i[s].p(l,o):(i[s]=Lk(l),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=t.length}},i:he,o:he,d(r){mn(i,r),r&&z(e)}}}function xL(n,e,t){let i,{text:r}=e,{searchResultItems:o}=e;return n.$$set=s=>{"text"in s&&t(1,r=s.text),"searchResultItems"in s&&t(2,o=s.searchResultItems)},n.$$.update=()=>{n.$$.dirty&6&&t(0,i=wL(String(r),o))},[i,r,o]}class ML extends je{constructor(e){super(),ze(this,e,xL,vL,xn,{text:1,searchResultItems:2})}}const i8=ML;function AL(n){let e=ql(n[1].escapeValue(n[0]))+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r&3&&e!==(e=ql(i[1].escapeValue(i[0]))+"")&&We(t,e)},i:he,o:he,d(i){i&&z(t)}}}function EL(n){let e,t;return e=new i8({props:{text:n[1].escapeValue(n[0]),searchResultItems:n[3]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&3&&(o.text=i[1].escapeValue(i[0])),r&8&&(o.searchResultItems=i[3]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function OL(n){let e,t,i,r,o,s,l,a;const u=[EL,AL],c=[];function f(h,d){return h[3]?0:1}return t=f(n),i=c[t]=u[t](n),{c(){e=D("div"),i.c(),k(e,"role","button"),k(e,"tabindex","-1"),k(e,"data-type","selectable-value"),k(e,"class",r=Zt(C1(n[0],n[2]))+" svelte-1ypq969"),k(e,"title",o=n[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(h,d){j(h,e,d),c[t].m(e,null),s=!0,l||(a=[ue(e,"click",n[5]),ue(e,"dblclick",n[6])],l=!0)},p(h,[d]){let p=t;t=f(h),t===p?c[t].p(h,d):(ce(),v(c[p],1,1,()=>{c[p]=null}),fe(),i=c[t],i?i.p(h,d):(i=c[t]=u[t](h),i.c()),C(i,1),i.m(e,null)),(!s||d&5&&r!==(r=Zt(C1(h[0],h[2]))+" svelte-1ypq969"))&&k(e,"class",r),(!s||d&16&&o!==(o=h[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&k(e,"title",o)},i(h){s||(C(i),s=!0)},o(h){v(i),s=!1},d(h){h&&z(e),c[t].d(),l=!1,fn(a)}}}function TL(n,e,t){let i,{path:r}=e,{value:o}=e,{readOnly:s}=e,{normalization:l}=e,{parser:a}=e,{onSelect:u}=e,{searchResultItems:c}=e;function f(d){typeof o=="string"&&i&&d.ctrlKey&&(d.preventDefault(),d.stopPropagation(),window.open(o,"_blank"))}function h(d){s||(d.preventDefault(),u(tt(r,!0)))}return n.$$set=d=>{"path"in d&&t(7,r=d.path),"value"in d&&t(0,o=d.value),"readOnly"in d&&t(8,s=d.readOnly),"normalization"in d&&t(1,l=d.normalization),"parser"in d&&t(2,a=d.parser),"onSelect"in d&&t(9,u=d.onSelect),"searchResultItems"in d&&t(3,c=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=xp(o))},[o,l,a,c,i,f,h,r,s,u]}class DL extends je{constructor(e){super(),ze(this,e,TL,OL,Ze,{path:7,value:0,readOnly:8,normalization:1,parser:2,onSelect:9,searchResultItems:3})}}const PL=DL;function RL(n){let e,t;return{c(){e=D("div"),t=we(n[0]),k(e,"class","jse-tooltip svelte-1sftg37")},m(i,r){j(i,e,r),x(e,t)},p(i,[r]){r&1&&We(t,i[0])},i:he,o:he,d(i){i&&z(e)}}}function NL(n,e,t){let{text:i}=e;return n.$$set=r=>{"text"in r&&t(0,i=r.text)},[i]}class IL extends je{constructor(e){super(),ze(this,e,NL,RL,xn,{text:0})}}const BL=IL;function T2(n,{text:e,openAbsolutePopup:t,closeAbsolutePopup:i}){let r;function o(){r=t(BL,{text:e},{position:"top",width:10*e.length,offsetTop:3,anchor:n,closeOnOuterClick:!0})}function s(){i(r)}return n.addEventListener("mouseenter",o),n.addEventListener("mouseleave",s),{destroy(){n.removeEventListener("mouseenter",o),n.removeEventListener("mouseleave",s)}}}function LL(n){let e,t,i,r,o,s;return t=new ht({props:{data:gB}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-timestamp svelte-1sqrs1u")},m(l,a){j(l,e,a),ee(t,e,null),r=!0,o||(s=vn(i=T2.call(null,e,{text:n[0],...n[1]})),o=!0)},p(l,[a]){i&&Ei(i.update)&&a&1&&i.update.call(null,{text:l[0],...l[1]})},i(l){r||(C(t.$$.fragment,l),r=!0)},o(l){v(t.$$.fragment,l),r=!1},d(l){l&&z(e),te(t),o=!1,s()}}}function FL(n,e,t){let i;const r=Vn("absolute-popup");let{value:o}=e;return n.$$set=s=>{"value"in s&&t(2,o=s.value)},n.$$.update=()=>{n.$$.dirty&4&&t(0,i=`Time: ${new Date(o).toString()}`)},[i,r,o]}class jL extends je{constructor(e){super(),ze(this,e,FL,LL,Ze,{value:2})}}const zL=jL;function VL({path:n,value:e,readOnly:t,enforceString:i,searchResultItems:r,isEditing:o,parser:s,normalization:l,onPatch:a,onPasteJson:u,onSelect:c,onFind:f,findNextInside:h,focus:d}){const p=[];return!o&&a7(e)&&p.push({component:DB,props:{path:n,value:e,readOnly:t,onPatch:a,focus:d}}),!o&&u7(e)&&p.push({component:jB,props:{path:n,value:e,readOnly:t,onPatch:a,focus:d}}),o&&p.push({component:uL,props:{path:n,value:e,enforceString:i,parser:s,normalization:l,onPatch:a,onPasteJson:u,onSelect:c,onFind:f,findNextInside:h,focus:d}}),o||p.push({component:PL,props:{path:n,value:e,readOnly:t,parser:s,normalization:l,searchResultItems:r,onSelect:c}}),!o&&a1(e)&&p.push({component:zL,props:{value:e}}),p}const v1={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"]},Os={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},r8={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M160 0c-23.7 0-44.4 12.9-55.4 32L48 32C21.5 32 0 53.5 0 80L0 400c0 26.5 21.5 48 48 48l144 0 0-272c0-44.2 35.8-80 80-80l48 0 0-16c0-26.5-21.5-48-48-48l-56.6 0C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48l0 272 0 16c0 26.5 21.5 48 48 48l192 0c26.5 0 48-21.5 48-48l0-220.1c0-12.7-5.1-24.9-14.1-33.9l-67.9-67.9c-9-9-21.2-14.1-33.9-14.1L320 128l-48 0zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},HL={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]},qL={prefix:"fas",iconName:"scissors",icon:[512,512,[9984,9986,9988,"cut"],"f0c4","M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM64 112a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm48 240a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},za=qL,WL={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]},UL=WL,JL={prefix:"fas",iconName:"caret-left",icon:[256,512,[],"f0d9","M9.4 278.6c-12.5-12.5-12.5-32.8 0-45.3l128-128c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 256c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-128-128z"]},KL={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},Fk=KL,GL={prefix:"fas",iconName:"chevron-up",icon:[512,512,[],"f077","M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},o8={prefix:"fas",iconName:"angle-right",icon:[320,512,[8250],"f105","M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]},QL={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4l-208 0c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]},XL=QL,jk={prefix:"fas",iconName:"caret-up",icon:[320,512,[],"f0d8","M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8l256 0c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]},Hp={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},Xs={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]},qp={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7L336 192c-8.8 0-16-7.2-16-16l0-57.4c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},YL={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},Va={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},ZL={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},D2=ZL,$L={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]},P2=$L,eF={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32l0 32L32 64C14.3 64 0 78.3 0 96s14.3 32 32 32l32 0 0 256c0 35.3 28.7 64 64 64l224 0 0-64-224 0 0-352zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-32 0 0-256c0-35.3-28.7-64-64-64L160 64l0 64 224 0 0 352z"]},tF=eF,nF={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},iF=nF,lr={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]},rF={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"]},s8=rF,ih={prefix:"fas",iconName:"arrow-right-arrow-left",icon:[448,512,[8644,"exchange"],"f0ec","M438.6 150.6c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 96 32 96C14.3 96 0 110.3 0 128s14.3 32 32 32l306.7 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96zm-333.3 352c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 416 416 416c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96z"]},oF={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7 96 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 301.7 32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32l32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-160 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Wp=oF,sF={prefix:"fas",iconName:"angle-down",icon:[448,512,[8964],"f107","M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},lF={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},aF={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},R2=aF,uF={prefix:"fas",iconName:"chevron-down",icon:[512,512,[],"f078","M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},js={prefix:"fas",iconName:"copy",icon:[448,512,[],"f0c5","M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z"]},Da={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},l8={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},zk=l8,uu=l8,cF={prefix:"fas",iconName:"rotate",icon:[512,512,[128260,"sync-alt"],"f2f1","M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"]},a8={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M288 448L64 448l0-224 64 0 0-64-64 0c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l224 0c35.3 0 64-28.7 64-64l0-64-64 0 0 64zm-64-96l224 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64L224 0c-35.3 0-64 28.7-64 64l0 224c0 35.3 28.7 64 64 64z"]},jc={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},fF={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},oa=fF,Qu={},rh={showWizard:!0,showOriginal:!0},Sd=Math.min,Dl=Math.max,vd=Math.round,oh=Math.floor,Ys=n=>({x:n,y:n}),hF={left:"right",right:"left",bottom:"top",top:"bottom"},dF={start:"end",end:"start"};function Vk(n,e,t){return Dl(n,Sd(e,t))}function Up(n,e){return typeof n=="function"?n(e):n}function Jl(n){return n.split("-")[0]}function Jp(n){return n.split("-")[1]}function u8(n){return n==="x"?"y":"x"}function c8(n){return n==="y"?"height":"width"}function cu(n){return["top","bottom"].includes(Jl(n))?"y":"x"}function f8(n){return u8(cu(n))}function pF(n,e,t){t===void 0&&(t=!1);const i=Jp(n),r=f8(n),o=c8(r);let s=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=xd(s)),[s,xd(s)]}function mF(n){const e=xd(n);return[x1(n),e,x1(e)]}function x1(n){return n.replace(/start|end/g,e=>dF[e])}function gF(n,e,t){const i=["left","right"],r=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:i:e?i:r;case"left":case"right":return e?o:s;default:return[]}}function bF(n,e,t,i){const r=Jp(n);let o=gF(Jl(n),t==="start",i);return r&&(o=o.map(s=>s+"-"+r),e&&(o=o.concat(o.map(x1)))),o}function xd(n){return n.replace(/left|right|bottom|top/g,e=>hF[e])}function yF(n){return{top:0,right:0,bottom:0,left:0,...n}}function kF(n){return typeof n!="number"?yF(n):{top:n,right:n,bottom:n,left:n}}function Md(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}function Hk(n,e,t){let{reference:i,floating:r}=n;const o=cu(e),s=f8(e),l=c8(s),a=Jl(e),u=o==="y",c=i.x+i.width/2-r.width/2,f=i.y+i.height/2-r.height/2,h=i[l]/2-r[l]/2;let d;switch(a){case"top":d={x:c,y:i.y-r.height};break;case"bottom":d={x:c,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:f};break;case"left":d={x:i.x-r.width,y:f};break;default:d={x:i.x,y:i.y}}switch(Jp(e)){case"start":d[s]-=h*(t&&u?-1:1);break;case"end":d[s]+=h*(t&&u?-1:1);break}return d}const wF=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:o=[],platform:s}=t,l=o.filter(Boolean),a=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:n,floating:e,strategy:r}),{x:c,y:f}=Hk(u,i,a),h=i,d={},p=0;for(let m=0;m<l.length;m++){const{name:g,fn:b}=l[m],{x:y,y:_,data:M,reset:w}=await b({x:c,y:f,initialPlacement:i,placement:h,strategy:r,middlewareData:d,rects:u,platform:s,elements:{reference:n,floating:e}});c=y??c,f=_??f,d={...d,[g]:{...d[g],...M}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(u=w.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:r}):w.rects),{x:c,y:f}=Hk(u,h,a)),m=-1)}return{x:c,y:f,placement:h,strategy:r,middlewareData:d}};async function h8(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:o,rects:s,elements:l,strategy:a}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=Up(e,n),p=kF(d),g=l[h?f==="floating"?"reference":"floating":f],b=Md(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(g)))==null||t?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:c,strategy:a})),y=f==="floating"?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),M=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},w=Md(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:_,strategy:a}):y);return{top:(b.top-w.top+p.top)/M.y,bottom:(w.bottom-b.bottom+p.bottom)/M.y,left:(b.left-w.left+p.left)/M.x,right:(w.right-b.right+p.right)/M.x}}const CF=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:o,rects:s,initialPlacement:l,platform:a,elements:u}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Up(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const b=Jl(r),y=cu(l),_=Jl(l)===l,M=await(a.isRTL==null?void 0:a.isRTL(u.floating)),w=h||(_||!m?[xd(l)]:mF(l)),S=p!=="none";!h&&S&&w.push(...bF(l,m,p,M));const E=[l,...w],I=await h8(e,g),O=[];let P=((i=o.flip)==null?void 0:i.overflows)||[];if(c&&O.push(I[b]),f){const q=pF(r,s,M);O.push(I[q[0]],I[q[1]])}if(P=[...P,{placement:r,overflows:O}],!O.every(q=>q<=0)){var A,H;const q=(((A=o.flip)==null?void 0:A.index)||0)+1,L=E[q];if(L)return{data:{index:q,overflows:P},reset:{placement:L}};let X=(H=P.filter(Y=>Y.overflows[0]<=0).sort((Y,G)=>Y.overflows[1]-G.overflows[1])[0])==null?void 0:H.placement;if(!X)switch(d){case"bestFit":{var W;const Y=(W=P.filter(G=>{if(S){const T=cu(G.placement);return T===y||T==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(T=>T>0).reduce((T,B)=>T+B,0)]).sort((G,T)=>G[1]-T[1])[0])==null?void 0:W[0];Y&&(X=Y);break}case"initialPlacement":X=l;break}if(r!==X)return{reset:{placement:X}}}return{}}}};async function _F(n,e){const{placement:t,platform:i,elements:r}=n,o=await(i.isRTL==null?void 0:i.isRTL(r.floating)),s=Jl(t),l=Jp(t),a=cu(t)==="y",u=["left","top"].includes(s)?-1:1,c=o&&a?-1:1,f=Up(e,n);let{mainAxis:h,crossAxis:d,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof p=="number"&&(d=l==="end"?p*-1:p),a?{x:d*c,y:h*u}:{x:h*u,y:d*c}}const SF=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:r,y:o,placement:s,middlewareData:l}=e,a=await _F(e,n);return s===((t=l.offset)==null?void 0:t.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:r+a.x,y:o+a.y,data:{...a,placement:s}}}}},vF=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:l={fn:g=>{let{x:b,y}=g;return{x:b,y}}},...a}=Up(n,e),u={x:t,y:i},c=await h8(e,a),f=cu(Jl(r)),h=u8(f);let d=u[h],p=u[f];if(o){const g=h==="y"?"top":"left",b=h==="y"?"bottom":"right",y=d+c[g],_=d-c[b];d=Vk(y,d,_)}if(s){const g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=p+c[g],_=p-c[b];p=Vk(y,p,_)}const m=l.fn({...e,[h]:d,[f]:p});return{...m,data:{x:m.x-t,y:m.y-i,enabled:{[h]:o,[f]:s}}}}}};function Kp(){return typeof window<"u"}function Nu(n){return d8(n)?(n.nodeName||"").toLowerCase():"#document"}function Gi(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Mo(n){var e;return(e=(d8(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function d8(n){return Kp()?n instanceof Node||n instanceof Gi(n).Node:!1}function zr(n){return Kp()?n instanceof Element||n instanceof Gi(n).Element:!1}function wo(n){return Kp()?n instanceof HTMLElement||n instanceof Gi(n).HTMLElement:!1}function qk(n){return!Kp()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Gi(n).ShadowRoot}function Af(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=Vr(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function xF(n){return["table","td","th"].includes(Nu(n))}function Gp(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function N2(n){const e=I2(),t=zr(n)?Vr(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function MF(n){let e=Zs(n);for(;wo(e)&&!fu(e);){if(N2(e))return e;if(Gp(e))return null;e=Zs(e)}return null}function I2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function fu(n){return["html","body","#document"].includes(Nu(n))}function Vr(n){return Gi(n).getComputedStyle(n)}function Qp(n){return zr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Zs(n){if(Nu(n)==="html")return n;const e=n.assignedSlot||n.parentNode||qk(n)&&n.host||Mo(n);return qk(e)?e.host:e}function p8(n){const e=Zs(n);return fu(e)?n.ownerDocument?n.ownerDocument.body:n.body:wo(e)&&Af(e)?e:p8(e)}function zc(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=p8(n),o=r===((i=n.ownerDocument)==null?void 0:i.body),s=Gi(r);if(o){const l=M1(s);return e.concat(s,s.visualViewport||[],Af(r)?r:[],l&&t?zc(l):[])}return e.concat(r,zc(r,[],t))}function M1(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function m8(n){const e=Vr(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=wo(n),o=r?n.offsetWidth:t,s=r?n.offsetHeight:i,l=vd(t)!==o||vd(i)!==s;return l&&(t=o,i=s),{width:t,height:i,$:l}}function B2(n){return zr(n)?n:n.contextElement}function Ha(n){const e=B2(n);if(!wo(e))return Ys(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:o}=m8(e);let s=(o?vd(t.width):t.width)/i,l=(o?vd(t.height):t.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const AF=Ys(0);function g8(n){const e=Gi(n);return!I2()||!e.visualViewport?AF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function EF(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Gi(n)?!1:e}function Kl(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),o=B2(n);let s=Ys(1);e&&(i?zr(i)&&(s=Ha(i)):s=Ha(n));const l=EF(o,t,i)?g8(o):Ys(0);let a=(r.left+l.x)/s.x,u=(r.top+l.y)/s.y,c=r.width/s.x,f=r.height/s.y;if(o){const h=Gi(o),d=i&&zr(i)?Gi(i):i;let p=h,m=M1(p);for(;m&&i&&d!==p;){const g=Ha(m),b=m.getBoundingClientRect(),y=Vr(m),_=b.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,M=b.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;a*=g.x,u*=g.y,c*=g.x,f*=g.y,a+=_,u+=M,p=Gi(m),m=M1(p)}}return Md({width:c,height:f,x:a,y:u})}function OF(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const o=r==="fixed",s=Mo(i),l=e?Gp(e.floating):!1;if(i===s||l&&o)return t;let a={scrollLeft:0,scrollTop:0},u=Ys(1);const c=Ys(0),f=wo(i);if((f||!f&&!o)&&((Nu(i)!=="body"||Af(s))&&(a=Qp(i)),wo(i))){const h=Kl(i);u=Ha(i),c.x=h.x+i.clientLeft,c.y=h.y+i.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-a.scrollLeft*u.x+c.x,y:t.y*u.y-a.scrollTop*u.y+c.y}}function TF(n){return Array.from(n.getClientRects())}function A1(n,e){const t=Qp(n).scrollLeft;return e?e.left+t:Kl(Mo(n)).left+t}function DF(n){const e=Mo(n),t=Qp(n),i=n.ownerDocument.body,r=Dl(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),o=Dl(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-t.scrollLeft+A1(n);const l=-t.scrollTop;return Vr(i).direction==="rtl"&&(s+=Dl(e.clientWidth,i.clientWidth)-r),{width:r,height:o,x:s,y:l}}function PF(n,e){const t=Gi(n),i=Mo(n),r=t.visualViewport;let o=i.clientWidth,s=i.clientHeight,l=0,a=0;if(r){o=r.width,s=r.height;const u=I2();(!u||u&&e==="fixed")&&(l=r.offsetLeft,a=r.offsetTop)}return{width:o,height:s,x:l,y:a}}function RF(n,e){const t=Kl(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,o=wo(n)?Ha(n):Ys(1),s=n.clientWidth*o.x,l=n.clientHeight*o.y,a=r*o.x,u=i*o.y;return{width:s,height:l,x:a,y:u}}function Wk(n,e,t){let i;if(e==="viewport")i=PF(n,t);else if(e==="document")i=DF(Mo(n));else if(zr(e))i=RF(e,t);else{const r=g8(n);i={...e,x:e.x-r.x,y:e.y-r.y}}return Md(i)}function b8(n,e){const t=Zs(n);return t===e||!zr(t)||fu(t)?!1:Vr(t).position==="fixed"||b8(t,e)}function NF(n,e){const t=e.get(n);if(t)return t;let i=zc(n,[],!1).filter(l=>zr(l)&&Nu(l)!=="body"),r=null;const o=Vr(n).position==="fixed";let s=o?Zs(n):n;for(;zr(s)&&!fu(s);){const l=Vr(s),a=N2(s);!a&&l.position==="fixed"&&(r=null),(o?!a&&!r:!a&&l.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Af(s)&&!a&&b8(n,s))?i=i.filter(c=>c!==s):r=l,s=Zs(s)}return e.set(n,i),i}function IF(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const s=[...t==="clippingAncestors"?Gp(e)?[]:NF(e,this._c):[].concat(t),i],l=s[0],a=s.reduce((u,c)=>{const f=Wk(e,c,r);return u.top=Dl(f.top,u.top),u.right=Sd(f.right,u.right),u.bottom=Sd(f.bottom,u.bottom),u.left=Dl(f.left,u.left),u},Wk(e,l,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function BF(n){const{width:e,height:t}=m8(n);return{width:e,height:t}}function LF(n,e,t){const i=wo(e),r=Mo(e),o=t==="fixed",s=Kl(n,!0,o,e);let l={scrollLeft:0,scrollTop:0};const a=Ys(0);if(i||!i&&!o)if((Nu(e)!=="body"||Af(r))&&(l=Qp(e)),i){const d=Kl(e,!0,o,e);a.x=d.x+e.clientLeft,a.y=d.y+e.clientTop}else r&&(a.x=A1(r));let u=0,c=0;if(r&&!i&&!o){const d=r.getBoundingClientRect();c=d.top+l.scrollTop,u=d.left+l.scrollLeft-A1(r,d)}const f=s.left+l.scrollLeft-a.x-u,h=s.top+l.scrollTop-a.y-c;return{x:f,y:h,width:s.width,height:s.height}}function K0(n){return Vr(n).position==="static"}function Uk(n,e){if(!wo(n)||Vr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Mo(n)===t&&(t=t.ownerDocument.body),t}function y8(n,e){const t=Gi(n);if(Gp(n))return t;if(!wo(n)){let r=Zs(n);for(;r&&!fu(r);){if(zr(r)&&!K0(r))return r;r=Zs(r)}return t}let i=Uk(n,e);for(;i&&xF(i)&&K0(i);)i=Uk(i,e);return i&&fu(i)&&K0(i)&&!N2(i)?t:i||MF(n)||t}const FF=async function(n){const e=this.getOffsetParent||y8,t=this.getDimensions,i=await t(n.floating);return{reference:LF(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function jF(n){return Vr(n).direction==="rtl"}const zF={convertOffsetParentRelativeRectToViewportRelativeRect:OF,getDocumentElement:Mo,getClippingRect:IF,getOffsetParent:y8,getElementRects:FF,getClientRects:TF,getDimensions:BF,getScale:Ha,isElement:zr,isRTL:jF};function VF(n,e){let t=null,i;const r=Mo(n);function o(){var l;clearTimeout(i),(l=t)==null||l.disconnect(),t=null}function s(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),o();const{left:u,top:c,width:f,height:h}=n.getBoundingClientRect();if(l||e(),!f||!h)return;const d=oh(c),p=oh(r.clientWidth-(u+f)),m=oh(r.clientHeight-(c+h)),g=oh(u),y={rootMargin:-d+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Dl(0,Sd(1,a))||1};let _=!0;function M(w){const S=w[0].intersectionRatio;if(S!==a){if(!_)return s();S?s(!1,S):i=setTimeout(()=>{s(!1,1e-7)},1e3)}_=!1}try{t=new IntersectionObserver(M,{...y,root:r.ownerDocument})}catch{t=new IntersectionObserver(M,y)}t.observe(n)}return s(!0),o}function HF(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,u=B2(n),c=r||o?[...u?zc(u):[],...zc(e)]:[];c.forEach(b=>{r&&b.addEventListener("scroll",t,{passive:!0}),o&&b.addEventListener("resize",t)});const f=u&&l?VF(u,t):null;let h=-1,d=null;s&&(d=new ResizeObserver(b=>{let[y]=b;y&&y.target===u&&d&&(d.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=d)==null||_.observe(e)})),t()}),u&&!a&&d.observe(u),d.observe(e));let p,m=a?Kl(n):null;a&&g();function g(){const b=Kl(n);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&t(),m=b,p=requestAnimationFrame(g)}return t(),()=>{var b;c.forEach(y=>{r&&y.removeEventListener("scroll",t),o&&y.removeEventListener("resize",t)}),f==null||f(),(b=d)==null||b.disconnect(),d=null,a&&cancelAnimationFrame(p)}}const qF=SF,WF=vF,UF=CF,JF=(n,e,t)=>{const i=new Map,r={platform:zF,...t},o={...r.platform,_c:i};return wF(n,e,{...r,platform:o})};function KF(n){let e,t;const i={autoUpdate:!0};let r=n;const o=c=>({...i,...n||{},...c||{}}),s=c=>{e&&t&&(r=o(c),JF(e,t,r).then(f=>{Object.assign(t.style,{position:f.strategy,left:`${f.x}px`,top:`${f.y}px`}),r!=null&&r.onComputed&&r.onComputed(f)}))},l=c=>{if("subscribe"in c)return u(c),{};e=c,s()},a=(c,f)=>{let h;t=c,r=o(f),setTimeout(()=>s(f),0),s(f);const d=()=>{h&&(h(),h=void 0)},p=({autoUpdate:m}=r||{})=>{d(),m!==!1&&an().then(()=>HF(e,t,()=>s(r),m===!0?{}:m))};return h=p(),{update(m){s(m),h=p(m)},destroy(){d()}}},u=c=>{const f=c.subscribe(h=>{e===void 0?(e=h,s()):(Object.assign(e,h),s())});Ki(f)};return[l,a,s]}function GF({loadOptions:n,filterText:e,items:t,multiple:i,value:r,itemId:o,groupBy:s,filterSelectedItems:l,itemFilter:a,convertStringItemsToObjects:u,filterGroupedItems:c,label:f}){if(t&&n)return t;if(!t)return[];t&&t.length>0&&typeof t[0]!="object"&&(t=u(t));let h=t.filter(d=>{let p=a(d[f],e,d);return p&&i&&(r!=null&&r.length)&&(p=!r.some(m=>l?m[o]===d[o]:!1)),p});return s&&(h=c(h)),h}async function QF({dispatch:n,loadOptions:e,convertStringItemsToObjects:t,filterText:i}){let r=await e(i).catch(o=>{console.warn("svelte-select loadOptions error :>> ",o),n("error",{type:"loadOptions",details:o})});if(r&&!r.cancelled)return r?(r&&r.length>0&&typeof r[0]!="object"&&(r=t(r)),n("loaded",{items:r})):r=[],{filteredItems:r,loading:!1,focused:!0,listOpen:!0}}function XF(n){let e,t;return{c(){e=yo("svg"),t=yo("path"),k(t,"fill","currentColor"),k(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),k(e,"width","100%"),k(e,"height","100%"),k(e,"viewBox","0 0 20 20"),k(e,"focusable","false"),k(e,"aria-hidden","true"),k(e,"class","svelte-qbd276")},m(i,r){j(i,e,r),x(e,t)},p:he,i:he,o:he,d(i){i&&z(e)}}}class YF extends je{constructor(e){super(),ze(this,e,null,XF,xn,{})}}function ZF(n){let e,t;return{c(){e=yo("svg"),t=yo("path"),k(t,"fill","currentColor"),k(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),k(e,"width","100%"),k(e,"height","100%"),k(e,"viewBox","-2 -2 50 50"),k(e,"focusable","false"),k(e,"aria-hidden","true"),k(e,"role","presentation"),k(e,"class","svelte-whdbu1")},m(i,r){j(i,e,r),x(e,t)},p:he,i:he,o:he,d(i){i&&z(e)}}}class Ad extends je{constructor(e){super(),ze(this,e,null,ZF,xn,{})}}function $F(n){let e,t;return{c(){e=yo("svg"),t=yo("circle"),k(t,"class","circle_path svelte-1p3nqvd"),k(t,"cx","50"),k(t,"cy","50"),k(t,"r","20"),k(t,"fill","none"),k(t,"stroke","currentColor"),k(t,"stroke-width","5"),k(t,"stroke-miterlimit","10"),k(e,"class","loading svelte-1p3nqvd"),k(e,"viewBox","25 25 50 50")},m(i,r){j(i,e,r),x(e,t)},p:he,i:he,o:he,d(i){i&&z(e)}}}class ej extends je{constructor(e){super(),ze(this,e,null,$F,xn,{})}}const tj=n=>({value:n[0]&8}),Jk=n=>({value:n[3]}),nj=n=>({value:n[0]&8}),Kk=n=>({value:n[3]}),ij=n=>({listOpen:n[0]&64}),Gk=n=>({listOpen:n[6]}),rj=n=>({}),Qk=n=>({}),oj=n=>({}),Xk=n=>({}),sj=n=>({selection:n[0]&8}),Yk=n=>({selection:n[3]});function Zk(n,e,t){const i=n.slice();return i[126]=e[t],i[128]=t,i}const lj=n=>({}),$k=n=>({}),aj=n=>({selection:n[0]&8}),e3=n=>({selection:n[126],index:n[128]}),uj=n=>({}),t3=n=>({}),cj=n=>({}),n3=n=>({}),fj=n=>({}),i3=n=>({});function r3(n,e,t){const i=n.slice();return i[126]=e[t],i[128]=t,i}const hj=n=>({item:n[0]&16777216}),o3=n=>({item:n[126],index:n[128]}),dj=n=>({filteredItems:n[0]&16777216}),s3=n=>({filteredItems:n[24]}),pj=n=>({}),l3=n=>({});function a3(n){let e,t,i,r,o,s,l,a,u=n[50]["list-prepend"]&&u3(n);const c=[bj,gj,mj],f=[];function h(p,m){return p[50].list?0:p[24].length>0?1:p[19]?-1:2}~(i=h(n))&&(r=f[i]=c[i](n));let d=n[50]["list-append"]&&f3(n);return{c(){e=D("div"),u&&u.c(),t=Q(),r&&r.c(),o=Q(),d&&d.c(),k(e,"class","svelte-select-list svelte-82qwg8"),k(e,"role","none"),le(e,"prefloat",n[28])},m(p,m){j(p,e,m),u&&u.m(e,null),x(e,t),~i&&f[i].m(e,null),x(e,o),d&&d.m(e,null),n[91](e),s=!0,l||(a=[vn(n[49].call(null,e)),ue(e,"scroll",n[41]),ue(e,"pointerup",Lr(Fl(n[85]))),ue(e,"mousedown",Lr(Fl(n[86])))],l=!0)},p(p,m){p[50]["list-prepend"]?u?(u.p(p,m),m[1]&524288&&C(u,1)):(u=u3(p),u.c(),C(u,1),u.m(e,t)):u&&(ce(),v(u,1,1,()=>{u=null}),fe());let g=i;i=h(p),i===g?~i&&f[i].p(p,m):(r&&(ce(),v(f[g],1,1,()=>{f[g]=null}),fe()),~i?(r=f[i],r?r.p(p,m):(r=f[i]=c[i](p),r.c()),C(r,1),r.m(e,o)):r=null),p[50]["list-append"]?d?(d.p(p,m),m[1]&524288&&C(d,1)):(d=f3(p),d.c(),C(d,1),d.m(e,null)):d&&(ce(),v(d,1,1,()=>{d=null}),fe()),(!s||m[0]&268435456)&&le(e,"prefloat",p[28])},i(p){s||(C(u),C(r),C(d),s=!0)},o(p){v(u),v(r),v(d),s=!1},d(p){p&&z(e),u&&u.d(),~i&&f[i].d(),d&&d.d(),n[91](null),l=!1,fn(a)}}}function u3(n){let e;const t=n[83]["list-prepend"],i=tn(t,n,n[82],l3);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o[2]&1048576)&&nn(i,t,r,r[82],e?on(t,r[82],o,pj):rn(r[82]),l3)},i(r){e||(C(i,r),e=!0)},o(r){v(i,r),e=!1},d(r){i&&i.d(r)}}}function mj(n){let e;const t=n[83].empty,i=tn(t,n,n[82],i3),r=i||yj();return{c(){r&&r.c()},m(o,s){r&&r.m(o,s),e=!0},p(o,s){i&&i.p&&(!e||s[2]&1048576)&&nn(i,t,o,o[82],e?on(t,o[82],s,fj):rn(o[82]),i3)},i(o){e||(C(r,o),e=!0)},o(o){v(r,o),e=!1},d(o){r&&r.d(o)}}}function gj(n){let e,t,i=n[24],r=[];for(let s=0;s<i.length;s+=1)r[s]=c3(r3(n,i,s));const o=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=ut()},m(s,l){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,l);j(s,e,l),t=!0},p(s,l){if(l[0]&1627402376|l[1]&28672|l[2]&1048576){i=s[24];let a;for(a=0;a<i.length;a+=1){const u=r3(s,i,a);r[a]?(r[a].p(u,l),C(r[a],1)):(r[a]=c3(u),r[a].c(),C(r[a],1),r[a].m(e.parentNode,e))}for(ce(),a=i.length;a<r.length;a+=1)o(a);fe()}},i(s){if(!t){for(let l=0;l<i.length;l+=1)C(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)v(r[l]);t=!1},d(s){mn(r,s),s&&z(e)}}}function bj(n){let e;const t=n[83].list,i=tn(t,n,n[82],s3);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o[0]&16777216|o[2]&1048576)&&nn(i,t,r,r[82],e?on(t,r[82],o,dj):rn(r[82]),s3)},i(r){e||(C(i,r),e=!0)},o(r){v(i,r),e=!1},d(r){i&&i.d(r)}}}function yj(n){let e;return{c(){e=D("div"),e.textContent="No options",k(e,"class","empty svelte-82qwg8")},m(t,i){j(t,e,i)},p:he,d(t){t&&z(e)}}}function kj(n){var i;let e=((i=n[126])==null?void 0:i[n[12]])+"",t;return{c(){t=we(e)},m(r,o){j(r,t,o)},p(r,o){var s;o[0]&16781312&&e!==(e=((s=r[126])==null?void 0:s[r[12]])+"")&&We(t,e)},d(r){r&&z(t)}}}function c3(n){let e,t,i,r,o,s,l,a;const u=n[83].item,c=tn(u,n,n[82],o3),f=c||kj(n);function h(){return n[88](n[128])}function d(){return n[89](n[128])}function p(){return n[90](n[126],n[128])}return{c(){var m;e=D("div"),t=D("div"),f&&f.c(),o=Q(),k(t,"class","item svelte-82qwg8"),le(t,"list-group-title",n[126].groupHeader),le(t,"active",n[45](n[126],n[3],n[13])),le(t,"first",Dj(n[128])),le(t,"hover",n[7]===n[128]),le(t,"group-item",n[126].groupItem),le(t,"not-selectable",((m=n[126])==null?void 0:m.selectable)===!1),k(e,"class","list-item svelte-82qwg8"),k(e,"tabindex","-1"),k(e,"role","none")},m(m,g){j(m,e,g),x(e,t),f&&f.m(t,null),x(e,o),s=!0,l||(a=[vn(i=n[46].call(null,t,{scroll:n[45](n[126],n[3],n[13]),listDom:n[30]})),vn(r=n[47].call(null,t,{scroll:n[29]===n[128],listDom:n[30]})),ue(e,"mouseover",h),ue(e,"focus",d),ue(e,"click",Lr(p)),ue(e,"keydown",Lr(Fl(n[87])))],l=!0)},p(m,g){var b;n=m,c?c.p&&(!s||g[0]&16777216|g[2]&1048576)&&nn(c,u,n,n[82],s?on(u,n[82],g,hj):rn(n[82]),o3):f&&f.p&&(!s||g[0]&16781312)&&f.p(n,s?g:[-1,-1,-1,-1,-1]),i&&Ei(i.update)&&g[0]&1090527240&&i.update.call(null,{scroll:n[45](n[126],n[3],n[13]),listDom:n[30]}),r&&Ei(r.update)&&g[0]&1610612736&&r.update.call(null,{scroll:n[29]===n[128],listDom:n[30]}),(!s||g[0]&16777216)&&le(t,"list-group-title",n[126].groupHeader),(!s||g[0]&16785416|g[1]&16384)&&le(t,"active",n[45](n[126],n[3],n[13])),(!s||g[0]&128)&&le(t,"hover",n[7]===n[128]),(!s||g[0]&16777216)&&le(t,"group-item",n[126].groupItem),(!s||g[0]&16777216)&&le(t,"not-selectable",((b=n[126])==null?void 0:b.selectable)===!1)},i(m){s||(C(f,m),s=!0)},o(m){v(f,m),s=!1},d(m){m&&z(e),f&&f.d(m),l=!1,fn(a)}}}function f3(n){let e;const t=n[83]["list-append"],i=tn(t,n,n[82],n3);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o[2]&1048576)&&nn(i,t,r,r[82],e?on(t,r[82],o,cj):rn(r[82]),n3)},i(r){e||(C(i,r),e=!0)},o(r){v(i,r),e=!1},d(r){i&&i.d(r)}}}function h3(n){let e,t,i,r,o;return{c(){e=D("span"),t=we(n[32]),i=Q(),r=D("span"),o=we(n[31]),k(e,"id","aria-selection"),k(e,"class","svelte-82qwg8"),k(r,"id","aria-context"),k(r,"class","svelte-82qwg8")},m(s,l){j(s,e,l),x(e,t),j(s,i,l),j(s,r,l),x(r,o)},p(s,l){l[1]&2&&We(t,s[32]),l[1]&1&&We(o,s[31])},d(s){s&&z(e),s&&z(i),s&&z(r)}}}function d3(n){let e,t,i,r;const o=[Cj,wj],s=[];function l(a,u){return a[9]?0:1}return e=l(n),t=s[e]=o[e](n),{c(){t.c(),i=ut()},m(a,u){s[e].m(a,u),j(a,i,u),r=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(ce(),v(s[c],1,1,()=>{s[c]=null}),fe(),t=s[e],t?t.p(a,u):(t=s[e]=o[e](a),t.c()),C(t,1),t.m(i.parentNode,i))},i(a){r||(C(t),r=!0)},o(a){v(t),r=!1},d(a){s[e].d(a),a&&z(i)}}}function wj(n){let e,t;const i=n[83].selection,r=tn(i,n,n[82],Yk),o=r||_j(n);return{c(){e=D("div"),o&&o.c(),k(e,"class","selected-item svelte-82qwg8"),le(e,"hide-selected-item",n[35])},m(s,l){j(s,e,l),o&&o.m(e,null),t=!0},p(s,l){r?r.p&&(!t||l[0]&8|l[2]&1048576)&&nn(r,i,s,s[82],t?on(i,s[82],l,sj):rn(s[82]),Yk):o&&o.p&&(!t||l[0]&4104)&&o.p(s,t?l:[-1,-1,-1,-1,-1]),(!t||l[1]&16)&&le(e,"hide-selected-item",s[35])},i(s){t||(C(o,s),t=!0)},o(s){v(o,s),t=!1},d(s){s&&z(e),o&&o.d(s)}}}function Cj(n){let e,t,i=n[3],r=[];for(let s=0;s<i.length;s+=1)r[s]=m3(Zk(n,i,s));const o=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=ut()},m(s,l){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,l);j(s,e,l),t=!0},p(s,l){if(l[0]&67116040|l[1]&32|l[2]&1048576){i=s[3];let a;for(a=0;a<i.length;a+=1){const u=Zk(s,i,a);r[a]?(r[a].p(u,l),C(r[a],1)):(r[a]=m3(u),r[a].c(),C(r[a],1),r[a].m(e.parentNode,e))}for(ce(),a=i.length;a<r.length;a+=1)o(a);fe()}},i(s){if(!t){for(let l=0;l<i.length;l+=1)C(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)v(r[l]);t=!1},d(s){mn(r,s),s&&z(e)}}}function _j(n){let e=n[3][n[12]]+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r[0]&4104&&e!==(e=i[3][i[12]]+"")&&We(t,e)},d(i){i&&z(t)}}}function Sj(n){let e=n[126][n[12]]+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r[0]&4104&&e!==(e=i[126][i[12]]+"")&&We(t,e)},d(i){i&&z(t)}}}function p3(n){let e,t,i,r;const o=n[83]["multi-clear-icon"],s=tn(o,n,n[82],$k),l=s||vj();function a(){return n[92](n[128])}return{c(){e=D("div"),l&&l.c(),k(e,"class","multi-item-clear svelte-82qwg8")},m(u,c){j(u,e,c),l&&l.m(e,null),t=!0,i||(r=ue(e,"pointerup",Lr(Fl(a))),i=!0)},p(u,c){n=u,s&&s.p&&(!t||c[2]&1048576)&&nn(s,o,n,n[82],t?on(o,n[82],c,lj):rn(n[82]),$k)},i(u){t||(C(l,u),t=!0)},o(u){v(l,u),t=!1},d(u){u&&z(e),l&&l.d(u),i=!1,r()}}}function vj(n){let e,t;return e=new Ad({}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function m3(n){let e,t,i,r,o,s,l;const a=n[83].selection,u=tn(a,n,n[82],e3),c=u||Sj(n);let f=!n[11]&&!n[10]&&Ad&&p3(n);function h(){return n[93](n[128])}return{c(){e=D("div"),t=D("span"),c&&c.c(),i=Q(),f&&f.c(),r=Q(),k(t,"class","multi-item-text svelte-82qwg8"),k(e,"class","multi-item svelte-82qwg8"),k(e,"role","none"),le(e,"active",n[26]===n[128]),le(e,"disabled",n[11])},m(d,p){j(d,e,p),x(e,t),c&&c.m(t,null),x(e,i),f&&f.m(e,null),x(e,r),o=!0,s||(l=[ue(e,"click",Fl(h)),ue(e,"keydown",Lr(Fl(n[84])))],s=!0)},p(d,p){n=d,u?u.p&&(!o||p[0]&8|p[2]&1048576)&&nn(u,a,n,n[82],o?on(a,n[82],p,aj):rn(n[82]),e3):c&&c.p&&(!o||p[0]&4104)&&c.p(n,o?p:[-1,-1,-1,-1,-1]),!n[11]&&!n[10]&&Ad?f?(f.p(n,p),p[0]&3072&&C(f,1)):(f=p3(n),f.c(),C(f,1),f.m(e,r)):f&&(ce(),v(f,1,1,()=>{f=null}),fe()),(!o||p[0]&67108864)&&le(e,"active",n[26]===n[128]),(!o||p[0]&2048)&&le(e,"disabled",n[11])},i(d){o||(C(c,d),C(f),o=!0)},o(d){v(c,d),v(f),o=!1},d(d){d&&z(e),c&&c.d(d),f&&f.d(),s=!1,fn(l)}}}function g3(n){let e,t;const i=n[83]["loading-icon"],r=tn(i,n,n[82],Xk),o=r||xj();return{c(){e=D("div"),o&&o.c(),k(e,"class","icon loading svelte-82qwg8"),k(e,"aria-hidden","true")},m(s,l){j(s,e,l),o&&o.m(e,null),t=!0},p(s,l){r&&r.p&&(!t||l[2]&1048576)&&nn(r,i,s,s[82],t?on(i,s[82],l,oj):rn(s[82]),Xk)},i(s){t||(C(o,s),t=!0)},o(s){v(o,s),t=!1},d(s){s&&z(e),o&&o.d(s)}}}function xj(n){let e,t;return e=new ej({}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function b3(n){let e,t,i,r;const o=n[83]["clear-icon"],s=tn(o,n,n[82],Qk),l=s||Mj();return{c(){e=D("button"),l&&l.c(),k(e,"type","button"),k(e,"class","icon clear-select svelte-82qwg8")},m(a,u){j(a,e,u),l&&l.m(e,null),t=!0,i||(r=ue(e,"click",n[22]),i=!0)},p(a,u){s&&s.p&&(!t||u[2]&1048576)&&nn(s,o,a,a[82],t?on(o,a[82],u,rj):rn(a[82]),Qk)},i(a){t||(C(l,a),t=!0)},o(a){v(l,a),t=!1},d(a){a&&z(e),l&&l.d(a),i=!1,r()}}}function Mj(n){let e,t;return e=new Ad({}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function y3(n){let e,t;const i=n[83]["chevron-icon"],r=tn(i,n,n[82],Gk),o=r||Aj();return{c(){e=D("div"),o&&o.c(),k(e,"class","icon chevron svelte-82qwg8"),k(e,"aria-hidden","true")},m(s,l){j(s,e,l),o&&o.m(e,null),t=!0},p(s,l){r&&r.p&&(!t||l[0]&64|l[2]&1048576)&&nn(r,i,s,s[82],t?on(i,s[82],l,ij):rn(s[82]),Gk)},i(s){t||(C(o,s),t=!0)},o(s){v(o,s),t=!1},d(s){s&&z(e),o&&o.d(s)}}}function Aj(n){let e,t;return e=new YF({}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Ej(n){let e,t;return{c(){e=D("input"),k(e,"name",n[8]),k(e,"type","hidden"),e.value=t=n[3]?JSON.stringify(n[3]):null,k(e,"class","svelte-82qwg8")},m(i,r){j(i,e,r)},p(i,r){r[0]&256&&k(e,"name",i[8]),r[0]&8&&t!==(t=i[3]?JSON.stringify(i[3]):null)&&(e.value=t)},d(i){i&&z(e)}}}function k3(n){let e;const t=n[83].required,i=tn(t,n,n[82],Jk),r=i||Oj();return{c(){r&&r.c()},m(o,s){r&&r.m(o,s),e=!0},p(o,s){i&&i.p&&(!e||s[0]&8|s[2]&1048576)&&nn(i,t,o,o[82],e?on(t,o[82],s,tj):rn(o[82]),Jk)},i(o){e||(C(r,o),e=!0)},o(o){v(r,o),e=!1},d(o){r&&r.d(o)}}}function Oj(n){let e;return{c(){e=D("select"),k(e,"class","required svelte-82qwg8"),e.required=!0,k(e,"tabindex","-1"),k(e,"aria-hidden","true")},m(t,i){j(t,e,i)},p:he,d(t){t&&z(e)}}}function Tj(n){let e,t,i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y,_,M,w=n[6]&&a3(n),S=n[2]&&h3(n);const E=n[83].prepend,I=tn(E,n,n[82],t3);let O=n[25]&&d3(n),P=[{readOnly:c=!n[17]},n[27],{placeholder:n[33]},{style:n[18]},{disabled:n[11]}],A={};for(let T=0;T<P.length;T+=1)A=Qi(A,P[T]);let H=n[5]&&g3(n),W=n[34]&&b3(n),q=n[20]&&y3(n);const L=n[83]["input-hidden"],X=tn(L,n,n[82],Kk),Y=X||Ej(n);let G=n[16]&&(!n[3]||n[3].length===0)&&k3(n);return{c(){e=D("div"),w&&w.c(),t=Q(),i=D("span"),S&&S.c(),r=Q(),o=D("div"),I&&I.c(),s=Q(),l=D("div"),O&&O.c(),a=Q(),u=D("input"),f=Q(),h=D("div"),H&&H.c(),d=Q(),W&&W.c(),p=Q(),q&&q.c(),m=Q(),Y&&Y.c(),g=Q(),G&&G.c(),k(i,"aria-live","polite"),k(i,"aria-atomic","false"),k(i,"aria-relevant","additions text"),k(i,"class","a11y-text svelte-82qwg8"),k(o,"class","prepend svelte-82qwg8"),hy(u,A),le(u,"svelte-82qwg8",!0),k(l,"class","value-container svelte-82qwg8"),k(h,"class","indicators svelte-82qwg8"),k(e,"class",b="svelte-select "+n[21]+" svelte-82qwg8"),k(e,"style",n[14]),k(e,"role","none"),le(e,"multi",n[9]),le(e,"disabled",n[11]),le(e,"focused",n[2]),le(e,"list-open",n[6]),le(e,"show-chevron",n[20]),le(e,"error",n[15])},m(T,B){j(T,e,B),w&&w.m(e,null),x(e,t),x(e,i),S&&S.m(i,null),x(e,r),x(e,o),I&&I.m(o,null),x(e,s),x(e,l),O&&O.m(l,null),x(l,a),x(l,u),u.autofocus&&u.focus(),n[94](u),Js(u,n[4]),x(e,f),x(e,h),H&&H.m(h,null),x(h,d),W&&W.m(h,null),x(h,p),q&&q.m(h,null),x(e,m),Y&&Y.m(e,null),x(e,g),G&&G.m(e,null),n[96](e),y=!0,_||(M=[ue(window,"click",n[42]),ue(window,"keydown",n[37]),ue(u,"keydown",n[37]),ue(u,"blur",n[39]),ue(u,"focus",n[38]),ue(u,"input",n[95]),ue(e,"pointerup",Fl(n[40])),vn(n[48].call(null,e))],_=!0)},p(T,B){T[6]?w?(w.p(T,B),B[0]&64&&C(w,1)):(w=a3(T),w.c(),C(w,1),w.m(e,t)):w&&(ce(),v(w,1,1,()=>{w=null}),fe()),T[2]?S?S.p(T,B):(S=h3(T),S.c(),S.m(i,null)):S&&(S.d(1),S=null),I&&I.p&&(!y||B[2]&1048576)&&nn(I,E,T,T[82],y?on(E,T[82],B,uj):rn(T[82]),t3),T[25]?O?(O.p(T,B),B[0]&33554432&&C(O,1)):(O=d3(T),O.c(),C(O,1),O.m(l,a)):O&&(ce(),v(O,1,1,()=>{O=null}),fe()),hy(u,A=us(P,[(!y||B[0]&131072&&c!==(c=!T[17]))&&{readOnly:c},B[0]&134217728&&T[27],(!y||B[1]&4)&&{placeholder:T[33]},(!y||B[0]&262144)&&{style:T[18]},(!y||B[0]&2048)&&{disabled:T[11]}])),B[0]&16&&u.value!==T[4]&&Js(u,T[4]),le(u,"svelte-82qwg8",!0),T[5]?H?(H.p(T,B),B[0]&32&&C(H,1)):(H=g3(T),H.c(),C(H,1),H.m(h,d)):H&&(ce(),v(H,1,1,()=>{H=null}),fe()),T[34]?W?(W.p(T,B),B[1]&8&&C(W,1)):(W=b3(T),W.c(),C(W,1),W.m(h,p)):W&&(ce(),v(W,1,1,()=>{W=null}),fe()),T[20]?q?(q.p(T,B),B[0]&1048576&&C(q,1)):(q=y3(T),q.c(),C(q,1),q.m(h,null)):q&&(ce(),v(q,1,1,()=>{q=null}),fe()),X?X.p&&(!y||B[0]&8|B[2]&1048576)&&nn(X,L,T,T[82],y?on(L,T[82],B,nj):rn(T[82]),Kk):Y&&Y.p&&(!y||B[0]&264)&&Y.p(T,y?B:[-1,-1,-1,-1,-1]),T[16]&&(!T[3]||T[3].length===0)?G?(G.p(T,B),B[0]&65544&&C(G,1)):(G=k3(T),G.c(),C(G,1),G.m(e,null)):G&&(ce(),v(G,1,1,()=>{G=null}),fe()),(!y||B[0]&2097152&&b!==(b="svelte-select "+T[21]+" svelte-82qwg8"))&&k(e,"class",b),(!y||B[0]&16384)&&k(e,"style",T[14]),(!y||B[0]&2097664)&&le(e,"multi",T[9]),(!y||B[0]&2099200)&&le(e,"disabled",T[11]),(!y||B[0]&2097156)&&le(e,"focused",T[2]),(!y||B[0]&2097216)&&le(e,"list-open",T[6]),(!y||B[0]&3145728)&&le(e,"show-chevron",T[20]),(!y||B[0]&2129920)&&le(e,"error",T[15])},i(T){y||(C(w),C(I,T),C(O),C(H),C(W),C(q),C(Y,T),C(G),y=!0)},o(T){v(w),v(I,T),v(O),v(H),v(W),v(q),v(Y,T),v(G),y=!1},d(T){T&&z(e),w&&w.d(),S&&S.d(),I&&I.d(T),O&&O.d(),n[94](null),H&&H.d(),W&&W.d(),q&&q.d(),Y&&Y.d(T),G&&G.d(),n[96](null),_=!1,fn(M)}}}function w3(n){return n.map((e,t)=>({index:t,value:e,label:`${e}`}))}function Dj(n){return n===0}function Pj(n){return n.groupHeader&&n.selectable||n.selectable||!n.hasOwnProperty("selectable")}function Rj(n,e,t){let i,r,o,s,l,a,u,c,f,{$$slots:h={},$$scope:d}=e;const p=MO(h),m=yS();let{justValue:g=null}=e,{filter:b=GF}=e,{getItems:y=QF}=e,{id:_=null}=e,{name:M=null}=e,{container:w=void 0}=e,{input:S=void 0}=e,{multiple:E=!1}=e,{multiFullItemClearable:I=!1}=e,{disabled:O=!1}=e,{focused:P=!1}=e,{value:A=null}=e,{filterText:H=""}=e,{placeholder:W="Please select"}=e,{placeholderAlwaysShow:q=!1}=e,{items:L=null}=e,{label:X="label"}=e,{itemFilter:Y=(N,be,Qe)=>`${N}`.toLowerCase().includes(be.toLowerCase())}=e,{groupBy:G=void 0}=e,{groupFilter:T=N=>N}=e,{groupHeaderSelectable:B=!1}=e,{itemId:J="value"}=e,{loadOptions:ne=void 0}=e,{containerStyles:_e=""}=e,{hasError:ae=!1}=e,{filterSelectedItems:Te=!0}=e,{required:re=!1}=e,{closeListOnChange:U=!0}=e,{clearFilterTextOnBlur:Ce=!0}=e,{createGroupHeaderItem:Ke=(N,be)=>({value:N,[X]:N})}=e;const K=()=>u;let{searchable:De=!0}=e,{inputStyles:F=""}=e,{clearable:ke=!0}=e,{loading:Me=!1}=e,{listOpen:Ae=!1}=e,Le,{debounce:ct=(N,be=1)=>{clearTimeout(Le),Le=setTimeout(N,be)}}=e,{debounceWait:Z=300}=e,{hideEmptyState:Ve=!1}=e,{inputAttributes:bt={}}=e,{listAutoWidth:me=!0}=e,{showChevron:$e=!1}=e,{listOffset:Ut=5}=e,{hoverItemIndex:Ue=0}=e,{floatingConfig:wt={}}=e,{class:_t=""}=e,it,Mn,gn,Dn;function ti(){if(typeof A=="string"){let N=(L||[]).find(be=>be[J]===A);t(3,A=N||{[J]:A,label:A})}else E&&Array.isArray(A)&&A.length>0&&t(3,A=A.map(N=>typeof N=="string"?{value:N,label:N}:N))}let se;function Je(){t(27,se=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},bt)),_&&t(27,se.id=_,se),De||t(27,se.readonly=!0,se)}function Bt(N){const be=[],Qe={};N.forEach(Lt=>{const dt=G(Lt);be.includes(dt)||(be.push(dt),Qe[dt]=[],dt&&Qe[dt].push(Object.assign(Ke(dt,Lt),{id:dt,groupHeader:!0,selectable:B}))),Qe[dt].push(Object.assign({groupItem:!!dt},Lt))});const Et=[];return T(be).forEach(Lt=>{Qe[Lt]&&Et.push(...Qe[Lt])}),Et}function Pn(){if(E){JSON.stringify(A)!==JSON.stringify(Mn)&&ds()&&m("input",A);return}(!Mn||JSON.stringify(A[J])!==JSON.stringify(Mn[J]))&&m("input",A)}function xt(){A&&(Array.isArray(A)?t(3,A=[...A]):t(3,A=[A]))}function de(){A&&t(3,A=null)}function ni(){const N=u.findIndex(be=>be[J]===A[J]);sn(N,!0)}function Rn(N){m("hoverItem",N)}function sn(N=0,be){t(7,Ue=N<0?0:N),!be&&G&&u[Ue]&&!u[Ue].selectable&&It(1)}function Mt(){!ne&&H.length===0||(ne?ct(async function(){t(5,Me=!0);let N=await y({dispatch:m,loadOptions:ne,convertStringItemsToObjects:w3,filterText:H});N?(t(5,Me=N.loading),t(6,Ae=Ae?N.listOpen:H.length>0),t(2,P=Ae&&N.focused),t(51,L=G?Bt(N.filteredItems):N.filteredItems)):(t(5,Me=!1),t(2,P=!0),t(6,Ae=!0))},Z):(t(6,Ae=!0),E&&t(26,it=void 0)))}function Do(N){Ae&&m("filter",N)}AO(async()=>{t(78,Mn=A),t(79,gn=H),t(80,Dn=E)});function dl(){return E?A?A.map(N=>N[J]):null:A&&A[J]}function ds(){let N=!0;if(A){const be=[],Qe=[];A.forEach(Et=>{be.includes(Et[J])?N=!1:(be.push(Et[J]),Qe.push(Et))}),N||t(3,A=Qe)}return N}function Li(N){let be=N?N[J]:A[J];return L.find(Qe=>Qe[J]===be)}function Yi(N){!N||N.length===0||N.some(be=>typeof be!="object")||!A||(E?A.some(be=>!be||!be[J]):!A[J])||(Array.isArray(A)?t(3,A=A.map(be=>Li(be)||be)):t(3,A=Li()||A))}async function Nn(N){const be=A[N];A.length===1?t(3,A=void 0):t(3,A=A.filter(Qe=>Qe!==be)),m("clear",be)}function ps(N){if(P)switch(N.stopPropagation(),N.key){case"Escape":N.preventDefault(),bn();break;case"Enter":if(N.preventDefault(),Ae){if(u.length===0)break;const be=u[Ue];if(A&&!E&&A[J]===be[J]){bn();break}else Ge(u[Ue])}break;case"ArrowDown":N.preventDefault(),Ae?It(1):(t(6,Ae=!0),t(26,it=void 0));break;case"ArrowUp":N.preventDefault(),Ae?It(-1):(t(6,Ae=!0),t(26,it=void 0));break;case"Tab":if(Ae&&P){if(u.length===0||A&&A[J]===u[Ue][J])return bn();N.preventDefault(),Ge(u[Ue]),bn()}break;case"Backspace":if(!E||H.length>0)return;if(E&&A&&A.length>0){if(Nn(it!==void 0?it:A.length-1),it===0||it===void 0)break;t(26,it=A.length>it?it-1:void 0)}break;case"ArrowLeft":if(!A||!E||H.length>0)return;it===void 0?t(26,it=A.length-1):A.length>it&&it!==0&&t(26,it-=1);break;case"ArrowRight":if(!A||!E||H.length>0||it===void 0)return;it===A.length-1?t(26,it=void 0):it<A.length-1&&t(26,it+=1);break}}function Fi(N){P&&S===(document==null?void 0:document.activeElement)||(N&&m("focus",N),S==null||S.focus(),t(2,P=!0))}async function ji(N){ie||(Ae||P)&&(m("blur",N),bn(),t(2,P=!1),t(26,it=void 0),S==null||S.blur())}function vr(){if(!O){if(H.length>0)return t(6,Ae=!0);t(6,Ae=!Ae)}}function Zi(){m("clear",A),t(3,A=void 0),bn(),Fi()}br(()=>{Ae&&t(2,P=!0),P&&S&&S.focus()});function xr(N){if(N){t(4,H="");const be=Object.assign({},N);if(be.groupHeader&&!be.selectable)return;t(3,A=E?A?A.concat([be]):[be]:t(3,A=be)),setTimeout(()=>{U&&bn(),t(26,it=void 0),m("change",A),m("select",N)})}}function bn(){Ce&&t(4,H=""),t(6,Ae=!1)}let{ariaValues:Un=N=>`Option ${N}, selected.`}=e,{ariaListOpen:Po=(N,be)=>`You are currently focused on option ${N}. There are ${be} results available.`}=e,{ariaFocused:Mr=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function pl(N){let be;return N&&A.length>0?be=A.map(Qe=>Qe[X]).join(", "):be=A[X],Un(be)}function Ro(){if(!u||u.length===0)return"";let N=u[Ue];if(Ae&&N){let be=u?u.length:0;return Po(N[X],be)}else return Mr()}let hn=null,ms;function $i(){clearTimeout(ms),ms=setTimeout(()=>{ie=!1},100)}function No(N){!Ae&&!P&&w&&!w.contains(N.target)&&!(hn!=null&&hn.contains(N.target))&&ji()}Ki(()=>{hn==null||hn.remove()});let ie=!1;function Ge(N){!N||N.selectable===!1||xr(N)}function kt(N){ie||t(7,Ue=N)}function At(N){const{item:be,i:Qe}=N;if((be==null?void 0:be.selectable)!==!1){if(A&&!E&&A[J]===be[J])return bn();Pj(be)&&(t(7,Ue=Qe),Ge(be))}}function It(N){if(u.filter(Et=>!Object.hasOwn(Et,"selectable")||Et.selectable===!0).length===0)return t(7,Ue=0);N>0&&Ue===u.length-1?t(7,Ue=0):N<0&&Ue===0?t(7,Ue=u.length-1):t(7,Ue=Ue+N);const Qe=u[Ue];if(Qe&&Qe.selectable===!1){(N===1||N===-1)&&It(N);return}}function ln(N,be,Qe){if(!E)return be&&be[Qe]===N[Qe]}const gi=Bo,Io=Bo;function Bo(N){return{update(be){be.scroll&&($i(),N.scrollIntoView({behavior:"auto",block:"nearest"}))}}}function Xr(){const{width:N}=w.getBoundingClientRect();t(23,hn.style.width=me?N+"px":"auto",hn)}let Lo={strategy:"absolute",placement:"bottom-start",middleware:[qF(Ut),UF(),WF()],autoUpdate:!1};const[zu,ca,zi]=KF(Lo);let Yr=!0;function gs(N,be){if(!N||!be)return t(28,Yr=!0);setTimeout(()=>{t(28,Yr=!1)},0)}function Ar(N){Gf.call(this,n,N)}function wn(N){Gf.call(this,n,N)}function bs(N){Gf.call(this,n,N)}function Vu(N){Gf.call(this,n,N)}const Fo=N=>kt(N),Hu=N=>kt(N),qu=(N,be)=>At({item:N,i:be});function ml(N){ft[N?"unshift":"push"](()=>{hn=N,t(23,hn)})}const Wu=N=>Nn(N),Uu=N=>I?Nn(N):{};function V(N){ft[N?"unshift":"push"](()=>{S=N,t(1,S)})}function ge(){H=this.value,t(4,H)}function Ee(N){ft[N?"unshift":"push"](()=>{w=N,t(0,w)})}return n.$$set=N=>{"justValue"in N&&t(52,g=N.justValue),"filter"in N&&t(53,b=N.filter),"getItems"in N&&t(54,y=N.getItems),"id"in N&&t(55,_=N.id),"name"in N&&t(8,M=N.name),"container"in N&&t(0,w=N.container),"input"in N&&t(1,S=N.input),"multiple"in N&&t(9,E=N.multiple),"multiFullItemClearable"in N&&t(10,I=N.multiFullItemClearable),"disabled"in N&&t(11,O=N.disabled),"focused"in N&&t(2,P=N.focused),"value"in N&&t(3,A=N.value),"filterText"in N&&t(4,H=N.filterText),"placeholder"in N&&t(56,W=N.placeholder),"placeholderAlwaysShow"in N&&t(57,q=N.placeholderAlwaysShow),"items"in N&&t(51,L=N.items),"label"in N&&t(12,X=N.label),"itemFilter"in N&&t(58,Y=N.itemFilter),"groupBy"in N&&t(59,G=N.groupBy),"groupFilter"in N&&t(60,T=N.groupFilter),"groupHeaderSelectable"in N&&t(61,B=N.groupHeaderSelectable),"itemId"in N&&t(13,J=N.itemId),"loadOptions"in N&&t(62,ne=N.loadOptions),"containerStyles"in N&&t(14,_e=N.containerStyles),"hasError"in N&&t(15,ae=N.hasError),"filterSelectedItems"in N&&t(63,Te=N.filterSelectedItems),"required"in N&&t(16,re=N.required),"closeListOnChange"in N&&t(64,U=N.closeListOnChange),"clearFilterTextOnBlur"in N&&t(65,Ce=N.clearFilterTextOnBlur),"createGroupHeaderItem"in N&&t(66,Ke=N.createGroupHeaderItem),"searchable"in N&&t(17,De=N.searchable),"inputStyles"in N&&t(18,F=N.inputStyles),"clearable"in N&&t(68,ke=N.clearable),"loading"in N&&t(5,Me=N.loading),"listOpen"in N&&t(6,Ae=N.listOpen),"debounce"in N&&t(69,ct=N.debounce),"debounceWait"in N&&t(70,Z=N.debounceWait),"hideEmptyState"in N&&t(19,Ve=N.hideEmptyState),"inputAttributes"in N&&t(71,bt=N.inputAttributes),"listAutoWidth"in N&&t(72,me=N.listAutoWidth),"showChevron"in N&&t(20,$e=N.showChevron),"listOffset"in N&&t(73,Ut=N.listOffset),"hoverItemIndex"in N&&t(7,Ue=N.hoverItemIndex),"floatingConfig"in N&&t(74,wt=N.floatingConfig),"class"in N&&t(21,_t=N.class),"ariaValues"in N&&t(75,Un=N.ariaValues),"ariaListOpen"in N&&t(76,Po=N.ariaListOpen),"ariaFocused"in N&&t(77,Mr=N.ariaFocused),"$$scope"in N&&t(82,d=N.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8|n.$$.dirty[1]&1048576&&A&&ti(),n.$$.dirty[0]&131072|n.$$.dirty[2]&512&&(bt||!De)&&Je(),n.$$.dirty[0]&512&&E&&xt(),n.$$.dirty[0]&512|n.$$.dirty[2]&262144&&Dn&&!E&&de(),n.$$.dirty[0]&520&&E&&A&&A.length>1&&ds(),n.$$.dirty[0]&8&&A&&Pn(),n.$$.dirty[0]&520|n.$$.dirty[2]&65536&&!A&&E&&Mn&&m("input",A),n.$$.dirty[0]&6&&!P&&S&&bn(),n.$$.dirty[0]&16|n.$$.dirty[2]&131072&&H!==gn&&Mt(),n.$$.dirty[0]&12824|n.$$.dirty[1]&407896064|n.$$.dirty[2]&3&&t(24,u=b({loadOptions:ne,filterText:H,items:L,multiple:E,value:A,itemId:J,groupBy:G,label:X,filterSelectedItems:Te,itemFilter:Y,convertStringItemsToObjects:w3,filterGroupedItems:Bt})),n.$$.dirty[0]&16777800&&!E&&Ae&&A&&u&&ni(),n.$$.dirty[0]&576&&Ae&&E&&t(7,Ue=0),n.$$.dirty[0]&16&&H&&t(7,Ue=0),n.$$.dirty[0]&128&&Rn(Ue),n.$$.dirty[0]&520&&t(25,i=E?A&&A.length>0:A),n.$$.dirty[0]&33554448&&t(35,r=i&&H.length>0),n.$$.dirty[0]&33556512|n.$$.dirty[2]&64&&t(34,o=i&&ke&&!O&&!Me),n.$$.dirty[0]&520|n.$$.dirty[1]&100663296&&t(33,s=q&&E||E&&(A==null?void 0:A.length)===0?W:A?"":W),n.$$.dirty[0]&520&&t(32,l=A?pl(E):""),n.$$.dirty[0]&16777412&&t(31,a=Ro()),n.$$.dirty[1]&1048576&&Yi(L),n.$$.dirty[0]&8712&&t(52,g=dl()),n.$$.dirty[0]&520|n.$$.dirty[2]&65536&&!E&&Mn&&!A&&m("input",A),n.$$.dirty[0]&16777800&&Ae&&u&&!E&&!A&&sn(),n.$$.dirty[0]&16777216&&Do(u),n.$$.dirty[0]&1|n.$$.dirty[2]&4096&&w&&(wt==null?void 0:wt.autoUpdate)===void 0&&t(81,Lo.autoUpdate=!0,Lo),n.$$.dirty[0]&1|n.$$.dirty[2]&528384&&w&&wt&&zi(Object.assign(Lo,wt)),n.$$.dirty[0]&8388608&&t(30,c=!!hn),n.$$.dirty[0]&8388672&&gs(hn,Ae),n.$$.dirty[0]&8388673&&Ae&&w&&hn&&Xr(),n.$$.dirty[0]&128&&t(29,f=Ue),n.$$.dirty[0]&70&&S&&Ae&&!P&&Fi()},[w,S,P,A,H,Me,Ae,Ue,M,E,I,O,X,J,_e,ae,re,De,F,Ve,$e,_t,Zi,hn,u,i,it,se,Yr,f,c,a,l,s,o,r,Nn,ps,Fi,ji,vr,$i,No,kt,At,ln,gi,Io,zu,ca,p,L,g,b,y,_,W,q,Y,G,T,B,ne,Te,U,Ce,Ke,K,ke,ct,Z,bt,me,Ut,wt,Un,Po,Mr,Mn,gn,Dn,Lo,d,h,Ar,wn,bs,Vu,Fo,Hu,qu,ml,Wu,Uu,V,ge,Ee]}class _l extends je{constructor(e){super(),ze(this,e,Rj,Tj,xn,{justValue:52,filter:53,getItems:54,id:55,name:8,container:0,input:1,multiple:9,multiFullItemClearable:10,disabled:11,focused:2,value:3,filterText:4,placeholder:56,placeholderAlwaysShow:57,items:51,label:12,itemFilter:58,groupBy:59,groupFilter:60,groupHeaderSelectable:61,itemId:13,loadOptions:62,containerStyles:14,hasError:15,filterSelectedItems:63,required:16,closeListOnChange:64,clearFilterTextOnBlur:65,createGroupHeaderItem:66,getFilteredItems:67,searchable:17,inputStyles:18,clearable:68,loading:5,listOpen:6,debounce:69,debounceWait:70,hideEmptyState:19,inputAttributes:71,listAutoWidth:72,showChevron:20,listOffset:73,hoverItemIndex:7,floatingConfig:74,class:21,handleClear:22,ariaValues:75,ariaListOpen:76,ariaFocused:77},null,[-1,-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[67]}get handleClear(){return this.$$.ctx[22]}}function Nj(n){let e,t,i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y,_,M,w,S,E,I,O,P,A,H,W,q,L,X,Y,G,T;function B(K){n[16](K)}let J={class:"jse-filter-path",showChevron:!0,items:n[7]};n[0]!==void 0&&(J.value=n[0]),l=new _l({props:J}),ft.push(()=>Tr(l,"value",B));function ne(K){n[17](K)}let _e={class:"jse-filter-relation",showChevron:!0,items:n[8]};n[1]!==void 0&&(_e.value=n[1]),c=new _l({props:_e}),ft.push(()=>Tr(c,"value",ne));function ae(K){n[19](K)}let Te={class:"jse-sort-path",showChevron:!0,items:n[7]};n[3]!==void 0&&(Te.value=n[3]),M=new _l({props:Te}),ft.push(()=>Tr(M,"value",ae));function re(K){n[20](K)}let U={class:"jse-sort-direction",showChevron:!0,items:n[9]};n[4]!==void 0&&(U.value=n[4]),E=new _l({props:U}),ft.push(()=>Tr(E,"value",re));function Ce(K){n[21](K)}let Ke={class:"jse-projection-paths",multiple:!0,showChevron:!0,items:n[6]};return n[5]!==void 0&&(Ke.value=n[5]),L=new _l({props:Ke}),ft.push(()=>Tr(L,"value",Ce)),{c(){e=D("table"),t=D("tr"),i=D("th"),i.textContent="Filter",r=Q(),o=D("td"),s=D("div"),$(l.$$.fragment),u=Q(),$(c.$$.fragment),h=Q(),d=D("input"),p=Q(),m=D("tr"),g=D("th"),g.textContent="Sort",b=Q(),y=D("td"),_=D("div"),$(M.$$.fragment),S=Q(),$(E.$$.fragment),O=Q(),P=D("tr"),A=D("th"),A.textContent="Pick",H=Q(),W=D("td"),q=D("div"),$(L.$$.fragment),k(i,"class","svelte-o6raqd"),k(d,"class","jse-filter-value svelte-o6raqd"),k(s,"class","jse-horizontal svelte-o6raqd"),k(g,"class","svelte-o6raqd"),k(_,"class","jse-horizontal svelte-o6raqd"),k(A,"class","svelte-o6raqd"),k(q,"class","jse-horizontal svelte-o6raqd"),k(e,"class","jse-transform-wizard svelte-o6raqd")},m(K,De){j(K,e,De),x(e,t),x(t,i),x(t,r),x(t,o),x(o,s),ee(l,s,null),x(s,u),ee(c,s,null),x(s,h),x(s,d),Js(d,n[2]),x(e,p),x(e,m),x(m,g),x(m,b),x(m,y),x(y,_),ee(M,_,null),x(_,S),ee(E,_,null),x(e,O),x(e,P),x(P,A),x(P,H),x(P,W),x(W,q),ee(L,q,null),Y=!0,G||(T=ue(d,"input",n[18]),G=!0)},p(K,[De]){const F={};De&128&&(F.items=K[7]),!a&&De&1&&(a=!0,F.value=K[0],Dr(()=>a=!1)),l.$set(F);const ke={};!f&&De&2&&(f=!0,ke.value=K[1],Dr(()=>f=!1)),c.$set(ke),De&4&&d.value!==K[2]&&Js(d,K[2]);const Me={};De&128&&(Me.items=K[7]),!w&&De&8&&(w=!0,Me.value=K[3],Dr(()=>w=!1)),M.$set(Me);const Ae={};!I&&De&16&&(I=!0,Ae.value=K[4],Dr(()=>I=!1)),E.$set(Ae);const Le={};De&64&&(Le.items=K[6]),!X&&De&32&&(X=!0,Le.value=K[5],Dr(()=>X=!1)),L.$set(Le)},i(K){Y||(C(l.$$.fragment,K),C(c.$$.fragment,K),C(M.$$.fragment,K),C(E.$$.fragment,K),C(L.$$.fragment,K),Y=!0)},o(K){v(l.$$.fragment,K),v(c.$$.fragment,K),v(M.$$.fragment,K),v(E.$$.fragment,K),v(L.$$.fragment,K),Y=!1},d(K){K&&z(e),te(l),te(c),te(M),te(E),te(L),G=!1,T()}}}function Ij(n,e,t){var X,Y,G,T,B;let i,r,o,s,l,a;const u=Wn("jsoneditor:TransformWizard");let{json:c}=e,{queryOptions:f={}}=e,{onChange:h}=e;const d=["==","!=","<","<=",">",">="].map(J=>({value:J,label:J})),p=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let m=(X=f==null?void 0:f.filter)!=null&&X.path?rc(f.filter.path):null,g=(Y=f==null?void 0:f.filter)!=null&&Y.relation?d.find(J=>{var ne;return J.value===((ne=f.filter)==null?void 0:ne.relation)}):null,b=((G=f==null?void 0:f.filter)==null?void 0:G.value)||"",y=(T=f==null?void 0:f.sort)!=null&&T.path?rc(f.sort.path):null,_=(B=f==null?void 0:f.sort)!=null&&B.direction?p.find(J=>{var ne;return J.value===((ne=f.sort)==null?void 0:ne.direction)}):null;function M(J){var ne;st((ne=f==null?void 0:f.filter)==null?void 0:ne.path,J)||(u("changeFilterPath",J),t(10,f=Or(f,["filter","path"],J,!0)),h(f))}function w(J){var ne;st((ne=f==null?void 0:f.filter)==null?void 0:ne.relation,J)||(u("changeFilterRelation",J),t(10,f=Or(f,["filter","relation"],J,!0)),h(f))}function S(J){var ne;st((ne=f==null?void 0:f.filter)==null?void 0:ne.value,J)||(u("changeFilterValue",J),t(10,f=Or(f,["filter","value"],J,!0)),h(f))}function E(J){var ne;st((ne=f==null?void 0:f.sort)==null?void 0:ne.path,J)||(u("changeSortPath",J),t(10,f=Or(f,["sort","path"],J,!0)),h(f))}function I(J){var ne;st((ne=f==null?void 0:f.sort)==null?void 0:ne.direction,J)||(u("changeSortDirection",J),t(10,f=Or(f,["sort","direction"],J,!0)),h(f))}function O(J){var ne;st((ne=f==null?void 0:f.projection)==null?void 0:ne.paths,J)||(u("changeProjectionPaths",J),t(10,f=Or(f,["projection","paths"],J,!0)),h(f))}function P(J){m=J,t(0,m)}function A(J){g=J,t(1,g)}function H(){b=this.value,t(2,b)}function W(J){y=J,t(3,y)}function q(J){_=J,t(4,_)}function L(J){a=J,t(5,a),t(10,f),t(6,l),t(13,o),t(15,i),t(11,c)}return n.$$set=J=>{"json"in J&&t(11,c=J.json),"queryOptions"in J&&t(10,f=J.queryOptions),"onChange"in J&&t(12,h=J.onChange)},n.$$.update=()=>{var J;n.$$.dirty&2048&&t(15,i=Array.isArray(c)),n.$$.dirty&34816&&t(14,r=i?g1(c):[]),n.$$.dirty&34816&&t(13,o=i?g1(c,!0):[]),n.$$.dirty&16384&&t(7,s=r.map(rc)),n.$$.dirty&8192&&t(6,l=o?o.map(rc):[]),n.$$.dirty&1088&&t(5,a=(J=f==null?void 0:f.projection)!=null&&J.paths&&l?f.projection.paths.map(ne=>l.find(_e=>st(_e.value,ne))).filter(ne=>!!ne):null),n.$$.dirty&1&&M(m==null?void 0:m.value),n.$$.dirty&2&&w(g==null?void 0:g.value),n.$$.dirty&4&&S(b),n.$$.dirty&8&&E(y==null?void 0:y.value),n.$$.dirty&16&&I(_==null?void 0:_.value),n.$$.dirty&32&&O(a?a.map(ne=>ne.value):void 0)},[m,g,b,y,_,a,l,s,d,p,f,c,h,o,r,i,P,A,H,W,q,L]}class Bj extends je{constructor(e){super(),ze(this,e,Ij,Nj,Ze,{json:11,queryOptions:10,onChange:12})}}const Lj=Bj;function C3(n,e,t){const i=n.slice();return i[5]=e[t],i}function Fj(n){let e,t;return e=new ht({props:{data:Bc}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p:he,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function jj(n){let e,t;return e=new ht({props:{data:Ic}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p:he,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function _3(n){let e,t,i,r,o=n[5].name+"",s,l,a,u,c,f;const h=[jj,Fj],d=[];function p(g,b){return g[5].id===g[0]?0:1}t=p(n),i=d[t]=h[t](n);function m(){return n[4](n[5])}return{c(){e=D("button"),i.c(),r=Q(),s=we(o),l=Q(),k(e,"type","button"),k(e,"class","jse-query-language svelte-ui6yg4"),k(e,"title",a=`Select ${n[5].name} as query language`),le(e,"selected",n[5].id===n[0])},m(g,b){j(g,e,b),d[t].m(e,null),x(e,r),x(e,s),x(e,l),u=!0,c||(f=ue(e,"click",m),c=!0)},p(g,b){n=g;let y=t;t=p(n),t===y?d[t].p(n,b):(ce(),v(d[y],1,1,()=>{d[y]=null}),fe(),i=d[t],i?i.p(n,b):(i=d[t]=h[t](n),i.c()),C(i,1),i.m(e,r)),(!u||b&2)&&o!==(o=n[5].name+"")&&We(s,o),(!u||b&2&&a!==(a=`Select ${n[5].name} as query language`))&&k(e,"title",a),(!u||b&3)&&le(e,"selected",n[5].id===n[0])},i(g){u||(C(i),u=!0)},o(g){v(i),u=!1},d(g){g&&z(e),d[t].d(),c=!1,f()}}}function zj(n){let e,t,i,r=n[1],o=[];for(let l=0;l<r.length;l+=1)o[l]=_3(C3(n,r,l));const s=l=>v(o[l],1,1,()=>{o[l]=null});return{c(){e=D("div"),t=D("div");for(let l=0;l<o.length;l+=1)o[l].c();k(t,"class","jse-select-query-language-container svelte-ui6yg4"),k(e,"class","jse-select-query-language svelte-ui6yg4")},m(l,a){j(l,e,a),x(e,t);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null);i=!0},p(l,[a]){if(a&7){r=l[1];let u;for(u=0;u<r.length;u+=1){const c=C3(l,r,u);o[u]?(o[u].p(c,a),C(o[u],1)):(o[u]=_3(c),o[u].c(),C(o[u],1),o[u].m(t,null))}for(ce(),u=r.length;u<o.length;u+=1)s(u);fe()}},i(l){if(!i){for(let a=0;a<r.length;a+=1)C(o[a]);i=!0}},o(l){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)v(o[a]);i=!1},d(l){l&&z(e),mn(o,l)}}}function Vj(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:r}=e,{onChangeQueryLanguage:o}=e;function s(a){t(0,r=a),o(a)}const l=a=>s(a.id);return n.$$set=a=>{"queryLanguages"in a&&t(1,i=a.queryLanguages),"queryLanguageId"in a&&t(0,r=a.queryLanguageId),"onChangeQueryLanguage"in a&&t(3,o=a.onChangeQueryLanguage)},[r,i,s,o,l]}class Hj extends je{constructor(e){super(),ze(this,e,Vj,zj,xn,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}const qj=Hj;function S3(n){let e,t,i,r,o;return t=new ht({props:{data:iF}}),{c(){e=D("button"),$(t.$$.fragment),k(e,"type","button"),k(e,"class","jse-config svelte-17t8gc5"),k(e,"title","Select a query language")},m(s,l){j(s,e,l),ee(t,e,null),n[6](e),i=!0,r||(o=ue(e,"click",n[3]),r=!0)},p:he,i(s){i||(C(t.$$.fragment,s),i=!0)},o(s){v(t.$$.fragment,s),i=!1},d(s){s&&z(e),te(t),n[6](null),r=!1,o()}}}function Wj(n){let e,t,i,r,o,s,l,a,u,c=n[0].length>1&&S3(n);return s=new ht({props:{data:uu}}),{c(){e=D("div"),t=D("div"),t.textContent="Transform",i=Q(),c&&c.c(),r=Q(),o=D("button"),$(s.$$.fragment),k(t,"class","jse-title svelte-17t8gc5"),k(o,"type","button"),k(o,"class","jse-close svelte-17t8gc5"),k(e,"class","jse-header svelte-17t8gc5")},m(f,h){j(f,e,h),x(e,t),x(e,i),c&&c.m(e,null),x(e,r),x(e,o),ee(s,o,null),l=!0,a||(u=ue(o,"click",n[7]),a=!0)},p(f,[h]){f[0].length>1?c?(c.p(f,h),h&1&&C(c,1)):(c=S3(f),c.c(),C(c,1),c.m(e,r)):c&&(ce(),v(c,1,1,()=>{c=null}),fe())},i(f){l||(C(c),C(s.$$.fragment,f),l=!0)},o(f){v(c),v(s.$$.fragment,f),l=!1},d(f){f&&z(e),c&&c.d(),te(s),a=!1,u()}}}function Uj(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:r}=e,{onChangeQueryLanguage:o}=e,s,l;const{close:a}=Vn("simple-modal"),{openAbsolutePopup:u,closeAbsolutePopup:c}=Vn("absolute-popup");function f(){l=u(qj,{queryLanguages:i,queryLanguageId:r,onChangeQueryLanguage:m=>{c(l),o(m)}},{offsetTop:-2,offsetLeft:0,anchor:s,closeOnOuterClick:!0})}function h(p){ft[p?"unshift":"push"](()=>{s=p,t(1,s)})}const d=()=>a();return n.$$set=p=>{"queryLanguages"in p&&t(0,i=p.queryLanguages),"queryLanguageId"in p&&t(4,r=p.queryLanguageId),"onChangeQueryLanguage"in p&&t(5,o=p.onChangeQueryLanguage)},[i,s,a,f,r,o,h,d]}class Jj extends je{constructor(e){super(),ze(this,e,Uj,Wj,Ze,{queryLanguages:0,queryLanguageId:4,onChangeQueryLanguage:5})}}const Kj=Jj,G0=Wn("jsoneditor:AutoScrollHandler");function Gj(n){G0("createAutoScrollHandler",n);let e,t;function i(u){return u<20?HO:u<50?qO:WO}function r(){if(n){const u=(e||0)*(yy/1e3);n.scrollTop+=u}}function o(u){(!t||u!==e)&&(s(),G0("startAutoScroll",u),e=u,t=setInterval(r,yy))}function s(){t&&(G0("stopAutoScroll"),clearInterval(t),t=void 0,e=void 0)}function l(u){if(n){const c=u.clientY,{top:f,bottom:h}=n.getBoundingClientRect();if(c<f){const d=i(f-c);o(-d)}else if(c>h){const d=i(c-h);o(d)}else s()}}function a(){s()}return{onDrag:l,onDragEnd:a}}const Qj=(n,e,t,i)=>(n/=i/2,n<1?t/2*n*n+e:(n--,-t/2*(n*(n-2)-1)+e)),k8=()=>{let n,e,t,i,r,o,s,l,a,u,c,f,h,d;function p(){return n.scrollTop}function m(M){const w=M.getBoundingClientRect().top,S=n.getBoundingClientRect?n.getBoundingClientRect().top:0;return w-S+t}function g(M){n.scrollTo?n.scrollTo(n.scrollLeft,M):n.scrollTop=M}function b(M){u||(u=M),c=M-u,f=o(c,t,l,a),g(f),d=!0,c<a?requestAnimationFrame(b):y()}function y(){g(t+l),e&&s&&(e.setAttribute("tabindex","-1"),e.focus()),typeof h=="function"&&h(),u=0,d=!1}function _(M,w={}){switch(a=1e3,r=w.offset||0,h=w.callback,o=w.easing||Qj,s=w.a11y||!1,typeof w.container){case"object":n=w.container;break;case"string":n=document.querySelector(w.container);break;default:n=window.document.documentElement}switch(t=p(),typeof M){case"number":e=void 0,s=!1,i=t+M;break;case"object":e=M,i=m(e);break;case"string":e=document.querySelector(M),i=m(e);break}switch(l=i-t+r,typeof w.duration){case"number":a=w.duration;break;case"function":a=w.duration(l);break}d?u=0:requestAnimationFrame(b)}return _},Xj=1e3,sh=Wn("jsoneditor:History");function w8(n={}){const e=n.maxItems||Xj;let t=[],i=0;function r(){return i<t.length}function o(){return i>0}function s(){return{canUndo:r(),canRedo:o(),length:t.length}}function l(){n.onChange&&n.onChange(s())}function a(h){sh("add",h),t=[h].concat(t.slice(i)).slice(0,e),i=0,l()}function u(){sh("clear"),t=[],i=0,l()}function c(){if(r()){const h=t[i];return i+=1,sh("undo",h),l(),h}}function f(){if(o())return i-=1,sh("redo",t[i]),l(),t[i]}return{add:a,clear:u,getState:s,undo:c,redo:f}}function Pa(n,e){const t=Date.now(),i=n(),r=Date.now();return e(r-t),i}const Ca=Wn("validation");function Yj(n){const e={};return n.forEach(t=>{e[xe(t.path)]=t}),n.forEach(t=>{let i=t.path;for(;i.length>0;){i=at(i);const r=xe(i);r in e||(e[r]={isChildError:!0,path:i,message:"Contains invalid data",severity:$o.warning})}}),e}function C8(n,e,t,i){if(Ca("validateJSON"),!e)return[];if(t!==i){const r=t.stringify(n),o=r!==void 0?i.parse(r):void 0;return e(o)}else return e(n)}function Zj(n,e,t,i){if(Ca("validateText"),n.length>UO)return{validationErrors:[{path:[],message:"Validation turned off: the document is too large",severity:$o.info}]};if(n.length===0)return null;try{const r=Pa(()=>t.parse(n),l=>Ca(`validate: parsed json in ${l} ms`));if(!e)return null;const o=t===i?r:Pa(()=>i.parse(n),l=>Ca(`validate: parsed json with the validationParser in ${l} ms`)),s=Pa(()=>e(o),l=>Ca(`validate: validated json in ${l} ms`));return yt(s)?null:{validationErrors:s}}catch(r){const o=Pa(()=>$j(n,t),l=>Ca(`validate: checked whether repairable in ${l} ms`));return{parseError:ou(n,r.message||r.toString()),isRepairable:o}}}function $j(n,e){if(n.length>JO)return!1;try{return e.parse(po(n)),!0}catch{return!1}}const lh=Wn("jsoneditor:FocusTracker");function L2({onMount:n,onDestroy:e,getWindow:t,hasFocus:i,onFocus:r,onBlur:o}){let s,l=!1;function a(){const c=i();c&&(clearTimeout(s),l||(lh("focus"),r(),l=c))}function u(){l&&(clearTimeout(s),s=setTimeout(()=>{i()||(lh("blur"),l=!1,o())}))}n(()=>{lh("mount FocusTracker");const c=t();c&&(c.addEventListener("focusin",a,!0),c.addEventListener("focusout",u,!0))}),e(()=>{lh("destroy FocusTracker");const c=t();c&&(c.removeEventListener("focusin",a,!0),c.removeEventListener("focusout",u,!0))})}function v3(n,e,t){const i=n.slice();return i[9]=e[t],i}function x3(n){let e,t;return e=new ht({props:{data:n[1]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&2&&(o.data=i[1]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function M3(n){let e,t;return e=new ht({props:{data:n[9].icon}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&8&&(o.data=i[9].icon),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function A3(n){let e,t,i=n[9].text+"",r,o,s,l,a,u,c,f=n[9].icon&&M3(n);function h(){return n[7](n[9])}function d(){return n[8](n[9])}return{c(){e=D("button"),f&&f.c(),t=Q(),r=we(i),o=Q(),k(e,"type","button"),k(e,"class","jse-button jse-action jse-primary svelte-5juebx"),k(e,"title",s=n[9].title),e.disabled=l=n[9].disabled},m(p,m){j(p,e,m),f&&f.m(e,null),x(e,t),x(e,r),x(e,o),a=!0,u||(c=[ue(e,"click",h),ue(e,"mousedown",d)],u=!0)},p(p,m){n=p,n[9].icon?f?(f.p(n,m),m&8&&C(f,1)):(f=M3(n),f.c(),C(f,1),f.m(e,t)):f&&(ce(),v(f,1,1,()=>{f=null}),fe()),(!a||m&8)&&i!==(i=n[9].text+"")&&We(r,i),(!a||m&8&&s!==(s=n[9].title))&&k(e,"title",s),(!a||m&8&&l!==(l=n[9].disabled))&&(e.disabled=l)},i(p){a||(C(f),a=!0)},o(p){v(f),a=!1},d(p){p&&z(e),f&&f.d(),u=!1,fn(c)}}}function ez(n){let e,t,i,r,o,s,l,a,u,c,f,h=n[1]&&x3(n),d=n[3],p=[];for(let g=0;g<d.length;g+=1)p[g]=A3(v3(n,d,g));const m=g=>v(p[g],1,1,()=>{p[g]=null});return{c(){e=D("div"),t=D("div"),i=D("div"),h&&h.c(),r=Q(),o=we(n[2]),s=Q(),l=D("div");for(let g=0;g<p.length;g+=1)p[g].c();k(i,"class","jse-text-centered"),k(t,"role","button"),k(t,"tabindex","-1"),k(t,"class","jse-text svelte-5juebx"),le(t,"jse-clickable",!!n[4]),k(l,"class","jse-actions svelte-5juebx"),k(e,"class",a="jse-message jse-"+n[0]+" svelte-5juebx")},m(g,b){j(g,e,b),x(e,t),x(t,i),h&&h.m(i,null),x(i,r),x(i,o),x(e,s),x(e,l);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(l,null);u=!0,c||(f=ue(t,"click",n[5]),c=!0)},p(g,[b]){if(g[1]?h?(h.p(g,b),b&2&&C(h,1)):(h=x3(g),h.c(),C(h,1),h.m(i,r)):h&&(ce(),v(h,1,1,()=>{h=null}),fe()),(!u||b&4)&&We(o,g[2]),(!u||b&16)&&le(t,"jse-clickable",!!g[4]),b&8){d=g[3];let y;for(y=0;y<d.length;y+=1){const _=v3(g,d,y);p[y]?(p[y].p(_,b),C(p[y],1)):(p[y]=A3(_),p[y].c(),C(p[y],1),p[y].m(l,null))}for(ce(),y=d.length;y<p.length;y+=1)m(y);fe()}(!u||b&1&&a!==(a="jse-message jse-"+g[0]+" svelte-5juebx"))&&k(e,"class",a)},i(g){if(!u){C(h);for(let b=0;b<d.length;b+=1)C(p[b]);u=!0}},o(g){v(h),p=p.filter(Boolean);for(let b=0;b<p.length;b+=1)v(p[b]);u=!1},d(g){g&&z(e),h&&h.d(),mn(p,g),c=!1,f()}}}function tz(n,e,t){let{type:i="success"}=e,{icon:r=void 0}=e,{message:o=void 0}=e,{actions:s=[]}=e,{onClick:l=void 0}=e,{onClose:a=void 0}=e;a&&Ki(a);function u(){l&&l()}const c=h=>{h.onClick&&h.onClick()},f=h=>{h.onMouseDown&&h.onMouseDown()};return n.$$set=h=>{"type"in h&&t(0,i=h.type),"icon"in h&&t(1,r=h.icon),"message"in h&&t(2,o=h.message),"actions"in h&&t(3,s=h.actions),"onClick"in h&&t(4,l=h.onClick),"onClose"in h&&t(6,a=h.onClose)},[i,r,o,s,l,u,a,c,f]}class nz extends je{constructor(e){super(),ze(this,e,tz,ez,Ze,{type:0,icon:1,message:2,actions:3,onClick:4,onClose:6})}}const Jr=nz;function E3(n,e,t){const i=n.slice();return i[7]=e[t],i[9]=t,i}function O3(n){let e,t,i,r;const o=[rz,iz],s=[];function l(a,u){return a[2]||a[3]===1?0:1}return t=l(n),i=s[t]=o[t](n),{c(){e=D("div"),i.c(),k(e,"class","jse-validation-errors-overview svelte-zpbhfa")},m(a,u){j(a,e,u),s[t].m(e,null),r=!0},p(a,u){let c=t;t=l(a),t===c?s[t].p(a,u):(ce(),v(s[c],1,1,()=>{s[c]=null}),fe(),i=s[t],i?i.p(a,u):(i=s[t]=o[t](a),i.c()),C(i,1),i.m(e,null))},i(a){r||(C(i),r=!0)},o(a){v(i),r=!1},d(a){a&&z(e),s[t].d()}}}function iz(n){let e,t,i,r,o,s,l,a,u,c,f,h,d,p;return o=new ht({props:{data:oa}}),f=new ht({props:{data:o8}}),{c(){e=D("table"),t=D("tbody"),i=D("tr"),r=D("td"),$(o.$$.fragment),s=Q(),l=D("td"),a=we(n[3]),u=we(` validation errors
              `),c=D("div"),$(f.$$.fragment),k(r,"class","jse-validation-error-icon svelte-zpbhfa"),k(c,"class","jse-validation-errors-expand svelte-zpbhfa"),k(l,"class","jse-validation-error-count svelte-zpbhfa"),k(i,"class","jse-validation-error svelte-zpbhfa"),k(e,"class","jse-validation-errors-overview-collapsed svelte-zpbhfa")},m(m,g){j(m,e,g),x(e,t),x(t,i),x(i,r),ee(o,r,null),x(i,s),x(i,l),x(l,a),x(l,u),x(l,c),ee(f,c,null),h=!0,d||(p=ue(i,"click",n[5]),d=!0)},p(m,g){(!h||g&8)&&We(a,m[3])},i(m){h||(C(o.$$.fragment,m),C(f.$$.fragment,m),h=!0)},o(m){v(o.$$.fragment,m),v(f.$$.fragment,m),h=!1},d(m){m&&z(e),te(o),te(f),d=!1,p()}}}function rz(n){let e,t,i,r,o=bd(n[0],Ea),s=[];for(let u=0;u<o.length;u+=1)s[u]=D3(E3(n,o,u));const l=u=>v(s[u],1,1,()=>{s[u]=null});let a=n[3]>Ea&&P3(n);return{c(){e=D("table"),t=D("tbody");for(let u=0;u<s.length;u+=1)s[u].c();i=Q(),a&&a.c(),k(e,"class","jse-validation-errors-overview-expanded svelte-zpbhfa")},m(u,c){j(u,e,c),x(e,t);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(t,null);x(t,i),a&&a.m(t,null),r=!0},p(u,c){if(c&19){o=bd(u[0],Ea);let f;for(f=0;f<o.length;f+=1){const h=E3(u,o,f);s[f]?(s[f].p(h,c),C(s[f],1)):(s[f]=D3(h),s[f].c(),C(s[f],1),s[f].m(t,i))}for(ce(),f=o.length;f<s.length;f+=1)l(f);fe()}u[3]>Ea?a?a.p(u,c):(a=P3(u),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i(u){if(!r){for(let c=0;c<o.length;c+=1)C(s[c]);r=!0}},o(u){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)v(s[c]);r=!1},d(u){u&&z(e),mn(s,u),a&&a.d()}}}function T3(n){let e,t,i,r,o;return t=new ht({props:{data:sF}}),{c(){e=D("button"),$(t.$$.fragment),k(e,"type","button"),k(e,"class","jse-validation-errors-collapse svelte-zpbhfa"),k(e,"title","Collapse validation errors")},m(s,l){j(s,e,l),ee(t,e,null),i=!0,r||(o=ue(e,"click",Lr(n[4])),r=!0)},p:he,i(s){i||(C(t.$$.fragment,s),i=!0)},o(s){v(t.$$.fragment,s),i=!1},d(s){s&&z(e),te(t),r=!1,o()}}}function D3(n){let e,t,i,r,o,s=Ri(n[7].path)+"",l,a,u,c=n[7].message+"",f,h,d,p,m,g;i=new ht({props:{data:oa}});let b=n[9]===0&&n[0].length>1&&T3(n);function y(){return n[6](n[7])}return{c(){e=D("tr"),t=D("td"),$(i.$$.fragment),r=Q(),o=D("td"),l=we(s),a=Q(),u=D("td"),f=we(c),h=Q(),d=D("td"),b&&b.c(),k(t,"class","jse-validation-error-icon svelte-zpbhfa"),k(o,"class","jse-validation-error-path svelte-zpbhfa"),k(u,"class","jse-validation-error-message svelte-zpbhfa"),k(d,"class","jse-validation-error-action svelte-zpbhfa"),k(e,"class","jse-validation-error svelte-zpbhfa")},m(_,M){j(_,e,M),x(e,t),ee(i,t,null),x(e,r),x(e,o),x(o,l),x(e,a),x(e,u),x(u,f),x(e,h),x(e,d),b&&b.m(d,null),p=!0,m||(g=ue(e,"click",y),m=!0)},p(_,M){n=_,(!p||M&1)&&s!==(s=Ri(n[7].path)+"")&&We(l,s),(!p||M&1)&&c!==(c=n[7].message+"")&&We(f,c),n[9]===0&&n[0].length>1?b?(b.p(n,M),M&1&&C(b,1)):(b=T3(n),b.c(),C(b,1),b.m(d,null)):b&&(ce(),v(b,1,1,()=>{b=null}),fe())},i(_){p||(C(i.$$.fragment,_),C(b),p=!0)},o(_){v(i.$$.fragment,_),v(b),p=!1},d(_){_&&z(e),te(i),b&&b.d(),m=!1,g()}}}function P3(n){let e,t,i,r,o,s,l,a=n[3]-Ea+"",u,c,f,h;return{c(){e=D("tr"),t=D("td"),i=Q(),r=D("td"),o=Q(),s=D("td"),l=we("(and "),u=we(a),c=we(" more errors)"),f=Q(),h=D("td"),k(t,"class","svelte-zpbhfa"),k(r,"class","svelte-zpbhfa"),k(s,"class","svelte-zpbhfa"),k(h,"class","svelte-zpbhfa"),k(e,"class","jse-validation-error svelte-zpbhfa")},m(d,p){j(d,e,p),x(e,t),x(e,i),x(e,r),x(e,o),x(e,s),x(s,l),x(s,u),x(s,c),x(e,f),x(e,h)},p(d,p){p&8&&a!==(a=d[3]-Ea+"")&&We(u,a)},d(d){d&&z(e)}}}function oz(n){let e=!yt(n[0]),t,i,r=e&&O3(n);return{c(){r&&r.c(),t=ut()},m(o,s){r&&r.m(o,s),j(o,t,s),i=!0},p(o,[s]){s&1&&(e=!yt(o[0])),e?r?(r.p(o,s),s&1&&C(r,1)):(r=O3(o),r.c(),C(r,1),r.m(t.parentNode,t)):r&&(ce(),v(r,1,1,()=>{r=null}),fe())},i(o){i||(C(r),i=!0)},o(o){v(r),i=!1},d(o){r&&r.d(o),o&&z(t)}}}function sz(n,e,t){let i,{validationErrors:r}=e,{selectError:o}=e,s=!0;function l(){t(2,s=!1)}function a(){t(2,s=!0)}const u=c=>{setTimeout(()=>o(c))};return n.$$set=c=>{"validationErrors"in c&&t(0,r=c.validationErrors),"selectError"in c&&t(1,o=c.selectError)},n.$$.update=()=>{n.$$.dirty&1&&t(3,i=r.length)},[r,o,s,i,l,a,u]}class lz extends je{constructor(e){super(),ze(this,e,sz,oz,Ze,{validationErrors:0,selectError:1})}}const F2=lz,az=typeof navigator<"u"?navigator.platform.toUpperCase().indexOf("MAC")>=0:!1;function uz(n){let e,t,i,r,o,s,l,a,u;return s=new ht({props:{data:uu}}),{c(){e=D("div"),t=D("div"),i=we(n[0]),r=Q(),o=D("button"),$(s.$$.fragment),k(t,"class","jse-title svelte-17t8gc5"),k(o,"type","button"),k(o,"class","jse-close svelte-17t8gc5"),k(e,"class","jse-header svelte-17t8gc5")},m(c,f){j(c,e,f),x(e,t),x(t,i),x(e,r),x(e,o),ee(s,o,null),l=!0,a||(u=ue(o,"click",n[3]),a=!0)},p(c,[f]){(!l||f&1)&&We(i,c[0])},i(c){l||(C(s.$$.fragment,c),l=!0)},o(c){v(s.$$.fragment,c),l=!1},d(c){c&&z(e),te(s),a=!1,u()}}}function cz(n,e,t){let{title:i="Modal"}=e,{onClose:r=void 0}=e;const{close:o}=Vn("simple-modal"),s=()=>{r?r():o()};return n.$$set=l=>{"title"in l&&t(0,i=l.title),"onClose"in l&&t(1,r=l.onClose)},[i,r,o,s]}class fz extends je{constructor(e){super(),ze(this,e,cz,uz,Ze,{title:0,onClose:1})}}const j2=fz;function hz(n){let e,t,i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y,_,M,w,S,E,I;return t=new j2({props:{title:"Copying and pasting"}}),{c(){e=D("div"),$(t.$$.fragment),i=Q(),r=D("div"),o=D("div"),o.textContent="These actions are unavailable via the menu. Please use:",s=Q(),l=D("div"),a=D("div"),u=D("div"),u.textContent=`${n[1]}+C`,c=we(`
        for copy`),f=Q(),h=D("div"),d=D("div"),d.textContent=`${n[1]}+X`,p=we(`
        for cut`),m=Q(),g=D("div"),b=D("div"),b.textContent=`${n[1]}+V`,y=we(`
        for paste`),_=Q(),M=D("div"),w=D("button"),w.textContent="Close",k(u,"class","jse-key svelte-19rmccg"),k(a,"class","jse-shortcut"),k(d,"class","jse-key svelte-19rmccg"),k(h,"class","jse-shortcut"),k(b,"class","jse-key svelte-19rmccg"),k(g,"class","jse-shortcut"),k(l,"class","jse-shortcuts svelte-19rmccg"),k(w,"type","button"),k(w,"class","jse-primary svelte-19rmccg"),k(M,"class","jse-actions svelte-19rmccg"),k(r,"class","jse-modal-contents svelte-19rmccg"),k(e,"class","jse-modal jse-copy-paste svelte-19rmccg")},m(O,P){j(O,e,P),ee(t,e,null),x(e,i),x(e,r),x(r,o),x(r,s),x(r,l),x(l,a),x(a,u),x(a,c),x(l,f),x(l,h),x(h,d),x(h,p),x(l,m),x(l,g),x(g,b),x(g,y),x(r,_),x(r,M),x(M,w),S=!0,E||(I=ue(w,"click",n[2]),E=!0)},p:he,i(O){S||(C(t.$$.fragment,O),S=!0)},o(O){v(t.$$.fragment,O),S=!1},d(O){O&&z(e),te(t),E=!1,I()}}}function dz(n){const{close:e}=Vn("simple-modal");return[e,az?"":"Ctrl",()=>e()]}class pz extends je{constructor(e){super(),ze(this,e,dz,hz,Ze,{})}}const _8=pz;function S8(n){return n?n.type==="space"||n.space===!0:!1}function Xp(n){return n?n.type==="separator"||n.separator===!0:!1}function mz(n){return n?n.type==="label"&&typeof n.text=="string":!1}function Ef(n){return n?typeof n.onClick=="function":!1}function z2(n){return n?n.type==="dropdown-button"&&Ef(n.main)&&Array.isArray(n.items):!1}function gz(n){return n?n.type==="row"&&Array.isArray(n.items):!1}function bz(n){return n?n.type==="column"&&Array.isArray(n.items):!1}function R3(n){return Rt(n)&&Rt(n.parseError)}function yz(n){return Rt(n)&&Array.isArray(n.validationErrors)}function kz(n){return Rt(n)&&Array.isArray(n.path)&&typeof n.message=="string"&&"severity"in n}function wz(n){return Rt(n)&&kz(n)&&typeof n.isChildError=="boolean"}function v8(n){return Rt(n)&&typeof n.action=="function"&&Rt(n.props)}const Cz=n=>({}),N3=n=>({});function I3(n,e,t){const i=n.slice();return i[3]=e[t],i}const _z=n=>({}),B3=n=>({});function Sz(n){let e=z3(n[3])+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r&1&&e!==(e=z3(i[3])+"")&&We(t,e)},i:he,o:he,d(i){i&&z(t)}}}function vz(n){let e,t,i,r,o,s,l,a,u=n[3].icon&&L3(n),c=n[3].text&&F3(n);return{c(){e=D("button"),u&&u.c(),t=Q(),c&&c.c(),k(e,"type","button"),k(e,"class",i="jse-button "+n[3].className+" svelte-7pi0n9"),k(e,"title",r=n[3].title),e.disabled=o=n[3].disabled||!1},m(f,h){j(f,e,h),u&&u.m(e,null),x(e,t),c&&c.m(e,null),s=!0,l||(a=ue(e,"click",function(){Ei(n[3].onClick)&&n[3].onClick.apply(this,arguments)}),l=!0)},p(f,h){n=f,n[3].icon?u?(u.p(n,h),h&1&&C(u,1)):(u=L3(n),u.c(),C(u,1),u.m(e,t)):u&&(ce(),v(u,1,1,()=>{u=null}),fe()),n[3].text?c?c.p(n,h):(c=F3(n),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!s||h&1&&i!==(i="jse-button "+n[3].className+" svelte-7pi0n9"))&&k(e,"class",i),(!s||h&1&&r!==(r=n[3].title))&&k(e,"title",r),(!s||h&1&&o!==(o=n[3].disabled||!1))&&(e.disabled=o)},i(f){s||(C(u),s=!0)},o(f){v(u),s=!1},d(f){f&&z(e),u&&u.d(),c&&c.d(),l=!1,a()}}}function xz(n){let e;return{c(){e=D("div"),k(e,"class","jse-space svelte-7pi0n9")},m(t,i){j(t,e,i)},p:he,i:he,o:he,d(t){t&&z(e)}}}function Mz(n){let e;return{c(){e=D("div"),k(e,"class","jse-separator svelte-7pi0n9")},m(t,i){j(t,e,i)},p:he,i:he,o:he,d(t){t&&z(e)}}}function L3(n){let e,t;return e=new ht({props:{data:n[3].icon}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.data=i[3].icon),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function F3(n){let e=n[3].text+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r&1&&e!==(e=i[3].text+"")&&We(t,e)},d(i){i&&z(t)}}}function j3(n){let e,t,i,r,o,s,l;const a=[Mz,xz,vz,Sz],u=[];function c(f,h){return h&1&&(e=null),h&1&&(t=null),h&1&&(i=null),e==null&&(e=!!Xp(f[3])),e?0:(t==null&&(t=!!S8(f[3])),t?1:(i==null&&(i=!!Ef(f[3])),i?2:3))}return r=c(n,-1),o=u[r]=a[r](n),{c(){o.c(),s=ut()},m(f,h){u[r].m(f,h),j(f,s,h),l=!0},p(f,h){let d=r;r=c(f,h),r===d?u[r].p(f,h):(ce(),v(u[d],1,1,()=>{u[d]=null}),fe(),o=u[r],o?o.p(f,h):(o=u[r]=a[r](f),o.c()),C(o,1),o.m(s.parentNode,s))},i(f){l||(C(o),l=!0)},o(f){v(o),l=!1},d(f){u[r].d(f),f&&z(s)}}}function Az(n){let e,t,i,r;const o=n[2].left,s=tn(o,n,n[1],B3);let l=n[0],a=[];for(let h=0;h<l.length;h+=1)a[h]=j3(I3(n,l,h));const u=h=>v(a[h],1,1,()=>{a[h]=null}),c=n[2].right,f=tn(c,n,n[1],N3);return{c(){e=D("div"),s&&s.c(),t=Q();for(let h=0;h<a.length;h+=1)a[h].c();i=Q(),f&&f.c(),k(e,"class","jse-menu svelte-7pi0n9")},m(h,d){j(h,e,d),s&&s.m(e,null),x(e,t);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null);x(e,i),f&&f.m(e,null),r=!0},p(h,[d]){if(s&&s.p&&(!r||d&2)&&nn(s,o,h,h[1],r?on(o,h[1],d,_z):rn(h[1]),B3),d&1){l=h[0];let p;for(p=0;p<l.length;p+=1){const m=I3(h,l,p);a[p]?(a[p].p(m,d),C(a[p],1)):(a[p]=j3(m),a[p].c(),C(a[p],1),a[p].m(e,i))}for(ce(),p=l.length;p<a.length;p+=1)u(p);fe()}f&&f.p&&(!r||d&2)&&nn(f,c,h,h[1],r?on(c,h[1],d,Cz):rn(h[1]),N3)},i(h){if(!r){C(s,h);for(let d=0;d<l.length;d+=1)C(a[d]);C(f,h),r=!0}},o(h){v(s,h),a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)v(a[d]);v(f,h),r=!1},d(h){h&&z(e),s&&s.d(h),mn(a,h),f&&f.d(h)}}}function z3(n){return console.error("Unknown type of menu item",n),"???"}function Ez(n,e,t){let{$$slots:i={},$$scope:r}=e,{items:o=[]}=e;return n.$$set=s=>{"items"in s&&t(0,o=s.items),"$$scope"in s&&t(1,r=s.$$scope)},[o,r,i]}class Oz extends je{constructor(e){super(),ze(this,e,Ez,Az,Ze,{items:0})}}const Yp=Oz;function Tz(n){let e;return{c(){e=D("div"),e.textContent="Repair invalid JSON, then click apply",k(e,"slot","left"),k(e,"class","jse-info svelte-ca0j4i")},m(t,i){j(t,e,i)},p:he,d(t){t&&z(e)}}}function Dz(n){let e,t;return e=new Jr({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:n[5]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&32&&(o.actions=i[5]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Pz(n){let e,t;return e=new Jr({props:{type:"error",icon:oa,message:`Cannot parse JSON: ${n[2].message}`,actions:n[6]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&4&&(o.message=`Cannot parse JSON: ${i[2].message}`),r&64&&(o.actions=i[6]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Rz(n){let e,t,i,r,o,s,l,a,u,c;t=new Yp({props:{items:n[4],$$slots:{left:[Tz]},$$scope:{ctx:n}}});const f=[Pz,Dz],h=[];function d(p,m){return p[2]?0:1}return r=d(n),o=h[r]=f[r](n),{c(){e=D("div"),$(t.$$.fragment),i=Q(),o.c(),s=Q(),l=D("textarea"),l.readOnly=n[1],k(l,"class","jse-json-text svelte-ca0j4i"),k(l,"autocomplete","off"),k(l,"autocapitalize","off"),k(l,"spellcheck","false"),l.value=n[0],k(e,"class","jse-json-repair-component svelte-ca0j4i")},m(p,m){j(p,e,m),ee(t,e,null),x(e,i),h[r].m(e,null),x(e,s),x(e,l),n[16](l),a=!0,u||(c=ue(l,"input",n[7]),u=!0)},p(p,[m]){const g={};m&16&&(g.items=p[4]),m&8388608&&(g.$$scope={dirty:m,ctx:p}),t.$set(g);let b=r;r=d(p),r===b?h[r].p(p,m):(ce(),v(h[b],1,1,()=>{h[b]=null}),fe(),o=h[r],o?o.p(p,m):(o=h[r]=f[r](p),o.c()),C(o,1),o.m(e,s)),(!a||m&2)&&(l.readOnly=p[1]),(!a||m&1)&&(l.value=p[0])},i(p){a||(C(t.$$.fragment,p),C(o),a=!0)},o(p){v(t.$$.fragment,p),v(o),a=!1},d(p){p&&z(e),te(t),h[r].d(),n[16](null),u=!1,c()}}}function Nz(n,e,t){let i,r,o,s,l,a,{text:u=""}=e,{readOnly:c=!1}=e,{onParse:f}=e,{onRepair:h}=e,{onChange:d=null}=e,{onApply:p}=e,{onCancel:m}=e;const g=Wn("jsoneditor:JSONRepair");let b;function y(P){try{return f(P),null}catch(A){return ou(P,A.message)}}function _(P){try{return h(P),!0}catch{return!1}}function M(){if(b&&i){const P=i.position!=null?i.position:0;b.setSelectionRange(P,P),b.focus()}}function w(P){g("handleChange");const A=P.target.value;u!==A&&(t(0,u=A),d&&d(u))}function S(){p(u)}function E(){try{t(0,u=h(u)),d&&d(u)}catch{}}let I;function O(P){ft[P?"unshift":"push"](()=>{b=P,t(3,b)})}return n.$$set=P=>{"text"in P&&t(0,u=P.text),"readOnly"in P&&t(1,c=P.readOnly),"onParse"in P&&t(8,f=P.onParse),"onRepair"in P&&t(9,h=P.onRepair),"onChange"in P&&t(10,d=P.onChange),"onApply"in P&&t(11,p=P.onApply),"onCancel"in P&&t(12,m=P.onCancel)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=y(u)),n.$$.dirty&1&&t(15,r=_(u)),n.$$.dirty&4&&g("error",i),n.$$.dirty&4096&&t(4,I=[{type:"space"},{type:"button",icon:uu,title:"Cancel repair",className:"jse-cancel",onClick:m}]),n.$$.dirty&57344&&t(6,l=r?[o,s]:[o]),n.$$.dirty&2&&t(5,a=[{icon:jc,text:"Apply",title:"Apply fixed JSON",disabled:c,onClick:S}])},t(13,o={icon:lF,text:"Show me",title:"Scroll to the error location",onClick:M}),t(14,s={icon:qp,text:"Auto repair",title:"Automatically repair JSON",onClick:E}),[u,c,i,b,I,a,l,w,f,h,d,p,m,o,s,r,O]}class Iz extends je{constructor(e){super(),ze(this,e,Nz,Rz,Ze,{text:0,readOnly:1,onParse:8,onRepair:9,onChange:10,onApply:11,onCancel:12})}}const Bz=Iz;let _a=[];function V3(n){if(n.key==="Escape"){const e=rt(_a);e&&e()}}function Zp(n,e){return yt(_a)&&window.addEventListener("keydown",V3),_a.push(e),{destroy:()=>{_a=_a.filter(t=>t!==e),yt(_a)&&window.removeEventListener("keydown",V3)}}}function Lz(n){let e,t,i,r,o,s;function l(u){n[7](u)}let a={onParse:n[1],onRepair:n[2],onApply:n[4],onCancel:n[5]};return n[0]!==void 0&&(a.text=n[0]),t=new Bz({props:a}),ft.push(()=>Tr(t,"text",l)),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-modal jse-repair svelte-rn18r0")},m(u,c){j(u,e,c),ee(t,e,null),r=!0,o||(s=vn(Zp.call(null,e,n[3])),o=!0)},p(u,[c]){const f={};c&2&&(f.onParse=u[1]),c&4&&(f.onRepair=u[2]),!i&&c&1&&(i=!0,f.text=u[0],Dr(()=>i=!1)),t.$set(f)},i(u){r||(C(t.$$.fragment,u),r=!0)},o(u){v(t.$$.fragment,u),r=!1},d(u){u&&z(e),te(t),o=!1,s()}}}function Fz(n,e,t){let{text:i}=e,{onParse:r}=e,{onRepair:o}=e,{onApply:s}=e;const{close:l}=Vn("simple-modal");function a(f){l(),s(f)}function u(){l()}function c(f){i=f,t(0,i)}return n.$$set=f=>{"text"in f&&t(0,i=f.text),"onParse"in f&&t(1,r=f.onParse),"onRepair"in f&&t(2,o=f.onRepair),"onApply"in f&&t(6,s=f.onApply)},[i,r,o,l,a,u,s,c]}class jz extends je{constructor(e){super(),ze(this,e,Fz,Lz,Ze,{text:0,onParse:1,onRepair:2,onApply:6})}}const x8=jz;function H3(n){let e,t;return e=new ht({props:{data:n[0].icon}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.data=i[0].icon),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function q3(n){let e=n[0].text+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r&1&&e!==(e=i[0].text+"")&&We(t,e)},d(i){i&&z(t)}}}function zz(n){let e,t,i,r,o,s,l,a,u=n[0].icon&&H3(n),c=n[0].text&&q3(n);return{c(){e=D("button"),u&&u.c(),t=Q(),c&&c.c(),k(e,"type","button"),k(e,"class",i=Zt(ko("jse-context-menu-button",n[1],n[0].className))+" svelte-9lvnxh"),k(e,"title",r=n[0].title),e.disabled=o=n[0].disabled||!1},m(f,h){j(f,e,h),u&&u.m(e,null),x(e,t),c&&c.m(e,null),s=!0,l||(a=ue(e,"click",n[3]),l=!0)},p(f,[h]){f[0].icon?u?(u.p(f,h),h&1&&C(u,1)):(u=H3(f),u.c(),C(u,1),u.m(e,t)):u&&(ce(),v(u,1,1,()=>{u=null}),fe()),f[0].text?c?c.p(f,h):(c=q3(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!s||h&3&&i!==(i=Zt(ko("jse-context-menu-button",f[1],f[0].className))+" svelte-9lvnxh"))&&k(e,"class",i),(!s||h&1&&r!==(r=f[0].title))&&k(e,"title",r),(!s||h&1&&o!==(o=f[0].disabled||!1))&&(e.disabled=o)},i(f){s||(C(u),s=!0)},o(f){v(u),s=!1},d(f){f&&z(e),u&&u.d(),c&&c.d(),l=!1,a()}}}function Vz(n,e,t){let{item:i}=e,{className:r=void 0}=e,{onCloseContextMenu:o}=e;const s=l=>{o(),i.onClick(l)};return n.$$set=l=>{"item"in l&&t(0,i=l.item),"className"in l&&t(1,r=l.className),"onCloseContextMenu"in l&&t(2,o=l.onCloseContextMenu)},[i,r,o,s]}class Hz extends je{constructor(e){super(),ze(this,e,Vz,zz,xn,{item:0,className:1,onCloseContextMenu:2})}}const V2=Hz;function W3(n,e,t){const i=n.slice();return i[11]=e[t],i}const qz=n=>({}),U3=n=>({});function J3(n){let e,t;return e=new ht({props:{data:n[11].icon}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.data=i[11].icon),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function K3(n){let e,t,i,r=n[11].text+"",o,s,l,a,u,c,f,h,d=n[11].icon&&J3(n);function p(...m){return n[9](n[11],...m)}return{c(){e=D("li"),t=D("button"),d&&d.c(),i=Q(),o=we(r),u=Q(),k(t,"type","button"),k(t,"title",s=n[11].title),t.disabled=l=n[11].disabled,k(t,"class",a=Zt(n[11].className)+" svelte-124kopg"),k(e,"class","svelte-124kopg")},m(m,g){j(m,e,g),x(e,t),d&&d.m(t,null),x(t,i),x(t,o),x(e,u),c=!0,f||(h=ue(t,"click",p),f=!0)},p(m,g){n=m,n[11].icon?d?(d.p(n,g),g&1&&C(d,1)):(d=J3(n),d.c(),C(d,1),d.m(t,i)):d&&(ce(),v(d,1,1,()=>{d=null}),fe()),(!c||g&1)&&r!==(r=n[11].text+"")&&We(o,r),(!c||g&1&&s!==(s=n[11].title))&&k(t,"title",s),(!c||g&1&&l!==(l=n[11].disabled))&&(t.disabled=l),(!c||g&1&&a!==(a=Zt(n[11].className)+" svelte-124kopg"))&&k(t,"class",a)},i(m){c||(C(d),c=!0)},o(m){v(d),c=!1},d(m){m&&z(e),d&&d.d(),f=!1,h()}}}function Wz(n){let e,t,i,r,o,s,l,a,u,c;const f=n[8].defaultItem,h=tn(f,n,n[7],U3);r=new ht({props:{data:lr}});let d=n[0],p=[];for(let g=0;g<d.length;g+=1)p[g]=K3(W3(n,d,g));const m=g=>v(p[g],1,1,()=>{p[g]=null});return{c(){e=D("div"),h&&h.c(),t=Q(),i=D("button"),$(r.$$.fragment),o=Q(),s=D("div"),l=D("ul");for(let g=0;g<p.length;g+=1)p[g].c();k(i,"type","button"),k(i,"class","jse-open-dropdown svelte-124kopg"),k(i,"data-type","jse-open-dropdown"),i.disabled=n[4],le(i,"jse-visible",n[3]),k(l,"class","svelte-124kopg"),k(s,"class","jse-dropdown-items svelte-124kopg"),li(s,"width",n[2]),le(s,"jse-visible",n[3]),k(e,"role","button"),k(e,"tabindex","0"),k(e,"class","jse-dropdown-button svelte-124kopg"),k(e,"title",n[1])},m(g,b){j(g,e,b),h&&h.m(e,null),x(e,t),x(e,i),ee(r,i,null),x(e,o),x(e,s),x(s,l);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(l,null);a=!0,u||(c=[ue(i,"click",n[5]),ue(e,"click",n[6])],u=!0)},p(g,[b]){if(h&&h.p&&(!a||b&128)&&nn(h,f,g,g[7],a?on(f,g[7],b,qz):rn(g[7]),U3),(!a||b&16)&&(i.disabled=g[4]),(!a||b&8)&&le(i,"jse-visible",g[3]),b&1){d=g[0];let y;for(y=0;y<d.length;y+=1){const _=W3(g,d,y);p[y]?(p[y].p(_,b),C(p[y],1)):(p[y]=K3(_),p[y].c(),C(p[y],1),p[y].m(l,null))}for(ce(),y=d.length;y<p.length;y+=1)m(y);fe()}(!a||b&4)&&li(s,"width",g[2]),(!a||b&8)&&le(s,"jse-visible",g[3]),(!a||b&2)&&k(e,"title",g[1])},i(g){if(!a){C(h,g),C(r.$$.fragment,g);for(let b=0;b<d.length;b+=1)C(p[b]);a=!0}},o(g){v(h,g),v(r.$$.fragment,g),p=p.filter(Boolean);for(let b=0;b<p.length;b+=1)v(p[b]);a=!1},d(g){g&&z(e),h&&h.d(g),te(r),mn(p,g),u=!1,fn(c)}}}function Uz(n,e,t){let i,{$$slots:r={},$$scope:o}=e,{items:s=[]}=e,{title:l=void 0}=e,{width:a="120px"}=e,u=!1;function c(){const p=u;setTimeout(()=>t(3,u=!p))}function f(){t(3,u=!1)}function h(p){ol(p)==="Escape"&&(p.preventDefault(),t(3,u=!1))}br(()=>{document.addEventListener("click",f),document.addEventListener("keydown",h)}),Ki(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",h)});const d=(p,m)=>p.onClick(m);return n.$$set=p=>{"items"in p&&t(0,s=p.items),"title"in p&&t(1,l=p.title),"width"in p&&t(2,a=p.width),"$$scope"in p&&t(7,o=p.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=s.every(p=>p.disabled===!0))},[s,l,a,u,i,c,f,o,r,d]}class Jz extends je{constructor(e){super(),ze(this,e,Uz,Wz,Ze,{items:0,title:1,width:2})}}const Kz=Jz;function G3(n){let e,t;return e=new ht({props:{data:n[0].main.icon}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.data=i[0].main.icon),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Gz(n){let e,t,i=n[0].main.text+"",r,o,s,l,a,u,c,f=n[0].main.icon&&G3(n);return{c(){e=D("button"),f&&f.c(),t=Q(),r=we(i),k(e,"class",o=Zt(ko("jse-context-menu-button",n[1],n[0].main.className))+" svelte-9lvnxh"),k(e,"type","button"),k(e,"slot","defaultItem"),k(e,"title",s=n[0].main.title),e.disabled=l=n[0].main.disabled||!1},m(h,d){j(h,e,d),f&&f.m(e,null),x(e,t),x(e,r),a=!0,u||(c=ue(e,"click",n[3]),u=!0)},p(h,d){h[0].main.icon?f?(f.p(h,d),d&1&&C(f,1)):(f=G3(h),f.c(),C(f,1),f.m(e,t)):f&&(ce(),v(f,1,1,()=>{f=null}),fe()),(!a||d&1)&&i!==(i=h[0].main.text+"")&&We(r,i),(!a||d&3&&o!==(o=Zt(ko("jse-context-menu-button",h[1],h[0].main.className))+" svelte-9lvnxh"))&&k(e,"class",o),(!a||d&1&&s!==(s=h[0].main.title))&&k(e,"title",s),(!a||d&1&&l!==(l=h[0].main.disabled||!1))&&(e.disabled=l)},i(h){a||(C(f),a=!0)},o(h){v(f),a=!1},d(h){h&&z(e),f&&f.d(),u=!1,c()}}}function Qz(n){let e,t;return e=new Kz({props:{width:n[0].width,items:n[0].items,$$slots:{defaultItem:[Gz]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,[r]){const o={};r&1&&(o.width=i[0].width),r&1&&(o.items=i[0].items),r&23&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Xz(n,e,t){let{item:i}=e,{className:r=void 0}=e,{onCloseContextMenu:o}=e;const s=l=>{o(),i.main.onClick(l)};return n.$$set=l=>{"item"in l&&t(0,i=l.item),"className"in l&&t(1,r=l.className),"onCloseContextMenu"in l&&t(2,o=l.onCloseContextMenu)},[i,r,o,s]}class Yz extends je{constructor(e){super(),ze(this,e,Xz,Qz,xn,{item:0,className:1,onCloseContextMenu:2})}}const H2=Yz;function Q3(n,e,t){const i=n.slice();return i[7]=e[t],i}function X3(n,e,t){const i=n.slice();return i[10]=e[t],i}function Y3(n,e,t){const i=n.slice();return i[13]=e[t],i}function Zz(n){let e=hu(n[7])+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r&1&&e!==(e=hu(i[7])+"")&&We(t,e)},i:he,o:he,d(i){i&&z(t)}}}function $z(n){let e;return{c(){e=D("div"),k(e,"class","jse-separator svelte-1i2edl3")},m(t,i){j(t,e,i)},p:he,i:he,o:he,d(t){t&&z(e)}}}function eV(n){let e,t,i=n[7].items,r=[];for(let s=0;s<i.length;s+=1)r[s]=$3(X3(n,i,s));const o=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){e=D("div");for(let s=0;s<r.length;s+=1)r[s].c();k(e,"class","jse-row svelte-1i2edl3")},m(s,l){j(s,e,l);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);t=!0},p(s,l){if(l&3){i=s[7].items;let a;for(a=0;a<i.length;a+=1){const u=X3(s,i,a);r[a]?(r[a].p(u,l),C(r[a],1)):(r[a]=$3(u),r[a].c(),C(r[a],1),r[a].m(e,null))}for(ce(),a=i.length;a<r.length;a+=1)o(a);fe()}},i(s){if(!t){for(let l=0;l<i.length;l+=1)C(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)v(r[l]);t=!1},d(s){s&&z(e),mn(r,s)}}}function tV(n){let e,t;return e=new H2({props:{item:n[7],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.item=i[7]),r&2&&(o.onCloseContextMenu=i[1]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function nV(n){let e,t;return e=new V2({props:{item:n[7],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.item=i[7]),r&2&&(o.onCloseContextMenu=i[1]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function iV(n){let e=hu(n[10])+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r&1&&e!==(e=hu(i[10])+"")&&We(t,e)},i:he,o:he,d(i){i&&z(t)}}}function rV(n){let e;return{c(){e=D("div"),k(e,"class","jse-separator svelte-1i2edl3")},m(t,i){j(t,e,i)},p:he,i:he,o:he,d(t){t&&z(e)}}}function oV(n){let e,t,i=n[10].items,r=[];for(let s=0;s<i.length;s+=1)r[s]=Z3(Y3(n,i,s));const o=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){e=D("div");for(let s=0;s<r.length;s+=1)r[s].c();k(e,"class","jse-column svelte-1i2edl3")},m(s,l){j(s,e,l);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);t=!0},p(s,l){if(l&3){i=s[10].items;let a;for(a=0;a<i.length;a+=1){const u=Y3(s,i,a);r[a]?(r[a].p(u,l),C(r[a],1)):(r[a]=Z3(u),r[a].c(),C(r[a],1),r[a].m(e,null))}for(ce(),a=i.length;a<r.length;a+=1)o(a);fe()}},i(s){if(!t){for(let l=0;l<i.length;l+=1)C(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)v(r[l]);t=!1},d(s){s&&z(e),mn(r,s)}}}function sV(n){let e,t;return e=new H2({props:{item:n[10],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.item=i[10]),r&2&&(o.onCloseContextMenu=i[1]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function lV(n){let e,t;return e=new V2({props:{item:n[10],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.item=i[10]),r&2&&(o.onCloseContextMenu=i[1]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function aV(n){let e=hu(n[13])+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r&1&&e!==(e=hu(i[13])+"")&&We(t,e)},i:he,o:he,d(i){i&&z(t)}}}function uV(n){let e,t=n[13].text+"",i;return{c(){e=D("div"),i=we(t),k(e,"class","jse-label svelte-1i2edl3")},m(r,o){j(r,e,o),x(e,i)},p(r,o){o&1&&t!==(t=r[13].text+"")&&We(i,t)},i:he,o:he,d(r){r&&z(e)}}}function cV(n){let e;return{c(){e=D("div"),k(e,"class","jse-separator svelte-1i2edl3")},m(t,i){j(t,e,i)},p:he,i:he,o:he,d(t){t&&z(e)}}}function fV(n){let e,t;return e=new H2({props:{className:"left",item:n[13],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.item=i[13]),r&2&&(o.onCloseContextMenu=i[1]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function hV(n){let e,t;return e=new V2({props:{className:"left",item:n[13],onCloseContextMenu:n[1]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&1&&(o.item=i[13]),r&2&&(o.onCloseContextMenu=i[1]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Z3(n){let e,t,i,r,o,s,l,a;const u=[hV,fV,cV,uV,aV],c=[];function f(h,d){return d&1&&(e=null),d&1&&(t=null),d&1&&(i=null),d&1&&(r=null),e==null&&(e=!!Ef(h[13])),e?0:(t==null&&(t=!!z2(h[13])),t?1:(i==null&&(i=!!Xp(h[13])),i?2:(r==null&&(r=!!mz(h[13])),r?3:4)))}return o=f(n,-1),s=c[o]=u[o](n),{c(){s.c(),l=ut()},m(h,d){c[o].m(h,d),j(h,l,d),a=!0},p(h,d){let p=o;o=f(h,d),o===p?c[o].p(h,d):(ce(),v(c[p],1,1,()=>{c[p]=null}),fe(),s=c[o],s?s.p(h,d):(s=c[o]=u[o](h),s.c()),C(s,1),s.m(l.parentNode,l))},i(h){a||(C(s),a=!0)},o(h){v(s),a=!1},d(h){c[o].d(h),h&&z(l)}}}function $3(n){let e,t,i,r,o,s,l,a;const u=[lV,sV,oV,rV,iV],c=[];function f(h,d){return d&1&&(e=null),d&1&&(t=null),d&1&&(i=null),d&1&&(r=null),e==null&&(e=!!Ef(h[10])),e?0:(t==null&&(t=!!z2(h[10])),t?1:(i==null&&(i=!!bz(h[10])),i?2:(r==null&&(r=!!Xp(h[10])),r?3:4)))}return o=f(n,-1),s=c[o]=u[o](n),{c(){s.c(),l=ut()},m(h,d){c[o].m(h,d),j(h,l,d),a=!0},p(h,d){let p=o;o=f(h,d),o===p?c[o].p(h,d):(ce(),v(c[p],1,1,()=>{c[p]=null}),fe(),s=c[o],s?s.p(h,d):(s=c[o]=u[o](h),s.c()),C(s,1),s.m(l.parentNode,l))},i(h){a||(C(s),a=!0)},o(h){v(s),a=!1},d(h){c[o].d(h),h&&z(l)}}}function ew(n){let e,t,i,r,o,s,l,a;const u=[nV,tV,eV,$z,Zz],c=[];function f(h,d){return d&1&&(e=null),d&1&&(t=null),d&1&&(i=null),d&1&&(r=null),e==null&&(e=!!Ef(h[7])),e?0:(t==null&&(t=!!z2(h[7])),t?1:(i==null&&(i=!!gz(h[7])),i?2:(r==null&&(r=!!Xp(h[7])),r?3:4)))}return o=f(n,-1),s=c[o]=u[o](n),{c(){s.c(),l=ut()},m(h,d){c[o].m(h,d),j(h,l,d),a=!0},p(h,d){let p=o;o=f(h,d),o===p?c[o].p(h,d):(ce(),v(c[p],1,1,()=>{c[p]=null}),fe(),s=c[o],s?s.p(h,d):(s=c[o]=u[o](h),s.c()),C(s,1),s.m(l.parentNode,l))},i(h){a||(C(s),a=!0)},o(h){v(s),a=!1},d(h){c[o].d(h),h&&z(l)}}}function tw(n){let e,t,i,r,o,s,l,a;return r=new ht({props:{data:pB}}),{c(){e=D("div"),t=D("div"),i=D("div"),$(r.$$.fragment),o=Q(),s=D("div"),l=we(n[2]),k(i,"class","jse-tip-icon svelte-1i2edl3"),k(s,"class","jse-tip-text"),k(t,"class","jse-tip svelte-1i2edl3"),k(e,"class","jse-row svelte-1i2edl3")},m(u,c){j(u,e,c),x(e,t),x(t,i),ee(r,i,null),x(t,o),x(t,s),x(s,l),a=!0},p(u,c){(!a||c&4)&&We(l,u[2])},i(u){a||(C(r.$$.fragment,u),a=!0)},o(u){v(r.$$.fragment,u),a=!1},d(u){u&&z(e),te(r)}}}function dV(n){let e,t,i,r,o,s=n[0],l=[];for(let c=0;c<s.length;c+=1)l[c]=ew(Q3(n,s,c));const a=c=>v(l[c],1,1,()=>{l[c]=null});let u=n[2]&&tw(n);return{c(){e=D("div");for(let c=0;c<l.length;c+=1)l[c].c();t=Q(),u&&u.c(),k(e,"role","menu"),k(e,"tabindex","-1"),k(e,"class","jse-contextmenu svelte-1i2edl3")},m(c,f){j(c,e,f);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(e,null);x(e,t),u&&u.m(e,null),n[5](e),i=!0,r||(o=ue(e,"keydown",n[4]),r=!0)},p(c,[f]){if(f&3){s=c[0];let h;for(h=0;h<s.length;h+=1){const d=Q3(c,s,h);l[h]?(l[h].p(d,f),C(l[h],1)):(l[h]=ew(d),l[h].c(),C(l[h],1),l[h].m(e,t))}for(ce(),h=s.length;h<l.length;h+=1)a(h);fe()}c[2]?u?(u.p(c,f),f&4&&C(u,1)):(u=tw(c),u.c(),C(u,1),u.m(e,null)):u&&(ce(),v(u,1,1,()=>{u=null}),fe())},i(c){if(!i){for(let f=0;f<s.length;f+=1)C(l[f]);C(u),i=!0}},o(c){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)v(l[f]);v(u),i=!1},d(c){c&&z(e),mn(l,c),u&&u.d(),n[5](null),r=!1,o()}}}function hu(n){return console.error("Unknown type of context menu item",n),"???"}function pV(n,e,t){let{items:i}=e,{onCloseContextMenu:r}=e,{tip:o}=e,s;br(()=>{const c=Array.from(s.querySelectorAll("button")).find(f=>!f.disabled);c&&c.focus()});const l={ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};function a(c){const f=ol(c),h=l[f];if(h&&c.target){c.preventDefault();const d=Array.from(s.querySelectorAll("button:not([disabled])")),p=QI({allElements:d,currentElement:c.target,direction:h,hasPrio:m=>m.getAttribute("data-type")!=="jse-open-dropdown"});p&&p.focus()}}function u(c){ft[c?"unshift":"push"](()=>{s=c,t(3,s)})}return n.$$set=c=>{"items"in c&&t(0,i=c.items),"onCloseContextMenu"in c&&t(1,r=c.onCloseContextMenu),"tip"in c&&t(2,o=c.tip)},[i,r,o,s,a,u]}class mV extends je{constructor(e){super(),ze(this,e,pV,dV,Ze,{items:0,onCloseContextMenu:1,tip:2})}}const M8=mV;function gV(n){let e,t;return e=new M8({props:{items:n[2],onCloseContextMenu:n[1],tip:n[0]?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&4&&(o.items=i[2]),r[0]&2&&(o.onCloseContextMenu=i[1]),r[0]&1&&(o.tip=i[0]?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function bV(n,e,t){let i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y,_,M,w,S,{json:E}=e,{documentState:I}=e,{parser:O}=e,{showTip:P}=e,{onCloseContextMenu:A}=e,{onRenderContextMenu:H}=e,{onEditKey:W}=e,{onEditValue:q}=e,{onToggleEnforceString:L}=e,{onCut:X}=e,{onCopy:Y}=e,{onPaste:G}=e,{onRemove:T}=e,{onDuplicate:B}=e,{onExtract:J}=e,{onInsertBefore:ne}=e,{onInsert:_e}=e,{onConvert:ae}=e,{onInsertAfter:Te}=e,{onSort:re}=e,{onTransform:U}=e;function Ce(K){u?ae(K):_e(K)}let Ke;return n.$$set=K=>{"json"in K&&t(3,E=K.json),"documentState"in K&&t(4,I=K.documentState),"parser"in K&&t(5,O=K.parser),"showTip"in K&&t(0,P=K.showTip),"onCloseContextMenu"in K&&t(1,A=K.onCloseContextMenu),"onRenderContextMenu"in K&&t(6,H=K.onRenderContextMenu),"onEditKey"in K&&t(7,W=K.onEditKey),"onEditValue"in K&&t(8,q=K.onEditValue),"onToggleEnforceString"in K&&t(9,L=K.onToggleEnforceString),"onCut"in K&&t(10,X=K.onCut),"onCopy"in K&&t(11,Y=K.onCopy),"onPaste"in K&&t(12,G=K.onPaste),"onRemove"in K&&t(13,T=K.onRemove),"onDuplicate"in K&&t(14,B=K.onDuplicate),"onExtract"in K&&t(15,J=K.onExtract),"onInsertBefore"in K&&t(16,ne=K.onInsertBefore),"onInsert"in K&&t(17,_e=K.onInsert),"onConvert"in K&&t(18,ae=K.onConvert),"onInsertAfter"in K&&t(19,Te=K.onInsertAfter),"onSort"in K&&t(20,re=K.onSort),"onTransform"in K&&t(21,U=K.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&16&&t(39,i=I.selection),n.$$.dirty[0]&8&&t(41,r=E!==void 0),n.$$.dirty[1]&256&&t(33,o=!!i),n.$$.dirty[1]&256&&t(23,s=i?yt(Fe(i)):!1),n.$$.dirty[0]&8|n.$$.dirty[1]&256&&t(40,l=i?Pe(E,Fe(i)):void 0),n.$$.dirty[1]&512&&t(37,a=Array.isArray(l)?"Edit array":Rt(l)?"Edit object":"Edit value"),n.$$.dirty[1]&1280&&t(24,u=r&&(vt(i)||un(i)||mt(i))),n.$$.dirty[0]&25165824|n.$$.dirty[1]&1024&&t(32,c=r&&u&&!s),n.$$.dirty[0]&8388608|n.$$.dirty[1]&1280&&t(31,f=r&&i!=null&&(vt(i)||mt(i))&&!s),n.$$.dirty[0]&8388616|n.$$.dirty[1]&1280&&t(38,h=r&&i!=null&&Cd(i)&&!s&&!Array.isArray(Pe(E,at(Fe(i))))),n.$$.dirty[1]&1280&&t(36,d=r&&i!=null&&Cd(i)),n.$$.dirty[1]&544&&t(34,p=d&&!Qt(l)),n.$$.dirty[0]&16777216&&t(27,m=u),n.$$.dirty[0]&134217728&&t(26,g=m?"Convert to:":"Insert:"),n.$$.dirty[0]&134217728|n.$$.dirty[1]&4&&t(30,b=m?!1:o),n.$$.dirty[0]&134217728|n.$$.dirty[1]&772&&t(29,y=m?Qh(i)&&!Rt(l):o),n.$$.dirty[0]&134217728|n.$$.dirty[1]&772&&t(28,_=m?Qh(i)&&!Array.isArray(l):o),n.$$.dirty[0]&134217728|n.$$.dirty[1]&772&&t(25,M=m?Qh(i)&&Qt(l):o),n.$$.dirty[0]&48|n.$$.dirty[1]&768&&t(35,w=i!=null&&l?ns(l,I.enforceStringMap,xe(Fe(i)),O):!1),n.$$.dirty[0]&2142896e3|n.$$.dirty[1]&255&&t(22,Ke=[{type:"row",items:[{type:"button",onClick:()=>W(),icon:Va,text:"Edit key",title:"Edit the key (Double-click on the key)",disabled:!h},{type:"dropdown-button",main:{type:"button",onClick:()=>q(),icon:Va,text:a,title:"Edit the value (Double-click on the value)",disabled:!d},width:"11em",items:[{type:"button",icon:Va,text:a,title:"Edit the value (Double-click on the value)",onClick:()=>q(),disabled:!d},{type:"button",icon:w?Ic:Bc,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:()=>L(),disabled:!p}]}]},{type:"separator"},{type:"row",items:[{type:"dropdown-button",main:{type:"button",onClick:()=>X(!0),icon:za,text:"Cut",title:"Cut selected contents, formatted with indentation (Ctrl+X)",disabled:!u},width:"10em",items:[{type:"button",icon:za,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:()=>X(!0),disabled:!u},{type:"button",icon:za,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:()=>X(!1),disabled:!u}]},{type:"dropdown-button",main:{type:"button",onClick:()=>Y(!0),icon:js,text:"Copy",title:"Copy selected contents, formatted with indentation (Ctrl+C)",disabled:!u},width:"12em",items:[{type:"button",icon:js,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:()=>Y(!0),disabled:!u},{type:"button",icon:js,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:()=>Y(!1),disabled:!u}]},{type:"button",onClick:()=>G(),icon:r8,text:"Paste",title:"Paste clipboard contents (Ctrl+V)",disabled:!o}]},{type:"separator"},{type:"row",items:[{type:"column",items:[{type:"button",onClick:()=>B(),icon:a8,text:"Duplicate",title:"Duplicate selected contents (Ctrl+D)",disabled:!c},{type:"button",onClick:()=>J(),icon:tF,text:"Extract",title:"Extract selected contents",disabled:!f},{type:"button",onClick:()=>re(),icon:Wp,text:"Sort",title:"Sort array or object contents",disabled:!u},{type:"button",onClick:()=>U(),icon:Hp,text:"Transform",title:"Transform array or object contents (filter, sort, project)",disabled:!u},{type:"button",onClick:()=>T(),icon:v1,text:"Remove",title:"Remove selected contents (Delete)",disabled:!u}]},{type:"column",items:[{type:"label",text:g},{type:"button",onClick:()=>Ce("structure"),icon:m?ih:Da,text:"Structure",title:g+" structure",disabled:!b},{type:"button",onClick:()=>Ce("object"),icon:m?ih:Da,text:"Object",title:g+" structure",disabled:!y},{type:"button",onClick:()=>Ce("array"),icon:m?ih:Da,text:"Array",title:g+" array",disabled:!_},{type:"button",onClick:()=>Ce("value"),icon:m?ih:Da,text:"Value",title:g+" value",disabled:!M}]}]},{type:"separator"},{type:"row",items:[{type:"button",onClick:()=>ne(),icon:XL,text:"Insert before",title:"Select area before current entry to insert or paste contents",disabled:!u||s},{type:"button",onClick:()=>Te(),icon:UL,text:"Insert after",title:"Select area after current entry to insert or paste contents",disabled:!u||s}]}]),n.$$.dirty[0]&4194368&&t(2,S=H(Ke))},[P,A,S,E,I,O,H,W,q,L,X,Y,G,T,B,J,ne,_e,ae,Te,re,U,Ke,s,u,M,g,m,_,y,b,f,c,o,p,w,d,a,h,i,l,r]}class yV extends je{constructor(e){super(),ze(this,e,bV,gV,Ze,{json:3,documentState:4,parser:5,showTip:0,onCloseContextMenu:1,onRenderContextMenu:6,onEditKey:7,onEditValue:8,onToggleEnforceString:9,onCut:10,onCopy:11,onPaste:12,onRemove:13,onDuplicate:14,onExtract:15,onInsertBefore:16,onInsert:17,onConvert:18,onInsertAfter:19,onSort:20,onTransform:21},null,[-1,-1])}}const kV=yV;function nw(n,e,t){const i=n.slice();return i[13]=e[t],i}function iw(n){let e,t,i=n[13].start+"",r,o,s=n[13].end+"",l,a,u,c;function f(){return n[12](n[13])}return{c(){e=D("button"),t=we("show "),r=we(i),o=we("-"),l=we(s),a=Q(),k(e,"type","button"),k(e,"class","jse-expand-items svelte-gr6i82")},m(h,d){j(h,e,d),x(e,t),x(e,r),x(e,o),x(e,l),x(e,a),u||(c=ue(e,"click",f),u=!0)},p(h,d){n=h,d&16&&i!==(i=n[13].start+"")&&We(r,i),d&16&&s!==(s=n[13].end+"")&&We(l,s)},d(h){h&&z(e),u=!1,c()}}}function wV(n){let e,t,i,r,o,s,l,a,u,c,f=n[4],h=[];for(let d=0;d<f.length;d+=1)h[d]=iw(nw(n,f,d));return{c(){e=D("div"),t=D("div"),i=D("div"),r=we("Items "),o=we(n[3]),s=we("-"),l=we(n[2]),a=Q();for(let d=0;d<h.length;d+=1)h[d].c();k(i,"class","jse-text svelte-gr6i82"),k(e,"role","none"),k(e,"class","jse-collapsed-items svelte-gr6i82"),le(e,"jse-selected",n[5]),li(e,"--level",n[0].length+2)},m(d,p){j(d,e,p),x(e,t),x(t,i),x(i,r),x(i,o),x(i,s),x(i,l),x(t,a);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(t,null);u||(c=ue(e,"mousemove",CV),u=!0)},p(d,[p]){if(p&8&&We(o,d[3]),p&4&&We(l,d[2]),p&19){f=d[4];let m;for(m=0;m<f.length;m+=1){const g=nw(d,f,m);h[m]?h[m].p(g,p):(h[m]=iw(g),h[m].c(),h[m].m(t,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=f.length}p&32&&le(e,"jse-selected",d[5]),p&1&&li(e,"--level",d[0].length+2)},i:he,o:he,d(d){d&&z(e),mn(h,d),u=!1,c()}}}function CV(n){n.stopPropagation()}function _V(n,e,t){let i,r,o,s,l,{visibleSections:a}=e,{sectionIndex:u}=e,{total:c}=e,{path:f}=e,{selection:h}=e,{onExpandSection:d}=e,{context:p}=e;const m=g=>d(f,g);return n.$$set=g=>{"visibleSections"in g&&t(6,a=g.visibleSections),"sectionIndex"in g&&t(7,u=g.sectionIndex),"total"in g&&t(8,c=g.total),"path"in g&&t(0,f=g.path),"selection"in g&&t(9,h=g.selection),"onExpandSection"in g&&t(1,d=g.onExpandSection),"context"in g&&t(10,p=g.context)},n.$$.update=()=>{n.$$.dirty&192&&t(11,i=a[u]),n.$$.dirty&2048&&t(3,r=i.end),n.$$.dirty&448&&t(2,o=a[u+1]?a[u+1].start:c),n.$$.dirty&1545&&t(5,s=Fc(p.getJson(),h,f.concat(String(r)))),n.$$.dirty&12&&t(4,l=zB(r,o))},[f,d,o,r,l,s,a,u,c,h,p,i,m]}class SV extends je{constructor(e){super(),ze(this,e,_V,wV,Ze,{visibleSections:6,sectionIndex:7,total:8,path:0,selection:9,onExpandSection:1,context:10})}}const vV=SV;function xV(n){let e,t,i,r,o;return t=new ht({props:{data:lr}}),{c(){e=D("button"),$(t.$$.fragment),k(e,"type","button"),k(e,"class","jse-context-menu-pointer svelte-11pcr4t"),k(e,"title",r2),le(e,"jse-selected",n[0])},m(s,l){j(s,e,l),ee(t,e,null),i=!0,r||(o=ue(e,"click",n[1]),r=!0)},p(s,[l]){(!i||l&1)&&le(e,"jse-selected",s[0])},i(s){i||(C(t.$$.fragment,s),i=!0)},o(s){v(t.$$.fragment,s),i=!1},d(s){s&&z(e),te(t),r=!1,o()}}}function MV(n,e,t){let{selected:i}=e,{onContextMenu:r}=e;function o(s){let l=s.target;for(;l&&l.nodeName!=="BUTTON";)l=l.parentNode;l&&r({anchor:l,left:0,top:0,width:Uo,height:Wo,offsetTop:2,offsetLeft:0,showTip:!0})}return n.$$set=s=>{"selected"in s&&t(0,i=s.selected),"onContextMenu"in s&&t(2,r=s.onContextMenu)},[i,o,r]}class AV extends je{constructor(e){super(),ze(this,e,MV,xV,Ze,{selected:0,onContextMenu:2})}}const ll=AV;function EV(n){let e,t,i,r,o,s,l;const a=[DV,TV],u=[];function c(f,h){return f[1]?0:1}return t=c(n),i=u[t]=a[t](n),{c(){e=D("div"),i.c(),k(e,"role","none"),k(e,"data-type","selectable-key"),k(e,"class",r=Zt(n[6](n[0]))+" svelte-1y4e50b")},m(f,h){j(f,e,h),u[t].m(e,null),o=!0,s||(l=ue(e,"dblclick",n[5]),s=!0)},p(f,h){let d=t;t=c(f),t===d?u[t].p(f,h):(ce(),v(u[d],1,1,()=>{u[d]=null}),fe(),i=u[t],i?i.p(f,h):(i=u[t]=a[t](f),i.c()),C(i,1),i.m(e,null)),(!o||h&1&&r!==(r=Zt(f[6](f[0]))+" svelte-1y4e50b"))&&k(e,"class",r)},i(f){o||(C(i),o=!0)},o(f){v(i),o=!1},d(f){f&&z(e),u[t].d(),s=!1,l()}}}function OV(n){let e,t;return e=new Yv({props:{value:n[2].normalization.escapeValue(n[0]),shortText:!0,onChange:n[7],onCancel:n[8],onFind:n[2].onFind}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&5&&(o.value=i[2].normalization.escapeValue(i[0])),r&4&&(o.onFind=i[2].onFind),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function TV(n){let e=ql(n[2].normalization.escapeValue(n[0]))+"",t;return{c(){t=we(e)},m(i,r){j(i,t,r)},p(i,r){r&5&&e!==(e=ql(i[2].normalization.escapeValue(i[0]))+"")&&We(t,e)},i:he,o:he,d(i){i&&z(t)}}}function DV(n){let e,t;return e=new i8({props:{text:n[2].normalization.escapeValue(n[0]),searchResultItems:n[1]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&5&&(o.text=i[2].normalization.escapeValue(i[0])),r&2&&(o.searchResultItems=i[1]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function rw(n){let e,t;return e=new ll({props:{selected:!0,onContextMenu:n[2].onContextMenu}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&4&&(o.onContextMenu=i[2].onContextMenu),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function PV(n){let e,t,i,r,o;const s=[OV,EV],l=[];function a(c,f){return!c[2].readOnly&&c[4]?0:1}e=a(n),t=l[e]=s[e](n);let u=!n[2].readOnly&&n[3]&&!n[4]&&rw(n);return{c(){t.c(),i=Q(),u&&u.c(),r=ut()},m(c,f){l[e].m(c,f),j(c,i,f),u&&u.m(c,f),j(c,r,f),o=!0},p(c,[f]){let h=e;e=a(c),e===h?l[e].p(c,f):(ce(),v(l[h],1,1,()=>{l[h]=null}),fe(),t=l[e],t?t.p(c,f):(t=l[e]=s[e](c),t.c()),C(t,1),t.m(i.parentNode,i)),!c[2].readOnly&&c[3]&&!c[4]?u?(u.p(c,f),f&28&&C(u,1)):(u=rw(c),u.c(),C(u,1),u.m(r.parentNode,r)):u&&(ce(),v(u,1,1,()=>{u=null}),fe())},i(c){o||(C(t),C(u),o=!0)},o(c){v(t),v(u),o=!1},d(c){l[e].d(c),c&&z(i),u&&u.d(c),c&&z(r)}}}function RV(n,e,t){let i,r,{path:o}=e,{key:s}=e,{selection:l}=e,{searchResultItems:a}=e,{onUpdateKey:u}=e,{context:c}=e;function f(m){!r&&!c.readOnly&&(m.preventDefault(),c.onSelect(hr(o,!0)))}function h(m){return ko("jse-key",{"jse-empty":m===""})}function d(m,g){const b=u(s,c.normalization.unescapeValue(m)),y=at(o).concat(b);c.onSelect(g===Fs.nextInside?tt(y,!1):hr(y,!1)),g!==Fs.self&&c.focus()}function p(){c.onSelect(hr(o,!1)),c.focus()}return n.$$set=m=>{"path"in m&&t(9,o=m.path),"key"in m&&t(0,s=m.key),"selection"in m&&t(10,l=m.selection),"searchResultItems"in m&&t(1,a=m.searchResultItems),"onUpdateKey"in m&&t(11,u=m.onUpdateKey),"context"in m&&t(2,c=m.context)},n.$$.update=()=>{n.$$.dirty&1536&&t(3,i=l?un(l)&&st(l.path,o):!1),n.$$.dirty&1032&&t(4,r=i&&hi(l))},[s,a,c,i,r,f,h,d,p,o,l,u]}class NV extends je{constructor(e){super(),ze(this,e,RV,PV,Ze,{path:9,key:0,selection:10,searchResultItems:1,onUpdateKey:11,context:2})}}const IV=NV;function ow(n,e,t){const i=n.slice();return i[8]=e[t],i}function BV(n){const e=n.slice(),t=e[8].action;return e[11]=t,e}function LV(n){let e=n[8].component,t,i,r=sw(n);return{c(){r.c(),t=ut()},m(o,s){r.m(o,s),j(o,t,s),i=!0},p(o,s){s&1&&Ze(e,e=o[8].component)?(ce(),v(r,1,1,he),fe(),r=sw(o),r.c(),C(r,1),r.m(t.parentNode,t)):r.p(o,s)},i(o){i||(C(r),i=!0)},o(o){v(r),i=!1},d(o){o&&z(t),r.d(o)}}}function FV(n){let e=n[8].action,t,i=lw(n);return{c(){i.c(),t=ut()},m(r,o){i.m(r,o),j(r,t,o)},p(r,o){o&1&&Ze(e,e=r[8].action)?(i.d(1),i=lw(r),i.c(),i.m(t.parentNode,t)):i.p(r,o)},i:he,o:he,d(r){r&&z(t),i.d(r)}}}function sw(n){let e,t,i;const r=[n[8].props];var o=n[8].component;function s(l){let a={};for(let u=0;u<r.length;u+=1)a=Qi(a,r[u]);return{props:a}}return o&&(e=bo(o,s())),{c(){e&&$(e.$$.fragment),t=ut()},m(l,a){e&&ee(e,l,a),j(l,t,a),i=!0},p(l,a){const u=a&1?us(r,[yf(l[8].props)]):{};if(a&1&&o!==(o=l[8].component)){if(e){ce();const c=e;v(c.$$.fragment,1,0,()=>{te(c,1)}),fe()}o?(e=bo(o,s()),$(e.$$.fragment),C(e.$$.fragment,1),ee(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(l){i||(e&&C(e.$$.fragment,l),i=!0)},o(l){e&&v(e.$$.fragment,l),i=!1},d(l){l&&z(t),e&&te(e,l)}}}function lw(n){let e,t,i,r;return{c(){e=D("div"),k(e,"role","button"),k(e,"tabindex","-1"),k(e,"class","jse-value jse-readonly-password"),k(e,"data-type","selectable-value")},m(o,s){j(o,e,s),i||(r=vn(t=n[11].call(null,e,n[8].props)),i=!0)},p(o,s){n=o,t&&Ei(t.update)&&s&1&&t.update.call(null,n[8].props)},d(o){o&&z(e),i=!1,r()}}}function aw(n){let e,t,i,r,o;const s=[FV,LV],l=[];function a(c,f){return f&1&&(e=null),e==null&&(e=!!v8(c[8])),e?0:1}function u(c,f){return f===0?BV(c):c}return t=a(n,-1),i=l[t]=s[t](u(n,t)),{c(){i.c(),r=ut()},m(c,f){l[t].m(c,f),j(c,r,f),o=!0},p(c,f){let h=t;t=a(c,f),t===h?l[t].p(u(c,t),f):(ce(),v(l[h],1,1,()=>{l[h]=null}),fe(),i=l[t],i?i.p(u(c,t),f):(i=l[t]=s[t](u(c,t)),i.c()),C(i,1),i.m(r.parentNode,r))},i(c){o||(C(i),o=!0)},o(c){v(i),o=!1},d(c){l[t].d(c),c&&z(r)}}}function jV(n){let e,t,i=n[0],r=[];for(let s=0;s<i.length;s+=1)r[s]=aw(ow(n,i,s));const o=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=ut()},m(s,l){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,l);j(s,e,l),t=!0},p(s,[l]){if(l&1){i=s[0];let a;for(a=0;a<i.length;a+=1){const u=ow(s,i,a);r[a]?(r[a].p(u,l),C(r[a],1)):(r[a]=aw(u),r[a].c(),C(r[a],1),r[a].m(e.parentNode,e))}for(ce(),a=i.length;a<r.length;a+=1)o(a);fe()}},i(s){if(!t){for(let l=0;l<i.length;l+=1)C(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)v(r[l]);t=!1},d(s){mn(r,s),s&&z(e)}}}function zV(n,e,t){let i,r,{path:o}=e,{value:s}=e,{context:l}=e,{enforceString:a}=e,{selection:u}=e,{searchResultItems:c}=e;return n.$$set=f=>{"path"in f&&t(1,o=f.path),"value"in f&&t(2,s=f.value),"context"in f&&t(3,l=f.context),"enforceString"in f&&t(4,a=f.enforceString),"selection"in f&&t(5,u=f.selection),"searchResultItems"in f&&t(6,c=f.searchResultItems)},n.$$.update=()=>{n.$$.dirty&32&&t(7,i=mt(u)&&hi(u)),n.$$.dirty&254&&t(0,r=l.onRenderValue({path:o,value:s,readOnly:l.readOnly,enforceString:a,isEditing:i,parser:l.parser,normalization:l.normalization,selection:u,searchResultItems:c,onPatch:l.onPatch,onPasteJson:l.onPasteJson,onSelect:l.onSelect,onFind:l.onFind,findNextInside:l.findNextInside,focus:l.focus}))},[r,o,s,l,a,u,c,i]}let VV=class extends je{constructor(e){super(),ze(this,e,zV,jV,Ze,{path:1,value:2,context:3,enforceString:4,selection:5,searchResultItems:6})}};const HV=VV,An={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function Q0({json:n,documentState:e,deltaY:t,items:i}){if(!e.selection)return{operations:void 0,updatedSelection:null,offset:0};const r=e.selection,o=t<0?qV({json:n,selection:r,deltaY:t,items:i}):WV({json:n,selection:r,deltaY:t,items:i});if(!o||o.offset===0)return{operations:void 0,updatedSelection:null,offset:0};const s=hL(n,r,o),l=at(is(n,r)),a=Pe(n,l);if(Array.isArray(a)){const u=UV({items:i,json:n,selection:r,offset:o.offset});return{operations:s,updatedSelection:u,offset:o.offset}}else return{operations:s,updatedSelection:null,offset:o.offset}}function qV({json:n,items:e,selection:t,deltaY:i}){const r=is(n,t),o=e.findIndex(f=>st(f.path,r)),s=()=>{var f;return(f=e[l-1])==null?void 0:f.height};let l=o,a=0;for(;s()!==void 0&&Math.abs(i)>a+s()/2;)a+=s(),l-=1;const u=e[l].path,c=l-o;return l!==o&&e[l]!==void 0?{beforePath:u,offset:c}:void 0}function WV({json:n,items:e,selection:t,deltaY:i}){var m;const r=sl(n,t),o=e.findIndex(g=>st(g.path,r));let s=0,l=o;const a=()=>{var g;return(g=e[l+1])==null?void 0:g.height};for(;a()!==void 0&&Math.abs(i)>s+a()/2;)s+=a(),l+=1;const u=at(r),c=Pe(n,u),h=Array.isArray(c)?l:l+1,d=(m=e[h])==null?void 0:m.path,p=l-o;return d?{beforePath:d,offset:p}:{append:!0,offset:p}}function UV({items:n,json:e,selection:t,offset:i}){var c,f;const r=is(e,t),o=sl(e,t),s=n.findIndex(h=>st(h.path,r)),l=n.findIndex(h=>st(h.path,o)),a=(c=n[s+i])==null?void 0:c.path,u=(f=n[l+i])==null?void 0:f.path;return ui(a,u)}function JV(n,e){if(!n)return;const t={};for(const i of Object.keys(n))e(i,n[i])&&(t[i]=n[i]);return Object.keys(t).length>0?t:void 0}function $r(n,e){return JV(n,t=>Sp(t,e))}function KV(n){let e,t,i,r,o,s;return t=new ht({props:{data:oa}}),{c(){e=D("button"),$(t.$$.fragment),k(e,"type","button"),k(e,"class","jse-validation-error svelte-g0bfge")},m(l,a){j(l,e,a),ee(t,e,null),r=!0,o||(s=[ue(e,"click",function(){Ei(n[0])&&n[0].apply(this,arguments)}),vn(i=T2.call(null,e,{text:n[1],...n[2]}))],o=!0)},p(l,[a]){n=l,i&&Ei(i.update)&&a&2&&i.update.call(null,{text:n[1],...n[2]})},i(l){r||(C(t.$$.fragment,l),r=!0)},o(l){v(t.$$.fragment,l),r=!1},d(l){l&&z(e),te(t),o=!1,fn(s)}}}function GV(n,e,t){let i;const r=Vn("absolute-popup");let{validationError:o}=e,{onExpand:s}=e;return n.$$set=l=>{"validationError"in l&&t(3,o=l.validationError),"onExpand"in l&&t(0,s=l.onExpand)},n.$$.update=()=>{n.$$.dirty&8&&t(1,i=wz(o)&&o.isChildError?"Contains invalid data":o.message)},[s,i,r,o]}class QV extends je{constructor(e){super(),ze(this,e,GV,KV,xn,{validationError:3,onExpand:0})}}const Iu=QV;const XV=n=>({}),uw=n=>({});function cw(n,e,t){const i=n.slice();return i[52]=e[t],i}const YV=n=>({}),fw=n=>({});function hw(n,e,t){const i=n.slice();return i[46]=e[t],i[48]=t,i}function dw(n,e,t){const i=n.slice();return i[49]=e[t],i}const ZV=n=>({}),pw=n=>({});function $V(n){let e,t,i,r,o,s,l=!n[8].readOnly&&n[16]&&n[7]&&(mt(n[7])||vt(n[7]))&&!hi(n[7])&&st(Fe(n[7]),n[1]),a,u,c;const f=n[33].identifier,h=tn(f,n,n[34],uw);let d=!n[17]&&mw();o=new HV({props:{path:n[1],value:n[0],enforceString:n[13]||!1,selection:n[16]?n[7]:null,searchResultItems:Ik(n[6],n[9]),context:n[8]}});let p=l&&gw(n),m=n[15]&&bw(n),g=!n[17]&&yw(n);return{c(){e=D("div"),t=D("div"),h&&h.c(),i=Q(),d&&d.c(),r=Q(),$(o.$$.fragment),s=Q(),p&&p.c(),a=Q(),m&&m.c(),u=Q(),g&&g.c(),k(t,"class","jse-contents svelte-yxg7gq"),k(e,"class","jse-contents-outer svelte-yxg7gq")},m(b,y){j(b,e,y),x(e,t),h&&h.m(t,null),x(t,i),d&&d.m(t,null),x(t,r),ee(o,t,null),x(t,s),p&&p.m(t,null),x(e,a),m&&m.m(e,null),x(e,u),g&&g.m(e,null),c=!0},p(b,y){h&&h.p&&(!c||y[1]&8)&&nn(h,f,b,b[34],c?on(f,b[34],y,XV):rn(b[34]),uw),b[17]?d&&(d.d(1),d=null):d||(d=mw(),d.c(),d.m(t,r));const _={};y[0]&2&&(_.path=b[1]),y[0]&1&&(_.value=b[0]),y[0]&8192&&(_.enforceString=b[13]||!1),y[0]&65664&&(_.selection=b[16]?b[7]:null),y[0]&576&&(_.searchResultItems=Ik(b[6],b[9])),y[0]&256&&(_.context=b[8]),o.$set(_),y[0]&65922&&(l=!b[8].readOnly&&b[16]&&b[7]&&(mt(b[7])||vt(b[7]))&&!hi(b[7])&&st(Fe(b[7]),b[1])),l?p?(p.p(b,y),y[0]&65922&&C(p,1)):(p=gw(b),p.c(),C(p,1),p.m(t,null)):p&&(ce(),v(p,1,1,()=>{p=null}),fe()),b[15]?m?(m.p(b,y),y[0]&32768&&C(m,1)):(m=bw(b),m.c(),C(m,1),m.m(e,u)):m&&(ce(),v(m,1,1,()=>{m=null}),fe()),b[17]?g&&(g.d(1),g=null):g?g.p(b,y):(g=yw(b),g.c(),g.m(e,null))},i(b){c||(C(h,b),C(o.$$.fragment,b),C(p),C(m),c=!0)},o(b){v(h,b),v(o.$$.fragment,b),v(p),v(m),c=!1},d(b){b&&z(e),h&&h.d(b),d&&d.d(),te(o),p&&p.d(),m&&m.d(),g&&g.d()}}}function eH(n){let e,t,i,r,o,s,l,a,u,c,f,h=!n[8].readOnly&&n[16]&&n[7]&&(mt(n[7])||vt(n[7]))&&!hi(n[7])&&st(Fe(n[7]),n[1]),d,p,m,g,b,y,_;const M=[iH,nH],w=[];function S(T,B){return T[12]?0:1}r=S(n),o=w[r]=M[r](n);const E=n[33].identifier,I=tn(E,n,n[34],fw);let O=!n[17]&&kw();function P(T,B){return T[12]?oH:rH}let A=P(n),H=A(n),W=h&&ww(n),q=n[15]&&(!n[12]||!n[15].isChildError)&&Cw(n);function L(T,B){if(T[12])return lH;if(!T[17])return sH}let X=L(n),Y=X&&X(n),G=n[12]&&_w(n);return{c(){e=D("div"),t=D("div"),i=D("button"),o.c(),s=Q(),I&&I.c(),l=Q(),O&&O.c(),a=Q(),u=D("div"),c=D("div"),H.c(),f=Q(),W&&W.c(),d=Q(),q&&q.c(),p=Q(),Y&&Y.c(),m=Q(),G&&G.c(),g=ut(),k(i,"type","button"),k(i,"class","jse-expand svelte-yxg7gq"),k(i,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),k(c,"class","jse-meta-inner svelte-yxg7gq"),k(u,"class","jse-meta svelte-yxg7gq"),k(u,"data-type","selectable-value"),k(t,"class","jse-header svelte-yxg7gq"),k(e,"class","jse-header-outer svelte-yxg7gq")},m(T,B){j(T,e,B),x(e,t),x(t,i),w[r].m(i,null),x(t,s),I&&I.m(t,null),x(t,l),O&&O.m(t,null),x(t,a),x(t,u),x(u,c),H.m(c,null),x(t,f),W&&W.m(t,null),x(e,d),q&&q.m(e,null),x(e,p),Y&&Y.m(e,null),j(T,m,B),G&&G.m(T,B),j(T,g,B),b=!0,y||(_=ue(i,"click",n[20]),y=!0)},p(T,B){let J=r;r=S(T),r===J?w[r].p(T,B):(ce(),v(w[J],1,1,()=>{w[J]=null}),fe(),o=w[r],o?o.p(T,B):(o=w[r]=M[r](T),o.c()),C(o,1),o.m(i,null)),I&&I.p&&(!b||B[1]&8)&&nn(I,E,T,T[34],b?on(E,T[34],B,YV):rn(T[34]),fw),T[17]?O&&(O.d(1),O=null):O||(O=kw(),O.c(),O.m(t,a)),A===(A=P(T))&&H?H.p(T,B):(H.d(1),H=A(T),H&&(H.c(),H.m(c,null))),B[0]&65922&&(h=!T[8].readOnly&&T[16]&&T[7]&&(mt(T[7])||vt(T[7]))&&!hi(T[7])&&st(Fe(T[7]),T[1])),h?W?(W.p(T,B),B[0]&65922&&C(W,1)):(W=ww(T),W.c(),C(W,1),W.m(t,null)):W&&(ce(),v(W,1,1,()=>{W=null}),fe()),T[15]&&(!T[12]||!T[15].isChildError)?q?(q.p(T,B),B[0]&36864&&C(q,1)):(q=Cw(T),q.c(),C(q,1),q.m(e,p)):q&&(ce(),v(q,1,1,()=>{q=null}),fe()),X===(X=L(T))&&Y?Y.p(T,B):(Y&&Y.d(1),Y=X&&X(T),Y&&(Y.c(),Y.m(e,null))),T[12]?G?(G.p(T,B),B[0]&4096&&C(G,1)):(G=_w(T),G.c(),C(G,1),G.m(g.parentNode,g)):G&&(ce(),v(G,1,1,()=>{G=null}),fe())},i(T){b||(C(o),C(I,T),C(W),C(q),C(G),b=!0)},o(T){v(o),v(I,T),v(W),v(q),v(G),b=!1},d(T){T&&z(e),w[r].d(),I&&I.d(T),O&&O.d(),H.d(),W&&W.d(),q&&q.d(),Y&&Y.d(),T&&z(m),G&&G.d(T),T&&z(g),y=!1,_()}}}function tH(n){let e,t,i,r,o,s,l,a,u,c,f,h=!n[8].readOnly&&n[16]&&n[7]&&(mt(n[7])||vt(n[7]))&&!hi(n[7])&&st(Fe(n[7]),n[1]),d,p,m,g,b,y,_;const M=[cH,uH],w=[];function S(T,B){return T[12]?0:1}r=S(n),o=w[r]=M[r](n);const E=n[33].identifier,I=tn(E,n,n[34],pw);let O=!n[17]&&Mw();function P(T,B){return T[12]?hH:fH}let A=P(n),H=A(n),W=h&&Aw(n),q=n[15]&&(!n[12]||!n[15].isChildError)&&Ew(n);function L(T,B){return T[12]?pH:dH}let X=L(n),Y=X(n),G=n[12]&&Ow(n);return{c(){e=D("div"),t=D("div"),i=D("button"),o.c(),s=Q(),I&&I.c(),l=Q(),O&&O.c(),a=Q(),u=D("div"),c=D("div"),H.c(),f=Q(),W&&W.c(),d=Q(),q&&q.c(),p=Q(),Y.c(),m=Q(),G&&G.c(),g=ut(),k(i,"type","button"),k(i,"class","jse-expand svelte-yxg7gq"),k(i,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),k(c,"class","jse-meta-inner svelte-yxg7gq"),k(c,"data-type","selectable-value"),k(u,"class","jse-meta svelte-yxg7gq"),k(t,"class","jse-header svelte-yxg7gq"),k(e,"class","jse-header-outer svelte-yxg7gq")},m(T,B){j(T,e,B),x(e,t),x(t,i),w[r].m(i,null),x(t,s),I&&I.m(t,null),x(t,l),O&&O.m(t,null),x(t,a),x(t,u),x(u,c),H.m(c,null),x(t,f),W&&W.m(t,null),x(e,d),q&&q.m(e,null),x(e,p),Y.m(e,null),j(T,m,B),G&&G.m(T,B),j(T,g,B),b=!0,y||(_=ue(i,"click",n[20]),y=!0)},p(T,B){let J=r;r=S(T),r===J?w[r].p(T,B):(ce(),v(w[J],1,1,()=>{w[J]=null}),fe(),o=w[r],o?o.p(T,B):(o=w[r]=M[r](T),o.c()),C(o,1),o.m(i,null)),I&&I.p&&(!b||B[1]&8)&&nn(I,E,T,T[34],b?on(E,T[34],B,ZV):rn(T[34]),pw),T[17]?O&&(O.d(1),O=null):O||(O=Mw(),O.c(),O.m(t,a)),A===(A=P(T))&&H?H.p(T,B):(H.d(1),H=A(T),H&&(H.c(),H.m(c,null))),B[0]&65922&&(h=!T[8].readOnly&&T[16]&&T[7]&&(mt(T[7])||vt(T[7]))&&!hi(T[7])&&st(Fe(T[7]),T[1])),h?W?(W.p(T,B),B[0]&65922&&C(W,1)):(W=Aw(T),W.c(),C(W,1),W.m(t,null)):W&&(ce(),v(W,1,1,()=>{W=null}),fe()),T[15]&&(!T[12]||!T[15].isChildError)?q?(q.p(T,B),B[0]&36864&&C(q,1)):(q=Ew(T),q.c(),C(q,1),q.m(e,p)):q&&(ce(),v(q,1,1,()=>{q=null}),fe()),X===(X=L(T))&&Y?Y.p(T,B):(Y.d(1),Y=X(T),Y&&(Y.c(),Y.m(e,null))),T[12]?G?(G.p(T,B),B[0]&4096&&C(G,1)):(G=Ow(T),G.c(),C(G,1),G.m(g.parentNode,g)):G&&(ce(),v(G,1,1,()=>{G=null}),fe())},i(T){b||(C(o),C(I,T),C(W),C(q),C(G),b=!0)},o(T){v(o),v(I,T),v(W),v(q),v(G),b=!1},d(T){T&&z(e),w[r].d(),I&&I.d(T),O&&O.d(),H.d(),W&&W.d(),q&&q.d(),Y.d(),T&&z(m),G&&G.d(T),T&&z(g),y=!1,_()}}}function mw(n){let e;return{c(){e=D("div"),e.textContent=":",k(e,"class","jse-separator svelte-yxg7gq")},m(t,i){j(t,e,i)},d(t){t&&z(e)}}}function gw(n){let e,t,i;return t=new ll({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-context-menu-pointer-anchor svelte-yxg7gq")},m(r,o){j(r,e,o),ee(t,e,null),i=!0},p(r,o){const s={};o[0]&256&&(s.onContextMenu=r[8].onContextMenu),t.$set(s)},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){v(t.$$.fragment,r),i=!1},d(r){r&&z(e),te(t)}}}function bw(n){let e,t;return e=new Iu({props:{validationError:n[15],onExpand:n[21]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&32768&&(o.validationError=i[15]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function yw(n){let e,t,i;return{c(){e=D("div"),k(e,"role","none"),k(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),k(e,"data-type","insert-selection-area-after")},m(r,o){j(r,e,o),t||(i=ue(e,"click",n[29]),t=!0)},p:he,d(r){r&&z(e),t=!1,i()}}}function nH(n){let e,t;return e=new ht({props:{data:Os}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p:he,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function iH(n){let e,t;return e=new ht({props:{data:lr}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p:he,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function kw(n){let e;return{c(){e=D("div"),e.textContent=":",k(e,"class","jse-separator svelte-yxg7gq")},m(t,i){j(t,e,i)},d(t){t&&z(e)}}}function rH(n){let e,t,i,r=Object.keys(n[0]).length+"",o,s,l=Object.keys(n[0]).length===1?"prop":"props",a,u,c,f,h;return{c(){e=D("div"),e.textContent="{",t=Q(),i=D("button"),o=we(r),s=Q(),a=we(l),u=Q(),c=D("div"),c.textContent="}",k(e,"class","jse-bracket svelte-yxg7gq"),k(i,"type","button"),k(i,"class","jse-tag svelte-yxg7gq"),k(c,"class","jse-bracket svelte-yxg7gq")},m(d,p){j(d,e,p),j(d,t,p),j(d,i,p),x(i,o),x(i,s),x(i,a),j(d,u,p),j(d,c,p),f||(h=ue(i,"click",n[21]),f=!0)},p(d,p){p[0]&1&&r!==(r=Object.keys(d[0]).length+"")&&We(o,r),p[0]&1&&l!==(l=Object.keys(d[0]).length===1?"prop":"props")&&We(a,l)},d(d){d&&z(e),d&&z(t),d&&z(i),d&&z(u),d&&z(c),f=!1,h()}}}function oH(n){let e;return{c(){e=D("div"),e.textContent="{",k(e,"class","jse-bracket jse-expanded svelte-yxg7gq")},m(t,i){j(t,e,i)},p:he,d(t){t&&z(e)}}}function ww(n){let e,t,i;return t=new ll({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-context-menu-pointer-anchor svelte-yxg7gq")},m(r,o){j(r,e,o),ee(t,e,null),i=!0},p(r,o){const s={};o[0]&256&&(s.onContextMenu=r[8].onContextMenu),t.$set(s)},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){v(t.$$.fragment,r),i=!1},d(r){r&&z(e),te(t)}}}function Cw(n){let e,t;return e=new Iu({props:{validationError:n[15],onExpand:n[21]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&32768&&(o.validationError=i[15]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function sH(n){let e,t,i;return{c(){e=D("div"),k(e,"role","none"),k(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),k(e,"data-type","insert-selection-area-after")},m(r,o){j(r,e,o),t||(i=ue(e,"click",n[29]),t=!0)},p:he,d(r){r&&z(e),t=!1,i()}}}function lH(n){let e,t,i;return{c(){e=D("div"),k(e,"role","none"),k(e,"class","jse-insert-selection-area jse-inside svelte-yxg7gq"),k(e,"data-type","insert-selection-area-inside")},m(r,o){j(r,e,o),t||(i=ue(e,"click",n[28]),t=!0)},p:he,d(r){r&&z(e),t=!1,i()}}}function _w(n){let e,t=!n[8].readOnly&&(n[10]===es||n[16]&&pn(n[7])),i,r,o,s,l,a,u=t&&Sw(n),c=n[18](n[1],n[0],n[2],n[3],n[4],n[5],n[6],n[7],n[11]),f=[];for(let p=0;p<c.length;p+=1)f[p]=vw(cw(n,c,p));const h=p=>v(f[p],1,1,()=>{f[p]=null});let d=!n[17]&&xw(n);return{c(){e=D("div"),u&&u.c(),i=Q();for(let p=0;p<f.length;p+=1)f[p].c();r=Q(),o=D("div"),s=D("div"),s.innerHTML='<div class="jse-bracket svelte-yxg7gq">}</div>',l=Q(),d&&d.c(),k(e,"class","jse-props svelte-yxg7gq"),k(s,"data-type","selectable-value"),k(s,"class","jse-footer svelte-yxg7gq"),k(o,"class","jse-footer-outer svelte-yxg7gq")},m(p,m){j(p,e,m),u&&u.m(e,null),x(e,i);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(e,null);j(p,r,m),j(p,o,m),x(o,s),x(o,l),d&&d.m(o,null),a=!0},p(p,m){if(m[0]&66944&&(t=!p[8].readOnly&&(p[10]===es||p[16]&&pn(p[7]))),t?u?(u.p(p,m),m[0]&66944&&C(u,1)):(u=Sw(p),u.c(),C(u,1),u.m(e,i)):u&&(ce(),v(u,1,1,()=>{u=null}),fe()),m[0]&38013439){c=p[18](p[1],p[0],p[2],p[3],p[4],p[5],p[6],p[7],p[11]);let g;for(g=0;g<c.length;g+=1){const b=cw(p,c,g);f[g]?(f[g].p(b,m),C(f[g],1)):(f[g]=vw(b),f[g].c(),C(f[g],1),f[g].m(e,null))}for(ce(),g=c.length;g<f.length;g+=1)h(g);fe()}p[17]?d&&(d.d(1),d=null):d?d.p(p,m):(d=xw(p),d.c(),d.m(o,null))},i(p){if(!a){C(u);for(let m=0;m<c.length;m+=1)C(f[m]);a=!0}},o(p){v(u),f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)v(f[m]);a=!1},d(p){p&&z(e),u&&u.d(),mn(f,p),p&&z(r),p&&z(o),d&&d.d()}}}function Sw(n){let e,t,i;return t=new ll({props:{selected:n[16]&&pn(n[7]),onContextMenu:n[30]}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-insert-area jse-inside svelte-yxg7gq"),k(e,"data-type","insert-selection-area-inside"),k(e,"title",i2),le(e,"jse-hovered",n[10]===es),le(e,"jse-selected",n[16]&&pn(n[7])),li(e,"--level",n[1].length+1)},m(r,o){j(r,e,o),ee(t,e,null),i=!0},p(r,o){const s={};o[0]&65664&&(s.selected=r[16]&&pn(r[7])),t.$set(s),(!i||o[0]&1024)&&le(e,"jse-hovered",r[10]===es),(!i||o[0]&65664)&&le(e,"jse-selected",r[16]&&pn(r[7])),o[0]&2&&li(e,"--level",r[1].length+1)},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){v(t.$$.fragment,r),i=!1},d(r){r&&z(e),te(t)}}}function aH(n){let e,t,i,r;return t=new IV({props:{path:n[52].path,key:n[52].key,selection:n[52].selection,searchResultItems:n[52].keySearchResultItemsMap,context:n[8],onUpdateKey:n[22]}}),{c(){e=D("div"),$(t.$$.fragment),i=Q(),k(e,"slot","identifier"),k(e,"class","jse-identifier svelte-yxg7gq")},m(o,s){j(o,e,s),ee(t,e,null),x(e,i),r=!0},p(o,s){const l={};s[0]&2303&&(l.path=o[52].path),s[0]&2303&&(l.key=o[52].key),s[0]&2303&&(l.selection=o[52].selection),s[0]&2303&&(l.searchResultItems=o[52].keySearchResultItemsMap),s[0]&256&&(l.context=o[8]),t.$set(l)},i(o){r||(C(t.$$.fragment,o),r=!0)},o(o){v(t.$$.fragment,o),r=!1},d(o){o&&z(e),te(t)}}}function vw(n){let e,t;return e=new q2({props:{value:n[52].value,path:n[52].path,expandedMap:n[52].expandedMap,enforceStringMap:n[52].enforceStringMap,visibleSectionsMap:n[52].visibleSectionsMap,validationErrorsMap:n[52].validationErrorsMap,searchResultItemsMap:n[52].valueSearchResultItemsMap,selection:n[52].selection,context:n[8],onDragSelectionStart:n[25],$$slots:{identifier:[aH]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&2303&&(o.value=i[52].value),r[0]&2303&&(o.path=i[52].path),r[0]&2303&&(o.expandedMap=i[52].expandedMap),r[0]&2303&&(o.enforceStringMap=i[52].enforceStringMap),r[0]&2303&&(o.visibleSectionsMap=i[52].visibleSectionsMap),r[0]&2303&&(o.validationErrorsMap=i[52].validationErrorsMap),r[0]&2303&&(o.searchResultItemsMap=i[52].valueSearchResultItemsMap),r[0]&2303&&(o.selection=i[52].selection),r[0]&256&&(o.context=i[8]),r[0]&2559|r[1]&8&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function xw(n){let e,t,i;return{c(){e=D("div"),k(e,"role","none"),k(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),k(e,"data-type","insert-selection-area-after")},m(r,o){j(r,e,o),t||(i=ue(e,"click",n[29]),t=!0)},p:he,d(r){r&&z(e),t=!1,i()}}}function uH(n){let e,t;return e=new ht({props:{data:Os}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p:he,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function cH(n){let e,t;return e=new ht({props:{data:lr}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p:he,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Mw(n){let e;return{c(){e=D("div"),e.textContent=":",k(e,"class","jse-separator svelte-yxg7gq")},m(t,i){j(t,e,i)},d(t){t&&z(e)}}}function fH(n){let e,t,i,r=n[0].length+"",o,s,l=n[0].length===1?"item":"items",a,u,c,f,h;return{c(){e=D("div"),e.textContent="[",t=Q(),i=D("button"),o=we(r),s=Q(),a=we(l),u=Q(),c=D("div"),c.textContent="]",k(e,"class","jse-bracket svelte-yxg7gq"),k(i,"type","button"),k(i,"class","jse-tag svelte-yxg7gq"),k(c,"class","jse-bracket svelte-yxg7gq")},m(d,p){j(d,e,p),j(d,t,p),j(d,i,p),x(i,o),x(i,s),x(i,a),j(d,u,p),j(d,c,p),f||(h=ue(i,"click",n[21]),f=!0)},p(d,p){p[0]&1&&r!==(r=d[0].length+"")&&We(o,r),p[0]&1&&l!==(l=d[0].length===1?"item":"items")&&We(a,l)},d(d){d&&z(e),d&&z(t),d&&z(i),d&&z(u),d&&z(c),f=!1,h()}}}function hH(n){let e,t,i,r=n[0].length+"",o,s,l=n[0].length===1?"item":"items",a,u;return{c(){e=D("div"),e.textContent="[",t=Q(),i=D("span"),o=we(r),s=Q(),a=we(l),u=we(`
              `),k(e,"class","jse-bracket svelte-yxg7gq"),k(i,"class","jse-tag jse-expanded svelte-yxg7gq")},m(c,f){j(c,e,f),j(c,t,f),j(c,i,f),x(i,o),x(i,s),x(i,a),j(c,u,f)},p(c,f){f[0]&1&&r!==(r=c[0].length+"")&&We(o,r),f[0]&1&&l!==(l=c[0].length===1?"item":"items")&&We(a,l)},d(c){c&&z(e),c&&z(t),c&&z(i),c&&z(u)}}}function Aw(n){let e,t,i;return t=new ll({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-context-menu-pointer-anchor svelte-yxg7gq")},m(r,o){j(r,e,o),ee(t,e,null),i=!0},p(r,o){const s={};o[0]&256&&(s.onContextMenu=r[8].onContextMenu),t.$set(s)},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){v(t.$$.fragment,r),i=!1},d(r){r&&z(e),te(t)}}}function Ew(n){let e,t;return e=new Iu({props:{validationError:n[15],onExpand:n[21]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&32768&&(o.validationError=i[15]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function dH(n){let e,t,i;return{c(){e=D("div"),k(e,"role","none"),k(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),k(e,"data-type","insert-selection-area-after")},m(r,o){j(r,e,o),t||(i=ue(e,"click",n[29]),t=!0)},p:he,d(r){r&&z(e),t=!1,i()}}}function pH(n){let e,t,i;return{c(){e=D("div"),k(e,"role","none"),k(e,"class","jse-insert-selection-area jse-inside svelte-yxg7gq"),k(e,"data-type","insert-selection-area-inside")},m(r,o){j(r,e,o),t||(i=ue(e,"click",n[28]),t=!0)},p:he,d(r){r&&z(e),t=!1,i()}}}function Ow(n){let e,t=!n[8].readOnly&&(n[10]===es||n[16]&&pn(n[7])),i,r=[],o=new Map,s,l,a,u,c,f=t&&Tw(n),h=n[14]||jl;const d=m=>m[48];for(let m=0;m<h.length;m+=1){let g=hw(n,h,m),b=d(g);o.set(b,r[m]=Rw(b,g))}let p=!n[17]&&Nw(n);return{c(){e=D("div"),f&&f.c(),i=Q();for(let m=0;m<r.length;m+=1)r[m].c();s=Q(),l=D("div"),a=D("div"),a.innerHTML='<span class="jse-bracket svelte-yxg7gq">]</span>',u=Q(),p&&p.c(),k(e,"class","jse-items svelte-yxg7gq"),k(a,"data-type","selectable-value"),k(a,"class","jse-footer svelte-yxg7gq"),k(l,"class","jse-footer-outer svelte-yxg7gq")},m(m,g){j(m,e,g),f&&f.m(e,null),x(e,i);for(let b=0;b<r.length;b+=1)r[b]&&r[b].m(e,null);j(m,s,g),j(m,l,g),x(l,a),x(l,u),p&&p.m(l,null),c=!0},p(m,g){g[0]&66944&&(t=!m[8].readOnly&&(m[10]===es||m[16]&&pn(m[7]))),t?f?(f.p(m,g),g[0]&66944&&C(f,1)):(f=Tw(m),f.c(),C(f,1),f.m(e,i)):f&&(ce(),v(f,1,1,()=>{f=null}),fe()),g[0]&34097663&&(h=m[14]||jl,ce(),r=_p(r,g,d,1,m,h,o,e,n2,Rw,null,hw),fe()),m[17]?p&&(p.d(1),p=null):p?p.p(m,g):(p=Nw(m),p.c(),p.m(l,null))},i(m){if(!c){C(f);for(let g=0;g<h.length;g+=1)C(r[g]);c=!0}},o(m){v(f);for(let g=0;g<r.length;g+=1)v(r[g]);c=!1},d(m){m&&z(e),f&&f.d();for(let g=0;g<r.length;g+=1)r[g].d();m&&z(s),m&&z(l),p&&p.d()}}}function Tw(n){let e,t,i;return t=new ll({props:{selected:n[16]&&pn(n[7]),onContextMenu:n[30]}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-insert-area jse-inside svelte-yxg7gq"),k(e,"data-type","insert-selection-area-inside"),k(e,"title",i2),le(e,"jse-hovered",n[10]===es),le(e,"jse-selected",n[16]&&pn(n[7])),li(e,"--level",n[1].length+1)},m(r,o){j(r,e,o),ee(t,e,null),i=!0},p(r,o){const s={};o[0]&65664&&(s.selected=r[16]&&pn(r[7])),t.$set(s),(!i||o[0]&1024)&&le(e,"jse-hovered",r[10]===es),(!i||o[0]&65664)&&le(e,"jse-selected",r[16]&&pn(r[7])),o[0]&2&&li(e,"--level",r[1].length+1)},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){v(t.$$.fragment,r),i=!1},d(r){r&&z(e),te(t)}}}function mH(n){let e,t,i=n[49].index+"",r;return{c(){e=D("div"),t=D("div"),r=we(i),k(t,"class","jse-index svelte-yxg7gq"),k(e,"slot","identifier"),k(e,"class","jse-identifier svelte-yxg7gq")},m(o,s){j(o,e,s),x(e,t),x(t,r)},p(o,s){s[0]&18687&&i!==(i=o[49].index+"")&&We(r,i)},d(o){o&&z(e)}}}function Dw(n,e){let t,i,r;return i=new q2({props:{value:e[49].value,path:e[49].path,expandedMap:e[49].expandedMap,enforceStringMap:e[49].enforceStringMap,visibleSectionsMap:e[49].visibleSectionsMap,validationErrorsMap:e[49].validationErrorsMap,searchResultItemsMap:e[49].searchResultItemsMap,selection:e[49].selection,context:e[8],onDragSelectionStart:e[25],$$slots:{identifier:[mH]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=ut(),$(i.$$.fragment),this.first=t},m(o,s){j(o,t,s),ee(i,o,s),r=!0},p(o,s){e=o;const l={};s[0]&18687&&(l.value=e[49].value),s[0]&18687&&(l.path=e[49].path),s[0]&18687&&(l.expandedMap=e[49].expandedMap),s[0]&18687&&(l.enforceStringMap=e[49].enforceStringMap),s[0]&18687&&(l.visibleSectionsMap=e[49].visibleSectionsMap),s[0]&18687&&(l.validationErrorsMap=e[49].validationErrorsMap),s[0]&18687&&(l.searchResultItemsMap=e[49].searchResultItemsMap),s[0]&18687&&(l.selection=e[49].selection),s[0]&256&&(l.context=e[8]),s[0]&18687|s[1]&8&&(l.$$scope={dirty:s,ctx:e}),i.$set(l)},i(o){r||(C(i.$$.fragment,o),r=!0)},o(o){v(i.$$.fragment,o),r=!1},d(o){o&&z(t),te(i,o)}}}function Pw(n){let e,t;return e=new vV({props:{visibleSections:n[14]||jl,sectionIndex:n[48],total:n[0].length,path:n[1],onExpandSection:n[8].onExpandSection,selection:n[7],context:n[8]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&16384&&(o.visibleSections=i[14]||jl),r[0]&16384&&(o.sectionIndex=i[48]),r[0]&1&&(o.total=i[0].length),r[0]&2&&(o.path=i[1]),r[0]&256&&(o.onExpandSection=i[8].onExpandSection),r[0]&128&&(o.selection=i[7]),r[0]&256&&(o.context=i[8]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Rw(n,e){let t,i=[],r=new Map,o,s,l,a=e[19](e[1],e[0],e[46],e[2],e[3],e[4],e[5],e[6],e[7],e[11]);const u=f=>f[49].index;for(let f=0;f<a.length;f+=1){let h=dw(e,a,f),d=u(h);r.set(d,i[f]=Dw(d,h))}let c=e[46].end<e[0].length&&Pw(e);return{key:n,first:null,c(){t=ut();for(let f=0;f<i.length;f+=1)i[f].c();o=Q(),c&&c.c(),s=ut(),this.first=t},m(f,h){j(f,t,h);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(f,h);j(f,o,h),c&&c.m(f,h),j(f,s,h),l=!0},p(f,h){e=f,h[0]&34097663&&(a=e[19](e[1],e[0],e[46],e[2],e[3],e[4],e[5],e[6],e[7],e[11]),ce(),i=_p(i,h,u,1,e,a,r,o.parentNode,n2,Dw,o,dw),fe()),e[46].end<e[0].length?c?(c.p(e,h),h[0]&16385&&C(c,1)):(c=Pw(e),c.c(),C(c,1),c.m(s.parentNode,s)):c&&(ce(),v(c,1,1,()=>{c=null}),fe())},i(f){if(!l){for(let h=0;h<a.length;h+=1)C(i[h]);C(c),l=!0}},o(f){for(let h=0;h<i.length;h+=1)v(i[h]);v(c),l=!1},d(f){f&&z(t);for(let h=0;h<i.length;h+=1)i[h].d(f);f&&z(o),c&&c.d(f),f&&z(s)}}}function Nw(n){let e,t,i;return{c(){e=D("div"),k(e,"role","none"),k(e,"class","jse-insert-selection-area jse-after svelte-yxg7gq"),k(e,"data-type","insert-selection-area-after")},m(r,o){j(r,e,o),t||(i=ue(e,"click",n[29]),t=!0)},p:he,d(r){r&&z(e),t=!1,i()}}}function Iw(n){let e,t,i;return t=new ll({props:{selected:n[16]&&Oi(n[7]),onContextMenu:n[31]}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-insert-area jse-after svelte-yxg7gq"),k(e,"data-type","insert-selection-area-after"),k(e,"title",i2),le(e,"jse-hovered",n[10]===Tc),le(e,"jse-selected",n[16]&&Oi(n[7]))},m(r,o){j(r,e,o),ee(t,e,null),i=!0},p(r,o){const s={};o[0]&65664&&(s.selected=r[16]&&Oi(r[7])),t.$set(s),(!i||o[0]&1024)&&le(e,"jse-hovered",r[10]===Tc),(!i||o[0]&65664)&&le(e,"jse-selected",r[16]&&Oi(r[7]))},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){v(t.$$.fragment,r),i=!1},d(r){r&&z(e),te(t)}}}function gH(n){let e,t,i,r,o,s,l=!n[8].readOnly&&(n[10]===Tc||n[16]&&Oi(n[7])),a,u,c,f,h;const d=[tH,eH,$V],p=[];function m(b,y){return y[0]&1&&(t=null),y[0]&1&&(i=null),t==null&&(t=!!Array.isArray(b[0])),t?0:(i==null&&(i=!!Rt(b[0])),i?1:2)}r=m(n,[-1,-1]),o=p[r]=d[r](n);let g=l&&Iw(n);return{c(){e=D("div"),o.c(),s=Q(),g&&g.c(),k(e,"role","treeitem"),k(e,"tabindex","-1"),k(e,"class",a=Zt(ko("jse-json-node",{"jse-expanded":n[12]},n[8].onClassName(n[1],n[0])))+" svelte-yxg7gq"),k(e,"data-path",u=lu(n[1])),k(e,"aria-selected",n[16]),le(e,"jse-root",n[17]),le(e,"jse-selected",n[16]&&vt(n[7])),le(e,"jse-selected-key",n[16]&&un(n[7])),le(e,"jse-selected-value",n[16]&&mt(n[7])),le(e,"jse-readonly",n[8].readOnly),le(e,"jse-hovered",n[10]===i1),li(e,"--level",n[1].length)},m(b,y){j(b,e,y),p[r].m(e,null),x(e,s),g&&g.m(e,null),c=!0,f||(h=[ue(e,"mousedown",n[23]),ue(e,"mousemove",n[24]),ue(e,"mouseover",n[26]),ue(e,"mouseout",n[27]),ue(e,"focus",void 0),ue(e,"blur",void 0)],f=!0)},p(b,y){let _=r;r=m(b,y),r===_?p[r].p(b,y):(ce(),v(p[_],1,1,()=>{p[_]=null}),fe(),o=p[r],o?o.p(b,y):(o=p[r]=d[r](b),o.c()),C(o,1),o.m(e,s)),y[0]&66944&&(l=!b[8].readOnly&&(b[10]===Tc||b[16]&&Oi(b[7]))),l?g?(g.p(b,y),y[0]&66944&&C(g,1)):(g=Iw(b),g.c(),C(g,1),g.m(e,null)):g&&(ce(),v(g,1,1,()=>{g=null}),fe()),(!c||y[0]&4355&&a!==(a=Zt(ko("jse-json-node",{"jse-expanded":b[12]},b[8].onClassName(b[1],b[0])))+" svelte-yxg7gq"))&&k(e,"class",a),(!c||y[0]&2&&u!==(u=lu(b[1])))&&k(e,"data-path",u),(!c||y[0]&65536)&&k(e,"aria-selected",b[16]),(!c||y[0]&135427)&&le(e,"jse-root",b[17]),(!c||y[0]&70019)&&le(e,"jse-selected",b[16]&&vt(b[7])),(!c||y[0]&70019)&&le(e,"jse-selected-key",b[16]&&un(b[7])),(!c||y[0]&70019)&&le(e,"jse-selected-value",b[16]&&mt(b[7])),(!c||y[0]&4355)&&le(e,"jse-readonly",b[8].readOnly),(!c||y[0]&5379)&&le(e,"jse-hovered",b[10]===i1),y[0]&2&&li(e,"--level",b[1].length)},i(b){c||(C(o),C(g),c=!0)},o(b){v(o),v(g),c=!1},d(b){b&&z(e),p[r].d(),g&&g.d(),f=!1,fn(h)}}}function bH(n,e,t){let i,{$$slots:r={},$$scope:o}=e,{value:s}=e,{path:l}=e,{expandedMap:a}=e,{enforceStringMap:u}=e,{visibleSectionsMap:c}=e,{validationErrorsMap:f}=e,{searchResultItemsMap:h}=e,{selection:d}=e,{context:p}=e,{onDragSelectionStart:m}=e;const g=Wn("jsoneditor:JSONNode");let b,y,_;const M=aB();let w,S,E,I,O,P;function A(F,ke,Me,Ae,Le,ct,Z,Ve,bt){let me=Object.keys(ke).map($e=>{const Ut=M(F.concat($e)),Ue=vy(w,$e);return{key:$e,value:ke[$e],path:Ut,expandedMap:$r(Me,Ue),enforceStringMap:$r(Ae,Ue),visibleSectionsMap:$r(Le,Ue),validationErrorsMap:$r(ct,Ue),keySearchResultItemsMap:CL(Z,Ue),valueSearchResultItemsMap:$r(Z,Ue),selection:Tk(p.getJson(),Ve,Ut)}});return bt&&bt.offset!==0&&(me=hk(me,bt.selectionStartIndex,bt.selectionItemsCount,bt.offset)),me}function H(F,ke,Me,Ae,Le,ct,Z,Ve,bt,me){const $e=Me.start,Ut=Math.min(Me.end,ke.length);let Ue=[];for(let wt=$e;wt<Ut;wt++){const _t=M(F.concat(String(wt))),it=vy(w,wt);Ue.push({index:wt,value:ke[wt],path:_t,expandedMap:$r(Ae,it),enforceStringMap:$r(Le,it),visibleSectionsMap:$r(ct,it),validationErrorsMap:$r(Z,it),searchResultItemsMap:$r(Ve,it),selection:Tk(p.getJson(),bt,_t)})}if(me&&me.offset!==0){const wt=Ue.map(_t=>_t.index);Ue=hk(Ue,me.selectionStartIndex,me.selectionItemsCount,me.offset);for(let _t=0;_t<Ue.length;_t++)Ue[_t].index=wt[_t]}return Ue}function W(F){F.stopPropagation();const ke=F.ctrlKey;p.onExpand(l,!S,ke)}function q(F){F.stopPropagation(),p.onExpand(l,!0)}function L(F,ke){const Me=Mf(l,Object.keys(s),F,ke);return p.onPatch(Me),rt(Fr(Me[0].path))}function X(F){if(JI(F.target)||F.which===1&&S2(F.target,"BUTTON"))return;F.stopPropagation(),F.preventDefault(),p.focus(),document.addEventListener("mousemove",G,!0),document.addEventListener("mouseup",T);const ke=z0(F.target),Me=p.getJson(),Ae=p.getDocumentState();if(d&&ke!==Tt.after&&ke!==Tt.inside&&(d.type===ke||d.type===Tt.multi)&&Fc(Me,d,l)){F.button===0&&m(F);return}if(An.selecting=!0,An.selectionAnchor=l,An.selectionAnchorType=ke,An.selectionFocus=l,F.shiftKey){const Le=p.getDocumentState().selection;Le&&p.onSelect(ui(Wl(Le),l))}else if(ke===Tt.multi)if(i&&F.target.hasAttribute("data-path")){const Le=rt(Jv(s,Ae));p.onSelect(O2(Le))}else p.onSelect(ui(l,l));else Me!==void 0&&p.onSelect(Ok(Me,ke,l))}function Y(F){if(An.selecting){F.preventDefault(),F.stopPropagation(),An.selectionFocus==null&&window.getSelection&&window.getSelection().empty();const ke=z0(F.target);(!st(l,An.selectionFocus)||ke!==An.selectionAnchorType)&&(An.selectionFocus=l,An.selectionAnchorType=ke,p.onSelect(ui(An.selectionAnchor||An.selectionFocus,An.selectionFocus)))}}function G(F){p.onDrag(F)}function T(F){An.selecting&&(An.selecting=!1,F.stopPropagation()),p.onDragEnd(),document.removeEventListener("mousemove",G,!0),document.removeEventListener("mouseup",T)}function B(){var F,ke;return((ke=(F=p.findElement([]))==null?void 0:F.getBoundingClientRect())==null?void 0:ke.top)||0}function J(F,ke){const Ae=B()-F.initialContentTop;return ke.clientY-F.initialClientY-Ae}function ne(F){if(p.readOnly||!d)return;const ke=at(Fe(d));if(!st(l,ke)){m(F);return}const Me=Te(d,I||jl);if(g("dragSelectionStart",{selection:d,items:Me}),!Me){g("Cannot drag the current selection (probably spread over multiple sections)");return}const Ae=p.getJson();if(Ae===void 0)return;const Le=is(Ae,d),ct=Me.findIndex(bt=>st(bt.path,Le)),Z=p.getDocumentState(),{offset:Ve}=Q0({json:Ae,documentState:Z,deltaY:0,items:Me});t(11,_={initialTarget:F.target,initialClientY:F.clientY,initialContentTop:B(),selectionStartIndex:ct,selectionItemsCount:Gs(Ae,d).length,items:Me,offset:Ve,didMoveItems:!1}),An.dragging=!0,document.addEventListener("mousemove",_e,!0),document.addEventListener("mouseup",ae)}function _e(F){if(_){const ke=p.getJson();if(ke===void 0)return;const Me=p.getDocumentState(),Ae=J(_,F),{offset:Le}=Q0({json:ke,documentState:Me,deltaY:Ae,items:_.items});Le!==_.offset&&(g("drag selection",Le,Ae),t(11,_={..._,offset:Le,didMoveItems:!0}))}}function ae(F){if(_){const ke=p.getJson();if(ke===void 0)return;const Me=p.getDocumentState(),Ae=J(_,F),{operations:Le,updatedSelection:ct}=Q0({json:ke,documentState:Me,deltaY:Ae,items:_.items});if(Le)p.onPatch(Le,(Z,Ve)=>({state:{...Ve,selection:ct||d}}));else if(F.target===_.initialTarget&&!_.didMoveItems){const Z=z0(F.target),Ve=Nv(F.target);Ve&&p.onSelect(Ok(ke,Z,Ve))}t(11,_=void 0),An.dragging=!1,document.removeEventListener("mousemove",_e,!0),document.removeEventListener("mouseup",ae)}}function Te(F,ke){const Me=[];function Ae(Le){const ct=l.concat(Le),Z=p.findElement(ct);Z!=null&&Me.push({path:ct,height:Z.clientHeight})}if(Array.isArray(s)){const Le=p.getJson();if(Le===void 0)return null;const ct=is(Le,F),Z=sl(Le,F),Ve=parseInt(rt(ct),10),bt=parseInt(rt(Z),10),me=ke.find(Ue=>Ve>=Ue.start&&bt<=Ue.end);if(!me)return null;const{start:$e,end:Ut}=me;_v($e,Math.min(s.length,Ut),Ue=>Ae(String(Ue)))}else Object.keys(s).forEach(Ae);return Me}function re(F){An.selecting||An.dragging||(F.stopPropagation(),Al(F.target,"data-type","selectable-value")?t(10,b=i1):Al(F.target,"data-type","insert-selection-area-inside")?t(10,b=es):Al(F.target,"data-type","insert-selection-area-after")&&t(10,b=Tc),clearTimeout(y))}function U(F){F.stopPropagation(),y=window.setTimeout(()=>t(10,b=void 0))}function Ce(F){F.shiftKey||(F.stopPropagation(),F.preventDefault(),p.onSelect(rs(l)))}function Ke(F){F.shiftKey||(F.stopPropagation(),F.preventDefault(),p.onSelect(ss(l)))}function K(F){p.onSelect(rs(l)),p.onContextMenu(F)}function De(F){p.onSelect(ss(l)),p.onContextMenu(F)}return n.$$set=F=>{"value"in F&&t(0,s=F.value),"path"in F&&t(1,l=F.path),"expandedMap"in F&&t(2,a=F.expandedMap),"enforceStringMap"in F&&t(3,u=F.enforceStringMap),"visibleSectionsMap"in F&&t(4,c=F.visibleSectionsMap),"validationErrorsMap"in F&&t(5,f=F.validationErrorsMap),"searchResultItemsMap"in F&&t(6,h=F.searchResultItemsMap),"selection"in F&&t(7,d=F.selection),"context"in F&&t(8,p=F.context),"onDragSelectionStart"in F&&t(32,m=F.onDragSelectionStart),"$$scope"in F&&t(34,o=F.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,w=xe(l)),n.$$.dirty[0]&516&&t(12,S=a?a[w]===!0:!1),n.$$.dirty[0]&777&&t(13,E=ns(s,u,w,p.parser)),n.$$.dirty[0]&528&&t(14,I=c?c[w]:void 0),n.$$.dirty[0]&544&&t(15,O=f?f[w]:void 0),n.$$.dirty[0]&386&&t(16,P=Fc(p.getJson(),d,l)),n.$$.dirty[0]&2&&t(17,i=l.length===0)},[s,l,a,u,c,f,h,d,p,w,b,_,S,E,I,O,P,i,A,H,W,q,L,X,Y,ne,re,U,Ce,Ke,K,De,m,r,o]}class q2 extends je{constructor(e){super(),ze(this,e,bH,gH,Ze,{value:0,path:1,expandedMap:2,enforceStringMap:3,visibleSectionsMap:4,validationErrorsMap:5,searchResultItemsMap:6,selection:7,context:8,onDragSelectionStart:32},null,[-1,-1])}}const yH=q2,kH={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],"","M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},wH={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],"","m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},E1={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],"","M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},CH={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],"","M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]};function _H(n){let e,t;return e=new Yp({props:{items:n[0]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,[r]){const o={};r&1&&(o.items=i[0]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function SH(n,e,t){let i,r,o,{json:s}=e,{selection:l}=e,{readOnly:a}=e,{showSearch:u=!1}=e,{historyState:c}=e,{onExpandAll:f}=e,{onCollapseAll:h}=e,{onUndo:d}=e,{onRedo:p}=e,{onSort:m}=e,{onTransform:g}=e,{onContextMenu:b}=e,{onCopy:y}=e,{onRenderMenu:_}=e;function M(){t(1,u=!u)}let w,S,E,I;return n.$$set=O=>{"json"in O&&t(2,s=O.json),"selection"in O&&t(3,l=O.selection),"readOnly"in O&&t(4,a=O.readOnly),"showSearch"in O&&t(1,u=O.showSearch),"historyState"in O&&t(5,c=O.historyState),"onExpandAll"in O&&t(6,f=O.onExpandAll),"onCollapseAll"in O&&t(7,h=O.onCollapseAll),"onUndo"in O&&t(8,d=O.onUndo),"onRedo"in O&&t(9,p=O.onRedo),"onSort"in O&&t(10,m=O.onSort),"onTransform"in O&&t(11,g=O.onTransform),"onContextMenu"in O&&t(12,b=O.onContextMenu),"onCopy"in O&&t(13,y=O.onCopy),"onRenderMenu"in O&&t(14,_=O.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&4&&t(20,i=s!==void 0),n.$$.dirty&1048584&&t(19,r=i&&(vt(l)||un(l)||mt(l))),n.$$.dirty&68&&t(15,w={type:"button",icon:kH,title:"Expand all",className:"jse-expand-all",onClick:f,disabled:!Qt(s)}),n.$$.dirty&132&&t(16,S={type:"button",icon:wH,title:"Collapse all",className:"jse-collapse-all",onClick:h,disabled:!Qt(s)}),n.$$.dirty&4&&t(17,E={type:"button",icon:R2,title:"Search (Ctrl+F)",className:"jse-search",onClick:M,disabled:s===void 0}),n.$$.dirty&769844&&t(18,I=a?[w,S,{type:"separator"},{type:"button",icon:js,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:y,disabled:!r},{type:"separator"},E,{type:"space"}]:[w,S,{type:"separator"},{type:"button",icon:Wp,title:"Sort",className:"jse-sort",onClick:m,disabled:a||s===void 0},{type:"button",icon:Hp,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:g,disabled:a||s===void 0},E,{type:"button",icon:s8,title:r2,className:"jse-contextmenu",onClick:b},{type:"separator"},{type:"button",icon:P2,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:d,disabled:!c.canUndo},{type:"button",icon:D2,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:p,disabled:!c.canRedo},{type:"space"}]),n.$$.dirty&278528&&t(0,o=_(I))},[o,u,s,l,a,c,f,h,d,p,m,g,b,y,_,w,S,E,I,r,i]}class vH extends je{constructor(e){super(),ze(this,e,SH,_H,Ze,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}const xH=vH;function Bw(n){let e,t,i,r,o,s,l;return{c(){e=D("div"),e.innerHTML="You can paste clipboard data using <b>Ctrl+V</b>, or use the following options:",t=Q(),i=D("button"),i.textContent="Create object",r=Q(),o=D("button"),o.textContent="Create array",k(e,"class","jse-welcome-info svelte-1x9cln8"),k(i,"title","Create an empty JSON object (press '{')"),k(i,"class","svelte-1x9cln8"),k(o,"title","Create an empty JSON array (press '[')"),k(o,"class","svelte-1x9cln8")},m(a,u){j(a,e,u),j(a,t,u),j(a,i,u),j(a,r,u),j(a,o,u),s||(l=[ue(i,"click",Lr(n[4])),ue(o,"click",Lr(n[5]))],s=!0)},p:he,d(a){a&&z(e),a&&z(t),a&&z(i),a&&z(r),a&&z(o),s=!1,fn(l)}}}function MH(n){let e,t,i,r,o,s,l,a,u,c,f=!n[0]&&Bw(n);return{c(){e=D("div"),t=D("div"),i=Q(),r=D("div"),o=D("div"),o.textContent="Empty document",s=Q(),f&&f.c(),l=Q(),a=D("div"),k(t,"class","jse-space jse-before svelte-1x9cln8"),k(o,"class","jse-welcome-title"),k(r,"class","jse-contents svelte-1x9cln8"),k(a,"class","jse-space jse-after svelte-1x9cln8"),k(e,"class","jse-welcome svelte-1x9cln8"),k(e,"role","none")},m(h,d){j(h,e,d),x(e,t),x(e,i),x(e,r),x(r,o),x(r,s),f&&f.m(r,null),x(e,l),x(e,a),u||(c=ue(e,"click",n[6]),u=!0)},p(h,[d]){h[0]?f&&(f.d(1),f=null):f?f.p(h,d):(f=Bw(h),f.c(),f.m(r,null))},i:he,o:he,d(h){h&&z(e),f&&f.d(),u=!1,c()}}}function AH(n,e,t){let{readOnly:i}=e,{onCreateArray:r}=e,{onCreateObject:o}=e,{onClick:s}=e;const l=()=>o(),a=()=>r(),u=()=>s();return n.$$set=c=>{"readOnly"in c&&t(0,i=c.readOnly),"onCreateArray"in c&&t(1,r=c.onCreateArray),"onCreateObject"in c&&t(2,o=c.onCreateObject),"onClick"in c&&t(3,s=c.onClick)},[i,r,o,s,l,a,u]}class EH extends je{constructor(e){super(),ze(this,e,AH,MH,Ze,{readOnly:0,onCreateArray:1,onCreateObject:2,onClick:3})}}const OH=EH;var A8={exports:{}};/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var Lw=function(n,e){var t,i,r=1,o=0,s=0,l=String.alphabet;function a(u,c,f){if(f){for(t=c;f=a(u,t),f<76&&f>65;)++t;return+u.slice(c-1,t)}return f=l&&l.indexOf(u.charAt(c)),f>-1?f+76:(f=u.charCodeAt(c)||0,f<45||f>127?f:f<46?65:f<48?f-1:f<58?f+18:f<65?f-11:f<91?f+11:f<97?f-37:f<123?f+5:f-63)}if((n+="")!=(e+="")){for(;r;)if(i=a(n,o++),r=a(e,s++),i<76&&r<76&&i>66&&r>66&&(i=a(n,o,o),r=a(e,s,o=t),s=t),i!=r)return i<r?-1:1}return 0};try{A8.exports=Lw}catch{String.naturalCompare=Lw}var TH=A8.exports;const DH=CS(TH);function W2(n,e){const t=typeof n=="string"?n.toLowerCase():n,i=typeof e=="string"?e.toLowerCase():e;return DH(t,i)}function E8(n,e=[],t=[],i=1){if(Nt(Pe(n,e))){if(t===void 0)throw new Error("Cannot sort: no property selected by which to sort the array");return RH(n,e,t,i)}if(Rt(n))return PH(n,e,i);throw new Error("Cannot sort: no array or object")}function PH(n,e=[],t=1){const i=Pe(n,e),o=Object.keys(i).slice();o.sort((l,a)=>t*W2(l,a));const s=[];for(let l=0;l<o.length;l++){const a=o[l],u=xe(e.concat(a));s.push({op:"move",from:u,path:u})}return s}function RH(n,e=[],t=[],i=1){const r=NH(t,i),o=Pe(n,e);return[{op:"replace",path:xe(e),value:o.slice(0).sort(r)}]}function NH(n,e){return function(i,r){const o=Pe(i,n),s=Pe(r,n);return o===void 0?e:s===void 0?-e:typeof o!="string"&&typeof s!="string"?o>s?e:o<s?-e:0:e*W2(o,s)}}function Fw(n,e,t){const i=n.slice();return i[4]=e[t],i}function jw(n,e){let t,i=ts(e[4].toString(),Vw)+"",r,o,s,l;function a(){return e[3](e[4])}return{key:n,first:null,c(){t=D("button"),r=we(i),k(t,"type","button"),k(t,"class","jse-navigation-bar-dropdown-item svelte-d9nda8"),k(t,"title",o=e[4].toString()),le(t,"jse-selected",e[4]===e[1]),this.first=t},m(u,c){j(u,t,c),x(t,r),s||(l=ue(t,"click",Lr(a)),s=!0)},p(u,c){e=u,c&1&&i!==(i=ts(e[4].toString(),Vw)+"")&&We(r,i),c&1&&o!==(o=e[4].toString())&&k(t,"title",o),c&3&&le(t,"jse-selected",e[4]===e[1])},d(u){u&&z(t),s=!1,l()}}}function zw(n){let e,t;return{c(){e=D("button"),t=we("..."),k(e,"type","button"),k(e,"class","jse-navigation-bar-dropdown-item svelte-d9nda8"),k(e,"title","Limited to "+oc+" items")},m(i,r){j(i,e,r),x(e,t)},p:he,d(i){i&&z(e)}}}function IH(n){let e,t=[],i=new Map,r,o=bd(n[0],oc);const s=a=>a[4];for(let a=0;a<o.length;a+=1){let u=Fw(n,o,a),c=s(u);i.set(c,t[a]=jw(c,u))}let l=n[0].length>oc&&zw();return{c(){e=D("div");for(let a=0;a<t.length;a+=1)t[a].c();r=Q(),l&&l.c(),k(e,"class","jse-navigation-bar-dropdown svelte-d9nda8")},m(a,u){j(a,e,u);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);x(e,r),l&&l.m(e,null)},p(a,[u]){u&7&&(o=bd(a[0],oc),t=_p(t,u,s,1,a,o,i,e,EO,jw,r,Fw)),a[0].length>oc?l?l.p(a,u):(l=zw(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:he,o:he,d(a){a&&z(e);for(let u=0;u<t.length;u+=1)t[u].d();l&&l.d()}}}const oc=100,Vw=30;function BH(n,e,t){let{items:i}=e,{selectedItem:r}=e,{onSelect:o}=e;const s=l=>o(l);return n.$$set=l=>{"items"in l&&t(0,i=l.items),"selectedItem"in l&&t(1,r=l.selectedItem),"onSelect"in l&&t(2,o=l.onSelect)},[i,r,o,s]}class LH extends je{constructor(e){super(),ze(this,e,BH,IH,Ze,{items:0,selectedItem:1,onSelect:2})}}const FH=LH;function Hw(n){let e,t,i,r;return{c(){e=D("button"),t=we(n[2]),k(e,"type","button"),k(e,"class","jse-navigation-bar-button svelte-5vf8zh")},m(o,s){j(o,e,s),x(e,t),i||(r=ue(e,"click",n[9]),i=!0)},p(o,s){s&4&&We(t,o[2])},d(o){o&&z(e),i=!1,r()}}}function jH(n){let e,t,i,r,o,s,l;i=new ht({props:{data:o8}});let a=n[2]!==void 0&&Hw(n);return{c(){e=D("div"),t=D("button"),$(i.$$.fragment),r=Q(),a&&a.c(),k(t,"type","button"),k(t,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-5vf8zh"),le(t,"jse-open",n[1]),k(e,"class","jse-navigation-bar-item svelte-5vf8zh")},m(u,c){j(u,e,c),x(e,t),ee(i,t,null),x(e,r),a&&a.m(e,null),n[10](e),o=!0,s||(l=ue(t,"click",n[4]),s=!0)},p(u,[c]){(!o||c&2)&&le(t,"jse-open",u[1]),u[2]!==void 0?a?a.p(u,c):(a=Hw(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){o||(C(i.$$.fragment,u),o=!0)},o(u){v(i.$$.fragment,u),o=!1},d(u){u&&z(e),te(i),a&&a.d(),n[10](null),s=!1,l()}}}function zH(n,e,t){let i,r;const{openAbsolutePopup:o,closeAbsolutePopup:s}=Vn("absolute-popup");let{path:l}=e,{index:a}=e,{onSelect:u}=e,{getItems:c}=e,f,h=!1,d;function p(y){s(d),u(i.concat(y))}function m(){if(f){t(1,h=!0);const y={items:c(i),selectedItem:r,onSelect:p};d=o(FH,y,{anchor:f,closeOnOuterClick:!0,onClose:()=>{t(1,h=!1)}})}}const g=()=>p(r);function b(y){ft[y?"unshift":"push"](()=>{f=y,t(0,f)})}return n.$$set=y=>{"path"in y&&t(5,l=y.path),"index"in y&&t(6,a=y.index),"onSelect"in y&&t(7,u=y.onSelect),"getItems"in y&&t(8,c=y.getItems)},n.$$.update=()=>{n.$$.dirty&96&&(i=l.slice(0,a)),n.$$.dirty&96&&t(2,r=l[a])},[f,h,r,p,m,l,a,u,c,g,b]}class VH extends je{constructor(e){super(),ze(this,e,zH,jH,Ze,{path:5,index:6,onSelect:7,getItems:8})}}const O8=VH;function U2(n){var e;if(navigator.clipboard)return navigator.clipboard.writeText(n);if((e=document.queryCommandSupported)!=null&&e.call(document,"copy")){const t=document.createElement("textarea");t.value=n,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(i){console.error(i)}finally{document.body.removeChild(t)}}else console.error("Copy failed.")}function qw(n){let e,t,i,r,o,s;return t=new ht({props:{data:oa}}),{c(){e=D("button"),$(t.$$.fragment),k(e,"type","button"),k(e,"class","jse-navigation-bar-validation-error svelte-8rw91d")},m(l,a){j(l,e,a),ee(t,e,null),r=!0,o||(s=vn(i=T2.call(null,e,{text:String(n[3]||""),...n[4]})),o=!0)},p(l,a){i&&Ei(i.update)&&a&8&&i.update.call(null,{text:String(l[3]||""),...l[4]})},i(l){r||(C(t.$$.fragment,l),r=!0)},o(l){v(t.$$.fragment,l),r=!1},d(l){l&&z(e),te(t),o=!1,s()}}}function Ww(n){let e;return{c(){e=D("div"),e.textContent="Copied!",k(e,"class","jse-copied-text svelte-8rw91d")},m(t,i){j(t,e,i)},d(t){t&&z(e)}}}function HH(n){let e,t,i,r,o,s,l,a,u,c,f=n[3]&&qw(n),h=n[2]&&Ww();return l=new ht({props:{data:js}}),{c(){e=D("div"),t=D("input"),i=Q(),f&&f.c(),r=Q(),h&&h.c(),o=Q(),s=D("button"),$(l.$$.fragment),k(t,"type","text"),k(t,"class","jse-navigation-bar-text svelte-8rw91d"),t.value=n[0],k(s,"type","button"),k(s,"class","jse-navigation-bar-copy svelte-8rw91d"),k(s,"title","Copy selected path to the clipboard"),le(s,"copied",n[2]),k(e,"class","jse-navigation-bar-path-editor svelte-8rw91d"),le(e,"error",n[3])},m(d,p){j(d,e,p),x(e,t),n[15](t),x(e,i),f&&f.m(e,null),x(e,r),h&&h.m(e,null),x(e,o),x(e,s),ee(l,s,null),a=!0,u||(c=[ue(t,"keydown",Lr(n[6])),ue(t,"input",n[5]),ue(s,"click",n[7])],u=!0)},p(d,[p]){(!a||p&1&&t.value!==d[0])&&(t.value=d[0]),d[3]?f?(f.p(d,p),p&8&&C(f,1)):(f=qw(d),f.c(),C(f,1),f.m(e,r)):f&&(ce(),v(f,1,1,()=>{f=null}),fe()),d[2]?h||(h=Ww(),h.c(),h.m(e,o)):h&&(h.d(1),h=null),(!a||p&4)&&le(s,"copied",d[2]),(!a||p&8)&&le(e,"error",d[3])},i(d){a||(C(f),C(l.$$.fragment,d),a=!0)},o(d){v(f),v(l.$$.fragment,d),a=!1},d(d){d&&z(e),n[15](null),f&&f.d(),h&&h.d(),te(l),u=!1,fn(c)}}}const qH=1e3;function WH(n,e,t){let i;const r=Vn("absolute-popup");let{path:o}=e,{pathParser:s}=e,{onChange:l}=e,{onClose:a}=e,{onError:u}=e,{pathExists:c}=e,f,h,d=!1,p,m=!1;br(()=>{g()}),Ki(()=>{clearTimeout(p)});function g(){f.focus()}function b(E){try{const I=s.parse(E);return y(I),{path:I,error:void 0}}catch(I){return{path:void 0,error:I}}}function y(E){if(!c(E))throw new Error("Path does not exist in current document")}function _(E){t(0,h=E.currentTarget.value)}function M(E){const I=ol(E);if(I==="Escape"&&a(),I==="Enter"){t(14,d=!0);const O=b(h);O.path!==void 0?l(O.path):u(O.error)}}function w(){U2(h),t(2,m=!0),p=window.setTimeout(()=>t(2,m=!1),qH),g()}function S(E){ft[E?"unshift":"push"](()=>{f=E,t(1,f)})}return n.$$set=E=>{"path"in E&&t(8,o=E.path),"pathParser"in E&&t(9,s=E.pathParser),"onChange"in E&&t(10,l=E.onChange),"onClose"in E&&t(11,a=E.onClose),"onError"in E&&t(12,u=E.onError),"pathExists"in E&&t(13,c=E.pathExists)},n.$$.update=()=>{n.$$.dirty&768&&t(0,h=s.stringify(o)),n.$$.dirty&16385&&t(3,i=d?b(h).error:void 0)},[h,f,m,i,r,_,M,w,o,s,l,a,u,c,d,S]}class UH extends je{constructor(e){super(),ze(this,e,WH,HH,xn,{path:8,pathParser:9,onChange:10,onClose:11,onError:12,pathExists:13})}}const JH=UH;function Uw(n,e,t){const i=n.slice();return i[18]=e[t],i[20]=t,i}function KH(n){let e,t;return e=new JH({props:{path:n[3],onClose:n[11],onChange:n[12],onError:n[1],pathExists:n[8],pathParser:n[2]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&8&&(o.path=i[3]),r&2&&(o.onError=i[1]),r&4&&(o.pathParser=i[2]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function GH(n){let e=[],t=new Map,i,r,o,s=n[3];const l=u=>u[20];for(let u=0;u<s.length;u+=1){let c=Uw(n,s,u),f=l(c);t.set(f,e[u]=Jw(f,c))}let a=n[6]&&Kw(n);return{c(){for(let u=0;u<e.length;u+=1)e[u].c();i=Q(),a&&a.c(),r=ut()},m(u,c){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(u,c);j(u,i,c),a&&a.m(u,c),j(u,r,c),o=!0},p(u,c){c&648&&(s=u[3],ce(),e=_p(e,c,l,1,u,s,t,i.parentNode,n2,Jw,i,Uw),fe()),u[6]?a?(a.p(u,c),c&64&&C(a,1)):(a=Kw(u),a.c(),C(a,1),a.m(r.parentNode,r)):a&&(ce(),v(a,1,1,()=>{a=null}),fe())},i(u){if(!o){for(let c=0;c<s.length;c+=1)C(e[c]);C(a),o=!0}},o(u){for(let c=0;c<e.length;c+=1)v(e[c]);v(a),o=!1},d(u){for(let c=0;c<e.length;c+=1)e[c].d(u);u&&z(i),a&&a.d(u),u&&z(r)}}}function Jw(n,e){let t,i,r;return i=new O8({props:{getItems:e[7],path:e[3],index:e[20],onSelect:e[9]}}),{key:n,first:null,c(){t=ut(),$(i.$$.fragment),this.first=t},m(o,s){j(o,t,s),ee(i,o,s),r=!0},p(o,s){e=o;const l={};s&8&&(l.path=e[3]),s&8&&(l.index=e[20]),i.$set(l)},i(o){r||(C(i.$$.fragment,o),r=!0)},o(o){v(i.$$.fragment,o),r=!1},d(o){o&&z(t),te(i,o)}}}function Kw(n){let e,t;return e=new O8({props:{getItems:n[7],path:n[3],index:n[3].length,onSelect:n[9]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r&8&&(o.path=i[3]),r&8&&(o.index=i[3].length),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function QH(n){let e,t,i,r,o,s,l=!Qt(n[0])&&!n[5]?"Navigation bar":"",a,u,c,f,h,d,p;const m=[GH,KH],g=[];function b(y,_){return y[5]?1:0}return t=b(n),i=g[t]=m[t](n),c=new ht({props:{data:n[5]?zk:Fk}}),{c(){e=D("div"),i.c(),r=Q(),o=D("button"),s=D("span"),a=we(l),u=Q(),$(c.$$.fragment),k(s,"class","jse-navigation-bar-space svelte-1tlcccj"),k(o,"type","button"),k(o,"class","jse-navigation-bar-edit svelte-1tlcccj"),k(o,"title",f=n[5]?"Cancel editing the selected path":"Edit the selected path"),le(o,"flex",!n[5]),le(o,"editing",n[5]),k(e,"class","jse-navigation-bar svelte-1tlcccj")},m(y,_){j(y,e,_),g[t].m(e,null),x(e,r),x(e,o),x(o,s),x(s,a),x(o,u),ee(c,o,null),n[15](e),h=!0,d||(p=ue(o,"click",n[10]),d=!0)},p(y,[_]){let M=t;t=b(y),t===M?g[t].p(y,_):(ce(),v(g[M],1,1,()=>{g[M]=null}),fe(),i=g[t],i?i.p(y,_):(i=g[t]=m[t](y),i.c()),C(i,1),i.m(e,r)),(!h||_&33)&&l!==(l=!Qt(y[0])&&!y[5]?"Navigation bar":"")&&We(a,l);const w={};_&32&&(w.data=y[5]?zk:Fk),c.$set(w),(!h||_&32&&f!==(f=y[5]?"Cancel editing the selected path":"Edit the selected path"))&&k(o,"title",f),(!h||_&32)&&le(o,"flex",!y[5]),(!h||_&32)&&le(o,"editing",y[5])},i(y){h||(C(i),C(c.$$.fragment,y),h=!0)},o(y){v(i),v(c.$$.fragment,y),h=!1},d(y){y&&z(e),g[t].d(),te(c),n[15](null),d=!1,p()}}}function XH(n,e,t){let i,r;const o=Wn("jsoneditor:NavigationBar");let{json:s}=e,{selection:l}=e,{onSelect:a}=e,{onError:u}=e,{pathParser:c}=e,f,h=!1;function d(w){setTimeout(()=>{if(f&&f.scrollTo){const S=f.scrollWidth-f.clientWidth;S>0&&(o("scrollTo ",S),f.scrollTo({left:S,behavior:"smooth"}))}})}function p(w){o("get items for path",w);const S=Pe(s,w);if(Array.isArray(S))return kI(0,S.length).map(String);if(Rt(S)){const I=Object.keys(S).slice(0);return I.sort(W2),I}else return[]}function m(w){return fr(s,w)}function g(w){o("select path",JSON.stringify(w)),a(ui(w,w))}function b(){t(5,h=!h)}function y(){t(5,h=!1)}function _(w){y(),g(w)}function M(w){ft[w?"unshift":"push"](()=>{f=w,t(4,f)})}return n.$$set=w=>{"json"in w&&t(0,s=w.json),"selection"in w&&t(13,l=w.selection),"onSelect"in w&&t(14,a=w.onSelect),"onError"in w&&t(1,u=w.onError),"pathParser"in w&&t(2,c=w.pathParser)},n.$$.update=()=>{n.$$.dirty&8192&&t(3,i=l?Fe(l):[]),n.$$.dirty&9&&t(6,r=Qt(Pe(s,i))),n.$$.dirty&8&&d()},[s,u,c,i,f,h,r,p,m,g,b,y,_,l,a,M]}class YH extends je{constructor(e){super(),ze(this,e,XH,QH,Ze,{json:0,selection:13,onSelect:14,onError:1,pathParser:2})}}const ZH=YH;function Gw(n){let e,t,i,r,o,s,l,a,u,c,f,h,d,p=n[3]!==-1?`${n[3]+1}/`:"",m,g,b,y,_,M,w,S,E,I,O,P,A,H,W,q=!n[4]&&Qw(n);const L=[eq,$H],X=[];function Y(T,B){return T[2]?0:1}l=Y(n),a=X[l]=L[l](n),_=new ht({props:{data:uF}}),S=new ht({props:{data:GL}}),O=new ht({props:{data:uu}});let G=n[0]&&!n[4]&&Xw(n);return{c(){e=D("div"),t=D("form"),q&&q.c(),i=Q(),r=D("div"),o=D("div"),s=D("div"),a.c(),u=Q(),c=D("label"),f=D("input"),h=Q(),d=D("div"),m=we(p),g=we(n[10]),b=Q(),y=D("button"),$(_.$$.fragment),M=Q(),w=D("button"),$(S.$$.fragment),E=Q(),I=D("button"),$(O.$$.fragment),P=Q(),G&&G.c(),k(s,"class","jse-search-icon svelte-184shcn"),k(f,"class","jse-search-input svelte-184shcn"),k(f,"title","Enter text to search"),k(f,"type","text"),k(f,"placeholder","Find"),k(c,"class","jse-search-input-label svelte-184shcn"),k(c,"about","jse-search input"),k(d,"class","jse-search-count svelte-184shcn"),le(d,"jse-visible",n[8]!==""),k(y,"type","button"),k(y,"class","jse-search-next svelte-184shcn"),k(y,"title","Go to next search result (Enter)"),k(w,"type","button"),k(w,"class","jse-search-previous svelte-184shcn"),k(w,"title","Go to previous search result (Shift+Enter)"),k(I,"type","button"),k(I,"class","jse-search-clear svelte-184shcn"),k(I,"title","Close search box (Esc)"),k(o,"class","jse-search-section svelte-184shcn"),k(r,"class","jse-search-contents svelte-184shcn"),k(t,"class","jse-search-form svelte-184shcn"),k(e,"class","jse-search-box svelte-184shcn")},m(T,B){j(T,e,B),x(e,t),q&&q.m(t,null),x(t,i),x(t,r),x(r,o),x(o,s),X[l].m(s,null),x(o,u),x(o,c),x(c,f),Js(f,n[8]),x(o,h),x(o,d),x(d,m),x(d,g),x(o,b),x(o,y),ee(_,y,null),x(o,M),x(o,w),ee(S,w,null),x(o,E),x(o,I),ee(O,I,null),x(r,P),G&&G.m(r,null),A=!0,H||(W=[ue(f,"input",n[21]),vn(nq.call(null,f)),ue(y,"click",n[22]),ue(w,"click",n[23]),ue(I,"click",n[24]),ue(t,"submit",n[12]),ue(t,"keydown",n[13])],H=!0)},p(T,B){T[4]?q&&(ce(),v(q,1,1,()=>{q=null}),fe()):q?(q.p(T,B),B&16&&C(q,1)):(q=Qw(T),q.c(),C(q,1),q.m(t,i));let J=l;l=Y(T),l===J?X[l].p(T,B):(ce(),v(X[J],1,1,()=>{X[J]=null}),fe(),a=X[l],a?a.p(T,B):(a=X[l]=L[l](T),a.c()),C(a,1),a.m(s,null)),B&256&&f.value!==T[8]&&Js(f,T[8]),(!A||B&8)&&p!==(p=T[3]!==-1?`${T[3]+1}/`:"")&&We(m,p),(!A||B&1024)&&We(g,T[10]),(!A||B&256)&&le(d,"jse-visible",T[8]!==""),T[0]&&!T[4]?G?G.p(T,B):(G=Xw(T),G.c(),G.m(r,null)):G&&(G.d(1),G=null)},i(T){A||(C(q),C(a),C(_.$$.fragment,T),C(S.$$.fragment,T),C(O.$$.fragment,T),A=!0)},o(T){v(q),v(a),v(_.$$.fragment,T),v(S.$$.fragment,T),v(O.$$.fragment,T),A=!1},d(T){T&&z(e),q&&q.d(),X[l].d(),te(_),te(S),te(O),G&&G.d(),H=!1,fn(W)}}}function Qw(n){let e,t,i,r,o;return t=new ht({props:{data:n[0]?lr:Os}}),{c(){e=D("button"),$(t.$$.fragment),k(e,"type","button"),k(e,"class","jse-replace-toggle svelte-184shcn"),k(e,"title","Toggle visibility of replace options (Ctrl+H)")},m(s,l){j(s,e,l),ee(t,e,null),i=!0,r||(o=ue(e,"click",n[11]),r=!0)},p(s,l){const a={};l&1&&(a.data=s[0]?lr:Os),t.$set(a)},i(s){i||(C(t.$$.fragment,s),i=!0)},o(s){v(t.$$.fragment,s),i=!1},d(s){s&&z(e),te(t),r=!1,o()}}}function $H(n){let e,t;return e=new ht({props:{data:R2}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p:he,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function eq(n){let e,t;return e=new ht({props:{data:HL,spin:!0}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p:he,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Xw(n){let e,t,i,r,o,s,l,a;return{c(){e=D("div"),t=D("input"),i=Q(),r=D("button"),r.textContent="Replace",o=Q(),s=D("button"),s.textContent="All",k(t,"class","jse-replace-input svelte-184shcn"),k(t,"title","Enter replacement text"),k(t,"type","text"),k(t,"placeholder","Replace"),k(r,"type","button"),k(r,"title","Replace current occurrence (Ctrl+Enter)"),k(r,"class","svelte-184shcn"),k(s,"type","button"),k(s,"title","Replace all occurrences"),k(s,"class","svelte-184shcn"),k(e,"class","jse-replace-section svelte-184shcn")},m(u,c){j(u,e,c),x(e,t),Js(t,n[9]),x(e,i),x(e,r),x(e,o),x(e,s),l||(a=[ue(t,"input",n[25]),ue(r,"click",n[14]),ue(s,"click",n[15])],l=!0)},p(u,c){c&512&&t.value!==u[9]&&Js(t,u[9])},d(u){u&&z(e),l=!1,fn(a)}}}function tq(n){let e,t,i=n[1]&&Gw(n);return{c(){i&&i.c(),e=ut()},m(r,o){i&&i.m(r,o),j(r,e,o),t=!0},p(r,[o]){r[1]?i?(i.p(r,o),o&2&&C(i,1)):(i=Gw(r),i.c(),C(i,1),i.m(e.parentNode,e)):i&&(ce(),v(i,1,1,()=>{i=null}),fe())},i(r){t||(C(i),t=!0)},o(r){v(i),t=!1},d(r){i&&i.d(r),r&&z(e)}}}function nq(n){n.select()}function iq(n,e,t){let i,r,{show:o=!1}=e,{searching:s}=e,{resultCount:l=0}=e,{activeIndex:a=0}=e,{showReplace:u=!1}=e,{readOnly:c=!1}=e,{onChange:f=$t}=e,{onPrevious:h=$t}=e,{onNext:d=$t}=e,{onReplace:p=$t}=e,{onReplaceAll:m=$t}=e,{onClose:g=$t}=e,b="",y="",_="";function M(){b!==""&&f(b)}function w(){t(0,u=!u&&!c)}function S(L){L.preventDefault(),b!==y?(y=b,r.cancel(),f(b)):d()}function E(L){L.stopPropagation();const X=ol(L);X==="Enter"&&(L.preventDefault(),d()),X==="Shift+Enter"&&(L.preventDefault(),h()),X==="Ctrl+Enter"&&(L.preventDefault(),u?I():d()),X==="Ctrl+H"&&(L.preventDefault(),w()),X==="Escape"&&(L.preventDefault(),g())}function I(){c||p(b,_)}function O(){c||m(b,_)}function P(){b=this.value,t(8,b)}const A=()=>d(),H=()=>h(),W=()=>g();function q(){_=this.value,t(9,_)}return n.$$set=L=>{"show"in L&&t(1,o=L.show),"searching"in L&&t(2,s=L.searching),"resultCount"in L&&t(16,l=L.resultCount),"activeIndex"in L&&t(3,a=L.activeIndex),"showReplace"in L&&t(0,u=L.showReplace),"readOnly"in L&&t(4,c=L.readOnly),"onChange"in L&&t(17,f=L.onChange),"onPrevious"in L&&t(5,h=L.onPrevious),"onNext"in L&&t(6,d=L.onNext),"onReplace"in L&&t(18,p=L.onReplace),"onReplaceAll"in L&&t(19,m=L.onReplaceAll),"onClose"in L&&t(7,g=L.onClose)},n.$$.update=()=>{n.$$.dirty&65536&&t(10,i=l>=e1?`${e1-1}+`:String(l)),n.$$.dirty&131072&&t(20,r=Lp(f,vS)),n.$$.dirty&1048832&&r(b),n.$$.dirty&2&&o&&M()},[u,o,s,a,c,h,d,g,b,_,i,w,S,E,I,O,l,f,p,m,r,P,A,H,W,q]}class rq extends je{constructor(e){super(),ze(this,e,iq,tq,Ze,{show:1,searching:2,resultCount:16,activeIndex:3,showReplace:0,readOnly:4,onChange:17,onPrevious:5,onNext:6,onReplace:18,onReplaceAll:19,onClose:7})}}const oq=rq;var Yw=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function sq(n,e){return!!(n===e||Yw(n)&&Yw(e))}function lq(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!sq(n[t],e[t]))return!1;return!0}function Of(n,e){e===void 0&&(e=lq);var t=null;function i(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(t&&t.lastThis===this&&e(r,t.lastArgs))return t.lastResult;var s=n.apply(this,r);return t={lastResult:s,lastArgs:r,lastThis:this},s}return i.clear=function(){t=null},i}const Vc=Symbol("path");function aq(n,e,t=1/0){const i={};Array.isArray(n)&&OI(n,t,o=>{Rt(o)?T8(o,i,e):i[Vc]=!0});const r=[];return Vc in i&&r.push([]),D8(i,[],r,e),r}function T8(n,e,t){for(const i in n){const r=n[i],o=e[i]||(e[i]={});Rt(r)&&t?T8(r,o,t):o[Vc]===void 0&&(o[Vc]=!0)}}function D8(n,e,t,i){for(const r in n){const o=e.concat(r),s=n[r];s&&s[Vc]===!0&&t.push(o),Yt(s)&&i&&D8(s,o,t,i)}}function uq(n,e){const t=new Set(e.map(xe)),i=new Set(n.map(xe));for(const r of t)i.has(r)||t.delete(r);for(const r of i)t.has(r)||t.add(r);return[...t].map(Fr)}function cq(n,e,t,i,r,o=80){const s=Nt(t)?t.length:0,l=fq(i,r),a=n-o,u=e+2*o,c=b=>i[b]||r;let f=0,h=0;for(;h<a&&f<s;)h+=c(f),f++;f>0&&(f--,h-=c(f));let d=f,p=0;for(;p<u&&d<s;)p+=c(d),d++;let m=0;for(let b=d;b<s;b++)m+=c(b);const g=Nt(t)?t.slice(f,d):[];return{startIndex:f,endIndex:d,startHeight:h,endHeight:m,averageItemHeight:l,visibleHeight:p,visibleItems:g}}function X0(n,e,t,i){const{rowIndex:r}=Cr(n,e);let o=0;for(let s=0;s<r;s++)o+=t[s]||i;return o}function fq(n,e){const t=Object.values(n);if(yt(t))return e;const i=(o,s)=>o+s;return t.reduce(i)/t.length}function hq(n,e){const{rowIndex:t,columnIndex:i}=Cr(Fe(e),n);if(t>0){const r={rowIndex:t-1,columnIndex:i},o=sa(r,n);return tt(o,!1)}return e}function dq(n,e,t){const{rowIndex:i,columnIndex:r}=Cr(Fe(t),e);if(i<n.length-1){const o={rowIndex:i+1,columnIndex:r},s=sa(o,e);return tt(s,!1)}return t}function pq(n,e){const{rowIndex:t,columnIndex:i}=Cr(Fe(e),n);if(i>0){const r={rowIndex:t,columnIndex:i-1},o=sa(r,n);return tt(o,!1)}return e}function mq(n,e){const{rowIndex:t,columnIndex:i}=Cr(Fe(e),n);if(i<n.length-1){const r={rowIndex:t,columnIndex:i+1},o=sa(r,n);return tt(o,!1)}return e}function Cr(n,e){const[t,...i]=n,r=parseInt(t,10);return{rowIndex:isNaN(r)?-1:r,columnIndex:e.findIndex(o=>Qs(i,o))}}function sa(n,e){const{rowIndex:t,columnIndex:i}=n;return[String(t),...e[i]]}function gq(n,e){const[t,i]=dI(n,s=>f2(s.path[0])),r=Fp(t,bq),o=sI(r,s=>{const l={row:[],columns:{}};return s.forEach(a=>{const u=yq(a,e);u!==-1?(l.columns[u]===void 0&&(l.columns[u]=[]),l.columns[u].push(a)):l.row.push(a)}),l});return{root:i,rows:o}}function J2(n,e){if(!(!e||e.length===0))return e.length===1?e[0]:{path:n,message:"Multiple validation issues: "+e.map(t=>Ri(t.path)+" "+t.message).join(", "),severity:$o.warning}}function bq(n){return parseInt(n.path[0],10)}function yq(n,e){const t=Cr(n.path,e);return t.columnIndex!==-1?t.columnIndex:-1}function kq(n,e,t){return e.some(r=>wq(n.sortedColumn,r,t))?{...n,sortedColumn:null}:n}function wq(n,e,t){if(!n)return!1;if(e.op==="replace"){const i=Fr(e.path),{rowIndex:r,columnIndex:o}=Cr(i,t),s=t.findIndex(l=>st(l,n.path));if(r!==-1&&o!==-1&&o!==s)return!1}return!0}function Cq(n,e=2){const t=[];function i(r,o){Yt(r)&&o.length<e&&Object.keys(r).forEach(s=>{i(r[s],o.concat(s))}),Nt(r)&&t.push(o)}return i(n,[]),t}const ci=Wn("jsoneditor:actions");async function P8({json:n,documentState:e,indentation:t,readOnly:i,parser:r,onPatch:o}){if(i||n===void 0||!e.selection||!Ru(e.selection))return;const s=Xv(n,e.selection,t,r);if(s==null)return;ci("cut",{selection:e.selection,clipboard:s,indentation:t}),await U2(s);const{operations:l,newSelection:a}=e8(n,e.selection);o(l,(u,c)=>({state:{...c,selection:a}}))}async function R8({json:n,documentState:e,indentation:t,parser:i}){const r=Xv(n,e.selection,t,i);r!=null&&(ci("copy",{clipboard:r,indentation:t}),await U2(r))}function N8({clipboardText:n,json:e,selection:t,readOnly:i,parser:r,onPatch:o,onChangeText:s,openRepairModal:l}){if(i)return;function a(u){if(e!==void 0){const c=t||tt([],!1),f=$v(e,c,u,r);ci("paste",{pastedText:u,operations:f,selectionNonNull:c}),o(f,(h,d)=>{let p=d;return f.filter(m=>(MS(m)||o2(m))&&Qt(m.value)).forEach(m=>{const g=ho(e,m.path);p=vs(h,p,g)}),{state:p}})}else ci("paste text",{pastedText:u}),s(n,(c,f)=>{if(c)return{state:vs(c,f,[])}})}try{a(n)}catch{l(n,c=>{ci("repaired pasted text: ",c),a(c)})}}function I8({json:n,text:e,documentState:t,keepSelection:i,readOnly:r,onChange:o,onPatch:s}){if(r||!t.selection)return;const l=n!==void 0&&(un(t.selection)||mt(t.selection))?ui(t.selection.path,t.selection.path):t.selection;if(yt(Fe(t.selection)))ci("remove root",{selection:t.selection}),o&&o({text:"",json:void 0},n!==void 0?{text:void 0,json:n}:{text:e||"",json:n},{contentErrors:null,patchResult:null});else if(n!==void 0){const{operations:a,newSelection:u}=e8(n,l);ci("remove",{operations:a,selection:t.selection,newSelection:u}),s(a,(c,f)=>({state:{...f,selection:i?t.selection:u}}))}}function _q({json:n,documentState:e,columns:t,readOnly:i,onPatch:r}){if(i||n===void 0||!e.selection||!Ru(e.selection))return;const{rowIndex:o,columnIndex:s}=Cr(Fe(e.selection),t);ci("duplicate row",{rowIndex:o});const l=[String(o)],a=Zv(n,[l]);r(a,(u,c)=>{const f=o<n.length?o+1:o,h=sa({rowIndex:f,columnIndex:s},t),d=tt(h,!1);return{state:{...c,selection:d}}})}function Sq({json:n,documentState:e,columns:t,readOnly:i,onPatch:r}){if(i||n===void 0||!e.selection||!Ru(e.selection))return;const{rowIndex:o}=Cr(Fe(e.selection),t);ci("insert before row",{rowIndex:o});const s=[String(o)],a=[{key:"",value:Yt(n[0])?{}:""}],u=Ta(n,s,a);r(u)}function vq({json:n,documentState:e,columns:t,readOnly:i,onPatch:r}){if(i||n===void 0||!e.selection||!Ru(e.selection))return;const{rowIndex:o,columnIndex:s}=Cr(Fe(e.selection),t);ci("insert after row",{rowIndex:o});const l=o+1,a=[String(l)],c=[{key:"",value:Yt(n[0])?{}:""}],f=l<n.length?Ta(n,a,c):_1(n,[],c);r(f,(h,d)=>{const p=sa({rowIndex:l,columnIndex:s},t),m=tt(p,!1);return{state:{...d,selection:m}}})}function xq({json:n,documentState:e,columns:t,readOnly:i,onPatch:r}){if(i||n===void 0||!e.selection||!Ru(e.selection))return;const{rowIndex:o,columnIndex:s}=Cr(Fe(e.selection),t);ci("remove row",{rowIndex:o});const l=[String(o)],a=_d([l]);r(a,(u,c)=>{const f=o<u.length?o:o>0?o-1:void 0,h=f!==void 0?tt(sa({rowIndex:f,columnIndex:s},t),!1):null;return ci("remove row new selection",{rowIndex:o,newRowIndex:f,newSelection:h}),{state:{...c,selection:h}}})}function Ed({insertType:n,selectInside:e,refJsonEditor:t,json:i,selection:r,readOnly:o,parser:s,onPatch:l,onReplaceJson:a}){if(o)return;const u=dL(i,r,n);if(i!==void 0){const c=s.stringify(u),f=$v(i,r,c,s);ci("onInsert",{insertType:n,operations:f,newValue:u,data:c});const h=rt(f.filter(d=>d.op==="add"||d.op==="replace"));l(f,(d,p)=>{if(h){const m=ho(d,h.path);if(Qt(u))return{state:{...ir(d,p,m,Lc),selection:e?rs(m):p.selection}};if(u===""){const g=yt(m)?null:Pe(d,at(m));return{state:k1(d,{...p,selection:Rt(g)?hr(m,!0):tt(m,!0)},m)}}return}}),ci("after patch"),h&&u===""&&Od(()=>yd(t,"",!0,Td))}else{ci("onInsert",{insertType:n,newValue:u});const c=[];a(u,(f,h)=>({state:{...vs(f,h,c),selection:Qt(u)?rs(c):tt(c,!0)}}))}}async function B8({char:n,selectInside:e,refJsonEditor:t,json:i,selection:r,readOnly:o,parser:s,onPatch:l,onReplaceJson:a,onSelect:u}){if(!o){if(un(r)){const c=!r.edit;u({...r,edit:!0}),Od(()=>yd(t,n,c,Td));return}if(n==="{")Ed({insertType:"object",selectInside:e,refJsonEditor:t,json:i,selection:r,readOnly:o,parser:s,onPatch:l,onReplaceJson:a});else if(n==="[")Ed({insertType:"array",selectInside:e,refJsonEditor:t,json:i,selection:r,readOnly:o,parser:s,onPatch:l,onReplaceJson:a});else if(mt(r)&&i!==void 0){if(!Qt(Pe(i,r.path))){const c=!r.edit;u({...r,edit:!0}),Od(()=>yd(t,n,c,Td))}}else ci("onInsertValueWithCharacter",{char:n}),await Mq({char:n,refJsonEditor:t,json:i,selection:r,readOnly:o,parser:s,onPatch:l,onReplaceJson:a})}}async function Mq({char:n,refJsonEditor:e,json:t,selection:i,readOnly:r,parser:o,onPatch:s,onReplaceJson:l}){if(r)return;Ed({insertType:"value",selectInside:!1,refJsonEditor:e,json:t,selection:i,readOnly:r,parser:o,onPatch:s,onReplaceJson:l});const a=!hi(i);Od(()=>yd(e,n,a,Td))}function Od(n){setTimeout(()=>setTimeout(n))}function Td(n){n==null||n.refresh()}function Aq(n){let e,t;return{c(){e=D("div"),t=we(n[0]),k(e,"class","jse-json-preview svelte-l2z0i3")},m(i,r){j(i,e,r),x(e,t)},p(i,[r]){r&1&&We(t,i[0])},i:he,o:he,d(i){i&&z(e)}}}function Eq(n,e,t){let i,r,{text:o}=e,{json:s}=e,{indentation:l}=e,{parser:a}=e;return n.$$set=u=>{"text"in u&&t(1,o=u.text),"json"in u&&t(2,s=u.json),"indentation"in u&&t(3,l=u.indentation),"parser"in u&&t(4,a=u.parser)},n.$$.update=()=>{n.$$.dirty&6&&t(5,i=s!==void 0?{json:s}:{text:o||""}),n.$$.dirty&56&&t(0,r=ts(b1(i,l,a),t1))},[r,o,s,l,a,i]}class Oq extends je{constructor(e){super(),ze(this,e,Eq,Aq,xn,{text:1,json:2,indentation:3,parser:4})}}const L8=Oq;const{window:Tq}=t2;function Zw(n){let e,t,i;function r(s){n[79](s)}let o={json:n[11],selection:n[12].selection,readOnly:n[0],historyState:n[23],onExpandAll:n[41],onCollapseAll:n[42],onUndo:n[37],onRedo:n[38],onSort:n[39],onTransform:n[40],onContextMenu:n[46],onCopy:n[34],onRenderMenu:n[7]};return n[20]!==void 0&&(o.showSearch=n[20]),e=new xH({props:o}),ft.push(()=>Tr(e,"showSearch",r)),{c(){$(e.$$.fragment)},m(s,l){ee(e,s,l),i=!0},p(s,l){const a={};l[0]&2048&&(a.json=s[11]),l[0]&4096&&(a.selection=s[12].selection),l[0]&1&&(a.readOnly=s[0]),l[0]&8388608&&(a.historyState=s[23]),l[0]&128&&(a.onRenderMenu=s[7]),!t&&l[0]&1048576&&(t=!0,a.showSearch=s[20],Dr(()=>t=!1)),e.$set(a)},i(s){i||(C(e.$$.fragment,s),i=!0)},o(s){v(e.$$.fragment,s),i=!1},d(s){te(e,s)}}}function $w(n){let e,t;return e=new ZH({props:{json:n[11],selection:n[12].selection,onSelect:n[50],onError:n[6],pathParser:n[4]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&2048&&(o.json=i[11]),r[0]&4096&&(o.selection=i[12].selection),r[0]&64&&(o.onError=i[6]),r[0]&16&&(o.pathParser=i[4]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Dq(n){let e;return{c(){e=D("div"),e.innerHTML=`<div class="jse-loading-space svelte-16ru3ua"></div> 
      <div class="jse-loading svelte-16ru3ua">loading...</div>`,k(e,"class","jse-contents svelte-16ru3ua")},m(t,i){j(t,e,i)},p:he,i:he,o:he,d(t){t&&z(e)}}}function Pq(n){let e,t,i,r,o,s,l,a,u;const c=[Nq,Rq],f=[];function h(d,p){return d[11]===void 0?0:1}return r=h(n),o=f[r]=c[r](n),{c(){e=D("label"),t=D("input"),i=Q(),o.c(),s=ut(),k(t,"type","text"),t.readOnly=!0,k(t,"tabindex","-1"),k(t,"class","jse-hidden-input svelte-16ru3ua"),k(e,"class","jse-hidden-input-label")},m(d,p){j(d,e,p),x(e,t),n[80](t),j(d,i,p),f[r].m(d,p),j(d,s,p),l=!0,a||(u=ue(t,"paste",n[35]),a=!0)},p(d,p){let m=r;r=h(d),r===m?f[r].p(d,p):(ce(),v(f[m],1,1,()=>{f[m]=null}),fe(),o=f[r],o?o.p(d,p):(o=f[r]=c[r](d),o.c()),C(o,1),o.m(s.parentNode,s))},i(d){l||(C(o),l=!0)},o(d){v(o),l=!1},d(d){d&&z(e),n[80](null),d&&z(i),f[r].d(d),d&&z(s),a=!1,u()}}}function Rq(n){var d,p,m,g;let e,t,i,r,o,s,l,a,u,c;t=new oq({props:{show:n[20],resultCount:((p=(d=n[18])==null?void 0:d.items)==null?void 0:p.length)||0,activeIndex:((m=n[18])==null?void 0:m.activeIndex)||0,showReplace:n[21],searching:n[22],readOnly:n[0],onChange:n[27],onNext:n[28],onPrevious:n[29],onReplace:n[30],onReplaceAll:n[31],onClose:n[32]}}),o=new yH({props:{value:n[11],path:[],expandedMap:n[12].expandedMap,enforceStringMap:n[12].enforceStringMap,visibleSectionsMap:n[12].visibleSectionsMap,validationErrorsMap:n[25],searchResultItemsMap:(g=n[18])==null?void 0:g.itemsMap,selection:n[12].selection,context:n[14],onDragSelectionStart:$t}});let f=n[19]&&eC(n),h=n[24]&&tC(n);return u=new F2({props:{validationErrors:n[13],selectError:n[33]}}),{c(){e=D("div"),$(t.$$.fragment),i=Q(),r=D("div"),$(o.$$.fragment),s=Q(),f&&f.c(),l=Q(),h&&h.c(),a=Q(),$(u.$$.fragment),k(e,"class","jse-search-box-container svelte-16ru3ua"),k(r,"class","jse-contents svelte-16ru3ua"),k(r,"data-jsoneditor-scrollable-contents",!0)},m(b,y){j(b,e,y),ee(t,e,null),j(b,i,y),j(b,r,y),ee(o,r,null),n[84](r),j(b,s,y),f&&f.m(b,y),j(b,l,y),h&&h.m(b,y),j(b,a,y),ee(u,b,y),c=!0},p(b,y){var S,E,I,O;const _={};y[0]&1048576&&(_.show=b[20]),y[0]&262144&&(_.resultCount=((E=(S=b[18])==null?void 0:S.items)==null?void 0:E.length)||0),y[0]&262144&&(_.activeIndex=((I=b[18])==null?void 0:I.activeIndex)||0),y[0]&2097152&&(_.showReplace=b[21]),y[0]&4194304&&(_.searching=b[22]),y[0]&1&&(_.readOnly=b[0]),t.$set(_);const M={};y[0]&2048&&(M.value=b[11]),y[0]&4096&&(M.expandedMap=b[12].expandedMap),y[0]&4096&&(M.enforceStringMap=b[12].enforceStringMap),y[0]&4096&&(M.visibleSectionsMap=b[12].visibleSectionsMap),y[0]&33554432&&(M.validationErrorsMap=b[25]),y[0]&262144&&(M.searchResultItemsMap=(O=b[18])==null?void 0:O.itemsMap),y[0]&4096&&(M.selection=b[12].selection),y[0]&16384&&(M.context=b[14]),o.$set(M),b[19]?f?(f.p(b,y),y[0]&524288&&C(f,1)):(f=eC(b),f.c(),C(f,1),f.m(l.parentNode,l)):f&&(ce(),v(f,1,1,()=>{f=null}),fe()),b[24]?h?(h.p(b,y),y[0]&16777216&&C(h,1)):(h=tC(b),h.c(),C(h,1),h.m(a.parentNode,a)):h&&(ce(),v(h,1,1,()=>{h=null}),fe());const w={};y[0]&8192&&(w.validationErrors=b[13]),u.$set(w)},i(b){c||(C(t.$$.fragment,b),C(o.$$.fragment,b),C(f),C(h),C(u.$$.fragment,b),c=!0)},o(b){v(t.$$.fragment,b),v(o.$$.fragment,b),v(f),v(h),v(u.$$.fragment,b),c=!1},d(b){b&&z(e),te(t),b&&z(i),b&&z(r),te(o),n[84](null),b&&z(s),f&&f.d(b),b&&z(l),h&&h.d(b),b&&z(a),te(u,b)}}}function Nq(n){let e,t,i,r;const o=[Bq,Iq],s=[];function l(a,u){return a[17]===""||a[17]===void 0?0:1}return e=l(n),t=s[e]=o[e](n),{c(){t.c(),i=ut()},m(a,u){s[e].m(a,u),j(a,i,u),r=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(ce(),v(s[c],1,1,()=>{s[c]=null}),fe(),t=s[e],t?t.p(a,u):(t=s[e]=o[e](a),t.c()),C(t,1),t.m(i.parentNode,i))},i(a){r||(C(t),r=!0)},o(a){v(t),r=!1},d(a){s[e].d(a),a&&z(i)}}}function eC(n){let e,t;return e=new Jr({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[19].contents)?"array":"object"} as text`,actions:[{icon:qp,text:"Paste as JSON instead",title:"Replace the value with the pasted JSON",onMouseDown:n[47]},{text:"Leave as is",title:"Keep the JSON embedded in the value",onClick:n[48]}]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&524288&&(o.message=`You pasted a JSON ${Array.isArray(i[19].contents)?"array":"object"} as text`),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function tC(n){let e,t;return e=new Jr({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:jc,text:"Ok",title:"Accept the repaired document",onClick:n[8]},{icon:Xs,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:n[49]}],onClose:n[9]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&1&&(o.actions=i[0]?[]:[{icon:jc,text:"Ok",title:"Accept the repaired document",onClick:i[8]},{icon:Xs,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:i[49]}]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Iq(n){let e,t,i,r;return e=new Jr({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:Xs,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:n[49]}]}}),i=new L8({props:{text:n[17],json:n[11],indentation:n[5],parser:n[3]}}),{c(){$(e.$$.fragment),t=Q(),$(i.$$.fragment)},m(o,s){ee(e,o,s),j(o,t,s),ee(i,o,s),r=!0},p(o,s){const l={};s[0]&1&&(l.actions=o[0]?[]:[{icon:Xs,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:o[49]}]),e.$set(l);const a={};s[0]&131072&&(a.text=o[17]),s[0]&2048&&(a.json=o[11]),s[0]&32&&(a.indentation=o[5]),s[0]&8&&(a.parser=o[3]),i.$set(a)},i(o){r||(C(e.$$.fragment,o),C(i.$$.fragment,o),r=!0)},o(o){v(e.$$.fragment,o),v(i.$$.fragment,o),r=!1},d(o){te(e,o),o&&z(t),te(i,o)}}}function Bq(n){let e,t;return e=new OH({props:{readOnly:n[0],onCreateObject:n[81],onCreateArray:n[82],onClick:n[83]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&1&&(o.readOnly=i[0]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Lq(n){let e,t,i,r,o,s,l,a,u=n[1]&&Zw(n),c=n[2]&&$w(n);const f=[Pq,Dq],h=[];function d(p,m){return p[26]?1:0}return r=d(n),o=h[r]=f[r](n),{c(){e=D("div"),u&&u.c(),t=Q(),c&&c.c(),i=Q(),o.c(),k(e,"role","tree"),k(e,"tabindex","-1"),k(e,"class","jse-tree-mode svelte-16ru3ua"),le(e,"no-main-menu",!n[1])},m(p,m){j(p,e,m),u&&u.m(e,null),x(e,t),c&&c.m(e,null),x(e,i),h[r].m(e,null),n[85](e),s=!0,l||(a=[ue(Tq,"mousedown",n[51]),ue(e,"keydown",n[43]),ue(e,"mousedown",n[44]),ue(e,"contextmenu",n[45])],l=!0)},p(p,m){p[1]?u?(u.p(p,m),m[0]&2&&C(u,1)):(u=Zw(p),u.c(),C(u,1),u.m(e,t)):u&&(ce(),v(u,1,1,()=>{u=null}),fe()),p[2]?c?(c.p(p,m),m[0]&4&&C(c,1)):(c=$w(p),c.c(),C(c,1),c.m(e,i)):c&&(ce(),v(c,1,1,()=>{c=null}),fe()),o.p(p,m),(!s||m[0]&2)&&le(e,"no-main-menu",!p[1])},i(p){s||(C(u),C(c),C(o),s=!0)},o(p){v(u),v(c),v(o),s=!1},d(p){p&&z(e),u&&u.d(),c&&c.d(),h[r].d(),n[85](null),l=!1,fn(a)}}}function Fq(n,e,t){let i;const r=Wn("jsoneditor:TreeMode"),o=typeof window>"u";r("isSSR:",o);const{open:s}=Vn("simple-modal"),l=ru(),a=ru(),{openAbsolutePopup:u,closeAbsolutePopup:c}=Vn("absolute-popup");let f,h,d,p=!1;const m=k8();let{readOnly:g}=e,{externalContent:b}=e,{externalSelection:y}=e,{mainMenuBar:_}=e,{navigationBar:M}=e,{escapeControlCharacters:w}=e,{escapeUnicodeCharacters:S}=e,{parser:E}=e,{parseMemoizeOne:I}=e,{validator:O}=e,{validationParser:P}=e,{pathParser:A}=e,{indentation:H}=e,{onError:W}=e,{onChange:q}=e,{onChangeMode:L}=e,{onSelect:X}=e,{onRenderValue:Y}=e,{onRenderMenu:G}=e,{onRenderContextMenu:T}=e,{onClassName:B}=e,{onFocus:J}=e,{onBlur:ne}=e,{onSortModal:_e}=e,{onTransformModal:ae}=e,{onJSONEditorModal:Te}=e,re=!1;L2({onMount:br,onDestroy:Ki,getWindow:()=>Pu(d),hasFocus:()=>re&&document.hasFocus()||x2(d),onFocus:()=>{p=!0,J&&J()},onBlur:()=>{p=!1,ne&&ne()}});let U,Ce,Ke;function K(R){r("updateSelection",R);const oe=typeof R=="function"?R(F.selection)||null:R;st(oe,F.selection)||(t(12,F={...F,selection:oe}),X(oe))}let De=!1,F=wd(),ke,Me,Ae,Le=!1,ct=!1,Z=!1,Ve="";async function bt(R){r("search text updated",R),t(78,Ve=R),await an(),await _t()}async function me(){t(18,ke=ke?gL(ke):void 0),await _t()}async function $e(){t(18,ke=ke?bL(ke):void 0),await _t()}async function Ut(R,oe){const Se=ke==null?void 0:ke.activeItem;if(r("handleReplace",{replacementText:oe,activeItem:Se}),!Se||U===void 0)return;const{operations:et,newSelection:He}=yL(U,F,oe,Se,E);wn(et,(St,yn)=>({state:{...yn,selection:He}})),await an(),await _t()}async function Ue(R,oe){r("handleReplaceAll",{text:R,replacementText:oe});const{operations:Se,newSelection:et}=kL(U,F,R,oe,E);wn(Se,(He,St)=>({state:{...St,selection:et}})),await an(),await _t()}function wt(){t(20,Le=!1),t(21,ct=!1),bt(""),Ot()}async function _t(){const R=ke==null?void 0:ke.activeItem;if(r("focusActiveSearchResult",ke),R&&U!==void 0){const oe=R.path;t(12,F={...k1(U,F,oe),selection:null}),await an(),await zi(oe)}}function it(R,oe){if(R===""){r("clearing search result"),ke!==void 0&&t(18,ke=void 0);return}t(22,Z=!0),setTimeout(()=>{r("searching...",R);const Se=n8(R,oe,e1);t(18,ke=mL(oe,Se,ke)),t(22,Z=!1)})}function Mn(R){r("select validation error",R),K(tt(R.path,!1)),zi(R.path)}const gn=w8({onChange:R=>{t(23,Dn=R)}});let Dn=gn.getState();function ti(R=Lc){r("expand");const oe={...F,expandedMap:{},visibleSectionsMap:{}};t(12,F=ir(U,oe,[],R))}const se=SI(it,VO);let Je=!1,Bt=[],Pn;const xt=Of(C8);function de(R,oe,Se,et){Pa(()=>{let He;try{He=xt(R,oe,Se,et)}catch(St){He=[{path:[],message:"Failed to validate: "+St.message,severity:$o.warning}]}st(He,Bt)||(r("validationErrors changed:",He),t(13,Bt=He))},He=>r(`validationErrors updated in ${He} ms`))}function ni(){return r("validate"),Ke?{parseError:Ke,isRepairable:!1}:(de(U,O,E,P),yt(Bt)?null:{validationErrors:Bt})}function Rn(){return U}function sn(){return F}function Mt(R){Nc(R)?Do(R.json):su(R)&&dl(R.text)}function Do(R){if(R===void 0)return;const oe=!st(U,R);if(r("update external json",{isChanged:oe,currentlyText:U===void 0}),!oe)return;const Se={json:U,text:Ce},et=F,He=U,St=Ce,yn=Je;t(11,U=R),Li(U),t(17,Ce=void 0),t(24,Je=!1),Ke=void 0,Yi(U),Nn({previousJson:He,previousState:et,previousText:St,previousTextIsRepaired:yn}),Ar(Se,null)}function dl(R){if(R===void 0||Nc(b))return;const oe=R!==Ce;if(r("update external text",{isChanged:oe}),!oe)return;const Se={json:U,text:Ce},et=U,He=F,St=Ce,yn=Je;try{t(11,U=I(R)),Li(U),t(17,Ce=R),t(24,Je=!1),Ke=void 0}catch(Jt){try{t(11,U=I(po(R))),Li(U),t(17,Ce=R),t(24,Je=!0),Ke=void 0,Yi(U)}catch{t(11,U=void 0),t(17,Ce=b.text),t(24,Je=!1),Ke=Ce!==void 0&&Ce!==""?ou(Ce,Jt.message||String(Jt)):void 0}}Yi(U),Nn({previousJson:et,previousState:He,previousText:St,previousTextIsRepaired:yn}),Ar(Se,null)}function ds(R){st(F.selection,R)||(r("applyExternalSelection",R),(E2(R)||R===null)&&K(R))}function Li(R){De||(De=!0,t(12,F=ir(R,F,[],GB(R))))}function Yi(R){F.selection&&(fr(R,Wl(F.selection))&&fr(R,Fe(F.selection))||(r("clearing selection: path does not exist anymore",F.selection),t(12,F={...F,selection:da(R,F)})))}function Nn({previousJson:R,previousState:oe,previousText:Se,previousTextIsRepaired:et}){R===void 0&&Se===void 0||(U!==void 0?R!==void 0?gn.add({undo:{patch:[{op:"replace",path:"",value:R}],state:ri(oe),json:void 0,text:Se,textIsRepaired:et},redo:{patch:[{op:"replace",path:"",value:U}],state:ri(F),json:void 0,text:Ce,textIsRepaired:Je}}):gn.add({undo:{patch:void 0,json:void 0,text:Se,state:ri(oe),textIsRepaired:et},redo:{patch:void 0,json:U,state:ri(F),text:Ce,textIsRepaired:Je}}):R!==void 0&&gn.add({undo:{patch:void 0,json:R,state:ri(oe),text:Se,textIsRepaired:et},redo:{patch:void 0,json:void 0,text:Ce,textIsRepaired:Je,state:ri(F)}}))}function ps(){r("createDefaultSelection"),t(12,F={...F,selection:tt([],!1)})}function Fi(R,oe){if(r("patch",R,oe),U===void 0)throw new Error("Cannot apply patch: no JSON");const Se={json:U,text:Ce},et=U,He=F,St=Ce,yn=Je,er=t8(U,R),Jt=Vv(U,F,R),gl=au(U,R),ay=tL(Jt.documentState,gl,!1);r("patch updatedSelection",gl);const fa=typeof oe=="function"?oe(Jt.json,ay):void 0;t(11,U=fa&&fa.json!==void 0?fa.json:Jt.json);const uy=fa&&fa.state!==void 0?fa.state:ay;t(12,F=uy),t(17,Ce=void 0),t(24,Je=!1),t(19,Ae=void 0),Ke=void 0,Yi(U),gn.add({undo:{patch:er,json:void 0,text:St,state:ri(He),textIsRepaired:yn},redo:{patch:R,json:void 0,state:ri(uy),text:Ce,textIsRepaired:Je}});const cy={json:U,previousJson:et,undo:er,redo:R};return Ar(Se,cy),cy}function ji(){g||!F.selection||K(hr(Fe(F.selection),!0))}function vr(){if(g||!F.selection)return;const R=Fe(F.selection),oe=Pe(U,R);Qt(oe)?ca(R,oe):K(tt(R,!0))}function Zi(){if(g||!mt(F.selection))return;const R=Fe(F.selection),oe=xe(R),Se=Pe(U,R),et=!ns(Se,F.enforceStringMap,oe,E),He=et?String(Se):Eu(String(Se),E);r("handleToggleEnforceString",{enforceString:et,value:Se,updatedValue:He}),wn([{op:"replace",path:oe,value:He}],(St,yn)=>({state:zv(yn,oe,et)}))}function xr(){return Je&&U!==void 0&&bs(U),U!==void 0?{json:U}:{text:Ce||""}}async function bn(R=!0){await P8({json:U,documentState:F,indentation:R?H:void 0,readOnly:g,parser:E,onPatch:wn})}async function Un(R=!0){U!==void 0&&await R8({json:U,documentState:F,indentation:R?H:void 0,parser:E})}function Po(R){var Se;R.preventDefault();const oe=(Se=R.clipboardData)==null?void 0:Se.getData("text/plain");oe!==void 0&&N8({clipboardText:oe,json:U,selection:F.selection,readOnly:g,parser:E,onPatch:wn,onChangeText:Vu,openRepairModal:pl})}function Mr(){s(_8,{},{...zl,styleWindow:{width:"450px"}},{onClose:()=>Ot()})}function pl(R,oe){s(x8,{text:R,onParse:Se=>jp(Se,et=>_f(et,E)),onRepair:vv,onApply:oe},{...zl,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>Ot()})}function Ro(){I8({json:U,text:Ce,documentState:F,keepSelection:!1,readOnly:g,onChange:q,onPatch:wn})}function hn(){if(g||U===void 0||!F.selection||!Ru(F.selection)||yt(Fe(F.selection)))return;r("duplicate",{selection:F.selection});const R=Zv(U,Gs(U,F.selection));wn(R)}function ms(){if(g||!F.selection||!vt(F.selection)&&!mt(F.selection)||yt(Fe(F.selection)))return;r("extract",{selection:F.selection});const R=fL(U,F.selection);wn(R,(oe,Se)=>{if(Qt(oe))return{state:vs(oe,Se,[])}})}function $i(R){U!==void 0&&Ed({insertType:R,selectInside:!0,refJsonEditor:d,json:U,selection:F.selection,readOnly:g,parser:E,onPatch:wn,onReplaceJson:bs})}function No(R){un(F.selection)&&K(tt(F.selection.path,!1)),F.selection||K(da(U,F)),$i(R)}function ie(R){if(!(g||!F.selection)){if(!Qh(F.selection)){W(new Error(`Cannot convert current selection to ${R}`));return}try{const oe=Wl(F.selection),Se=Pe(U,oe),et=RI(Se,R,E);if(et===Se)return;const He=[{op:"replace",path:xe(oe),value:et}];r("handleConvert",{selection:F.selection,path:oe,type:R,operations:He}),wn(He,(St,yn)=>({state:F.selection?vs(St,yn,Fe(F.selection)):F}))}catch(oe){W(oe)}}}function Ge(){if(!F.selection)return;const R=Ak(U,F,!1),oe=at(Fe(F.selection));R&&!yt(Fe(R))&&st(oe,at(Fe(R)))?K(ss(Fe(R))):K(rs(oe)),r("insert before",{selection:F.selection,selectionBefore:R,parentPath:oe}),an().then(()=>N())}function kt(){if(!F.selection)return;const R=sl(U,F.selection);r("insert after",R),K(ss(R)),an().then(()=>N())}async function At(R){await B8({char:R,selectInside:!0,refJsonEditor:d,json:U,selection:F.selection,readOnly:g,parser:E,onPatch:wn,onReplaceJson:bs,onSelect:K})}function It(){if(g||!gn.getState().canUndo)return;const R=gn.undo();if(!R)return;const oe={json:U,text:Ce};t(11,U=R.undo.patch?Br(U,R.undo.patch):R.undo.json),t(12,F=R.undo.state),t(17,Ce=R.undo.text),t(24,Je=R.undo.textIsRepaired),Ke=void 0,r("undo",{item:R,json:U,documentState:F});const Se=R.undo.patch&&R.redo.patch?{json:U,previousJson:oe.json,redo:R.undo.patch,undo:R.redo.patch}:null;Ar(oe,Se),Ot(),F.selection&&zi(Fe(F.selection),!1)}function ln(){if(g||!gn.getState().canRedo)return;const R=gn.redo();if(!R)return;const oe={json:U,text:Ce};t(11,U=R.redo.patch?Br(U,R.redo.patch):R.redo.json),t(12,F=R.redo.state),t(17,Ce=R.redo.text),t(24,Je=R.redo.textIsRepaired),Ke=void 0,r("redo",{item:R,json:U,documentState:F});const Se=R.undo.patch&&R.redo.patch?{json:U,previousJson:oe.json,redo:R.redo.patch,undo:R.undo.patch}:null;Ar(oe,Se),Ot(),F.selection&&zi(Fe(F.selection),!1)}function gi(R){g||U===void 0||(re=!0,_e({id:l,json:U,rootPath:R,onSort:async({operations:oe})=>{r("onSort",R,oe),wn(oe,(Se,et)=>({state:{...vs(Se,et,R),selection:tt(R,!1)}}))},onClose:()=>{re=!1,Ot()}}))}function Io(){if(!F.selection)return;const R=Ek(U,F.selection);gi(R)}function Bo(){gi([])}function Xr(R){if(U===void 0)return;const{id:oe,onTransform:Se,onClose:et}=R,He=R.rootPath||[];re=!0,ae({id:oe||a,json:U,rootPath:He,onTransform:St=>{Se?Se({operations:St,json:U,transformedJson:Br(U,St)}):(r("onTransform",He,St),wn(St,(yn,er)=>({state:{...vs(yn,er,He),selection:tt(He,!1)}})))},onClose:()=>{re=!1,Ot(),et&&et()}})}function Lo(){if(!F.selection)return;const R=Ek(U,F.selection);Xr({rootPath:R})}function zu(){Xr({rootPath:[]})}function ca(R,oe){r("openJSONEditorModal",{path:R,value:oe}),re=!0,Te({content:{json:oe},path:R,onPatch:Jf.onPatch,onClose:()=>{re=!1,Ot()}})}async function zi(R,oe=!0){t(12,F=k1(U,F,R)),await an();const Se=Yr(R);if(r("scrollTo",{path:R,elem:Se,refContents:f}),!Se||!f)return Promise.resolve();const et=f.getBoundingClientRect(),He=Se.getBoundingClientRect();if(!oe&&He.bottom>et.top&&He.top<et.bottom)return Promise.resolve();const St=-(et.height/4);return new Promise(yn=>{m(Se,{container:f,offset:St,duration:$m,callback:()=>yn()})})}function Yr(R){return f?f.querySelector(`div[data-path="${lu(R)}"]`):null}function gs(R){const oe=Yr(R);if(!oe||!f)return;const Se=f.getBoundingClientRect(),et=oe.getBoundingClientRect(),He=20,St=Qt(Pe(U,R))?He:et.height;et.top<Se.top+He?m(oe,{container:f,offset:-He,duration:0}):et.top+St>Se.bottom-He&&m(oe,{container:f,offset:-(Se.height-St-He),duration:0})}function Ar(R,oe){if(!(R.json===void 0&&(R==null?void 0:R.text)===void 0)){if(Ce!==void 0){const Se={text:Ce,json:void 0};q==null||q(Se,R,{contentErrors:ni(),patchResult:oe})}else if(U!==void 0){const Se={text:void 0,json:U};q==null||q(Se,R,{contentErrors:ni(),patchResult:oe})}}}function wn(R,oe){return g?{json:U,previousJson:U,undo:[],redo:[]}:(r("handlePatch",R,oe),Fi(R,oe))}function bs(R,oe){const Se=F,et=U,He=Ce,St={json:U,text:Ce},yn=Je,er=ir(U,F,[],so),Jt=typeof oe=="function"?oe(R,er):void 0;t(11,U=Jt&&Jt.json!==void 0?Jt.json:R),t(12,F=Jt&&Jt.state!==void 0?Jt.state:er),t(17,Ce=void 0),t(24,Je=!1),Ke=void 0,Yi(U),Nn({previousJson:et,previousState:Se,previousText:He,previousTextIsRepaired:yn}),Ar(St,null)}function Vu(R,oe){r("handleChangeText");const Se=F,et=U,He=Ce,St={json:U,text:Ce},yn=Je;try{t(11,U=I(R)),t(12,F=ir(U,F,[],so)),t(17,Ce=void 0),t(24,Je=!1),Ke=void 0}catch(Jt){try{t(11,U=I(po(R))),t(12,F=ir(U,F,[],so)),t(17,Ce=R),t(24,Je=!0),Ke=void 0}catch{t(11,U=void 0),t(12,F=wd({json:U,expand:so})),t(17,Ce=R),t(24,Je=!1),Ke=Ce!==""?ou(Ce,Jt.message||String(Jt)):void 0}}if(typeof oe=="function"){const Jt=oe(U,F);t(11,U=Jt&&Jt.json?Jt.json:U),t(12,F=Jt&&Jt.state?Jt.state:F)}Yi(U),Nn({previousJson:et,previousState:Se,previousText:He,previousTextIsRepaired:yn}),Ar(St,null)}function Fo(R,oe,Se=!1){r("expand",{path:R,expanded:oe,recursive:Se}),oe?Se?t(12,F=ir(U,F,R,Lc)):t(12,F=HB(F,R)):t(12,F=jv(F,R)),F.selection&&!oe&&XB(F.selection,R)&&K(null),Ot()}function Hu(){Fo([],!0,!0)}function qu(){Fo([],!1,!0)}function ml(R){r("openFind",{findAndReplace:R}),t(20,Le=!1),t(21,ct=!1),an().then(()=>{t(20,Le=!0),t(21,ct=R)})}function Wu(R,oe){r("handleExpandSection",R,oe);const Se=xe(R);t(12,F=qB(U,F,Se,oe))}function Uu(R){r("pasted json as text",R),t(19,Ae=R)}function V(R){const oe=ol(R),Se=R.shiftKey;if(r("keydown",{combo:oe,key:R.key}),oe==="Ctrl+X"&&(R.preventDefault(),bn(!0)),oe==="Ctrl+Shift+X"&&(R.preventDefault(),bn(!1)),oe==="Ctrl+C"&&(R.preventDefault(),Un(!0)),oe==="Ctrl+Shift+C"&&(R.preventDefault(),Un(!1)),oe==="Ctrl+D"&&(R.preventDefault(),hn()),(oe==="Delete"||oe==="Backspace")&&(R.preventDefault(),Ro()),oe==="Insert"&&(R.preventDefault(),$i("structure")),oe==="Ctrl+A"&&(R.preventDefault(),K(nL())),oe==="Ctrl+Q"&&N(R),oe==="ArrowUp"||oe==="Shift+ArrowUp"){R.preventDefault();const He=F.selection?Ak(U,F,Se)||F.selection:da(U,F);K(He),gs(Fe(He))}if(oe==="ArrowDown"||oe==="Shift+ArrowDown"){R.preventDefault();const He=F.selection?YB(U,F,Se)||F.selection:da(U,F);K(He),gs(Fe(He))}if(oe==="ArrowLeft"||oe==="Shift+ArrowLeft"){R.preventDefault();const He=F.selection?$B(U,F,Se,!g)||F.selection:da(U,F);K(He),gs(Fe(He))}if(oe==="ArrowRight"||oe==="Shift+ArrowRight"){R.preventDefault();const He=F.selection&&U!==void 0?eL(U,F,Se,!g)||F.selection:da(U,F);K(He),gs(Fe(He))}if(oe==="Enter"&&F.selection){if(Vp(F.selection)){const He=F.selection.focusPath,St=Pe(U,at(He));Array.isArray(St)&&K(tt(He,!1))}if(un(F.selection)&&(R.preventDefault(),K({...F.selection,edit:!0})),mt(F.selection)){R.preventDefault();const He=Pe(U,F.selection.path);Qt(He)?Fo(F.selection.path,!0):K({...F.selection,edit:!0})}}if(oe.replace(/^Shift\+/,"").length===1&&F.selection){R.preventDefault(),At(R.key);return}if(oe==="Enter"&&(Oi(F.selection)||pn(F.selection))){R.preventDefault(),At("");return}if(oe==="Ctrl+Enter"&&mt(F.selection)){const He=Pe(U,F.selection.path);xp(He)&&window.open(String(He),"_blank")}oe==="Escape"&&F.selection&&(R.preventDefault(),K(null)),oe==="Ctrl+F"&&(R.preventDefault(),ml(!1)),oe==="Ctrl+H"&&(R.preventDefault(),ml(!0)),oe==="Ctrl+Z"&&(R.preventDefault(),It()),oe==="Ctrl+Shift+Z"&&(R.preventDefault(),ln())}function ge(R){r("handleMouseDown",R);const oe=R.target;!S2(oe,"BUTTON")&&!oe.isContentEditable&&(Ot(),!F.selection&&U===void 0&&(Ce===""||Ce===void 0)&&ps())}function Ee({anchor:R,left:oe,top:Se,width:et,height:He,offsetTop:St,offsetLeft:yn,showTip:er}){const Jt={json:U,documentState:F,parser:E,showTip:er,onEditKey:ji,onEditValue:vr,onToggleEnforceString:Zi,onCut:bn,onCopy:Un,onPaste:Mr,onRemove:Ro,onDuplicate:hn,onExtract:ms,onInsertBefore:Ge,onInsert:No,onConvert:ie,onInsertAfter:kt,onSort:Io,onTransform:Lo,onRenderContextMenu:T,onCloseContextMenu(){c(gl),Ot()}};re=!0;const gl=u(kV,Jt,{left:oe,top:Se,offsetTop:St,offsetLeft:yn,width:et,height:He,anchor:R,closeOnOuterClick:!0,onClose:()=>{re=!1,Ot()}})}function N(R){if(!(g||hi(F.selection))){if(R&&(R.stopPropagation(),R.preventDefault()),R&&R.type==="contextmenu"&&R.target!==h)Ee({left:R.clientX,top:R.clientY,width:Uo,height:Wo,showTip:!1});else{const oe=f==null?void 0:f.querySelector(".jse-context-menu-pointer.jse-selected");if(oe)Ee({anchor:oe,offsetTop:2,width:Uo,height:Wo,showTip:!1});else{const Se=f==null?void 0:f.getBoundingClientRect();Se&&Ee({top:Se.top+2,left:Se.left+2,width:Uo,height:Wo,showTip:!1})}}return!1}}function be(R){g||Ee({anchor:Rv(R.target,"BUTTON"),offsetTop:0,width:Uo,height:Wo,showTip:!0})}async function Qe(){if(r("apply pasted json",Ae),!Ae)return;const{path:R,contents:oe}=Ae;t(19,Ae=void 0);const Se=(f==null?void 0:f.querySelector(".jse-editable-div"))||null;Iv(Se)&&Se.cancel();const et=[{op:"replace",path:xe(R),value:oe}];wn(et,(He,St)=>({state:vs(He,St,R)})),setTimeout(Ot)}function Et(){r("clear pasted json"),t(19,Ae=void 0),Ot()}function Lt(){L(Gn.text)}function dt(R){K(R),Ot(),zi(Fe(R))}function Ot(){r("focus"),h&&(h.focus(),h.select())}function jo(R){!Sf(R.target,Se=>Se===d)&&hi(F.selection)&&(r("click outside the editor, stop edit mode"),K(Se=>un(Se)?{...Se,edit:!1}:mt(Se)?{...Se,edit:!1}:Se),p&&h&&(h.focus(),h.blur()),r("blur (outside editor)"),h&&h.blur())}function Wf(R){return ZB(U,F,R)}function Uf(R){i&&i.onDrag(R)}function bO(){i&&i.onDragEnd()}let Jf;function yO(R){Le=R,t(20,Le)}function kO(R){ft[R?"unshift":"push"](()=>{h=R,t(15,h)})}const wO=()=>{Ot(),At("{")},CO=()=>{Ot(),At("[")},_O=()=>{Ot()};function SO(R){ft[R?"unshift":"push"](()=>{f=R,t(10,f)})}function vO(R){ft[R?"unshift":"push"](()=>{d=R,t(16,d)})}return n.$$set=R=>{"readOnly"in R&&t(0,g=R.readOnly),"externalContent"in R&&t(52,b=R.externalContent),"externalSelection"in R&&t(53,y=R.externalSelection),"mainMenuBar"in R&&t(1,_=R.mainMenuBar),"navigationBar"in R&&t(2,M=R.navigationBar),"escapeControlCharacters"in R&&t(54,w=R.escapeControlCharacters),"escapeUnicodeCharacters"in R&&t(55,S=R.escapeUnicodeCharacters),"parser"in R&&t(3,E=R.parser),"parseMemoizeOne"in R&&t(56,I=R.parseMemoizeOne),"validator"in R&&t(57,O=R.validator),"validationParser"in R&&t(58,P=R.validationParser),"pathParser"in R&&t(4,A=R.pathParser),"indentation"in R&&t(5,H=R.indentation),"onError"in R&&t(6,W=R.onError),"onChange"in R&&t(59,q=R.onChange),"onChangeMode"in R&&t(60,L=R.onChangeMode),"onSelect"in R&&t(61,X=R.onSelect),"onRenderValue"in R&&t(62,Y=R.onRenderValue),"onRenderMenu"in R&&t(7,G=R.onRenderMenu),"onRenderContextMenu"in R&&t(63,T=R.onRenderContextMenu),"onClassName"in R&&t(64,B=R.onClassName),"onFocus"in R&&t(65,J=R.onFocus),"onBlur"in R&&t(66,ne=R.onBlur),"onSortModal"in R&&t(67,_e=R.onSortModal),"onTransformModal"in R&&t(68,ae=R.onTransformModal),"onJSONEditorModal"in R&&t(69,Te=R.onJSONEditorModal)},n.$$.update=()=>{n.$$.dirty[1]&25165824&&t(77,Me=_2({escapeControlCharacters:w,escapeUnicodeCharacters:S})),n.$$.dirty[0]&4096&&r("selection",F.selection),n.$$.dirty[1]&2097152&&Mt(b),n.$$.dirty[1]&4194304&&ds(y),n.$$.dirty[0]&2048|n.$$.dirty[2]&65536&&se(Ve,U),n.$$.dirty[0]&2056|n.$$.dirty[1]&201326592&&de(U,O,E,P),n.$$.dirty[0]&8192&&t(25,Pn=Yj(Bt)),n.$$.dirty[0]&1024&&(i=f?Gj(f):void 0),n.$$.dirty[0]&9|n.$$.dirty[2]&32773&&t(14,Jf={readOnly:g,parser:E,normalization:Me,getJson:Rn,getDocumentState:sn,findElement:Yr,findNextInside:Wf,focus:Ot,onPatch:wn,onInsert:$i,onExpand:Fo,onSelect:K,onFind:ml,onExpandSection:Wu,onPasteJson:Uu,onRenderValue:Y,onContextMenu:Ee,onClassName:B||(()=>{}),onDrag:Uf,onDragEnd:bO}),n.$$.dirty[0]&16384&&r("context changed",Jf)},[g,_,M,E,A,H,W,G,xr,Ot,f,U,F,Bt,Jf,h,d,Ce,ke,Ae,Le,ct,Z,Dn,Je,Pn,o,bt,me,$e,Ut,Ue,wt,Mn,Un,Po,At,It,ln,Bo,zu,Hu,qu,V,ge,N,be,Qe,Et,Lt,dt,jo,b,y,w,S,I,O,P,q,L,X,Y,T,B,J,ne,_e,ae,Te,ti,ni,Rn,Fi,Xr,zi,Yr,Me,Ve,yO,kO,wO,CO,_O,SO,vO]}class jq extends je{constructor(e){super(),ze(this,e,Fq,Lq,Ze,{readOnly:0,externalContent:52,externalSelection:53,mainMenuBar:1,navigationBar:2,escapeControlCharacters:54,escapeUnicodeCharacters:55,parser:3,parseMemoizeOne:56,validator:57,validationParser:58,pathParser:4,indentation:5,onError:6,onChange:59,onChangeMode:60,onSelect:61,onRenderValue:62,onRenderMenu:7,onRenderContextMenu:63,onClassName:64,onFocus:65,onBlur:66,onSortModal:67,onTransformModal:68,onJSONEditorModal:69,expand:70,validate:71,getJson:72,patch:73,acceptAutoRepair:8,openTransformModal:74,scrollTo:75,findElement:76,focus:9},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[70]}get validate(){return this.$$.ctx[71]}get getJson(){return this.$$.ctx[72]}get patch(){return this.$$.ctx[73]}get acceptAutoRepair(){return this.$$.ctx[8]}get openTransformModal(){return this.$$.ctx[74]}get scrollTo(){return this.$$.ctx[75]}get findElement(){return this.$$.ctx[76]}get focus(){return this.$$.ctx[9]}}const K2=jq;function F8(n){return zq(n)?new Proxy(n,{get(e,t,i){const r=Reflect.get(e,t,i);return F8(r)},set(){return!1},deleteProperty(){return!1}}):n}function zq(n){return typeof n=="object"&&n!==null}function nC(n){let e,t,i,r,o;const s=[Hq,Vq],l=[];function a(u,c){return c[0]&16384&&(e=null),e==null&&(e=!!Array.isArray(u[14])),e?0:1}return t=a(n,[-1,-1]),i=l[t]=s[t](n),{c(){i.c(),r=ut()},m(u,c){l[t].m(u,c),j(u,r,c),o=!0},p(u,c){let f=t;t=a(u,c),t===f?l[t].p(u,c):(ce(),v(l[f],1,1,()=>{l[f]=null}),fe(),i=l[t],i?i.p(u,c):(i=l[t]=s[t](u),i.c()),C(i,1),i.m(r.parentNode,r))},i(u){o||(C(i),o=!0)},o(u){v(i),o=!1},d(u){l[t].d(u),u&&z(r)}}}function Vq(n){let e;return{c(){e=we("(Only available for arrays, not for objects)")},m(t,i){j(t,e,i)},p:he,i:he,o:he,d(t){t&&z(e)}}}function Hq(n){let e,t;return e=new Lj({props:{queryOptions:n[15],json:n[14],onChange:n[24]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&32768&&(o.queryOptions=i[15]),r[0]&16384&&(o.json=i[14]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function iC(n){let e,t;return e=new K2({props:{externalContent:n[17],externalSelection:null,readOnly:!0,mainMenuBar:!1,navigationBar:!1,indentation:n[2],escapeControlCharacters:n[3],escapeUnicodeCharacters:n[4],parser:n[5],parseMemoizeOne:n[6],onRenderValue:n[10],onRenderMenu:n[11],onRenderContextMenu:n[12],onError:console.error,onChange:$t,onChangeMode:$t,onSelect:$t,onFocus:$t,onBlur:$t,onSortModal:$t,onTransformModal:$t,onJSONEditorModal:$t,onClassName:n[13],validator:null,validationParser:n[7],pathParser:n[8]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&131072&&(o.externalContent=i[17]),r[0]&4&&(o.indentation=i[2]),r[0]&8&&(o.escapeControlCharacters=i[3]),r[0]&16&&(o.escapeUnicodeCharacters=i[4]),r[0]&32&&(o.parser=i[5]),r[0]&64&&(o.parseMemoizeOne=i[6]),r[0]&1024&&(o.onRenderValue=i[10]),r[0]&2048&&(o.onRenderMenu=i[11]),r[0]&4096&&(o.onRenderContextMenu=i[12]),r[0]&8192&&(o.onClassName=i[13]),r[0]&128&&(o.validationParser=i[7]),r[0]&256&&(o.pathParser=i[8]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function qq(n){let e,t;return{c(){e=D("div"),t=we(n[20]),k(e,"class","jse-preview jse-error svelte-1313i2c")},m(i,r){j(i,e,r),x(e,t)},p(i,r){r[0]&1048576&&We(t,i[20])},i:he,o:he,d(i){i&&z(e)}}}function Wq(n){let e,t;return e=new K2({props:{externalContent:n[21],externalSelection:null,readOnly:!0,mainMenuBar:!1,navigationBar:!1,indentation:n[2],escapeControlCharacters:n[3],escapeUnicodeCharacters:n[4],parser:n[5],parseMemoizeOne:n[6],onRenderValue:n[10],onRenderMenu:n[11],onRenderContextMenu:n[12],onError:console.error,onChange:$t,onChangeMode:$t,onSelect:$t,onFocus:$t,onBlur:$t,onSortModal:$t,onTransformModal:$t,onJSONEditorModal:$t,onClassName:n[13],validator:null,validationParser:n[7],pathParser:n[8]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&2097152&&(o.externalContent=i[21]),r[0]&4&&(o.indentation=i[2]),r[0]&8&&(o.escapeControlCharacters=i[3]),r[0]&16&&(o.escapeUnicodeCharacters=i[4]),r[0]&32&&(o.parser=i[5]),r[0]&64&&(o.parseMemoizeOne=i[6]),r[0]&1024&&(o.onRenderValue=i[10]),r[0]&2048&&(o.onRenderMenu=i[11]),r[0]&4096&&(o.onRenderContextMenu=i[12]),r[0]&8192&&(o.onClassName=i[13]),r[0]&128&&(o.validationParser=i[7]),r[0]&256&&(o.pathParser=i[8]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Uq(n){let e,t,i,r,o,s,l,a,u=n[23](n[0]).description+"",c,f,h,d,p,m,g,b,y,_,M,w,S,E,I,O,P,A,H,W,q,L,X,Y,G,T,B,J,ne,_e,ae,Te,re,U,Ce,Ke,K,De,F;e=new Kj({props:{queryLanguages:n[9],queryLanguageId:n[0],onChangeQueryLanguage:n[29]}}),_=new ht({props:{data:n[18]?lr:Os}});let ke=n[18]&&nC(n);X=new ht({props:{data:n[19]?lr:Os}});let Me=n[19]&&iC(n);const Ae=[Wq,qq],Le=[];function ct(Z,Ve){return Z[20]?1:0}return _e=ct(n),ae=Le[_e]=Ae[_e](n),{c(){$(e.$$.fragment),t=Q(),i=D("div"),r=D("div"),o=D("div"),s=D("div"),s.innerHTML='<div class="jse-label-inner svelte-1313i2c">Language</div>',l=Q(),a=D("div"),c=Q(),f=D("div"),f.innerHTML='<div class="jse-label-inner svelte-1313i2c">Path</div>',h=Q(),d=D("input"),m=Q(),g=D("div"),b=D("div"),y=D("button"),$(_.$$.fragment),M=we(`
                Wizard`),w=Q(),ke&&ke.c(),S=Q(),E=D("div"),E.innerHTML='<div class="jse-label-inner svelte-1313i2c">Query</div>',I=Q(),O=D("textarea"),P=Q(),A=D("div"),H=D("div"),W=D("div"),q=D("div"),L=D("button"),$(X.$$.fragment),Y=we(`
                  Original`),G=Q(),Me&&Me.c(),T=Q(),B=D("div"),J=D("div"),J.innerHTML='<div class="jse-label-inner svelte-1313i2c">Preview</div>',ne=Q(),ae.c(),Te=Q(),re=D("div"),U=D("button"),Ce=we("Transform"),k(s,"class","jse-label svelte-1313i2c"),k(a,"class","jse-description svelte-1313i2c"),k(f,"class","jse-label svelte-1313i2c"),k(d,"class","jse-path svelte-1313i2c"),k(d,"type","text"),d.readOnly=!0,k(d,"title","Selected path"),d.value=p=yt(n[1])?"(document root)":Ri(n[1]),k(y,"type","button"),k(y,"class","svelte-1313i2c"),k(b,"class","jse-label-inner svelte-1313i2c"),k(g,"class","jse-label svelte-1313i2c"),k(E,"class","jse-label svelte-1313i2c"),k(O,"class","jse-query svelte-1313i2c"),k(O,"spellcheck","false"),O.value=n[16],k(o,"class","jse-query-contents svelte-1313i2c"),k(L,"type","button"),k(L,"class","svelte-1313i2c"),k(q,"class","jse-label-inner svelte-1313i2c"),k(W,"class","jse-label svelte-1313i2c"),k(H,"class","jse-original-data svelte-1313i2c"),le(H,"jse-hide",!n[19]),k(J,"class","jse-label svelte-1313i2c"),k(B,"class","jse-preview-data svelte-1313i2c"),k(A,"class","jse-data-contents svelte-1313i2c"),le(A,"jse-hide-original-data",!n[19]),k(r,"class","jse-main-contents svelte-1313i2c"),k(U,"type","button"),k(U,"class","jse-primary svelte-1313i2c"),U.disabled=Ke=!!n[20],k(re,"class","jse-actions svelte-1313i2c"),k(i,"class","jse-modal-contents svelte-1313i2c")},m(Z,Ve){ee(e,Z,Ve),j(Z,t,Ve),j(Z,i,Ve),x(i,r),x(r,o),x(o,s),x(o,l),x(o,a),a.innerHTML=u,x(o,c),x(o,f),x(o,h),x(o,d),x(o,m),x(o,g),x(g,b),x(b,y),ee(_,y,null),x(y,M),x(o,w),ke&&ke.m(o,null),x(o,S),x(o,E),x(o,I),x(o,O),x(r,P),x(r,A),x(A,H),x(H,W),x(W,q),x(q,L),ee(X,L,null),x(L,Y),x(H,G),Me&&Me.m(H,null),x(A,T),x(A,B),x(B,J),x(B,ne),Le[_e].m(B,null),x(i,Te),x(i,re),x(re,U),x(U,Ce),K=!0,De||(F=[ue(y,"click",n[27]),ue(O,"input",n[25]),ue(L,"click",n[28]),ue(U,"click",n[26]),vn(Kq.call(null,U))],De=!0)},p(Z,Ve){const bt={};Ve[0]&512&&(bt.queryLanguages=Z[9]),Ve[0]&1&&(bt.queryLanguageId=Z[0]),e.$set(bt),(!K||Ve[0]&1)&&u!==(u=Z[23](Z[0]).description+"")&&(a.innerHTML=u),(!K||Ve[0]&2&&p!==(p=yt(Z[1])?"(document root)":Ri(Z[1]))&&d.value!==p)&&(d.value=p);const me={};Ve[0]&262144&&(me.data=Z[18]?lr:Os),_.$set(me),Z[18]?ke?(ke.p(Z,Ve),Ve[0]&262144&&C(ke,1)):(ke=nC(Z),ke.c(),C(ke,1),ke.m(o,S)):ke&&(ce(),v(ke,1,1,()=>{ke=null}),fe()),(!K||Ve[0]&65536)&&(O.value=Z[16]);const $e={};Ve[0]&524288&&($e.data=Z[19]?lr:Os),X.$set($e),Z[19]?Me?(Me.p(Z,Ve),Ve[0]&524288&&C(Me,1)):(Me=iC(Z),Me.c(),C(Me,1),Me.m(H,null)):Me&&(ce(),v(Me,1,1,()=>{Me=null}),fe()),(!K||Ve[0]&524288)&&le(H,"jse-hide",!Z[19]);let Ut=_e;_e=ct(Z),_e===Ut?Le[_e].p(Z,Ve):(ce(),v(Le[Ut],1,1,()=>{Le[Ut]=null}),fe(),ae=Le[_e],ae?ae.p(Z,Ve):(ae=Le[_e]=Ae[_e](Z),ae.c()),C(ae,1),ae.m(B,null)),(!K||Ve[0]&524288)&&le(A,"jse-hide-original-data",!Z[19]),(!K||Ve[0]&1048576&&Ke!==(Ke=!!Z[20]))&&(U.disabled=Ke)},i(Z){K||(C(e.$$.fragment,Z),C(_.$$.fragment,Z),C(ke),C(X.$$.fragment,Z),C(Me),C(ae),K=!0)},o(Z){v(e.$$.fragment,Z),v(_.$$.fragment,Z),v(ke),v(X.$$.fragment,Z),v(Me),v(ae),K=!1},d(Z){te(e,Z),Z&&z(t),Z&&z(i),te(_),ke&&ke.d(),te(X),Me&&Me.d(),Le[_e].d(),De=!1,fn(F)}}}function Jq(n){let e,t,i,r,o;return t=new Bv({props:{$$slots:{default:[Uq]},$$scope:{ctx:n}}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-modal jse-transform svelte-1313i2c")},m(s,l){j(s,e,l),ee(t,e,null),i=!0,r||(o=vn(Zp.call(null,e,n[22])),r=!0)},p(s,l){const a={};l[0]&4194303|l[1]&2048&&(a.$$scope={dirty:l,ctx:s}),t.$set(a)},i(s){i||(C(t.$$.fragment,s),i=!0)},o(s){v(t.$$.fragment,s),i=!1},d(s){s&&z(e),te(t),r=!1,o()}}}function Kq(n){n.focus()}function Gq(n,e,t){const i=Wn("jsoneditor:TransformModal");let{id:r="transform-modal-"+gc()}=e,{json:o}=e,{rootPath:s=[]}=e,{indentation:l}=e,{escapeControlCharacters:a}=e,{escapeUnicodeCharacters:u}=e,{parser:c}=e,{parseMemoizeOne:f}=e,{validationParser:h}=e,{pathParser:d}=e,{queryLanguages:p}=e,{queryLanguageId:m}=e,{onChangeQueryLanguage:g}=e,{onRenderValue:b}=e,{onRenderMenu:y}=e,{onRenderContextMenu:_}=e,{onClassName:M}=e,{onTransform:w}=e,S,E;const{close:I}=Vn("simple-modal"),O=`${r}:${xe(s)}`,P=Qu[O]||{};let A=rh.showWizard!==!1,H=rh.showOriginal!==!1,W=P.queryOptions||{},q=m===P.queryLanguageId&&P.query?P.query:G(m).createQuery(S,P.queryOptions||{}),L=P.isManual||!1,X,Y={text:""};function G(U){return p.find(Ce=>Ce.id===U)||p[0]}function T(U){t(15,W=U),t(16,q=G(m).createQuery(S,U)),t(35,L=!1),i("updateQueryByWizard",{queryOptions:W,query:q,isManual:L})}function B(U){t(16,q=U.target.value),t(35,L=!0),i("handleChangeQuery",{query:q,isManual:L})}function J(U,Ce){if(U===void 0){t(21,Y={text:""}),t(20,X="Error: No JSON");return}try{i("previewTransform",{query:Ce});const Ke=G(m).executeQuery(U,Ce,c);t(21,Y={json:Ke}),t(20,X=void 0)}catch(Ke){t(21,Y={text:""}),t(20,X=String(Ke))}}const ne=Lp(J,vS);function _e(){if(S===void 0){t(21,Y={text:""}),t(20,X="Error: No JSON");return}try{i("handleTransform",{query:q});const U=G(m).executeQuery(S,q,c);w([{op:"replace",path:xe(s),value:U}]),I()}catch(U){console.error(U),t(21,Y={text:""}),t(20,X=String(U))}}function ae(){t(18,A=!A),rh.showWizard=A}function Te(){t(19,H=!H),rh.showOriginal=H}function re(U){i("handleChangeQueryLanguage",U),t(0,m=U),g(U);const Ce=G(m);t(16,q=Ce.createQuery(S,W)),t(35,L=!1)}return n.$$set=U=>{"id"in U&&t(30,r=U.id),"json"in U&&t(31,o=U.json),"rootPath"in U&&t(1,s=U.rootPath),"indentation"in U&&t(2,l=U.indentation),"escapeControlCharacters"in U&&t(3,a=U.escapeControlCharacters),"escapeUnicodeCharacters"in U&&t(4,u=U.escapeUnicodeCharacters),"parser"in U&&t(5,c=U.parser),"parseMemoizeOne"in U&&t(6,f=U.parseMemoizeOne),"validationParser"in U&&t(7,h=U.validationParser),"pathParser"in U&&t(8,d=U.pathParser),"queryLanguages"in U&&t(9,p=U.queryLanguages),"queryLanguageId"in U&&t(0,m=U.queryLanguageId),"onChangeQueryLanguage"in U&&t(32,g=U.onChangeQueryLanguage),"onRenderValue"in U&&t(10,b=U.onRenderValue),"onRenderMenu"in U&&t(11,y=U.onRenderMenu),"onRenderContextMenu"in U&&t(12,_=U.onRenderContextMenu),"onClassName"in U&&t(13,M=U.onClassName),"onTransform"in U&&t(33,w=U.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1&&t(14,S=F8(Pe(o,s))),n.$$.dirty[0]&16384&&t(17,E=S?{json:S}:{text:""}),n.$$.dirty[0]&81920&&ne(S,q),n.$$.dirty[0]&98305|n.$$.dirty[1]&24&&(t(34,Qu[O]={queryOptions:W,query:q,queryLanguageId:m,isManual:L},Qu),i("store state in memory",O,Qu[O]))},[m,s,l,a,u,c,f,h,d,p,b,y,_,M,S,W,q,E,A,H,X,Y,I,G,T,B,_e,ae,Te,re,r,o,g,w,Qu,L]}class Qq extends je{constructor(e){super(),ze(this,e,Gq,Jq,Ze,{id:30,json:31,rootPath:1,indentation:2,escapeControlCharacters:3,escapeUnicodeCharacters:4,parser:5,parseMemoizeOne:6,validationParser:7,pathParser:8,queryLanguages:9,queryLanguageId:0,onChangeQueryLanguage:32,onRenderValue:10,onRenderMenu:11,onRenderContextMenu:12,onClassName:13,onTransform:33},null,[-1,-1])}}const Xq=Qq,pa={};function rC(n){let e,t,i,r,o,s,l;function a(c){n[14](c)}let u={showChevron:!0,items:n[5]};return n[1]!==void 0&&(u.value=n[1]),o=new _l({props:u}),ft.push(()=>Tr(o,"value",a)),{c(){e=D("tr"),t=D("th"),t.textContent="Property",i=Q(),r=D("td"),$(o.$$.fragment),k(t,"class","svelte-1gkfll"),k(r,"class","svelte-1gkfll")},m(c,f){j(c,e,f),x(e,t),x(e,i),x(e,r),ee(o,r,null),l=!0},p(c,f){const h={};f&32&&(h.items=c[5]),!s&&f&2&&(s=!0,h.value=c[1],Dr(()=>s=!1)),o.$set(h)},i(c){l||(C(o.$$.fragment,c),l=!0)},o(c){v(o.$$.fragment,c),l=!1},d(c){c&&z(e),te(o)}}}function oC(n){let e,t;return{c(){e=D("div"),t=we(n[4]),k(e,"class","jse-error svelte-1gkfll")},m(i,r){j(i,e,r),x(e,t)},p(i,r){r&16&&We(t,i[4])},d(i){i&&z(e)}}}function Yq(n){var J;let e,t,i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y,_,M,w,S,E,I,O,P,A,H,W,q,L,X;t=new j2({props:{title:n[3]?"Sort array items":"Sort object keys"}});let Y=n[3]&&(n[5]&&((J=n[5])==null?void 0:J.length)>1||n[1]===void 0)&&rC(n);function G(ne){n[15](ne)}let T={showChevron:!0,clearable:!1,items:n[7]};n[2]!==void 0&&(T.value=n[2]),w=new _l({props:T}),ft.push(()=>Tr(w,"value",G));let B=n[4]&&oC(n);return{c(){var ne;e=D("div"),$(t.$$.fragment),i=Q(),r=D("div"),o=D("table"),s=D("colgroup"),s.innerHTML=`<col width="25%"/> 
        <col width="75%"/>`,l=Q(),a=D("tbody"),u=D("tr"),c=D("th"),c.textContent="Path",f=Q(),h=D("td"),d=D("input"),m=Q(),Y&&Y.c(),g=Q(),b=D("tr"),y=D("th"),y.textContent="Direction",_=Q(),M=D("td"),$(w.$$.fragment),E=Q(),I=D("div"),B&&B.c(),O=Q(),P=D("div"),A=D("button"),H=we("Sort"),k(c,"class","svelte-1gkfll"),k(d,"class","jse-path svelte-1gkfll"),k(d,"type","text"),d.readOnly=!0,k(d,"title","Selected path"),d.value=p=yt(n[0])?"(document root)":Ri(n[0]),k(h,"class","svelte-1gkfll"),k(y,"class","svelte-1gkfll"),k(M,"class","svelte-1gkfll"),k(o,"class","svelte-1gkfll"),k(I,"class","jse-space svelte-1gkfll"),k(A,"type","button"),k(A,"class","jse-primary svelte-1gkfll"),A.disabled=W=n[3]&&n[5]&&((ne=n[5])==null?void 0:ne.length)>1?!n[1]:!1,k(P,"class","jse-actions svelte-1gkfll"),k(r,"class","jse-modal-contents svelte-1gkfll"),k(e,"class","jse-modal jse-sort svelte-1gkfll")},m(ne,_e){j(ne,e,_e),ee(t,e,null),x(e,i),x(e,r),x(r,o),x(o,s),x(o,l),x(o,a),x(a,u),x(u,c),x(u,f),x(u,h),x(h,d),x(a,m),Y&&Y.m(a,null),x(a,g),x(a,b),x(b,y),x(b,_),x(b,M),ee(w,M,null),x(r,E),x(r,I),B&&B.m(I,null),x(r,O),x(r,P),x(P,A),x(A,H),q=!0,L||(X=[ue(A,"click",n[8]),vn(Zq.call(null,A)),vn(Zp.call(null,e,n[6]))],L=!0)},p(ne,[_e]){var re,U;const ae={};_e&8&&(ae.title=ne[3]?"Sort array items":"Sort object keys"),t.$set(ae),(!q||_e&1&&p!==(p=yt(ne[0])?"(document root)":Ri(ne[0]))&&d.value!==p)&&(d.value=p),ne[3]&&(ne[5]&&((re=ne[5])==null?void 0:re.length)>1||ne[1]===void 0)?Y?(Y.p(ne,_e),_e&42&&C(Y,1)):(Y=rC(ne),Y.c(),C(Y,1),Y.m(a,g)):Y&&(ce(),v(Y,1,1,()=>{Y=null}),fe());const Te={};!S&&_e&4&&(S=!0,Te.value=ne[2],Dr(()=>S=!1)),w.$set(Te),ne[4]?B?B.p(ne,_e):(B=oC(ne),B.c(),B.m(I,null)):B&&(B.d(1),B=null),(!q||_e&42&&W!==(W=ne[3]&&ne[5]&&((U=ne[5])==null?void 0:U.length)>1?!ne[1]:!1))&&(A.disabled=W)},i(ne){q||(C(t.$$.fragment,ne),C(Y),C(w.$$.fragment,ne),q=!0)},o(ne){v(t.$$.fragment,ne),v(Y),v(w.$$.fragment,ne),q=!1},d(ne){ne&&z(e),te(t),Y&&Y.d(),te(w),B&&B.d(),L=!1,fn(X)}}}function Zq(n){n.focus()}function $q(n,e,t){var E,I;let i,r,o;const s=Wn("jsoneditor:SortModal");let{id:l}=e,{json:a}=e,{rootPath:u}=e,{onSort:c}=e;const{close:f}=Vn("simple-modal"),h=`${l}:${xe(u)}`,d=Pe(a,u),p={value:1,label:"ascending"},g=[p,{value:-1,label:"descending"}];let b=(E=pa[h])==null?void 0:E.selectedProperty,y=((I=pa[h])==null?void 0:I.selectedDirection)||p,_;function M(){var O;try{t(4,_=void 0);const P=(b==null?void 0:b.value)||((O=o==null?void 0:o[0])==null?void 0:O.value)||[],A=y==null?void 0:y.value,H=E8(a,u,P,A);c({operations:H,rootPath:u,itemPath:P,direction:A}),f()}catch(P){t(4,_=String(P))}}function w(O){b=O,t(1,b)}function S(O){y=O,t(2,y)}return n.$$set=O=>{"id"in O&&t(9,l=O.id),"json"in O&&t(10,a=O.json),"rootPath"in O&&t(0,u=O.rootPath),"onSort"in O&&t(11,c=O.onSort)},n.$$.update=()=>{n.$$.dirty&8&&t(13,r=i&&d!==void 0?g1(d):void 0),n.$$.dirty&8192&&t(5,o=r?r.map(rc):void 0),n.$$.dirty&4102&&(t(12,pa[h]={selectedProperty:b,selectedDirection:y},pa),s("store state in memory",h,pa[h]))},t(3,i=Array.isArray(d)),[u,b,y,i,_,o,f,g,M,l,a,c,pa,r,w,S]}class eW extends je{constructor(e){super(),ze(this,e,$q,Yq,Ze,{id:9,json:10,rootPath:0,onSort:11})}}const tW=eW;function tr(){}function ah(n,e=1e3){if(n<.9*e)return n.toFixed()+" B";const t=n/e;if(t<.9*e)return t.toFixed(1)+" KB";const i=t/e;if(i<.9*e)return i.toFixed(1)+" MB";const r=i/e;return r<.9*e?r.toFixed(1)+" GB":(r/e).toFixed(1)+" TB"}function nW(n){let e,t;return e=new Yp({props:{items:n[0]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,[r]){const o={};r&1&&(o.items=i[0]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function iW(n,e,t){let i,{readOnly:r=!1}=e,{onFormat:o}=e,{onCompact:s}=e,{onSort:l}=e,{onTransform:a}=e,{onToggleSearch:u}=e,{onUndo:c}=e,{onRedo:f}=e,{canUndo:h}=e,{canRedo:d}=e,{canFormat:p}=e,{canCompact:m}=e,{canSort:g}=e,{canTransform:b}=e,{onRenderMenu:y}=e;const _={type:"button",icon:R2,title:"Search (Ctrl+F)",className:"jse-search",onClick:u};let M;return n.$$set=w=>{"readOnly"in w&&t(1,r=w.readOnly),"onFormat"in w&&t(2,o=w.onFormat),"onCompact"in w&&t(3,s=w.onCompact),"onSort"in w&&t(4,l=w.onSort),"onTransform"in w&&t(5,a=w.onTransform),"onToggleSearch"in w&&t(6,u=w.onToggleSearch),"onUndo"in w&&t(7,c=w.onUndo),"onRedo"in w&&t(8,f=w.onRedo),"canUndo"in w&&t(9,h=w.canUndo),"canRedo"in w&&t(10,d=w.canRedo),"canFormat"in w&&t(11,p=w.canFormat),"canCompact"in w&&t(12,m=w.canCompact),"canSort"in w&&t(13,g=w.canSort),"canTransform"in w&&t(14,b=w.canTransform),"onRenderMenu"in w&&t(15,y=w.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&32702&&t(16,M=r?[_,{type:"space"}]:[{type:"button",icon:E1,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:o,disabled:r||!p},{type:"button",icon:CH,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:s,disabled:r||!m},{type:"separator"},{type:"button",icon:Wp,title:"Sort",className:"jse-sort",onClick:l,disabled:r||!g},{type:"button",icon:Hp,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:a,disabled:r||!b},_,{type:"separator"},{type:"button",icon:P2,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:c,disabled:!h},{type:"button",icon:D2,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:f,disabled:!d},{type:"space"}]),n.$$.dirty&98304&&t(0,i=y(M)||M)},[i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y,M]}class rW extends je{constructor(e){super(),ze(this,e,iW,nW,Ze,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}const oW=rW;let Dt=class j8{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=du(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Xh.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=du(this,e,t);let i=[];return this.decompose(e,t,i,0),Xh.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new kc(this),o=new kc(e);for(let s=t,l=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new kc(this,e)}iterRange(e,t=this.length){return new z8(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new V8(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?j8.empty:e.length<=32?new kn(e):Xh.from(kn.split(e,[]))}};class kn extends Dt{constructor(e,t=sW(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.text[o],l=r+s.length;if((t?i:l)>=e)return new lW(r,l,i,s);r=l+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new kn(sC(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=i.pop(),l=Yh(o.text,s.text.slice(),0,o.length);if(l.length<=32)i.push(new kn(l,s.length+o.length));else{let a=l.length>>1;i.push(new kn(l.slice(0,a)),new kn(l.slice(a)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof kn))return super.replace(e,t,i);[e,t]=du(this,e,t);let r=Yh(this.text,Yh(i.text,sC(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new kn(r,o):Xh.from(kn.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=du(this,e,t);let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let l=this.text[s],a=o+l.length;o>e&&s&&(r+=i),e<a&&t>o&&(r+=l.slice(Math.max(0,e-o),t-o)),o=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new kn(i,r)),i=[],r=-1);return r>-1&&t.push(new kn(i,r)),t}}let Xh=class Sa extends Dt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.children[o],l=r+s.length,a=i+s.lines-1;if((t?a:l)>=e)return s.lineInner(e,t,i,r);r=l+1,i=a+1}}decompose(e,t,i,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let l=this.children[o],a=s+l.length;if(e<=a&&t>=s){let u=r&((s<=e?1:0)|(a>=t?2:0));s>=e&&a<=t&&!u?i.push(l):l.decompose(e-s,t-s,i,u)}s=a+1}}replace(e,t,i){if([e,t]=du(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.length;if(e>=o&&t<=l){let a=s.replace(e-o,t-o,i),u=this.lines-s.lines+a.lines;if(a.lines<u>>5-1&&a.lines>u>>5+1){let c=this.children.slice();return c[r]=a,new Sa(c,this.length-(t-e)+i.length)}return super.replace(o,l,a)}o=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=du(this,e,t);let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let l=this.children[o],a=s+l.length;s>e&&o&&(r+=i),e<a&&t>s&&(r+=l.sliceString(e-s,t-s,i)),s=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Sa))return 0;let i=0,[r,o,s,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==l)return i;let a=this.children[r],u=e.children[o];if(a!=u)return i+a.scanIdentical(u,t);i+=a.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new kn(d,t)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,l=[],a=0,u=-1,c=[];function f(d){let p;if(d.lines>o&&d instanceof Sa)for(let m of d.children)f(m);else d.lines>s&&(a>s||!a)?(h(),l.push(d)):d instanceof kn&&a&&(p=c[c.length-1])instanceof kn&&d.lines+p.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new kn(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>r&&h(),a+=d.lines,u+=d.length+1,c.push(d))}function h(){a!=0&&(l.push(c.length==1?c[0]:Sa.from(c,u)),u=-1,a=c.length=0)}for(let d of e)f(d);return h(),l.length==1?l[0]:new Sa(l,t)}};Dt.empty=new kn([""],0);function sW(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Yh(n,e,t=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let l=n[o],a=r+l.length;a>=t&&(a>i&&(l=l.slice(0,i-r)),r<t&&(l=l.slice(t-r)),s?(e[e.length-1]+=l,s=!1):e.push(l)),r=a+1}return e}function sC(n,e,t){return Yh(n,[""],e,t)}class kc{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof kn?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,l=r instanceof kn?r.text.length:r.children.length;if(s==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof kn){let a=r.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[s+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof kn?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class z8{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new kc(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class V8{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Dt.prototype[Symbol.iterator]=function(){return this.iter()},kc.prototype[Symbol.iterator]=z8.prototype[Symbol.iterator]=V8.prototype[Symbol.iterator]=function(){return this});class lW{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function du(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let qa="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<qa.length;n++)qa[n]+=qa[n-1];function aW(n){for(let e=1;e<qa.length;e+=2)if(qa[e]>n)return qa[e-1]<=n;return!1}function lC(n){return n>=127462&&n<=127487}const aC=8205;function $n(n,e,t=!0,i=!0){return(t?H8:uW)(n,e,i)}function H8(n,e,t){if(e==n.length)return e;e&&q8(n.charCodeAt(e))&&W8(n.charCodeAt(e-1))&&e--;let i=Qn(n,e);for(e+=or(i);e<n.length;){let r=Qn(n,e);if(i==aC||r==aC||t&&aW(r))e+=or(r),i=r;else if(lC(r)){let o=0,s=e-2;for(;s>=0&&lC(Qn(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function uW(n,e,t){for(;e>0;){let i=H8(n,e-2,t);if(i<e)return i;e--}return 0}function q8(n){return n>=56320&&n<57344}function W8(n){return n>=55296&&n<56320}function Qn(n,e){let t=n.charCodeAt(e);if(!W8(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return q8(i)?(t-55296<<10)+(i-56320)+65536:t}function G2(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function or(n){return n<65536?1:2}const O1=/\r\n?|\n/;var bi=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(bi||(bi={}));class go{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(e,t=!1){T1(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new go(e)}composeDesc(e){return this.empty?e:e.empty?this:U8(this,e)}mapDesc(e,t=!1){return e.empty?this:D1(this,e,t)}mapPos(e,t=-1,i=bi.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let l=this.sections[s++],a=this.sections[s++],u=r+l;if(a<0){if(u>e)return o+(e-r);o+=l}else{if(i!=bi.Simple&&u>=e&&(i==bi.TrackDel&&r<e&&u>e||i==bi.TrackBefore&&r<e||i==bi.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!l)return e==r||t<0?o:o+a;o+=a}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],s=this.sections[i++],l=r+o;if(s>=0&&r<=t&&l>=e)return r<e&&l>t?"cover":!0;r=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new go(e)}static create(e){return new go(e)}}class En extends go{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return T1(this,(t,i,r,o,s)=>e=e.replace(r,r+(i-t),s),!1),e}mapDesc(e,t=!1){return D1(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=s;let a=r>>1;for(;i.length<a;)i.push(Dt.empty);i.push(s?e.slice(o,o+s):Dt.empty)}o+=s}return new En(t,i)}compose(e){return this.empty?e:e.empty?this:U8(this,e,!0)}map(e,t=!1){return e.empty?this:D1(this,e,t,!0)}iterChanges(e,t=!1){T1(this,e,t)}get desc(){return go.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new Hc(this);e:for(let s=0,l=0;;){let a=s==e.length?1e9:e[s++];for(;l<a||l==a&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,a-l);oi(r,c,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;oi(t,c,f),f>0&&Ts(i,t,o.text),o.forward(c),l+=c}let u=e[s++];for(;l<u;){if(o.done)break e;let c=Math.min(o.len,u-l);oi(t,c,-1),oi(r,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),l+=c}}return{changes:new En(t,i),filtered:go.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],s=0,l=null;function a(c=!1){if(!c&&!r.length)return;s<t&&oi(r,t-s,-1);let f=new En(r,o);l=l?l.compose(f.map(l)):f,r=[],o=[],s=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof En){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:f,to:h=f,insert:d}=c;if(f>h||f<0||h>t)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${t})`);let p=d?typeof d=="string"?Dt.of(d.split(i||O1)):d:Dt.empty,m=p.length;if(f==h&&m==0)return;f<s&&a(),f>s&&oi(r,f-s,-1),oi(r,h-f,m),Ts(o,r,p),s=h}}return u(e),a(!l),l}static empty(e){return new En(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,l)=>l&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(Dt.empty);i[r]=Dt.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new En(t,i)}static createSet(e,t){return new En(e,t)}}function oi(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Ts(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Dt.empty);n.push(t)}}function T1(n,e,t){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let l=n.sections[s++],a=n.sections[s++];if(a<0)r+=l,o+=l;else{let u=r,c=o,f=Dt.empty;for(;u+=l,c+=a,a&&i&&(f=f.append(i[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)l=n.sections[s++],a=n.sections[s++];e(r,u,o,c,f),r=u,o=c}}}function D1(n,e,t,i=!1){let r=[],o=i?[]:null,s=new Hc(n),l=new Hc(e);for(let a=-1;;)if(s.ins==-1&&l.ins==-1){let u=Math.min(s.len,l.len);oi(r,u,-1),s.forward(u),l.forward(u)}else if(l.ins>=0&&(s.ins<0||a==s.i||s.off==0&&(l.len<s.len||l.len==s.len&&!t))){let u=l.len;for(oi(r,l.ins,-1);u;){let c=Math.min(s.len,u);s.ins>=0&&a<s.i&&s.len<=c&&(oi(r,0,s.ins),o&&Ts(o,r,s.text),a=s.i),s.forward(c),u-=c}l.next()}else if(s.ins>=0){let u=0,c=s.len;for(;c;)if(l.ins==-1){let f=Math.min(c,l.len);u+=f,c-=f,l.forward(f)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;oi(r,u,a<s.i?s.ins:0),o&&a<s.i&&Ts(o,r,s.text),a=s.i,s.forward(s.len-c)}else{if(s.done&&l.done)return o?En.createSet(r,o):go.create(r);throw new Error("Mismatched change set lengths")}}function U8(n,e,t=!1){let i=[],r=t?[]:null,o=new Hc(n),s=new Hc(e);for(let l=!1;;){if(o.done&&s.done)return r?En.createSet(i,r):go.create(i);if(o.ins==0)oi(i,o.len,0,l),o.next();else if(s.len==0&&!s.done)oi(i,0,s.ins,l),r&&Ts(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let a=Math.min(o.len2,s.len),u=i.length;if(o.ins==-1){let c=s.ins==-1?-1:s.off?0:s.ins;oi(i,a,c,l),r&&c&&Ts(r,i,s.text)}else s.ins==-1?(oi(i,o.off?0:o.len,a,l),r&&Ts(r,i,o.textBit(a))):(oi(i,o.off?0:o.len,s.off?0:s.ins,l),r&&!s.off&&Ts(r,i,s.text));l=(o.ins>a||s.ins>=0&&s.len>a)&&(l||i.length>u),o.forward2(a),s.forward(a)}}}}class Hc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Dt.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Dt.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}let uh=class P1{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new P1(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return pe.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return pe.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return pe.range(e.anchor,e.head)}static create(e,t,i){return new P1(e,t,i)}};class pe{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:pe.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new pe([this.main],0)}addRange(e,t=!0){return pe.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,pe.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new pe(e.ranges.map(t=>uh.fromJSON(t)),e.main)}static single(e,t=e){return new pe([pe.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return pe.normalized(e.slice(),t);i=o.to}return new pe(e,t)}static cursor(e,t=0,i,r){return uh.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?uh.create(t,e,48|o):uh.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let l=s.from,a=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?pe.range(a,l):pe.range(l,a))}}return new pe(e,t)}}function J8(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Q2=0;class Ie{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=Q2++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Ie(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:X2),!!e.static,e.enables)}of(e){return new Zh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zh(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function X2(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class Zh{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=Q2++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?u=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||c.push(e[f.id]);return{create(f){return f.values[s]=i(f),1},update(f,h){if(a&&h.docChanged||u&&(h.docChanged||h.selection)||R1(f,c)){let d=i(f);if(l?!uC(d,f.values[s],r):!r(d,f.values[s]))return f.values[s]=d,1}return 0},reconfigure:(f,h)=>{let d,p=h.config.address[o];if(p!=null){let m=Dd(h,p);if(this.dependencies.every(g=>g instanceof Ie?h.facet(g)===f.facet(g):g instanceof Tn?h.field(g,!1)==f.field(g,!1):!0)||(l?uC(d=i(f),m,r):r(d=i(f),m)))return f.values[s]=m,0}else d=i(f);return f.values[s]=d,1}}}}function uC(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function R1(n,e){let t=!1;for(let i of e)wc(n,i)&1&&(t=!0);return t}function cW(n,e,t){let i=t.map(a=>n[a.id]),r=t.map(a=>a.type),o=i.filter(a=>!(a&1)),s=n[e.id]>>1;function l(a){let u=[];for(let c=0;c<i.length;c++){let f=Dd(a,i[c]);if(r[c]==2)for(let h of f)u.push(h);else u.push(f)}return e.combine(u)}return{create(a){for(let u of i)wc(a,u);return a.values[s]=l(a),1},update(a,u){if(!R1(a,o))return 0;let c=l(a);return e.compare(c,a.values[s])?0:(a.values[s]=c,1)},reconfigure(a,u){let c=R1(a,i),f=u.config.facets[e.id],h=u.facet(e);if(f&&!c&&X2(t,f))return a.values[s]=h,0;let d=l(a);return e.compare(d,h)?(a.values[s]=h,0):(a.values[s]=d,1)}}}const cC=Ie.define({static:!0});class Tn{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new Tn(Q2++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(cC).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,cC.of({field:this,create:e})]}get extension(){return this}}const Sl={lowest:4,low:3,default:2,high:1,highest:0};function Xu(n){return e=>new K8(e,n)}const la={highest:Xu(Sl.highest),high:Xu(Sl.high),default:Xu(Sl.default),low:Xu(Sl.low),lowest:Xu(Sl.lowest)};class K8{constructor(e,t){this.inner=e,this.prec=t}}class qo{of(e){return new N1(this,e)}reconfigure(e){return qo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class N1{constructor(e,t){this.compartment=e,this.inner=t}}let fC=class G8{constructor(e,t,i,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),s=new Map;for(let h of fW(e,t,s))h instanceof Tn?r.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],u=[];for(let h of r)l[h.id]=u.length<<1,u.push(d=>h.slot(d));let c=i==null?void 0:i.config.facets;for(let h in o){let d=o[h],p=d[0].facet,m=c&&c[h]||[];if(d.every(g=>g.type==0))if(l[p.id]=a.length<<1|1,X2(m,d))a.push(i.facet(p));else{let g=p.combine(d.map(b=>b.value));a.push(i&&p.compare(g,i.facet(p))?i.facet(p):g)}else{for(let g of d)g.type==0?(l[g.id]=a.length<<1|1,a.push(g.value)):(l[g.id]=u.length<<1,u.push(b=>g.dynamicSlot(b)));l[p.id]=u.length<<1,u.push(g=>cW(g,p,d))}}let f=u.map(h=>h(l));return new G8(e,s,f,l,a,o)}};function fW(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(s,l){let a=r.get(s);if(a!=null){if(a<=l)return;let u=i[a].indexOf(s);u>-1&&i[a].splice(u,1),s instanceof N1&&t.delete(s.compartment)}if(r.set(s,l),Array.isArray(s))for(let u of s)o(u,l);else if(s instanceof N1){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(s.compartment)||s.inner;t.set(s.compartment,u),o(u,l)}else if(s instanceof K8)o(s.inner,s.prec);else if(s instanceof Tn)i[l].push(s),s.provides&&o(s.provides,l);else if(s instanceof Zh)i[l].push(s),s.facet.extensions&&o(s.facet.extensions,Sl.default);else{let u=s.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,l)}}return o(n,Sl.default),i.reduce((s,l)=>s.concat(l))}function wc(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function Dd(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Q8=Ie.define(),I1=Ie.define({combine:n=>n.some(e=>e),static:!0}),X8=Ie.define({combine:n=>n.length?n[0]:void 0,static:!0}),Y8=Ie.define(),Z8=Ie.define(),$8=Ie.define(),ex=Ie.define({combine:n=>n.length?n[0]:!1});class hs{constructor(e,t){this.type=e,this.value=t}static define(){return new hW}}class hW{of(e){return new hs(this,e)}}class dW{constructor(e){this.map=e}of(e){return new ot(this,e)}}class ot{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ot(this.type,t)}is(e){return this.type==e}static define(e={}){return new dW(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}ot.reconfigure=ot.define();ot.appendConfig=ot.define();let Di=class sc{constructor(e,t,i,r,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&J8(i,t.newLength),o.some(l=>l.type==sc.time)||(this.annotations=o.concat(sc.time.of(Date.now())))}static create(e,t,i,r,o,s){return new sc(e,t,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(sc.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};Di.time=hs.define();Di.userEvent=hs.define();Di.addToHistory=hs.define();Di.remote=hs.define();function pW(n,e){let t=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],s=n[i++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function tx(n,e,t){var i;let r,o,s;return t?(r=e.changes,o=En.empty(e.changes.length),s=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:ot.mapEffects(n.effects,r).concat(ot.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function B1(n,e,t){let i=e.selection,r=Wa(e.annotations);return e.userEvent&&(r=r.concat(Di.userEvent.of(e.userEvent))),{changes:e.changes instanceof En?e.changes:En.of(e.changes||[],t,n.facet(X8)),selection:i&&(i instanceof pe?i:pe.single(i.anchor,i.head)),effects:Wa(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function nx(n,e,t){let i=B1(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=tx(i,B1(n,e[o],s?i.changes.newLength:n.doc.length),s)}let r=Di.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return gW(t?mW(r):r)}function mW(n){let e=n.startState,t=!0;for(let r of e.facet(Y8)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:pW(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=En.empty(e.doc.length);else{let s=n.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=Di.create(e,r,n.selection&&n.selection.map(o),ot.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(Z8);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof Di?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Di?n=o[0]:n=nx(e,Wa(o),!1)}return n}function gW(n){let e=n.startState,t=e.facet($8),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=tx(i,B1(e,o,n.changes.newLength),!0))}return i==n?n:Di.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const bW=[];function Wa(n){return n==null?bW:Array.isArray(n)?n:[n]}var en=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(en||(en={}));const yW=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let L1;try{L1=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function kW(n){if(L1)return L1.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||yW.test(t)))return!0}return!1}function wW(n){return e=>{if(!/\S/.test(e))return en.Space;if(kW(e))return en.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return en.Word;return en.Other}}let Ht=class Er{constructor(e,t,i,r,o,s){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)wc(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return wc(this,i),Dd(this,i)}update(...e){return nx(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let l of e.effects)l.is(qo.reconfigure)?(t&&(r=new Map,t.compartments.forEach((a,u)=>r.set(u,a)),t=null),r.set(l.value.compartment,l.value.extension)):l.is(ot.reconfigure)?(t=null,i=l.value):l.is(ot.appendConfig)&&(t=null,i=Wa(i).concat(l.value));let o;t?o=e.startState.values.slice():(t=fC.resolve(i,r,this),o=new Er(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let s=e.startState.facet(I1)?e.newSelection:e.newSelection.asSingle();new Er(t,e.newDoc,s,o,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:pe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],s=Wa(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),u=this.changes(a.changes),c=u.map(r);for(let h=0;h<l;h++)o[h]=o[h].map(c);let f=r.mapDesc(u,!0);o.push(a.range.map(f)),r=r.compose(c),s=ot.mapEffects(s,c).concat(ot.mapEffects(Wa(a.effects),f))}return{changes:r,selection:pe.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof En?e:En.of(e,this.doc.length,this.facet(Er.lineSeparator))}toText(e){return Dt.of(e.split(this.facet(Er.lineSeparator)||O1))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(wc(this,t),Dd(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Tn&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],l=e[o];r.push(s.init(a=>s.spec.fromJSON(l,a)))}}return Er.create({doc:e.doc,selection:pe.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=fC.resolve(e.extensions||[],new Map),i=e.doc instanceof Dt?e.doc:Dt.of((e.doc||"").split(t.staticFacet(Er.lineSeparator)||O1)),r=e.selection?e.selection instanceof pe?e.selection:pe.single(e.selection.anchor,e.selection.head):pe.single(0);return J8(r,i.length),t.staticFacet(I1)||(r=r.asSingle()),new Er(t,i,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(Er.tabSize)}get lineBreak(){return this.facet(Er.lineSeparator)||`
`}get readOnly(){return this.facet(ex)}phrase(e,...t){for(let i of this.facet(Er.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(Q8))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){return wW(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,l=e-i;for(;s>0;){let a=$n(t,s,!1);if(o(t.slice(a,s))!=en.Word)break;s=a}for(;l<r;){let a=$n(t,l);if(o(t.slice(l,a))!=en.Word)break;l=a}return s==l?null:pe.range(s+i,l+i)}};Ht.allowMultipleSelections=I1;Ht.tabSize=Ie.define({combine:n=>n.length?n[0]:4});Ht.lineSeparator=X8;Ht.readOnly=ex;Ht.phrases=Ie.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});Ht.languageData=Q8;Ht.changeFilter=Y8;Ht.transactionFilter=Z8;Ht.transactionExtender=$8;qo.reconfigure=ot.define();function _r(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],l=i[o];if(l===void 0)i[o]=s;else if(!(l===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](l,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Gl{eq(e){return this==e}range(e,t=e){return F1.create(e,t,this)}}Gl.prototype.startSide=Gl.prototype.endSide=0;Gl.prototype.point=!1;Gl.prototype.mapMode=bi.TrackDel;let F1=class ix{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new ix(e,t,i)}};function j1(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Y2{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let s=r,l=o.length;;){if(s==l)return s;let a=s+l>>1,u=o[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==s)return u>=0?s:l;u>=0?l=a:s=a+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],s=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,f=this.to[a]+e,h,d;if(c==f){let p=t.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=d=p,u.startSide!=u.endSide&&(d=t.mapPos(c,u.endSide),d<h)))continue}else if(h=t.mapPos(c,u.startSide),d=t.mapPos(f,u.endSide),h>d||h==d&&u.startSide>0&&u.endSide<=0)continue;(d-h||u.endSide-u.startSide)<0||(s<0&&(s=h),u.point&&(l=Math.max(l,d-h)),i.push(u),r.push(h-s),o.push(d-s))}return{mapped:i.length?new Y2(r,o,i,l):null,pos:s}}}class Ct{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new Ct(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(j1)),this.isEmpty)return t.length?Ct.of(t):this;let l=new rx(this,null,-1).goto(0),a=0,u=[],c=new Co;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];c.addInner(f.from,f.to,f.value)||u.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!s||r>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!s||r>l.to||o<l.from||s(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(F1.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Ct.empty:this.nextLayer.update({add:u,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s],u=e.touchesRange(l,l+a.length);if(u===!1)r=Math.max(r,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:f}=a.map(l,e);c&&(r=Math.max(r,c.maxPoint),t.push(c),i.push(f))}}let o=this.nextLayer.map(e);return t.length==0?o:new Ct(i,t,o||Ct.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return qc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return qc.from(e).goto(t)}static compare(e,t,i,r,o=-1){let s=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=hC(s,l,i),u=new Yu(s,a,o),c=new Yu(l,a,o);i.iterGaps((f,h,d)=>dC(u,f,c,h,d,r)),i.empty&&i.length==0&&dC(u,0,c,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=1e9-1);let o=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),s=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let l=hC(o,s),a=new Yu(o,l,0).goto(i),u=new Yu(s,l,0).goto(i);for(;;){if(a.to!=u.to||!z1(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>r)return!0;a.next(),u.next()}}static spans(e,t,i,r,o=-1){let s=new Yu(e,null,o).goto(t),l=t,a=s.openStart;for(;;){let u=Math.min(s.to,i);if(s.point){let c=s.activeForPoint(s.to),f=s.pointFrom<t?c.length+1:s.point.startSide<0?c.length:Math.min(c.length,a);r.point(l,u,s.point,c,f,s.pointRank),a=Math.min(s.openEnd(u),c.length)}else u>l&&(r.span(l,u,s.active,a),a=s.openEnd(u));if(s.to>i)return a+(s.point&&s.to>i?1:0);l=s.to,s.next()}}static of(e,t=!1){let i=new Co;for(let r of e instanceof F1?[e]:t?CW(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Ct.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Ct.empty;r=r.nextLayer)t=new Ct(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Ct.empty=new Ct([],[],null,-1);function CW(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(j1(e,i)>0)return n.slice().sort(j1);e=i}return n}Ct.empty.nextLayer=Ct.empty;class Co{finishChunk(e){this.chunks.push(new Y2(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Co)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ct.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ct.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function hC(n,e,t){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let l=i.get(o.chunk[s]);l!=null&&(t?t.mapPos(l):l)==o.chunkPos[s]&&!(t!=null&&t.touchesRange(l,l+o.chunk[s].length))&&r.add(o.chunk[s])}return r}class rx{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class qc{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new rx(s,t,i,o));return r.length==1?r[0]:new qc(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Y0(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Y0(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Y0(this.heap,0)}}}function Y0(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class Yu{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=qc.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ch(this.active,e),ch(this.activeTo,e),ch(this.activeRank,e),this.minActive=pC(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;fh(this.active,t,i),fh(this.activeTo,t,r),fh(this.activeRank,t,o),e&&fh(e,t,this.cursor.from),this.minActive=pC(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&ch(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function dC(n,e,t,i,r,o){n.goto(e),t.goto(i);let s=i+r,l=i,a=i-e;for(;;){let u=n.to+a-t.to||n.endSide-t.endSide,c=u<0?n.to+a:t.to,f=Math.min(c,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&z1(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(l,f,n.point,t.point):f>l&&!z1(n.active,t.active)&&o.compareRange(l,f,n.active,t.active),c>s)break;l=c,u<=0&&n.next(),u>=0&&t.next()}}function z1(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function ch(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function fh(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function pC(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function Bu(n,e,t=n.length){let i=0;for(let r=0;r<t;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=$n(n,r));return i}function V1(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=$n(n,r)}return i===!0?-1:n.length}const H1="",mC=typeof Symbol>"u"?"__"+H1:Symbol.for(H1),q1=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),gC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class $s{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,l,a,u){let c=[],f=/^@(\w+)\b/.exec(s[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(s[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))o(d.split(/,\s*/).map(m=>s.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,a);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");o(r(d),p,c,h)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||h)&&a.push((i&&!f&&!u?s.map(i):s).join(", ")+" {"+c.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=gC[mC]||1;return gC[mC]=e+1,H1+e.toString(36)}static mount(e,t,i){let r=e[q1],o=i&&i.nonce;r?o&&r.setNonce(o):r=new _W(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let bC=new Map;class _W{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=bC.get(i);if(o)return e[q1]=o;this.sheet=new r.CSSStyleSheet,bC.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[q1]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let s=0;s<e.length;s++){let l=e[s],a=this.modules.indexOf(l);if(a<o&&a>-1&&(this.modules.splice(a,1),o--,a=-1),a==-1){if(this.modules.splice(o++,0,l),i)for(let u=0;u<l.rules.length;u++)i.insertRule(l.rules[u],r++)}else{for(;o<a;)r+=this.modules[o++].rules.length;r+=l.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let a=0;a<this.modules.length;a++)s+=this.modules[a].getRules()+`
`;this.styleTag.textContent=s;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ls={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},SW=typeof navigator<"u"&&/Mac/.test(navigator.platform),vW=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Xn=0;Xn<10;Xn++)ls[48+Xn]=ls[96+Xn]=String(Xn);for(var Xn=1;Xn<=24;Xn++)ls[Xn+111]="F"+Xn;for(var Xn=65;Xn<=90;Xn++)ls[Xn]=String.fromCharCode(Xn+32),Wc[Xn]=String.fromCharCode(Xn);for(var Z0 in ls)Wc.hasOwnProperty(Z0)||(Wc[Z0]=ls[Z0]);function ox(n){var e=SW&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||vW&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Wc:ls)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Uc(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function W1(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function $h(n,e){if(!e.anchorNode)return!1;try{return W1(n,e.anchorNode)}catch{return!1}}function Jc(n){return n.nodeType==3?Xl(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Cc(n,e,t,i){return t?yC(n,e,t,i,-1)||yC(n,e,t,i,1):!1}function Ql(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Pd(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function yC(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:_o(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Ql(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?_o(n):0}else return!1}}function _o(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function $p(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function xW(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function sx(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function MW(n,e,t,i,r,o,s,l){let a=n.ownerDocument,u=a.defaultView||window;for(let c=n,f=!1;c&&!f;)if(c.nodeType==1){let h,d=c==a.body,p=1,m=1;if(d)h=xW(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:m}=sx(c,y)),h={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*m}}let g=0,b=0;if(r=="nearest")e.top<h.top?(b=-(h.top-e.top+s),t>0&&e.bottom>h.bottom+b&&(b=e.bottom-h.bottom+b+s)):e.bottom>h.bottom&&(b=e.bottom-h.bottom+s,t<0&&e.top-b<h.top&&(b=-(h.top+b-e.top+s)));else{let y=e.bottom-e.top,_=h.bottom-h.top;b=(r=="center"&&y<=_?e.top+y/2-_/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-_+s)-h.top}if(i=="nearest"?e.left<h.left?(g=-(h.left-e.left+o),t>0&&e.right>h.right+g&&(g=e.right-h.right+g+o)):e.right>h.right&&(g=e.right-h.right+o,t<0&&e.left<h.left+g&&(g=-(h.left+g-e.left+o))):g=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-o:e.right-(h.right-h.left)+o)-h.left,g||b)if(d)u.scrollBy(g,b);else{let y=0,_=0;if(b){let M=c.scrollTop;c.scrollTop+=b/m,_=(c.scrollTop-M)*m}if(g){let M=c.scrollLeft;c.scrollLeft+=g/p,y=(c.scrollLeft-M)*p}e={left:e.left-y,top:e.top-_,right:e.right-y,bottom:e.bottom-_},y&&Math.abs(y-g)<1&&(i="nearest"),_&&Math.abs(_-b)<1&&(r="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function AW(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class EW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?_o(t):0),i,Math.min(e.focusOffset,i?_o(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let ma=null;function lx(n){if(n.setActive)return n.setActive();if(ma)return n.focus(ma);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(ma==null?{get preventScroll(){return ma={preventScroll:!0},!0}}:void 0),!ma){ma=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let kC;function Xl(n,e,t=e){let i=kC||(kC=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Ua(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function OW(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function ax(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function TW(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,_o(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=_o(t))}else{if(t==n)return!0;i=Ql(t),t=t.parentNode}}function ux(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function cx(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=_o(t)}else if(t.parentNode&&!Pd(t))i=Ql(t),t=t.parentNode;else return null}}function fx(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!Pd(t))i=Ql(t)+1,t=t.parentNode;else return null}}class si{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new si(e.parentNode,Ql(e),t)}static after(e,t){return new si(e.parentNode,Ql(e)+1,t)}}const Z2=[];class jt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=r?r.nextSibling:i.firstChild)){let l=jt.get(o);(!l||!l.parent&&l.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;o&&o!=s.dom;)o=wC(o);else i.insertBefore(s.dom,o);r=s.dom}for(o=r?r.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=wC(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=_o(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!jt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==i)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,o=-1,s=-1,l=-1;for(let a=0,u=i,c=i;a<this.children.length;a++){let f=this.children[a],h=u+f.length;if(u<e&&h>t)return f.domBoundsAround(e,t,u);if(h>=e&&r==-1&&(r=a,o=u),u>t&&f.dom.parentNode==this.dom){s=a,l=c;break}c=h,u=h+f.breakAfter}return{from:o,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Z2){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new hx(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}jt.prototype.breakAfter=0;function wC(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class hx{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function dx(n,e,t,i,r,o,s,l,a){let{children:u}=n,c=u.length?u[e]:null,f=o.length?o[o.length-1]:null,h=f?f.breakAfter:s;if(!(e==i&&c&&!s&&!h&&o.length<2&&c.merge(t,r,o.length?f:null,t==0,l,a))){if(i<u.length){let d=u[i];d&&(r<d.length||d.breakAfter&&(f!=null&&f.breakAfter))?(e==i&&(d=d.split(r),r=0),!h&&f&&d.merge(0,r,f,!0,0,a)?o[o.length-1]=d:((r||d.children.length&&!d.children[0].length)&&d.merge(0,r,null,!1,0,a),o.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:s=1),i++}for(c&&(c.breakAfter=s,t>0&&(!s&&o.length&&c.merge(t,c.length,o[0],!1,l,0)?c.breakAfter=o.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,l,0),e++));e<i&&o.length;)if(u[i-1].become(o[o.length-1]))i--,o.pop(),a=o.length?0:l;else if(u[e].become(o[0]))e++,o.shift(),l=o.length?0:a;else break;!o.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,l,a)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function px(n,e,t,i,r,o){let s=n.childCursor(),{i:l,off:a}=s.findPos(t,1),{i:u,off:c}=s.findPos(e,-1),f=e-t;for(let h of i)f+=h.length;n.length+=f,dx(n,u,c,l,a,i,0,r,o)}let Mi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},U1=typeof document<"u"?document:{documentElement:{style:{}}};const J1=/Edge\/(\d+)/.exec(Mi.userAgent),mx=/MSIE \d/.test(Mi.userAgent),K1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mi.userAgent),e0=!!(mx||K1||J1),CC=!e0&&/gecko\/(\d+)/i.test(Mi.userAgent),$0=!e0&&/Chrome\/(\d+)/.exec(Mi.userAgent),_C="webkitFontSmoothing"in U1.documentElement.style,gx=!e0&&/Apple Computer/.test(Mi.vendor),SC=gx&&(/Mobile\/\w+/.test(Mi.userAgent)||Mi.maxTouchPoints>2);var Be={mac:SC||/Mac/.test(Mi.platform),windows:/Win/.test(Mi.platform),linux:/Linux|X11/.test(Mi.platform),ie:e0,ie_version:mx?U1.documentMode||6:K1?+K1[1]:J1?+J1[1]:0,gecko:CC,gecko_version:CC?+(/Firefox\/(\d+)/.exec(Mi.userAgent)||[0,0])[1]:0,chrome:!!$0,chrome_version:$0?+$0[1]:0,ios:SC,android:/Android\b/.test(Mi.userAgent),webkit:_C,safari:gx,webkit_version:_C?+(/\bAppleWebKit\/(\d+)/.exec(Mi.userAgent)||[0,0])[1]:0,tabSize:U1.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const DW=256;class Hr extends jt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Hr)||this.length-(t-e)+i.length>DW||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Hr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new si(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return PW(this.dom,e,t)}}class as extends jt{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(ax(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,o,s){return i&&(!(i instanceof as&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(px(this,e,t,i?i.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,o=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=o),i=a,o++}let s=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new as(this.mark,t,s)}domAtPos(e){return bx(this,e)}coordsAt(e,t){return kx(this,e,t)}}function PW(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?Be.chrome||Be.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):t<0?r--:o<i&&o++;let l=Xl(n,r,o).getClientRects();if(!l.length)return null;let a=l[(s?s<0:t>=0)?0:l.length-1];return Be.safari&&!s&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),s?$p(a,s<0):a||null}class Ds extends jt{static create(e,t,i){return new Ds(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Ds.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,o,s){return i&&(!(i instanceof Ds)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Ds&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Dt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Dt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?si.before(this.dom):si.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let s=this.side?this.side<0:e>0;for(let l=s?r.length-1:0;o=r[l],!(e>0?l==0:l==r.length-1||o.top<o.bottom);l+=s?-1:1);return $p(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class pu extends jt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof pu&&e.side==this.side}split(){return new pu(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?si.before(this.dom):si.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Dt.empty}get isHidden(){return!0}}Hr.prototype.children=Ds.prototype.children=pu.prototype.children=Z2;function bx(n,e){let t=n.dom,{children:i}=n,r=0;for(let o=0;r<i.length;r++){let s=i[r],l=o+s.length;if(!(l==o&&s.getSide()<=0)){if(e>o&&e<l&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=r;o>0;o--){let s=i[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=r;o<i.length;o++){let s=i[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new si(t,0)}function yx(n,e,t){let i,{children:r}=n;t>0&&e instanceof as&&r.length&&(i=r[r.length-1])instanceof as&&i.mark.eq(e.mark)?yx(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function kx(n,e,t){let i=null,r=-1,o=null,s=-1;function l(u,c){for(let f=0,h=0;f<u.children.length&&h<=c;f++){let d=u.children[f],p=h+d.length;p>=c&&(d.children.length?l(d,c-h):(!o||o.isHidden&&t>0)&&(p>c||h==p&&d.getSide()>0)?(o=d,s=c-h):(h<c||h==p&&d.getSide()<0&&!d.isHidden)&&(i=d,r=c-h)),h=p}}l(n,e);let a=(t<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),t):RW(n)}function RW(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Jc(e);return t[t.length-1]||null}function G1(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const vC=Object.create(null);function Rd(n,e,t){if(n==e)return!0;n||(n=vC),e||(e=vC);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function Q1(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function NW(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}let al=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}};var ki=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(ki||(ki={}));let Xe=class extends Gl{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Tf(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new el(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=wx(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new el(e,i,r,t,e.widget||null,!0)}static line(e){return new Df(e)}static set(e,t=!1){return Ct.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};Xe.none=Ct.empty;class Tf extends Xe{constructor(e){let{start:t,end:i}=wx(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof Tf&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Rd(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Tf.prototype.point=!1;class Df extends Xe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Df&&this.spec.class==e.spec.class&&Rd(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Df.prototype.mapMode=bi.TrackBefore;Df.prototype.point=!0;class el extends Xe{constructor(e,t,i,r,o,s){super(t,i,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?bi.TrackBefore:bi.TrackAfter:bi.TrackDel}get type(){return this.startSide!=this.endSide?ki.WidgetRange:this.startSide<=0?ki.WidgetBefore:ki.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof el&&IW(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}el.prototype.point=!0;function wx(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function IW(n,e){return n==e||!!(n&&e&&n.compare(e))}function X1(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class Cn extends jt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,o,s){if(i){if(!(i instanceof Cn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),px(this,e,t,i?i.children.slice():[],o,s),!0}split(e){let t=new Cn;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Rd(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){yx(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=G1(t,this.attrs||{})),i&&(this.attrs=G1({class:i},this.attrs||{}))}domAtPos(e){return bx(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(ax(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Q1(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&jt.get(r)instanceof as;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=jt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Be.ios||!this.children.some(o=>o instanceof Hr))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Hr)||/[^ -~]/.test(i.text))return null;let r=Jc(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=kx(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let s=(o-r.textHeight)/2;return{top:i.top+s,bottom:i.bottom-s,left:i.left,right:i.left}}}return i}become(e){return e instanceof Cn&&this.children.length==0&&e.children.length==0&&Rd(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let o=e.children[i],s=r+o.length;if(s>=t){if(o instanceof Cn)return o;if(s>t)break}r=s+o.breakAfter}return null}}class Xo extends jt{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,o,s){return i&&(!(i instanceof Xo)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?si.before(this.dom):si.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Xo(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Z2}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Dt.empty}domBoundsAround(){return null}become(e){return e instanceof Xo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof Y1?null:$p(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class Y1 extends al{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class _c{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Xo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Cn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(hh(new pu(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Xo)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(hh(new Hr(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,o,s){if(this.disallowBlockEffectsFor[s]&&i instanceof el){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof el)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Xo(i.widget||mu.block,l,i));else{let a=Ds.create(i.widget||mu.inline,l,l?0:i.startSide),u=this.atCursorPos&&!a.isEditable&&o<=r.length&&(e<t||i.startSide>0),c=!a.isEditable&&(e<t||o>r.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(f.append(hh(new pu(1),r),o),o=r.length+Math.max(0,o-r.length)),f.append(hh(a,r),o),this.atCursorPos=c,this.pendingBuffer=c?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,r,o){let s=new _c(e,t,i,o);return s.openEnd=Ct.spans(r,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function hh(n,e){for(let t of e)n=new as(t,[n],n.length);return n}class mu extends al{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}mu.inline=new mu("span");mu.block=new mu("div");var Xt=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Xt||(Xt={}));const Yl=Xt.LTR,$2=Xt.RTL;function Cx(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const BW=Cx("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),LW=Cx("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Z1=Object.create(null),eo=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Z1[e]=t,Z1[t]=-e}function _x(n){return n<=247?BW[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?LW[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const FW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ps{get dir(){return this.level%2?$2:Yl}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let s=0;s<e.length;s++){let l=e[s];if(l.from<=t&&l.to>=t){if(l.level==i)return s;(o<0||(r!=0?r<0?l.from<t:l.to>t:e[o].level>l.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function Sx(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Sx(i.inner,r.inner))return!1}return!0}const Ft=[];function jW(n,e,t,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,l=o<i.length?i[o].from:t,a=o?256:r;for(let u=s,c=a,f=a;u<l;u++){let h=_x(n.charCodeAt(u));h==512?h=c:h==8&&f==4&&(h=16),Ft[u]=h==4?2:h,h&7&&(f=h),c=h}for(let u=s,c=a,f=a;u<l;u++){let h=Ft[u];if(h==128)u<l-1&&c==Ft[u+1]&&c&24?h=Ft[u]=c:Ft[u]=256;else if(h==64){let d=u+1;for(;d<l&&Ft[d]==64;)d++;let p=u&&c==8||d<t&&Ft[d]==8?f==1?1:8:256;for(let m=u;m<d;m++)Ft[m]=p;u=d-1}else h==8&&f==1&&(Ft[u]=1);c=h,h&7&&(f=h)}}}function zW(n,e,t,i,r){let o=r==1?2:1;for(let s=0,l=0,a=0;s<=i.length;s++){let u=s?i[s-1].to:e,c=s<i.length?i[s].from:t;for(let f=u,h,d,p;f<c;f++)if(d=Z1[h=n.charCodeAt(f)])if(d<0){for(let m=l-3;m>=0;m-=3)if(eo[m+1]==-d){let g=eo[m+2],b=g&2?r:g&4?g&1?o:r:0;b&&(Ft[f]=Ft[eo[m]]=b),l=m;break}}else{if(eo.length==189)break;eo[l++]=f,eo[l++]=h,eo[l++]=a}else if((p=Ft[f])==2||p==1){let m=p==r;a=m?0:1;for(let g=l-3;g>=0;g-=3){let b=eo[g+2];if(b&2)break;if(m)eo[g+2]|=2;else{if(b&4)break;eo[g+2]|=4}}}}}function VW(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let s=r?t[r-1].to:n,l=r<t.length?t[r].from:e;for(let a=s;a<l;){let u=Ft[a];if(u==256){let c=a+1;for(;;)if(c==l){if(r==t.length)break;c=t[r++].to,l=r<t.length?t[r].from:e}else if(Ft[c]==256)c++;else break;let f=o==1,h=(c<e?Ft[c]:i)==1,d=f==h?f?1:2:i;for(let p=c,m=r,g=m?t[m-1].to:n;p>a;)p==g&&(p=t[--m].from,g=m?t[m-1].to:n),Ft[--p]=d;a=c}else o=u,a++}}}function $1(n,e,t,i,r,o,s){let l=i%2?2:1;if(i%2==r%2)for(let a=e,u=0;a<t;){let c=!0,f=!1;if(u==o.length||a<o[u].from){let m=Ft[a];m!=l&&(c=!1,f=m==16)}let h=!c&&l==1?[]:null,d=c?i:i+1,p=a;e:for(;;)if(u<o.length&&p==o[u].from){if(f)break e;let m=o[u];if(!c)for(let g=m.to,b=u+1;;){if(g==t)break e;if(b<o.length&&o[b].from==g)g=o[b++].to;else{if(Ft[g]==l)break e;break}}if(u++,h)h.push(m);else{m.from>a&&s.push(new Ps(a,m.from,d));let g=m.direction==Yl!=!(d%2);eg(n,g?i+1:i,r,m.inner,m.from,m.to,s),a=m.to}p=m.to}else{if(p==t||(c?Ft[p]!=l:Ft[p]==l))break;p++}h?$1(n,a,p,i+1,r,h,s):a<p&&s.push(new Ps(a,p,d)),a=p}else for(let a=t,u=o.length;a>e;){let c=!0,f=!1;if(!u||a>o[u-1].to){let m=Ft[a-1];m!=l&&(c=!1,f=m==16)}let h=!c&&l==1?[]:null,d=c?i:i+1,p=a;e:for(;;)if(u&&p==o[u-1].to){if(f)break e;let m=o[--u];if(!c)for(let g=m.from,b=u;;){if(g==e)break e;if(b&&o[b-1].to==g)g=o[--b].from;else{if(Ft[g-1]==l)break e;break}}if(h)h.push(m);else{m.to<a&&s.push(new Ps(m.to,a,d));let g=m.direction==Yl!=!(d%2);eg(n,g?i+1:i,r,m.inner,m.from,m.to,s),a=m.from}p=m.from}else{if(p==e||(c?Ft[p-1]!=l:Ft[p-1]==l))break;p--}h?$1(n,p,a,i+1,r,h,s):p<a&&s.push(new Ps(p,a,d)),a=p}}function eg(n,e,t,i,r,o,s){let l=e%2?2:1;jW(n,r,o,i,l),zW(n,r,o,i,l),VW(r,o,i,l),$1(n,r,o,e,t,i,s)}function HW(n,e,t){if(!n)return[new Ps(0,0,e==$2?1:0)];if(e==Yl&&!t.length&&!FW.test(n))return vx(n.length);if(t.length)for(;n.length>Ft.length;)Ft[Ft.length]=256;let i=[],r=e==Yl?0:1;return eg(n,r,r,t,0,n.length,i),i}function vx(n){return[new Ps(0,n,0)]}let xx="";function qW(n,e,t,i,r){var o;let s=i.head-n.from,l=Ps.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),a=e[l],u=a.side(r,t);if(s==u){let h=l+=r?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],s=a.side(!r,t),u=a.side(r,t)}let c=$n(n.text,s,a.forward(r,t));(c<a.from||c>a.to)&&(c=u),xx=n.text.slice(Math.min(s,c),Math.max(s,c));let f=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return f&&c==u&&f.level+(r?0:1)<a.level?pe.cursor(f.side(!r,t)+n.from,f.forward(r,t)?1:-1,f.level):pe.cursor(c+n.from,a.forward(r,t)?-1:1,a.level)}function WW(n,e,t){for(let i=e;i<t;i++){let r=_x(n.charCodeAt(i));if(r==1)return Yl;if(r==2||r==4)return $2}return Yl}const Mx=Ie.define(),Ax=Ie.define(),Ex=Ie.define(),Ox=Ie.define(),tg=Ie.define(),Tx=Ie.define(),Dx=Ie.define(),eb=Ie.define(),tb=Ie.define(),Px=Ie.define({combine:n=>n.some(e=>e)}),Rx=Ie.define({combine:n=>n.some(e=>e)}),Nx=Ie.define();class Ja{constructor(e,t="nearest",i="nearest",r=5,o=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new Ja(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ja(pe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const dh=ot.define({map:(n,e)=>n.map(e)}),Ix=ot.define();function yi(n,e,t){let i=n.facet(Ox);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const xs=Ie.define({combine:n=>n.length?n[0]:!0});let UW=0;const lc=Ie.define();class cn{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.extension=o(this)}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=t||{};return new cn(UW++,e,i,r,l=>{let a=[lc.of(l)];return s&&a.push(Kc.of(u=>{let c=u.plugin(l);return c?s(c):Xe.none})),o&&a.push(o(l)),a})}static fromClass(e,t){return cn.define(i=>new e(i),t)}}class em{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(yi(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){yi(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){yi(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Bx=Ie.define(),nb=Ie.define(),Kc=Ie.define(),Lx=Ie.define(),ib=Ie.define(),Fx=Ie.define();function xC(n,e){let t=n.state.facet(Fx);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return Ct.spans(i,e.from,e.to,{point(){},span(o,s,l,a){let u=o-e.from,c=s-e.from,f=r;for(let h=l.length-1;h>=0;h--,a--){let d=l[h].spec.bidiIsolate,p;if(d==null&&(d=WW(e.text,u,c)),a>0&&f.length&&(p=f[f.length-1]).to==u&&p.direction==d)p.to=c,f=p.inner;else{let m={from:u,to:c,direction:d,inner:[]};f.push(m),f=m.inner}}}}),r}const jx=Ie.define();function zx(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(jx)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:i,bottom:r}}const ac=Ie.define();class dr{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new dr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,s=0,l=0;;r++){let a=r==e.length?null:e[r],u=s-l,c=a?a.fromB:1e9;for(;o<t.length&&t[o]<c;){let f=t[o],h=t[o+1],d=Math.max(l,f),p=Math.min(c,h);if(d<=p&&new dr(d+u,p+u,d,p).addToSet(i),h>c)break;o+=2}if(!a)return i;new dr(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),s=a.toA,l=a.toB}}}class Nd{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=En.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,l,a)=>r.push(new dr(o,s,l,a))),this.changedRanges=r}static create(e,t,i){return new Nd(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class MC extends jt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Xe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Cn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new dr(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!ZW(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?KW(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new dr(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Be.ie||Be.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,l=this.updateDeco(),a=XW(s,l,e.changes);return i=dr.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Be.chrome||Be.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Xo&&s.widget instanceof Y1&&o.push(s.dom);r.updateGaps(o)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=r.length-1;;s--){let l=s>=0?r[s]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:f}=l,h,d,p,m;if(i&&i.range.fromB<f&&i.range.toB>c){let M=_c.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),w=_c.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);d=M.breakAtStart,p=M.openStart,m=w.openEnd;let S=this.compositionView(i);w.breakAtStart?S.breakAfter=1:w.content.length&&S.merge(S.length,S.length,w.content[0],!1,w.openStart,0)&&(S.breakAfter=w.content[0].breakAfter,w.content.shift()),M.content.length&&S.merge(0,0,M.content[M.content.length-1],!0,0,M.openEnd)&&M.content.pop(),h=M.content.concat(S).concat(w.content)}else({content:h,breakAtStart:d,openStart:p,openEnd:m}=_c.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:g,off:b}=o.findPos(u,1),{i:y,off:_}=o.findPos(a,-1);dx(this,y,_,g,b,h,d,p,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Ix)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Hr(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new as(r,[t],t.length);let i=new Cn;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(s);let l=jt.get(o);l&&l!=s&&(l.dom=null),s.setDOM(o)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)i=r.childPos(i.off,1),r=r.children[i.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,o=!r&&$h(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Be.gecko&&l.empty&&!this.hasComposition&&JW(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=u=new si(f,0),s=!0}let c=this.view.observer.selectionRange;(s||!c.focusNode||(!Cc(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Cc(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{Be.android&&Be.chrome&&this.dom.contains(c.focusNode)&&YW(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=Uc(this.view.root);if(f)if(l.empty){if(Be.gecko){let h=GW(a.node,a.offset);if(h&&h!=3){let d=(h==1?cx:fx)(a.node,a.offset);d&&(a=new si(d.node,d.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),h.setEnd(u.node,u.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new si(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new si(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Cc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Uc(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=Cn.find(this,t.head);if(!s)return;let l=s.posAtStart;if(t.head==l||t.head==l+s.length)return;let a=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&i.collapse(r,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let o=jt.get(t.childNodes[r]);o instanceof Cn&&(i=o.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let o=jt.get(t.childNodes[r]);o instanceof Cn&&(i=o.domAtPos(o.length))}return i?new si(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=jt.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof Cn)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let l=this.children[s],a=o-l.breakAfter,u=a-l.length;if(a<e)break;if(u<=e&&(u<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Cn&&!(i instanceof Cn&&t>=0)))i=l,r=u;else if(i&&u==e&&a==e&&l instanceof Xo&&Math.abs(t)<2){if(l.deco.startSide<0)break;s&&(i=null)}o=u}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof Cn))return null;for(;r.children.length;){let{i:l,off:a}=r.childPos(i,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}i=a}if(!(r instanceof Hr))return null;let o=$n(r.text,i);if(o==i)return null;let s=Xl(r.dom,i,o).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(l==s.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Xt.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],h=u+f.length;if(h>r)break;if(u>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),s){let p=f.dom.lastChild,m=p?Jc(p):[];if(m.length){let g=m[m.length-1],b=a?g.right-d.left:d.right-g.left;b>l&&(l=b,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Xt.RTL:Xt.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Cn){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=Jc(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,r=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new hx(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.length;if(s>i){let l=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Xe.replace({widget:new Y1(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return Xe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Kc).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(Lx).map((o,s)=>{let l=typeof o=="function";return l&&(i=!0),l?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(Ct.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(Nx))try{if(u(this.view,e.range,e))return!0}catch(c){yi(this.view.state,c,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=zx(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;MW(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Xt.LTR)}}function JW(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Vx(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=cx(t.focusNode,t.focusOffset),r=fx(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let l=jt.get(r.node);if(!l||l instanceof Hr&&l.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let a=jt.get(i.node);!a||a instanceof Hr&&a.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function KW(n,e,t){let i=Vx(n,t);if(!i)return null;let{node:r,from:o,to:s}=i,l=r.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,u=new dr(a.mapPos(o),a.mapPos(s),o,s),c=[];for(let f=r.parentNode;;f=f.parentNode){let h=jt.get(f);if(h instanceof as)c.push({node:f,deco:h.mark});else{if(h instanceof Cn||f.nodeName=="DIV"&&f.parentNode==n.contentDOM)return{range:u,text:r,marks:c,line:f};if(f!=n.contentDOM)c.push({node:f,deco:new Tf({inclusive:!0,attributes:NW(f),tagName:f.tagName.toLowerCase()})});else return null}}}function GW(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let QW=class{constructor(){this.changes=[]}compareRange(e,t){X1(e,t,this.changes)}comparePoint(e,t){X1(e,t,this.changes)}};function XW(n,e,t){let i=new QW;return Ct.compare(n,e,t,i),i.changes}function YW(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function ZW(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function $W(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return pe.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,l=o;t<0?s=$n(r.text,o,!1):l=$n(r.text,o);let a=i(r.text.slice(s,l));for(;s>0;){let u=$n(r.text,s,!1);if(i(r.text.slice(u,s))!=a)break;s=u}for(;l<r.length;){let u=$n(r.text,l);if(i(r.text.slice(l,u))!=a)break;l=u}return pe.range(s+r.from,l+r.from)}function eU(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function tU(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function tm(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function AC(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function EC(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function ng(n,e,t){let i,r,o,s,l=!1,a,u,c,f;for(let p=n.firstChild;p;p=p.nextSibling){let m=Jc(p);for(let g=0;g<m.length;g++){let b=m[g];r&&tm(r,b)&&(b=AC(EC(b,r.bottom),r.top));let y=eU(e,b),_=tU(t,b);if(y==0&&_==0)return p.nodeType==3?OC(p,e,t):ng(p,e,t);if(!i||s>_||s==_&&o>y){i=p,r=b,o=y,s=_;let M=_?t<b.top?-1:1:y?e<b.left?-1:1:0;l=!M||(M>0?g<m.length-1:g>0)}y==0?t>b.bottom&&(!c||c.bottom<b.bottom)?(a=p,c=b):t<b.top&&(!f||f.top>b.top)&&(u=p,f=b):c&&tm(c,b)?c=EC(c,b.bottom):f&&tm(f,b)&&(f=AC(f,b.top))}}if(c&&c.bottom>=t?(i=a,r=c):f&&f.top<=t&&(i=u,r=f),!i)return{node:n,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return OC(i,h,t);if(l&&i.contentEditable!="false")return ng(i,h,t);let d=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:d}}function OC(n,e,t){let i=n.nodeValue.length,r=-1,o=1e9,s=0;for(let l=0;l<i;l++){let a=Xl(n,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;s||(s=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<o){let h=e>=(c.left+c.right)/2,d=h;if((Be.chrome||Be.gecko)&&Xl(n,l).getBoundingClientRect().left==c.right&&(d=!h),f<=0)return{node:n,offset:l+(d?1:0)};r=l+(d?1:0),o=f}}}return{node:n,offset:r>-1?r:s>0?n.nodeValue.length:0}}function Hx(n,e,t,i=-1){var r,o;let s=n.contentDOM.getBoundingClientRect(),l=s.top+n.viewState.paddingTop,a,{docHeight:u}=n.viewState,{x:c,y:f}=e,h=f-l;if(h<0)return 0;if(h>u)return n.state.doc.length;for(let M=n.viewState.heightOracle.textHeight/2,w=!1;a=n.elementAtHeight(h),a.type!=ki.Text;)for(;h=i>0?a.bottom+M:a.top-M,!(h>=0&&h<=u);){if(w)return t?null:0;w=!0,i=-i}f=l+h;let d=a.from;if(d<n.viewport.from)return n.viewport.from==0?0:t?null:TC(n,s,a,c,f);if(d>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:TC(n,s,a,c,f);let p=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:p,g=m.elementFromPoint(c,f);g&&!n.contentDOM.contains(g)&&(g=null),g||(c=Math.max(s.left+1,Math.min(s.right-1,c)),g=m.elementFromPoint(c,f),g&&!n.contentDOM.contains(g)&&(g=null));let b,y=-1;if(g&&((r=n.docView.nearest(g))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let M=p.caretPositionFromPoint(c,f);M&&({offsetNode:b,offset:y}=M)}else if(p.caretRangeFromPoint){let M=p.caretRangeFromPoint(c,f);M&&({startContainer:b,startOffset:y}=M,(!n.contentDOM.contains(b)||Be.safari&&nU(b,y,c)||Be.chrome&&iU(b,y,c))&&(b=void 0))}b&&(y=Math.min(_o(b),y))}if(!b||!n.docView.dom.contains(b)){let M=Cn.find(n.docView,d);if(!M)return h>a.top+a.height/2?a.to:a.from;({node:b,offset:y}=ng(M.dom,c,f))}let _=n.docView.nearest(b);if(!_)return null;if(_.isWidget&&((o=_.dom)===null||o===void 0?void 0:o.nodeType)==1){let M=_.dom.getBoundingClientRect();return e.y<M.top||e.y<=M.bottom&&e.x<=(M.left+M.right)/2?_.posAtStart:_.posAtEnd}else return _.localPosFromDOM(b,y)+_.posAtStart}function TC(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,a=Math.floor((r-t.top-(n.defaultLineHeight-l)*.5)/l);o+=a*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+V1(s,o,n.state.tabSize)}function nU(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Xl(n,i-1,i).getBoundingClientRect().left>t}function iU(n,e,t){if(e!=0)return!1;for(let r=n;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let i=n.nodeType==1?n.getBoundingClientRect():Xl(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function ig(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==ki.Text))return i}return t}function rU(n,e,t,i){let r=ig(n,e.head),o=!i||r.type!=ki.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),l=n.textDirectionAt(r.from),a=n.posAtCoords({x:t==(l==Xt.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(a!=null)return pe.cursor(a,t?-1:1)}return pe.cursor(t?r.to:r.from,t?-1:1)}function DC(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let l=e,a=null;;){let u=qW(r,o,s,l,t),c=xx;if(!u){if(r.number==(t?n.state.doc.lines:1))return l;c=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),u=n.visualLineSide(r,!t)}if(a){if(!a(c))return l}else{if(!i)return u;a=i(c)}l=u}}function oU(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let s=i(o);return r==en.Space&&(r=s),r==s}}function sU(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return pe.cursor(r,e.assoc);let s=e.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(r,e.assoc||-1),c=n.documentTop;if(u)s==null&&(s=u.left-a.left),l=o<0?u.top:u.bottom;else{let d=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(a.right-a.left,n.defaultCharacterWidth*(r-d.from))),l=(o<0?d.top:d.bottom)+c}let f=a.left+s,h=i??n.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=l+(h+d)*o,m=Hx(n,{x:f,y:p},!1,o);if(p<a.top||p>a.bottom||(o<0?m<r:m>r)){let g=n.docView.coordsForChar(m),b=!g||p<g.top?-1:1;return pe.cursor(m,b,void 0,s)}}}function ed(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,s,l)=>{if(e>o&&e<s){let a=i||t||(e-o<s-e?-1:1);e=a<0?o:s,i=a}});if(!i)return e}}function nm(n,e,t){let i=ed(n.state.facet(ib).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:pe.cursor(i,i<t.from?1:-1)}const uc="";class lU{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ht.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=uc}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=r.nextSibling;if(s==t)break;let l=jt.get(r),a=jt.get(s);(l&&a?l.breakAfter:(l?l.breakAfter:Pd(r))||Pd(s)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&this.lineBreak(),r=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,l;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(l=r.exec(t))&&(o=l.index,s=l[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=s-1);i=o+s}}readNode(e){if(e.cmIgnore)return;let t=jt.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(aU(e,i.node,i.offset)?t:0))}}function aU(n,e,t){for(;;){if(!e||t<_o(e))return!1;if(e==n)return!0;t=Ql(e)+1,e=e.parentNode}}class PC{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class uU{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=o||s?[]:hU(e),a=new lU(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=dU(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!W1(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=s&&s.node==l.anchorNode&&s.offset==l.anchorOffset||!W1(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((Be.ios||Be.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(a,u),h=Math.max(a,u),d=c.from-f,p=c.to-h;(d==0||d==1||f==0)&&(p==0||p==-1||h==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=pe.single(u,a)}}}function qx(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:l}=e.bounds,a=r.from,u=null;(o===8||Be.android&&e.text.length<l-s)&&(a=r.to,u="end");let c=fU(n.state.doc.sliceString(s,l,uc),e.text,a-s,u);c&&(Be.chrome&&o==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==uc+uc&&c.toB--,t={from:s+c.from,to:s+c.toA,insert:Dt.of(e.text.slice(c.from,c.toB).split(uc))})}else i&&(!n.hasFocus&&n.state.facet(xs)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:(Be.mac||Be.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=pe.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:Dt.of([" "])}):Be.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=pe.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:Dt.of([" "])}),t)return rb(n,t,i,o);if(i&&!i.main.eq(r)){let s=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:s,userEvent:l}),!0}else return!1}function rb(n,e,t,i=-1){if(Be.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(Be.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ua(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Ua(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Ua(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,l=()=>s||(s=cU(n,e,t));return n.state.facet(Tx).some(a=>a(n,e.from,e.to,o,l))||n.dispatch(l()),!0}function cU(n,e,t){let i,r=n.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=o.from<e.from?r.sliceDoc(o.from,e.from):"",a=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+a))}else{let l=r.changes(e),a=t&&t.main.to<=l.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let u=n.state.sliceDoc(e.from,e.to),c,f=t&&Vx(n,t.main.head);if(f){let p=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-p}}else c=n.state.doc.lineAt(o.head);let h=o.to-e.to,d=o.to-o.from;i=r.changeByRange(p=>{if(p.from==o.from&&p.to==o.to)return{changes:l,range:a||p.map(l)};let m=p.to-h,g=m-u.length;if(p.to-p.from!=d||n.state.sliceDoc(g,m)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let b=r.changes({from:g,to:m,insert:e.insert}),y=p.to-o.to;return{changes:b,range:a?pe.range(Math.max(0,a.anchor+y),Math.max(0,a.head+y)):p.map(b)}})}else i={changes:l,selection:a&&r.selection.replaceRange(a)}}let s="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,s+=".compose",n.inputState.compositionFirstChange&&(s+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:s,scrollIntoView:!0})}function fU(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let s=n.length,l=e.length;for(;s>0&&l>0&&n.charCodeAt(s-1)==e.charCodeAt(l-1);)s--,l--;if(i=="end"){let a=Math.max(0,o-Math.min(s,l));t-=s+a-o}if(s<o&&n.length<e.length){let a=t<=o&&t>=s?o-t:0;o-=a,l=o+(l-s),s=o}else if(l<o){let a=t<=o&&t>=l?o-t:0;o-=a,s=o+(s-l),l=o}return{from:o,toA:s,toB:l}}function hU(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new PC(t,i)),(r!=t||o!=i)&&e.push(new PC(r,o))),e}function dU(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?pe.single(t+e,i+e):null}let pU=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Be.safari&&e.contentDOM.addEventListener("input",()=>null),Be.gecko&&TU(e.contentDOM.ownerDocument)}handleEvent(e){!_U(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=mU(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,l=i[o];l&&s!=!l.handlers.length&&(r.removeEventListener(o,this.handleEvent),l=null),l||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Ux.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Be.android&&Be.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Be.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Wx.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||gU.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ua(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Be.safari&&!Be.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function RC(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){yi(t.state,r)}}}function mU(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec;if(r&&r.domEventHandlers)for(let o in r.domEventHandlers){let s=r.domEventHandlers[o];s&&t(o).handlers.push(RC(i.value,s))}if(r&&r.domEventObservers)for(let o in r.domEventObservers){let s=r.domEventObservers[o];s&&t(o).observers.push(RC(i.value,s))}}for(let i in qr)t(i).handlers.push(qr[i]);for(let i in kr)t(i).observers.push(kr[i]);return e}const Wx=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],gU="dthko",Ux=[16,17,18,20,91,92,224,225],ph=6;function mh(n){return Math.max(0,n)*.7+8}function bU(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class yU{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=AW(e.contentDOM),this.atoms=e.state.facet(ib).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ht.allowMultipleSelections)&&kU(e,t),this.dragging=CU(e,t)&&Gx(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&bU(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,s=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=zx(this.view);e.clientX-a.left<=r+ph?t=-mh(r-e.clientX):e.clientX+a.right>=s-ph&&(t=mh(e.clientX-s)),e.clientY-a.top<=o+ph?i=-mh(o-e.clientY):e.clientY+a.bottom>=l-ph&&(i=mh(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let s=ed(this.atoms,r.from,0);s!=r.from&&(o=pe.cursor(s,-1))}else{let s=ed(this.atoms,r.from,-1),l=ed(this.atoms,r.to,1);(s!=r.from||l!=r.to)&&(o=pe.range(r.from==r.anchor?s:l,r.from==r.head?s:l))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?pe.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function kU(n,e){let t=n.state.facet(Mx);return t.length?t[0](e):Be.mac?e.metaKey:e.ctrlKey}function wU(n,e){let t=n.state.facet(Ax);return t.length?t[0](e):Be.mac?!e.altKey:!e.ctrlKey}function CU(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=Uc(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function _U(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=jt.get(t))&&i.ignoreEvent(e))return!1;return!0}const qr=Object.create(null),kr=Object.create(null),Jx=Be.ie&&Be.ie_version<15||Be.ios&&Be.webkit_version<604;function SU(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Kx(n,t.value)},50)}function t0(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Kx(n,e){e=t0(n.state,eb,e);let{state:t}=n,i,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(rg!=null&&t.selection.ranges.every(a=>a.empty)&&rg==o.toString()){let a=-1;i=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let f=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:pe.cursor(u.from+f.length)}})}else s?i=t.changeByRange(a=>{let u=o.line(r++);return{changes:{from:a.from,to:a.to,insert:u.text},range:pe.cursor(a.from+u.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}kr.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};qr.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);kr.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};kr.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};qr.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(Ex))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=MU(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new yU(n,e,t,i)),i&&n.observer.ignore(()=>{lx(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function NC(n,e,t,i){if(i==1)return pe.cursor(e,t);if(i==2)return $W(n.state,e,t);{let r=Cn.find(n.docView,e),o=n.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,l=r?r.posAtEnd:o.to;return l<n.state.doc.length&&l==o.to&&l++,pe.range(s,l)}}let IC=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function vU(n,e,t,i){let r=Cn.find(n.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&IC(t,i,s))return-1;let l=r.coordsAt(o,1);return l&&IC(t,i,l)?1:s&&s.bottom>=i?-1:1}function BC(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:vU(n,t,e.clientX,e.clientY)}}const xU=Be.ie&&Be.ie_version<=11;let LC=null,FC=0,jC=0;function Gx(n){if(!xU)return n.detail;let e=LC,t=jC;return LC=n,jC=Date.now(),FC=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(FC+1)%3:1}function MU(n,e){let t=BC(n,e),i=Gx(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,l){let a=BC(n,o),u,c=NC(n,a.pos,a.bias,i);if(t.pos!=a.pos&&!s){let f=NC(n,t.pos,t.bias,i),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?pe.range(h,d):pe.range(d,h)}return s?r.replaceRange(r.main.extend(c.from,c.to)):l&&i==1&&r.ranges.length>1&&(u=AU(r,a.pos))?u:l?r.addRange(c):pe.create([c])}}}function AU(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return pe.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}qr.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let o=r.posAtStart,s=o+r.length;(o>=t.to||s<=t.from)&&(t=pe.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",t0(n.state,tb,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};qr.dragend=n=>(n.inputState.draggedContent=null,!1);function zC(n,e,t,i){if(t=t0(n.state,eb,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&wU(n,e)?{from:o.from,to:o.to}:null,l={from:r,insert:t},a=n.state.changes(s?[s,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}qr.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&zC(n,e,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[s]=l.result),o()},l.readAsText(t[s])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return zC(n,e,i,!0),!0}return!1};qr.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Jx?null:e.clipboardData;return t?(Kx(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(SU(n),!1)};function EU(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function OU(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:t0(n,tb,e.join(n.lineBreak)),ranges:t,linewise:i}}let rg=null;qr.copy=qr.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=OU(n.state);if(!t&&!r)return!1;rg=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Jx?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(EU(n,t),!1)};const Qx=hs.define();function Xx(n,e){let t=[];for(let i of n.facet(Dx)){let r=i(n,e);r&&t.push(r)}return t?n.update({effects:t,annotations:Qx.of(!0)}):null}function Yx(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Xx(n.state,e);t?n.dispatch(t):n.update([])}},10)}kr.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Yx(n)};kr.blur=n=>{n.observer.clearSelectionRange(),Yx(n)};kr.compositionstart=kr.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};kr.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Be.chrome&&Be.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};kr.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};qr.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let l=s[0],a=n.posAtDOM(l.startContainer,l.startOffset),u=n.posAtDOM(l.endContainer,l.endOffset);return rb(n,{from:a,to:u,insert:n.state.toText(o)},null),!0}}let r;if(Be.chrome&&Be.android&&(r=Wx.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Be.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Be.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>kr.compositionend(n,e),20),!1};const VC=new Set;function TU(n){VC.has(n)||(VC.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const HC=["pre-wrap","normal","pre-line","break-spaces"];let gu=!1;function qC(){gu=!1}class DU{constructor(e){this.lineWrapping=e,this.doc=Dt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return HC.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,s){let l=HC.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,a){this.heightSamples={};for(let u=0;u<s.length;u++){let c=s[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class PU{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class oo{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?ki.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof el?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new oo(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Gt=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Gt||(Gt={}));const td=.001;class wi{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>td&&(gu=!0),this.height=e)}replace(e,t,i){return wi.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,s=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:f}=r[l],h=o.lineAt(a,Gt.ByPosNoHeight,i.setDoc(t),0,0),d=h.to>=u?h:o.lineAt(u,Gt.ByPosNoHeight,i,0,0);for(f+=d.to-u,u=d.to;l>0&&h.from<=r[l-1].toA;)a=r[l-1].fromA,c=r[l-1].fromB,l--,a<h.from&&(h=o.lineAt(a,Gt.ByPosNoHeight,i,0,0));c+=h.from-a,a=h.from;let p=ob.build(i.setDoc(s),e,c,f);o=Id(o,o.replace(a,u,p))}return o.updateHeight(i,0)}static empty(){return new qi(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(o>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,o-=l.size}else break;else if(r<o){let l=e[t++];l&&(r+=l.size)}else{let l=e[--i];l&&(o+=l.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new RU(wi.of(e.slice(0,t)),s,wi.of(e.slice(i)))}}function Id(n,e){return n==e?n:(n.constructor!=e.constructor&&(gu=!0),e)}wi.prototype.size=1;class Zx extends wi{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new oo(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,o){return this.blockAt(0,i,r,o)}forEachLine(e,t,i,r,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,i,r,o))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class qi extends Zx{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new oo(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof qi||r instanceof Kn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Kn?r=new qi(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):wi.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Kn extends wi{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,s,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*o);s=a/o,this.length>o+1&&(l=(this.height-a)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:l}}blockAt(e,t,i,r){let{firstLine:o,lastLine:s,perLine:l,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let u=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=t.doc.lineAt(u),f=l+c.length*a,h=Math.max(i,e-f/2);return new oo(c.from,c.length,h,f,0)}else{let u=Math.max(0,Math.min(s-o,Math.floor((e-i)/l))),{from:c,length:f}=t.doc.line(o+u);return new oo(c,f,i+l*u,l,0)}}lineAt(e,t,i,r,o){if(t==Gt.ByHeight)return this.blockAt(e,i,r,o);if(t==Gt.ByPosNoHeight){let{from:d,to:p}=i.doc.lineAt(e);return new oo(d,p-d,0,0,0)}let{firstLine:s,perLine:l,perChar:a}=this.heightMetrics(i,o),u=i.doc.lineAt(e),c=l+u.length*a,f=u.number-s,h=r+l*f+a*(u.from-o-f);return new oo(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,t,i,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(i,o);for(let c=e,f=r;c<=t;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-l;f+=a*p+u*(e-o-p)}let d=a+u*h.length;s(new oo(h.from,h.length,f,d,0)),f+=d,c=h.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof Kn?i[i.length-1]=new Kn(o.length+r):i.push(null,new Kn(r-1))}if(e>0){let o=i[0];o instanceof Kn?i[0]=new Kn(e+o.length):i.unshift(new Kn(e-1),null)}return wi.of(i)}decomposeLeft(e,t){t.push(new Kn(e-1),null)}decomposeRight(e,t){t.push(null,new Kn(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],l=Math.max(t,r.from),a=-1;for(r.from>t&&s.push(new Kn(r.from-t-1).updateHeight(e,t));l<=o&&r.more;){let c=e.doc.lineAt(l).length;s.length&&s.push(null);let f=r.heights[r.index++];a==-1?a=f:Math.abs(f-a)>=td&&(a=-2);let h=new qi(c,f);h.outdated=!1,s.push(h),l+=c+1}l<=o&&s.push(null,new Kn(o-l).updateHeight(e,l));let u=wi.of(s);return(a<0||Math.abs(u.height-this.height)>=td||Math.abs(a-this.heightMetrics(e,t).perLine)>=td)&&(gu=!0),Id(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class RU extends wi{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let s=r+this.left.height,l=o+this.left.length+this.break,a=t==Gt.ByHeight?e<s:e<l,u=a?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,s,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=t==Gt.ByPosNoHeight?Gt.ByPosNoHeight:Gt.ByPos;return a?u.join(this.right.lineAt(l,c,i,s,l)):this.left.lineAt(l,c,i,r,o).join(u)}forEachLine(e,t,i,r,o,s){let l=r+this.left.height,a=o+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,r,o,s),t>=a&&this.right.forEachLine(e,t,i,l,a,s);else{let u=this.lineAt(a,Gt.ByPos,i,r,o);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,o,s),u.to>=e&&u.from<=t&&s(u),t>u.to&&this.right.forEachLine(u.to+1,t,i,l,a,s)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let l of i)o.push(l);if(e>0&&WC(o,s-1),t<this.length){let l=o.length;this.decomposeRight(t,o),WC(o,l)}return wi.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?wi.of(this.break?[e,null,t]:[e,t]):(this.left=Id(this.left,e),this.right=Id(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:s}=this,l=t+o.length+this.break,a=null;return r&&r.from<=t+o.length&&r.more?a=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=l+s.length&&r.more?a=s=s.updateHeight(e,l,i,r):s.updateHeight(e,l,i),a?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function WC(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Kn&&(i=n[e+1])instanceof Kn&&n.splice(e-1,3,new Kn(t.length+1+i.length))}const NU=5;class ob{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof qi?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new qi(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new Zx(s,r,i)):(s||o||r>=NU)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new qi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Kn(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof qi)return e;let t=new qi(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof qi)&&!this.isCovered?this.nodes.push(new qi(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof qi&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new ob(i,e);return Ct.spans(t,i,r,o,0),o.finish(i)}}function IU(n,e,t){let i=new BU;return Ct.compare(n,e,t,i,0),i.changes}class BU{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&X1(e,t,this.changes,5)}}function LU(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(r.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let h=c.getBoundingClientRect();o=Math.max(o,h.left),s=Math.min(s,h.right),l=Math.max(l,h.top),a=Math.min(u==n.parentNode?r.innerHeight:a,h.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function FU(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class im{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return Xe.replace({widget:new jU(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class jU extends al{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class UC{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=JC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Xt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(nb).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new DU(t),this.stateDeco=e.facet(Kc).filter(i=>typeof i!="function"),this.heightMap=wi.empty().applyChanges(this.stateDeco,Dt.empty,this.heightOracle.setDoc(e.doc),[new dr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Xe.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new gh(o,s))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?JC:new sb(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(cc(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Kc).filter(c=>typeof c!="function");let r=e.changedRanges,o=dr.extendWithRanges(r,IU(i,this.stateDeco,e?e.changes:En.empty(this.state.doc.length))),s=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);qC(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||gu)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Rx)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Xt.RTL:Xt.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),l=t.getBoundingClientRect(),a=s||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0;if(l.width&&l.height){let{scaleX:M,scaleY:w}=sx(t,l);(M>.005&&Math.abs(this.scaleX-M)>.005||w>.005&&Math.abs(this.scaleY-w)>.005)&&(this.scaleX=M,this.scaleY=w,u|=8,s=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=ux(e.scrollDOM);let p=(this.printing?FU:LU)(t,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let y=l.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),a){let M=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(M)&&(s=!0),s||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:w,charWidth:S,textHeight:E}=e.docView.measureTextSize();s=w>0&&r.refresh(o,w,S,E,y/S,M),s&&(e.docView.minWidth=0,u|=8)}m>0&&g>0?c=Math.max(m,g):m<0&&g<0&&(c=Math.min(m,g)),qC();for(let w of this.viewports){let S=w.from==this.viewport.from?M:e.docView.measureVisibleLineHeights(w);this.heightMap=(s?wi.empty().applyChanges(this.stateDeco,Dt.empty,this.heightOracle,[new dr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new PU(w.from,S))}gu&&(u|=2)}let _=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:l}=this,a=new gh(r.lineAt(s-i*1e3,Gt.ByHeight,o,0,0).from,r.lineAt(l+(1-i)*1e3,Gt.ByHeight,o,0,0).to);if(t){let{head:u}=t.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=r.lineAt(u,Gt.ByPos,o,0,0),h;t.y=="center"?h=(f.top+f.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<a.from?h=f.top:h=f.bottom-c,a=new gh(r.lineAt(h-1e3/2,Gt.ByHeight,o,0,0).from,r.lineAt(h+c+1e3/2,Gt.ByHeight,o,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new gh(this.heightMap.lineAt(i,Gt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Gt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Gt.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Gt.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:l}=this;return(e==0||r<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=l+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new im(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=Xt.LTR&&!i)return[];let l=[],a=(c,f,h,d)=>{if(f-c<o)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let b of m)if(b>c&&b<f){a(c,b-10,h,d),a(b+10,f,h,d);return}let g=VU(e,b=>b.from>=h.from&&b.to<=h.to&&Math.abs(b.from-c)<o&&Math.abs(b.to-f)<o&&!m.some(y=>b.from<y&&b.to>y));if(!g){if(f<h.to&&t&&i&&t.visibleRanges.some(_=>_.from<=f&&_.to>=f)){let _=t.moveToLineBoundary(pe.cursor(f),!1,!0).head;_>c&&(f=_)}let b=this.gapSize(h,c,f,d),y=i||b<2e6?b:2e6;g=new im(c,f,b,y)}l.push(g)},u=c=>{if(c.length<s||c.type!=ki.Text)return;let f=zU(c.from,c.to,this.stateDeco);if(f.total<s)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,b;if(h!=null){let y=yh(f,h),_=((this.visibleBottom-this.visibleTop)/2+m)/c.height;g=y-_,b=y+_}else g=(this.visibleTop-c.top-m)/c.height,b=(this.visibleBottom-c.top+m)/c.height;d=bh(f,g),p=bh(f,b)}else{let m=f.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,b=0;if(m>2e6)for(let S of e)S.from>=c.from&&S.from<c.to&&S.size!=S.displaySize&&S.from*this.heightOracle.charWidth+b<this.pixelViewport.left&&(b=S.size-S.displaySize);let y=this.pixelViewport.left+b,_=this.pixelViewport.right+b,M,w;if(h!=null){let S=yh(f,h),E=((_-y)/2+g)/m;M=S-E,w=S+E}else M=(y-g)/m,w=(_+g)/m;d=bh(f,M),p=bh(f,w)}d>c.from&&a(c.from,d,c,f),p<c.to&&a(p,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return l}gapSize(e,t,i,r){let o=yh(r,i)-yh(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){im.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Xe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Ct.spans(e,this.viewport.from,this.viewport.to,{span(r,o){t.push({from:r,to:o})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,o)=>r.from!=t[o].from||r.to!=t[o].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||cc(this.heightMap.lineAt(e,Gt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||cc(this.heightMap.lineAt(this.scaler.fromDOM(e),Gt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return cc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class gh{constructor(e,t){this.from=e,this.to=t}}function zU(n,e,t){let i=[],r=n,o=0;return Ct.spans(t,n,e,{span(){},point(s,l){s>r&&(i.push({from:r,to:s}),o+=s-r),r=l}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function bh({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:s}=e[r],l=s-o;if(i<=l)return o+i;i-=l}}function yh(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function VU(n,e){for(let t of n)if(e(t))return t}const JC={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class sb{constructor(e,t,i){let r=0,o=0,s=0;this.viewports=i.map(({from:l,to:a})=>{let u=t.lineAt(l,Gt.ByPos,e,0,0).top,c=t.lineAt(a,Gt.ByPos,e,0,0).bottom;return r+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let l of this.viewports)l.domTop=s+(l.top-o)*this.scale,s=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof sb?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function cc(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new oo(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>cc(r,e)):n._content)}const kh=Ie.define({combine:n=>n.join(" ")}),og=Ie.define({combine:n=>n.indexOf(!0)>-1}),sg=$s.newName(),$x=$s.newName(),e5=$s.newName(),t5={"&light":"."+$x,"&dark":"."+e5};function lg(n,e,t){return new $s(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const HU=lg("."+sg,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},t5),qU={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},rm=Be.ie&&Be.ie_version<=11;let WU=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new EW,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Be.ie&&Be.ie_version<=11||Be.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Be.chrome&&Be.chrome_version<126)&&(this.editContext=new JU(e),e.state.facet(xs)&&(e.contentDOM.editContext=this.editContext.editContext)),rm&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(xs)?i.root.activeElement!=this.dom:!$h(this.dom,r))return;let o=r.anchorNode&&i.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Be.ie&&Be.ie_version<=11||Be.android&&Be.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Cc(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Uc(e.root);if(!t)return!1;let i=Be.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&UU(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=$h(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&TW(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,qU),rm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),rm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Ua(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&$h(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new uU(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=qx(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=KC(t,e.previousSibling||e.target.previousSibling,-1),r=KC(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(xs)!=e.state.facet(xs)&&(e.view.contentDOM.editContext=e.state.facet(xs)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function KC(n,e,t){for(;e;){let i=jt.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function GC(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor);return Cc(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function UU(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return GC(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?GC(n,t):null}class JU{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:r}=e.state.selection.main,o={from:this.toEditorPos(i.updateRangeStart),to:this.toEditorPos(i.updateRangeEnd),insert:Dt.of(i.text.split(`
`))};o.from==this.from&&r<this.from?o.from=r:o.to==this.to&&r>this.to&&(o.to=r),!(o.from==o.to&&!o.insert.length)&&(this.pendingContextChange=o,e.state.readOnly||rb(e,o,pe.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);s<l;s++){let a=e.coordsForChar(s);o=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,l=o.underlineThickness;if(s!="None"&&l!="None"){let a=`text-decoration: underline ${s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;r.push(Xe.mark({attributes:{style:a}}).range(this.toEditorPos(o.rangeStart),this.toEditorPos(o.rangeEnd)))}}e.dispatch({effects:Ix.of(Xe.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Uc(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,s,l,a,u)=>{if(i)return;let c=u.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(u)){r=this.pendingContextChange=null,t+=c,this.to+=c;return}else r=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=c,this.to+=c;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),u.toString()),this.to+=c}t+=c}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}let Ne=class ag{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||OW(e.parent)||document,this.viewState=new UC(e.state||Ht.create(e)),e.scrollTo&&e.scrollTo.is(dh)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(lc).map(r=>new em(r));for(let r of this.plugins)r.update(this);this.observer=new WU(this),this.inputState=new pU(this),this.inputState.ensureHandlers(this.plugins),this.docView=new MC(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Di?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let h of e){if(h.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=h.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(Qx))?(this.inputState.notifiedFocused=s,l=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,a=Xx(o,s),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet(Ht.phrases)!=this.state.facet(Ht.phrases))return this.setState(o);r=Nd.create(this,o,e),r.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new Ja(d.empty?d:pe.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(dh)&&(f=d.value.clip(this.state))}this.viewState.update(r,f),this.bidiCache=Bd.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(ac)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(kh)!=r.state.facet(kh)&&(this.viewState.mustMeasureContent=!0),(t||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let h of this.state.facet(tg))try{h(r)}catch(d){yi(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!qx(this,c)&&u.force&&Ua(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new UC(e),this.plugins=e.facet(lc).map(i=>new em(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new MC(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(lc),i=e.state.facet(lc);if(t!=i){let r=[];for(let o of i){let s=t.indexOf(o);if(s<0)r.push(new em(o));else{let l=this.plugins[s];l.mustUpdate=e,r.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){yi(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(s<0)if(ux(i))o=-1,s=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(r);o=d.from,s=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(p){return yi(this.state,p),QC}}),f=Nd.create(this,this.state,[]),h=!1;f.flags|=a,t?t.flags|=a:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=QC)try{let p=u[d];p.write&&p.write(c[d],this)}catch(p){yi(this.state,p)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let p=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(p>1||p<-1){r=r+p,i.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(tg))l(t)}get themeClasses(){return sg+" "+(this.state.facet(og)?e5:$x)+" "+this.state.facet(kh)}updateAttrs(){let e=XC(this,Bx,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(xs)?"true":"false",class:"cm-content",style:`${Be.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),XC(this,nb,t);let i=this.observer.ignore(()=>{let r=Q1(this.contentDOM,this.contentAttrs,t),o=Q1(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(ag.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(ac);let e=this.state.facet(ag.cspNonce);$s.mount(this.root,this.styleModules.concat(HU).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return nm(this,e,DC(this,e,t,i))}moveByGroup(e,t){return nm(this,e,DC(this,e,t,i=>oU(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return pe.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return rU(this,e,t,i)}moveVertically(e,t,i){return nm(this,e,sU(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Hx(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[Ps.find(o,e-r.from,-1,t)];return $p(i,s.dir==Xt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Px)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>KU)return vx(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||Sx(o.isolates,i=xC(this,e))))return o.order;i||(i=xC(this,e));let r=HW(e.text,t,i);return this.bidiCache.push(new Bd(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Be.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{lx(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return dh.of(new Ja(typeof e=="number"?pe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return dh.of(new Ja(pe.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return cn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return cn.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=$s.newName(),r=[kh.of(i),ac.of(lg(`.${i}`,e))];return t&&t.dark&&r.push(og.of(!0)),r}static baseTheme(e){return la.lowest(ac.of(lg("."+sg,e,t5)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&jt.get(i)||jt.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}};Ne.styleModule=ac;Ne.inputHandler=Tx;Ne.clipboardInputFilter=eb;Ne.clipboardOutputFilter=tb;Ne.scrollHandler=Nx;Ne.focusChangeEffect=Dx;Ne.perLineTextDirection=Px;Ne.exceptionSink=Ox;Ne.updateListener=tg;Ne.editable=xs;Ne.mouseSelectionStyle=Ex;Ne.dragMovesSelection=Ax;Ne.clickAddsSelectionRange=Mx;Ne.decorations=Kc;Ne.outerDecorations=Lx;Ne.atomicRanges=ib;Ne.bidiIsolatedRanges=Fx;Ne.scrollMargins=jx;Ne.darkTheme=og;Ne.cspNonce=Ie.define({combine:n=>n.length?n[0]:""});Ne.contentAttributes=nb;Ne.editorAttributes=Bx;Ne.lineWrapping=Ne.contentAttributes.of({class:"cm-lineWrapping"});Ne.announce=ot.define();const KU=4096,QC={};class Bd{constructor(e,t,i,r,o,s){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Xt.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&i.push(new Bd(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function XC(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&G1(s,t)}return t}const GU=Be.mac?"mac":Be.windows?"win":Be.linux?"linux":"key";function QU(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,s,l;for(let a=0;a<t.length-1;++a){const u=t[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),l&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function wh(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const XU=la.default(Ne.domEventHandlers({keydown(n,e){return i5(n5(e.state),n,e,"editor")}})),Ld=Ie.define({enables:XU}),YC=new WeakMap;function n5(n){let e=n.facet(Ld),t=YC.get(e);return t||YC.set(e,t=$U(e.reduce((i,r)=>i.concat(r),[]))),t}function YU(n,e,t){return i5(n5(n.state),e,n,t)}let Ms=null;const ZU=4e3;function $U(n,e=GU){let t=Object.create(null),i=Object.create(null),r=(s,l)=>{let a=i[s];if(a==null)i[s]=l;else if(a!=l)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,l,a,u,c)=>{var f,h;let d=t[s]||(t[s]=Object.create(null)),p=l.split(/ (?!$)/).map(b=>QU(b,e));for(let b=1;b<p.length;b++){let y=p.slice(0,b).join(" ");r(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[_=>{let M=Ms={view:_,prefix:y,scope:s};return setTimeout(()=>{Ms==M&&(Ms=null)},ZU),!0}]})}let m=p.join(" ");r(m,!1);let g=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&g.run.push(a),u&&(g.preventDefault=!0),c&&(g.stopPropagation=!0)};for(let s of n){let l=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let u of l){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=s;for(let h in c)c[h].run.push(d=>f(d,ug))}let a=s[e]||s.key;if(a)for(let u of l)o(u,a,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(u,"Shift-"+a,s.shift,s.preventDefault,s.stopPropagation)}return t}let ug=null;function i5(n,e,t,i){ug=e;let r=ox(e),o=Qn(r,0),s=or(o)==r.length&&r!=" ",l="",a=!1,u=!1,c=!1;Ms&&Ms.view==t&&Ms.scope==i&&(l=Ms.prefix+" ",Ux.indexOf(e.keyCode)<0&&(u=!0,Ms=null));let f=new Set,h=g=>{if(g){for(let b of g.run)if(!f.has(b)&&(f.add(b),b(t)))return g.stopPropagation&&(c=!0),!0;g.preventDefault&&(g.stopPropagation&&(c=!0),u=!0)}return!1},d=n[i],p,m;return d&&(h(d[l+wh(r,e,!s)])?a=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Be.windows&&e.ctrlKey&&e.altKey)&&(p=ls[e.keyCode])&&p!=r?(h(d[l+wh(p,e,!0)])||e.shiftKey&&(m=Wc[e.keyCode])!=r&&m!=p&&h(d[l+wh(m,e,!1)]))&&(a=!0):s&&e.shiftKey&&h(d[l+wh(r,e,!0)])&&(a=!0),!a&&h(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),ug=null,a}class Pf{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=r5(e);return[new Pf(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return eJ(e,t,i)}}function r5(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Xt.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function ZC(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,l=n.posAtCoords({x:o.left+1,y:s}),a=n.posAtCoords({x:o.right-1,y:s});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function eJ(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==Xt.LTR,s=n.contentDOM,l=s.getBoundingClientRect(),a=r5(n),u=s.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=l.right-(c?parseInt(c.paddingRight):0),d=ig(n,i),p=ig(n,r),m=d.type==ki.Text?d:null,g=p.type==ki.Text?p:null;if(m&&(n.lineWrapping||d.widgetLineBreaks)&&(m=ZC(n,i,1,m)),g&&(n.lineWrapping||p.widgetLineBreaks)&&(g=ZC(n,r,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return y(_(t.from,t.to,m));{let w=m?_(t.from,null,m):M(d,!1),S=g?_(null,t.to,g):M(p,!0),E=[];return(m||d).to<(g||p).from-(m&&g?1:0)||d.widgetLineBreaks>1&&w.bottom+n.defaultLineHeight/2<S.top?E.push(b(f,w.bottom,h,S.top)):w.bottom<S.top&&n.elementAtHeight((w.bottom+S.top)/2).type==ki.Text&&(w.bottom=S.top=(w.bottom+S.top)/2),y(w).concat(E).concat(y(S))}function b(w,S,E,I){return new Pf(e,w-a.left,S-a.top-.01,E-w,I-S+.01)}function y({top:w,bottom:S,horizontal:E}){let I=[];for(let O=0;O<E.length;O+=2)I.push(b(E[O],w,E[O+1],S));return I}function _(w,S,E){let I=1e9,O=-1e9,P=[];function A(q,L,X,Y,G){let T=n.coordsAtPos(q,q==E.to?-2:2),B=n.coordsAtPos(X,X==E.from?2:-2);!T||!B||(I=Math.min(T.top,B.top,I),O=Math.max(T.bottom,B.bottom,O),G==Xt.LTR?P.push(o&&L?f:T.left,o&&Y?h:B.right):P.push(!o&&Y?f:B.left,!o&&L?h:T.right))}let H=w??E.from,W=S??E.to;for(let q of n.visibleRanges)if(q.to>H&&q.from<W)for(let L=Math.max(q.from,H),X=Math.min(q.to,W);;){let Y=n.state.doc.lineAt(L);for(let G of n.bidiSpans(Y)){let T=G.from+Y.from,B=G.to+Y.from;if(T>=X)break;B>L&&A(Math.max(T,L),w==null&&T<=H,Math.min(B,X),S==null&&B>=W,G.dir)}if(L=Y.to+1,L>=X)break}return P.length==0&&A(H,w==null,W,S==null,n.textDirection),{top:I,bottom:O,horizontal:P}}function M(w,S){let E=l.top+(S?w.top:w.bottom);return{top:E,bottom:E,horizontal:[]}}}function tJ(n,e){return n.constructor==e.constructor&&n.eq(e)}class nJ{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(nd)!=e.state.facet(nd)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(nd);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!tJ(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const nd=Ie.define();function o5(n){return[cn.define(e=>new nJ(e,n)),nd.of(n)]}const s5=!Be.ios,Gc=Ie.define({combine(n){return _r(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function iJ(n={}){return[Gc.of(n),rJ,oJ,sJ,Rx.of(!0)]}function l5(n){return n.startState.facet(Gc)!=n.state.facet(Gc)}const rJ=o5({above:!0,markers(n){let{state:e}=n,t=e.facet(Gc),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty?!o||s5:t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:pe.cursor(r.head,r.head>r.anchor?-1:1);for(let a of Pf.forRange(n,s,l))i.push(a)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=l5(n);return t&&$C(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){$C(e.state,n)},class:"cm-cursorLayer"});function $C(n,e){e.style.animationDuration=n.facet(Gc).cursorBlinkRate+"ms"}const oJ=o5({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Pf.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||l5(n)},class:"cm-selectionLayer"}),cg={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};s5&&(cg[".cm-line"].caretColor=cg[".cm-content"].caretColor="transparent !important");const sJ=la.highest(Ne.theme(cg)),a5=ot.define({map(n,e){return n==null?null:e.mapPos(n)}}),fc=Tn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(a5)?i.value:t,n)}}),lJ=cn.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(fc);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(fc)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(fc),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(fc)!=n&&this.view.dispatch({effects:a5.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function aJ(){return[fc,lJ]}function e_(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),s=t,l;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)r(s+l.index,l)}function uJ(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class cJ{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(l,a,u,c)=>r(c,u,u+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,u,c)=>{let f=i(l,a,u);f&&c(u,u+l[0].length,f)};else if(i)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new Co,i=t.add.bind(t);for(let{from:r,to:o}of uJ(e,this.maxLength))e_(e.state.doc,this.regexp,r,o,(s,l)=>this.addMatch(l,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(a,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let s=Math.max(o.from,i),l=Math.min(o.to,r);if(l>s){let a=e.state.doc.lineAt(s),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(o.from,a.from),f=Math.min(o.to,u.to);if(this.boundary){for(;s>a.from;s--)if(this.boundary.test(a.text[s-1-a.from])){c=s;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){f=l;break}}let h=[],d,p=(m,g,b)=>h.push(b.range(m,g));if(a==u)for(this.regexp.lastIndex=c-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;)this.addMatch(d,e,d.index+a.from,p);else e_(e.state.doc,this.regexp,c,f,(m,g)=>this.addMatch(g,e,m,p));t=t.update({filterFrom:c,filterTo:f,filter:(m,g)=>m<c||g>f,add:h})}}return t}}const fg=/x/.unicode!=null?"gu":"g",fJ=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,fg),hJ={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let om=null;function dJ(){var n;if(om==null&&typeof document<"u"&&document.body){let e=document.body.style;om=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return om||!1}const id=Ie.define({combine(n){let e=_r(n,{render:null,specialChars:fJ,addSpecialChars:null});return(e.replaceTabs=!dJ())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,fg)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,fg)),e}});function pJ(n={}){return[id.of(n),mJ()]}let t_=null;function mJ(){return t_||(t_=cn.fromClass(class{constructor(n){this.view=n,this.decorations=Xe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(id)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new cJ({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=Qn(e[0],0);if(o==9){let s=r.lineAt(i),l=t.state.tabSize,a=Bu(s.text,l,i-s.from);return Xe.replace({widget:new kJ((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Xe.replace({widget:new yJ(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(id);n.startState.facet(id)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const gJ="";function bJ(n){return n>=32?gJ:n==10?"":String.fromCharCode(9216+n)}class yJ extends al{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=bJ(this.code),i=e.state.phrase("Control character")+" "+(hJ[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class kJ extends al{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function wJ(){return _J}const CJ=Xe.line({class:"cm-activeLine"}),_J=cn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(CJ.range(r.from)),e=r.from)}return Xe.set(t)}},{decorations:n=>n.decorations}),hg=2e3;function SJ(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>hg||t.off>hg||e.col<0||t.col<0){let s=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=r;a++){let u=n.doc.line(a);u.length<=l&&o.push(pe.range(u.from+s,u.to+l))}}else{let s=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=r;a++){let u=n.doc.line(a),c=V1(u.text,s,n.tabSize,!0);if(c<0)o.push(pe.cursor(u.to));else{let f=V1(u.text,l,n.tabSize);o.push(pe.range(u.from+c,u.from+f))}}}return o}function vJ(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function n_(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>hg?-1:r==i.length?vJ(n,e.clientX):Bu(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function xJ(n,e){let t=n_(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let l=n_(n,r);if(!l)return i;let a=SJ(n.state,t,l);return a.length?s?pe.create(a.concat(i.ranges)):pe.create(a):i}}:null}function MJ(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return Ne.mouseSelectionStyle.of((t,i)=>e(i)?xJ(t,i):null)}const AJ={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},EJ={style:"cursor: crosshair"};function OJ(n={}){let[e,t]=AJ[n.key||"Alt"],i=cn.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,Ne.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?EJ:null})]}const Zu="-10000px";class u5{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let s=[],l=t?[]:null;for(let a=0;a<o.length;a++){let u=o[a],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==u.create&&(c=f)}if(c<0)s[a]=this.createTooltipView(u,a?s[a-1]:null),l&&(l[a]=!!u.above);else{let f=s[a]=this.tooltipViews[c];l&&(l[a]=t[c]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)s.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,u)=>t[u]=a),t.length=l.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}}function TJ(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const sm=Ie.define({combine:n=>{var e,t,i;return{position:Be.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||TJ}}}),i_=new WeakMap,lb=cn.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(sm);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new u5(n,n0,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(sm);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=Zu,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(Be.gecko)i=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Zu&&r.style.left=="0px"){let o=r.getBoundingClientRect();i=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(i||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,t=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((r,o)=>{let s=this.manager.tooltipViews[o];return s.getCoords?s.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(sm).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:i,scaleX:r,scaleY:o}=n,s=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:c}=u,f=n.pos[l],h=n.size[l];if(!f||f.bottom<=Math.max(t.top,i.top)||f.top>=Math.min(t.bottom,i.bottom)||f.right<Math.max(t.left,i.left)-.1||f.left>Math.min(t.right,i.right)+.1){c.style.top=Zu;continue}let d=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=h.right-h.left,g=(e=i_.get(u))!==null&&e!==void 0?e:h.bottom-h.top,b=u.offset||PJ,y=this.view.textDirection==Xt.LTR,_=h.width>i.right-i.left?y?i.left:i.right-h.width:y?Math.max(i.left,Math.min(f.left-(d?14:0)+b.x,i.right-m)):Math.min(Math.max(i.left,f.left-m+(d?14:0)-b.x),i.right-m),M=this.above[l];!a.strictSide&&(M?f.top-(h.bottom-h.top)-b.y<i.top:f.bottom+(h.bottom-h.top)+b.y>i.bottom)&&M==i.bottom-f.bottom>f.top-i.top&&(M=this.above[l]=!M);let w=(M?f.top-i.top:i.bottom-f.bottom)-p;if(w<g&&u.resize!==!1){if(w<this.view.defaultLineHeight){c.style.top=Zu;continue}i_.set(u,g),c.style.height=(g=w)/o+"px"}else c.style.height&&(c.style.height="");let S=M?f.top-g-p-b.y:f.bottom+p+b.y,E=_+m;if(u.overlap!==!0)for(let I of s)I.left<E&&I.right>_&&I.top<S+g&&I.bottom>S&&(S=M?I.top-g-2-p:I.bottom+p+2);if(this.position=="absolute"?(c.style.top=(S-n.parent.top)/o+"px",c.style.left=(_-n.parent.left)/r+"px"):(c.style.top=S/o+"px",c.style.left=_/r+"px"),d){let I=f.left+(y?b.x:-b.x)-(_+14-7);d.style.left=I/r+"px"}u.overlap!==!0&&s.push({left:_,top:S,right:E,bottom:S+g}),c.classList.toggle("cm-tooltip-above",M),c.classList.toggle("cm-tooltip-below",!M),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Zu}},{eventObservers:{scroll(){this.maybeMeasure()}}}),DJ=Ne.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),PJ={x:0,y:0},n0=Ie.define({enables:[lb,DJ]}),Fd=Ie.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class i0{static create(e){return new i0(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new u5(e,Fd,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const RJ=n0.compute([Fd],n=>{let e=n.facet(Fd);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:i0.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class NJ{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,o=1;if(i instanceof Ds)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let l=e.coordsAtPos(r);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),u=a&&a.dir==Xt.RTL?-1:1;o=t.x<l.left?-u:u}let s=this.source(e,r,o);if(s!=null&&s.then){let l=this.pending={pos:r};s.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>yi(e.state,a,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(lb),t=e?e.manager.tooltips.findIndex(i=>i.create==i0.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!IJ(o.dom,e)||this.pending){let{pos:s}=r[0]||this.pending,l=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==l?this.view.posAtCoords(this.lastMove)!=s:!BJ(this.view,s,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ch=4;function IJ(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let l=s.getBoundingClientRect();r=Math.min(l.top,r),o=Math.max(l.bottom,o)}return e.clientX>=t-Ch&&e.clientX<=i+Ch&&e.clientY>=r-Ch&&e.clientY<=o+Ch}function BJ(n,e,t,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,l)<r)return!1;let a=n.posAtCoords({x:i,y:r},!1);return a>=e&&a<=t}function LJ(n,e={}){let t=ot.define(),i=Tn.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let l of r){let a=o.changes.mapPos(l.pos,-1,bi.TrackDel);if(a!=null){let u=Object.assign(Object.create(null),l);u.pos=a,u.end!=null&&(u.end=o.changes.mapPos(u.end)),s.push(u)}}r=s}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(FJ)&&(r=[]);return r},provide:r=>Fd.from(r)});return{active:i,extension:[i,cn.define(r=>new NJ(r,n,i,t,e.hoverTime||300)),RJ]}}function c5(n,e){let t=n.plugin(lb);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const FJ=ot.define(),r_=Ie.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Qc(n,e){let t=n.plugin(f5),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const f5=cn.fromClass(class{constructor(n){this.input=n.state.facet(Xc),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(r_);this.top=new _h(n,!0,e.topContainer),this.bottom=new _h(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(r_);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new _h(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new _h(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Xc);if(t!=this.input){let i=t.filter(a=>a),r=[],o=[],s=[],l=[];for(let a of i){let u=this.specs.indexOf(a),c;u<0?(c=a(n.view),l.push(c)):(c=this.panels[u],c.update&&c.update(n)),r.push(c),(c.top?o:s).push(c)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Ne.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class _h{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=o_(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=o_(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function o_(n){let e=n.nextSibling;return n.remove(),e}const Xc=Ie.define({enables:f5});class So extends Gl{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}So.prototype.elementClass="";So.prototype.toDOM=void 0;So.prototype.mapMode=bi.TrackBefore;So.prototype.startSide=So.prototype.endSide=-1;So.prototype.point=!0;const rd=Ie.define(),jJ=Ie.define(),zJ={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ct.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Sc=Ie.define();function h5(n){return[d5(),Sc.of(Object.assign(Object.assign({},zJ),n))]}const dg=Ie.define({combine:n=>n.some(e=>e)});function d5(n){let e=[VJ];return n&&n.fixed===!1&&e.push(dg.of(!0)),e}const VJ=cn.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Sc).map(e=>new l_(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(dg),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(dg)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Ct.iter(this.view.state.facet(rd),this.view.viewport.from),i=[],r=this.gutters.map(o=>new HJ(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let l of o.type)if(l.type==ki.Text&&s){pg(t,i,l.from);for(let a of r)a.line(this.view,l,i);s=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(o.type==ki.Text){pg(t,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Sc),t=n.state.facet(Sc),i=n.docChanged||n.heightChanged||n.viewportChanged||!Ct.eq(n.startState.facet(rd),n.state.facet(rd),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new l_(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Ne.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Xt.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function s_(n){return Array.isArray(n)?n:[n]}function pg(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class HJ{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ct.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==r.elements.length){let l=new p5(e,s,o,i);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,s,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];pg(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(jJ)){let s=o(e,t.widget,t);s&&(r||(r=[])).push(s)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class l_{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let a=o.getBoundingClientRect();s=(a.top+a.bottom)/2}else s=r.clientY;let l=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=s_(t.markers(e)),t.initialSpacer&&(this.spacer=new p5(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=s_(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Ct.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class p5{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),qJ(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let l=s,a=o<t.length?t[o++]:null,u=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,u=!0;break}}else l=this.markers.length;for(;s<l;){let c=this.markers[s++];if(c.toDOM){c.destroy(r);let f=r.nextSibling;r.remove(),r=f}}if(!a)break;a.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),u&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function qJ(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const WJ=Ie.define(),UJ=Ie.define(),Ra=Ie.define({combine(n){return _r(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],s=t[r];i[r]=o?(l,a,u)=>o(l,a,u)||s(l,a,u):s}return i}})}});class lm extends So{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function am(n,e){return n.state.facet(Ra).formatNumber(e,n.state)}const JJ=Sc.compute([Ra],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(WJ)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new lm(am(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(UJ)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Ra)!=e.state.facet(Ra),initialSpacer(e){return new lm(am(e,a_(e.state.doc.lines)))},updateSpacer(e,t){let i=am(t.view,a_(t.view.state.doc.lines));return i==e.number?e:new lm(i)},domEventHandlers:n.facet(Ra).domEventHandlers}));function KJ(n={}){return[Ra.of(n),d5(),JJ]}function a_(n){let e=9;for(;e<n;)e=e*10+9;return e}const GJ=new class extends So{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},QJ=rd.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(GJ.range(r)))}return Ct.of(e)});function XJ(){return QJ}const m5=1024;let YJ=0;class um{constructor(e,t){this.from=e,this.to=t}}class gt{constructor(e={}){this.id=YJ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=wr.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}gt.closedBy=new gt({deserialize:n=>n.split(" ")});gt.openedBy=new gt({deserialize:n=>n.split(" ")});gt.group=new gt({deserialize:n=>n.split(" ")});gt.isolate=new gt({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});gt.contextHash=new gt({perNode:!0});gt.lookAhead=new gt({perNode:!0});gt.mounted=new gt({perNode:!0});class jd{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[gt.mounted.id]}}const ZJ=Object.create(null);let wr=class g5{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):ZJ,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new g5(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(gt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(gt.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?i.name:r[o]];if(s)return s}}}};wr.none=new wr("",Object.create(null),0,8);class ab{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let s=o(i);s&&(r||(r=Object.assign({},i.props)),r[s[0].id]=s[1])}t.push(r?new wr(i.name,r,i.id,i.flags):i)}return new ab(t)}}const Sh=new WeakMap,u_=new WeakMap;var Bn;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Bn||(Bn={}));class _n{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,l]of o)this.props[typeof s=="number"?s:s.id]=l}}toString(){let e=jd.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new gg(this.topNode,e)}cursorAt(e,t=0,i=0){let r=Sh.get(this)||this.topNode,o=new gg(r);return o.moveTo(e,t),Sh.set(this,o._tree),o}get topNode(){return new pr(this,0,0,null)}resolve(e,t=0){let i=Yc(Sh.get(this)||this.topNode,e,t,!1);return Sh.set(this,i),i}resolveInner(e,t=0){let i=Yc(u_.get(this)||this.topNode,e,t,!0);return u_.set(this,i),i}resolveStack(e,t=0){return tK(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,s=e.mode||0,l=(s&Bn.IncludeAnonymous)>0;for(let a=this.cursor(s|Bn.IncludeAnonymous);;){let u=!1;if(a.from<=o&&a.to>=r&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:fb(wr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new _n(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new _n(wr.none,t,i,r)))}static build(e){return nK(e)}}_n.empty=new _n(wr.none,[],[],0);class ub{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ub(this.buffer,this.index)}}class tl{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return wr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,r,o){let{buffer:s}=this,l=-1;for(let a=e;a!=t&&!(b5(o,r,s[a+1],s[a+2])&&(l=a,i>0));a=s[a+3]);return l}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),s=0;for(let l=e,a=0;l<t;){o[a++]=r[l++],o[a++]=r[l++]-i;let u=o[a++]=r[l++]-i;o[a++]=r[l++]-e,s=Math.max(s,u)}return new tl(o,s,this.set)}}function b5(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Yc(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!i&&n instanceof pr&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:Bn.IgnoreOverlays;if(i)for(let s=n,l=s.parent;l;s=l,l=s.parent)s instanceof pr&&s.index<0&&((r=l.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=l);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class y5{cursor(e=0){return new gg(this,e)}getChild(e,t=null,i=null){let r=c_(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return c_(this,e,t,i)}resolve(e,t=0){return Yc(this,e,t,!1)}resolveInner(e,t=0){return Yc(this,e,t,!0)}matchContext(e){return mg(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class pr extends y5{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let s=this;;){for(let{children:l,positions:a}=s._tree,u=t>0?l.length:-1;e!=u;e+=t){let c=l[e],f=a[e]+s.from;if(b5(r,i,f,f+c.length)){if(c instanceof tl){if(o&Bn.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,t,i-f,r);if(h>-1)return new Rs(new $J(s,c,e,f),null,h)}else if(o&Bn.IncludeAnonymous||!c.type.isAnonymous||cb(c)){let h;if(!(o&Bn.IgnoreMounts)&&(h=jd.get(c))&&!h.overlay)return new pr(h.tree,f,e,s);let d=new pr(c,f,e,s);return o&Bn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?c.children.length-1:0,t,i,r)}}}if(o&Bn.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Bn.IgnoreOverlays)&&(r=jd.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:s,to:l}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?l>=o:l>o))return new pr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function c_(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function mg(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class $J{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Rs extends y5{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new Rs(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Bn.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Rs(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Rs(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Rs(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];e.push(i.slice(r,o,s)),t.push(0)}return new _n(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function k5(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let i=t instanceof pr&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new eK(r,t)}class eK{constructor(e,t){this.heads=e,this.node=t}get next(){return k5(this.heads)}}function tK(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof pr?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(e,t)),o=s}else{let s=jd.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let l=new pr(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(Yc(l,e,t,!1))}}return r?k5(r):i}class gg{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof pr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof pr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Bn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Bn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Bn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let l=i._tree.children[o];if(this.mode&Bn.IncludeAnonymous||l instanceof tl||!l.type.isAnonymous||cb(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new Rs(this.buffer,t,this.stack[r]);return this.bufferNode=new Rs(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return mg(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return mg(this._tree,e,r);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function cb(n){return n.children.some(e=>e instanceof tl||!e.type.isAnonymous||cb(e))}function nK(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=m5,reused:o=[],minRepeatType:s=i.types.length}=n,l=Array.isArray(t)?new ub(t,t.length):t,a=i.types,u=0,c=0;function f(w,S,E,I,O,P){let{id:A,start:H,end:W,size:q}=l,L=c,X=u;for(;q<0;)if(l.next(),q==-1){let J=o[A];E.push(J),I.push(H-w);return}else if(q==-3){u=A;return}else if(q==-4){c=A;return}else throw new RangeError(`Unrecognized record size: ${q}`);let Y=a[A],G,T,B=H-w;if(W-H<=r&&(T=g(l.pos-S,O))){let J=new Uint16Array(T.size-T.skip),ne=l.pos-T.size,_e=J.length;for(;l.pos>ne;)_e=b(T.start,J,_e);G=new tl(J,W-T.start,i),B=T.start-w}else{let J=l.pos-q;l.next();let ne=[],_e=[],ae=A>=s?A:-1,Te=0,re=W;for(;l.pos>J;)ae>=0&&l.id==ae&&l.size>=0?(l.end<=re-r&&(p(ne,_e,H,Te,l.end,re,ae,L,X),Te=ne.length,re=l.end),l.next()):P>2500?h(H,J,ne,_e):f(H,J,ne,_e,ae,P+1);if(ae>=0&&Te>0&&Te<ne.length&&p(ne,_e,H,Te,H,re,ae,L,X),ne.reverse(),_e.reverse(),ae>-1&&Te>0){let U=d(Y,X);G=fb(Y,ne,_e,0,ne.length,0,W-H,U,U)}else G=m(Y,ne,_e,W-H,L-W,X)}E.push(G),I.push(B)}function h(w,S,E,I){let O=[],P=0,A=-1;for(;l.pos>S;){let{id:H,start:W,end:q,size:L}=l;if(L>4)l.next();else{if(A>-1&&W<A)break;A<0&&(A=q-r),O.push(H,W,q),P++,l.next()}}if(P){let H=new Uint16Array(P*4),W=O[O.length-2];for(let q=O.length-3,L=0;q>=0;q-=3)H[L++]=O[q],H[L++]=O[q+1]-W,H[L++]=O[q+2]-W,H[L++]=L;E.push(new tl(H,O[2]-W,i)),I.push(W-w)}}function d(w,S){return(E,I,O)=>{let P=0,A=E.length-1,H,W;if(A>=0&&(H=E[A])instanceof _n){if(!A&&H.type==w&&H.length==O)return H;(W=H.prop(gt.lookAhead))&&(P=I[A]+H.length+W)}return m(w,E,I,O,P,S)}}function p(w,S,E,I,O,P,A,H,W){let q=[],L=[];for(;w.length>I;)q.push(w.pop()),L.push(S.pop()+E-O);w.push(m(i.types[A],q,L,P-O,H-P,W)),S.push(O-E)}function m(w,S,E,I,O,P,A){if(P){let H=[gt.contextHash,P];A=A?[H].concat(A):[H]}if(O>25){let H=[gt.lookAhead,O];A=A?[H].concat(A):[H]}return new _n(w,S,E,I,A)}function g(w,S){let E=l.fork(),I=0,O=0,P=0,A=E.end-r,H={size:0,start:0,skip:0};e:for(let W=E.pos-w;E.pos>W;){let q=E.size;if(E.id==S&&q>=0){H.size=I,H.start=O,H.skip=P,P+=4,I+=4,E.next();continue}let L=E.pos-q;if(q<0||L<W||E.start<A)break;let X=E.id>=s?4:0,Y=E.start;for(E.next();E.pos>L;){if(E.size<0)if(E.size==-3)X+=4;else break e;else E.id>=s&&(X+=4);E.next()}O=Y,I+=q,P+=X}return(S<0||I==w)&&(H.size=I,H.start=O,H.skip=P),H.size>4?H:void 0}function b(w,S,E){let{id:I,start:O,end:P,size:A}=l;if(l.next(),A>=0&&I<s){let H=E;if(A>4){let W=l.pos-(A-4);for(;l.pos>W;)E=b(w,S,E)}S[--E]=H,S[--E]=P-w,S[--E]=O-w,S[--E]=I}else A==-3?u=I:A==-4&&(c=I);return E}let y=[],_=[];for(;l.pos>0;)f(n.start||0,n.bufferStart||0,y,_,-1,0);let M=(e=n.length)!==null&&e!==void 0?e:y.length?_[0]+y[0].length:0;return new _n(a[n.topID],y.reverse(),_.reverse(),M)}const f_=new WeakMap;function od(n,e){if(!n.isAnonymous||e instanceof tl||e.type!=n)return 1;let t=f_.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof _n)){t=1;break}t+=od(n,i)}f_.set(e,t)}return t}function fb(n,e,t,i,r,o,s,l,a){let u=0;for(let p=i;p<r;p++)u+=od(n,e[p]);let c=Math.ceil(u*1.5/8),f=[],h=[];function d(p,m,g,b,y){for(let _=g;_<b;){let M=_,w=m[_],S=od(n,p[_]);for(_++;_<b;_++){let E=od(n,p[_]);if(S+E>=c)break;S+=E}if(_==M+1){if(S>c){let E=p[M];d(E.children,E.positions,0,E.children.length,m[M]+y);continue}f.push(p[M])}else{let E=m[_-1]+p[_-1].length-w;f.push(fb(n,p,m,M,_,w,E,null,a))}h.push(w+y-o)}}return d(e,t,i,r,0),(l||a)(f,h,s)}class Pl{constructor(e,t,i,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new Pl(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<t.length?t[l]:null,f=c?c.fromA:1e9;if(f-a>=i)for(;s&&s.from<f;){let h=s;if(a>=h.from||f<=h.to||u){let d=Math.max(h.from,a)-u,p=Math.min(h.to,f)-u;h=d>=p?null:new Pl(d,p,h.tree,h.offset+u,l>0,!!c)}if(h&&r.push(h),s.to>f)break;s=o<e.length?e[o++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return r}}class w5{startParse(e,t,i){return typeof e=="string"&&(e=new iK(e)),i=i?i.length?i.map(r=>new um(r.from,r.to)):[new um(0,0)]:[new um(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class iK{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new gt({perNode:!0});let rK=0;class rr{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=rK++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof rr&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let r=new rr(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new zd(e);return i=>i.modified.indexOf(t)>-1?i:zd.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let oK=0;class zd{constructor(e){this.name=e,this.instances=[],this.id=oK++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&sK(t,l.modified));if(i)return i;let r=[],o=new rr(e.name,r,e,t);for(let l of t)l.instances.push(o);let s=lK(t);for(let l of e.set)if(!l.modified.length)for(let a of s)r.push(zd.get(l,a));return o}}function sK(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function lK(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function C5(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],s=2,l=r;for(let f=0;;){if(l=="..."&&f>0&&f+3==r.length){s=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+r);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==r.length)break;let d=r[f++];if(f==r.length&&d=="!"){s=0;break}if(d!="/")throw new RangeError("Invalid path: "+r);l=r.slice(f)}let a=o.length-1,u=o[a];if(!u)throw new RangeError("Invalid path: "+r);let c=new Vd(i,s,a>0?o.slice(0,a):null);e[u]=c.sort(e[u])}}return _5.add(e)}const _5=new gt;class Vd{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Vd.empty=new Vd([],2,null);function S5(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let s=r;for(let l of o)for(let a of l.set){let u=t[a.id];if(u){s=s?s+" "+u:u;break}}return s},scope:i}}function aK(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function uK(n,e,t,i=0,r=n.length){let o=new cK(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class cK{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:s,from:l,to:a}=e;if(l>=i||a<=t)return;s.isTop&&(o=this.highlighters.filter(d=>!d.scope||d.scope(s)));let u=r,c=fK(e)||Vd.empty,f=aK(o,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(r+=(r?" ":"")+f)),this.startSpan(Math.max(t,l),u),c.opaque)return;let h=e.tree&&e.tree.prop(gt.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+l,1),p=this.highlighters.filter(g=>!g.scope||g.scope(h.tree.type)),m=e.firstChild();for(let g=0,b=l;;g++){let y=g<h.overlay.length?h.overlay[g]:null,_=y?y.from+l:a,M=Math.max(t,b),w=Math.min(i,_);if(M<w&&m)for(;e.from<w&&(this.highlightRange(e,M,w,r,o),this.startSpan(Math.min(w,e.to),u),!(e.to>=_||!e.nextSibling())););if(!y||_>i)break;b=y.to+l,b>t&&(this.highlightRange(d.cursor(),Math.max(t,y.from+l),Math.min(i,b),"",p),this.startSpan(Math.min(i,b),u))}m&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function fK(n){let e=n.type.prop(_5);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const Oe=rr.define,vh=Oe(),ks=Oe(),h_=Oe(ks),d_=Oe(ks),ws=Oe(),xh=Oe(ws),cm=Oe(ws),io=Oe(),wl=Oe(io),to=Oe(),no=Oe(),bg=Oe(),$u=Oe(bg),Mh=Oe(),ve={comment:vh,lineComment:Oe(vh),blockComment:Oe(vh),docComment:Oe(vh),name:ks,variableName:Oe(ks),typeName:h_,tagName:Oe(h_),propertyName:d_,attributeName:Oe(d_),className:Oe(ks),labelName:Oe(ks),namespace:Oe(ks),macroName:Oe(ks),literal:ws,string:xh,docString:Oe(xh),character:Oe(xh),attributeValue:Oe(xh),number:cm,integer:Oe(cm),float:Oe(cm),bool:Oe(ws),regexp:Oe(ws),escape:Oe(ws),color:Oe(ws),url:Oe(ws),keyword:to,self:Oe(to),null:Oe(to),atom:Oe(to),unit:Oe(to),modifier:Oe(to),operatorKeyword:Oe(to),controlKeyword:Oe(to),definitionKeyword:Oe(to),moduleKeyword:Oe(to),operator:no,derefOperator:Oe(no),arithmeticOperator:Oe(no),logicOperator:Oe(no),bitwiseOperator:Oe(no),compareOperator:Oe(no),updateOperator:Oe(no),definitionOperator:Oe(no),typeOperator:Oe(no),controlOperator:Oe(no),punctuation:bg,separator:Oe(bg),bracket:$u,angleBracket:Oe($u),squareBracket:Oe($u),paren:Oe($u),brace:Oe($u),content:io,heading:wl,heading1:Oe(wl),heading2:Oe(wl),heading3:Oe(wl),heading4:Oe(wl),heading5:Oe(wl),heading6:Oe(wl),contentSeparator:Oe(io),list:Oe(io),quote:Oe(io),emphasis:Oe(io),strong:Oe(io),link:Oe(io),monospace:Oe(io),strikethrough:Oe(io),inserted:Oe(),deleted:Oe(),changed:Oe(),invalid:Oe(),meta:Mh,documentMeta:Oe(Mh),annotation:Oe(Mh),processingInstruction:Oe(Mh),definition:rr.defineModifier("definition"),constant:rr.defineModifier("constant"),function:rr.defineModifier("function"),standard:rr.defineModifier("standard"),local:rr.defineModifier("local"),special:rr.defineModifier("special")};for(let n in ve){let e=ve[n];e instanceof rr&&(e.name=n)}S5([{tag:ve.link,class:"tok-link"},{tag:ve.heading,class:"tok-heading"},{tag:ve.emphasis,class:"tok-emphasis"},{tag:ve.strong,class:"tok-strong"},{tag:ve.keyword,class:"tok-keyword"},{tag:ve.atom,class:"tok-atom"},{tag:ve.bool,class:"tok-bool"},{tag:ve.url,class:"tok-url"},{tag:ve.labelName,class:"tok-labelName"},{tag:ve.inserted,class:"tok-inserted"},{tag:ve.deleted,class:"tok-deleted"},{tag:ve.literal,class:"tok-literal"},{tag:ve.string,class:"tok-string"},{tag:ve.number,class:"tok-number"},{tag:[ve.regexp,ve.escape,ve.special(ve.string)],class:"tok-string2"},{tag:ve.variableName,class:"tok-variableName"},{tag:ve.local(ve.variableName),class:"tok-variableName tok-local"},{tag:ve.definition(ve.variableName),class:"tok-variableName tok-definition"},{tag:ve.special(ve.variableName),class:"tok-variableName2"},{tag:ve.definition(ve.propertyName),class:"tok-propertyName tok-definition"},{tag:ve.typeName,class:"tok-typeName"},{tag:ve.namespace,class:"tok-namespace"},{tag:ve.className,class:"tok-className"},{tag:ve.macroName,class:"tok-macroName"},{tag:ve.propertyName,class:"tok-propertyName"},{tag:ve.operator,class:"tok-operator"},{tag:ve.comment,class:"tok-comment"},{tag:ve.meta,class:"tok-meta"},{tag:ve.invalid,class:"tok-invalid"},{tag:ve.punctuation,class:"tok-punctuation"}]);var fm;const Na=new gt;function hK(n){return Ie.define({combine:n?e=>e.concat(n):void 0})}const dK=new gt;class Nr{constructor(e,t,i=[],r=""){this.data=e,this.name=r,Ht.prototype.hasOwnProperty("tree")||Object.defineProperty(Ht.prototype,"tree",{get(){return di(this)}}),this.parser=t,this.extension=[nl.of(this),Ht.languageData.of((o,s,l)=>{let a=p_(o,s,l),u=a.type.prop(Na);if(!u)return[];let c=o.facet(u),f=a.type.prop(dK);if(f){let h=a.resolve(s-a.from,l);for(let d of f)if(d.test(h,o)){let p=o.facet(d.facet);return d.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,t,i=-1){return p_(e,t,i).type.prop(Na)==this.data}findRegions(e){let t=e.facet(nl);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(Na)==this.data){i.push({from:s,to:s+o.length});return}let l=o.prop(gt.mounted);if(l){if(l.tree.prop(Na)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+s,to:a.to+s});else i.push({from:s,to:s+o.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+s),i.length>a)return}}for(let a=0;a<o.children.length;a++){let u=o.children[a];u instanceof _n&&r(u,o.positions[a]+s)}};return r(di(e),0),i}get allowsNesting(){return!0}}Nr.setState=ot.define();function p_(n,e,t){let i=n.facet(nl),r=di(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,Bn.ExcludeBuffers))o.type.isTop&&(r=o);return r}class Hd extends Nr{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=hK(e.languageData);return new Hd(t,e.parser.configure({props:[Na.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Hd(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function di(n){let e=n.field(Nr.state,!1);return e?e.tree:_n.empty}class pK{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let ec=null,mK=class yg{constructor(e,t,i=[],r,o,s,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new yg(e,t,[],_n.empty,0,i,[],null)}startParse(){return this.parser.startParse(new pK(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=_n.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Pl.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Pl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ec;ec=this;try{return e()}finally{ec=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=m_(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,f,h)=>a.push({fromA:u,toA:c,fromB:f,toB:h})),i=Pl.applyChanges(i,a),r=_n.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&l.push({from:c,to:f})}}}return new yg(this.parser,t,i,r,o,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=m_(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends w5{createParse(t,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let a=ec;if(a){for(let u of r)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=s,new _n(wr.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ec}};function m_(n,e,t){return Pl.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class bu{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new bu(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=mK.create(e.facet(nl).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new bu(i)}}Nr.state=Tn.define({create:bu.init,update(n,e){for(let t of e.effects)if(t.is(Nr.setState))return t.value;return e.startState.facet(nl)!=e.state.facet(nl)?bu.init(e.state):n.apply(e)}});let v5=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(v5=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const hm=typeof navigator<"u"&&(!((fm=navigator.scheduling)===null||fm===void 0)&&fm.isInputPending)?()=>navigator.scheduling.isInputPending():null,gK=cn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Nr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Nr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=v5(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(Nr.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!hm?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<r&&i.doc.length>r+1e3,a=o.context.work(()=>hm&&hm()||Date.now()>s,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Nr.setState.of(new bu(o.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>yi(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),nl=Ie.define({combine(n){return n.length?n[0]:null},enables:n=>[Nr.state,gK,Ne.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class bK{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const yK=Ie.define(),r0=Ie.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function il(n){let e=n.facet(r0);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Zc(n,e){let t="",i=n.tabSize,r=n.facet(r0)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function hb(n,e){n instanceof Ht&&(n=new o0(n));for(let i of n.state.facet(yK)){let r=i(n,e);if(r!==void 0)return r}let t=di(n.state);return t.length>=e?kK(n,t,e):null}class o0{constructor(e,t={}){this.state=e,this.options=t,this.unit=il(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return Bu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const x5=new gt;function kK(n,e,t){let i=e.resolveStack(t),r=i.node.enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let s=r;s!=i.node;s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return M5(i,n,t)}function M5(n,e,t){for(let i=n;i;i=i.next){let r=CK(i.node);if(r)return r(db.create(e,t,i))}return 0}function wK(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function CK(n){let e=n.type.prop(x5);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(gt.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>xK(s,!0,1,void 0,o&&!wK(s)?r.from:void 0)}return n.parent==null?_K:null}function _K(){return 0}class db extends o0{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new db(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(SK(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return M5(this.context.next,this.base,this.pos)}}function SK(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function vK(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=s)return null;let u=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+u}}l=a.to}}function xK(n,e,t,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,l=i&&o.slice(s,s+i.length)==i||r==n.pos+s,a=e?vK(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}function g_({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const MK=200;function AK(){return Ht.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+MK)return n;let o=t.sliceString(r.from,i);if(!e.some(u=>u.test(o)))return n;let{state:s}=n,l=-1,a=[];for(let{head:u}of s.selection.ranges){let c=s.doc.lineAt(u);if(c.from==l)continue;l=c.from;let f=hb(s,c.from);if(f==null)continue;let h=/^\s*/.exec(c.text)[0],d=Zc(s,f);h!=d&&a.push({from:c.from,to:c.from+h.length,insert:d})}return a.length?[n,{changes:a,sequential:!0}]:n})}const EK=Ie.define(),A5=new gt;function OK(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function TK(n,e,t){let i=di(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let s=r;s;s=s.next){let l=s.node;if(l.to<=t||l.from>t)continue;if(o&&l.from<e)break;let a=l.type.prop(A5);if(a&&(l.to<i.length-50||i.length==n.doc.length||!DK(l))){let u=a(l,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(o=u)}}return o}function DK(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function qd(n,e,t){for(let i of n.facet(EK)){let r=i(n,e,t);if(r)return r}return TK(n,e,t)}function E5(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const s0=ot.define({map:E5}),Rf=ot.define({map:E5});function O5(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Zl=Tn.define({create(){return Xe.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(s0)&&!PK(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(pb),r=i?Xe.replace({widget:new jK(i(e.state,t.value))}):b_;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(Rf)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(r,o)=>{r<i&&o>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(r,o)=>o<=i||r>=i}))}return n},provide:n=>Ne.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(b_.range(i,r))}return Xe.set(e,!0)}});function Wd(n,e,t){var i;let r=null;return(i=n.field(Zl,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function PK(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function T5(n,e){return n.field(Zl,!1)?e:e.concat(ot.appendConfig.of(P5()))}const RK=n=>{for(let e of O5(n)){let t=qd(n.state,e.from,e.to);if(t)return n.dispatch({effects:T5(n.state,[s0.of(t),D5(n,t)])}),!0}return!1},NK=n=>{if(!n.state.field(Zl,!1))return!1;let e=[];for(let t of O5(n)){let i=Wd(n.state,t.from,t.to);i&&e.push(Rf.of(i),D5(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function D5(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return Ne.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const IK=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=qd(e,r.from,r.to);o&&t.push(s0.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:T5(n.state,t)}),!!t.length},BK=n=>{let e=n.state.field(Zl,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(Rf.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},LK=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:RK},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:NK},{key:"Ctrl-Alt-[",run:IK},{key:"Ctrl-Alt-]",run:BK}],FK={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},pb=Ie.define({combine(n){return _r(n,FK)}});function P5(n){let e=[Zl,HK];return n&&e.push(pb.of(n)),e}function R5(n,e){let{state:t}=n,i=t.facet(pb),r=s=>{let l=n.lineBlockAt(n.posAtDOM(s.target)),a=Wd(n.state,l.from,l.to);a&&n.dispatch({effects:Rf.of(a)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const b_=Xe.replace({widget:new class extends al{toDOM(n){return R5(n,null)}}});class jK extends al{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return R5(e,this.value)}}const zK={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class dm extends So{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function VK(n={}){let e=Object.assign(Object.assign({},zK),n),t=new dm(e,!0),i=new dm(e,!1),r=cn.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(nl)!=s.state.facet(nl)||s.startState.field(Zl,!1)!=s.state.field(Zl,!1)||di(s.startState)!=di(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new Co;for(let a of s.viewportLineBlocks){let u=Wd(s.state,a.from,a.to)?i:qd(s.state,a.from,a.to)?t:null;u&&l.add(a.from,a.from,u)}return l.finish()}}),{domEventHandlers:o}=e;return[r,h5({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(r))===null||l===void 0?void 0:l.markers)||Ct.empty},initialSpacer(){return new dm(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,l,a)=>{if(o.click&&o.click(s,l,a))return!0;let u=Wd(s.state,l.from,l.to);if(u)return s.dispatch({effects:Rf.of(u)}),!0;let c=qd(s.state,l.from,l.to);return c?(s.dispatch({effects:s0.of(c)}),!0):!1}})}),P5()]}const HK=Ne.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Nf{constructor(e,t){this.specs=e;let i;function r(l){let a=$s.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof Nr?l=>l.prop(Na)==s.data:s?l=>l==s:void 0,this.style=S5(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=i?new $s(i):null,this.themeType=t.themeType}static define(e,t){return new Nf(e,t||{})}}const kg=Ie.define(),N5=Ie.define({combine(n){return n.length?[n[0]]:null}});function pm(n){let e=n.facet(kg);return e.length?e:n.facet(N5)}function I5(n,e){let t=[WK],i;return n instanceof Nf&&(n.module&&t.push(Ne.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(N5.of(n)):i?t.push(kg.computeN([Ne.darkTheme],r=>r.facet(Ne.darkTheme)==(i=="dark")?[n]:[])):t.push(kg.of(n)),t}class qK{constructor(e){this.markCache=Object.create(null),this.tree=di(e.state),this.decorations=this.buildDeco(e,pm(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=di(e.state),i=pm(e.state),r=i!=pm(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Xe.none;let i=new Co;for(let{from:r,to:o}of e.visibleRanges)uK(this.tree,t,(s,l,a)=>{i.add(s,l,this.markCache[a]||(this.markCache[a]=Xe.mark({class:a})))},r,o);return i.finish()}}const WK=la.high(cn.fromClass(qK,{decorations:n=>n.decorations})),UK=Nf.define([{tag:ve.meta,color:"#404740"},{tag:ve.link,textDecoration:"underline"},{tag:ve.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ve.emphasis,fontStyle:"italic"},{tag:ve.strong,fontWeight:"bold"},{tag:ve.strikethrough,textDecoration:"line-through"},{tag:ve.keyword,color:"#708"},{tag:[ve.atom,ve.bool,ve.url,ve.contentSeparator,ve.labelName],color:"#219"},{tag:[ve.literal,ve.inserted],color:"#164"},{tag:[ve.string,ve.deleted],color:"#a11"},{tag:[ve.regexp,ve.escape,ve.special(ve.string)],color:"#e40"},{tag:ve.definition(ve.variableName),color:"#00f"},{tag:ve.local(ve.variableName),color:"#30a"},{tag:[ve.typeName,ve.namespace],color:"#085"},{tag:ve.className,color:"#167"},{tag:[ve.special(ve.variableName),ve.macroName],color:"#256"},{tag:ve.definition(ve.propertyName),color:"#00c"},{tag:ve.comment,color:"#940"},{tag:ve.invalid,color:"#f00"}]),JK=Ne.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),B5=1e4,L5="()[]{}",F5=Ie.define({combine(n){return _r(n,{afterCursor:!0,brackets:L5,maxScanDistance:B5,renderMatch:QK})}}),KK=Xe.mark({class:"cm-matchingBracket"}),GK=Xe.mark({class:"cm-nonmatchingBracket"});function QK(n){let e=[],t=n.matched?KK:GK;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const XK=Tn.define({create(){return Xe.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(F5);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=lo(e.state,r.head,-1,i)||r.head>0&&lo(e.state,r.head-1,1,i)||i.afterCursor&&(lo(e.state,r.head,1,i)||r.head<e.state.doc.length&&lo(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return Xe.set(t,!0)},provide:n=>Ne.decorations.from(n)}),YK=[XK,JK];function ZK(n={}){return[F5.of(n),YK]}const $K=new gt;function wg(n,e,t){let i=n.prop(e<0?gt.openedBy:gt.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function Cg(n){let e=n.type.prop($K);return e?e(n.node):n}function lo(n,e,t,i={}){let r=i.maxScanDistance||B5,o=i.brackets||L5,s=di(n),l=s.resolveInner(e,t);for(let a=l;a;a=a.parent){let u=wg(a.type,t,o);if(u&&a.from<a.to){let c=Cg(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return eG(n,e,t,a,c,u,o)}}return tG(n,e,t,s,l.type,r,o)}function eG(n,e,t,i,r,o,s){let l=i.parent,a={from:r.from,to:r.to},u=0,c=l==null?void 0:l.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(u==0&&o.indexOf(c.type.name)>-1&&c.from<c.to){let f=Cg(c);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(wg(c.type,t,s))u++;else if(wg(c.type,-t,s)){if(u==0){let f=Cg(c);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function tG(n,e,t,i,r,o,s){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=s.indexOf(l);if(a<0||a%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let h=0;!c.next().done&&h<=o;){let d=c.value;t<0&&(h+=d.length);let p=e+h*t;for(let m=t>0?0:d.length-1,g=t>0?d.length:-1;m!=g;m+=t){let b=s.indexOf(d[m]);if(!(b<0||i.resolveInner(p+m,1).type!=r))if(b%2==0==t>0)f++;else{if(f==1)return{start:u,end:{from:p+m,to:p+m+1},matched:b>>1==a>>1};f--}}t>0&&(h+=d.length)}return c.done?{start:u,matched:!1}:null}const nG=Object.create(null),y_=[wr.none],k_=[],w_=Object.create(null),iG=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])iG[n]=rG(nG,e);function mm(n,e){k_.indexOf(n)>-1||(k_.push(n),console.warn(e))}function rG(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let c=n[u]||ve[u];c?typeof c=="function"?a.length?a=a.map(c):mm(u,`Modifier ${u} used at start of tag`):a.length?mm(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:mm(u,`Unknown highlighting tag ${u}`)}for(let u of a)t.push(u)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(l=>l.id),o=w_[r];if(o)return o.id;let s=w_[r]=wr.define({id:y_.length,name:i,props:[C5({[i]:t})]});return y_.push(s),s.id}Xt.RTL,Xt.LTR;const oG=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=gb(n.state,t.from);return i.line?sG(n):i.block?aG(n):!1};function mb(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const sG=mb(fG,0),lG=mb(j5,0),aG=mb((n,e)=>j5(n,e,cG(e)),0);function gb(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const tc=50;function uG(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-tc,i),s=n.sliceDoc(r,r+tc),l=/\s*$/.exec(o)[0].length,a=/^\s*/.exec(s)[0].length,u=o.length-l;if(o.slice(u-e.length,u)==e&&s.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let c,f;r-i<=2*tc?c=f=n.sliceDoc(i,r):(c=n.sliceDoc(i,i+tc),f=n.sliceDoc(r-tc,r));let h=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-t.length;return c.slice(h,h+e.length)==e&&f.slice(p,p+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-d-t.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function cG(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function j5(n,e,t=e.selection.ranges){let i=t.map(o=>gb(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,s)=>uG(e,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,l;s<r.length;s++)if(l=r[s]){let a=i[s],{open:u,close:c}=l;o.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:o}}return null}function fG(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of t){let l=i.length,a=1e9,u=gb(e,o).line;if(u){for(let c=o;c<=s;){let f=e.doc.lineAt(c);if(f.from>r&&(o==s||s>f.from)){r=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,p=f.text.slice(h,h+u.length)==u?h:-1;h<f.text.length&&h<a&&(a=h),i.push({line:f,comment:p,token:u,indent:h,empty:d,single:!1})}c=f.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:a,indent:u,empty:c,single:f}of i)(f||!c)&&o.push({from:l.from+u,insert:a+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:a}of i)if(l>=0){let u=s.from+l,c=u+a.length;s.text[c-s.from]==" "&&c++,o.push({from:u,to:c})}return{changes:o}}return null}const _g=hs.define(),hG=hs.define(),dG=Ie.define(),z5=Ie.define({combine(n){return _r(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),bb=Tn.define({create(){return vc.empty},update(n,e){let t=e.state.facet(z5),i=e.annotation(_g);if(i){let a=Ti.fromTransaction(e,i.selection),u=i.side,c=u==0?n.undone:n.done;return a?c=Jd(c,c.length,t.minDepth,a):c=q5(c,e.startState.selection),new vc(u==0?i.rest:c,u==0?c:i.rest)}let r=e.annotation(hG);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(Di.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Ti.fromTransaction(e),s=e.annotation(Di.time),l=e.annotation(Di.userEvent);return o?n=n.addChanges(o,s,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,l,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new vc(n.done.map(Ti.fromJSON),n.undone.map(Ti.fromJSON))}});function pG(n={}){return[bb,z5.of(n),Ne.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?yb:e.inputType=="historyRedo"?Ud:null;return i?(e.preventDefault(),i(t)):!1}})]}function l0(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(bb,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const yb=l0(0,!1),Ud=l0(1,!1),mG=l0(0,!0),gG=l0(1,!0);function V5(n){return function(e){let t=e.field(bb,!1);if(!t)return 0;let i=n==0?t.done:t.undone;return i.length-(i.length&&!i[0].changes?1:0)}}const bG=V5(0),yG=V5(1);class Ti{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new Ti(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Ti(e.changes&&En.fromJSON(e.changes),[],e.mapped&&go.fromJSON(e.mapped),e.startSelection&&pe.fromJSON(e.startSelection),e.selectionsAfter.map(pe.fromJSON))}static fromTransaction(e,t){let i=ar;for(let r of e.startState.facet(dG)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Ti(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,ar)}static selection(e){return new Ti(void 0,ar,void 0,void 0,e)}}function Jd(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function kG(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,l)=>{for(let a=0;a<t.length;){let u=t[a++],c=t[a++];l>=u&&s<=c&&(i=!0)}}),i}function wG(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function H5(n,e){return n.length?e.length?n.concat(e):n:e}const ar=[],CG=200;function q5(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-CG));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Jd(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Ti.selection([e])]}function _G(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function gm(n,e){if(!n.length)return n;let t=n.length,i=ar;for(;t;){let r=SG(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Ti.selection(i)]:ar}function SG(n,e,t){let i=H5(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):ar,t);if(!n.changes)return Ti.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new Ti(r,ot.mapEffects(n.effects,e),s,n.startSelection.map(o),i)}const vG=/^(input\.type|delete)($|\.)/;let vc=class hc{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new hc(this.done,this.undone):this}addChanges(e,t,i,r,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||vG.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,kG(l.changes,e.changes))||i=="input.type.compose")?s=Jd(s,s.length-1,r.minDepth,new Ti(e.changes.compose(l.changes),H5(ot.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,ar)):s=Jd(s,s.length,r.minDepth,e),new hc(s,ar,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:ar;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&wG(o[o.length-1],e)?this:new hc(q5(this.done,e),this.undone,t,i)}addMapping(e){return new hc(gm(this.done,e),gm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],s=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:_g.of({side:e,rest:_G(r),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=r.length==1?ar:r.slice(0,r.length-1);return o.mapped&&(l=gm(l,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:_g.of({side:e,rest:l,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};vc.empty=new vc(ar,ar);const xG=[{key:"Mod-z",run:yb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ud,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ud,preventDefault:!0},{key:"Mod-u",run:mG,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:gG,preventDefault:!0}];function Lu(n,e){return pe.create(n.ranges.map(e),n.mainIndex)}function Ao(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Kr({state:n,dispatch:e},t){let i=Lu(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Ao(n,i)),!0)}function a0(n,e){return pe.cursor(e?n.to:n.from)}function W5(n,e){return Kr(n,t=>t.empty?n.moveByChar(t,e):a0(t,e))}function pi(n){return n.textDirectionAt(n.state.selection.main.head)==Xt.LTR}const U5=n=>W5(n,!pi(n)),J5=n=>W5(n,pi(n));function K5(n,e){return Kr(n,t=>t.empty?n.moveByGroup(t,e):a0(t,e))}const MG=n=>K5(n,!pi(n)),AG=n=>K5(n,pi(n));function EG(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function u0(n,e,t){let i=di(n).resolveInner(e.head),r=t?gt.closedBy:gt.openedBy;for(let a=e.head;;){let u=t?i.childAfter(a):i.childBefore(a);if(!u)break;EG(n,u,r)?i=u:a=t?u.to:u.from}let o=i.type.prop(r),s,l;return o&&(s=t?lo(n,i.from,1):lo(n,i.to,-1))&&s.matched?l=t?s.end.to:s.end.from:l=t?i.to:i.from,pe.cursor(l,t?-1:1)}const OG=n=>Kr(n,e=>u0(n.state,e,!pi(n))),TG=n=>Kr(n,e=>u0(n.state,e,pi(n)));function G5(n,e){return Kr(n,t=>{if(!t.empty)return a0(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const Q5=n=>G5(n,!1),X5=n=>G5(n,!0);function Y5(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(Ne.scrollMargins)){let s=o(n);s!=null&&s.top&&(t=Math.max(s==null?void 0:s.top,t)),s!=null&&s.bottom&&(i=Math.max(s==null?void 0:s.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Z5(n,e){let t=Y5(n),{state:i}=n,r=Lu(i.selection,s=>s.empty?n.moveVertically(s,e,t.height):a0(s,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,u=l.bottom-t.marginBottom;s&&s.top>a&&s.bottom<u&&(o=Ne.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-a}))}return n.dispatch(Ao(i,r),{effects:o}),!0}const C_=n=>Z5(n,!1),Sg=n=>Z5(n,!0);function ul(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=pe.cursor(i.from+o))}return r}const DG=n=>Kr(n,e=>ul(n,e,!0)),PG=n=>Kr(n,e=>ul(n,e,!1)),RG=n=>Kr(n,e=>ul(n,e,!pi(n))),NG=n=>Kr(n,e=>ul(n,e,pi(n))),IG=n=>Kr(n,e=>pe.cursor(n.lineBlockAt(e.head).from,1)),BG=n=>Kr(n,e=>pe.cursor(n.lineBlockAt(e.head).to,-1));function LG(n,e,t){let i=!1,r=Lu(n.selection,o=>{let s=lo(n,o.head,-1)||lo(n,o.head,1)||o.head>0&&lo(n,o.head-1,1)||o.head<n.doc.length&&lo(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return t?pe.range(o.anchor,l):pe.cursor(l)});return i?(e(Ao(n,r)),!0):!1}const FG=({state:n,dispatch:e})=>LG(n,e,!1);function Sr(n,e){let t=Lu(n.state.selection,i=>{let r=e(i);return pe.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Ao(n.state,t)),!0)}function $5(n,e){return Sr(n,t=>n.moveByChar(t,e))}const eM=n=>$5(n,!pi(n)),tM=n=>$5(n,pi(n));function nM(n,e){return Sr(n,t=>n.moveByGroup(t,e))}const jG=n=>nM(n,!pi(n)),zG=n=>nM(n,pi(n)),VG=n=>Sr(n,e=>u0(n.state,e,!pi(n))),HG=n=>Sr(n,e=>u0(n.state,e,pi(n)));function iM(n,e){return Sr(n,t=>n.moveVertically(t,e))}const rM=n=>iM(n,!1),oM=n=>iM(n,!0);function sM(n,e){return Sr(n,t=>n.moveVertically(t,e,Y5(n).height))}const __=n=>sM(n,!1),S_=n=>sM(n,!0),qG=n=>Sr(n,e=>ul(n,e,!0)),WG=n=>Sr(n,e=>ul(n,e,!1)),UG=n=>Sr(n,e=>ul(n,e,!pi(n))),JG=n=>Sr(n,e=>ul(n,e,pi(n))),KG=n=>Sr(n,e=>pe.cursor(n.lineBlockAt(e.head).from)),GG=n=>Sr(n,e=>pe.cursor(n.lineBlockAt(e.head).to)),v_=({state:n,dispatch:e})=>(e(Ao(n,{anchor:0})),!0),x_=({state:n,dispatch:e})=>(e(Ao(n,{anchor:n.doc.length})),!0),M_=({state:n,dispatch:e})=>(e(Ao(n,{anchor:n.selection.main.anchor,head:0})),!0),A_=({state:n,dispatch:e})=>(e(Ao(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),QG=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),XG=({state:n,dispatch:e})=>{let t=c0(n).map(({from:i,to:r})=>pe.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:pe.create(t),userEvent:"select"})),!0},YG=({state:n,dispatch:e})=>{let t=Lu(n.selection,i=>{let r=di(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:l}=s;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&s.next)return pe.range(l.to,l.from)}return i});return t.eq(n.selection)?!1:(e(Ao(n,t)),!0)},ZG=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=pe.create([t.main]):t.main.empty||(i=pe.create([pe.cursor(t.main.head)])),i?(e(Ao(n,i)),!0):!1};function If(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let a=e(o);a<s?(t="delete.backward",a=Ah(n,a,!1)):a>s&&(t="delete.forward",a=Ah(n,a,!0)),s=Math.min(s,a),l=Math.max(l,a)}else s=Ah(n,s,!1),l=Ah(n,l,!0);return s==l?{range:o}:{changes:{from:s,to:l},range:pe.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Ne.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ah(n,e,t){if(n instanceof Ne)for(let i of n.state.facet(Ne.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const lM=(n,e,t)=>If(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),l,a;if(t&&!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,r-s.from))){if(l[l.length-1]=="	")return r-1;let u=Bu(l,o.tabSize),c=u%il(o)||il(o);for(let f=0;f<c&&l[l.length-1-f]==" ";f++)r--;a=r}else a=$n(s.text,r-s.from,e,e)+s.from,a==r&&s.number!=(e?o.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,r-s.from))&&(a=$n(s.text,a-s.from,!1,!1)+s.from);return a}),vg=n=>lM(n,!1,!0),aM=n=>lM(n,!0,!1),uM=(n,e)=>If(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let l=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=$n(o.text,i-o.from,e)+o.from,u=o.text.slice(Math.min(i,a)-o.from,Math.max(i,a)-o.from),c=s(u);if(l!=null&&c!=l)break;(u!=" "||i!=t.head)&&(l=c),i=a}return i}),cM=n=>uM(n,!1),$G=n=>uM(n,!0),eQ=n=>If(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),tQ=n=>If(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),nQ=n=>If(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),iQ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Dt.of(["",""])},range:pe.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},rQ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:$n(o.text,r-o.from,!1)+o.from,l=r==o.to?r+1:$n(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:n.doc.slice(r,l).append(n.doc.slice(s,r))},range:pe.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function c0(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function fM(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of c0(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),l=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let a of o.ranges)r.push(pe.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let a of o.ranges)r.push(pe.range(a.anchor-l,a.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:pe.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const oQ=({state:n,dispatch:e})=>fM(n,e,!1),sQ=({state:n,dispatch:e})=>fM(n,e,!0);function hM(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of c0(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const lQ=({state:n,dispatch:e})=>hM(n,e,!1),aQ=({state:n,dispatch:e})=>hM(n,e,!0),uQ=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(c0(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=Lu(e.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),l=n.coordsAtPos(r.head,r.assoc||1);l&&(o=s.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function cQ(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=di(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(gt.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const E_=dM(!1),fQ=dM(!0);function dM(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:s}=r,l=e.doc.lineAt(o),a=!n&&o==s&&cQ(e,o);n&&(o=s=(s<=l.to?l:e.doc.lineAt(s)).to);let u=new o0(e,{simulateBreak:o,simulateDoubleBreak:!!a}),c=hb(u,o);for(c==null&&(c=Bu(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<l.to&&/\s/.test(l.text[s-l.from]);)s++;a?{from:o,to:s}=a:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let f=["",Zc(e,c)];return a&&f.push(Zc(e,u.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:Dt.of(f)},range:pe.cursor(o+1+f[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function kb(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let l=n.doc.lineAt(s);l.number>t&&(i.empty||i.to>l.from)&&(e(l,r,i),t=l.number),s=l.to+1}let o=n.changes(r);return{changes:r,range:pe.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const hQ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new o0(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=kb(n,(o,s,l)=>{let a=hb(i,o.from);if(a==null)return;/\S/.test(o.text)||(a=0);let u=/^\s*/.exec(o.text)[0],c=Zc(n,a);(u!=c||l.from<o.from+u.length)&&(t[o.from]=a,s.push({from:o.from,to:o.from+u.length,insert:c}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},pM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(kb(n,(t,i)=>{i.push({from:t.from,insert:n.facet(r0)})}),{userEvent:"input.indent"})),!0),mM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(kb(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=Bu(r,n.tabSize),s=0,l=Zc(n,Math.max(0,o-il(n)));for(;s<r.length&&s<l.length&&r.charCodeAt(s)==l.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+r.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),dQ=n=>(n.setTabFocusMode(),!0),pQ=[{key:"Ctrl-b",run:U5,shift:eM,preventDefault:!0},{key:"Ctrl-f",run:J5,shift:tM},{key:"Ctrl-p",run:Q5,shift:rM},{key:"Ctrl-n",run:X5,shift:oM},{key:"Ctrl-a",run:IG,shift:KG},{key:"Ctrl-e",run:BG,shift:GG},{key:"Ctrl-d",run:aM},{key:"Ctrl-h",run:vg},{key:"Ctrl-k",run:eQ},{key:"Ctrl-Alt-h",run:cM},{key:"Ctrl-o",run:iQ},{key:"Ctrl-t",run:rQ},{key:"Ctrl-v",run:Sg}],mQ=[{key:"ArrowLeft",run:U5,shift:eM,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:MG,shift:jG,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:RG,shift:UG,preventDefault:!0},{key:"ArrowRight",run:J5,shift:tM,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:AG,shift:zG,preventDefault:!0},{mac:"Cmd-ArrowRight",run:NG,shift:JG,preventDefault:!0},{key:"ArrowUp",run:Q5,shift:rM,preventDefault:!0},{mac:"Cmd-ArrowUp",run:v_,shift:M_},{mac:"Ctrl-ArrowUp",run:C_,shift:__},{key:"ArrowDown",run:X5,shift:oM,preventDefault:!0},{mac:"Cmd-ArrowDown",run:x_,shift:A_},{mac:"Ctrl-ArrowDown",run:Sg,shift:S_},{key:"PageUp",run:C_,shift:__},{key:"PageDown",run:Sg,shift:S_},{key:"Home",run:PG,shift:WG,preventDefault:!0},{key:"Mod-Home",run:v_,shift:M_},{key:"End",run:DG,shift:qG,preventDefault:!0},{key:"Mod-End",run:x_,shift:A_},{key:"Enter",run:E_,shift:E_},{key:"Mod-a",run:QG},{key:"Backspace",run:vg,shift:vg},{key:"Delete",run:aM},{key:"Mod-Backspace",mac:"Alt-Backspace",run:cM},{key:"Mod-Delete",mac:"Alt-Delete",run:$G},{mac:"Mod-Backspace",run:tQ},{mac:"Mod-Delete",run:nQ}].concat(pQ.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),gQ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:OG,shift:VG},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:TG,shift:HG},{key:"Alt-ArrowUp",run:oQ},{key:"Shift-Alt-ArrowUp",run:lQ},{key:"Alt-ArrowDown",run:sQ},{key:"Shift-Alt-ArrowDown",run:aQ},{key:"Escape",run:ZG},{key:"Mod-Enter",run:fQ},{key:"Alt-l",mac:"Ctrl-l",run:XG},{key:"Mod-i",run:YG,preventDefault:!0},{key:"Mod-[",run:mM},{key:"Mod-]",run:pM},{key:"Mod-Alt-\\",run:hQ},{key:"Shift-Mod-k",run:uQ},{key:"Shift-Mod-\\",run:FG},{key:"Mod-/",run:oG},{key:"Alt-A",run:lG},{key:"Ctrl-m",mac:"Shift-Alt-m",run:dQ}].concat(mQ),bQ={key:"Tab",run:pM,shift:mM};function Vt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)gM(n,arguments[e]);return n}function gM(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)gM(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}class yQ{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class vl{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,o=i.facet(ao).markerFilter;o&&(r=o(r,i));let s=Xe.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?Xe.widget({widget:new EQ(l),diagnostic:l}).range(l.from):Xe.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new vl(s,t,yu(s))}}function yu(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostic!=e))return i=new yQ(r,o,s.diagnostic),!1}),i}function bM(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(ao).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(f0))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function yM(n,e){return n.field(Ji,!1)?e:e.concat(ot.appendConfig.of(xM))}function kQ(n,e){return{effects:yM(n,[f0.of(e)])}}const f0=ot.define(),wb=ot.define(),kM=ot.define(),Ji=Tn.define({create(){return new vl(Xe.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=yu(t,n.selected.diagnostic,o)||yu(t,null,o)}!t.size&&r&&e.state.facet(ao).autoPanel&&(r=null),n=new vl(t,r,i)}for(let t of e.effects)if(t.is(f0)){let i=e.state.facet(ao).autoPanel?t.value.length?$c.open:null:n.panel;n=vl.init(t.value,i,e.state)}else t.is(wb)?n=new vl(n.diagnostics,t.value?$c.open:null,n.selected):t.is(kM)&&(n=new vl(n.diagnostics,n.panel,t.value));return n},provide:n=>[Xc.from(n,e=>e.panel),Ne.decorations.from(n,e=>e.diagnostics)]}),wQ=Xe.mark({class:"cm-lintRange cm-lintRange-active"});function CQ(n,e,t){let{diagnostics:i}=n.state.field(Ji),r=[],o=2e8,s=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,u,{spec:c})=>{e>=a&&e<=u&&(a==u||(e>a||t>0)&&(e<u||t<0))&&(r.push(c.diagnostic),o=Math.min(a,o),s=Math.max(u,s))});let l=n.state.facet(ao).tooltipFilter;return l&&(r=l(r,n.state)),r.length?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:wM(n,r)}}}:null}function wM(n,e){return Vt("ul",{class:"cm-tooltip-lint"},e.map(t=>_M(n,t,!1)))}const _Q=n=>{let e=n.state.field(Ji,!1);(!e||!e.panel)&&n.dispatch({effects:yM(n.state,[wb.of(!0)])});let t=Qc(n,$c.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},O_=n=>{let e=n.state.field(Ji,!1);return!e||!e.panel?!1:(n.dispatch({effects:wb.of(!1)}),!0)},SQ=n=>{let e=n.state.field(Ji,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},vQ=[{key:"Mod-Shift-m",run:_Q,preventDefault:!0},{key:"F8",run:SQ}],xQ=cn.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(ao);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(ao);t.length&&MQ(t.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(kQ(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{yi(this.view.state,i)})}}update(n){let e=n.state.facet(ao);(n.docChanged||e!=n.startState.facet(ao)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function MQ(n,e,t){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?e(i):setTimeout(()=>e(i),200)},t)}const ao=Ie.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},_r(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function AQ(n,e={}){return[ao.of({source:n,config:e}),xQ,xM]}function CM(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function _M(n,e,t){var i;let r=t?CM(e.actions):[];return Vt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Vt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let d=yu(n.state.field(Ji).diagnostics,e);d&&o.apply(n,d.from,d.to)},{name:u}=o,c=r[s]?u.indexOf(r[s]):-1,f=c<0?u:[u.slice(0,c),Vt("u",u.slice(c,c+1)),u.slice(c+1)];return Vt("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[s]})"`}.`},f)}),e.source&&Vt("div",{class:"cm-diagnosticSource"},e.source))}class EQ extends al{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Vt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class T_{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=_M(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class $c{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)O_(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=CM(o.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=yu(this.view.state.field(Ji).diagnostics,o);a&&o.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Vt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Vt("div",{class:"cm-panel-lint"},this.list,Vt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>O_(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ji).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Ji),i=0,r=!1,o=null;for(e.between(0,this.view.state.doc.length,(s,l,{spec:a})=>{let u=-1,c;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==a.diagnostic){u=f;break}u<0?(c=new T_(this.view,a.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),o=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new T_(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:l})=>{let a=l.height/this.list.offsetHeight;s.top<l.top?this.list.scrollTop-=(l.top-s.top)/a:s.bottom>l.bottom&&(this.list.scrollTop+=(s.bottom-l.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Ji),i=yu(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:kM.of(i)})}static open(e){return new $c(e)}}function sd(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Eh(n){return sd(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const OQ=Ne.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Eh("#d11")},".cm-lintRange-warning":{backgroundImage:Eh("orange")},".cm-lintRange-info":{backgroundImage:Eh("#999")},".cm-lintRange-hint":{backgroundImage:Eh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function D_(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}class SM extends So{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,i)=>D_(t)<D_(i.severity)?i.severity:t,"hint")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(h0).tooltipFilter;return r&&(i=r(i,e.state)),i.length&&(t.onmouseover=()=>DQ(e,t,i)),t}}function TQ(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(vM)&&n.dispatch({effects:Cb.of(null)})}};window.addEventListener("mousemove",t)}function DQ(n,e,t){function i(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:Cb.of({pos:s.from,above:!1,create(){return{dom:wM(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,TQ(n,e)}let{hoverTime:r}=n.state.facet(h0),o=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function PQ(n,e){let t=Object.create(null);for(let r of e){let o=n.lineAt(r.from);(t[o.from]||(t[o.from]=[])).push(r)}let i=[];for(let r in t)i.push(new SM(t[r]).range(+r));return Ct.of(i,!0)}const RQ=h5({class:"cm-gutter-lint",markers:n=>n.state.field(xg),widgetMarker:(n,e,t)=>{let i=[];return n.state.field(xg).between(t.from,t.to,(r,o,s)=>{i.push(...s.diagnostics)}),i.length?new SM(i):null}}),xg=Tn.define({create(){return Ct.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(h0).markerFilter;for(let i of e.effects)if(i.is(f0)){let r=i.value;t&&(r=t(r||[],e.state)),n=PQ(e.state.doc,r.slice(0))}return n}}),Cb=ot.define(),vM=Tn.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=bM(e,n)?null:Object.assign(Object.assign({},n),{pos:e.changes.mapPos(n.pos)})),e.effects.reduce((t,i)=>i.is(Cb)?i.value:t,n)},provide:n=>n0.from(n)}),NQ=Ne.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:sd('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:sd('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:sd('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),xM=[Ji,Ne.decorations.compute([Ji],n=>{let{selected:e,panel:t}=n.field(Ji);return!e||!t||e.from==e.to?Xe.none:Xe.set([wQ.range(e.from,e.to)])}),LJ(CQ,{hideOn:bM}),OQ],h0=Ie.define({combine(n){return _r(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function IQ(n={}){return[h0.of(n),xg,RQ,NQ,vM]}class Kd{constructor(e,t,i,r,o,s,l,a,u,c=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=l,this.bufferBase=a,this.curContext=u,this.lookAhead=c,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new Kd(e,[],t,i,i,0,[],0,r?new P_(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let l=o.dynamicPrecedence(r);if(l&&(this.score+=l),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let a=this.stack.length-(i-1)*3-(e&262144?6:0),u=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-u;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=c));let f=a?this.stack[a-1]:0,h=this.bufferBase+this.buffer.length-f;if(r<o.minRepeatTerm||e&131072){let d=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,u,d,h+4,!0)}if(e&262144)this.state=this.stack[a];else{let d=this.stack[a-3];this.state=o.getGoto(d,r,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(r,u)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,l=this.buffer.length;if(l==0&&s.parent&&(l=s.bufferBase-s.parent.bufferBase,s=s.parent),l>0&&s.buffer[l-4]==0&&s.buffer[l-1]>-1){if(t==i)return;if(s.buffer[l-2]>=t){s.buffer[l-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let l=!1;for(let a=s;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4);else{let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new Kd(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new BQ(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let s=t[o+1];r.some((l,a)=>a&1&&l==s)||r.push(t[o],s)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,s=>{if(!(s&393216))if(s&65536){let l=(s>>19)-o;if(l>1){let a=s&65535,u=this.stack.length-l*3;if(u>=0&&e.getGoto(this.stack[u],a,!1)>=0)return l<<19|65536|a}}else{let l=i(s,o+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new P_(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class P_{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class BQ{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class Gd{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Gd(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Gd(this.stack,this.pos,this.index)}}function Oh(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),l=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let a=s-32;if(a>=46&&(a-=46,l=!0),o+=a,l)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class ld{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const R_=new ld;class LQ{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=R_,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=R_,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Ka{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;FQ(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Ka.prototype.contextual=Ka.prototype.fallback=Ka.prototype.extend=!1;Ka.prototype.fallback=Ka.prototype.extend=!1;function FQ(n,e,t,i,r,o){let s=0,l=1<<i,{dialect:a}=t.p.parser;e:for(;l&n[s];){let u=n[s+1];for(let d=s+3;d<u;d+=2)if((n[d+1]&l)>0){let p=n[d];if(a.allows(p)&&(e.token.value==-1||e.token.value==p||jQ(p,e.token.value,r,o))){e.acceptToken(p);break}}let c=e.next,f=0,h=n[s+2];if(e.next<0&&h>f&&n[u+h*3-3]==65535){s=n[u+h*3-1];continue e}for(;f<h;){let d=f+h>>1,p=u+d+(d<<1),m=n[p],g=n[p+1]||65536;if(c<m)h=d;else if(c>=g)f=d+1;else{s=n[p+2],e.advance();continue e}}break}}function N_(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function jQ(n,e,t,i){let r=N_(t,i,e);return r<0||N_(t,i,n)<r}const Vi=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let bm=null;function I_(n,e,t){let i=n.cursor(Bn.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class zQ{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?I_(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?I_(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[t]+i.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof _n){if(s==e){if(s<this.safeFrom)return null;let l=s+o.length;if(l<=this.safeTo){let a=o.prop(gt.lookAhead);if(!a||l+a<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class VQ{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new ld)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let u=0;u<o.length;u++){if(!(1<<u&s))continue;let c=o[u],f=this.tokens[u];if(!(i&&!c.fallback)&&((c.contextual||f.start!=e.pos||f.mask!=s||f.context!=l)&&(this.updateCachedToken(f,c,e),f.mask=s,f.context=l),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let h=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!c.extend&&(i=f,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new ld,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new ld,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let l=o.specializers[s](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:s}=e.p,{data:l}=s;for(let a=0;a<2;a++)for(let u=s.stateSlot(o,a?2:1);;u+=3){if(l[u]==65535)if(l[u+1]==1)u=Ho(l,u+2);else{r==0&&l[u+1]==2&&(r=this.putAction(Ho(l,u+2),t,i,r));break}l[u]==t&&(r=this.putAction(Ho(l,u+1),t,i,r))}return r}}class HQ{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new LQ(t,r),this.tokens=new VQ(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[Kd.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new zQ(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let l=e[s];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{r||(r=[],o=[]),r.push(l);let a=this.tokens.getMainToken(l);o.push(a.value,a.end)}}break}}if(!i.length){let s=r&&WQ(r);if(s)return Vi&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw Vi&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return Vi&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((l,a)=>a.score-l.score);i.length>s;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let l=i[s];for(let a=s+1;a<i.length;a++){let u=i[a];if(l.sameState(u)||l.buffer.length>500&&u.buffer.length>500)if((l.score-u.score||l.buffer.length-u.buffer.length)>0)i.splice(a--,1);else{i.splice(s--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,s=Vi?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let f=this.fragments.nodeAt(r);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?o.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!u||(f.prop(gt.contextHash)||0)==c))return e.useNode(f,h),Vi&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(f.type.id)})`),!0;if(!(f instanceof _n)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof _n&&f.positions[0]==0)f=d;else break}}let l=o.stateSlot(e.state,4);if(l>0)return e.reduce(l),Vi&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let u=0;u<a.length;){let c=a[u++],f=a[u++],h=a[u++],d=u==a.length||!i,p=d?e:e.split(),m=this.tokens.mainToken;if(p.apply(c,f,m?m.start:p.pos,h),Vi&&console.log(s+this.stackID(p)+` (via ${c&65536?`reduce of ${o.getName(c&65535)}`:"shift"} for ${o.getName(f)} @ ${r}${p==e?"":", split"})`),d)return!0;p.pos>r?t.push(p):i.push(p)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return B_(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let s=0;s<e.length;s++){let l=e[s],a=t[s<<1],u=t[(s<<1)+1],c=Vi?this.stackID(l)+" -> ":"";if(l.deadEnd&&(o||(o=!0,l.restart(),Vi&&console.log(c+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),h=c;for(let d=0;f.forceReduce()&&d<10&&(Vi&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)Vi&&(h=this.stackID(f)+" -> ");for(let d of l.recoverByInsert(a))Vi&&console.log(c+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(u==l.pos&&(u++,a=0),l.recoverByDelete(a,u),Vi&&console.log(c+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),B_(l,i)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),_n.build({buffer:Gd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(bm||(bm=new WeakMap)).get(e);return t||bm.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function B_(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class qQ{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class Qd extends w5{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<t.length;l++)r.push([]);function o(l,a,u){r[l].push([a,a.deserialize(String(u))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=gt[a]);for(let u=1;u<l.length;){let c=l[u++];if(c>=0)o(c,a,l[u++]);else{let f=l[u+-c];for(let h=-c;h>0;h--)o(l[u++],a,f);u++}}}this.nodeSet=new ab(t.map((l,a)=>wr.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:r[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=m5;let s=Oh(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(L_),this.states=Oh(e.states,Uint32Array),this.data=Oh(e.stateData),this.goto=Oh(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Ka(s,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new HQ(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],l=s&1,a=r[o++];if(l&&i)return a;for(let u=o+(s>>1);o<u;o++)if(r[o]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=Ho(i,o+2)];else{if(i[o+1]==2)return Ho(i,o+2);break}if(s==t||s==0)return Ho(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=Ho(this.data,o+2);else break;r=t(Ho(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Ho(this.data,i+2);else break;if(!(this.data[i+2]&1)){let r=this.data[i+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(Qd.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(l=>l.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=L_(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let s=this.dialects[t[o]],l;(l=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new qQ(e,i,r)}static deserialize(e){return new Qd(e)}}function Ho(n,e){return n[e]|n[e+1]<<16}function WQ(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function L_(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const UQ=C5({String:ve.string,Number:ve.number,"True False":ve.bool,PropertyName:ve.propertyName,Null:ve.null,",":ve.separator,"[ ]":ve.squareBracket,"{ }":ve.brace}),JQ=Qd.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[UQ],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),KQ=Hd.define({name:"json",parser:JQ.configure({props:[x5.add({Object:g_({except:/^\s*\}/}),Array:g_({except:/^\s*\]/})}),A5.add({"Object Array":OK})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function GQ(){return new bK(KQ)}const F_=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class ku{constructor(e,t,i=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?l=>o(F_(l)):F_,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Qn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=G2(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=or(e);let r=this.normalize(t);for(let o=0,s=i;;o++){let l=r.charCodeAt(o),a=this.match(l,s,this.bufferPos+this.bufferStart);if(o==r.length-1){if(a)return this.value=a,this;break}s==i&&o<t.length&&t.charCodeAt(o)==l&&s++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],l=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(ku.prototype[Symbol.iterator]=function(){return this});const MM={from:-1,to:-1,match:/.*/.exec("")},_b="gm"+(/x/.unicode==null?"":"u");class AM{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=MM,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new EM(e,t,i,r,o);this.re=new RegExp(t,_b+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=Xd(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=Xd(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const ym=new WeakMap;class Ga{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=ym.get(e);if(!r||r.from>=i||r.to<=t){let l=new Ga(t,e.sliceString(t,i));return ym.set(e,l),l}if(r.from==t&&r.to==i)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<i&&(o+=e.sliceString(r.to,i)),ym.set(e,new Ga(s,o)),new Ga(t,o.slice(t-s,i-s))}}class EM{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=MM,this.matchPos=Xd(e,r),this.re=new RegExp(t,_b+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Ga.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=Xd(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ga.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(AM.prototype[Symbol.iterator]=EM.prototype[Symbol.iterator]=function(){return this});function QQ(n){try{return new RegExp(n,_b),!0}catch{return!1}}function Xd(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function Mg(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Vt("input",{class:"cm-textfield",name:"line",value:e}),i=Vt("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:Yd.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},Vt("label",n.state.phrase("Go to line"),": ",t)," ",Vt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,l=s.doc.lineAt(s.selection.main.head),[,a,u,c,f]=o,h=c?+c.slice(1):0,d=u?+u:l.number;if(u&&f){let g=d/100;a&&(g=g*(a=="-"?-1:1)+l.number/s.doc.lines),d=Math.round(s.doc.lines*g)}else u&&a&&(d=d*(a=="-"?-1:1)+l.number);let p=s.doc.line(Math.max(1,Math.min(s.doc.lines,d))),m=pe.cursor(p.from+Math.max(0,Math.min(h,p.length)));n.dispatch({effects:[Yd.of(!1),Ne.scrollIntoView(m.from,{y:"center"})],selection:m}),n.focus()}return{dom:i}}const Yd=ot.define(),j_=Tn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Yd)&&(n=t.value);return n},provide:n=>Xc.from(n,e=>e?Mg:null)}),XQ=n=>{let e=Qc(n,Mg);if(!e){let t=[Yd.of(!0)];n.state.field(j_,!1)==null&&t.push(ot.appendConfig.of([j_,YQ])),n.dispatch({effects:t}),e=Qc(n,Mg)}return e&&e.dom.querySelector("input").select(),!0},YQ=Ne.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),ZQ={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},OM=Ie.define({combine(n){return _r(n,ZQ,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function $Q(n){let e=[rX,iX];return n&&e.push(OM.of(n)),e}const eX=Xe.mark({class:"cm-selectionMatch"}),tX=Xe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function z_(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=en.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=en.Word)}function nX(n,e,t,i){return n(e.sliceDoc(t,t+1))==en.Word&&n(e.sliceDoc(i-1,i))==en.Word}const iX=cn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(OM),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Xe.none;let r=i.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return Xe.none;let a=t.wordAt(r.head);if(!a)return Xe.none;s=t.charCategorizer(r.head),o=t.sliceDoc(a.from,a.to)}else{let a=r.to-r.from;if(a<e.minSelectionLength||a>200)return Xe.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(z_(s,t,r.from,r.to)&&nX(s,t,r.from,r.to)))return Xe.none}else if(o=t.sliceDoc(r.from,r.to),!o)return Xe.none}let l=[];for(let a of n.visibleRanges){let u=new ku(t.doc,o,a.from,a.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!s||z_(s,t,c,f))&&(r.empty&&c<=r.from&&f>=r.to?l.push(tX.range(c,f)):(c>=r.to||f<=r.from)&&l.push(eX.range(c,f)),l.length>e.maxMatches))return Xe.none}}return Xe.set(l)}},{decorations:n=>n.decorations}),rX=Ne.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),oX=({state:n,dispatch:e})=>{let{selection:t}=n,i=pe.create(t.ranges.map(r=>n.wordAt(r.head)||pe.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function sX(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,l=new ku(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new ku(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(a=>a.from==l.value.from))continue;if(o){let a=n.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const lX=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return oX({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=sX(n,i);return r?(e(n.update({selection:n.selection.addRange(pe.range(r.from,r.to),!1),effects:Ne.scrollIntoView(r.to)})),!0):!1},aa=Ie.define({combine(n){return _r(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new wX(e),scrollToMatch:e=>Ne.scrollIntoView(e)})}});function aX(n){return n?[aa.of(n),Eg]:Eg}class TM{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||QQ(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new hX(this):new cX(this)}getCursor(e,t=0,i){let r=e.doc?e:Ht.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?xa(this,r,t,i):va(this,r,t,i)}}class DM{constructor(e){this.spec=e}}function va(n,e,t,i){return new ku(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?uX(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function uX(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(Zd(r,t-o))!=en.Word||e($d(r,t-o))!=en.Word)&&(e($d(r,i-o))!=en.Word||e(Zd(r,i-o))!=en.Word))}class cX extends DM{constructor(e){super(e)}nextMatch(e,t,i){let r=va(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=va(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=va(this.spec,e,o,r),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=va(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=va(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function xa(n,e,t,i){return new AM(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?fX(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Zd(n,e){return n.slice($n(n,e,!1),e)}function $d(n,e){return n.slice(e,$n(n,e))}function fX(n){return(e,t,i)=>!i[0].length||(n(Zd(i.input,i.index))!=en.Word||n($d(i.input,i.index))!=en.Word)&&(n($d(i.input,i.index+i[0].length))!=en.Word||n(Zd(i.input,i.index+i[0].length))!=en.Word)}class hX extends DM{nextMatch(e,t,i){let r=xa(this.spec,e,i,e.doc.length).next();return r.done&&(r=xa(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),s=xa(this.spec,e,o,i),l=null;for(;!s.next().done;)l=s.value;if(l&&(o==t||l.from>o+10))return l;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=xa(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=xa(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const ef=ot.define(),Sb=ot.define(),zs=Tn.define({create(n){return new km(Ag(n).create(),null)},update(n,e){for(let t of e.effects)t.is(ef)?n=new km(t.value.create(),n.panel):t.is(Sb)&&(n=new km(n.query,t.value?vb:null));return n},provide:n=>Xc.from(n,e=>e.panel)});class km{constructor(e,t){this.query=e,this.panel=t}}const dX=Xe.mark({class:"cm-searchMatch"}),pX=Xe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),mX=cn.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(zs))}update(n){let e=n.state.field(zs);(e!=n.startState.field(zs)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Xe.none;let{view:t}=this,i=new Co;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:l,to:a}=o[r];for(;r<s-1&&a>o[r+1].from-2*250;)a=o[++r].to;n.highlight(t.state,l,a,(u,c)=>{let f=t.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,f?pX:dX)})}return i.finish()}},{decorations:n=>n.decorations});function Bf(n){return e=>{let t=e.state.field(zs,!1);return t&&t.query.spec.valid?n(e,t):xb(e)}}const ep=Bf((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=pe.single(i.from,i.to),o=n.state.facet(aa);return n.dispatch({selection:r,effects:[Ab(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),RM(n),!0}),tp=Bf((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=pe.single(r.from,r.to),s=n.state.facet(aa);return n.dispatch({selection:o,effects:[Ab(n,r),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),RM(n),!0}),gX=Bf((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:pe.create(t.map(i=>pe.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),bX=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],s=0;for(let l=new ku(n.doc,n.sliceDoc(i,r));!l.next().done;){if(o.length>1e3)return!1;l.value.from==i&&(s=o.length),o.push(pe.range(l.value.from,l.value.to))}return e(n.update({selection:pe.create(o,s),userEvent:"select.search.matches"})),!0},V_=Bf((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=[],l,a,u=[];if(o.from==i&&o.to==r&&(a=t.toText(e.getReplacement(o)),s.push({from:o.from,to:o.to,insert:a}),o=e.nextMatch(t,o.from,o.to),u.push(Ne.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),o){let c=s.length==0||s[0].from>=o.to?0:o.to-o.from-a.length;l=pe.single(o.from-c,o.to-c),u.push(Ab(n,o)),u.push(t.facet(aa).scrollToMatch(l.main,n))}return n.dispatch({changes:s,selection:l,effects:u,userEvent:"input.replace"}),!0}),yX=Bf((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Ne.announce.of(i),userEvent:"input.replace.all"}),!0});function vb(n){return n.state.facet(aa).createPanel(n)}function Ag(n,e){var t,i,r,o,s;let l=n.selection.main,a=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=n.facet(aa);return new TM({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(o=e==null?void 0:e.regexp)!==null&&o!==void 0?o:u.regexp,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:u.wholeWord})}function PM(n){let e=Qc(n,vb);return e&&e.dom.querySelector("[main-field]")}function RM(n){let e=PM(n);e&&e==n.root.activeElement&&e.select()}const xb=n=>{let e=n.state.field(zs,!1);if(e&&e.panel){let t=PM(n);if(t&&t!=n.root.activeElement){let i=Ag(n.state,e.query.spec);i.valid&&n.dispatch({effects:ef.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[Sb.of(!0),e?ef.of(Ag(n.state,e.query.spec)):ot.appendConfig.of(Eg)]});return!0},Mb=n=>{let e=n.state.field(zs,!1);if(!e||!e.panel)return!1;let t=Qc(n,vb);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Sb.of(!1)}),!0},kX=[{key:"Mod-f",run:xb,scope:"editor search-panel"},{key:"F3",run:ep,shift:tp,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ep,shift:tp,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Mb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:bX},{key:"Mod-Alt-g",run:XQ},{key:"Mod-d",run:lX,preventDefault:!0}];class wX{constructor(e){this.view=e;let t=this.query=e.state.field(zs).query.spec;this.commit=this.commit.bind(this),this.searchField=Vt("input",{value:t.search,placeholder:Hi(e,"Find"),"aria-label":Hi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Vt("input",{value:t.replace,placeholder:Hi(e,"Replace"),"aria-label":Hi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Vt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Vt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Vt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,s){return Vt("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=Vt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>ep(e),[Hi(e,"next")]),i("prev",()=>tp(e),[Hi(e,"previous")]),i("select",()=>gX(e),[Hi(e,"all")]),Vt("label",null,[this.caseField,Hi(e,"match case")]),Vt("label",null,[this.reField,Hi(e,"regexp")]),Vt("label",null,[this.wordField,Hi(e,"by word")]),...e.state.readOnly?[]:[Vt("br"),this.replaceField,i("replace",()=>V_(e),[Hi(e,"replace")]),i("replaceAll",()=>yX(e),[Hi(e,"replace all")])],Vt("button",{name:"close",onclick:()=>Mb(e),"aria-label":Hi(e,"close"),type:"button"},[""])])}commit(){let e=new TM({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ef.of(e)}))}keydown(e){YU(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?tp:ep)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),V_(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(ef)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(aa).top}}function Hi(n,e){return n.state.phrase(e)}const Th=30,Dh=/[\s\.,:;?!]/;function Ab(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-Th),s=Math.min(r,t+Th),l=n.state.sliceDoc(o,s);if(o!=i.from){for(let a=0;a<Th;a++)if(!Dh.test(l[a+1])&&Dh.test(l[a])){l=l.slice(a);break}}if(s!=r){for(let a=l.length-1;a>l.length-Th;a--)if(!Dh.test(l[a-1])&&Dh.test(l[a])){l=l.slice(0,a);break}}return Ne.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const CX=Ne.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Eg=[zs,la.low(mX),CX];class NM{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=di(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(IM(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function H_(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function _X(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=H_(e)+H_(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function SX(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:_X(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class q_{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function Vs(n){return n.selection.main.from}function IM(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const BM=hs.define();function vX(n,e,t,i){let{main:r}=n.selection,o=t-r.from,s=i-r.from;return Object.assign(Object.assign({},n.changeByRange(l=>{if(l!=r&&t!=i&&n.sliceDoc(l.from+o,l.from+s)!=n.sliceDoc(t,i))return{range:l};let a=n.toText(e);return{changes:{from:l.from+o,to:i==r.from?l.to:l.from+s,insert:a},range:pe.cursor(l.from+o+a.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const W_=new WeakMap;function xX(n){if(!Array.isArray(n))return n;let e=W_.get(n);return e||W_.set(n,e=SX(n)),e}const np=ot.define(),tf=ot.define();class MX{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Qn(e,t),r=or(i);this.chars.push(i);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(Qn(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:s}=this;if(t.length==1){let y=Qn(e,0),_=or(y),M=_==e.length?0:-100;if(y!=t[0])if(y==i[0])M+=-200;else return null;return this.ret(M,[0,_])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,u=0;if(l<0){for(let y=0,_=Math.min(e.length,200);y<_&&u<a;){let M=Qn(e,y);(M==t[u]||M==i[u])&&(r[u++]=y),y+=or(M)}if(u<a)return null}let c=0,f=0,h=!1,d=0,p=-1,m=-1,g=/[a-z]/.test(e),b=!0;for(let y=0,_=Math.min(e.length,200),M=0;y<_&&f<a;){let w=Qn(e,y);l<0&&(c<a&&w==t[c]&&(o[c++]=y),d<a&&(w==t[d]||w==i[d]?(d==0&&(p=y),m=y+1,d++):d=0));let S,E=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(S=G2(w))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!y||E==1&&g||M==0&&E!=0)&&(t[f]==w||i[f]==w&&(h=!0)?s[f++]=y:s.length&&(b=!1)),M=E,y+=or(w)}return f==a&&s[0]==0&&b?this.result(-100+(h?-200:0),s,e):d==a&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):d==a?this.ret(-200+-700-e.length,[p,m]):f==a?this.result(-100+(h?-200:0)+-700+(b?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let s of t){let l=s+(this.astral?or(Qn(i,s)):1);o&&r[o-1]==s?r[o-1]=l:(r[o++]=s,r[o++]=l)}return this.ret(e-i.length,r)}}class AX{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Zn=Ie.define({combine(n){return _r(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:EX,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>U_(e(i),t(i)),optionClass:(e,t)=>i=>U_(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function U_(n,e){return n?e?n+" "+e:n:e}function EX(n,e,t,i,r,o){let s=n.textDirection==Xt.RTL,l=s,a=!1,u="top",c,f,h=e.left-r.left,d=r.right-e.right,p=i.right-i.left,m=i.bottom-i.top;if(l&&h<Math.min(p,d)?l=!1:!l&&d<Math.min(p,h)&&(l=!0),p<=(l?h:d))c=Math.max(r.top,Math.min(t.top,r.bottom-m))-e.top,f=Math.min(400,l?h:d);else{a=!0,f=Math.min(400,(s?e.right:r.right-e.left)-30);let y=r.bottom-e.bottom;y>=m||y>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let g=(e.bottom-e.top)/o.offsetHeight,b=(e.right-e.left)/o.offsetWidth;return{style:`${u}: ${c/g}px; max-width: ${f/b}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":l?"left":"right")}}function OX(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let s=document.createElement("span");s.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let u=0;u<o.length;){let c=o[u++],f=o[u++];c>a&&s.appendChild(document.createTextNode(l.slice(a,c)));let h=s.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(c,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&s.appendChild(document.createTextNode(l.slice(a))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function wm(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class TX{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:s}=r.open,l=e.state.facet(Zn);this.optionContent=OX(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=wm(o.length,s,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:u}=e.state.field(t).open;for(let c=a.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Zn).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:tf.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:s,disabled:l}=i.open;(!r.open||r.open.options!=o)&&(this.range=wm(o.length,s,e.state.facet(Zn).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),l!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=wm(t.options.length,t.selected,this.view.state.facet(Zn).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,i)}).catch(s=>yi(this.view.state,s,"completion info")):this.addInfoPane(o,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&PX(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:s.innerWidth,bottom:s.innerHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Zn).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let s=i.from;s<i.to;s++){let{completion:l,match:a}=e[s],{section:u}=l;if(u){let h=typeof u=="string"?u:u.name;if(h!=o&&(s>i.from||i.from==0))if(o=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let d=r.appendChild(document.createElement("completion-section"));d.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=t+"-"+s,c.setAttribute("role","option");let f=this.optionClass(l);f&&(c.className=f);for(let h of this.optionContent){let d=h(l,this.view.state,this.view,a);d&&c.appendChild(d)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function DX(n,e){return t=>new TX(t,n,e)}function PX(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function J_(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function RX(n,e){let t=[],i=null,r=u=>{t.push(u);let{section:c}=u.completion;if(c){i||(i=[]);let f=typeof c=="string"?c:c.name;i.some(h=>h.name==f)||i.push(typeof c=="string"?{name:f}:c)}},o=e.facet(Zn);for(let u of n)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let f of u.result.options)r(new q_(f,u.source,c?c(f):[],1e9-t.length));else{let f=e.sliceDoc(u.from,u.to),h,d=o.filterStrict?new AX(f):new MX(f);for(let p of u.result.options)if(h=d.match(p.label)){let m=p.displayLabel?c?c(p,h.matched):[]:h.matched;r(new q_(p,u.source,m,h.score+(p.boost||0)))}}}if(i){let u=Object.create(null),c=0,f=(h,d)=>{var p,m;return((p=h.rank)!==null&&p!==void 0?p:1e9)-((m=d.rank)!==null&&m!==void 0?m:1e9)||(h.name<d.name?-1:1)};for(let h of i.sort(f))c-=1e5,u[h.name]=c;for(let h of t){let{section:d}=h.completion;d&&(h.score+=u[typeof d=="string"?d:d.name])}}let s=[],l=null,a=o.compareCompletions;for(let u of t.sort((c,f)=>f.score-c.score||a(c.completion,f.completion))){let c=u.completion;!l||l.label!=c.label||l.detail!=c.detail||l.type!=null&&c.type!=null&&l.type!=c.type||l.apply!=c.apply||l.boost!=c.boost?s.push(u):J_(u.completion)>J_(l)&&(s[s.length-1]=u),l=u.completion}return s}class Ia{constructor(e,t,i,r,o,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ia(this.options,K_(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o){let s=RX(e,t);if(!s.length)return r&&e.some(a=>a.state==1)?new Ia(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=t.facet(Zn).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let a=r.options[r.selected].completion;for(let u=0;u<s.length;u++)if(s[u].completion==a){l=u;break}}return new Ia(s,K_(i,l),{pos:e.reduce((a,u)=>u.hasResult()?Math.min(a,u.from):a,1e8),create:jX,above:o.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Ia(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class ip{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new ip(LX,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Zn),o=(i.override||t.languageDataAt("autocomplete",Vs(t)).map(xX)).map(l=>(this.active.find(u=>u.source==l)||new Wi(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((l,a)=>l==this.active[a])&&(o=this.active);let s=this.open;s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!NX(o,this.active)?s=Ia.build(o,t,this.id,s,i):s&&s.disabled&&!o.some(l=>l.state==1)&&(s=null),!s&&o.every(l=>l.state!=1)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new Wi(l.source,0):l));for(let l of e.effects)l.is(jM)&&(s=s&&s.setSelected(l.value,this.id));return o==this.active&&s==this.open?this:new ip(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?IX:BX}}function NX(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const IX={"aria-autocomplete":"list"},BX={};function K_(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const LX=[];function LM(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(BM);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class Wi{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=LM(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new Wi(r.source,0)),i&4&&r.state==0&&(r=new Wi(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(np))r=new Wi(r.source,1,o.value?Vs(e.state):-1);else if(o.is(tf))r=new Wi(r.source,0);else if(o.is(FM))for(let s of o.value)s.source==r.source&&(r=s);return r}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Wi(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(Vs(e.state))}}class Qa extends Wi{constructor(e,t,i,r,o){super(e,2,t),this.result=i,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Vs(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>s||!r||t&2&&Vs(e.startState)==this.from)return new Wi(this.source,t&4?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return FX(r.validFor,e.state,o,s)?new Qa(this.source,a,r,o,s):r.update&&(r=r.update(r,o,s,new NM(e.state,l,a>=0)))?new Qa(this.source,a,r,r.from,(i=r.to)!==null&&i!==void 0?i:Vs(e.state)):new Wi(this.source,1,a)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Qa(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Wi(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function FX(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):IM(n,!0).test(r)}const FM=ot.define({map(n,e){return n.map(t=>t.map(e))}}),jM=ot.define(),Ai=Tn.define({create(){return ip.start()},update(n,e){return n.update(e)},provide:n=>[n0.from(n,e=>e.tooltip),Ne.contentAttributes.from(n,e=>e.attrs)]});function Eb(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(Ai).active.find(r=>r.source==e.source);return i instanceof Qa?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},vX(n.state,t,i.from,i.to)),{annotations:BM.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const jX=DX(Ai,Eb);function Ph(n,e="option"){return t=>{let i=t.state.field(Ai,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Zn).interactionDelay)return!1;let r=1,o;e=="page"&&(o=c5(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:s-1;return l<0?l=e=="page"?0:s-1:l>=s&&(l=e=="page"?s-1:0),t.dispatch({effects:jM.of(l)}),!0}}const zX=n=>{let e=n.state.field(Ai,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Zn).interactionDelay?!1:Eb(n,e.open.options[e.open.selected])},G_=n=>n.state.field(Ai,!1)?(n.dispatch({effects:np.of(!0)}),!0):!1,VX=n=>{let e=n.state.field(Ai,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:tf.of(null)}),!0)};class HX{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const qX=50,WX=1e3,UX=cn.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Ai).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Ai),t=n.state.facet(Zn);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Ai)==e)return;let i=n.transactions.some(o=>{let s=LM(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(i||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>qX&&Date.now()-s.time>WX){for(let l of s.context.abortListeners)try{l()}catch(a){yi(this.view.state,a)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(np)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.state==1&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Ai);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Vs(e),i=new NM(e,t,n.explicitPos==t,this.view),r=new HX(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:tf.of(null)}),yi(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zn).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Zn);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let s=new Qa(r.active.source,r.active.explicitPos,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:Vs(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)s=s.update(l,t);if(s.hasResult()){e.push(s);continue}}let o=this.view.state.field(Ai).active.find(s=>s.source==r.active.source);if(o&&o.state==1)if(r.done==null){let s=new Wi(r.active.source,0);for(let l of r.updates)s=s.update(l,t);s.state!=1&&e.push(s)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:FM.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Ai,!1);if(e&&e.tooltip&&this.view.state.facet(Zn).closeOnBlur){let t=e.open&&c5(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:tf.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:np.of(!1)}),20),this.composing=0}}}),JX=typeof navigator=="object"&&/Win/.test(navigator.platform),KX=la.highest(Ne.domEventHandlers({keydown(n,e){let t=e.state.field(Ai,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(JX&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(s=>s.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&Eb(e,i),!1}})),GX=Ne.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),nf={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},El=ot.define({map(n,e){let t=e.mapPos(n,-1,bi.TrackAfter);return t??void 0}}),Ob=new class extends Gl{};Ob.startSide=1;Ob.endSide=-1;const zM=Tn.define({create(){return Ct.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(El)&&(n=n.update({add:[Ob.range(t.value,t.value+1)]}));return n}});function QX(){return[YX,zM]}const Cm="()[]{}<>";function VM(n){for(let e=0;e<Cm.length;e+=2)if(Cm.charCodeAt(e)==n)return Cm.charAt(e+1);return G2(n<128?n:n+1)}function HM(n,e){return n.languageDataAt("closeBrackets",e)[0]||nf}const XX=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),YX=Ne.inputHandler.of((n,e,t,i)=>{if((XX?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&or(Qn(i,0))==1||e!=r.from||t!=r.to)return!1;let o=eY(n.state,i);return o?(n.dispatch(o),!0):!1}),ZX=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=HM(n,n.selection.main.head).brackets||nf.brackets,r=null,o=n.changeByRange(s=>{if(s.empty){let l=tY(n.doc,s.head);for(let a of i)if(a==l&&d0(n.doc,s.head)==VM(Qn(a,0)))return{changes:{from:s.head-a.length,to:s.head+a.length},range:pe.cursor(s.head-a.length)}}return{range:r=s}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},$X=[{key:"Backspace",run:ZX}];function eY(n,e){let t=HM(n,n.selection.main.head),i=t.brackets||nf.brackets;for(let r of i){let o=VM(Qn(r,0));if(e==r)return o==r?rY(n,r,i.indexOf(r+r+r)>-1,t):nY(n,r,o,t.before||nf.before);if(e==o&&qM(n,n.selection.main.from))return iY(n,r,o)}return null}function qM(n,e){let t=!1;return n.field(zM).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function d0(n,e){let t=n.sliceString(e,e+2);return t.slice(0,or(Qn(t,0)))}function tY(n,e){let t=n.sliceString(e-2,e);return or(Qn(t,0))==t.length?t:t.slice(1)}function nY(n,e,t,i){let r=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:El.of(s.to+e.length),range:pe.range(s.anchor+e.length,s.head+e.length)};let l=d0(n.doc,s.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:s.head},effects:El.of(s.head+e.length),range:pe.cursor(s.head+e.length)}:{range:r=s}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function iY(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&d0(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:pe.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function rY(n,e,t,i){let r=i.stringPrefixes||nf.stringPrefixes,o=null,s=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:El.of(l.to+e.length),range:pe.range(l.anchor+e.length,l.head+e.length)};let a=l.head,u=d0(n.doc,a),c;if(u==e){if(Q_(n,a))return{changes:{insert:e+e,from:a},effects:El.of(a+e.length),range:pe.cursor(a+e.length)};if(qM(n,a)){let h=t&&n.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:pe.cursor(a+h.length)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(c=X_(n,a-2*e.length,r))>-1&&Q_(n,c))return{changes:{insert:e+e+e+e,from:a},effects:El.of(a+e.length),range:pe.cursor(a+e.length)};if(n.charCategorizer(a)(u)!=en.Word&&X_(n,a,r)>-1&&!oY(n,a,e,r))return{changes:{insert:e+e,from:a},effects:El.of(a+e.length),range:pe.cursor(a+e.length)}}return{range:o=l}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Q_(n,e){let t=di(n).resolveInner(e+1);return t.parent&&t.from==e}function oY(n,e,t,i){let r=di(n).resolveInner(e,-1),o=i.reduce((s,l)=>Math.max(s,l.length),0);for(let s=0;s<5;s++){let l=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let c=r.firstChild;for(;c&&c.from==r.from&&c.to-c.from>t.length+a;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=r.to==e&&r.parent;if(!u)break;r=u}return!1}function X_(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=en.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=en.Word)return o}return-1}function sY(n={}){return[KX,Ai,Zn.of(n),UX,lY,GX]}const WM=[{key:"Ctrl-Space",run:G_},{mac:"Alt-`",run:G_},{key:"Escape",run:VX},{key:"ArrowDown",run:Ph(!0)},{key:"ArrowUp",run:Ph(!1)},{key:"PageDown",run:Ph(!0,"page")},{key:"PageUp",run:Ph(!1,"page")},{key:"Enter",run:zX}],lY=la.highest(Ld.computeN([Zn],n=>n.facet(Zn).defaultKeymap?[WM]:[]));function Y_(n){let e,t,i;return{c(){e=D("div"),t=we("Line: "),i=we(n[0]),k(e,"class","jse-status-bar-info svelte-1nittgn")},m(r,o){j(r,e,o),x(e,t),x(e,i)},p(r,o){o&1&&We(i,r[0])},d(r){r&&z(e)}}}function Z_(n){let e,t,i;return{c(){e=D("div"),t=we("Column: "),i=we(n[1]),k(e,"class","jse-status-bar-info svelte-1nittgn")},m(r,o){j(r,e,o),x(e,t),x(e,i)},p(r,o){o&2&&We(i,r[1])},d(r){r&&z(e)}}}function $_(n){let e,t,i,r;return{c(){e=D("div"),t=we("Selection: "),i=we(n[2]),r=we(" characters"),k(e,"class","jse-status-bar-info svelte-1nittgn")},m(o,s){j(o,e,s),x(e,t),x(e,i),x(e,r)},p(o,s){s&4&&We(i,o[2])},d(o){o&&z(e)}}}function aY(n){let e,t,i,r=n[0]!==void 0&&Y_(n),o=n[1]!==void 0&&Z_(n),s=n[2]!==void 0&&n[2]>0&&$_(n);return{c(){e=D("div"),r&&r.c(),t=Q(),o&&o.c(),i=Q(),s&&s.c(),k(e,"class","jse-status-bar svelte-1nittgn")},m(l,a){j(l,e,a),r&&r.m(e,null),x(e,t),o&&o.m(e,null),x(e,i),s&&s.m(e,null)},p(l,[a]){l[0]!==void 0?r?r.p(l,a):(r=Y_(l),r.c(),r.m(e,t)):r&&(r.d(1),r=null),l[1]!==void 0?o?o.p(l,a):(o=Z_(l),o.c(),o.m(e,i)):o&&(o.d(1),o=null),l[2]!==void 0&&l[2]>0?s?s.p(l,a):(s=$_(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:he,o:he,d(l){l&&z(e),r&&r.d(),o&&o.d(),s&&s.d()}}}function uY(n,e,t){let{editorState:i}=e,r,o,s,l,a;return n.$$set=u=>{"editorState"in u&&t(3,i=u.editorState)},n.$$.update=()=>{var u,c,f,h,d;n.$$.dirty&8&&t(4,r=(c=(u=i==null?void 0:i.selection)==null?void 0:u.main)==null?void 0:c.head),n.$$.dirty&24&&t(5,o=r?(f=i==null?void 0:i.doc)==null?void 0:f.lineAt(r):void 0),n.$$.dirty&32&&t(0,s=o?o.number:void 0),n.$$.dirty&48&&t(1,l=o!==void 0&&r!==void 0?r-o.from+1:void 0),n.$$.dirty&8&&t(2,a=(d=(h=i==null?void 0:i.selection)==null?void 0:h.ranges)==null?void 0:d.reduce((p,m)=>p+m.to-m.from,0))},[s,l,a,i,r,o]}class cY extends je{constructor(e){super(),ze(this,e,uY,aY,xn,{editorState:3})}}const fY=cY,Tb=Nf.define([{tag:ve.propertyName,color:"var(--internal-key-color)"},{tag:ve.number,color:"var(--internal-value-color-number)"},{tag:ve.bool,color:"var(--internal-value-color-boolean)"},{tag:ve.string,color:"var(--internal-value-color-string)"},{tag:ve.keyword,color:"var(--internal-value-color-null)"}]),hY=I5(Tb),dY=Tb.style;Tb.style=n=>dY(n||[]);function pY(n,e=n.state){const t=new Set;for(const{from:i,to:r}of n.visibleRanges){let o=i;for(;o<=r;){const s=e.doc.lineAt(o);t.has(s)||t.add(s),o=s.to+1}}return t}function Og(n){const e=n.selection.main.head;return n.doc.lineAt(e)}function e6(n,e){let t=0;e:for(let i=0;i<n.length;i++)switch(n[i]){case" ":case"":{t+=1;continue e}case"	":{t+=e-t%e;continue e}case"\r":continue e;default:break e}return t}const rp=Ie.define({combine(n){return _r(n,{highlightActiveBlock:!0,hideFirstIndent:!1,markerType:"fullScope",thickness:1})}});class mY{constructor(e,t,i,r){this.lines=e,this.state=t,this.map=new Map,this.unitWidth=i,this.markerType=r;for(const o of this.lines)this.add(o);this.state.facet(rp).highlightActiveBlock&&this.findAndSetActiveLines()}has(e){return this.map.has(typeof e=="number"?e:e.number)}get(e){const t=this.map.get(typeof e=="number"?e:e.number);if(!t)throw new Error("Line not found in indentation map");return t}set(e,t,i){const r=!e.text.trim().length,o={line:e,col:t,level:i,empty:r};return this.map.set(o.line.number,o),o}add(e){if(this.has(e))return this.get(e);if(!e.length||!e.text.trim().length){if(e.number===1)return this.set(e,0,0);if(e.number===this.state.doc.lines){const s=this.closestNonEmpty(e,-1);return this.set(e,0,s.level)}const r=this.closestNonEmpty(e,-1),o=this.closestNonEmpty(e,1);return r.level>=o.level&&this.markerType!=="codeOnly"?this.set(e,0,r.level):r.empty&&r.level===0&&o.level!==0?this.set(e,0,0):o.level>r.level?this.set(e,0,r.level+1):this.set(e,0,o.level)}const t=e6(e.text,this.state.tabSize),i=Math.floor(t/this.unitWidth);return this.set(e,t,i)}closestNonEmpty(e,t){let i=e.number+t;for(;t===-1?i>=1:i<=this.state.doc.lines;){if(this.has(i)){const s=this.get(i);if(!s.empty)return s}const o=this.state.doc.line(i);if(o.text.trim().length){const s=e6(o.text,this.state.tabSize),l=Math.floor(s/this.unitWidth);return this.set(o,s,l)}i+=t}const r=this.state.doc.line(t===-1?1:this.state.doc.lines);return this.set(r,0,0)}findAndSetActiveLines(){const e=Og(this.state);if(!this.has(e))return;let t=this.get(e);if(this.has(t.line.number+1)){const o=this.get(t.line.number+1);o.level>t.level&&(t=o)}if(this.has(t.line.number-1)){const o=this.get(t.line.number-1);o.level>t.level&&(t=o)}if(t.level===0)return;t.active=t.level;let i,r;for(i=t.line.number;i>1;i--){if(!this.has(i-1))continue;const o=this.get(i-1);if(o.level<t.level)break;o.active=t.level}for(r=t.line.number;r<this.state.doc.lines;r++){if(!this.has(r+1))continue;const o=this.get(r+1);if(o.level<t.level)break;o.active=t.level}}}function gY(n){const e={light:"#F0F1F2",dark:"#2B3245",activeLight:"#E4E5E6",activeDark:"#3C445C"};let t=e;return n&&(t=Object.assign(Object.assign({},e),n)),Ne.baseTheme({"&light":{"--indent-marker-bg-color":t.light,"--indent-marker-active-bg-color":t.activeLight},"&dark":{"--indent-marker-bg-color":t.dark,"--indent-marker-active-bg-color":t.activeDark},".cm-line":{position:"relative"},".cm-indent-markers::before":{content:'""',position:"absolute",top:0,left:"2px",right:0,bottom:0,background:"var(--indent-markers)",pointerEvents:"none",zIndex:"-1"}})}function Rh(n,e,t,i,r){return`${`repeating-linear-gradient(to right, var(${n}) 0 ${e}px, transparent ${e}px ${t}ch)`} ${i*t}.5ch/calc(${t*r}ch - 1px) no-repeat`}function bY(n,e,t,i,r){const{level:o,active:s}=n;if(r=r??i,t&&o===0)return[];const l=t?1:0,a=[];if(s!==void 0){const u=s-l-1;u>0&&a.push(Rh("--indent-marker-bg-color",i,e,l,u)),a.push(Rh("--indent-marker-active-bg-color",r,e,s-1,1)),s!==o&&a.push(Rh("--indent-marker-bg-color",i,e,s,o-s))}else a.push(Rh("--indent-marker-bg-color",i,e,l,o-l));return a.join(",")}class yY{constructor(e){this.view=e,this.unitWidth=il(e.state),this.currentLineNumber=Og(e.state).number,this.generate(e.state)}update(e){const t=il(e.state),i=t!==this.unitWidth;i&&(this.unitWidth=t);const r=Og(e.state).number,o=r!==this.currentLineNumber;this.currentLineNumber=r;const s=e.state.facet(rp).highlightActiveBlock&&o;(e.docChanged||e.viewportChanged||i||s)&&this.generate(e.state)}generate(e){const t=new Co,i=pY(this.view,e),{hideFirstIndent:r,markerType:o,thickness:s,activeThickness:l}=e.facet(rp),a=new mY(i,e,this.unitWidth,o);for(const u of i){const c=a.get(u.number);if(!(c!=null&&c.level))continue;const f=bY(c,this.unitWidth,r,s,l);t.add(u.from,u.from,Xe.line({class:"cm-indent-markers",attributes:{style:`--indent-markers: ${f}`}}))}this.decorations=t.finish()}}function kY(n={}){return[rp.of(n),gY(n.colors),cn.fromClass(yY,{decorations:e=>e.decorations})]}class wY{constructor(e){this.view=e,this.indentUnit=il(e.state),this.initialPaddingLeft=null,this.isChrome=window==null?void 0:window.navigator.userAgent.includes("Chrome"),this.generate(e.state)}update(e){const t=il(e.state);(t!==this.indentUnit||e.docChanged||e.viewportChanged)&&(this.indentUnit=t,this.generate(e.state))}generate(e){const t=new Co;this.initialPaddingLeft?this.addStyleToBuilder(t,e,this.initialPaddingLeft):this.view.requestMeasure({read:i=>{const r=i.contentDOM.querySelector(".cm-line");r&&(this.initialPaddingLeft=window.getComputedStyle(r).getPropertyValue("padding-left"),this.addStyleToBuilder(t,i.state,this.initialPaddingLeft)),this.decorations=t.finish()}}),this.decorations=t.finish()}addStyleToBuilder(e,t,i){const r=this.getVisibleLines(t);for(const o of r){const{numColumns:s,containsTab:l}=this.numColumns(o.text,t.tabSize),a=`calc(${s+this.indentUnit}ch + ${i})`,u=this.isChrome?`calc(-${s+this.indentUnit}ch - ${l?1:0}px)`:`-${s+this.indentUnit}ch`;e.add(o.from,o.from,Xe.line({attributes:{style:`padding-left: ${a}; text-indent: ${u};`}}))}}getVisibleLines(e){const t=new Set;let i=null;for(const{from:r,to:o}of this.view.visibleRanges){let s=r;for(;s<=o;){const l=e.doc.lineAt(s);i!==l&&(t.add(l),i=l),s=l.to+1}}return t}numColumns(e,t){let i=0,r=!1;e:for(let o=0;o<e.length;o++)switch(e[o]){case" ":{i+=1;continue e}case"	":{i+=t-i%t,r=!0;continue e}case"\r":continue e;default:break e}return{numColumns:i,containsTab:r}}}const CY=[cn.fromClass(wY,{decorations:n=>n.decorations})];function _Y(n){const e=n.slice(),t=e[28](e[11],e[9]);return e[97]=t,e}function _m(n){const e=n.slice(),t=e[11].length===0;return e[98]=t,e}function t6(n){let e,t;return e=new oW({props:{readOnly:n[1],onFormat:n[17],onCompact:n[18],onSort:n[19],onTransform:n[20],onToggleSearch:n[21],onUndo:n[22],onRedo:n[23],canFormat:!n[98],canCompact:!n[98],canSort:!n[98],canTransform:!n[98],canUndo:n[12],canRedo:n[13],onRenderMenu:n[4]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&2&&(o.readOnly=i[1]),r[0]&2048&&(o.canFormat=!i[98]),r[0]&2048&&(o.canCompact=!i[98]),r[0]&2048&&(o.canSort=!i[98]),r[0]&2048&&(o.canTransform=!i[98]),r[0]&4096&&(o.canUndo=i[12]),r[0]&8192&&(o.canRedo=i[13]),r[0]&16&&(o.onRenderMenu=i[4]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function SY(n){let e;return{c(){e=D("div"),e.innerHTML=`<div class="jse-loading-space svelte-1jv742p"></div> 
      <div class="jse-loading svelte-1jv742p">loading...</div>`,k(e,"class","jse-contents svelte-1jv742p")},m(t,i){j(t,e,i)},p:he,i:he,o:he,d(t){t&&z(e)}}}function vY(n){let e,t,i,r,o,s=n[97]&&n6(n),l=!n[97]&&i6(n);return{c(){e=D("div"),t=Q(),s&&s.c(),i=Q(),l&&l.c(),r=ut(),k(e,"class","jse-contents svelte-1jv742p"),le(e,"jse-hidden",n[97])},m(a,u){j(a,e,u),n[52](e),j(a,t,u),s&&s.m(a,u),j(a,i,u),l&&l.m(a,u),j(a,r,u),o=!0},p(a,u){(!o||u[0]&268438016)&&le(e,"jse-hidden",a[97]),a[97]?s?(s.p(a,u),u[0]&2560&&C(s,1)):(s=n6(a),s.c(),C(s,1),s.m(i.parentNode,i)):s&&(ce(),v(s,1,1,()=>{s=null}),fe()),a[97]?l&&(ce(),v(l,1,1,()=>{l=null}),fe()):l?(l.p(a,u),u[0]&2560&&C(l,1)):(l=i6(a),l.c(),C(l,1),l.m(r.parentNode,r))},i(a){o||(C(s),C(l),o=!0)},o(a){v(s),v(l),o=!1},d(a){a&&z(e),n[52](null),a&&z(t),s&&s.d(a),a&&z(i),l&&l.d(a),a&&z(r)}}}function n6(n){let e,t,i,r=ts(n[11]||"",t1)+"",o,s;return e=new Jr({props:{icon:oa,type:"error",message:`The JSON document is larger than ${ah(n1,1024)}, and may crash your browser when loading it in text mode. Actual size: ${ah(n[11].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:n[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:n[25]},{text:"Cancel",title:"Cancel opening this large document.",onClick:n[26]}],onClose:n[5]}}),{c(){$(e.$$.fragment),t=Q(),i=D("div"),o=we(r),k(i,"class","jse-contents jse-preview svelte-1jv742p")},m(l,a){ee(e,l,a),j(l,t,a),j(l,i,a),x(i,o),s=!0},p(l,a){const u={};a[0]&2048&&(u.message=`The JSON document is larger than ${ah(n1,1024)}, and may crash your browser when loading it in text mode. Actual size: ${ah(l[11].length,1024)}.`),e.$set(u),(!s||a[0]&2048)&&r!==(r=ts(l[11]||"",t1)+"")&&We(o,r)},i(l){s||(C(e.$$.fragment,l),s=!0)},o(l){v(e.$$.fragment,l),s=!1},d(l){te(e,l),l&&z(t),l&&z(i)}}}function i6(n){let e,t,i=!n[14]&&n[0]&&mk(n[11]),r,o,s,l=n[3]&&r6(n),a=n[14]&&o6(n),u=i&&s6(n);return o=new F2({props:{validationErrors:n[10],selectError:n[27]}}),{c(){l&&l.c(),e=Q(),a&&a.c(),t=Q(),u&&u.c(),r=Q(),$(o.$$.fragment)},m(c,f){l&&l.m(c,f),j(c,e,f),a&&a.m(c,f),j(c,t,f),u&&u.m(c,f),j(c,r,f),ee(o,c,f),s=!0},p(c,f){c[3]?l?(l.p(c,f),f[0]&8&&C(l,1)):(l=r6(c),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(ce(),v(l,1,1,()=>{l=null}),fe()),c[14]?a?(a.p(c,f),f[0]&16384&&C(a,1)):(a=o6(c),a.c(),C(a,1),a.m(t.parentNode,t)):a&&(ce(),v(a,1,1,()=>{a=null}),fe()),f[0]&18433&&(i=!c[14]&&c[0]&&mk(c[11])),i?u?(u.p(c,f),f[0]&18433&&C(u,1)):(u=s6(c),u.c(),C(u,1),u.m(r.parentNode,r)):u&&(ce(),v(u,1,1,()=>{u=null}),fe());const h={};f[0]&1024&&(h.validationErrors=c[10]),o.$set(h)},i(c){s||(C(l),C(a),C(u),C(o.$$.fragment,c),s=!0)},o(c){v(l),v(a),v(u),v(o.$$.fragment,c),s=!1},d(c){l&&l.d(c),c&&z(e),a&&a.d(c),c&&z(t),u&&u.d(c),c&&z(r),te(o,c)}}}function r6(n){let e,t;return e=new fY({props:{editorState:n[8]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&256&&(o.editorState=i[8]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function o6(n){let e,t;return e=new Jr({props:{type:"error",icon:oa,message:n[14].message,actions:n[15],onClick:n[29],onClose:n[5]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&16384&&(o.message=i[14].message),r[0]&32768&&(o.actions=i[15]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function s6(n){let e,t;return e=new Jr({props:{type:"success",message:"Do you want to format the JSON?",actions:[{icon:E1,text:"Format",title:"Format JSON: add proper indentation and new lines (Ctrl+I)",onClick:n[17]},{icon:uu,text:"No thanks",title:"Close this message",onClick:n[53]}],onClose:n[5]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&1&&(o.actions=[{icon:E1,text:"Format",title:"Format JSON: add proper indentation and new lines (Ctrl+I)",onClick:i[17]},{icon:uu,text:"No thanks",title:"Close this message",onClick:i[53]}]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function xY(n){let e,t,i,r,o,s=n[2]&&t6(_m(n));const l=[vY,SY],a=[];function u(f,h){return f[16]?1:0}function c(f,h){return h===0?_Y(f):f}return i=u(n),r=a[i]=l[i](c(n,i)),{c(){e=D("div"),s&&s.c(),t=Q(),r.c(),k(e,"class","jse-text-mode svelte-1jv742p"),le(e,"no-main-menu",!n[2])},m(f,h){j(f,e,h),s&&s.m(e,null),x(e,t),a[i].m(e,null),n[54](e),o=!0},p(f,h){f[2]?s?(s.p(_m(f),h),h[0]&4&&C(s,1)):(s=t6(_m(f)),s.c(),C(s,1),s.m(e,t)):s&&(ce(),v(s,1,1,()=>{s=null}),fe()),r.p(c(f,i),h),(!o||h[0]&4)&&le(e,"no-main-menu",!f[2])},i(f){o||(C(s),C(r),o=!0)},o(f){v(s),v(r),o=!1},d(f){f&&z(e),s&&s.d(),a[i].d(),n[54](null)}}}function l6(n){return{from:n.from||0,to:n.to||0,message:n.message||"",actions:n.actions,severity:n.severity}}function MY(n,e,t){let i,r,{readOnly:o}=e,{mainMenuBar:s}=e,{statusBar:l}=e,{askToFormat:a}=e,{externalContent:u}=e,{externalSelection:c}=e,{indentation:f}=e,{tabSize:h}=e,{escapeUnicodeCharacters:d}=e,{parser:p}=e,{validator:m}=e,{validationParser:g}=e,{onChange:b}=e,{onChangeMode:y}=e,{onSelect:_}=e,{onError:M}=e,{onFocus:w}=e,{onBlur:S}=e,{onRenderMenu:E}=e,{onSortModal:I}=e,{onTransformModal:O}=e;const P=Wn("jsoneditor:TextMode"),A={key:"Mod-i",run:Me,shift:Ae,preventDefault:!0},H=typeof window>"u";P("isSSR:",H);let W,q,L,X,Y=!1,G=[];const T=new qo,B=new qo,J=new qo,ne=new qo,_e=new qo;let ae=u,Te=b1(ae,f,p),re=d;br(async()=>{if(!H)try{L=ti({target:W,initialText:xr(Te,Y)?"":i.escapeValue(Te),readOnly:o,indentation:f})}catch(ie){console.error(ie)}}),Ki(()=>{L&&(P("Destroy CodeMirror editor"),L.destroy())});let U=!1,Ce=!1;const Ke=ru(),K=ru();function De(){L&&(P("focus"),L.focus())}let F=!1;Ki(()=>{ji()}),L2({onMount:br,onDestroy:Ki,getWindow:()=>Pu(q),hasFocus:()=>F&&document.hasFocus()||x2(q),onFocus:w,onBlur:()=>{ji(),S()}});function ke(ie){P("patch",ie);const Ge=p.parse(Te),kt=Br(Ge,ie),At=PS(Ge,ie);return xt({text:p.stringify(kt,null,f)}),{json:kt,previousJson:Ge,undo:At,redo:ie}}function Me(){if(P("format"),o)return!1;try{const ie=p.parse(Te);return xt({text:p.stringify(ie,null,f)}),t(0,a=!0),!0}catch(ie){M(ie)}return!1}function Ae(){if(P("compact"),o)return!1;try{const ie=p.parse(Te);return xt({text:p.stringify(ie)}),t(0,a=!1),!0}catch(ie){M(ie)}return!1}function Le(){if(P("repair"),!o)try{xt({text:po(Te)}),t(51,bn=P0),t(14,Un=null)}catch(ie){M(ie)}}function ct(){if(!o)try{const ie=p.parse(Te);F=!0,I({id:Ke,json:ie,rootPath:[],onSort:async({operations:Ge})=>{P("onSort",Ge),ke(Ge)},onClose:()=>{F=!1,De()}})}catch(ie){M(ie)}}function Z({id:ie,rootPath:Ge,onTransform:kt,onClose:At}){try{const It=p.parse(Te);F=!0,O({id:ie||K,json:It,rootPath:Ge||[],onTransform:ln=>{kt?kt({operations:ln,json:It,transformedJson:Br(It,ln)}):(P("onTransform",ln),ke(ln))},onClose:()=>{F=!1,De(),At&&At()}})}catch(It){M(It)}}function Ve(){o||Z({rootPath:[]})}function bt(){L&&(W&&W.querySelector(".cm-search")?Mb(L):xb(L))}function me(){o||L&&(yb(L),De())}function $e(){o||L&&(Ud(L),De())}function Ut(){t(9,Y=!0),xt(u,!0)}function Ue(){y(Gn.tree)}function wt(){Mt()}function _t(ie){P("select validation error",ie);const{from:Ge,to:kt}=Bt(ie);Ge===null||kt===null||(Mn(Ge,kt),De())}function it(ie){P("select parse error",ie);const Ge=Pn(ie,!1),kt=Ge.from!=null?Ge.from:0,At=Ge.to!=null?Ge.to:0;Mn(kt,At),De()}function Mn(ie,Ge){P("setSelection",{anchor:ie,head:Ge}),L&&L.dispatch(L.state.update({selection:{anchor:ie,head:Ge},scrollIntoView:!0}))}function gn(ie,Ge){if(Ge.state.selection.ranges.length===1){const kt=Ge.state.selection.ranges[0],At=Te.slice(kt.from,kt.to);if(At==="{"||At==="["){const It=vp.parse(Te),ln=Object.keys(It.pointers).find(Io=>{var Xr;return((Xr=It.pointers[Io].value)==null?void 0:Xr.pos)===kt.from}),gi=It.pointers[ln];if(ln&&gi&&gi.value&&gi.valueEnd){P("pointer found, selecting inner contents of path:",ln,gi);const Io=gi.value.pos+1,Bo=gi.valueEnd.pos-1;Mn(Io,Bo)}}}}function Dn(){return AQ(Po,{delay:by})}function ti({target:ie,initialText:Ge,readOnly:kt,indentation:At}){P("Create CodeMirror editor",{readOnly:kt,indentation:At});const It=Ht.create({doc:Ge,selection:ni(c),extensions:[Ld.of([bQ,A]),T.of(Dn()),IQ(),KJ(),XJ(),pJ(),pG(),VK(),iJ(),aJ(),Ht.allowMultipleSelections.of(!0),AK(),I5(UK,{fallback:!0}),ZK(),QX(),sY(),MJ(),OJ(),wJ(),$Q(),Ld.of([...$X,...gQ,...kX,...xG,...LK,...WM,...vQ]),hY,kY({hideFirstIndent:!0}),Ne.domEventHandlers({dblclick:gn}),Ne.updateListener.of(ln=>{t(8,X=ln.state),ln.docChanged?Fi():ln.selectionSet&&Zi()}),GQ(),aX({top:!0}),B.of(Ht.readOnly.of(kt)),ne.of(Ht.tabSize.of(h)),J.of(Nn(At)),_e.of(Ne.theme({},{dark:Je()})),Ne.lineWrapping,CY]});return L=new Ne({state:It,parent:ie}),L}function se(){return L?i.unescapeValue(L.state.doc.toString()):""}function Je(){return W?getComputedStyle(W).getPropertyValue("--jse-theme").includes("dark"):!1}function Bt(ie){const{path:Ge,message:kt}=ie,{line:At,column:It,from:ln,to:gi}=PI(i.escapeValue(Te),Ge);return{path:Ge,line:At,column:It,from:ln,to:gi,message:kt,severity:$o.warning,actions:[]}}function Pn(ie,Ge){const{line:kt,column:At,position:It,message:ln}=ie;return{path:[],line:kt,column:At,from:It,to:It,severity:$o.error,message:ln,actions:Ge&&!o?[{name:"Auto repair",apply:()=>Le()}]:null}}function xt(ie,Ge=!1){const kt=b1(ie,f,p),At=!st(ie,ae),It=ae;P("setCodeMirrorContent",{isChanged:At,forceUpdate:Ge}),!(!L||!At&&!Ge)&&(ae=ie,t(11,Te=kt),xr(Te,Y)||L.dispatch({changes:{from:0,to:L.state.doc.length,insert:i.escapeValue(Te)}}),ps(),At&&vr(ae,It))}function de(ie){if(!Mk(ie))return;const Ge=ni(ie);L&&Ge&&(!X||!X.selection.eq(Ge))&&(P("applyExternalSelection",Ge),L.dispatch({selection:Ge}))}function ni(ie){return Mk(ie)?pe.fromJSON(ie):void 0}async function Rn(){P("refresh"),await Yi()}function sn(){P("forceUpdateText",{escapeUnicodeCharacters:d}),L&&L.dispatch({changes:{from:0,to:L.state.doc.length,insert:i.escapeValue(Te)}})}function Mt(){if(!L)return;const ie=se(),Ge=ie!==Te;if(P("onChangeCodeMirrorValue",{isChanged:Ge}),!Ge)return;const kt=ae;t(11,Te=ie),ae={text:Te},ps(),vr(ae,kt),an().then(Zi)}function Do(ie){P("updateLinter",ie),L&&L.dispatch({effects:T.reconfigure(Dn())})}function dl(ie){L&&(P("updateIndentation",ie),L.dispatch({effects:J.reconfigure(Nn(ie))}))}function ds(ie){L&&(P("updateTabSize",ie),L.dispatch({effects:ne.reconfigure(Ht.tabSize.of(ie))}))}function Li(ie){L&&(P("updateReadOnly",ie),L.dispatch({effects:[B.reconfigure(Ht.readOnly.of(ie))]}))}async function Yi(){if(await an(),L){const ie=Je();P("updateTheme",{dark:ie}),L.dispatch({effects:[_e.reconfigure(Ne.theme({},{dark:ie}))]})}}function Nn(ie){return r0.of(typeof ie=="number"?" ".repeat(ie):ie)}function ps(){t(12,U=bG(L.state)>0),t(13,Ce=yG(L.state)>0),P({canUndo:U,canRedo:Ce})}const Fi=Lp(Mt,by);function ji(){Fi.flush()}function vr(ie,Ge){b&&b(ie,Ge,{contentErrors:Mr(),patchResult:null})}function Zi(){_({type:Tt.text,...X.selection.toJSON()})}function xr(ie,Ge){return(ie?ie.length>n1:!1)&&!Ge}let bn=P0,Un=null;function Po(){if(xr(Te,Y))return[];const ie=Mr();if(R3(ie)){const{parseError:Ge,isRepairable:kt}=ie;return[l6(Pn(Ge,kt))]}return yz(ie)?ie.validationErrors.map(Bt).map(l6):[]}function Mr(){P("validate:start"),ji();const ie=pl(i.escapeValue(Te),m,p,g);return R3(ie)?(t(51,bn=ie.isRepairable?_y:QO),t(14,Un=ie.parseError),t(10,G=[])):(t(51,bn=P0),t(14,Un=null),t(10,G=(ie==null?void 0:ie.validationErrors)||[])),P("validate:end"),ie}const pl=Of(Zj);function Ro(){Un&&it(Un)}const hn={icon:YL,text:"Show me",title:"Move to the parse error location",onClick:Ro};function ms(ie){ft[ie?"unshift":"push"](()=>{W=ie,t(6,W)})}const $i=()=>t(0,a=!1);function No(ie){ft[ie?"unshift":"push"](()=>{q=ie,t(7,q)})}return n.$$set=ie=>{"readOnly"in ie&&t(1,o=ie.readOnly),"mainMenuBar"in ie&&t(2,s=ie.mainMenuBar),"statusBar"in ie&&t(3,l=ie.statusBar),"askToFormat"in ie&&t(0,a=ie.askToFormat),"externalContent"in ie&&t(30,u=ie.externalContent),"externalSelection"in ie&&t(31,c=ie.externalSelection),"indentation"in ie&&t(32,f=ie.indentation),"tabSize"in ie&&t(33,h=ie.tabSize),"escapeUnicodeCharacters"in ie&&t(34,d=ie.escapeUnicodeCharacters),"parser"in ie&&t(35,p=ie.parser),"validator"in ie&&t(36,m=ie.validator),"validationParser"in ie&&t(37,g=ie.validationParser),"onChange"in ie&&t(38,b=ie.onChange),"onChangeMode"in ie&&t(39,y=ie.onChangeMode),"onSelect"in ie&&t(40,_=ie.onSelect),"onError"in ie&&t(41,M=ie.onError),"onFocus"in ie&&t(42,w=ie.onFocus),"onBlur"in ie&&t(43,S=ie.onBlur),"onRenderMenu"in ie&&t(4,E=ie.onRenderMenu),"onSortModal"in ie&&t(44,I=ie.onSortModal),"onTransformModal"in ie&&t(45,O=ie.onTransformModal)},n.$$.update=()=>{n.$$.dirty[1]&8&&(i=_2({escapeControlCharacters:!1,escapeUnicodeCharacters:d})),n.$$.dirty[0]&1073741824&&xt(u),n.$$.dirty[1]&1&&de(c),n.$$.dirty[1]&32&&Do(m),n.$$.dirty[1]&2&&dl(f),n.$$.dirty[1]&4&&ds(h),n.$$.dirty[0]&2&&Li(o),n.$$.dirty[1]&524296&&re!==d&&(t(50,re=d),sn()),n.$$.dirty[0]&2|n.$$.dirty[1]&1048576&&t(15,r=bn===_y&&!o?[{icon:qp,text:"Auto repair",title:"Automatically repair JSON",onClick:Le},hn]:[hn])},[a,o,s,l,E,De,W,q,X,Y,G,Te,U,Ce,Un,r,H,Me,Ae,ct,Ve,bt,me,$e,Ut,Ue,wt,_t,xr,Ro,u,c,f,h,d,p,m,g,b,y,_,M,w,S,I,O,ke,Z,Rn,Mr,re,bn,ms,$i,No]}class AY extends je{constructor(e){super(),ze(this,e,MY,xY,Ze,{readOnly:1,mainMenuBar:2,statusBar:3,askToFormat:0,externalContent:30,externalSelection:31,indentation:32,tabSize:33,escapeUnicodeCharacters:34,parser:35,validator:36,validationParser:37,onChange:38,onChangeMode:39,onSelect:40,onError:41,onFocus:42,onBlur:43,onRenderMenu:4,onSortModal:44,onTransformModal:45,focus:5,patch:46,openTransformModal:47,refresh:48,validate:49},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[5]}get patch(){return this.$$.ctx[46]}get openTransformModal(){return this.$$.ctx[47]}get refresh(){return this.$$.ctx[48]}get validate(){return this.$$.ctx[49]}}const EY=AY;function OY(n){let e,t;return e=new Yp({props:{items:n[0]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,[r]){const o={};r&1&&(o.items=i[0]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function TY(n,e,t){let{json:i}=e,{readOnly:r}=e,{historyState:o}=e,{onSort:s}=e,{onTransform:l}=e,{onContextMenu:a}=e,{onUndo:u}=e,{onRedo:c}=e,{onRenderMenu:f}=e,h,d;return n.$$set=p=>{"json"in p&&t(1,i=p.json),"readOnly"in p&&t(2,r=p.readOnly),"historyState"in p&&t(3,o=p.historyState),"onSort"in p&&t(4,s=p.onSort),"onTransform"in p&&t(5,l=p.onTransform),"onContextMenu"in p&&t(6,a=p.onContextMenu),"onUndo"in p&&t(7,u=p.onUndo),"onRedo"in p&&t(8,c=p.onRedo),"onRenderMenu"in p&&t(9,f=p.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&510&&t(10,h=r?[{type:"space"}]:[{type:"button",icon:Wp,title:"Sort",className:"jse-sort",onClick:s,disabled:r||i===void 0},{type:"button",icon:Hp,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:l,disabled:r||i===void 0},{type:"button",icon:s8,title:r2,className:"jse-contextmenu",onClick:a},{type:"separator"},{type:"button",icon:P2,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:u,disabled:!o.canUndo},{type:"button",icon:D2,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:c,disabled:!o.canRedo},{type:"space"}]),n.$$.dirty&1536&&t(0,d=f(h))},[d,i,r,o,s,l,a,u,c,f,h]}class DY extends je{constructor(e){super(),ze(this,e,TY,OY,Ze,{json:1,readOnly:2,historyState:3,onSort:4,onTransform:5,onContextMenu:6,onUndo:7,onRedo:8,onRenderMenu:9})}}const PY=DY;function a6(n,e,t){const i=n.slice();return i[9]=e[t],i}function RY(n){const e=n.slice(),t=e[9].action;return e[12]=t,e}function NY(n){let e=n[9].component,t,i,r=u6(n);return{c(){r.c(),t=ut()},m(o,s){r.m(o,s),j(o,t,s),i=!0},p(o,s){s&1&&Ze(e,e=o[9].component)?(ce(),v(r,1,1,he),fe(),r=u6(o),r.c(),C(r,1),r.m(t.parentNode,t)):r.p(o,s)},i(o){i||(C(r),i=!0)},o(o){v(r),i=!1},d(o){o&&z(t),r.d(o)}}}function IY(n){let e=n[9].action,t,i=c6(n);return{c(){i.c(),t=ut()},m(r,o){i.m(r,o),j(r,t,o)},p(r,o){o&1&&Ze(e,e=r[9].action)?(i.d(1),i=c6(r),i.c(),i.m(t.parentNode,t)):i.p(r,o)},i:he,o:he,d(r){r&&z(t),i.d(r)}}}function u6(n){let e,t,i;const r=[n[9].props];var o=n[9].component;function s(l){let a={};for(let u=0;u<r.length;u+=1)a=Qi(a,r[u]);return{props:a}}return o&&(e=bo(o,s())),{c(){e&&$(e.$$.fragment),t=ut()},m(l,a){e&&ee(e,l,a),j(l,t,a),i=!0},p(l,a){const u=a&1?us(r,[yf(l[9].props)]):{};if(a&1&&o!==(o=l[9].component)){if(e){ce();const c=e;v(c.$$.fragment,1,0,()=>{te(c,1)}),fe()}o?(e=bo(o,s()),$(e.$$.fragment),C(e.$$.fragment,1),ee(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(l){i||(e&&C(e.$$.fragment,l),i=!0)},o(l){e&&v(e.$$.fragment,l),i=!1},d(l){l&&z(t),e&&te(e,l)}}}function c6(n){let e,t,i,r;return{c(){e=D("div"),k(e,"role","button"),k(e,"tabindex","-1"),k(e,"class","jse-value jse-readonly-password"),k(e,"data-type","selectable-value")},m(o,s){j(o,e,s),i||(r=vn(t=n[12].call(null,e,n[9].props)),i=!0)},p(o,s){n=o,t&&Ei(t.update)&&s&1&&t.update.call(null,n[9].props)},d(o){o&&z(e),i=!1,r()}}}function f6(n){let e,t,i,r,o;const s=[IY,NY],l=[];function a(c,f){return f&1&&(e=null),e==null&&(e=!!v8(c[9])),e?0:1}function u(c,f){return f===0?RY(c):c}return t=a(n,-1),i=l[t]=s[t](u(n,t)),{c(){i.c(),r=ut()},m(c,f){l[t].m(c,f),j(c,r,f),o=!0},p(c,f){let h=t;t=a(c,f),t===h?l[t].p(u(c,t),f):(ce(),v(l[h],1,1,()=>{l[h]=null}),fe(),i=l[t],i?i.p(u(c,t),f):(i=l[t]=s[t](u(c,t)),i.c()),C(i,1),i.m(r.parentNode,r))},i(c){o||(C(i),o=!0)},o(c){v(i),o=!1},d(c){l[t].d(c),c&&z(r)}}}function BY(n){let e,t,i=n[0],r=[];for(let s=0;s<i.length;s+=1)r[s]=f6(a6(n,i,s));const o=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=ut()},m(s,l){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,l);j(s,e,l),t=!0},p(s,[l]){if(l&1){i=s[0];let a;for(a=0;a<i.length;a+=1){const u=a6(s,i,a);r[a]?(r[a].p(u,l),C(r[a],1)):(r[a]=f6(u),r[a].c(),C(r[a],1),r[a].m(e.parentNode,e))}for(ce(),a=i.length;a<r.length;a+=1)o(a);fe()}},i(s){if(!t){for(let l=0;l<i.length;l+=1)C(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)v(r[l]);t=!1},d(s){mn(r,s),s&&z(e)}}}function LY(n,e,t){let i,r,{path:o}=e,{value:s}=e,{context:l}=e,{enforceString:a}=e,{selection:u}=e,{searchResultItems:c}=e;function f(h,d){return l.onPatch(pL(h,l.getJson()),d)}return n.$$set=h=>{"path"in h&&t(1,o=h.path),"value"in h&&t(2,s=h.value),"context"in h&&t(3,l=h.context),"enforceString"in h&&t(4,a=h.enforceString),"selection"in h&&t(5,u=h.selection),"searchResultItems"in h&&t(6,c=h.searchResultItems)},n.$$.update=()=>{n.$$.dirty&40&&t(7,i=!l.readOnly&&mt(u)&&hi(u)),n.$$.dirty&254&&t(0,r=l.onRenderValue({path:o,value:s,readOnly:l.readOnly,enforceString:a,isEditing:i,parser:l.parser,normalization:l.normalization,selection:u,searchResultItems:c,onPatch:f,onPasteJson:l.onPasteJson,onSelect:l.onSelect,onFind:l.onFind,findNextInside:l.findNextInside,focus:l.focus}))},[r,o,s,l,a,u,c,i]}class FY extends je{constructor(e){super(),ze(this,e,LY,BY,Ze,{path:1,value:2,context:3,enforceString:4,selection:5,searchResultItems:6})}}const jY=FY;function zY(n){let e,t=ts(n[2].stringify(n[1])??"",ky)+"",i,r,o;return{c(){e=D("button"),i=we(t),k(e,"type","button"),k(e,"class","jse-inline-value svelte-1ihtvqr"),le(e,"jse-selected",n[3])},m(s,l){j(s,e,l),x(e,i),r||(o=ue(e,"dblclick",n[5]),r=!0)},p(s,[l]){l&6&&t!==(t=ts(s[2].stringify(s[1])??"",ky)+"")&&We(i,t),l&8&&le(e,"jse-selected",s[3])},i:he,o:he,d(s){s&&z(e),r=!1,o()}}}function VY(n,e,t){let{path:i}=e,{value:r}=e,{parser:o}=e,{isSelected:s}=e,{onEdit:l}=e;const a=()=>l(i);return n.$$set=u=>{"path"in u&&t(0,i=u.path),"value"in u&&t(1,r=u.value),"parser"in u&&t(2,o=u.parser),"isSelected"in u&&t(3,s=u.isSelected),"onEdit"in u&&t(4,l=u.onEdit)},[i,r,o,s,l,a]}class HY extends je{constructor(e){super(),ze(this,e,VY,zY,Ze,{path:0,value:1,parser:2,isSelected:3,onEdit:4})}}const qY=HY;function h6(n){let e,t,i,r;return t=new ht({props:{data:n[1]===cr.asc?lr:jk}}),{c(){e=D("span"),$(t.$$.fragment),k(e,"class","jse-column-sort-icon svelte-1jkhbpx"),k(e,"title",i=`Currently sorted in ${n[2]} order`)},m(o,s){j(o,e,s),ee(t,e,null),r=!0},p(o,s){const l={};s&2&&(l.data=o[1]===cr.asc?lr:jk),t.$set(l),(!r||s&4&&i!==(i=`Currently sorted in ${o[2]} order`))&&k(e,"title",i)},i(o){r||(C(t.$$.fragment,o),r=!0)},o(o){v(t.$$.fragment,o),r=!1},d(o){o&&z(e),te(t)}}}function WY(n){let e,t,i=ts(n[3],wy)+"",r,o,s,l,a,u,c=n[1]!==void 0&&h6(n);return{c(){e=D("button"),t=D("span"),r=we(i),o=Q(),c&&c.c(),k(t,"class","jse-column-name"),k(e,"type","button"),k(e,"class","jse-column-header svelte-1jkhbpx"),k(e,"title",s=n[0]?n[3]:n[3]+" (Click to sort the data by this column)"),le(e,"jse-readonly",n[0])},m(f,h){j(f,e,h),x(e,t),x(t,r),x(e,o),c&&c.m(e,null),l=!0,a||(u=ue(e,"click",n[4]),a=!0)},p(f,[h]){(!l||h&8)&&i!==(i=ts(f[3],wy)+"")&&We(r,i),f[1]!==void 0?c?(c.p(f,h),h&2&&C(c,1)):(c=h6(f),c.c(),C(c,1),c.m(e,null)):c&&(ce(),v(c,1,1,()=>{c=null}),fe()),(!l||h&9&&s!==(s=f[0]?f[3]:f[3]+" (Click to sort the data by this column)"))&&k(e,"title",s),(!l||h&1)&&le(e,"jse-readonly",f[0])},i(f){l||(C(c),l=!0)},o(f){v(c),l=!1},d(f){f&&z(e),c&&c.d(),a=!1,u()}}}function UY(n,e,t){let i,r,o,{path:s}=e,{sortedColumn:l}=e,{readOnly:a}=e,{onSort:u}=e;function c(){a||u({path:s,sortDirection:r===cr.asc?cr.desc:cr.asc})}return n.$$set=f=>{"path"in f&&t(5,s=f.path),"sortedColumn"in f&&t(6,l=f.sortedColumn),"readOnly"in f&&t(0,a=f.readOnly),"onSort"in f&&t(7,u=f.onSort)},n.$$.update=()=>{n.$$.dirty&32&&t(3,i=yt(s)?"values":Ri(s)),n.$$.dirty&96&&t(1,r=l&&st(s,l==null?void 0:l.path)?l.sortDirection:void 0),n.$$.dirty&2&&t(2,o=r?XO[r]:void 0)},[a,r,o,i,c,s,l,u]}class JY extends je{constructor(e){super(),ze(this,e,UY,WY,Ze,{path:5,sortedColumn:6,readOnly:0,onSort:7})}}const KY=JY;let Nh,Ih;function UM(n,e){return Nh||(Ih=new WeakMap,Nh=new ResizeObserver(t=>{for(const i of t){const r=Ih.get(i.target);r&&r(i.target)}})),Ih.set(n,e),Nh.observe(n),{destroy:()=>{Ih.delete(n),Nh.unobserve(n)}}}function GY(n){let e,t;return e=new M8({props:{items:n[2],onCloseContextMenu:n[1],tip:n[0]?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,[r]){const o={};r&4&&(o.items=i[2]),r&2&&(o.onCloseContextMenu=i[1]),r&1&&(o.tip=i[0]?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function QY(n,e,t){let i,r,o,s,l,a,u,c,f,{json:h}=e,{documentState:d}=e,{parser:p}=e,{showTip:m}=e,{onCloseContextMenu:g}=e,{onRenderContextMenu:b}=e,{onEditValue:y}=e,{onEditRow:_}=e,{onToggleEnforceString:M}=e,{onCut:w}=e,{onCopy:S}=e,{onPaste:E}=e,{onRemove:I}=e,{onDuplicateRow:O}=e,{onInsertBeforeRow:P}=e,{onInsertAfterRow:A}=e,{onRemoveRow:H}=e,W;return n.$$set=q=>{"json"in q&&t(3,h=q.json),"documentState"in q&&t(4,d=q.documentState),"parser"in q&&t(5,p=q.parser),"showTip"in q&&t(0,m=q.showTip),"onCloseContextMenu"in q&&t(1,g=q.onCloseContextMenu),"onRenderContextMenu"in q&&t(6,b=q.onRenderContextMenu),"onEditValue"in q&&t(7,y=q.onEditValue),"onEditRow"in q&&t(8,_=q.onEditRow),"onToggleEnforceString"in q&&t(9,M=q.onToggleEnforceString),"onCut"in q&&t(10,w=q.onCut),"onCopy"in q&&t(11,S=q.onCopy),"onPaste"in q&&t(12,E=q.onPaste),"onRemove"in q&&t(13,I=q.onRemove),"onDuplicateRow"in q&&t(14,O=q.onDuplicateRow),"onInsertBeforeRow"in q&&t(15,P=q.onInsertBeforeRow),"onInsertAfterRow"in q&&t(16,A=q.onInsertAfterRow),"onRemoveRow"in q&&t(17,H=q.onRemoveRow)},n.$$.update=()=>{n.$$.dirty&16&&t(24,i=d.selection),n.$$.dirty&8&&t(26,r=h!==void 0),n.$$.dirty&16777216&&t(19,o=!!i),n.$$.dirty&16777224&&t(25,s=h!==void 0&&i?Pe(h,Fe(i)):void 0),n.$$.dirty&83886080&&t(20,l=r&&(vt(i)||un(i)||mt(i))),n.$$.dirty&83886080&&t(23,a=r&&i!=null&&Cd(i)),n.$$.dirty&41943040&&t(21,u=a&&!Qt(s)),n.$$.dirty&50331696&&t(22,c=i!=null&&s!==void 0?ns(s,d.enforceStringMap,xe(Fe(i)),p):!1),n.$$.dirty&16514944&&t(18,W=[{type:"separator"},{type:"row",items:[{type:"column",items:[{type:"label",text:"Table cell:"},{type:"dropdown-button",main:{type:"button",onClick:()=>y(),icon:Va,text:"Edit",title:"Edit the value (Double-click on the value)",disabled:!a},width:"11em",items:[{type:"button",icon:Va,text:"Edit",title:"Edit the value (Double-click on the value)",onClick:()=>y(),disabled:!a},{type:"button",icon:c?Ic:Bc,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:()=>M(),disabled:!u}]},{type:"dropdown-button",main:{type:"button",onClick:()=>w(!0),icon:za,text:"Cut",title:"Cut selected contents, formatted with indentation (Ctrl+X)",disabled:!l},width:"10em",items:[{type:"button",icon:za,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:()=>w(!0),disabled:!l},{type:"button",icon:za,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:()=>w(!1),disabled:!l}]},{type:"dropdown-button",main:{type:"button",onClick:()=>S(!0),icon:js,text:"Copy",title:"Copy selected contents, formatted with indentation (Ctrl+C)",disabled:!l},width:"12em",items:[{type:"button",icon:js,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:()=>S(!1),disabled:!l},{type:"button",icon:js,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:()=>S(!1),disabled:!l}]},{type:"button",onClick:()=>E(),icon:r8,text:"Paste",title:"Paste clipboard contents (Ctrl+V)",disabled:!o},{type:"button",onClick:()=>I(),icon:v1,text:"Remove",title:"Remove selected contents (Delete)",disabled:!l}]},{type:"column",items:[{type:"label",text:"Table row:"},{type:"button",onClick:()=>_(),icon:Va,text:"Edit row",title:"Edit the current row",disabled:!l},{type:"button",onClick:()=>O(),icon:a8,text:"Duplicate row",title:"Duplicate the current row",disabled:!o},{type:"button",onClick:()=>P(),icon:Da,text:"Insert before",title:"Insert a row before the current row",disabled:!o},{type:"button",onClick:()=>A(),icon:Da,text:"Insert after",title:"Insert a row after the current row",disabled:!o},{type:"button",onClick:()=>H(),icon:v1,text:"Remove row",title:"Remove current row",disabled:!o}]}]}]),n.$$.dirty&262208&&t(2,f=b(W))},[m,g,f,h,d,p,b,y,_,M,w,S,E,I,O,P,A,H,W,o,l,u,c,a,i,s,r]}class XY extends je{constructor(e){super(),ze(this,e,QY,GY,Ze,{json:3,documentState:4,parser:5,showTip:0,onCloseContextMenu:1,onRenderContextMenu:6,onEditValue:7,onEditRow:8,onToggleEnforceString:9,onCut:10,onCopy:11,onPaste:12,onRemove:13,onDuplicateRow:14,onInsertBeforeRow:15,onInsertAfterRow:16,onRemoveRow:17})}}const YY=XY;function d6(n,e,t){const i=n.slice();i[14]=e[t];const r=i[8](i[14]);return i[15]=r,i}function ZY(n){let e,t;return{c(){e=we(n[6]),t=we(" cannot be opened in table mode.")},m(i,r){j(i,e,r),j(i,t,r)},p(i,r){r&64&&We(e,i[6])},d(i){i&&z(e),i&&z(t)}}}function $Y(n){let e;return{c(){e=we(`An object cannot be opened in table mode. You can open a nested array instead, or open the
        document in tree mode.`)},m(t,i){j(t,e,i)},p:he,d(t){t&&z(e)}}}function eZ(n){let e;return{c(){e=we("You can open the document in tree mode instead.")},m(t,i){j(t,e,i)},d(t){t&&z(e)}}}function tZ(n){let e,t,i;return{c(){e=we("You can open the document in tree mode instead, or paste a JSON Array using "),t=D("b"),t.textContent="Ctrl+V",i=we(".")},m(r,o){j(r,e,o),j(r,t,o),j(r,i,o)},d(r){r&&z(e),r&&z(t),r&&z(i)}}}function p6(n){let e,t,i,r=Ri(n[14])+"",o,s,l,a,u=n[15]+"",c,f,h=n[15]!==1?"items":"item",d,p,m,g;function b(){return n[12](n[14])}return{c(){e=D("button"),t=we(n[7]),i=we(' "'),o=we(r),s=we(`"
        `),l=D("span"),a=we("("),c=we(u),f=Q(),d=we(h),p=we(")"),k(l,"class","jse-nested-array-count svelte-qo0d0q"),k(e,"type","button"),k(e,"class","jse-nested-array-action svelte-qo0d0q")},m(y,_){j(y,e,_),x(e,t),x(e,i),x(e,o),x(e,s),x(e,l),x(l,a),x(l,c),x(l,f),x(l,d),x(l,p),m||(g=ue(e,"click",b),m=!0)},p(y,_){n=y,_&128&&We(t,n[7]),_&8&&r!==(r=Ri(n[14])+"")&&We(o,r),_&8&&u!==(u=n[15]+"")&&We(c,u),_&8&&h!==(h=n[15]!==1?"items":"item")&&We(d,h)},d(y){y&&z(e),m=!1,g()}}}function nZ(n){let e,t,i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y;function _(A,H){return A[5]?$Y:ZY}let M=_(n),w=M(n);function S(A,H){return A[4]&&!A[0]?tZ:eZ}let E=S(n),I=E(n),O=n[3],P=[];for(let A=0;A<O.length;A+=1)P[A]=p6(d6(n,O,A));return{c(){e=D("div"),t=D("div"),i=Q(),r=D("div"),o=D("div"),s=we(n[6]),l=Q(),a=D("div"),w.c(),u=Q(),I.c(),c=Q();for(let A=0;A<P.length;A+=1)P[A].c();f=Q(),h=D("button"),d=we(n[7]),p=we(" in tree mode"),m=Q(),g=D("div"),k(t,"class","jse-space jse-before svelte-qo0d0q"),k(o,"class","jse-nested-arrays-title"),k(a,"class","jse-nested-arrays-info svelte-qo0d0q"),k(h,"type","button"),k(h,"class","jse-nested-array-action svelte-qo0d0q"),k(r,"class","jse-nested-arrays svelte-qo0d0q"),k(g,"class","jse-space jse-after svelte-qo0d0q"),k(e,"class","jse-table-mode-welcome svelte-qo0d0q")},m(A,H){j(A,e,H),x(e,t),x(e,i),x(e,r),x(r,o),x(o,s),x(r,l),x(r,a),w.m(a,null),x(a,u),I.m(a,null),x(r,c);for(let W=0;W<P.length;W+=1)P[W]&&P[W].m(r,null);x(r,f),x(r,h),x(h,d),x(h,p),x(e,m),x(e,g),b||(y=ue(h,"click",n[13]),b=!0)},p(A,[H]){if(H&64&&We(s,A[6]),M===(M=_(A))&&w?w.p(A,H):(w.d(1),w=M(A),w&&(w.c(),w.m(a,u))),E!==(E=S(A))&&(I.d(1),I=E(A),I&&(I.c(),I.m(a,null))),H&394){O=A[3];let W;for(W=0;W<O.length;W+=1){const q=d6(A,O,W);P[W]?P[W].p(q,H):(P[W]=p6(q),P[W].c(),P[W].m(r,f))}for(;W<P.length;W+=1)P[W].d(1);P.length=O.length}H&128&&We(d,A[7])},i:he,o:he,d(A){A&&z(e),w.d(),I.d(),mn(P,A),b=!1,y()}}}function iZ(n,e,t){let i,r,o,s,{text:l}=e,{json:a}=e,{readOnly:u}=e,{parser:c}=e,{openJSONEditorModal:f}=e,{onChangeMode:h}=e,d;function p(b){return Pe(a,b).length}const m=b=>f(b),g=()=>h(Gn.tree);return n.$$set=b=>{"text"in b&&t(9,l=b.text),"json"in b&&t(10,a=b.json),"readOnly"in b&&t(0,u=b.readOnly),"parser"in b&&t(11,c=b.parser),"openJSONEditorModal"in b&&t(1,f=b.openJSONEditorModal),"onChangeMode"in b&&t(2,h=b.onChangeMode)},n.$$.update=()=>{n.$$.dirty&1&&t(7,i=u?"View":"Edit"),n.$$.dirty&1024&&t(3,d=a?Cq(a).slice(0,99).filter(b=>b.length>0):[]),n.$$.dirty&8&&t(5,r=!yt(d)),n.$$.dirty&1536&&t(4,o=a===void 0&&(l===""||l===void 0)),n.$$.dirty&3120&&t(6,s=r?"Object with nested arrays":o?"An empty document":Yt(a)?"An object":Nt(a)?"An empty array":`A ${h2(a,c)}`)},[u,f,h,d,o,r,s,i,p,l,a,c,m,g]}class rZ extends je{constructor(e){super(),ze(this,e,iZ,nZ,Ze,{text:9,json:10,readOnly:0,parser:11,openJSONEditorModal:1,onChangeMode:2})}}const oZ=rZ;function sZ(n){let e,t,i,r,o,s;return t=new ht({props:{data:cF}}),{c(){e=D("button"),$(t.$$.fragment),k(e,"type","button"),k(e,"class","jse-column-header svelte-nhkcsd"),k(e,"title",i=`The Columns are created by sampling ${n[1]} items out of ${n[0]}. If you're missing a column, click here to sample all of the items instead of a subset. This is slower.`)},m(l,a){j(l,e,a),ee(t,e,null),r=!0,o||(s=ue(e,"click",n[3]),o=!0)},p(l,[a]){(!r||a&3&&i!==(i=`The Columns are created by sampling ${l[1]} items out of ${l[0]}. If you're missing a column, click here to sample all of the items instead of a subset. This is slower.`))&&k(e,"title",i)},i(l){r||(C(t.$$.fragment,l),r=!0)},o(l){v(t.$$.fragment,l),r=!1},d(l){l&&z(e),te(t),o=!1,s()}}}function lZ(n,e,t){let{count:i}=e,{maxSampleCount:r}=e,{onRefresh:o}=e;const s=()=>o();return n.$$set=l=>{"count"in l&&t(0,i=l.count),"maxSampleCount"in l&&t(1,r=l.maxSampleCount),"onRefresh"in l&&t(2,o=l.onRefresh)},[i,r,o,s]}class aZ extends je{constructor(e){super(),ze(this,e,lZ,sZ,Ze,{count:0,maxSampleCount:1,onRefresh:2})}}const uZ=aZ;function m6(n,e,t){var l;const i=n.slice();i[123]=e[t],i[128]=t;const r=i[23].startIndex+i[128];i[124]=r;const o=i[22].rows[i[124]];i[125]=o;const s=J2([String(i[124])],(l=i[125])==null?void 0:l.row);return i[126]=s,i}function g6(n,e,t){var u;const i=n.slice();i[129]=e[t],i[135]=t;const r=[String(i[124])].concat(i[129]);i[130]=r;const o=Pe(i[123],i[129]);i[131]=o;const s=mt(i[11].selection)&&Qs(i[11].selection.path,i[130]);i[132]=s;const l=(u=i[125])==null?void 0:u.columns[i[135]];i[133]=l;const a=J2(i[130],i[133]);return i[126]=a,i}function b6(n,e,t){const i=n.slice();return i[129]=e[t],i}function Sm(n){var i;const e=n.slice(),t=J2([],(i=e[22])==null?void 0:i.root);return e[126]=t,e}function y6(n){let e,t;return e=new PY({props:{json:n[8],readOnly:n[0],historyState:n[20],onSort:n[41],onTransform:n[42],onUndo:n[43],onRedo:n[44],onContextMenu:n[33],onRenderMenu:n[5]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&256&&(o.json=i[8]),r[0]&1&&(o.readOnly=i[0]),r[0]&1048576&&(o.historyState=i[20]),r[0]&32&&(o.onRenderMenu=i[5]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function cZ(n){let e;return{c(){e=D("div"),e.innerHTML=`<div class="jse-loading-space svelte-df6l8"></div> 
      <div class="jse-loading svelte-df6l8">loading...</div>`,k(e,"class","jse-contents jse-contents-loading svelte-df6l8")},m(t,i){j(t,e,i)},p:he,i:he,o:he,d(t){t&&z(e)}}}function fZ(n){let e,t,i,r,o,s,l,a,u;const c=[pZ,dZ,hZ],f=[];function h(d,p){return d[25]?0:d[17]&&d[16]!==void 0&&d[16]!==""?1:2}return r=h(n),o=f[r]=c[r](n),{c(){e=D("label"),t=D("input"),i=Q(),o.c(),s=ut(),k(t,"type","text"),t.readOnly=!0,k(t,"tabindex","-1"),k(t,"class","jse-hidden-input svelte-df6l8"),k(e,"class","jse-hidden-input-label svelte-df6l8")},m(d,p){j(d,e,p),x(e,t),n[73](t),j(d,i,p),f[r].m(d,p),j(d,s,p),l=!0,a||(u=ue(t,"paste",n[38]),a=!0)},p(d,p){let m=r;r=h(d),r===m?f[r].p(d,p):(ce(),v(f[m],1,1,()=>{f[m]=null}),fe(),o=f[r],o?o.p(d,p):(o=f[r]=c[r](d),o.c()),C(o,1),o.m(s.parentNode,s))},i(d){l||(C(o),l=!0)},o(d){v(o),l=!1},d(d){d&&z(e),n[73](null),d&&z(i),f[r].d(d),d&&z(s),a=!1,u()}}}function hZ(n){let e,t;return e=new oZ({props:{text:n[16],json:n[8],readOnly:n[0],parser:n[2],openJSONEditorModal:n[40],onChangeMode:n[4]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&65536&&(o.text=i[16]),r[0]&256&&(o.json=i[8]),r[0]&1&&(o.readOnly=i[0]),r[0]&4&&(o.parser=i[2]),r[0]&16&&(o.onChangeMode=i[4]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function dZ(n){let e,t,i,r;return e=new Jr({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:Xs,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:n[36]}]}}),i=new L8({props:{text:n[16],json:n[8],indentation:n[3],parser:n[2]}}),{c(){$(e.$$.fragment),t=Q(),$(i.$$.fragment)},m(o,s){ee(e,o,s),j(o,t,s),ee(i,o,s),r=!0},p(o,s){const l={};s[0]&1&&(l.actions=o[0]?[]:[{icon:Xs,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:o[36]}]),e.$set(l);const a={};s[0]&65536&&(a.text=o[16]),s[0]&256&&(a.json=o[8]),s[0]&8&&(a.indentation=o[3]),s[0]&4&&(a.parser=o[2]),i.$set(a)},i(o){r||(C(e.$$.fragment,o),C(i.$$.fragment,o),r=!0)},o(o){v(e.$$.fragment,o),v(i.$$.fragment,o),r=!1},d(o){te(e,o),o&&z(t),te(i,o)}}}function pZ(n){var T;let e,t,i,r,o,s=!yt((T=n[22])==null?void 0:T.root),l,a,u,c,f,h,d,p,m,g,b,y,_,M,w,S,E,I,O=s&&k6(Sm(n)),P=n[10],A=[];for(let B=0;B<P.length;B+=1)A[B]=C6(b6(n,P,B));const H=B=>v(A[B],1,1,()=>{A[B]=null});let W=n[24]&&_6(n),q=n[23].visibleItems,L=[];for(let B=0;B<q.length;B+=1)L[B]=O6(m6(n,q,B));const X=B=>v(L[B],1,1,()=>{L[B]=null});let Y=n[18]&&T6(n),G=n[19]&&D6(n);return w=new F2({props:{validationErrors:n[12],selectError:n[39]}}),{c(){e=D("div"),t=D("table"),i=D("tbody"),r=D("tr"),o=D("th"),O&&O.c(),l=Q();for(let B=0;B<A.length;B+=1)A[B].c();a=Q(),W&&W.c(),u=Q(),c=D("tr"),f=D("td"),d=Q();for(let B=0;B<L.length;B+=1)L[B].c();p=Q(),m=D("tr"),g=D("td"),y=Q(),Y&&Y.c(),_=Q(),G&&G.c(),M=Q(),$(w.$$.fragment),k(o,"class","jse-table-cell jse-table-cell-header svelte-df6l8"),k(r,"class","jse-table-row jse-table-row-header svelte-df6l8"),k(f,"colspan",h=n[10].length),k(f,"class","svelte-df6l8"),li(f,"height",n[23].startHeight+"px"),k(c,"class","jse-table-invisible-start-section"),k(g,"colspan",b=n[10].length),k(g,"class","svelte-df6l8"),li(g,"height",n[23].endHeight+"px"),k(m,"class","jse-table-invisible-end-section"),k(t,"class","jse-table-main svelte-df6l8"),k(e,"class","jse-contents svelte-df6l8")},m(B,J){j(B,e,J),x(e,t),x(t,i),x(i,r),x(r,o),O&&O.m(o,null),x(r,l);for(let ne=0;ne<A.length;ne+=1)A[ne]&&A[ne].m(r,null);x(r,a),W&&W.m(r,null),x(i,u),x(i,c),x(c,f),x(i,d);for(let ne=0;ne<L.length;ne+=1)L[ne]&&L[ne].m(i,null);x(i,p),x(i,m),x(m,g),n[76](e),j(B,y,J),Y&&Y.m(B,J),j(B,_,J),G&&G.m(B,J),j(B,M,J),ee(w,B,J),S=!0,E||(I=[vn(UM.call(null,e,n[45])),ue(e,"scroll",n[29])],E=!0)},p(B,J){var _e;if(J[0]&4194304&&(s=!yt((_e=B[22])==null?void 0:_e.root)),s?O?(O.p(Sm(B),J),J[0]&4194304&&C(O,1)):(O=k6(Sm(B)),O.c(),C(O,1),O.m(o,null)):O&&(ce(),v(O,1,1,()=>{O=null}),fe()),J[0]&268438529){P=B[10];let ae;for(ae=0;ae<P.length;ae+=1){const Te=b6(B,P,ae);A[ae]?(A[ae].p(Te,J),C(A[ae],1)):(A[ae]=C6(Te),A[ae].c(),C(A[ae],1),A[ae].m(r,a))}for(ce(),ae=P.length;ae<A.length;ae+=1)H(ae);fe()}if(B[24]?W?(W.p(B,J),J[0]&16777216&&C(W,1)):(W=_6(B),W.c(),C(W,1),W.m(r,null)):W&&(ce(),v(W,1,1,()=>{W=null}),fe()),(!S||J[0]&1024&&h!==(h=B[10].length))&&k(f,"colspan",h),J[0]&8388608&&li(f,"height",B[23].startHeight+"px"),J[0]&165678085|J[1]&33281){q=B[23].visibleItems;let ae;for(ae=0;ae<q.length;ae+=1){const Te=m6(B,q,ae);L[ae]?(L[ae].p(Te,J),C(L[ae],1)):(L[ae]=O6(Te),L[ae].c(),C(L[ae],1),L[ae].m(i,p))}for(ce(),ae=q.length;ae<L.length;ae+=1)X(ae);fe()}(!S||J[0]&1024&&b!==(b=B[10].length))&&k(g,"colspan",b),J[0]&8388608&&li(g,"height",B[23].endHeight+"px"),B[18]?Y?(Y.p(B,J),J[0]&262144&&C(Y,1)):(Y=T6(B),Y.c(),C(Y,1),Y.m(_.parentNode,_)):Y&&(ce(),v(Y,1,1,()=>{Y=null}),fe()),B[19]?G?(G.p(B,J),J[0]&524288&&C(G,1)):(G=D6(B),G.c(),C(G,1),G.m(M.parentNode,M)):G&&(ce(),v(G,1,1,()=>{G=null}),fe());const ne={};J[0]&4096&&(ne.validationErrors=B[12]),w.$set(ne)},i(B){if(!S){C(O);for(let J=0;J<P.length;J+=1)C(A[J]);C(W);for(let J=0;J<q.length;J+=1)C(L[J]);C(Y),C(G),C(w.$$.fragment,B),S=!0}},o(B){v(O),A=A.filter(Boolean);for(let J=0;J<A.length;J+=1)v(A[J]);v(W),L=L.filter(Boolean);for(let J=0;J<L.length;J+=1)v(L[J]);v(Y),v(G),v(w.$$.fragment,B),S=!1},d(B){B&&z(e),O&&O.d(),mn(A,B),W&&W.d(),mn(L,B),n[76](null),B&&z(y),Y&&Y.d(B),B&&z(_),G&&G.d(B),B&&z(M),te(w,B),E=!1,fn(I)}}}function k6(n){let e,t,i=n[126]&&w6(n);return{c(){i&&i.c(),e=ut()},m(r,o){i&&i.m(r,o),j(r,e,o),t=!0},p(r,o){r[126]?i?(i.p(r,o),o[0]&4194304&&C(i,1)):(i=w6(r),i.c(),C(i,1),i.m(e.parentNode,e)):i&&(ce(),v(i,1,1,()=>{i=null}),fe())},i(r){t||(C(i),t=!0)},o(r){v(i),t=!1},d(r){i&&i.d(r),r&&z(e)}}}function w6(n){let e,t,i;return t=new Iu({props:{validationError:n[126],onExpand:tr}}),{c(){e=D("div"),$(t.$$.fragment),k(e,"class","jse-table-root-error svelte-df6l8")},m(r,o){j(r,e,o),ee(t,e,null),i=!0},p(r,o){const s={};o[0]&4194304&&(s.validationError=r[126]),t.$set(s)},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){v(t.$$.fragment,r),i=!1},d(r){r&&z(e),te(t)}}}function C6(n){let e,t,i;return t=new KY({props:{path:n[129],sortedColumn:n[11].sortedColumn,readOnly:n[0],onSort:n[28]}}),{c(){e=D("th"),$(t.$$.fragment),k(e,"class","jse-table-cell jse-table-cell-header svelte-df6l8")},m(r,o){j(r,e,o),ee(t,e,null),i=!0},p(r,o){const s={};o[0]&1024&&(s.path=r[129]),o[0]&2048&&(s.sortedColumn=r[11].sortedColumn),o[0]&1&&(s.readOnly=r[0]),t.$set(s)},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){v(t.$$.fragment,r),i=!1},d(r){r&&z(e),te(t)}}}function _6(n){let e,t,i;return t=new uZ({props:{count:Array.isArray(n[8])?n[8].length:0,maxSampleCount:n[9],onRefresh:n[74]}}),{c(){e=D("th"),$(t.$$.fragment),k(e,"class","jse-table-cell jse-table-cell-header svelte-df6l8")},m(r,o){j(r,e,o),ee(t,e,null),i=!0},p(r,o){const s={};o[0]&256&&(s.count=Array.isArray(r[8])?r[8].length:0),o[0]&512&&(s.maxSampleCount=r[9]),o[0]&512&&(s.onRefresh=r[74]),t.$set(s)},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){v(t.$$.fragment,r),i=!1},d(r){r&&z(e),te(t)}}}function S6(n){let e,t;return e=new Iu({props:{validationError:n[126],onExpand:tr}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&12582912&&(o.validationError=i[126]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function v6(n){let e,t=n[124]+"",i,r,o,s,l,a,u=n[126]&&S6(n);function c(...f){return n[75](n[124],...f)}return{c(){e=D("th"),i=we(t),r=Q(),u&&u.c(),k(e,"class","jse-table-cell jse-table-cell-gutter svelte-df6l8")},m(f,h){j(f,e,h),x(e,i),x(e,r),u&&u.m(e,null),s=!0,l||(a=vn(o=UM.call(null,e,c)),l=!0)},p(f,h){n=f,(!s||h[0]&8388608)&&t!==(t=n[124]+"")&&We(i,t),n[126]?u?(u.p(n,h),h[0]&12582912&&C(u,1)):(u=S6(n),u.c(),C(u,1),u.m(e,null)):u&&(ce(),v(u,1,1,()=>{u=null}),fe()),o&&Ei(o.update)&&h[0]&8388608&&o.update.call(null,c)},i(f){s||(C(u),s=!0)},o(f){v(u),s=!1},d(f){f&&z(e),u&&u.d(),l=!1,a()}}}function mZ(n){let e,t;return e=new jY({props:{path:n[130],value:n[131]!==void 0?n[131]:"",enforceString:ns(n[131],n[11].enforceStringMap,xe(n[130]),n[21].parser),selection:n[132]?n[11].selection:null,searchResultItems:n[27],context:n[21]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&8389632&&(o.path=i[130]),r[0]&8389632&&(o.value=i[131]!==void 0?i[131]:""),r[0]&10488832&&(o.enforceString=ns(i[131],i[11].enforceStringMap,xe(i[130]),i[21].parser)),r[0]&8391680&&(o.selection=i[132]?i[11].selection:null),r[0]&2097152&&(o.context=i[21]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function gZ(n){let e,t;return e=new qY({props:{path:n[130],value:n[131],parser:n[2],isSelected:n[132],onEdit:n[40]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&8389632&&(o.path=i[130]),r[0]&8389632&&(o.value=i[131]),r[0]&4&&(o.parser=i[2]),r[0]&8391680&&(o.isSelected=i[132]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function x6(n){let e,t,i,r;return t=new ll({props:{selected:!0,onContextMenu:n[31]}}),{c(){e=D("div"),$(t.$$.fragment),i=Q(),k(e,"class","jse-context-menu-anchor svelte-df6l8")},m(o,s){j(o,e,s),ee(t,e,null),j(o,i,s),r=!0},p:he,i(o){r||(C(t.$$.fragment,o),r=!0)},o(o){v(t.$$.fragment,o),r=!1},d(o){o&&z(e),te(t),o&&z(i)}}}function M6(n){let e,t;return e=new Iu({props:{validationError:n[126],onExpand:tr}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&12583936&&(o.validationError=i[126]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function A6(n){let e,t,i,r,o,s=!n[0]&&n[132]&&!hi(n[11].selection),l,a,u;const c=[gZ,mZ],f=[];function h(m,g){return g[0]&8389632&&(t=null),t==null&&(t=!!Qt(m[131])),t?0:1}i=h(n,[-1,-1,-1,-1,-1]),r=f[i]=c[i](n);let d=s&&x6(n),p=n[126]&&M6(n);return{c(){e=D("td"),r.c(),o=ut(),d&&d.c(),l=ut(),p&&p.c(),k(e,"class","jse-table-cell svelte-df6l8"),k(e,"data-path",a=lu(n[130])),le(e,"jse-selected-value",n[132])},m(m,g){j(m,e,g),f[i].m(e,null),x(e,o),d&&d.m(e,null),x(e,l),p&&p.m(e,null),u=!0},p(m,g){let b=i;i=h(m,g),i===b?f[i].p(m,g):(ce(),v(f[b],1,1,()=>{f[b]=null}),fe(),r=f[i],r?r.p(m,g):(r=f[i]=c[i](m),r.c()),C(r,1),r.m(e,o)),g[0]&8391681&&(s=!m[0]&&m[132]&&!hi(m[11].selection)),s?d?(d.p(m,g),g[0]&8391681&&C(d,1)):(d=x6(m),d.c(),C(d,1),d.m(e,l)):d&&(ce(),v(d,1,1,()=>{d=null}),fe()),m[126]?p?(p.p(m,g),g[0]&12583936&&C(p,1)):(p=M6(m),p.c(),C(p,1),p.m(e,null)):p&&(ce(),v(p,1,1,()=>{p=null}),fe()),(!u||g[0]&8389632&&a!==(a=lu(m[130])))&&k(e,"data-path",a),(!u||g[0]&8391680)&&le(e,"jse-selected-value",m[132])},i(m){u||(C(r),C(d),C(p),u=!0)},o(m){v(r),v(d),v(p),u=!1},d(m){m&&z(e),f[i].d(),d&&d.d(),p&&p.d()}}}function E6(n){let e;return{c(){e=D("td"),k(e,"class","jse-table-cell svelte-df6l8")},m(t,i){j(t,e,i)},d(t){t&&z(e)}}}function O6(n){let e,t=n[124],i,r,o,s=v6(n),l=n[10],a=[];for(let f=0;f<l.length;f+=1)a[f]=A6(g6(n,l,f));const u=f=>v(a[f],1,1,()=>{a[f]=null});let c=n[24]&&E6();return{c(){e=D("tr"),s.c(),i=Q();for(let f=0;f<a.length;f+=1)a[f].c();r=Q(),c&&c.c(),k(e,"class","jse-table-row svelte-df6l8")},m(f,h){j(f,e,h),s.m(e,null),x(e,i);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null);x(e,r),c&&c.m(e,null),o=!0},p(f,h){if(h[0]&8388608&&Ze(t,t=f[124])?(ce(),v(s,1,1,he),fe(),s=v6(f),s.c(),C(s,1),s.m(e,i)):s.p(f,h),h[0]&148900869|h[1]&513){l=f[10];let d;for(d=0;d<l.length;d+=1){const p=g6(f,l,d);a[d]?(a[d].p(p,h),C(a[d],1)):(a[d]=A6(p),a[d].c(),C(a[d],1),a[d].m(e,r))}for(ce(),d=l.length;d<a.length;d+=1)u(d);fe()}f[24]?c||(c=E6(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){if(!o){C(s);for(let h=0;h<l.length;h+=1)C(a[h]);o=!0}},o(f){v(s),a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)v(a[h]);o=!1},d(f){f&&z(e),s.d(f),mn(a,f),c&&c.d()}}}function T6(n){let e,t;return e=new Jr({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[18].contents)?"array":"object"} as text`,actions:[{icon:qp,text:"Paste as JSON instead",title:"Paste the text as JSON instead of a single value",onMouseDown:n[34]},{text:"Leave as is",title:"Keep the pasted content as a single value",onClick:n[35]}]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&262144&&(o.message=`You pasted a JSON ${Array.isArray(i[18].contents)?"array":"object"} as text`),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function D6(n){let e,t;return e=new Jr({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:jc,text:"Ok",title:"Accept the repaired document",onClick:n[7]},{icon:Xs,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:n[36]}],onClose:n[6]}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&1&&(o.actions=i[0]?[]:[{icon:jc,text:"Ok",title:"Accept the repaired document",onClick:i[7]},{icon:Xs,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:i[36]}]),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function bZ(n){let e,t,i,r,o,s,l,a=n[1]&&y6(n);const u=[fZ,cZ],c=[];function f(h,d){return h[26]?1:0}return i=f(n),r=c[i]=u[i](n),{c(){e=D("div"),a&&a.c(),t=Q(),r.c(),k(e,"role","table"),k(e,"class","jse-table-mode svelte-df6l8"),le(e,"no-main-menu",!n[1])},m(h,d){j(h,e,d),a&&a.m(e,null),x(e,t),c[i].m(e,null),n[77](e),o=!0,s||(l=[ue(e,"mousedown",n[30]),ue(e,"keydown",n[37]),ue(e,"contextmenu",n[32])],s=!0)},p(h,d){h[1]?a?(a.p(h,d),d[0]&2&&C(a,1)):(a=y6(h),a.c(),C(a,1),a.m(e,t)):a&&(ce(),v(a,1,1,()=>{a=null}),fe()),r.p(h,d),(!o||d[0]&2)&&le(e,"no-main-menu",!h[1])},i(h){o||(C(a),C(r),o=!0)},o(h){v(a),v(r),o=!1},d(h){h&&z(e),a&&a.d(),c[i].d(),n[77](null),s=!1,fn(l)}}}let ga=18;function yZ(n,e,t){let i,r,o,s;const l=Wn("jsoneditor:TableMode"),{open:a}=Vn("simple-modal"),{openAbsolutePopup:u,closeAbsolutePopup:c}=Vn("absolute-popup"),f=k8(),h=ru(),d=ru(),p=typeof window>"u";l("isSSR:",p);let{readOnly:m}=e,{externalContent:g}=e,{externalSelection:b}=e,{mainMenuBar:y}=e,{escapeControlCharacters:_}=e,{escapeUnicodeCharacters:M}=e,{flattenColumns:w}=e,{parser:S}=e,{parseMemoizeOne:E}=e,{validator:I}=e,{validationParser:O}=e,{indentation:P}=e,{onChange:A}=e,{onChangeMode:H}=e,{onSelect:W}=e,{onRenderValue:q}=e,{onRenderMenu:L}=e,{onRenderContextMenu:X}=e,{onFocus:Y}=e,{onBlur:G}=e,{onSortModal:T}=e,{onTransformModal:B}=e,{onJSONEditorModal:J}=e,ne,_e,ae,Te;L2({onMount:br,onDestroy:Ki,getWindow:()=>Pu(_e),hasFocus:()=>F&&document.hasFocus()||x2(_e),onFocus:()=>{ke=!0,Y&&Y()},onBlur:()=>{ke=!1,G&&G()}});let re,U,Ce,Ke,K=1e4,De=[],F=!1,ke=!1,Me={},Ae=600,Le=0;function ct(V){ae&&ae.scrollTo({top:ae.scrollTop,left:ae.scrollLeft})}function Z(){me.sortedColumn&&t(11,me={...me,sortedColumn:null})}function Ve(V){l("updateSelection",V);const ge=typeof V=="function"?V(me.selection)||null:V;st(ge,me.selection)||(t(11,me={...me,selection:ge}),W(ge))}function bt(V){!me.selection||V===void 0||fr(V,Wl(me.selection))&&fr(V,Fe(me.selection))||(l("clearing selection: path does not exist anymore",me.selection),t(11,me={...me,selection:null}))}let me=wd(),$e=!1;const Ut=void 0;function Ue(V){if(m)return;l("onSortByHeader",V);const ge=[],Ee=V.sortDirection===cr.desc?-1:1,N=E8(re,ge,V.path,Ee);xt(N,(be,Qe)=>({state:{...Qe,sortedColumn:V}}))}const wt=w8({onChange:V=>{t(20,_t=V)}});let _t=wt.getState(),it;function Mn(V){const ge={json:re},Ee=su(V)?V.text!==U:!st(ge.json,V.json);if(l("update external content",{isChanged:Ee}),!Ee)return;const N={json:re,text:U},be=re,Qe=me,Et=U,Lt=$e;if(su(V))try{t(8,re=E(V.text)),t(16,U=V.text),t(19,$e=!1),t(17,Ce=void 0)}catch(Ot){try{t(8,re=E(po(V.text))),t(16,U=V.text),t(19,$e=!0),t(17,Ce=void 0)}catch{t(8,re=void 0),t(16,U=V.text),t(19,$e=!1),t(17,Ce=U!==""?ou(U,Ot.message||String(Ot)):void 0)}}else t(8,re=V.json),t(16,U=void 0),t(19,$e=!1),t(17,Ce=void 0);bt(re),Z(),Dn({previousJson:be,previousState:Qe,previousText:Et,previousTextIsRepaired:Lt}),de(N,null)}function gn(V){st(me.selection,V)||(l("applyExternalSelection",V),(E2(V)||V===null)&&Ve(V))}function Dn({previousJson:V,previousState:ge,previousText:Ee,previousTextIsRepaired:N}){V===void 0&&Ee===void 0||(re!==void 0?V!==void 0?wt.add({undo:{patch:[{op:"replace",path:"",value:V}],state:ri(ge),json:void 0,text:Ee,textIsRepaired:N},redo:{patch:[{op:"replace",path:"",value:re}],state:ri(me),json:void 0,text:U,textIsRepaired:$e}}):wt.add({undo:{patch:void 0,json:void 0,text:Ee,state:ri(ge),textIsRepaired:N},redo:{patch:void 0,json:re,state:ri(me),text:U,textIsRepaired:$e}}):V!==void 0&&wt.add({undo:{patch:void 0,json:V,state:ri(ge),text:Ee,textIsRepaired:N},redo:{patch:void 0,json:void 0,text:U,textIsRepaired:$e,state:ri(me)}}))}let ti=[];const se=Of(C8);function Je(V,ge,Ee,N){Pa(()=>{let be;try{be=se(V,ge,Ee,N)}catch(Qe){be=[{path:[],message:"Failed to validate: "+Qe.message,severity:$o.warning}]}st(be,ti)||(l("validationErrors changed:",be),t(12,ti=be))},be=>l(`validationErrors updated in ${be} ms`))}function Bt(){return l("validate"),Ce?{parseError:Ce,isRepairable:!1}:(Je(re,I,S,O),yt(ti)?null:{validationErrors:ti})}function Pn(V,ge){if(l("patch",V,ge),re===void 0)throw new Error("Cannot apply patch: no JSON");const Ee={json:re},N=re,be=me,Qe=$e,Et=t8(re,V),dt=Vv(re,me,V).json,Ot=kq(me,V,De),jo=typeof ge=="function"?ge(dt,Ot):void 0;t(8,re=jo&&jo.json!==void 0?jo.json:dt);const Wf=jo&&jo.state!==void 0?jo.state:Ot;t(11,me=Wf),t(16,U=void 0),t(19,$e=!1),t(18,Ke=void 0),t(17,Ce=void 0),wt.add({undo:{patch:Et,json:void 0,text:void 0,state:ri(be),textIsRepaired:Qe},redo:{patch:V,json:void 0,state:ri(Wf),text:void 0,textIsRepaired:$e}});const Uf={json:re,previousJson:N,undo:Et,redo:V};return de(Ee,Uf),Uf}function xt(V,ge){return m?{json:re,previousJson:re,redo:[],undo:[]}:Pn(V,ge)}function de(V,ge){V.json===void 0&&(V==null?void 0:V.text)===void 0||A&&(U!==void 0?A({text:U,json:void 0},V,{contentErrors:Bt(),patchResult:ge}):re!==void 0&&A({text:void 0,json:re},V,{contentErrors:Bt(),patchResult:ge}))}function ni(V){l("handleFind",V)}function Rn(V){l("pasted json as text",V),t(18,Ke=V)}function sn(V){const ge=parseInt(V[0],10),Ee=[String(ge+1),...V.slice(1)];return fr(re,Ee)?tt(Ee,!1):tt(V,!1)}function Mt(){l("focus"),Te&&(Te.focus(),Te.select())}function Do(V){t(72,Le=V.target.scrollTop)}function dl(V){const ge=V.target,Ee=Nv(ge);if(Ee){if(hi(me.selection)&&Fc(re,me.selection,Ee))return;Ve(tt(Ee,!1)),V.preventDefault()}!S2(ge,"BUTTON")&&!ge.isContentEditable&&Mt()}function ds(){if(Nt(re)&&!yt(re)&&!yt(De)){const V=["0",...De[0]];return tt(V,!1)}else return null}function Li(){me.selection||Ve(ds())}function Yi(){if($e&&re!==void 0){const V=me,ge=re,Ee=U,N={json:re,text:U},be=$e;t(16,U=void 0),t(19,$e=!1),bt(re),Dn({previousJson:ge,previousState:V,previousText:Ee,previousTextIsRepaired:be}),de(N,null)}return{json:re,text:U}}function Nn(V,ge=!0){const Ee=X0(V,De,Me,ga),N=Ee-Le,be=vr(V);if(l("scrollTo",{path:V,top:Ee,scrollTop:Le,elem:be}),!ae)return Promise.resolve();const Qe=ae.getBoundingClientRect();if(be&&!ge){const Lt=be.getBoundingClientRect();if(Lt.bottom>Qe.top&&Lt.top<Qe.bottom)return Promise.resolve()}const Et=-(Qe.height/4);return be?new Promise(Lt=>{f(be,{container:ae,offset:Et,duration:$m,callback:()=>{Fi(V),Lt()}})}):new Promise(Lt=>{f(N,{container:ae,offset:Et,duration:$m,callback:async()=>{await an(),X0(V,De,Me,ga)!==Ee?await Nn(V,ge):Fi(V),Lt()}})})}function ps(V){if(!ae)return;const{rowIndex:ge}=Cr(V,De),Ee=X0(V,De,Me,ga),N=Ee+(Me[ge]||ga),be=ga,Qe=ae.getBoundingClientRect(),Et=Le,Lt=Le+Qe.height-be;if(N>Lt){const dt=N-Lt;t(14,ae.scrollTop+=dt,ae)}if(Ee<Et){const dt=Et-Ee;t(14,ae.scrollTop-=dt,ae)}}function Fi(V){const ge=vr(V);if(!ge||!ae)return;const Ee=ae.getBoundingClientRect(),N=ge.getBoundingClientRect();if(N.right>Ee.right){const be=N.right-Ee.right;t(14,ae.scrollLeft+=be,ae)}if(N.left<Ee.left){const be=Ee.left-N.left;t(14,ae.scrollLeft-=be,ae)}}function ji(V){ps(V),Fi(V)}function vr(V){return ae?ae.querySelector(`td[data-path="${lu(V)}"]`):null}function Zi({anchor:V,left:ge,top:Ee,width:N,height:be,offsetTop:Qe,offsetLeft:Et,showTip:Lt}){const dt={json:re,documentState:me,parser:S,showTip:Lt,onEditValue:Un,onEditRow:Po,onToggleEnforceString:Mr,onCut:$i,onCopy:No,onPaste:Ro,onRemove:ie,onDuplicateRow:Ge,onInsertBeforeRow:kt,onInsertAfterRow:At,onRemoveRow:It,onRenderContextMenu:X,onCloseContextMenu(){c(Ot),Mt()}};F=!0;const Ot=u(YY,dt,{left:ge,top:Ee,offsetTop:Qe,offsetLeft:Et,width:N,height:be,anchor:V,closeOnOuterClick:!0,onClose:()=>{F=!1,Mt()}})}function xr(V){if(!(m||hi(me.selection))){if(V&&(V.stopPropagation(),V.preventDefault()),V&&V.type==="contextmenu"&&V.target!==Te)Zi({left:V.clientX,top:V.clientY,width:Uo,height:Wo,showTip:!1});else{const ge=ae==null?void 0:ae.querySelector(".jse-table-cell.jse-selected-value");if(ge)Zi({anchor:ge,offsetTop:2,width:Uo,height:Wo,showTip:!1});else{const Ee=ae==null?void 0:ae.getBoundingClientRect();Ee&&Zi({top:Ee.top+2,left:Ee.left+2,width:Uo,height:Wo,showTip:!1})}}return!1}}function bn(V){m||Zi({anchor:Rv(V.target,"BUTTON"),offsetTop:0,width:Uo,height:Wo,showTip:!0})}function Un(){if(m||!me.selection)return;const V=Fe(me.selection),ge=Pe(re,V);Qt(ge)?zi(V):Ve(tt(V,!0))}function Po(){if(m||!me.selection)return;const ge=Fe(me.selection).slice(0,1);zi(ge)}function Mr(){if(m||!mt(me.selection))return;const V=me.selection.path,ge=xe(V),Ee=Pe(re,V),N=!ns(Ee,me.enforceStringMap,ge,S),be=N?String(Ee):Eu(String(Ee),S);l("handleToggleEnforceString",{enforceString:N,value:Ee,updatedValue:be}),xt([{op:"replace",path:ge,value:be}],(Qe,Et)=>({state:zv(Et,ge,N)}))}async function pl(){if(l("apply pasted json",Ke),!Ke)return;const{path:V,contents:ge}=Ke,Ee=(ae==null?void 0:ae.querySelector(".jse-editable-div"))||null;Iv(Ee)&&Ee.cancel();const N=[{op:"replace",path:xe(V),value:ge}];xt(N),setTimeout(Mt)}function Ro(){a(_8,{},{...zl,styleWindow:{width:"450px"}},{onClose:()=>Mt()})}function hn(){l("clear pasted json"),t(18,Ke=void 0),Mt()}function ms(){H(Gn.text)}async function $i(V){await P8({json:re,documentState:me,indentation:V?P:void 0,readOnly:m,parser:S,onPatch:xt})}async function No(V=!0){re!==void 0&&await R8({json:re,documentState:me,indentation:V?P:void 0,parser:S})}function ie(){I8({json:re,text:U,documentState:me,keepSelection:!0,readOnly:m,onChange:A,onPatch:xt})}function Ge(){_q({json:re,documentState:me,columns:De,readOnly:m,onPatch:xt})}function kt(){Sq({json:re,documentState:me,columns:De,readOnly:m,onPatch:xt})}function At(){vq({json:re,documentState:me,columns:De,readOnly:m,onPatch:xt})}function It(){xq({json:re,documentState:me,columns:De,readOnly:m,onPatch:xt})}async function ln(V){await B8({char:V,selectInside:!1,refJsonEditor:_e,json:re,selection:me.selection,readOnly:m,parser:S,onPatch:xt,onReplaceJson:Bo,onSelect:Ve})}function gi(V){const ge=ol(V);if(l("keydown",{combo:ge,key:V.key}),ge==="Ctrl+X"&&(V.preventDefault(),$i(!0)),ge==="Ctrl+Shift+X"&&(V.preventDefault(),$i(!1)),ge==="Ctrl+C"&&(V.preventDefault(),No(!0)),ge==="Ctrl+Shift+C"&&(V.preventDefault(),No(!1)),ge==="Ctrl+D"&&V.preventDefault(),(ge==="Delete"||ge==="Backspace")&&(V.preventDefault(),ie()),ge==="Insert"&&V.preventDefault(),ge==="Ctrl+A"&&V.preventDefault(),ge==="Ctrl+Q"&&xr(V),ge==="ArrowLeft"&&(V.preventDefault(),Li(),me.selection)){const N=pq(De,me.selection);Ve(N),ji(Fe(N))}if(ge==="ArrowRight"&&(V.preventDefault(),Li(),me.selection)){const N=mq(De,me.selection);Ve(N),ji(Fe(N))}if(ge==="ArrowUp"&&(V.preventDefault(),Li(),me.selection)){const N=hq(De,me.selection);Ve(N),ji(Fe(N))}if(ge==="ArrowDown"&&(V.preventDefault(),Li(),me.selection)){const N=dq(re,De,me.selection);Ve(N),ji(Fe(N))}if(ge==="Enter"&&me.selection&&mt(me.selection)){V.preventDefault();const N=me.selection.path,be=Pe(re,N);Qt(be)?zi(N):m||Ve({...me.selection,edit:!0})}if(ge.replace(/^Shift\+/,"").length===1&&me.selection){V.preventDefault(),ln(V.key);return}if(ge==="Ctrl+Enter"&&mt(me.selection)){const N=Pe(re,me.selection.path);xp(N)&&window.open(String(N),"_blank")}ge==="Escape"&&me.selection&&(V.preventDefault(),Ve(null)),ge==="Ctrl+F"&&V.preventDefault(),ge==="Ctrl+H"&&V.preventDefault(),ge==="Ctrl+Z"&&(V.preventDefault(),wn()),ge==="Ctrl+Shift+Z"&&(V.preventDefault(),bs())}function Io(V){var Ee;V.preventDefault();const ge=(Ee=V.clipboardData)==null?void 0:Ee.getData("text/plain");ge!==void 0&&N8({clipboardText:ge,json:re,selection:me.selection,readOnly:m,parser:S,onPatch:xt,onChangeText:Xr,openRepairModal:Yr})}function Bo(V,ge){const Ee=me,N=re,be=U,Qe={json:re,text:U},Et=$e,Lt=ir(re,me,[],so),dt=typeof ge=="function"?ge(V,Lt):void 0;t(8,re=dt&&dt.json!==void 0?dt.json:V),t(11,me=dt&&dt.state!==void 0?dt.state:Lt),t(16,U=void 0),t(19,$e=!1),t(17,Ce=void 0),bt(re),Dn({previousJson:N,previousState:Ee,previousText:be,previousTextIsRepaired:Et}),de(Qe,null)}function Xr(V,ge){l("handleChangeText");const Ee=me,N=re,be=U,Qe={json:re,text:U},Et=$e;try{t(8,re=E(V)),t(11,me=ir(re,me,[],so)),t(16,U=void 0),t(19,$e=!1),t(17,Ce=void 0)}catch(dt){try{t(8,re=E(po(V))),t(11,me=ir(re,me,[],so)),t(16,U=V),t(19,$e=!0),t(17,Ce=void 0)}catch{t(8,re=void 0),t(11,me=wd({json:re,expand:so})),t(16,U=V),t(19,$e=!1),t(17,Ce=U!==""?ou(U,dt.message||String(dt)):void 0)}}if(typeof ge=="function"){const dt=ge(re,me);t(8,re=dt&&dt.json?dt.json:re),t(11,me=dt&&dt.state?dt.state:me)}bt(re),Dn({previousJson:N,previousState:Ee,previousText:be,previousTextIsRepaired:Et}),de(Qe,null)}function Lo(V){l("select validation error",V),Ve(tt(V.path,!1)),Nn(V.path)}function zu(V){m||re===void 0||(F=!0,T({id:h,json:re,rootPath:V,onSort:({operations:ge,itemPath:Ee,direction:N})=>{l("onSort",ge,V,Ee,N),xt(ge,(be,Qe)=>({state:{...Qe,sortedColumn:{path:Ee,sortDirection:N===-1?cr.desc:cr.asc}}}))},onClose:()=>{F=!1,Mt()}}))}function ca(V){if(re===void 0)return;const{id:ge,onTransform:Ee,onClose:N}=V,be=V.rootPath||[];F=!0,B({id:ge||d,json:re,rootPath:be||[],onTransform:Qe=>{Ee?Ee({operations:Qe,json:re,transformedJson:Br(re,Qe)}):(l("onTransform",be,Qe),xt(Qe))},onClose:()=>{F=!1,Mt(),N&&N()}})}function zi(V){l("openJSONEditorModal",{path:V}),F=!0,J({content:{json:Pe(re,V)},path:V,onPatch:it.onPatch,onClose:()=>{F=!1,Mt()}})}function Yr(V,ge){a(x8,{text:V,onParse:Ee=>jp(Ee,N=>_f(N,S)),onRepair:vv,onApply:ge},{...zl,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>Mt()})}function gs(){zu([])}function Ar(){ca({rootPath:[]})}function wn(){if(m||!wt.getState().canUndo)return;const V=wt.undo();if(!V)return;const ge={json:re,text:U};t(8,re=V.undo.patch?Br(re,V.undo.patch):V.undo.json),t(11,me=V.undo.state),t(16,U=V.undo.text),t(19,$e=V.undo.textIsRepaired),t(17,Ce=void 0),l("undo",{item:V,json:re});const Ee=V.undo.patch&&V.redo.patch?{json:re,previousJson:ge.json,redo:V.undo.patch,undo:V.redo.patch}:null;de(ge,Ee),Mt(),me.selection&&Nn(Fe(me.selection),!1)}function bs(){if(m||!wt.getState().canRedo)return;const V=wt.redo();if(!V)return;const ge={json:re,text:U};t(8,re=V.redo.patch?Br(re,V.redo.patch):V.redo.json),t(11,me=V.redo.state),t(16,U=V.redo.text),t(19,$e=V.redo.textIsRepaired),t(17,Ce=void 0),l("redo",{item:V,json:re});const Ee=V.undo.patch&&V.redo.patch?{json:re,previousJson:ge.json,redo:V.redo.patch,undo:V.undo.patch}:null;de(ge,Ee),Mt(),me.selection&&Nn(Fe(me.selection),!1)}function Vu(V){t(71,Ae=V.getBoundingClientRect().height)}function Fo(V,ge){t(70,Me[ge]=V.getBoundingClientRect().height,Me)}function Hu(V){ft[V?"unshift":"push"](()=>{Te=V,t(15,Te)})}const qu=()=>t(9,K=1/0),ml=(V,ge)=>Fo(ge,V);function Wu(V){ft[V?"unshift":"push"](()=>{ae=V,t(14,ae)})}function Uu(V){ft[V?"unshift":"push"](()=>{_e=V,t(13,_e)})}return n.$$set=V=>{"readOnly"in V&&t(0,m=V.readOnly),"externalContent"in V&&t(47,g=V.externalContent),"externalSelection"in V&&t(48,b=V.externalSelection),"mainMenuBar"in V&&t(1,y=V.mainMenuBar),"escapeControlCharacters"in V&&t(49,_=V.escapeControlCharacters),"escapeUnicodeCharacters"in V&&t(50,M=V.escapeUnicodeCharacters),"flattenColumns"in V&&t(51,w=V.flattenColumns),"parser"in V&&t(2,S=V.parser),"parseMemoizeOne"in V&&t(52,E=V.parseMemoizeOne),"validator"in V&&t(53,I=V.validator),"validationParser"in V&&t(54,O=V.validationParser),"indentation"in V&&t(3,P=V.indentation),"onChange"in V&&t(55,A=V.onChange),"onChangeMode"in V&&t(4,H=V.onChangeMode),"onSelect"in V&&t(56,W=V.onSelect),"onRenderValue"in V&&t(57,q=V.onRenderValue),"onRenderMenu"in V&&t(5,L=V.onRenderMenu),"onRenderContextMenu"in V&&t(58,X=V.onRenderContextMenu),"onFocus"in V&&t(59,Y=V.onFocus),"onBlur"in V&&t(60,G=V.onBlur),"onSortModal"in V&&t(61,T=V.onSortModal),"onTransformModal"in V&&t(62,B=V.onTransformModal),"onJSONEditorModal"in V&&t(63,J=V.onJSONEditorModal)},n.$$.update=()=>{n.$$.dirty[1]&786432&&t(69,ne=_2({escapeControlCharacters:_,escapeUnicodeCharacters:M})),n.$$.dirty[1]&65536&&Mn(g),n.$$.dirty[1]&131072&&gn(b),n.$$.dirty[0]&1792|n.$$.dirty[1]&1048576&&t(10,De=Nt(re)?uq(aq(re,w,K),De):[]),n.$$.dirty[0]&1280&&t(25,i=re&&!yt(De)),n.$$.dirty[0]&768&&t(24,r=Array.isArray(re)&&re.length>K),n.$$.dirty[0]&256|n.$$.dirty[2]&1792&&t(23,o=cq(Le,Ae,re,Me,ga)),n.$$.dirty[0]&256&&ct(),n.$$.dirty[0]&2309|n.$$.dirty[1]&67108864|n.$$.dirty[2]&128&&t(21,it={readOnly:m,parser:S,normalization:ne,getJson:()=>re,getDocumentState:()=>me,findElement:vr,findNextInside:sn,focus:Mt,onPatch:xt,onSelect:Ve,onFind:ni,onPasteJson:Rn,onRenderValue:q}),n.$$.dirty[0]&260|n.$$.dirty[1]&12582912&&Je(re,I,S,O),n.$$.dirty[0]&5120&&t(22,s=gq(ti,De))},[m,y,S,P,H,L,Mt,Yi,re,K,De,me,ti,_e,ae,Te,U,Ce,Ke,$e,_t,it,s,o,r,i,p,Ut,Ue,Do,dl,Zi,xr,bn,pl,hn,ms,gi,Io,Lo,zi,gs,Ar,wn,bs,Vu,Fo,g,b,_,M,w,E,I,O,A,W,q,X,Y,G,T,B,J,Bt,Pn,Nn,vr,ca,ne,Me,Ae,Le,Hu,qu,ml,Wu,Uu]}class kZ extends je{constructor(e){super(),ze(this,e,yZ,bZ,Ze,{readOnly:0,externalContent:47,externalSelection:48,mainMenuBar:1,escapeControlCharacters:49,escapeUnicodeCharacters:50,flattenColumns:51,parser:2,parseMemoizeOne:52,validator:53,validationParser:54,indentation:3,onChange:55,onChangeMode:4,onSelect:56,onRenderValue:57,onRenderMenu:5,onRenderContextMenu:58,onFocus:59,onBlur:60,onSortModal:61,onTransformModal:62,onJSONEditorModal:63,validate:64,patch:65,focus:6,acceptAutoRepair:7,scrollTo:66,findElement:67,openTransformModal:68},null,[-1,-1,-1,-1,-1])}get validate(){return this.$$.ctx[64]}get patch(){return this.$$.ctx[65]}get focus(){return this.$$.ctx[6]}get acceptAutoRepair(){return this.$$.ctx[7]}get scrollTo(){return this.$$.ctx[66]}get findElement(){return this.$$.ctx[67]}get openTransformModal(){return this.$$.ctx[68]}}const wZ=kZ;function CZ(n){let e,t,i={externalContent:n[0],externalSelection:n[1],readOnly:n[2],indentation:n[3],mainMenuBar:n[6],navigationBar:n[7],escapeControlCharacters:n[10],escapeUnicodeCharacters:n[11],parser:n[13],parseMemoizeOne:n[14],validator:n[15],validationParser:n[16],pathParser:n[17],onError:n[23],onChange:n[18],onChangeMode:n[19],onSelect:n[20],onRenderValue:n[21],onClassName:n[22],onFocus:n[24],onBlur:n[25],onRenderMenu:n[32],onRenderContextMenu:n[33],onSortModal:n[26],onTransformModal:n[27],onJSONEditorModal:n[28]};return e=new K2({props:i}),n[49](e),{c(){$(e.$$.fragment)},m(r,o){ee(e,r,o),t=!0},p(r,o){const s={};o[0]&1&&(s.externalContent=r[0]),o[0]&2&&(s.externalSelection=r[1]),o[0]&4&&(s.readOnly=r[2]),o[0]&8&&(s.indentation=r[3]),o[0]&64&&(s.mainMenuBar=r[6]),o[0]&128&&(s.navigationBar=r[7]),o[0]&1024&&(s.escapeControlCharacters=r[10]),o[0]&2048&&(s.escapeUnicodeCharacters=r[11]),o[0]&8192&&(s.parser=r[13]),o[0]&16384&&(s.parseMemoizeOne=r[14]),o[0]&32768&&(s.validator=r[15]),o[0]&65536&&(s.validationParser=r[16]),o[0]&131072&&(s.pathParser=r[17]),o[0]&8388608&&(s.onError=r[23]),o[0]&262144&&(s.onChange=r[18]),o[0]&524288&&(s.onChangeMode=r[19]),o[0]&1048576&&(s.onSelect=r[20]),o[0]&2097152&&(s.onRenderValue=r[21]),o[0]&4194304&&(s.onClassName=r[22]),o[0]&16777216&&(s.onFocus=r[24]),o[0]&33554432&&(s.onBlur=r[25]),o[1]&2&&(s.onRenderMenu=r[32]),o[1]&4&&(s.onRenderContextMenu=r[33]),o[0]&67108864&&(s.onSortModal=r[26]),o[0]&134217728&&(s.onTransformModal=r[27]),o[0]&268435456&&(s.onJSONEditorModal=r[28]),e.$set(s)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){n[49](null),te(e,r)}}}function _Z(n){let e,t,i={externalContent:n[0],externalSelection:n[1],readOnly:n[2],mainMenuBar:n[6],escapeControlCharacters:n[10],escapeUnicodeCharacters:n[11],flattenColumns:n[12],parser:n[13],parseMemoizeOne:n[14],validator:n[15],validationParser:n[16],indentation:n[3],onChange:n[18],onChangeMode:n[19],onSelect:n[20],onRenderValue:n[21],onFocus:n[24],onBlur:n[25],onRenderMenu:n[32],onRenderContextMenu:n[33],onSortModal:n[26],onTransformModal:n[27],onJSONEditorModal:n[28]};return e=new wZ({props:i}),n[48](e),{c(){$(e.$$.fragment)},m(r,o){ee(e,r,o),t=!0},p(r,o){const s={};o[0]&1&&(s.externalContent=r[0]),o[0]&2&&(s.externalSelection=r[1]),o[0]&4&&(s.readOnly=r[2]),o[0]&64&&(s.mainMenuBar=r[6]),o[0]&1024&&(s.escapeControlCharacters=r[10]),o[0]&2048&&(s.escapeUnicodeCharacters=r[11]),o[0]&4096&&(s.flattenColumns=r[12]),o[0]&8192&&(s.parser=r[13]),o[0]&16384&&(s.parseMemoizeOne=r[14]),o[0]&32768&&(s.validator=r[15]),o[0]&65536&&(s.validationParser=r[16]),o[0]&8&&(s.indentation=r[3]),o[0]&262144&&(s.onChange=r[18]),o[0]&524288&&(s.onChangeMode=r[19]),o[0]&1048576&&(s.onSelect=r[20]),o[0]&2097152&&(s.onRenderValue=r[21]),o[0]&16777216&&(s.onFocus=r[24]),o[0]&33554432&&(s.onBlur=r[25]),o[1]&2&&(s.onRenderMenu=r[32]),o[1]&4&&(s.onRenderContextMenu=r[33]),o[0]&67108864&&(s.onSortModal=r[26]),o[0]&134217728&&(s.onTransformModal=r[27]),o[0]&268435456&&(s.onJSONEditorModal=r[28]),e.$set(s)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){n[48](null),te(e,r)}}}function SZ(n){let e,t,i={externalContent:n[0],externalSelection:n[1],readOnly:n[2],indentation:n[3],tabSize:n[4],mainMenuBar:n[6],statusBar:n[8],askToFormat:n[9],escapeUnicodeCharacters:n[11],parser:n[13],validator:n[15],validationParser:n[16],onChange:n[18],onSelect:n[20],onChangeMode:n[19],onError:n[23],onFocus:n[24],onBlur:n[25],onRenderMenu:n[32],onSortModal:n[26],onTransformModal:n[27]};return e=new EY({props:i}),n[47](e),{c(){$(e.$$.fragment)},m(r,o){ee(e,r,o),t=!0},p(r,o){const s={};o[0]&1&&(s.externalContent=r[0]),o[0]&2&&(s.externalSelection=r[1]),o[0]&4&&(s.readOnly=r[2]),o[0]&8&&(s.indentation=r[3]),o[0]&16&&(s.tabSize=r[4]),o[0]&64&&(s.mainMenuBar=r[6]),o[0]&256&&(s.statusBar=r[8]),o[0]&512&&(s.askToFormat=r[9]),o[0]&2048&&(s.escapeUnicodeCharacters=r[11]),o[0]&8192&&(s.parser=r[13]),o[0]&32768&&(s.validator=r[15]),o[0]&65536&&(s.validationParser=r[16]),o[0]&262144&&(s.onChange=r[18]),o[0]&1048576&&(s.onSelect=r[20]),o[0]&524288&&(s.onChangeMode=r[19]),o[0]&8388608&&(s.onError=r[23]),o[0]&16777216&&(s.onFocus=r[24]),o[0]&33554432&&(s.onBlur=r[25]),o[1]&2&&(s.onRenderMenu=r[32]),o[0]&67108864&&(s.onSortModal=r[26]),o[0]&134217728&&(s.onTransformModal=r[27]),e.$set(s)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){n[47](null),te(e,r)}}}function vZ(n){let e,t,i,r,o;const s=[SZ,_Z,CZ],l=[];function a(u,c){return c[0]&32&&(e=null),e==null&&(e=u[5]===Gn.text||String(u[5])==="code"),e?0:u[5]===Gn.table?1:2}return t=a(n,[-1,-1]),i=l[t]=s[t](n),{c(){i.c(),r=ut()},m(u,c){l[t].m(u,c),j(u,r,c),o=!0},p(u,c){let f=t;t=a(u,c),t===f?l[t].p(u,c):(ce(),v(l[f],1,1,()=>{l[f]=null}),fe(),i=l[t],i?i.p(u,c):(i=l[t]=s[t](u),i.c()),C(i,1),i.m(r.parentNode,r))},i(u){o||(C(i),o=!0)},o(u){v(i),o=!1},d(u){l[t].d(u),u&&z(r)}}}function xZ(n,e,t){let{content:i}=e,{selection:r}=e,{readOnly:o}=e,{indentation:s}=e,{tabSize:l}=e,{mode:a}=e,{mainMenuBar:u}=e,{navigationBar:c}=e,{statusBar:f}=e,{askToFormat:h}=e,{escapeControlCharacters:d}=e,{escapeUnicodeCharacters:p}=e,{flattenColumns:m}=e,{parser:g}=e,{parseMemoizeOne:b}=e,{validator:y}=e,{validationParser:_}=e,{pathParser:M}=e,{insideModal:w}=e,{onChange:S}=e,{onChangeMode:E}=e,{onSelect:I}=e,{onRenderValue:O}=e,{onClassName:P}=e,{onRenderMenu:A}=e,{onRenderContextMenu:H}=e,{onError:W}=e,{onFocus:q}=e,{onBlur:L}=e,{onSortModal:X}=e,{onTransformModal:Y}=e,{onJSONEditorModal:G}=e,T,B,J,ne;const _e={type:"separator"};let ae,Te;function re(Z){if(T)return T.patch(Z);if(B)return B.patch(Z);if(J)return J.patch(Z);throw new Error(`Method patch is not available in mode "${a}"`)}function U(Z){if(T)return T.expand(Z);throw new Error(`Method expand is not available in mode "${a}"`)}function Ce(Z){if(J)J.openTransformModal(Z);else if(T)T.openTransformModal(Z);else if(B)B.openTransformModal(Z);else throw new Error(`Method transform is not available in mode "${a}"`)}function Ke(){if(J)return J.validate();if(T)return T.validate();if(B)return B.validate();throw new Error(`Method validate is not available in mode "${a}"`)}function K(){return T?T.acceptAutoRepair():i}function De(Z){if(T)return T.scrollTo(Z);if(B)return B.scrollTo(Z);throw new Error(`Method scrollTo is not available in mode "${a}"`)}function F(Z){if(T)return T.findElement(Z);if(B)return B.findElement(Z);throw new Error(`Method findElement is not available in mode "${a}"`)}function ke(){J?J.focus():T?T.focus():B&&B.focus()}async function Me(){J&&await J.refresh()}function Ae(Z){ft[Z?"unshift":"push"](()=>{J=Z,t(31,J)})}function Le(Z){ft[Z?"unshift":"push"](()=>{B=Z,t(30,B)})}function ct(Z){ft[Z?"unshift":"push"](()=>{T=Z,t(29,T)})}return n.$$set=Z=>{"content"in Z&&t(0,i=Z.content),"selection"in Z&&t(1,r=Z.selection),"readOnly"in Z&&t(2,o=Z.readOnly),"indentation"in Z&&t(3,s=Z.indentation),"tabSize"in Z&&t(4,l=Z.tabSize),"mode"in Z&&t(5,a=Z.mode),"mainMenuBar"in Z&&t(6,u=Z.mainMenuBar),"navigationBar"in Z&&t(7,c=Z.navigationBar),"statusBar"in Z&&t(8,f=Z.statusBar),"askToFormat"in Z&&t(9,h=Z.askToFormat),"escapeControlCharacters"in Z&&t(10,d=Z.escapeControlCharacters),"escapeUnicodeCharacters"in Z&&t(11,p=Z.escapeUnicodeCharacters),"flattenColumns"in Z&&t(12,m=Z.flattenColumns),"parser"in Z&&t(13,g=Z.parser),"parseMemoizeOne"in Z&&t(14,b=Z.parseMemoizeOne),"validator"in Z&&t(15,y=Z.validator),"validationParser"in Z&&t(16,_=Z.validationParser),"pathParser"in Z&&t(17,M=Z.pathParser),"insideModal"in Z&&t(34,w=Z.insideModal),"onChange"in Z&&t(18,S=Z.onChange),"onChangeMode"in Z&&t(19,E=Z.onChangeMode),"onSelect"in Z&&t(20,I=Z.onSelect),"onRenderValue"in Z&&t(21,O=Z.onRenderValue),"onClassName"in Z&&t(22,P=Z.onClassName),"onRenderMenu"in Z&&t(35,A=Z.onRenderMenu),"onRenderContextMenu"in Z&&t(36,H=Z.onRenderContextMenu),"onError"in Z&&t(23,W=Z.onError),"onFocus"in Z&&t(24,q=Z.onFocus),"onBlur"in Z&&t(25,L=Z.onBlur),"onSortModal"in Z&&t(26,X=Z.onSortModal),"onTransformModal"in Z&&t(27,Y=Z.onTransformModal),"onJSONEditorModal"in Z&&t(28,G=Z.onJSONEditorModal)},n.$$.update=()=>{n.$$.dirty[0]&524320&&t(46,ne=[{type:"button",text:"text",title:`Switch to text mode (current mode: ${a})`,className:"jse-group-button jse-first"+(a===Gn.text||a==="code"?" jse-selected":""),onClick:()=>E(Gn.text)},{type:"button",text:"tree",title:`Switch to tree mode (current mode: ${a})`,className:"jse-group-button "+(a===Gn.tree?" jse-selected":""),onClick:()=>E(Gn.tree)},{type:"button",text:"table",title:`Switch to table mode (current mode: ${a})`,className:"jse-group-button jse-last"+(a===Gn.table?" jse-selected":""),onClick:()=>E(Gn.table)}]),n.$$.dirty[0]&32|n.$$.dirty[1]&32792&&t(32,ae=Z=>{const Ve=S8(Z[0])?ne.concat(Z):ne.concat(_e,Z);return A(Ve,{mode:a,modal:w})||Ve}),n.$$.dirty[0]&34|n.$$.dirty[1]&40&&t(33,Te=Z=>H(Z,{mode:a,modal:w,selection:r})||Z)},[i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y,_,M,S,E,I,O,P,W,q,L,X,Y,G,T,B,J,ae,Te,w,A,H,re,U,Ce,Ke,K,De,F,ke,Me,ne,Ae,Le,ct]}class MZ extends je{constructor(e){super(),ze(this,e,xZ,vZ,xn,{content:0,selection:1,readOnly:2,indentation:3,tabSize:4,mode:5,mainMenuBar:6,navigationBar:7,statusBar:8,askToFormat:9,escapeControlCharacters:10,escapeUnicodeCharacters:11,flattenColumns:12,parser:13,parseMemoizeOne:14,validator:15,validationParser:16,pathParser:17,insideModal:34,onChange:18,onChangeMode:19,onSelect:20,onRenderValue:21,onClassName:22,onRenderMenu:35,onRenderContextMenu:36,onError:23,onFocus:24,onBlur:25,onSortModal:26,onTransformModal:27,onJSONEditorModal:28,patch:37,expand:38,transform:39,validate:40,acceptAutoRepair:41,scrollTo:42,findElement:43,focus:44,refresh:45},null,[-1,-1])}get patch(){return this.$$.ctx[37]}get expand(){return this.$$.ctx[38]}get transform(){return this.$$.ctx[39]}get validate(){return this.$$.ctx[40]}get acceptAutoRepair(){return this.$$.ctx[41]}get scrollTo(){return this.$$.ctx[42]}get findElement(){return this.$$.ctx[43]}get focus(){return this.$$.ctx[44]}get refresh(){return this.$$.ctx[45]}}const JM=MZ;function P6(n){let e,t;return{c(){e=D("div"),t=we(n[22]),k(e,"class","jse-error svelte-vu88jz")},m(i,r){j(i,e,r),x(e,t)},p(i,r){r[0]&4194304&&We(t,i[22])},d(i){i&&z(e)}}}function R6(n){let e,t,i,r,o,s;return t=new ht({props:{data:JL}}),{c(){e=D("button"),$(t.$$.fragment),i=we(" Back"),k(e,"type","button"),k(e,"class","jse-secondary svelte-vu88jz")},m(l,a){j(l,e,a),ee(t,e,null),x(e,i),r=!0,o||(s=ue(e,"click",n[27]),o=!0)},p:he,i(l){r||(C(t.$$.fragment,l),r=!0)},o(l){v(t.$$.fragment,l),r=!1},d(l){l&&z(e),te(t),o=!1,s()}}}function AZ(n){let e,t,i;return{c(){e=D("button"),e.textContent="Close",k(e,"type","button"),k(e,"class","jse-primary svelte-vu88jz")},m(r,o){j(r,e,o),t||(i=[ue(e,"click",n[27]),vn(KM.call(null,e))],t=!0)},p:he,d(r){r&&z(e),t=!1,fn(i)}}}function EZ(n){let e,t,i;return{c(){e=D("button"),e.textContent="Apply",k(e,"type","button"),k(e,"class","jse-primary svelte-vu88jz")},m(r,o){j(r,e,o),t||(i=[ue(e,"click",n[26]),vn(KM.call(null,e))],t=!0)},p:he,d(r){r&&z(e),t=!1,fn(i)}}}function OZ(n){let e,t,i,r,o,s,l,a,u,c,f,h,d,p,m,g,b,y,_;t=new j2({props:{title:"Edit nested content "+(n[20].length>1?` (${n[20].length})`:""),onClose:n[27]}});let M={mode:n[23].mode,content:n[23].content,selection:n[23].selection,readOnly:n[0],indentation:n[1],tabSize:n[2],statusBar:n[5],askToFormat:n[6],mainMenuBar:n[3],navigationBar:n[4],escapeControlCharacters:n[7],escapeUnicodeCharacters:n[8],flattenColumns:n[9],parser:n[10],parseMemoizeOne:n[24],validator:n[11],validationParser:n[12],pathParser:n[13],insideModal:!0,onError:n[31],onChange:n[28],onChangeMode:n[30],onSelect:n[29],onRenderValue:n[14],onClassName:n[15],onFocus:tr,onBlur:tr,onRenderMenu:n[16],onRenderContextMenu:n[17],onSortModal:n[18],onTransformModal:n[19],onJSONEditorModal:n[32]};h=new JM({props:M}),n[37](h);let w=n[22]&&P6(n),S=n[20].length>1&&R6(n);function E(P,A){return P[0]?AZ:EZ}let I=E(n),O=I(n);return{c(){e=D("div"),$(t.$$.fragment),i=Q(),r=D("div"),o=D("div"),o.innerHTML='<div class="jse-label-inner svelte-vu88jz">Path</div>',s=Q(),l=D("input"),a=Q(),u=D("div"),u.innerHTML='<div class="jse-label-inner svelte-vu88jz">Contents</div>',c=Q(),f=D("div"),$(h.$$.fragment),d=Q(),p=D("div"),w&&w.c(),m=Q(),S&&S.c(),g=Q(),O.c(),k(o,"class","jse-label svelte-vu88jz"),k(l,"class","jse-path svelte-vu88jz"),k(l,"type","text"),l.readOnly=!0,k(l,"title","Selected path"),l.value=n[25],k(u,"class","jse-label svelte-vu88jz"),k(f,"class","jse-modal-inline-editor svelte-vu88jz"),k(p,"class","jse-actions svelte-vu88jz"),k(r,"class","jse-modal-contents svelte-vu88jz"),k(e,"class","jse-modal jse-jsoneditor-modal svelte-vu88jz")},m(P,A){j(P,e,A),ee(t,e,null),x(e,i),x(e,r),x(r,o),x(r,s),x(r,l),x(r,a),x(r,u),x(r,c),x(r,f),ee(h,f,null),x(r,d),x(r,p),w&&w.m(p,null),x(p,m),S&&S.m(p,null),x(p,g),O.m(p,null),b=!0,y||(_=vn(Zp.call(null,e,n[27])),y=!0)},p(P,A){const H={};A[0]&1048576&&(H.title="Edit nested content "+(P[20].length>1?` (${P[20].length})`:"")),t.$set(H),(!b||A[0]&33554432&&l.value!==P[25])&&(l.value=P[25]);const W={};A[0]&8388608&&(W.mode=P[23].mode),A[0]&8388608&&(W.content=P[23].content),A[0]&8388608&&(W.selection=P[23].selection),A[0]&1&&(W.readOnly=P[0]),A[0]&2&&(W.indentation=P[1]),A[0]&4&&(W.tabSize=P[2]),A[0]&32&&(W.statusBar=P[5]),A[0]&64&&(W.askToFormat=P[6]),A[0]&8&&(W.mainMenuBar=P[3]),A[0]&16&&(W.navigationBar=P[4]),A[0]&128&&(W.escapeControlCharacters=P[7]),A[0]&256&&(W.escapeUnicodeCharacters=P[8]),A[0]&512&&(W.flattenColumns=P[9]),A[0]&1024&&(W.parser=P[10]),A[0]&16777216&&(W.parseMemoizeOne=P[24]),A[0]&2048&&(W.validator=P[11]),A[0]&4096&&(W.validationParser=P[12]),A[0]&8192&&(W.pathParser=P[13]),A[0]&16384&&(W.onRenderValue=P[14]),A[0]&32768&&(W.onClassName=P[15]),A[0]&65536&&(W.onRenderMenu=P[16]),A[0]&131072&&(W.onRenderContextMenu=P[17]),A[0]&262144&&(W.onSortModal=P[18]),A[0]&524288&&(W.onTransformModal=P[19]),h.$set(W),P[22]?w?w.p(P,A):(w=P6(P),w.c(),w.m(p,m)):w&&(w.d(1),w=null),P[20].length>1?S?(S.p(P,A),A[0]&1048576&&C(S,1)):(S=R6(P),S.c(),C(S,1),S.m(p,g)):S&&(ce(),v(S,1,1,()=>{S=null}),fe()),I===(I=E(P))&&O?O.p(P,A):(O.d(1),O=I(P),O&&(O.c(),O.m(p,null)))},i(P){b||(C(t.$$.fragment,P),C(h.$$.fragment,P),C(S),b=!0)},o(P){v(t.$$.fragment,P),v(h.$$.fragment,P),v(S),b=!1},d(P){P&&z(e),te(t),n[37](null),te(h),w&&w.d(),S&&S.d(),O.d(),y=!1,_()}}}function KM(n){n.focus()}function TZ(n,e,t){let i,r,o,s;const l=Wn("jsoneditor:JSONEditorModal");let{content:a}=e,{path:u}=e,{onPatch:c}=e,{readOnly:f}=e,{indentation:h}=e,{tabSize:d}=e,{mainMenuBar:p}=e,{navigationBar:m}=e,{statusBar:g}=e,{askToFormat:b}=e,{escapeControlCharacters:y}=e,{escapeUnicodeCharacters:_}=e,{flattenColumns:M}=e,{parser:w}=e,{validator:S}=e,{validationParser:E}=e,{pathParser:I}=e,{onRenderValue:O}=e,{onClassName:P}=e,{onRenderMenu:A}=e,{onRenderContextMenu:H}=e,{onSortModal:W}=e,{onTransformModal:q}=e;const{close:L}=Vn("simple-modal");let X;const Y={mode:B(a),content:a,selection:null,relativePath:u};let G=[Y],T;function B(K){return Nc(K)&&Nt(K.json)?Gn.table:Gn.tree}function J(){var De;const K=((De=rt(G))==null?void 0:De.selection)||null;E2(K)&&X.scrollTo(Fe(K))}function ne(){if(l("handleApply"),!f)try{t(22,T=void 0);const K=i.relativePath,De=i.content,F=[{op:"replace",path:xe(K),value:dk(De,w).json}];if(G.length>1){const ke=G[G.length-2].content,Me=dk(ke,w).json,Ae={json:Br(Me,F)},ct={...G[G.length-2]||Y,content:Ae};t(20,G=[...G.slice(0,G.length-2),ct]),an().then(J)}else c(F),L()}catch(K){t(22,T=String(K))}}function _e(){l("handleClose"),G.length>1?(t(20,G=at(G)),an().then(J),t(22,T=void 0)):L()}function ae(K){l("handleChange",K);const De={...i,content:K};t(20,G=[...at(G),De])}function Te(K){l("handleChangeSelection",K);const De={...i,selection:K};t(20,G=[...at(G),De])}function re(K){l("handleChangeMode",K);const De={...i,mode:K};t(20,G=[...at(G),De])}function U(K){t(22,T=K.toString()),console.error(K)}function Ce({content:K,path:De}){l("handleJSONEditorModal",{content:K,path:De});const F={mode:B(K),content:K,selection:null,relativePath:De};t(20,G=[...G,F])}function Ke(K){ft[K?"unshift":"push"](()=>{X=K,t(21,X)})}return n.$$set=K=>{"content"in K&&t(33,a=K.content),"path"in K&&t(34,u=K.path),"onPatch"in K&&t(35,c=K.onPatch),"readOnly"in K&&t(0,f=K.readOnly),"indentation"in K&&t(1,h=K.indentation),"tabSize"in K&&t(2,d=K.tabSize),"mainMenuBar"in K&&t(3,p=K.mainMenuBar),"navigationBar"in K&&t(4,m=K.navigationBar),"statusBar"in K&&t(5,g=K.statusBar),"askToFormat"in K&&t(6,b=K.askToFormat),"escapeControlCharacters"in K&&t(7,y=K.escapeControlCharacters),"escapeUnicodeCharacters"in K&&t(8,_=K.escapeUnicodeCharacters),"flattenColumns"in K&&t(9,M=K.flattenColumns),"parser"in K&&t(10,w=K.parser),"validator"in K&&t(11,S=K.validator),"validationParser"in K&&t(12,E=K.validationParser),"pathParser"in K&&t(13,I=K.pathParser),"onRenderValue"in K&&t(14,O=K.onRenderValue),"onClassName"in K&&t(15,P=K.onClassName),"onRenderMenu"in K&&t(16,A=K.onRenderMenu),"onRenderContextMenu"in K&&t(17,H=K.onRenderContextMenu),"onSortModal"in K&&t(18,W=K.onSortModal),"onTransformModal"in K&&t(19,q=K.onTransformModal)},n.$$.update=()=>{n.$$.dirty[0]&1048576&&t(23,i=rt(G)||Y),n.$$.dirty[0]&1048576&&t(36,r=G.flatMap(K=>K.relativePath)),n.$$.dirty[1]&32&&t(25,o=yt(r)?"(document root)":Ri(r)),n.$$.dirty[0]&1024&&t(24,s=Of(w.parse))},[f,h,d,p,m,g,b,y,_,M,w,S,E,I,O,P,A,H,W,q,G,X,T,i,s,o,ne,_e,ae,Te,re,U,Ce,a,u,c,r,Ke]}class DZ extends je{constructor(e){super(),ze(this,e,TZ,OZ,Ze,{content:33,path:34,onPatch:35,readOnly:0,indentation:1,tabSize:2,mainMenuBar:3,navigationBar:4,statusBar:5,askToFormat:6,escapeControlCharacters:7,escapeUnicodeCharacters:8,flattenColumns:9,parser:10,validator:11,validationParser:12,pathParser:13,onRenderValue:14,onClassName:15,onRenderMenu:16,onRenderContextMenu:17,onSortModal:18,onTransformModal:19},null,[-1,-1])}}const PZ=DZ;function RZ(n,e,t){const i=Vn("simple-modal"),r=i.open,o=i.close;return[r,o]}class NZ extends je{constructor(e){super(),ze(this,e,RZ,null,Ze,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}const IZ=NZ;function N6(n){let e,t,i={mode:n[1],content:n[0],selection:n[2],readOnly:n[3],indentation:n[4],tabSize:n[5],statusBar:n[8],askToFormat:n[9],mainMenuBar:n[6],navigationBar:n[7],escapeControlCharacters:n[10],escapeUnicodeCharacters:n[11],flattenColumns:n[12],parser:n[13],parseMemoizeOne:n[27],validator:n[14],validationParser:n[15],pathParser:n[16],insideModal:!1,onError:n[21],onChange:n[28],onChangeMode:n[32],onSelect:n[29],onRenderValue:n[17],onClassName:n[18],onFocus:n[30],onBlur:n[31],onRenderMenu:n[19],onRenderContextMenu:n[20],onSortModal:n[34],onTransformModal:n[33],onJSONEditorModal:n[35]};return e=new JM({props:i}),n[62](e),{c(){$(e.$$.fragment)},m(r,o){ee(e,r,o),t=!0},p(r,o){const s={};o[0]&2&&(s.mode=r[1]),o[0]&1&&(s.content=r[0]),o[0]&4&&(s.selection=r[2]),o[0]&8&&(s.readOnly=r[3]),o[0]&16&&(s.indentation=r[4]),o[0]&32&&(s.tabSize=r[5]),o[0]&256&&(s.statusBar=r[8]),o[0]&512&&(s.askToFormat=r[9]),o[0]&64&&(s.mainMenuBar=r[6]),o[0]&128&&(s.navigationBar=r[7]),o[0]&1024&&(s.escapeControlCharacters=r[10]),o[0]&2048&&(s.escapeUnicodeCharacters=r[11]),o[0]&4096&&(s.flattenColumns=r[12]),o[0]&8192&&(s.parser=r[13]),o[0]&134217728&&(s.parseMemoizeOne=r[27]),o[0]&16384&&(s.validator=r[14]),o[0]&32768&&(s.validationParser=r[15]),o[0]&65536&&(s.pathParser=r[16]),o[0]&2097152&&(s.onError=r[21]),o[0]&131072&&(s.onRenderValue=r[17]),o[0]&262144&&(s.onClassName=r[18]),o[0]&524288&&(s.onRenderMenu=r[19]),o[0]&1048576&&(s.onRenderContextMenu=r[20]),e.$set(s)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){n[62](null),te(e,r)}}}function BZ(n){let e,t,i,r,o=n[22],s;function l(c){n[61](c)}let a={};n[25]!==void 0&&(a.open=n[25]),e=new IZ({props:a}),ft.push(()=>Tr(e,"open",l));let u=N6(n);return{c(){$(e.$$.fragment),i=Q(),r=D("div"),u.c(),k(r,"class","jse-main svelte-ybuk0j"),le(r,"jse-focus",n[23])},m(c,f){ee(e,c,f),j(c,i,f),j(c,r,f),u.m(r,null),s=!0},p(c,f){const h={};!t&&f[0]&33554432&&(t=!0,h.open=c[25],Dr(()=>t=!1)),e.$set(h),f[0]&4194304&&Ze(o,o=c[22])?(ce(),v(u,1,1,he),fe(),u=N6(c),u.c(),C(u,1),u.m(r,null)):u.p(c,f),(!s||f[0]&8388608)&&le(r,"jse-focus",c[23])},i(c){s||(C(e.$$.fragment,c),C(u),s=!0)},o(c){v(e.$$.fragment,c),v(u),s=!1},d(c){te(e,c),c&&z(i),c&&z(r),u.d(c)}}}function LZ(n){let e,t;return e=new SS({props:{closeOnEsc:!1,$$slots:{default:[BZ]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&201326591|r[2]&8&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function FZ(n){var o;let e,t;const i=[{show:(o=n[26])==null?void 0:o.component},Cy,{closeOnEsc:!1}];let r={$$slots:{default:[LZ]},$$scope:{ctx:n}};for(let s=0;s<i.length;s+=1)r=Qi(r,i[s]);return e=new SS({props:r}),e.$on("close",n[36]),{c(){$(e.$$.fragment)},m(s,l){ee(e,s,l),t=!0},p(s,l){var u;const a=l[0]&67108864?us(i,[l[0]&67108864&&{show:(u=s[26])==null?void 0:u.component},l&0&&yf(Cy),i[2]]):{};l[0]&201326591|l[2]&8&&(a.$$scope={dirty:l,ctx:s}),e.$set(a)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){v(e.$$.fragment,s),t=!1},d(s){te(e,s)}}}function jZ(n){let e,t;return e=new Bv({props:{$$slots:{default:[FZ]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o={};r[0]&268435455|r[2]&8&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function zZ(n,e,t){let i;const r=Wn("jsoneditor:JSONEditor");let{content:o={text:""}}=e,{selection:s=null}=e,{readOnly:l=!1}=e,{indentation:a=2}=e,{tabSize:u=4}=e,{mode:c=Gn.tree}=e,{mainMenuBar:f=!0}=e,{navigationBar:h=!0}=e,{statusBar:d=!0}=e,{askToFormat:p=!0}=e,{escapeControlCharacters:m=!1}=e,{escapeUnicodeCharacters:g=!1}=e,{flattenColumns:b=!0}=e,{parser:y=JSON}=e,{validator:_=null}=e,{validationParser:M=JSON}=e,{pathParser:w={parse:sB,stringify:Ri}}=e,{queryLanguages:S=[fB]}=e,{queryLanguageId:E=S[0].id}=e,{onChangeQueryLanguage:I=tr}=e,{onChange:O=null}=e,{onSelect:P=tr}=e,{onRenderValue:A=VL}=e,{onClassName:H=()=>{}}=e,{onRenderMenu:W=tr}=e,{onRenderContextMenu:q=tr}=e,{onChangeMode:L=tr}=e,{onError:X=se=>{console.error(se),alert(se.toString())}}=e,{onFocus:Y=tr}=e,{onBlur:G=tr}=e,T=gc(),B=!1,J,ne,_e=null,ae=y;function Te(){return o}async function re(se){r("set");const Je=j0(se);if(Je)throw new Error(Je);t(22,T=gc()),t(0,o=se)}async function U(se){r("update");const Je=j0(se);if(Je)throw new Error(Je);t(0,o=se),await an()}async function Ce(se){if(su(o))try{t(0,o={json:y.parse(o.text),text:void 0})}catch{throw new Error("Cannot apply patch: current document contains invalid JSON")}const Je=J.patch(se);return await an(),Je}async function Ke(se){t(2,s=se),await an()}async function K(se){J.expand(se),await an()}function De(se){J.transform(se)}function F(){return J.validate()}async function ke(){const se=J.acceptAutoRepair();return await an(),se}async function Me(se){await J.scrollTo(se)}function Ae(se){return J.findElement(se)}async function Le(){J.focus(),await an()}async function ct(){await J.refresh()}async function Z(se){this.$set(se),await an()}async function Ve(){this.$destroy(),await an()}function bt(se,Je,Bt){t(0,o=se),O&&O(se,Je,Bt)}function me(se){t(2,s=se),P(se)}function $e(){t(23,B=!0),Y&&Y()}function Ut(){t(23,B=!1),G&&G()}async function Ue(se){c!==se&&(t(1,c=se),await an(),await Le(),L(se))}function wt(se){r("handleChangeQueryLanguage",se),t(37,E=se),I(se)}function _t({id:se,json:Je,rootPath:Bt,onTransform:Pn,onClose:xt}){l||ne(Xq,{id:se,json:Je,rootPath:Bt,indentation:a,escapeControlCharacters:m,escapeUnicodeCharacters:g,parser:y,parseMemoizeOne:i,validationParser:M,pathParser:w,queryLanguages:S,queryLanguageId:E,onChangeQueryLanguage:wt,onRenderValue:A,onRenderMenu:W,onRenderContextMenu:q,onClassName:H,onTransform:Pn},GO,{onClose:xt})}function it({id:se,json:Je,rootPath:Bt,onSort:Pn,onClose:xt}){l||ne(tW,{id:se,json:Je,rootPath:Bt,onSort:Pn},KO,{onClose:xt})}function Mn({content:se,path:Je,onPatch:Bt,onClose:Pn}){r("onJSONEditorModal",{content:se,path:Je}),t(26,_e={component:_S(PZ,{content:se,path:Je,onPatch:Bt,readOnly:l,indentation:a,tabSize:u,mainMenuBar:f,navigationBar:h,statusBar:d,askToFormat:p,escapeControlCharacters:m,escapeUnicodeCharacters:g,flattenColumns:b,parser:y,validator:void 0,validationParser:M,pathParser:w,onRenderValue:A,onClassName:H,onRenderMenu:W,onRenderContextMenu:q,onSortModal:it,onTransformModal:_t}),callbacks:{onClose:Pn}})}function gn(){var se,Je;(Je=(se=_e==null?void 0:_e.callbacks)==null?void 0:se.onClose)==null||Je.call(se),t(26,_e=null)}function Dn(se){ne=se,t(25,ne)}function ti(se){ft[se?"unshift":"push"](()=>{J=se,t(24,J)})}return n.$$set=se=>{"content"in se&&t(0,o=se.content),"selection"in se&&t(2,s=se.selection),"readOnly"in se&&t(3,l=se.readOnly),"indentation"in se&&t(4,a=se.indentation),"tabSize"in se&&t(5,u=se.tabSize),"mode"in se&&t(1,c=se.mode),"mainMenuBar"in se&&t(6,f=se.mainMenuBar),"navigationBar"in se&&t(7,h=se.navigationBar),"statusBar"in se&&t(8,d=se.statusBar),"askToFormat"in se&&t(9,p=se.askToFormat),"escapeControlCharacters"in se&&t(10,m=se.escapeControlCharacters),"escapeUnicodeCharacters"in se&&t(11,g=se.escapeUnicodeCharacters),"flattenColumns"in se&&t(12,b=se.flattenColumns),"parser"in se&&t(13,y=se.parser),"validator"in se&&t(14,_=se.validator),"validationParser"in se&&t(15,M=se.validationParser),"pathParser"in se&&t(16,w=se.pathParser),"queryLanguages"in se&&t(38,S=se.queryLanguages),"queryLanguageId"in se&&t(37,E=se.queryLanguageId),"onChangeQueryLanguage"in se&&t(39,I=se.onChangeQueryLanguage),"onChange"in se&&t(40,O=se.onChange),"onSelect"in se&&t(41,P=se.onSelect),"onRenderValue"in se&&t(17,A=se.onRenderValue),"onClassName"in se&&t(18,H=se.onClassName),"onRenderMenu"in se&&t(19,W=se.onRenderMenu),"onRenderContextMenu"in se&&t(20,q=se.onRenderContextMenu),"onChangeMode"in se&&t(42,L=se.onChangeMode),"onError"in se&&t(21,X=se.onError),"onFocus"in se&&t(43,Y=se.onFocus),"onBlur"in se&&t(44,G=se.onBlur)},n.$$.update=()=>{if(n.$$.dirty[0]&8193|n.$$.dirty[1]&536870912&&!FI(y,ae)){if(r("parser changed, recreate editor"),Nc(o)){const se=ae.stringify(o.json);t(0,o={json:se!==void 0?y.parse(se):void 0})}t(60,ae=y),t(22,T=gc())}if(n.$$.dirty[0]&1){const se=j0(o);se&&console.error("Error: "+se)}n.$$.dirty[0]&8192&&t(27,i=Of(y.parse)),n.$$.dirty[0]&2&&(r("mode changed to",c),c==="code"&&console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'))},[o,c,s,l,a,u,f,h,d,p,m,g,b,y,_,M,w,A,H,W,q,X,T,B,J,ne,_e,i,bt,me,$e,Ut,Ue,_t,it,Mn,gn,E,S,I,O,P,L,Y,G,Te,re,U,Ce,Ke,K,De,F,ke,Me,Ae,Le,ct,Z,Ve,ae,Dn,ti]}class VZ extends je{constructor(e){super(),ze(this,e,zZ,jZ,Ze,{content:0,selection:2,readOnly:3,indentation:4,tabSize:5,mode:1,mainMenuBar:6,navigationBar:7,statusBar:8,askToFormat:9,escapeControlCharacters:10,escapeUnicodeCharacters:11,flattenColumns:12,parser:13,validator:14,validationParser:15,pathParser:16,queryLanguages:38,queryLanguageId:37,onChangeQueryLanguage:39,onChange:40,onSelect:41,onRenderValue:17,onClassName:18,onRenderMenu:19,onRenderContextMenu:20,onChangeMode:42,onError:21,onFocus:43,onBlur:44,get:45,set:46,update:47,patch:48,select:49,expand:50,transform:51,validate:52,acceptAutoRepair:53,scrollTo:54,findElement:55,focus:56,refresh:57,updateProps:58,destroy:59},null,[-1,-1,-1])}get get(){return this.$$.ctx[45]}get set(){return this.$$.ctx[46]}get update(){return this.$$.ctx[47]}get patch(){return this.$$.ctx[48]}get select(){return this.$$.ctx[49]}get expand(){return this.$$.ctx[50]}get transform(){return this.$$.ctx[51]}get validate(){return this.$$.ctx[52]}get acceptAutoRepair(){return this.$$.ctx[53]}get scrollTo(){return this.$$.ctx[54]}get findElement(){return this.$$.ctx[55]}get focus(){return this.$$.ctx[56]}get refresh(){return this.$$.ctx[57]}get updateProps(){return this.$$.ctx[58]}get destroy(){return this.$$.ctx[59]}}const Jae=VZ;function Jn(n){this.content=n}Jn.prototype={constructor:Jn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var i=t&&t!=n?this.remove(t):this,r=i.find(n),o=i.content.slice();return r==-1?o.push(t||n,e):(o[r+1]=e,t&&(o[r]=t)),new Jn(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Jn(t)},addToStart:function(n,e){return new Jn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Jn(t)},addBefore:function(n,e,t){var i=this.remove(e),r=i.content.slice(),o=i.find(n);return r.splice(o==-1?r.length:o,0,e,t),new Jn(r)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Jn.from(n),n.size?new Jn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Jn.from(n),n.size?new Jn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Jn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Jn.from=function(n){if(n instanceof Jn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Jn(e)};function GM(n,e,t){for(let i=0;;i++){if(i==n.childCount||i==e.childCount)return n.childCount==e.childCount?null:t;let r=n.child(i),o=e.child(i);if(r==o){t+=r.nodeSize;continue}if(!r.sameMarkup(o))return t;if(r.isText&&r.text!=o.text){for(let s=0;r.text[s]==o.text[s];s++)t++;return t}if(r.content.size||o.content.size){let s=GM(r.content,o.content,t+1);if(s!=null)return s}t+=r.nodeSize}}function QM(n,e,t,i){for(let r=n.childCount,o=e.childCount;;){if(r==0||o==0)return r==o?null:{a:t,b:i};let s=n.child(--r),l=e.child(--o),a=s.nodeSize;if(s==l){t-=a,i-=a;continue}if(!s.sameMarkup(l))return{a:t,b:i};if(s.isText&&s.text!=l.text){let u=0,c=Math.min(s.text.length,l.text.length);for(;u<c&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,t--,i--;return{a:t,b:i}}if(s.content.size||l.content.size){let u=QM(s.content,l.content,t-1,i-1);if(u)return u}t-=a,i-=a}}class ye{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,r=0,o){for(let s=0,l=0;l<t;s++){let a=this.content[s],u=l+a.nodeSize;if(u>e&&i(a,r+l,o||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),i,r+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,r){let o="",s=!0;return this.nodesBetween(e,t,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,t-a):l.isLeaf?r?typeof r=="function"?r(l):r:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&i&&(s?s=!1:o+=i),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(i)&&(r[r.length-1]=t.withText(t.text+i.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new ye(r,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],r=0;if(t>e)for(let o=0,s=0;s<t;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,t-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,t-s-1))),i.push(l),r+=l.nodeSize),s=a}return new ye(i,r)}cutByIndex(e,t){return e==t?ye.empty:e==0&&t==this.content.length?this:new ye(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-i.nodeSize;return r[e]=t,new ye(r,o)}addToStart(e){return new ye([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ye(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let r=this.content[t];e(r,i,t),i+=r.nodeSize}}findDiffStart(e,t=0){return GM(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return QM(this,e,t,i)}findIndex(e,t=-1){if(e==0)return Bh(0,e);if(e==this.size)return Bh(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,r=0;;i++){let o=this.child(i),s=r+o.nodeSize;if(s>=e)return s==e||t>0?Bh(i+1,s):Bh(i,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ye.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ye(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ye.empty;let t,i=0;for(let r=0;r<e.length;r++){let o=e[r];i+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new ye(t||e,i)}static from(e){if(!e)return ye.empty;if(e instanceof ye)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ye([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ye.empty=new ye([],0);const vm={index:0,offset:0};function Bh(n,e){return vm.index=n,vm.offset=e,vm}function op(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!op(n[i],e[i]))return!1}else{for(let i in n)if(!(i in e)||!op(n[i],e[i]))return!1;for(let i in e)if(!(i in n))return!1}return!0}let Pt=class Tg{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!i&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),i=!0),t&&t.push(o)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&op(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=i.create(t.attrs);return i.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Tg.none;if(e instanceof Tg)return[e];let t=e.slice();return t.sort((i,r)=>i.type.rank-r.type.rank),t}};Pt.none=[];class sp extends Error{}class Re{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=YM(this.content,e+this.openStart,t);return i&&new Re(i,this.openStart,this.openEnd)}removeBetween(e,t){return new Re(XM(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Re.empty;let i=t.openStart||0,r=t.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Re(ye.fromJSON(e,t.content),i,r)}static maxOpen(e,t=!0){let i=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)i++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new Re(e,i,r)}}Re.empty=new Re(ye.empty,0,0);function XM(n,e,t){let{index:i,offset:r}=n.findIndex(e),o=n.maybeChild(i),{index:s,offset:l}=n.findIndex(t);if(r==e||o.isText){if(l!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(i!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(i,o.copy(XM(o.content,e-r-1,t-r-1)))}function YM(n,e,t,i){let{index:r,offset:o}=n.findIndex(e),s=n.maybeChild(r);if(o==e||s.isText)return i&&!i.canReplace(r,r,t)?null:n.cut(0,e).append(t).append(n.cut(e));let l=YM(s.content,e-o-1,t);return l&&n.replaceChild(r,s.copy(l))}function HZ(n,e,t){if(t.openStart>n.depth)throw new sp("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new sp("Inconsistent open depths");return ZM(n,e,t,0)}function ZM(n,e,t,i){let r=n.index(i),o=n.node(i);if(r==e.index(i)&&i<n.depth-t.openStart){let s=ZM(n,e,t,i+1);return o.copy(o.content.replaceChild(r,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==i&&e.depth==i){let s=n.parent,l=s.content;return Nl(s,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=qZ(t,n);return Nl(o,eA(n,s,l,e,i))}else return Nl(o,lp(n,e,i))}function $M(n,e){if(!e.type.compatibleContent(n.type))throw new sp("Cannot join "+e.type.name+" onto "+n.type.name)}function Dg(n,e,t){let i=n.node(t);return $M(i,e.node(t)),i}function Rl(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function xc(n,e,t,i){let r=(e||n).node(t),o=0,s=e?e.index(t):r.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Rl(n.nodeAfter,i),o++));for(let l=o;l<s;l++)Rl(r.child(l),i);e&&e.depth==t&&e.textOffset&&Rl(e.nodeBefore,i)}function Nl(n,e){return n.type.checkContent(e),n.copy(e)}function eA(n,e,t,i,r){let o=n.depth>r&&Dg(n,e,r+1),s=i.depth>r&&Dg(t,i,r+1),l=[];return xc(null,n,r,l),o&&s&&e.index(r)==t.index(r)?($M(o,s),Rl(Nl(o,eA(n,e,t,i,r+1)),l)):(o&&Rl(Nl(o,lp(n,e,r+1)),l),xc(e,t,r,l),s&&Rl(Nl(s,lp(t,i,r+1)),l)),xc(i,null,r,l),new ye(l)}function lp(n,e,t){let i=[];if(xc(null,n,t,i),n.depth>t){let r=Dg(n,e,t+1);Rl(Nl(r,lp(n,e,t+1)),i)}return xc(e,null,t,i),new ye(i)}function qZ(n,e){let t=e.depth-n.openStart,r=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)r=e.node(o).copy(ye.from(r));return{start:r.resolveNoCache(n.openStart+t),end:r.resolveNoCache(r.content.size-n.openEnd-t)}}class rf{constructor(e,t,i){this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=e.child(t);return i?e.child(t).cut(i):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],r=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)r+=i.child(o).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Pt.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),r=e.maybeChild(t);if(!i){let l=i;i=r,r=l}let o=i.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!r||!o[s].isInSet(r.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!r||!i[o].isInSet(r.marks))&&(i=i[o--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new ap(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],r=0,o=t;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),u=o-a;if(i.push(s,l,r+a),!u||(s=s.child(l),s.isText))break;o=u-1,r+=a+1}return new rf(t,i,o)}static resolveCached(e,t){let i=I6.get(e);if(i)for(let o=0;o<i.elts.length;o++){let s=i.elts[o];if(s.pos==t)return s}else I6.set(e,i=new WZ);let r=i.elts[i.i]=rf.resolve(e,t);return i.i=(i.i+1)%UZ,r}}class WZ{constructor(){this.elts=[],this.i=0}}const UZ=12,I6=new WeakMap;class ap{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const JZ=Object.create(null);let Hs=class Pg{constructor(e,t,i,r=Pt.none){this.type=e,this.attrs=t,this.marks=r,this.content=i||ye.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,r=0){this.content.nodesBetween(e,t,i,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,r){return this.content.textBetween(e,t,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&op(this.attrs,t||e.defaultAttrs||JZ)&&Pt.sameSet(this.marks,i||Pt.none)}copy(e=null){return e==this.content?this:new Pg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Pg(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return Re.empty;let r=this.resolve(e),o=this.resolve(t),s=i?0:r.sharedDepth(t),l=r.start(s),u=r.node(s).content.cut(r.pos-l,o.pos-l);return new Re(u,r.depth-s,o.depth-s)}replace(e,t,i){return HZ(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let r=this.content.child(t-1);return{node:r,index:t-1,offset:i-r.nodeSize}}resolve(e){return rf.resolveCached(this,e)}resolveNoCache(e){return rf.resolve(this,e)}rangeHasMark(e,t,i){let r=!1;return t>e&&this.nodesBetween(e,t,o=>(i.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),tA(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=ye.empty,r=0,o=i.childCount){let s=this.contentMatchAt(e).matchFragment(i,r,o),l=s&&s.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=r;a<o;a++)if(!this.type.allowsMarks(i.child(a).marks))return!1;return!0}canReplaceWith(e,t,i,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(i),s=o&&o.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Pt.none;for(let t=0;t<this.marks.length;t++){let i=this.marks[t];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!Pt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}let r=ye.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,i);return o.type.checkAttrs(o.attrs),o}};Hs.prototype.text=void 0;class up extends Hs{constructor(e,t,i,r){if(super(e,t,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):tA(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new up(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new up(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function tA(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class $l{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let i=new KZ(e,t);if(i.next==null)return $l.empty;let r=nA(i);i.next&&i.err("Unexpected trailing text");let o=e$($Z(r));return t$(o,i),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let r=this;for(let o=t;r&&o<i;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let r=[this];function o(s,l){let a=s.matchFragment(e,i);if(a&&(!t||a.validEnd))return ye.from(l.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&r.indexOf(f)==-1){r.push(f);let h=o(f,l.concat(c));if(h)return h}}return null}return o(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),o=r.match;if(o.matchType(e)){let s=[];for(let l=r;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!r.type||a.validEnd)&&(i.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let r=0;r<i.next.length;r++)e.indexOf(i.next[r].next)==-1&&t(i.next[r].next)}return t(this),e.map((i,r)=>{let o=r+(i.validEnd?"*":" ")+" ";for(let s=0;s<i.next.length;s++)o+=(s?", ":"")+i.next[s].type.name+"->"+e.indexOf(i.next[s].next);return o}).join(`
`)}}$l.empty=new $l(!0);class KZ{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function nA(n){let e=[];do e.push(GZ(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function GZ(n){let e=[];do e.push(QZ(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function QZ(n){let e=ZZ(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=XZ(n,e);else break;return e}function B6(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function XZ(n,e){let t=B6(n),i=t;return n.eat(",")&&(n.next!="}"?i=B6(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function YZ(n,e){let t=n.nodeTypes,i=t[e];if(i)return[i];let r=[];for(let o in t){let s=t[o];s.isInGroup(e)&&r.push(s)}return r.length==0&&n.err("No node type or group '"+e+"' found"),r}function ZZ(n){if(n.eat("(")){let e=nA(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=YZ(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function $Z(n){let e=[[]];return r(o(n,0),t()),e;function t(){return e.push([])-1}function i(s,l,a){let u={term:a,to:l};return e[s].push(u),u}function r(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(s.type=="seq")for(let a=0;;a++){let u=o(s.exprs[a],l);if(a==s.exprs.length-1)return u;r(u,l=t())}else if(s.type=="star"){let a=t();return i(l,a),r(o(s.expr,a),a),[i(a)]}else if(s.type=="plus"){let a=t();return r(o(s.expr,l),a),r(o(s.expr,a),a),[i(a)]}else{if(s.type=="opt")return[i(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let u=0;u<s.min;u++){let c=t();r(o(s.expr,a),c),a=c}if(s.max==-1)r(o(s.expr,a),a);else for(let u=s.min;u<s.max;u++){let c=t();i(a,c),r(o(s.expr,a),c),a=c}return[i(a)]}else{if(s.type=="name")return[i(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function iA(n,e){return e-n}function L6(n,e){let t=[];return i(e),t.sort(iA);function i(r){let o=n[r];if(o.length==1&&!o[0].term)return i(o[0].to);t.push(r);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&t.indexOf(a)==-1&&i(a)}}}function e$(n){let e=Object.create(null);return t(L6(n,0));function t(i){let r=[];i.forEach(s=>{n[s].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<r.length;c++)r[c][0]==l&&(u=r[c][1]);L6(n,a).forEach(c=>{u||r.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[i.join(",")]=new $l(i.indexOf(n.length-1)>-1);for(let s=0;s<r.length;s++){let l=r[s][1].sort(iA);o.next.push({type:r[s][0],next:e[l.join(",")]||t(l)})}return o}}function t$(n,e){for(let t=0,i=[n];t<i.length;t++){let r=i[t],o=!r.validEnd,s=[];for(let l=0;l<r.next.length;l++){let{type:a,next:u}=r.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),i.indexOf(u)==-1&&i.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function rA(n){let e=Object.create(null);for(let t in n){let i=n[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function oA(n,e){let t=Object.create(null);for(let i in n){let r=e&&e[i];if(r===void 0){let o=n[i];if(o.hasDefault)r=o.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=r}return t}function sA(n,e,t,i){for(let r in e)if(!(r in n))throw new RangeError(`Unsupported attribute ${r} for ${t} of type ${r}`);for(let r in n){let o=n[r];o.validate&&o.validate(e[r])}}function lA(n,e){let t=Object.create(null);if(e)for(let i in e)t[i]=new i$(n,i,e[i]);return t}let F6=class aA{constructor(e,t,i){this.name=e,this.schema=t,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=lA(e,i.attrs),this.defaultAttrs=rA(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==$l.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:oA(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Hs(this,this.computeAttrs(e),ye.from(t),Pt.setFrom(i))}createChecked(e=null,t,i){return t=ye.from(t),this.checkContent(t),new Hs(this,this.computeAttrs(e),t,Pt.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=ye.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(ye.empty,!0);return o?new Hs(this,e,t.append(o),Pt.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){sA(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:Pt.none:e}static compile(e,t){let i=Object.create(null);e.forEach((o,s)=>i[o]=new aA(o,t,s));let r=t.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let o in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function n$(n,e,t){let i=t.split("|");return r=>{let o=r===null?"null":typeof r;if(i.indexOf(o)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${n}, got ${o}`)}}class i${constructor(e,t,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?n$(e,t,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class p0{constructor(e,t,i,r){this.name=e,this.rank=t,this.schema=i,this.spec=r,this.attrs=lA(e,r.attrs),this.excluded=null;let o=rA(this.attrs);this.instance=o?new Pt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Pt(this,oA(this.attrs,e))}static compile(e,t){let i=Object.create(null),r=0;return e.forEach((o,s)=>i[o]=new p0(o,r++,t,s)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){sA(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Db{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=Jn.from(e.nodes),t.marks=Jn.from(e.marks||{}),this.nodes=F6.compile(this.spec.nodes,this),this.marks=p0.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let o=this.nodes[r],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=i[s]||(i[s]=$l.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?j6(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let r in this.marks){let o=this.marks[r],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:j6(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof F6){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,r)}text(e,t){let i=this.nodes.text;return new up(i,i.defaultAttrs,e,Pt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Hs.fromJSON(this,e)}markFromJSON(e){return Pt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function j6(n,e){let t=[];for(let i=0;i<e.length;i++){let r=e[i],o=n.marks[r],s=o;if(o)t.push(o);else for(let l in n.marks){let a=n.marks[l];(r=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(r)>-1)&&t.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}function r$(n){return n.tag!=null}function o$(n){return n.style!=null}class Yo{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let i=this.matchedStyles=[];t.forEach(r=>{if(r$(r))this.tags.push(r);else if(o$(r)){let o=/[^=]*/.exec(r.style)[0];i.indexOf(o)<0&&i.push(o),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let i=new V6(this,t,!1);return i.addAll(e,Pt.none,t.from,t.to),i.finish()}parseSlice(e,t={}){let i=new V6(this,t,!0);return i.addAll(e,Pt.none,t.from,t.to),Re.maxOpen(i.finish())}matchTag(e,t,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let o=this.tags[r];if(a$(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,t,i,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!i.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let t=[];function i(r){let o=r.priority==null?50:r.priority,s=0;for(;s<t.length;s++){let l=t[s];if((l.priority==null?50:l.priority)<o)break}t.splice(s,0,r)}for(let r in e.marks){let o=e.marks[r].spec.parseDOM;o&&o.forEach(s=>{i(s=H6(s)),s.mark||s.ignore||s.clearMark||(s.mark=r)})}for(let r in e.nodes){let o=e.nodes[r].spec.parseDOM;o&&o.forEach(s=>{i(s=H6(s)),s.node||s.ignore||s.mark||(s.node=r)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Yo(e,Yo.schemaRules(e)))}}const uA={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},s$={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},cA={ol:!0,ul:!0},of=1,Rg=2,Mc=4;function z6(n,e,t){return e!=null?(e?of:0)|(e==="full"?Rg:0):n&&n.whitespace=="pre"?of|Rg:t&~Mc}class Lh{constructor(e,t,i,r,o,s){this.type=e,this.attrs=t,this.marks=i,this.solid=r,this.options=s,this.content=[],this.activeMarks=Pt.none,this.match=o||(s&Mc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ye.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(e.type))?(this.match=i,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&of)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let o=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-r[0].length))}}let t=ye.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ye.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!uA.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class V6{constructor(e,t,i){this.parser=e,this.options=t,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let r=t.topNode,o,s=z6(null,t.preserveWhitespace,0)|(i?Mc:0);r?o=new Lh(r.type,r.attrs,Pt.none,!0,t.topMatch||r.type.contentMatch,s):i?o=new Lh(null,null,Pt.none,!0,null,s):o=new Lh(e.schema.topNodeType,null,Pt.none,!0,null,s),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let i=e.nodeValue,r=this.top,o=r.options&Rg?"full":this.localPreserveWS||(r.options&of)>0;if(o==="full"||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(o)o!=="full"?i=i.replace(/\r?\n|\r/g," "):i=i.replace(/\r\n?/g,`
`);else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let s=r.content[r.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),t,!/\S/.test(i)),this.findInText(e)}else this.findInside(e)}addElement(e,t,i){let r=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;cA.hasOwnProperty(s)&&this.parser.normalizeLists&&l$(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,i));e:if(a?a.ignore:s$.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let u,c=this.needsBlock;if(uA.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let f=a&&a.skip?t:this.readStyles(e,t);f&&this.addAll(e,f),u&&this.sync(o),this.needsBlock=c}else{let u=this.readStyles(e,t);u&&this.addElementByRule(e,a,u,a.consuming===!1?l:void 0)}this.localPreserveWS=r}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let i=e.style;if(i&&i.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let o=this.parser.matchedStyles[r],s=i.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?t=t.filter(u=>!a.clearMark(u)):t=t.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return t}addElementByRule(e,t,i,r){let o,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),i,e.nodeName=="BR")||this.leafFallback(e,i);else{let a=this.enter(s,t.attrs||null,i,t.preserveWhitespace);a&&(o=!0,i=a)}else{let a=this.parser.schema.marks[t.mark];i=i.concat(a.create(t.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,i,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,i,!1));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a,i),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,t,i,r){let o=i||0;for(let s=i?e.childNodes[i]:e.firstChild,l=r==null?null:e.childNodes[r];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,t);this.findAtPoint(e,o)}findPlace(e,t,i){let r,o;for(let s=this.open,l=0;s>=0;s--){let a=this.nodes[s],u=a.findWrapping(e);if(u&&(!r||r.length>u.length+l)&&(r=u,o=a,!u.length))break;if(a.solid){if(i)break;l+=2}}if(!r)return null;this.sync(o);for(let s=0;s<r.length;s++)t=this.enterInner(r[s],null,t,!1);return t}insertNode(e,t,i){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let r=this.findPlace(e,t,i);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=Pt.none;for(let l of r.concat(e.marks))(o.type?o.type.allowsMarkType(l.type):q6(l.type,e.type))&&(s=l.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,t,i,r){let o=this.findPlace(e.create(t),i,!1);return o&&(o=this.enterInner(e,t,i,!0,r)),o}enterInner(e,t,i,r=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=z6(e,o,s.options);s.options&Mc&&s.content.length==0&&(l|=Mc);let a=Pt.none;return i=i.filter(u=>(s.type?s.type.allowsMarkType(u.type):q6(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new Lh(e,t,a,r,null,l)),this.open++,i}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=of)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let i=this.nodes[t].content;for(let r=i.length-1;r>=0;r--)e+=i[r].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,i){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),o=-(i?i.depth+1:0)+(r?0:1),s=(l,a)=>{for(;l>=0;l--){let u=t[l];if(u==""){if(l==t.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&r?this.nodes[a].type:i&&a>=o?i.node(a-o).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;a--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let i=this.parser.schema.nodes[t];if(i.isTextblock&&i.defaultAttrs)return i}}}function l$(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&cA.hasOwnProperty(i)&&t?(t.appendChild(e),e=t):i=="li"?t=e:i&&(t=null)}}function a$(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function H6(n){let e={};for(let t in n)e[t]=n[t];return e}function q6(n,e){let t=e.schema.nodes;for(let i in t){let r=t[i];if(!r.allowsMarkType(n))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(r.contentMatch))return!0}}class ua{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},i){i||(i=xm(t).createDocumentFragment());let r=i,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let u=s.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)r=o.pop()[1];for(;a<s.marks.length;){let u=s.marks[a++],c=this.serializeMark(u,s.isInline,t);c&&(o.push([u,r]),r.appendChild(c.dom),r=c.contentDOM||c.dom)}}r.appendChild(this.serializeNodeInner(s,t))}),i}serializeNodeInner(e,t){let{dom:i,contentDOM:r}=ad(xm(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return i}serializeNode(e,t={}){let i=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(i),i=o.dom)}return i}serializeMark(e,t,i={}){let r=this.marks[e.type.name];return r&&ad(xm(i),r(e,t),null,e.attrs)}static renderSpec(e,t,i=null,r){return ad(e,t,i,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ua(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=W6(e.nodes);return t.text||(t.text=i=>i.text),t}static marksFromSchema(e){return W6(e.marks)}}function W6(n){let e={};for(let t in n){let i=n[t].spec.toDOM;i&&(e[t]=i)}return e}function xm(n){return n.document||window.document}const U6=new WeakMap;function u$(n){let e=U6.get(n);return e===void 0&&U6.set(n,e=c$(n)),e}function c$(n){let e=null;function t(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let r=0;r<i.length;r++)t(i[r]);else for(let r in i)t(i[r])}return t(n),e}function ad(n,e,t,i){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],o;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(o=u$(i))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=r.indexOf(" ");s>0&&(t=r.slice(0,s),r=r.slice(s+1));let l,a=t?n.createElementNS(t,r):n.createElement(r),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let f in u)if(u[f]!=null){let h=f.indexOf(" ");h>0?a.setAttributeNS(f.slice(0,h),f.slice(h+1),u[f]):a.setAttribute(f,u[f])}}for(let f=c;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:p}=ad(n,h,t,i);if(a.appendChild(d),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}const fA=65535,hA=Math.pow(2,16);function f$(n,e){return n+e*hA}function J6(n){return n&fA}function h$(n){return(n-(n&fA))/hA}const dA=1,pA=2,ud=4,mA=8;class Ng{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&mA)>0}get deletedBefore(){return(this.delInfo&(dA|ud))>0}get deletedAfter(){return(this.delInfo&(pA|ud))>0}get deletedAcross(){return(this.delInfo&ud)>0}}class Ui{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Ui.empty)return Ui.empty}recover(e){let t=0,i=J6(e);if(!this.inverted)for(let r=0;r<i;r++)t+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+t+h$(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let r=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let h=u?e==a?-1:e==f?1:t:t,d=a+r+(h<0?0:c);if(i)return d;let p=e==(t<0?a:f)?null:f$(l/3,e-a),m=e==a?pA:e==f?dA:ud;return(t<0?e!=a:e!=f)&&(m|=mA),new Ng(d,m,p)}r+=c-u}return i?e+r:new Ng(e+r,0,null)}touches(e,t){let i=0,r=J6(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==r*3)return!0;i+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let s=this.ranges[r],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[r+t],c=this.ranges[r+i];e(l,l+u,a,a+c),o+=c-u}}invert(){return new Ui(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ui.empty:new Ui(e<0?[0,-e,0]:[0,0,e])}}Ui.empty=new Ui([]);class sf{constructor(e,t,i=0,r=e?e.length:0){this.mirror=t,this.from=i,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new sf(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,i=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],r!=null&&r<t?i+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),r!=null&&r>t?i-r-1:void 0)}}invert(){let e=new sf;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this._maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let r=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}r|=l.delInfo,e=l.pos}return i?e:new Ng(e,r,null)}}const Mm=Object.create(null);class mi{getMap(){return Ui.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Mm[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Mm)throw new RangeError("Duplicate use of step JSON ID "+e);return Mm[e]=t,t.prototype.jsonID=e,t}}class Sn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Sn(e,null)}static fail(e){return new Sn(null,e)}static fromReplace(e,t,i,r){try{return Sn.ok(e.replace(t,i,r))}catch(o){if(o instanceof sp)return Sn.fail(o.message);throw o}}}function Pb(n,e,t){let i=[];for(let r=0;r<n.childCount;r++){let o=n.child(r);o.content.size&&(o=o.copy(Pb(o.content,e,o))),o.isInline&&(o=e(o,t,r)),i.push(o)}return ye.fromArray(i)}class Ns extends mi{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),o=new Re(Pb(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),r),t.openStart,t.openEnd);return Sn.fromReplace(e,this.from,this.to,o)}invert(){return new uo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new Ns(t.pos,i.pos,this.mark)}merge(e){return e instanceof Ns&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ns(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ns(t.from,t.to,e.markFromJSON(t.mark))}}mi.jsonID("addMark",Ns);class uo extends mi{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new Re(Pb(t.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),t.openStart,t.openEnd);return Sn.fromReplace(e,this.from,this.to,i)}invert(){return new Ns(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new uo(t.pos,i.pos,this.mark)}merge(e){return e instanceof uo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new uo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new uo(t.from,t.to,e.markFromJSON(t.mark))}}mi.jsonID("removeMark",uo);class Is extends mi{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Sn.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Sn.fromReplace(e,this.pos,this.pos+1,new Re(ye.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(i))return new Is(this.pos,t.marks[r]);return new Is(this.pos,this.mark)}}return new ea(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Is(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Is(t.pos,e.markFromJSON(t.mark))}}mi.jsonID("addNodeMark",Is);class ea extends mi{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Sn.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Sn.fromReplace(e,this.pos,this.pos+1,new Re(ye.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Is(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ea(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ea(t.pos,e.markFromJSON(t.mark))}}mi.jsonID("removeNodeMark",ea);class Ln extends mi{constructor(e,t,i,r=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=r}apply(e){return this.structure&&Ig(e,this.from,this.to)?Sn.fail("Structure replace would overwrite content"):Sn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ui([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ln(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new Ln(t.pos,Math.max(t.pos,i.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ln)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Re.empty:new Re(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ln(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Re.empty:new Re(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ln(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ln(t.from,t.to,Re.fromJSON(e,t.slice),!!t.structure)}}mi.jsonID("replace",Ln);class jn extends mi{constructor(e,t,i,r,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=r,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Ig(e,this.from,this.gapFrom)||Ig(e,this.gapTo,this.to)))return Sn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Sn.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?Sn.fromReplace(e,this.from,this.to,i):Sn.fail("Content does not fit in gap")}getMap(){return new Ui([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new jn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||r<t.pos||o>i.pos?null:new jn(t.pos,i.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new jn(t.from,t.to,t.gapFrom,t.gapTo,Re.fromJSON(e,t.slice),t.insert,!!t.structure)}}mi.jsonID("replaceAround",jn);function Ig(n,e,t){let i=n.resolve(e),r=t-e,o=i.depth;for(;r>0&&o>0&&i.indexAfter(o)==i.node(o).childCount;)o--,r--;if(r>0){let s=i.node(o).maybeChild(i.indexAfter(o));for(;r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}}return!1}function d$(n,e,t,i){let r=[],o=[],s,l;n.doc.nodesBetween(e,t,(a,u,c)=>{if(!a.isInline)return;let f=a.marks;if(!i.isInSet(f)&&c.type.allowsMarkType(i.type)){let h=Math.max(u,e),d=Math.min(u+a.nodeSize,t),p=i.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(s&&s.to==h&&s.mark.eq(f[m])?s.to=d:r.push(s=new uo(h,d,f[m])));l&&l.to==h?l.to=d:o.push(l=new Ns(h,d,i))}}),r.forEach(a=>n.step(a)),o.forEach(a=>n.step(a))}function p$(n,e,t,i){let r=[],o=0;n.doc.nodesBetween(e,t,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(i instanceof p0){let u=s.marks,c;for(;c=i.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else i?i.isInSet(s.marks)&&(a=[i]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,t);for(let c=0;c<a.length;c++){let f=a[c],h;for(let d=0;d<r.length;d++){let p=r[d];p.step==o-1&&f.eq(r[d].style)&&(h=p)}h?(h.to=u,h.step=o):r.push({style:f,from:Math.max(l,e),to:u,step:o})}}}),r.forEach(s=>n.step(new uo(s.from,s.to,s.style)))}function Rb(n,e,t,i=t.contentMatch,r=!0){let o=n.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let u=o.child(a),c=l+u.nodeSize,f=i.matchType(u.type);if(!f)s.push(new Ln(l,c,Re.empty));else{i=f;for(let h=0;h<u.marks.length;h++)t.allowsMarkType(u.marks[h].type)||n.step(new uo(l,c,u.marks[h]));if(r&&u.isText&&t.whitespace!="pre"){let h,d=/\r?\n|\r/g,p;for(;h=d.exec(u.text);)p||(p=new Re(ye.from(t.schema.text(" ",t.allowedMarks(u.marks))),0,0)),s.push(new Ln(l+h.index,l+h.index+h[0].length,p))}}l=c}if(!i.validEnd){let a=i.fillBefore(ye.empty,!0);n.replace(l,l,new Re(a,0,0))}for(let a=s.length-1;a>=0;a--)n.step(s[a])}function m$(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Fu(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let r=n.$from.node(i),o=n.$from.index(i),s=n.$to.indexAfter(i);if(i<n.depth&&r.canReplace(o,s,t))return i;if(i==0||r.type.spec.isolating||!m$(r,o,s))break}return null}function g$(n,e,t){let{$from:i,$to:r,depth:o}=e,s=i.before(o+1),l=r.after(o+1),a=s,u=l,c=ye.empty,f=0;for(let p=o,m=!1;p>t;p--)m||i.index(p)>0?(m=!0,c=ye.from(i.node(p).copy(c)),f++):a--;let h=ye.empty,d=0;for(let p=o,m=!1;p>t;p--)m||r.after(p+1)<r.end(p)?(m=!0,h=ye.from(r.node(p).copy(h)),d++):u++;n.step(new jn(a,u,s,l,new Re(c.append(h),f,d),c.size-f,!0))}function Nb(n,e,t=null,i=n){let r=b$(n,e),o=r&&y$(i,e);return o?r.map(K6).concat({type:e,attrs:t}).concat(o.map(K6)):null}function K6(n){return{type:n,attrs:null}}function b$(n,e){let{parent:t,startIndex:i,endIndex:r}=n,o=t.contentMatchAt(i).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return t.canReplaceWith(i,r,s)?o:null}function y$(n,e){let{parent:t,startIndex:i,endIndex:r}=n,o=t.child(i),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let u=i;a&&u<r;u++)a=a.matchType(t.child(u).type);return!a||!a.validEnd?null:s}function k$(n,e,t){let i=ye.empty;for(let s=t.length-1;s>=0;s--){if(i.size){let l=t[s].type.contentMatch.matchFragment(i);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=ye.from(t[s].type.create(t[s].attrs,i))}let r=e.start,o=e.end;n.step(new jn(r,o,r,o,new Re(i,0,0),t.length,!0))}function w$(n,e,t,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(s,l)=>{let a=typeof r=="function"?r(s):r;if(s.isTextblock&&!s.hasMarkup(i,a)&&C$(n.doc,n.mapping.slice(o).map(l),i)){let u=null;if(i.schema.linebreakReplacement){let d=i.whitespace=="pre",p=!!i.contentMatch.matchType(i.schema.linebreakReplacement);d&&!p?u=!1:!d&&p&&(u=!0)}u===!1&&bA(n,s,l,o),Rb(n,n.mapping.slice(o).map(l,1),i,void 0,u===null);let c=n.mapping.slice(o),f=c.map(l,1),h=c.map(l+s.nodeSize,1);return n.step(new jn(f,h,f+1,h-1,new Re(ye.from(i.create(a,null,s.marks)),0,0),1,!0)),u===!0&&gA(n,s,l,o),!1}})}function gA(n,e,t,i){e.forEach((r,o)=>{if(r.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(r.text);){let a=n.mapping.slice(i).map(t+1+o+s.index);n.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function bA(n,e,t,i){e.forEach((r,o)=>{if(r.type==r.type.schema.linebreakReplacement){let s=n.mapping.slice(i).map(t+1+o);n.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function C$(n,e,t){let i=n.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,t)}function _$(n,e,t,i,r){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let s=t.create(i,null,r||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new jn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Re(ye.from(s),0,0),1,!0))}function Xa(n,e,t=1,i){let r=n.resolve(e),o=r.depth-t,s=i&&i[i.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let u=r.depth-1,c=t-2;u>o;u--,c--){let f=r.node(u),h=r.index(u);if(f.type.spec.isolating)return!1;let d=f.content.cutByIndex(h,f.childCount),p=i&&i[c+1];p&&(d=d.replaceChild(0,p.type.create(p.attrs)));let m=i&&i[c]||f;if(!f.canReplace(h+1,f.childCount)||!m.type.validContent(d))return!1}let l=r.indexAfter(o),a=i&&i[0];return r.node(o).canReplaceWith(l,l,a?a.type:r.node(o+1).type)}function S$(n,e,t=1,i){let r=n.doc.resolve(e),o=ye.empty,s=ye.empty;for(let l=r.depth,a=r.depth-t,u=t-1;l>a;l--,u--){o=ye.from(r.node(l).copy(o));let c=i&&i[u];s=ye.from(c?c.type.create(c.attrs,s):r.node(l).copy(s))}n.step(new Ln(e,e,new Re(o.append(s),t,t),!0))}function cl(n,e){let t=n.resolve(e),i=t.index();return yA(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function v$(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:i}=n.type.schema;for(let r=0;r<e.childCount;r++){let o=e.child(r),s=o.type==i?n.type.schema.nodes.text:o.type;if(t=t.matchType(s),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function yA(n,e){return!!(n&&e&&!n.isLeaf&&v$(n,e))}function m0(n,e,t=-1){let i=n.resolve(e);for(let r=i.depth;;r--){let o,s,l=i.index(r);if(r==i.depth?(o=i.nodeBefore,s=i.nodeAfter):t>0?(o=i.node(r+1),l++,s=i.node(r).maybeChild(l)):(o=i.node(r).maybeChild(l-1),s=i.node(r+1)),o&&!o.isTextblock&&yA(o,s)&&i.node(r).canReplace(l,l+1))return e;if(r==0)break;e=t<0?i.before(r):i.after(r)}}function x$(n,e,t){let i=null,{linebreakReplacement:r}=n.doc.type.schema,o=n.doc.resolve(e-t),s=o.node().type;if(r&&s.inlineContent){let c=s.whitespace=="pre",f=!!s.contentMatch.matchType(r);c&&!f?i=!1:!c&&f&&(i=!0)}let l=n.steps.length;if(i===!1){let c=n.doc.resolve(e+t);bA(n,c.node(),c.before(),l)}s.inlineContent&&Rb(n,e+t-1,s,o.node().contentMatchAt(o.index()),i==null);let a=n.mapping.slice(l),u=a.map(e-t);if(n.step(new Ln(u,a.map(e+t,-1),Re.empty,!0)),i===!0){let c=n.doc.resolve(u);gA(n,c.node(),c.before(),n.steps.length)}return n}function M$(n,e,t){let i=n.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let o=i.index(r);if(i.node(r).canReplaceWith(o,o,t))return i.before(r+1);if(o>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let o=i.indexAfter(r);if(i.node(r).canReplaceWith(o,o,t))return i.after(r+1);if(o<i.node(r).childCount)return null}return null}function kA(n,e,t){let i=n.resolve(e);if(!t.content.size)return e;let r=t.content;for(let o=0;o<t.openStart;o++)r=r.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let s=i.depth;s>=0;s--){let l=s==i.depth?0:i.pos<=(i.start(s+1)+i.end(s+1))/2?-1:1,a=i.index(s)+(l>0?1:0),u=i.node(s),c=!1;if(o==1)c=u.canReplace(a,a,r);else{let f=u.contentMatchAt(a).findWrapping(r.firstChild.type);c=f&&u.canReplaceWith(a,a,f[0])}if(c)return l==0?i.pos:l<0?i.before(s+1):i.after(s+1)}return null}function g0(n,e,t=e,i=Re.empty){if(e==t&&!i.size)return null;let r=n.resolve(e),o=n.resolve(t);return wA(r,o,i)?new Ln(e,t,i):new A$(r,o,i).fit()}function wA(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class A${constructor(e,t,i){this.$from=e,this.$to=t,this.unplaced=i,this.frontier=[],this.placed=ye.empty;for(let r=0;r<=e.depth;r++){let o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=ye.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(e<0?this.$to:i.doc.resolve(e));if(!r)return null;let o=this.placed,s=i.depth,l=r.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new Re(o,s,l);return e>-1?new jn(i.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||i.pos!=this.$to.pos?new Ln(i.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<e;i++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=i){e=i;break}t=o.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let r,o=null;i?(o=Am(this.unplaced.content,i-1).firstChild,r=o.content):r=this.unplaced.content;let s=r.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,f=null;if(t==1&&(s?u.matchType(s.type)||(f=u.fillBefore(ye.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:i,frontierDepth:l,parent:o,inject:f};if(t==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:i,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,r=Am(e,t);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new Re(e,t+1,Math.max(i,r.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,r=Am(e,t);if(r.childCount<=1&&t>0){let o=e.size-t<=t+r.size;this.unplaced=new Re(dc(e,t-1,1),t-1,o?t-1:i)}else this.unplaced=new Re(dc(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:r,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,l=i?i.content:s.content,a=s.openStart-e,u=0,c=[],{match:f,type:h}=this.frontier[t];if(r){for(let m=0;m<r.childCount;m++)c.push(r.child(m));f=f.matchFragment(r)}let d=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let m=l.child(u),g=f.matchType(m.type);if(!g)break;u++,(u>1||a==0||m.content.size)&&(f=g,c.push(CA(m.mark(h.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?d:-1)))}let p=u==l.childCount;p||(d=-1),this.placed=pc(this.placed,t,ye.from(c)),this.frontier[t].match=f,p&&d<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=l;m<d;m++){let b=g.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),g=b.content}this.unplaced=p?e==0?Re.empty:new Re(dc(s.content,e-1,1),e-1,d<0?s.openEnd:e-1):new Re(dc(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Em(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Em(e,t,r,i,o);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=Em(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=pc(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let r=e.node(i),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(i));this.openFrontierNode(r.type,r.attrs,o)}return e}openFrontierNode(e,t=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=pc(this.placed,this.depth,ye.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ye.empty,!0);t.childCount&&(this.placed=pc(this.placed,this.frontier.length,t))}}function dc(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(dc(n.firstChild.content,e-1,t)))}function pc(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(pc(n.lastChild.content,e-1,t)))}function Am(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function CA(n,e,t){if(e<=0)return n;let i=n.content;return e>1&&(i=i.replaceChild(0,CA(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=n.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(ye.empty,!0)))),n.copy(i)}function Em(n,e,t,i,r){let o=n.node(e),s=r?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let l=i.fillBefore(o.content,!0,s);return l&&!E$(t,o.content,s)?l:null}function E$(n,e,t){for(let i=t;i<e.childCount;i++)if(!n.allowsMarks(e.child(i).marks))return!0;return!1}function O$(n){return n.spec.defining||n.spec.definingForContent}function T$(n,e,t,i){if(!i.size)return n.deleteRange(e,t);let r=n.doc.resolve(e),o=n.doc.resolve(t);if(wA(r,o,i))return n.step(new Ln(e,t,i));let s=SA(r,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let l=-(r.depth+1);s.unshift(l);for(let h=r.depth,d=r.pos-1;h>0;h--,d--){let p=r.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(h)>-1?l=h:r.before(h)==d&&s.splice(1,0,-h)}let a=s.indexOf(l),u=[],c=i.openStart;for(let h=i.content,d=0;;d++){let p=h.firstChild;if(u.push(p),d==i.openStart)break;h=p.content}for(let h=c-1;h>=0;h--){let d=u[h],p=O$(d.type);if(p&&!d.sameMarkup(r.node(Math.abs(l)-1)))c=h;else if(p||!d.type.isTextblock)break}for(let h=i.openStart;h>=0;h--){let d=(h+c+1)%(i.openStart+1),p=u[d];if(p)for(let m=0;m<s.length;m++){let g=s[(m+a)%s.length],b=!0;g<0&&(b=!1,g=-g);let y=r.node(g-1),_=r.index(g-1);if(y.canReplaceWith(_,_,p.type,p.marks))return n.replace(r.before(g),b?o.after(g):t,new Re(_A(i.content,0,i.openStart,d),d,i.openEnd))}}let f=n.steps.length;for(let h=s.length-1;h>=0&&(n.replace(e,t,i),!(n.steps.length>f));h--){let d=s[h];d<0||(e=r.before(d),t=o.after(d))}}function _A(n,e,t,i,r){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(_A(o.content,e+1,t,i,o)))}if(e>i){let o=r.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(ye.empty,!0))}return n}function D$(n,e,t,i){if(!i.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let r=M$(n.doc,e,i.type);r!=null&&(e=t=r)}n.replaceRange(e,t,new Re(ye.from(i),0,0))}function P$(n,e,t){let i=n.doc.resolve(e),r=n.doc.resolve(t),o=SA(i,r);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||i.node(l).type.contentMatch.validEnd)return n.delete(i.start(l),r.end(l));if(l>0&&(a||i.node(l-1).canReplace(i.index(l-1),r.indexAfter(l-1))))return n.delete(i.before(l),r.after(l))}for(let s=1;s<=i.depth&&s<=r.depth;s++)if(e-i.start(s)==i.depth-s&&t>i.end(s)&&r.end(s)-t!=r.depth-s&&i.start(s-1)==r.start(s-1)&&i.node(s-1).canReplace(i.index(s-1),r.index(s-1)))return n.delete(i.before(s),t);n.delete(e,t)}function SA(n,e){let t=[],i=Math.min(n.depth,e.depth);for(let r=i;r>=0;r--){let o=n.start(r);if(o<n.pos-(n.depth-r)||e.end(r)>e.pos+(e.depth-r)||n.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(o==e.start(r)||r==n.depth&&r==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==o-1)&&t.push(r)}return t}class Ya extends mi{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return Sn.fail("No node at attribute step's position");let i=Object.create(null);for(let o in t.attrs)i[o]=t.attrs[o];i[this.attr]=this.value;let r=t.type.create(i,null,t.marks);return Sn.fromReplace(e,this.pos,this.pos+1,new Re(ye.from(r),0,t.isLeaf?0:1))}getMap(){return Ui.empty}invert(e){return new Ya(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ya(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ya(t.pos,t.attr,t.value)}}mi.jsonID("attr",Ya);class lf extends mi{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let i=e.type.create(t,e.content,e.marks);return Sn.ok(i)}getMap(){return Ui.empty}invert(e){return new lf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new lf(t.attr,t.value)}}mi.jsonID("docAttr",lf);let wu=class extends Error{};wu=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};wu.prototype=Object.create(Error.prototype);wu.prototype.constructor=wu;wu.prototype.name="TransformError";class vA{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new sf}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new wu(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=Re.empty){let r=g0(this.doc,e,t,i);return r&&this.step(r),this}replaceWith(e,t,i){return this.replace(e,t,new Re(ye.from(i),0,0))}delete(e,t){return this.replace(e,t,Re.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return T$(this,e,t,i),this}replaceRangeWith(e,t,i){return D$(this,e,t,i),this}deleteRange(e,t){return P$(this,e,t),this}lift(e,t){return g$(this,e,t),this}join(e,t=1){return x$(this,e,t),this}wrap(e,t){return k$(this,e,t),this}setBlockType(e,t=e,i,r=null){return w$(this,e,t,i,r),this}setNodeMarkup(e,t,i=null,r){return _$(this,e,t,i,r),this}setNodeAttribute(e,t,i){return this.step(new Ya(e,t,i)),this}setDocAttribute(e,t){return this.step(new lf(e,t)),this}addNodeMark(e,t){return this.step(new Is(e,t)),this}removeNodeMark(e,t){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t instanceof Pt)t.isInSet(i.marks)&&this.step(new ea(e,t));else{let r=i.marks,o,s=[];for(;o=t.isInSet(r);)s.push(new ea(e,o)),r=o.removeFromSet(r);for(let l=s.length-1;l>=0;l--)this.step(s[l])}return this}split(e,t=1,i){return S$(this,e,t,i),this}addMark(e,t,i){return d$(this,e,t,i),this}removeMark(e,t,i){return p$(this,e,t,i),this}clearIncompatible(e,t,i){return Rb(this,e,t,i),this}}const Om=Object.create(null);class lt{constructor(e,t,i){this.$anchor=e,this.$head=t,this.ranges=i||[new R$(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Re.empty){let i=t.content.lastChild,r=null;for(let l=0;l<t.openEnd;l++)r=i,i=i.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:u}=s[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?Re.empty:t),l==0&&X6(e,o,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:s,$to:l}=r[o],a=e.mapping.slice(i),u=a.map(s.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,t),X6(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let r=e.parent.inlineContent?new nt(e):Ma(e.node(0),e.parent,e.pos,e.index(),t,i);if(r)return r;for(let o=e.depth-1;o>=0;o--){let s=t<0?Ma(e.node(0),e.node(o),e.before(o+1),e.index(o),t,i):Ma(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,i);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new mr(e.node(0))}static atStart(e){return Ma(e,e,0,0,1)||new mr(e)}static atEnd(e){return Ma(e,e,e.content.size,e.childCount,-1)||new mr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Om[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Om)throw new RangeError("Duplicate use of selection JSON ID "+e);return Om[e]=t,t.prototype.jsonID=e,t}getBookmark(){return nt.between(this.$anchor,this.$head).getBookmark()}}lt.prototype.visible=!0;class R${constructor(e,t){this.$from=e,this.$to=t}}let G6=!1;function Q6(n){!G6&&!n.parent.inlineContent&&(G6=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class nt extends lt{constructor(e,t=e){Q6(e),Q6(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return lt.near(i);let r=e.resolve(t.map(this.anchor));return new nt(r.parent.inlineContent?r:i,i)}replace(e,t=Re.empty){if(super.replace(e,t),t==Re.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof nt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new b0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new nt(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let r=e.resolve(t);return new this(r,i==t?r:e.resolve(i))}static between(e,t,i){let r=e.pos-t.pos;if((!i||r)&&(i=r>=0?1:-1),!t.parent.inlineContent){let o=lt.findFrom(t,i,!0)||lt.findFrom(t,-i,!0);if(o)t=o.$head;else return lt.near(t,i)}return e.parent.inlineContent||(r==0?e=t:(e=(lt.findFrom(e,-i,!0)||lt.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=r<0&&(e=t))),new nt(e,t)}}lt.jsonID("text",nt);class b0{constructor(e,t){this.anchor=e,this.head=t}map(e){return new b0(e.map(this.anchor),e.map(this.head))}resolve(e){return nt.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ye extends lt{constructor(e){let t=e.nodeAfter,i=e.node(0).resolve(e.pos+t.nodeSize);super(e,i),this.node=t}map(e,t){let{deleted:i,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return i?lt.near(o):new Ye(o)}content(){return new Re(ye.from(this.node),0,0)}eq(e){return e instanceof Ye&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ib(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ye(e.resolve(t.anchor))}static create(e,t){return new Ye(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ye.prototype.visible=!1;lt.jsonID("node",Ye);class Ib{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:i}=e.mapResult(this.anchor);return t?new b0(i,i):new Ib(i)}resolve(e){let t=e.resolve(this.anchor),i=t.nodeAfter;return i&&Ye.isSelectable(i)?new Ye(t):lt.near(t)}}class mr extends lt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Re.empty){if(t==Re.empty){e.delete(0,e.doc.content.size);let i=lt.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new mr(e)}map(e){return new mr(e)}eq(e){return e instanceof mr}getBookmark(){return N$}}lt.jsonID("all",mr);const N$={map(){return this},resolve(n){return new mr(n)}};function Ma(n,e,t,i,r,o=!1){if(e.inlineContent)return nt.create(n,t);for(let s=i-(r>0?0:1);r>0?s<e.childCount:s>=0;s+=r){let l=e.child(s);if(l.isAtom){if(!o&&Ye.isSelectable(l))return Ye.create(n,t-(r<0?l.nodeSize:0))}else{let a=Ma(n,l,t+r,r<0?l.childCount:0,r,o);if(a)return a}t+=l.nodeSize*r}return null}function X6(n,e,t){let i=n.steps.length-1;if(i<e)return;let r=n.steps[i];if(!(r instanceof Ln||r instanceof jn))return;let o=n.mapping.maps[i],s;o.forEach((l,a,u,c)=>{s==null&&(s=c)}),n.setSelection(lt.near(n.doc.resolve(s),t))}const Y6=1,Fh=2,Z6=4;class I$ extends vA{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Y6)&~Fh,this.storedMarks=null,this}get selectionSet(){return(this.updated&Y6)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Fh,this}ensureMarks(e){return Pt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Fh)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Fh,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let i=this.selection;return t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Pt.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,i){let r=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(i==null&&(i=t),i=i??t,!e)return this.deleteRange(t,i);let o=this.storedMarks;if(!o){let s=this.doc.resolve(t);o=i==t?s.marks():s.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,r.text(e,o)),this.selection.empty||this.setSelection(lt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Z6,this}get scrolledIntoView(){return(this.updated&Z6)>0}}function $6(n,e){return!e||!n?n:n.bind(e)}class mc{constructor(e,t,i){this.name=e,this.init=$6(t.init,i),this.apply=$6(t.apply,i)}}const B$=[new mc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new mc("selection",{init(n,e){return n.selection||lt.atStart(e.doc)},apply(n){return n.selection}}),new mc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,i){return i.selection.$cursor?n.storedMarks:null}}),new mc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Tm{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=B$.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new mc(i.key,i.spec.state,i))})}}class Ba{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),r=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=r?r[s].n:0,u=r?r[s].state:this,c=a<t.length&&l.spec.appendTransaction.call(l,a?t.slice(a):t,u,i);if(c&&i.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let f=0;f<this.config.plugins.length;f++)r.push(f<s?{state:i,n:t.length}:{state:this,n:0})}t.push(c),i=i.applyInner(c),o=!0}r&&(r[s]={state:i,n:t.length})}}if(!o)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ba(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let o=i[r];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new I$(this)}static create(e){let t=new Tm(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new Ba(t);for(let r=0;r<t.fields.length;r++)i[t.fields[r].name]=t.fields[r].init(e,i);return i}reconfigure(e){let t=new Tm(this.schema,e.plugins),i=t.fields,r=new Ba(t);for(let o=0;o<i.length;o++){let s=i[o].name;r[s]=this.hasOwnProperty(s)?this[s]:i[o].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[i],o=r.spec.state;o&&o.toJSON&&(t[i]=o.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Tm(e.schema,e.plugins),o=new Ba(r);return r.fields.forEach(s=>{if(s.name=="doc")o.doc=Hs.fromJSON(e.schema,t.doc);else if(s.name=="selection")o.selection=lt.fromJSON(o.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let l in i){let a=i[l],u=a.spec.state;if(a.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){o[s.name]=u.fromJSON.call(a,e,t[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function xA(n,e,t){for(let i in n){let r=n[i];r instanceof Function?r=r.bind(e):i=="handleDOMEvents"&&(r=xA(r,e,{})),t[i]=r}return t}class xi{constructor(e){this.spec=e,this.props={},e.props&&xA(e.props,this,this.props),this.key=e.key?e.key.key:MA("plugin")}getState(e){return e[this.key]}}const Dm=Object.create(null);function MA(n){return n in Dm?n+"$"+ ++Dm[n]:(Dm[n]=0,n+"$")}class Gr{constructor(e="key"){this.key=MA(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Yn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Cu=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Bg=null;const Vo=function(n,e,t){let i=Bg||(Bg=document.createRange());return i.setEnd(n,t??n.nodeValue.length),i.setStart(n,e||0),i},L$=function(){Bg=null},ta=function(n,e,t,i){return t&&(e4(n,e,t,i,-1)||e4(n,e,t,i,1))},F$=/^(img|br|input|textarea|hr)$/i;function e4(n,e,t,i,r){for(var o;;){if(n==t&&e==i)return!0;if(e==(r<0?0:sr(n))){let s=n.parentNode;if(!s||s.nodeType!=1||Lf(n)||F$.test(n.nodeName)||n.contentEditable=="false")return!1;e=Yn(n)+(r<0?0:1),n=s}else if(n.nodeType==1){let s=n.childNodes[e+(r<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=r;else return!1;else n=s,e=r<0?sr(n):0}else return!1}}function sr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function j$(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=sr(n)}else if(n.parentNode&&!Lf(n))e=Yn(n),n=n.parentNode;else return null}}function z$(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Lf(n))e=Yn(n)+1,n=n.parentNode;else return null}}function V$(n,e,t){for(let i=e==0,r=e==sr(n);i||r;){if(n==t)return!0;let o=Yn(n);if(n=n.parentNode,!n)return!1;i=i&&o==0,r=r&&o==sr(n)}}function Lf(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const y0=function(n){return n.focusNode&&ta(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function xl(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function H$(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function q$(n,e,t){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(e,t);if(i)return{node:i.offsetNode,offset:Math.min(sr(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(e,t);if(i)return{node:i.startContainer,offset:Math.min(sr(i.startContainer),i.startOffset)}}}const vo=typeof navigator<"u"?navigator:null,t4=typeof document<"u"?document:null,fl=vo&&vo.userAgent||"",Lg=/Edge\/(\d+)/.exec(fl),AA=/MSIE \d/.exec(fl),Fg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fl),Pi=!!(AA||Fg||Lg),qs=AA?document.documentMode:Fg?+Fg[1]:Lg?+Lg[1]:0,Wr=!Pi&&/gecko\/(\d+)/i.test(fl);Wr&&+(/Firefox\/(\d+)/.exec(fl)||[0,0])[1];const jg=!Pi&&/Chrome\/(\d+)/.exec(fl),ai=!!jg,EA=jg?+jg[1]:0,Ci=!Pi&&!!vo&&/Apple Computer/.test(vo.vendor),_u=Ci&&(/Mobile\/\w+/.test(fl)||!!vo&&vo.maxTouchPoints>2),nr=_u||(vo?/Mac/.test(vo.platform):!1),W$=vo?/Win/.test(vo.platform):!1,Jo=/Android \d/.test(fl),Ff=!!t4&&"webkitFontSmoothing"in t4.documentElement.style,U$=Ff?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function J$(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function zo(n,e){return typeof n=="number"?n:n[e]}function K$(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,i=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*i}}function n4(n,e,t){let i=n.someProp("scrollThreshold")||0,r=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let s=t||n.dom;s;){if(s.nodeType!=1){s=Cu(s);continue}let l=s,a=l==o.body,u=a?J$(o):K$(l),c=0,f=0;if(e.top<u.top+zo(i,"top")?f=-(u.top-e.top+zo(r,"top")):e.bottom>u.bottom-zo(i,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+zo(r,"top")-u.top:e.bottom-u.bottom+zo(r,"bottom")),e.left<u.left+zo(i,"left")?c=-(u.left-e.left+zo(r,"left")):e.right>u.right-zo(i,"right")&&(c=e.right-u.right+zo(r,"right")),c||f)if(a)o.defaultView.scrollBy(c,f);else{let d=l.scrollLeft,p=l.scrollTop;f&&(l.scrollTop+=f),c&&(l.scrollLeft+=c);let m=l.scrollLeft-d,g=l.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let h=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(h))break;s=h=="absolute"?s.offsetParent:Cu(s)}}function G$(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),i,r;for(let o=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=n.root.elementFromPoint(o,s);if(!l||l==n.dom||!n.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=t-20){i=l,r=a.top;break}}return{refDOM:i,refTop:r,stack:OA(n.dom)}}function OA(n){let e=[],t=n.ownerDocument;for(let i=n;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=t);i=Cu(i));return e}function Q$({refDOM:n,refTop:e,stack:t}){let i=n?n.getBoundingClientRect().top:0;TA(t,i==0?0:i-e)}function TA(n,e){for(let t=0;t<n.length;t++){let{dom:i,top:r,left:o}=n[t];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=o&&(i.scrollLeft=o)}}let ba=null;function X$(n){if(n.setActive)return n.setActive();if(ba)return n.focus(ba);let e=OA(n);n.focus(ba==null?{get preventScroll(){return ba={preventScroll:!0},!0}}:void 0),ba||(ba=!1,TA(e,0))}function DA(n,e){let t,i=2e8,r,o=0,s=e.top,l=e.top,a,u;for(let c=n.firstChild,f=0;c;c=c.nextSibling,f++){let h;if(c.nodeType==1)h=c.getClientRects();else if(c.nodeType==3)h=Vo(c).getClientRects();else continue;for(let d=0;d<h.length;d++){let p=h[d];if(p.top<=s&&p.bottom>=l){s=Math.max(p.bottom,s),l=Math.min(p.top,l);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<i){t=c,i=m,r=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&m&&(o=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=f+1)}}return!t&&a&&(t=a,r=u,i=0),t&&t.nodeType==3?Y$(t,r):!t||i&&t.nodeType==1?{node:n,offset:o}:DA(t,r)}function Y$(n,e){let t=n.nodeValue.length,i=document.createRange();for(let r=0;r<t;r++){i.setEnd(n,r+1),i.setStart(n,r);let o=ys(i,1);if(o.top!=o.bottom&&Bb(e,o))return{node:n,offset:r+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function Bb(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Z$(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function $$(n,e,t){let{node:i,offset:r}=DA(e,t),o=-1;if(i.nodeType==1&&!i.firstChild){let s=i.getBoundingClientRect();o=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(i,r,o)}function eee(n,e,t,i){let r=-1;for(let o=e,s=!1;o!=n.dom;){let l=n.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>i.left||a.top>i.top?r=l.posBefore:(!s&&a.right<i.left||a.bottom<i.top)&&(r=l.posAfter),s=!0),!l.contentDOM&&r<0&&!l.node.isText))return(l.node.isBlock?i.top<(a.top+a.bottom)/2:i.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return r>-1?r:n.docView.posFromDOM(e,t,-1)}function PA(n,e,t){let i=n.childNodes.length;if(i&&t.top<t.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-t.top)/(t.bottom-t.top))-2)),o=r;;){let s=n.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(Bb(e,u))return PA(s,e,u)}}if((o=(o+1)%i)==r)break}return n}function tee(n,e){let t=n.dom.ownerDocument,i,r=0,o=q$(t,e.left,e.top);o&&({node:i,offset:r}=o);let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),l;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=n.dom.getBoundingClientRect();if(!Bb(e,u)||(s=PA(n.dom,e,u),!s))return null}if(Ci)for(let u=s;i&&u;u=Cu(u))u.draggable&&(i=void 0);if(s=Z$(s,e),i){if(Wr&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let c=i.childNodes[r],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&r++}let u;Ff&&r&&i.nodeType==1&&(u=i.childNodes[r-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&r--,i==n.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?l=n.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(l=eee(n,i,r,e))}l==null&&(l=$$(n,s,e));let a=n.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function i4(n){return n.top<n.bottom||n.left<n.right}function ys(n,e){let t=n.getClientRects();if(t.length){let i=t[e<0?0:t.length-1];if(i4(i))return i}return Array.prototype.find.call(t,i4)||n.getBoundingClientRect()}const nee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function RA(n,e,t){let{node:i,offset:r,atom:o}=n.docView.domFromPos(e,t<0?-1:1),s=Ff||Wr;if(i.nodeType==3)if(s&&(nee.test(i.nodeValue)||(t<0?!r:r==i.nodeValue.length))){let a=ys(Vo(i,r,r),t);if(Wr&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let u=ys(Vo(i,r-1,r-1),-1);if(u.top==a.top){let c=ys(Vo(i,r,r+1),-1);if(c.top!=a.top)return nc(c,c.left<u.left)}}return a}else{let a=r,u=r,c=t<0?1:-1;return t<0&&!r?(u++,c=-1):t>=0&&r==i.nodeValue.length?(a--,c=1):t<0?a--:u++,nc(ys(Vo(i,a,u),c),c<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&r&&(t<0||r==sr(i))){let a=i.childNodes[r-1];if(a.nodeType==1)return Pm(a.getBoundingClientRect(),!1)}if(o==null&&r<sr(i)){let a=i.childNodes[r];if(a.nodeType==1)return Pm(a.getBoundingClientRect(),!0)}return Pm(i.getBoundingClientRect(),t>=0)}if(o==null&&r&&(t<0||r==sr(i))){let a=i.childNodes[r-1],u=a.nodeType==3?Vo(a,sr(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return nc(ys(u,1),!1)}if(o==null&&r<sr(i)){let a=i.childNodes[r];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?Vo(a,0,s?0:1):a.nodeType==1?a:null:null;if(u)return nc(ys(u,-1),!0)}return nc(ys(i.nodeType==3?Vo(i):i,-t),t>=0)}function nc(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Pm(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function NA(n,e,t){let i=n.state,r=n.root.activeElement;i!=e&&n.updateState(e),r!=n.dom&&n.focus();try{return t()}finally{i!=e&&n.updateState(i),r!=n.dom&&r&&r.focus()}}function iee(n,e,t){let i=e.selection,r=t=="up"?i.$from:i.$to;return NA(n,e,()=>{let{node:o}=n.docView.domFromPos(r.pos,t=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=RA(n,r.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Vo(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(t=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const ree=/[\u0590-\u08ac]/;function oee(n,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,o=!r,s=r==i.parent.content.size,l=n.domSelection();return l?!ree.test(i.parent.textContent)||!l.modify?t=="left"||t=="backward"?o:s:NA(n,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:f}=n.domSelectionRange(),h=l.caretBidiLevel;l.modify("move",t,"character");let d=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),g=p&&!d.contains(p.nodeType==1?p:p.parentNode)||a==p&&u==m;try{l.collapse(c,f),a&&(a!=c||u!=f)&&l.extend&&l.extend(a,u)}catch{}return h!=null&&(l.caretBidiLevel=h),g}):i.pos==i.start()||i.pos==i.end()}let r4=null,o4=null,s4=!1;function see(n,e,t){return r4==e&&o4==t?s4:(r4=e,o4=t,s4=t=="up"||t=="down"?iee(n,e,t):oee(n,e,t))}const gr=0,l4=1,Ol=2,xo=3;class jf{constructor(e,t,i,r){this.parent=e,this.children=t,this.dom=i,this.contentDOM=r,this.dirty=gr,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,i=this.posAtStart;;t++){let r=this.children[t];if(r==e)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let o,s;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=t>Yn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!1;break}if(o.previousSibling)break}if(r==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!0;break}if(o.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let i=!0,r=e;r;r=r.parentNode){let o=this.getDesc(r),s;if(o&&(!t||o.node))if(i&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))i=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let i=t;i;i=i.parent)if(i==this)return t}posFromDOM(e,t,i){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,i)}return-1}descAt(e){for(let t=0,i=0;t<this.children.length;t++){let r=this.children[t],o=i+r.size;if(i==e&&o!=i){for(;!r.border&&r.children.length;)for(let s=0;s<r.children.length;s++){let l=r.children[s];if(l.size){r=l;break}}return r}if(e<o)return r.descAt(e-i-r.border);i=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,r=0;for(let o=0;i<this.children.length;i++){let s=this.children[i],l=o+s.size;if(l>e||s instanceof BA){r=e-o;break}o=l}if(r)return this.children[i].domFromPos(r-this.children[i].border,t);for(let o;i&&!(o=this.children[i-1]).size&&o instanceof IA&&o.side>=0;i--);if(t<=0){let o,s=!0;for(;o=i?this.children[i-1]:null,!(!o||o.dom.parentNode==this.contentDOM);i--,s=!1);return o&&t&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Yn(o.dom)+1:0}}else{let o,s=!0;for(;o=i<this.children.length?this.children[i]:null,!(!o||o.dom.parentNode==this.contentDOM);i++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Yn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let s=i,l=0;;l++){let a=this.children[l],u=s+a.size;if(r==-1&&e<=u){let c=s+a.border;if(e>=c&&t<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=s;for(let f=l;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=Yn(h.dom)+1;break}e-=h.size}r==-1&&(r=0)}if(r>-1&&(u>t||l==this.children.length-1)){t=u;for(let c=l+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Yn(f.dom);break}t+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:i}=this.domFromPos(e,0);if(t.nodeType!=1||i==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[i]}setSelection(e,t,i,r=!1){let o=Math.min(e,t),s=Math.max(e,t);for(let d=0,p=0;d<this.children.length;d++){let m=this.children[d],g=p+m.size;if(o>p&&s<g)return m.setSelection(e-p-m.border,t-p-m.border,i,r);p=g}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1),u=i.root.getSelection(),c=i.domSelectionRange(),f=!1;if((Wr||Ci)&&e==t){let{node:d,offset:p}=l;if(d.nodeType==3){if(f=!!(p&&d.nodeValue[p-1]==`
`),f&&p==d.nodeValue.length)for(let m=d,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(l=a={node:g.parentNode,offset:Yn(g)+1});break}let b=m.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let m=d.childNodes[p-1];f=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Wr&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(r=!0)}if(!(r||f&&Ci)&&ta(l.node,l.offset,c.anchorNode,c.anchorOffset)&&ta(a.node,a.offset,c.focusNode,c.focusOffset))return;let h=!1;if((u.extend||e==t)&&!f){u.collapse(l.node,l.offset);try{e!=t&&u.extend(a.node,a.offset),h=!0}catch{}}if(!h){if(e>t){let p=l;l=a,a=p}let d=document.createRange();d.setEnd(a.node,a.offset),d.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let i=0,r=0;r<this.children.length;r++){let o=this.children[r],s=i+o.size;if(i==s?e<=s&&t>=i:e<s&&t>i){let l=i+o.border,a=s-o.border;if(e>=l&&t<=a){this.dirty=e==i||t==s?Ol:l4,e==l&&t==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=xo:o.markDirty(e-l,t-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ol:xo}i=s}this.dirty=Ol}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let i=e==1?Ol:l4;t.dirty<i&&(t.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class IA extends jf{constructor(e,t,i,r){let o,s=t.type.toDOM;if(typeof s=="function"&&(s=s(i,()=>{if(!o)return r;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==gr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class lee extends jf{constructor(e,t,i,r){super(e,[],t,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class na extends jf{constructor(e,t,i,r,o){super(e,[],i,r),this.mark=t,this.spec=o}static create(e,t,i,r){let o=r.nodeViews[t.type.name],s=o&&o(t,r,i);return(!s||!s.dom)&&(s=ua.renderSpec(document,t.type.spec.toDOM(t,i),null,t.attrs)),new na(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&xo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=xo&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=gr){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=gr}}slice(e,t,i){let r=na.create(this.parent,this.mark,!0,i),o=this.children,s=this.size;t<s&&(o=Vg(o,t,s,i)),e>0&&(o=Vg(o,0,e,i));for(let l=0;l<o.length;l++)o[l].parent=r;return r.children=o,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ws extends jf{constructor(e,t,i,r,o,s,l,a,u){super(e,[],o,s),this.node=t,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=l}static create(e,t,i,r,o,s){let l=o.nodeViews[t.type.name],a,u=l&&l(t,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},i,r),c=u&&u.dom,f=u&&u.contentDOM;if(t.isText){if(!c)c=document.createTextNode(t.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=ua.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let h=c;return c=jA(c,i,t),u?a=new aee(e,t,i,r,c,f||null,h,u,o,s+1):t.isText?new k0(e,t,i,r,c,h,o):new Ws(e,t,i,r,c,f||null,h,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let i=this.children[t];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ye.empty)}return e}matchesNode(e,t,i){return this.dirty==gr&&e.eq(this.node)&&cp(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,r=t,o=e.composing?this.localCompositionInfo(e,t):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new cee(this,s&&s.node,e);dee(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?a.syncToMarks(u.spec.marks,i,e):u.type.side>=0&&!f&&a.syncToMarks(c==this.node.childCount?Pt.none:this.node.child(c).marks,i,e),a.placeWidget(u,e,r)},(u,c,f,h)=>{a.syncToMarks(u.marks,i,e);let d;a.findNodeMatch(u,c,f,h)||l&&e.state.selection.from>r&&e.state.selection.to<r+u.nodeSize&&(d=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(u,c,f,d,e)||a.updateNextNode(u,c,f,e,h,r)||a.addNode(u,c,f,e,r),r+=u.nodeSize}),a.syncToMarks([],i,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Ol)&&(s&&this.protectLocalComposition(e,s),LA(this.contentDOM,this.children,e),_u&&pee(this.dom))}localCompositionInfo(e,t){let{from:i,to:r}=e.state.selection;if(!(e.state.selection instanceof nt)||i<t||r>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=mee(this.node.content,s,i-t,r-t);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:r}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new lee(this,o,t,r);e.input.compositionNodes.push(s),this.children=Vg(this.children,i,i+r.length,e,s)}update(e,t,i,r){return this.dirty==xo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,r),!0)}updateInner(e,t,i,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=gr}updateOuterDeco(e){if(cp(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=FA(this.dom,this.nodeDOM,zg(this.outerDeco,this.node,t),zg(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function a4(n,e,t,i,r){jA(i,e,n);let o=new Ws(void 0,n,e,t,i,i,i,r,0);return o.contentDOM&&o.updateChildren(r,0),o}class k0 extends Ws{constructor(e,t,i,r,o,s,l){super(e,t,i,r,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,i,r){return this.dirty==xo||this.dirty!=gr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=gr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=gr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let r=this.node.cut(e,t),o=document.createTextNode(r.text);return new k0(this.parent,r,this.outerDeco,this.innerDeco,o,o,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=xo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class BA extends jf{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==gr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class aee extends Ws{constructor(e,t,i,r,o,s,l,a,u,c){super(e,t,i,r,o,s,l,u,c),this.spec=a}update(e,t,i,r){if(this.dirty==xo)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,i);return o&&this.updateInner(e,t,i,r),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,i,r){this.spec.setSelection?this.spec.setSelection(e,t,i.root):super.setSelection(e,t,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function LA(n,e,t){let i=n.firstChild,r=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==n){for(;l!=i;)i=u4(i),r=!0;i=i.nextSibling}else r=!0,n.insertBefore(l,i);if(s instanceof na){let a=i?i.previousSibling:n.lastChild;LA(s.contentDOM,s.children,t),i=a?a.nextSibling:n.firstChild}}for(;i;)i=u4(i),r=!0;r&&t.trackWrites==n&&(t.trackWrites=null)}const Ac=function(n){n&&(this.nodeName=n)};Ac.prototype=Object.create(null);const Tl=[new Ac];function zg(n,e,t){if(n.length==0)return Tl;let i=t?Tl[0]:new Ac,r=[i];for(let o=0;o<n.length;o++){let s=n[o].type.attrs;if(s){s.nodeName&&r.push(i=new Ac(s.nodeName));for(let l in s){let a=s[l];a!=null&&(t&&r.length==1&&r.push(i=new Ac(e.isInline?"span":"div")),l=="class"?i.class=(i.class?i.class+" ":"")+a:l=="style"?i.style=(i.style?i.style+";":"")+a:l!="nodeName"&&(i[l]=a))}}}return r}function FA(n,e,t,i){if(t==Tl&&i==Tl)return e;let r=e;for(let o=0;o<i.length;o++){let s=i[o],l=t[o];if(o){let a;l&&l.nodeName==s.nodeName&&r!=n&&(a=r.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(r),l=Tl[0]),r=a}uee(r,l||Tl[0],s)}return r}function uee(n,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&n.removeAttribute(i);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&n.setAttribute(i,t[i]);if(e.class!=t.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.remove(i[o]);for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.add(r[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(e.style);)n.style.removeProperty(r[1])}t.style&&(n.style.cssText+=t.style)}}function jA(n,e,t){return FA(n,n,Tl,zg(e,t,n.nodeType!=1))}function cp(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function u4(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class cee{constructor(e,t,i){this.lock=t,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=fee(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let r=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;r<s&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=gr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=na.create(this.top,e[o],t,i);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,i,r){let o=-1,s;if(r>=this.preMatch.index&&(s=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,i))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,t,i)&&!this.preMatch.matched.has(u)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,i,r,o){let s=this.top.children[r];return s.dirty==xo&&s.dom==s.contentDOM&&(s.dirty=Ol),s.update(e,t,i,o)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}e=t}}updateNextNode(e,t,i,r,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Ws){let u=this.preMatch.matched.get(a);if(u!=null&&u!=o)return!1;let c=a.dom,f,h=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=xo&&cp(t,a.outerDeco));if(!h&&a.update(e,t,i,r))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(a,e,t,i,r,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Ol,f.updateChildren(r,s+1),f.dirty=gr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,i,r,o,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!cp(i,e.outerDeco)||!r.eq(e.innerDeco))return null;let l=Ws.create(this.top,t,i,r,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,t,i,r,o){let s=Ws.create(this.top,e,t,i,r,o);s.contentDOM&&s.updateChildren(r,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let o=new IA(this.top,e,t,i);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof na;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof k0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ci||ai)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new BA(this.top,[],i,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function fee(n,e){let t=e,i=t.children.length,r=n.childCount,o=new Map,s=[];e:for(;r>0;){let l;for(;;)if(i){let u=t.children[i-1];if(u instanceof na)t=u,i=u.children.length;else{l=u,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let a=l.node;if(a){if(a!=n.child(r-1))break;--r,o.set(l,r),s.push(l)}}return{index:r,matched:o,matches:s.reverse()}}function hee(n,e){return n.type.side-e.type.side}function dee(n,e,t,i){let r=e.locals(n),o=0;if(r.length==0){for(let u=0;u<n.childCount;u++){let c=n.child(u);i(c,r,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,l=[],a=null;for(let u=0;;){let c,f;for(;s<r.length&&r[s].to==o;){let g=r[s++];g.widget&&(c?(f||(f=[c])).push(g):c=g)}if(c)if(f){f.sort(hee);for(let g=0;g<f.length;g++)t(f[g],u,!!a)}else t(c,u,!!a);let h,d;if(a)d=-1,h=a,a=null;else if(u<n.childCount)d=u,h=n.child(u++);else break;for(let g=0;g<l.length;g++)l[g].to<=o&&l.splice(g--,1);for(;s<r.length&&r[s].from<=o&&r[s].to>o;)l.push(r[s++]);let p=o+h.nodeSize;if(h.isText){let g=p;s<r.length&&r[s].from<g&&(g=r[s].from);for(let b=0;b<l.length;b++)l[b].to<g&&(g=l[b].to);g<p&&(a=h.cut(g-o),h=h.cut(0,g-o),p=g,d=-1)}else for(;s<r.length&&r[s].to<p;)s++;let m=h.isInline&&!h.isLeaf?l.filter(g=>!g.inline):l.slice();i(h,m,e.forChild(o,h),d),o=p}}function pee(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function mee(n,e,t,i){for(let r=0,o=0;r<n.childCount&&o<=i;){let s=n.child(r++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;r<n.childCount;){let u=n.child(r++);if(o+=u.nodeSize,!u.isText)break;a+=u.text}if(o>=t){if(o>=i&&a.slice(i-e.length-l,i-l)==e)return i-e.length;let u=l<i?a.lastIndexOf(e,i-l-1):-1;if(u>=0&&u+e.length+l>=t)return l+u;if(t==i&&a.length>=i+e.length-l&&a.slice(i-l,i-l+e.length)==e)return i}}return-1}function Vg(n,e,t,i,r){let o=[];for(let s=0,l=0;s<n.length;s++){let a=n[s],u=l,c=l+=a.size;u>=t||c<=e?o.push(a):(u<e&&o.push(a.slice(0,e-u,i)),r&&(o.push(r),r=void 0),c>t&&o.push(a.slice(t-u,a.size,i)))}return o}function Lb(n,e=null){let t=n.domSelectionRange(),i=n.state.doc;if(!t.focusNode)return null;let r=n.docView.nearestDesc(t.focusNode),o=r&&r.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let l=i.resolve(s),a,u;if(y0(t)){for(a=s;r&&!r.node;)r=r.parent;let f=r.node;if(r&&f.isAtom&&Ye.isSelectable(f)&&r.parent&&!(f.isInline&&V$(t.focusNode,t.focusOffset,r.dom))){let h=r.posBefore;u=new Ye(s==h?l:i.resolve(h))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let f=s,h=s;for(let d=0;d<t.rangeCount;d++){let p=t.getRangeAt(d);f=Math.min(f,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(f<0)return null;[a,s]=h==n.state.selection.anchor?[h,f]:[f,h],l=i.resolve(s)}else a=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(a<0)return null}let c=i.resolve(a);if(!u){let f=e=="pointer"||n.state.selection.head<l.pos&&!o?1:-1;u=Fb(n,c,l,f)}return u}function zA(n){return n.editable?n.hasFocus():HA(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Zo(n,e=!1){let t=n.state.selection;if(VA(n,t),!!zA(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&ai){let i=n.domSelectionRange(),r=n.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&ta(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)bee(n);else{let{anchor:i,head:r}=t,o,s;c4&&!(t instanceof nt)&&(t.$from.parent.inlineContent||(o=f4(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=f4(n,t.to))),n.docView.setSelection(i,r,n,e),c4&&(o&&h4(o),s&&h4(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gee(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const c4=Ci||ai&&EA<63;function f4(n,e){let{node:t,offset:i}=n.docView.domFromPos(e,0),r=i<t.childNodes.length?t.childNodes[i]:null,o=i?t.childNodes[i-1]:null;if(Ci&&r&&r.contentEditable=="false")return Rm(r);if((!r||r.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(r)return Rm(r);if(o)return Rm(o)}}function Rm(n){return n.contentEditable="true",Ci&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function h4(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function gee(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),i=t.anchorNode,r=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=i||t.anchorOffset!=r)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!zA(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function bee(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let i=n.cursorWrapper.dom,r=i.nodeName=="IMG";r?t.setStart(i.parentNode,Yn(i)+1):t.setStart(i,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!r&&!n.state.selection.visible&&Pi&&qs<=11&&(i.disabled=!0,i.disabled=!1)}function VA(n,e){if(e instanceof Ye){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(d4(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else d4(n)}function d4(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Fb(n,e,t,i){return n.someProp("createSelectionBetween",r=>r(n,e,t))||nt.between(e,t,i)}function p4(n){return n.editable&&!n.hasFocus()?!1:HA(n)}function HA(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function yee(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ta(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Hg(n,e){let{$anchor:t,$head:i}=n.selection,r=e>0?t.max(i):t.min(i),o=r.parent.inlineContent?r.depth?n.doc.resolve(e>0?r.after():r.before()):null:r;return o&&lt.findFrom(o,e)}function Cs(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function m4(n,e,t){let i=n.state.selection;if(i instanceof nt)if(t.indexOf("s")>-1){let{$head:r}=i,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=n.state.doc.resolve(r.pos+o.nodeSize*(e<0?-1:1));return Cs(n,new nt(i.$anchor,s))}else if(i.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let r=Hg(n.state,e);return r&&r instanceof Ye?Cs(n,r):!1}else if(!(nr&&t.indexOf("m")>-1)){let r=i.$head,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?r.pos-o.nodeSize:r.pos;return o.isAtom||(s=n.docView.descAt(l))&&!s.contentDOM?Ye.isSelectable(o)?Cs(n,new Ye(e<0?n.state.doc.resolve(r.pos-o.nodeSize):r)):Ff?Cs(n,new nt(n.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(i instanceof Ye&&i.node.isInline)return Cs(n,new nt(e>0?i.$to:i.$from));{let r=Hg(n.state,e);return r?Cs(n,r):!1}}}function fp(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ec(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function ya(n,e){return e<0?kee(n):wee(n)}function kee(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let r,o,s=!1;for(Wr&&t.nodeType==1&&i<fp(t)&&Ec(t.childNodes[i],-1)&&(s=!0);;)if(i>0){if(t.nodeType!=1)break;{let l=t.childNodes[i-1];if(Ec(l,-1))r=t,o=--i;else if(l.nodeType==3)t=l,i=t.nodeValue.length;else break}}else{if(qA(t))break;{let l=t.previousSibling;for(;l&&Ec(l,-1);)r=t.parentNode,o=Yn(l),l=l.previousSibling;if(l)t=l,i=fp(t);else{if(t=t.parentNode,t==n.dom)break;i=0}}}s?qg(n,t,i):r&&qg(n,r,o)}function wee(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let r=fp(t),o,s;for(;;)if(i<r){if(t.nodeType!=1)break;let l=t.childNodes[i];if(Ec(l,1))o=t,s=++i;else break}else{if(qA(t))break;{let l=t.nextSibling;for(;l&&Ec(l,1);)o=l.parentNode,s=Yn(l)+1,l=l.nextSibling;if(l)t=l,i=0,r=fp(t);else{if(t=t.parentNode,t==n.dom)break;i=r=0}}}o&&qg(n,o,s)}function qA(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Cee(n,e){for(;n&&e==n.childNodes.length&&!Lf(n);)e=Yn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function _ee(n,e){for(;n&&!e&&!Lf(n);)e=Yn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function qg(n,e,t){if(e.nodeType!=3){let o,s;(s=Cee(e,t))?(e=s,t=0):(o=_ee(e,t))&&(e=o,t=o.nodeValue.length)}let i=n.domSelection();if(!i)return;if(y0(i)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),i.removeAllRanges(),i.addRange(o)}else i.extend&&i.extend(e,t);n.domObserver.setCurSelection();let{state:r}=n;setTimeout(()=>{n.state==r&&Zo(n)},50)}function g4(n,e){let t=n.state.doc.resolve(e);if(!(ai||W$)&&t.parent.inlineContent){let r=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(o.left-r.left)>1)return o.left>r.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function b4(n,e,t){let i=n.state.selection;if(i instanceof nt&&!i.empty||t.indexOf("s")>-1||nr&&t.indexOf("m")>-1)return!1;let{$from:r,$to:o}=i;if(!r.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=Hg(n.state,e);if(s&&s instanceof Ye)return Cs(n,s)}if(!r.parent.inlineContent){let s=e<0?r:o,l=i instanceof mr?lt.near(s,e):lt.findFrom(s,e);return l?Cs(n,l):!1}return!1}function y4(n,e){if(!(n.state.selection instanceof nt))return!0;let{$head:t,$anchor:i,empty:r}=n.state.selection;if(!t.sameParent(i))return!0;if(!r)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let s=n.state.tr;return e<0?s.delete(t.pos-o.nodeSize,t.pos):s.delete(t.pos,t.pos+o.nodeSize),n.dispatch(s),!0}return!1}function k4(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function See(n){if(!Ci||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;k4(n,i,"true"),setTimeout(()=>k4(n,i,"false"),20)}return!1}function vee(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function xee(n,e){let t=e.keyCode,i=vee(e);if(t==8||nr&&t==72&&i=="c")return y4(n,-1)||ya(n,-1);if(t==46&&!e.shiftKey||nr&&t==68&&i=="c")return y4(n,1)||ya(n,1);if(t==13||t==27)return!0;if(t==37||nr&&t==66&&i=="c"){let r=t==37?g4(n,n.state.selection.from)=="ltr"?-1:1:-1;return m4(n,r,i)||ya(n,r)}else if(t==39||nr&&t==70&&i=="c"){let r=t==39?g4(n,n.state.selection.from)=="ltr"?1:-1:1;return m4(n,r,i)||ya(n,r)}else{if(t==38||nr&&t==80&&i=="c")return b4(n,-1,i)||ya(n,-1);if(t==40||nr&&t==78&&i=="c")return See(n)||b4(n,1,i)||ya(n,1);if(i==(nr?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function jb(n,e){n.someProp("transformCopied",d=>{e=d(e,n)});let t=[],{content:i,openStart:r,openEnd:o}=e;for(;r>1&&o>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,o--;let d=i.firstChild;t.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),i=d.content}let s=n.someProp("clipboardSerializer")||ua.fromSchema(n.state.schema),l=QA(),a=l.createElement("div");a.appendChild(s.serializeFragment(i,{document:l}));let u=a.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=GA[u.nodeName.toLowerCase()]);){for(let d=c.length-1;d>=0;d--){let p=l.createElement(c[d]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),f++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${r} ${o}${f?` -${f}`:""} ${JSON.stringify(t)}`);let h=n.someProp("clipboardTextSerializer",d=>d(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:h,slice:e}}function WA(n,e,t,i,r){let o=r.parent.type.spec.code,s,l;if(!t&&!e)return null;let a=e&&(i||o||!t);if(a){if(n.someProp("transformPastedText",h=>{e=h(e,o||i,n)}),o)return e?new Re(ye.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Re.empty;let f=n.someProp("clipboardTextParser",h=>h(e,r,i,n));if(f)l=f;else{let h=r.marks(),{schema:d}=n.state,p=ua.fromSchema(d);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=s.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(d.text(m,h)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),s=Oee(t),Ff&&Tee(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||Yo.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:r,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!Mee.test(h.parentNode.nodeName)?{ignore:!0}:null}})),c)l=Dee(w4(l,+c[1],+c[2]),c[4]);else if(l=Re.maxOpen(Aee(l.content,r),!0),l.openStart||l.openEnd){let f=0,h=0;for(let d=l.content.firstChild;f<l.openStart&&!d.type.spec.isolating;f++,d=d.firstChild);for(let d=l.content.lastChild;h<l.openEnd&&!d.type.spec.isolating;h++,d=d.lastChild);l=w4(l,f,h)}return n.someProp("transformPasted",f=>{l=f(l,n)}),l}const Mee=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Aee(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.index(t)),o,s=[];if(n.forEach(l=>{if(!s)return;let a=r.findWrapping(l.type),u;if(!a)return s=null;if(u=s.length&&o.length&&JA(a,o,l,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=KA(s[s.length-1],o.length));let c=UA(l,a);s.push(c),r=r.matchType(c.type),o=a}}),s)return ye.from(s)}return n}function UA(n,e,t=0){for(let i=e.length-1;i>=t;i--)n=e[i].create(null,ye.from(n));return n}function JA(n,e,t,i,r){if(r<n.length&&r<e.length&&n[r]==e[r]){let o=JA(n,e,t,i.lastChild,r+1);if(o)return i.copy(i.content.replaceChild(i.childCount-1,o));if(i.contentMatchAt(i.childCount).matchType(r==n.length-1?t.type:n[r+1]))return i.copy(i.content.append(ye.from(UA(t,n,r+1))))}}function KA(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,KA(n.lastChild,e-1)),i=n.contentMatchAt(n.childCount).fillBefore(ye.empty,!0);return n.copy(t.append(i))}function Wg(n,e,t,i,r,o){let s=e<0?n.firstChild:n.lastChild,l=s.content;return n.childCount>1&&(o=0),r<i-1&&(l=Wg(l,e,t,i,r+1,o)),r>=t&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=r).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(ye.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(l))}function w4(n,e,t){return e<n.openStart&&(n=new Re(Wg(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Re(Wg(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const GA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let C4=null;function QA(){return C4||(C4=document.implementation.createHTMLDocument("title"))}let Nm=null;function Eee(n){let e=window.trustedTypes;return e?(Nm||(Nm=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Nm.createHTML(n)):n}function Oee(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=QA().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),r;if((r=i&&GA[i[1].toLowerCase()])&&(n=r.map(o=>"<"+o+">").join("")+n+r.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=Eee(n),r)for(let o=0;o<r.length;o++)t=t.querySelector(r[o])||t;return t}function Tee(n){let e=n.querySelectorAll(ai?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let i=e[t];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function Dee(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return n}let{content:r,openStart:o,openEnd:s}=n;for(let l=i.length-2;l>=0;l-=2){let a=t.nodes[i[l]];if(!a||a.hasRequiredAttrs())break;r=ye.from(a.create(i[l+1],r)),o++,s++}return new Re(r,o,s)}const _i={},Si={},Pee={touchstart:!0,touchmove:!0};class Ree{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Nee(n){for(let e in _i){let t=_i[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>{Bee(n,i)&&!zb(n,i)&&(n.editable||!(i.type in Si))&&t(n,i)},Pee[e]?{passive:!0}:void 0)}Ci&&n.dom.addEventListener("input",()=>null),Ug(n)}function Bs(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Iee(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Ug(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>zb(n,i))})}function zb(n,e){return n.someProp("handleDOMEvents",t=>{let i=t[e.type];return i?i(n,e)||e.defaultPrevented:!1})}function Bee(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Lee(n,e){!zb(n,e)&&_i[e.type]&&(n.editable||!(e.type in Si))&&_i[e.type](n,e)}Si.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!YA(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Jo&&ai&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),_u&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",r=>r(n,xl(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,t))||xee(n,t)?t.preventDefault():Bs(n,"key")};Si.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Si.keypress=(n,e)=>{let t=e;if(YA(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||nr&&t.metaKey)return;if(n.someProp("handleKeyPress",r=>r(n,t))){t.preventDefault();return}let i=n.state.selection;if(!(i instanceof nt)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(r).scrollIntoView();!/[\r\n]/.test(r)&&!n.someProp("handleTextInput",s=>s(n,i.$from.pos,i.$to.pos,r,o))&&n.dispatch(o()),t.preventDefault()}};function w0(n){return{left:n.clientX,top:n.clientY}}function Fee(n,e){let t=e.x-n.clientX,i=e.y-n.clientY;return t*t+i*i<100}function Vb(n,e,t,i,r){if(i==-1)return!1;let o=n.state.doc.resolve(i);for(let s=o.depth+1;s>0;s--)if(n.someProp(e,l=>s>o.depth?l(n,t,o.nodeAfter,o.before(s),r,!0):l(n,t,o.node(s),o.before(s),r,!1)))return!0;return!1}function Za(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let i=n.state.tr.setSelection(e);t=="pointer"&&i.setMeta("pointer",!0),n.dispatch(i)}function jee(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),i=t.nodeAfter;return i&&i.isAtom&&Ye.isSelectable(i)?(Za(n,new Ye(t),"pointer"),!0):!1}function zee(n,e){if(e==-1)return!1;let t=n.state.selection,i,r;t instanceof Ye&&(i=t.node);let o=n.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(Ye.isSelectable(l)){i&&t.$from.depth>0&&s>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?r=o.before(t.$from.depth):r=o.before(s);break}}return r!=null?(Za(n,Ye.create(n.state.doc,r),"pointer"),!0):!1}function Vee(n,e,t,i,r){return Vb(n,"handleClickOn",e,t,i)||n.someProp("handleClick",o=>o(n,e,i))||(r?zee(n,t):jee(n,t))}function Hee(n,e,t,i){return Vb(n,"handleDoubleClickOn",e,t,i)||n.someProp("handleDoubleClick",r=>r(n,e,i))}function qee(n,e,t,i){return Vb(n,"handleTripleClickOn",e,t,i)||n.someProp("handleTripleClick",r=>r(n,e,i))||Wee(n,t,i)}function Wee(n,e,t){if(t.button!=0)return!1;let i=n.state.doc;if(e==-1)return i.inlineContent?(Za(n,nt.create(i,0,i.content.size),"pointer"),!0):!1;let r=i.resolve(e);for(let o=r.depth+1;o>0;o--){let s=o>r.depth?r.nodeAfter:r.node(o),l=r.before(o);if(s.inlineContent)Za(n,nt.create(i,l+1,l+1+s.content.size),"pointer");else if(Ye.isSelectable(s))Za(n,Ye.create(i,l),"pointer");else continue;return!0}}function Hb(n){return hp(n)}const XA=nr?"metaKey":"ctrlKey";_i.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let i=Hb(n),r=Date.now(),o="singleClick";r-n.input.lastClick.time<500&&Fee(t,n.input.lastClick)&&!t[XA]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:r,x:t.clientX,y:t.clientY,type:o,button:t.button};let s=n.posAtCoords(w0(t));s&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Uee(n,s,t,!!i)):(o=="doubleClick"?Hee:qee)(n,s.pos,s.inside,t)?t.preventDefault():Bs(n,"pointer"))};class Uee{constructor(e,t,i,r){this.view=e,this.pos=t,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[XA],this.allowDefault=i.shiftKey;let o,s;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),s=t.inside;else{let c=e.state.doc.resolve(t.pos);o=c.parent,s=c.depth?c.before():0}const l=r?null:i.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(i.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof Ye&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Wr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Bs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Zo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(w0(e))),this.updateAllowDefault(e),this.allowDefault||!t?Bs(this.view,"pointer"):Vee(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ci&&this.mightDrag&&!this.mightDrag.node.isAtom||ai&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Za(this.view,lt.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Bs(this.view,"pointer")}move(e){this.updateAllowDefault(e),Bs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}_i.touchstart=n=>{n.input.lastTouch=Date.now(),Hb(n),Bs(n,"pointer")};_i.touchmove=n=>{n.input.lastTouch=Date.now(),Bs(n,"pointer")};_i.contextmenu=n=>Hb(n);function YA(n,e){return n.composing?!0:Ci&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const Jee=Jo?5e3:-1;Si.compositionstart=Si.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof nt&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),hp(n,!0),n.markCursor=null;else if(hp(n,!e.selection.empty),Wr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let i=n.domSelectionRange();for(let r=i.focusNode,o=i.focusOffset;r&&r.nodeType==1&&o!=0;){let s=o<0?r.lastChild:r.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=n.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else r=s,o=-1}}n.input.composing=!0}ZA(n,Jee)};Si.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,ZA(n,20))};function ZA(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>hp(n),e))}function $A(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=Gee());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function Kee(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=j$(e.focusNode,e.focusOffset),i=z$(e.focusNode,e.focusOffset);if(t&&i&&t!=i){let r=i.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||i==o)return o;if(!r||!r.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return i}}return t||i}function Gee(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function hp(n,e=!1){if(!(Jo&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),$A(n),e||n.docView&&n.docView.dirty){let t=Lb(n),i=n.state.selection;return t&&!t.eq(i)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function Qee(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),n.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const af=Pi&&qs<15||_u&&U$<604;_i.copy=Si.cut=(n,e)=>{let t=e,i=n.state.selection,r=t.type=="cut";if(i.empty)return;let o=af?null:t.clipboardData,s=i.content(),{dom:l,text:a}=jb(n,s);o?(t.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):Qee(n,l),r&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Xee(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function Yee(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),t?uf(n,i.value,null,r,e):uf(n,i.textContent,i.innerHTML,r,e)},50)}function uf(n,e,t,i,r){let o=WA(n,e,t,i,n.state.selection.$from);if(n.someProp("handlePaste",a=>a(n,r,o||Re.empty)))return!0;if(!o)return!1;let s=Xee(o),l=s?n.state.tr.replaceSelectionWith(s,i):n.state.tr.replaceSelection(o);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function eE(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Si.paste=(n,e)=>{let t=e;if(n.composing&&!Jo)return;let i=af?null:t.clipboardData,r=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&uf(n,eE(i),i.getData("text/html"),r,t)?t.preventDefault():Yee(n,t)};class tE{constructor(e,t,i){this.slice=e,this.move=t,this.node=i}}const Zee=nr?"altKey":"ctrlKey";function nE(n,e){let t=n.someProp("dragCopies",i=>!i(e));return t??!e[Zee]}_i.dragstart=(n,e)=>{let t=e,i=n.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let r=n.state.selection,o=r.empty?null:n.posAtCoords(w0(t)),s;if(!(o&&o.pos>=r.from&&o.pos<=(r instanceof Ye?r.to-1:r.to))){if(i&&i.mightDrag)s=Ye.create(n.state.doc,i.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(s=Ye.create(n.state.doc,f.posBefore))}}let l=(s||n.state.selection).content(),{dom:a,text:u,slice:c}=jb(n,l);(!t.dataTransfer.files.length||!ai||EA>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(af?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",af||t.dataTransfer.setData("text/plain",u),n.dragging=new tE(c,nE(n,t),s)};_i.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Si.dragover=Si.dragenter=(n,e)=>e.preventDefault();Si.drop=(n,e)=>{let t=e,i=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let r=n.posAtCoords(w0(t));if(!r)return;let o=n.state.doc.resolve(r.pos),s=i&&i.slice;s?n.someProp("transformPasted",p=>{s=p(s,n)}):s=WA(n,eE(t.dataTransfer),af?null:t.dataTransfer.getData("text/html"),!1,o);let l=!!(i&&nE(n,t));if(n.someProp("handleDrop",p=>p(n,t,s||Re.empty,l))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?kA(n.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let u=n.state.tr;if(l){let{node:p}=i;p?p.replace(u):u.deleteSelection()}let c=u.mapping.map(a),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=u.doc;if(f?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(h))return;let d=u.doc.resolve(c);if(f&&Ye.isSelectable(s.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new Ye(d));else{let p=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((m,g,b,y)=>p=y),u.setSelection(Fb(n,d,u.doc.resolve(p)))}n.focus(),n.dispatch(u.setMeta("uiEvent","drop"))};_i.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Zo(n)},20))};_i.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};_i.beforeinput=(n,e)=>{if(ai&&Jo&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,xl(8,"Backspace")))))return;let{$cursor:r}=n.state.selection;r&&r.pos>0&&n.dispatch(n.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let n in Si)_i[n]=Si[n];function cf(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class dp{constructor(e,t){this.toDOM=e,this.spec=t||Il,this.side=this.spec.side||0}map(e,t,i,r){let{pos:o,deleted:s}=e.mapResult(t.from+r,this.side<0?-1:1);return s?null:new ur(o-i,o-i,this)}valid(){return!0}eq(e){return this==e||e instanceof dp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&cf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Us{constructor(e,t){this.attrs=e,this.spec=t||Il}map(e,t,i,r){let o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-i,s=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-i;return o>=s?null:new ur(o,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Us&&cf(this.attrs,e.attrs)&&cf(this.spec,e.spec)}static is(e){return e.type instanceof Us}destroy(){}}class qb{constructor(e,t){this.attrs=e,this.spec=t||Il}map(e,t,i,r){let o=e.mapResult(t.from+r,1);if(o.deleted)return null;let s=e.mapResult(t.to+r,-1);return s.deleted||s.pos<=o.pos?null:new ur(o.pos-i,s.pos-i,this)}valid(e,t){let{index:i,offset:r}=e.content.findIndex(t.from),o;return r==t.from&&!(o=e.child(i)).isText&&r+o.nodeSize==t.to}eq(e){return this==e||e instanceof qb&&cf(this.attrs,e.attrs)&&cf(this.spec,e.spec)}destroy(){}}class ur{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new ur(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new ur(e,e,new dp(t,i))}static inline(e,t,i,r){return new ur(e,t,new Us(i,r))}static node(e,t,i,r){return new ur(e,t,new qb(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Us}get widget(){return this.type instanceof dp}}const Aa=[],Il={};class On{constructor(e,t){this.local=e.length?e:Aa,this.children=t.length?t:Aa}static create(e,t){return t.length?pp(t,e,0,Il):ii}find(e,t,i){let r=[];return this.findInner(e??0,t??1e9,r,0,i),r}findInner(e,t,i,r,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=t&&l.to>=e&&(!o||o(l.spec))&&i.push(l.copy(l.from+r,l.to+r))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,i,r+l,o)}}map(e,t,i){return this==ii||e.maps.length==0?this:this.mapInner(e,t,0,0,i||Il)}mapInner(e,t,i,r,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,i,r);a&&a.type.valid(t,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?$ee(this.children,s||[],e,t,i,r,o):s?new On(s.sort(Bl),Aa):ii}add(e,t){return t.length?this==ii?On.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let r,o=0;e.forEach((l,a)=>{let u=a+i,c;if(c=rE(t,l,u)){for(r||(r=this.children.slice());o<r.length&&r[o]<a;)o+=3;r[o]==a?r[o+2]=r[o+2].addInner(l,c,u+1):r.splice(o,0,a,a+l.nodeSize,pp(c,l,u+1,Il)),o+=3}});let s=iE(o?oE(t):t,-i);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new On(s.length?this.local.concat(s).sort(Bl):this.local,r||this.children)}remove(e){return e.length==0||this==ii?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,r=this.local;for(let o=0;o<i.length;o+=3){let s,l=i[o]+t,a=i[o+1]+t;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>l&&f.to<a&&(e[c]=null,(s||(s=[])).push(f));if(!s)continue;i==this.children&&(i=this.children.slice());let u=i[o+2].removeInner(s,l+1);u!=ii?i[o+2]=u:(i.splice(o,3),o-=3)}if(r.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<r.length;l++)r[l].eq(s,t)&&(r==this.local&&(r=this.local.slice()),r.splice(l--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new On(r,i):ii}forChild(e,t){if(this==ii)return this;if(t.isLeaf)return On.empty;let i,r;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(i=this.children[l+2]);break}let o=e+1,s=o+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof Us){let u=Math.max(o,a.from)-o,c=Math.min(s,a.to)-o;u<c&&(r||(r=[])).push(a.copy(u,c))}}if(r){let l=new On(r.sort(Bl),Aa);return i?new As([l,i]):l}return i||ii}eq(e){if(this==e)return!0;if(!(e instanceof On)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Wb(this.localsInner(e))}localsInner(e){if(this==ii)return Aa;if(e.inlineContent||!this.local.some(Us.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof Us||t.push(this.local[i]);return t}forEachSet(e){e(this)}}On.empty=new On([],[]);On.removeOverlap=Wb;const ii=On.empty;class As{constructor(e){this.members=e}map(e,t){const i=this.members.map(r=>r.map(e,t,Il));return As.from(i)}forChild(e,t){if(t.isLeaf)return On.empty;let i=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,t);o!=ii&&(o instanceof As?i=i.concat(o.members):i.push(o))}return As.from(i)}eq(e){if(!(e instanceof As)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(!t)t=o;else{i&&(t=t.slice(),i=!1);for(let s=0;s<o.length;s++)t.push(o[s])}}return t?Wb(i?t:t.sort(Bl)):Aa}static from(e){switch(e.length){case 0:return ii;case 1:return e[0];default:return new As(e.every(t=>t instanceof On)?e:e.reduce((t,i)=>t.concat(i instanceof On?i:i.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function $ee(n,e,t,i,r,o,s){let l=n.slice();for(let u=0,c=o;u<t.maps.length;u++){let f=0;t.maps[u].forEach((h,d,p,m)=>{let g=m-p-(d-h);for(let b=0;b<l.length;b+=3){let y=l[b+1];if(y<0||h>y+c-f)continue;let _=l[b]+c-f;d>=_?l[b+1]=h<=_?-2:-1:h>=c&&g&&(l[b]+=g,l[b+1]+=g)}f+=g}),c=t.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=t.map(n[u]+o),f=c-r;if(f<0||f>=i.content.size){a=!0;continue}let h=t.map(n[u+1]+o,-1),d=h-r,{index:p,offset:m}=i.content.findIndex(f),g=i.maybeChild(p);if(g&&m==f&&m+g.nodeSize==d){let b=l[u+2].mapInner(t,g,c+1,n[u]+o+1,s);b!=ii?(l[u]=f,l[u+1]=d,l[u+2]=b):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=ete(l,n,e,t,r,o,s),c=pp(u,i,0,s);e=c.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,h=0;f<c.children.length;f+=3){let d=c.children[f];for(;h<l.length&&l[h]<d;)h+=3;l.splice(h,0,c.children[f],c.children[f+1],c.children[f+2])}}return new On(e.sort(Bl),l)}function iE(n,e){if(!e||!n.length)return n;let t=[];for(let i=0;i<n.length;i++){let r=n[i];t.push(new ur(r.from+e,r.to+e,r.type))}return t}function ete(n,e,t,i,r,o,s){function l(a,u){for(let c=0;c<a.local.length;c++){let f=a.local[c].map(i,r,u);f?t.push(f):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<n.length;a+=3)n[a+1]==-1&&l(n[a+2],e[a]+o+1);return t}function rE(n,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,r=null;for(let o=0,s;o<n.length;o++)(s=n[o])&&s.from>t&&s.to<i&&((r||(r=[])).push(s),n[o]=null);return r}function oE(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function pp(n,e,t,i){let r=[],o=!1;e.forEach((l,a)=>{let u=rE(n,l,a+t);if(u){o=!0;let c=pp(u,l,t+a+1,i);c!=ii&&r.push(a,a+l.nodeSize,c)}});let s=iE(o?oE(n):n,-t).sort(Bl);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(i.onRemove&&i.onRemove(s[l].spec),s.splice(l--,1));return s.length||r.length?new On(s,r):ii}function Bl(n,e){return n.from-e.from||n.to-e.to}function Wb(n){let e=n;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let r=t+1;r<e.length;r++){let o=e[r];if(o.from==i.from){o.to!=i.to&&(e==n&&(e=n.slice()),e[r]=o.copy(o.from,i.to),_4(e,r+1,o.copy(i.to,o.to)));continue}else{o.from<i.to&&(e==n&&(e=n.slice()),e[t]=i.copy(i.from,o.from),_4(e,r,i.copy(o.from,i.to)));break}}}return e}function _4(n,e,t){for(;e<n.length&&Bl(t,n[e])>0;)e++;n.splice(e,0,t)}function Im(n){let e=[];return n.someProp("decorations",t=>{let i=t(n.state);i&&i!=ii&&e.push(i)}),n.cursorWrapper&&e.push(On.create(n.state.doc,[n.cursorWrapper.deco])),As.from(e)}const tte={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},nte=Pi&&qs<=11;class ite{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class rte{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ite,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);Pi&&qs<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),nte&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,tte)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(p4(this.view)){if(this.suppressingSelectionUpdates)return Zo(this.view);if(Pi&&qs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ta(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,i;for(let o=e.focusNode;o;o=Cu(o))t.add(o);for(let o=e.anchorNode;o;o=Cu(o))if(t.has(o)){i=o;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let i=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&p4(e)&&!this.ignoreSelectionChange(i),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let f=this.registerMutation(t[c],a);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(l=!0))}if(Wr&&a.length){let c=a.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,h]=c;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of c){let d=h.parentNode;d&&d.nodeName=="LI"&&(!f||lte(e,f)!=d)&&h.remove()}}}let u=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&y0(i)&&(u=Lb(e))&&u.eq(lt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Zo(e),this.currentSelection.set(i),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,s),ote(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||Zo(e),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let r=e.previousSibling,o=e.nextSibling;if(Pi&&qs<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:h}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(r=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h)}let s=r&&r.parentNode==e.target?Yn(r)+1:0,l=i.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Yn(o):e.target.childNodes.length,u=i.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let S4=new WeakMap,v4=!1;function ote(n){if(!S4.has(n)&&(S4.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Wr,v4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),v4=!0}}function x4(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.domAtPos(n.state.selection.anchor);return ta(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function ste(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return x4(n,r)}let t;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),t?x4(n,t):null}function lte(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let i=n.docView.nearestDesc(t,!0);if(i&&i.node.isBlock)return t}return null}function ate(n,e,t){let{node:i,fromOffset:r,toOffset:o,from:s,to:l}=n.docView.parseRange(e,t),a=n.domSelectionRange(),u,c=a.anchorNode;if(c&&n.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],y0(a)||u.push({node:a.focusNode,offset:a.focusOffset})),ai&&n.input.lastKeyCode===8)for(let g=o;g>r;g--){let b=i.childNodes[g-1],y=b.pmViewDesc;if(b.nodeName=="BR"&&!y){o=g;break}if(!y||y.size)break}let f=n.state.doc,h=n.someProp("domParser")||Yo.fromSchema(n.state.schema),d=f.resolve(s),p=null,m=h.parse(i,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:r,to:o,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:ute,context:d});if(u&&u[0].pos!=null){let g=u[0].pos,b=u[1]&&u[1].pos;b==null&&(b=g),p={anchor:g+s,head:b+s}}return{doc:m,sel:p,from:s,to:l}}function ute(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ci&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ci&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const cte=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function fte(n,e,t,i,r){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let I=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,O=Lb(n,I);if(O&&!n.state.selection.eq(O)){if(ai&&Jo&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",A=>A(n,xl(13,"Enter"))))return;let P=n.state.tr.setSelection(O);I=="pointer"?P.setMeta("pointer",!0):I=="key"&&P.scrollIntoView(),o&&P.setMeta("composition",o),n.dispatch(P)}return}let s=n.state.doc.resolve(e),l=s.sharedDepth(t);e=s.before(l+1),t=n.state.doc.resolve(t).after(l+1);let a=n.state.selection,u=ate(n,e,t),c=n.state.doc,f=c.slice(u.from,u.to),h,d;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,d="end"):(h=n.state.selection.from,d="start"),n.input.lastKeyCode=null;let p=pte(f.content,u.doc.content,u.from,h,d);if(p&&n.input.domChangeCount++,(_u&&n.input.lastIOSEnter>Date.now()-225||Jo)&&r.some(I=>I.nodeType==1&&!cte.test(I.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",I=>I(n,xl(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(i&&a instanceof nt&&!a.empty&&a.$head.sameParent(a.$anchor)&&!n.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let I=M4(n,n.state.doc,u.sel);if(I&&!I.eq(n.state.selection)){let O=n.state.tr.setSelection(I);o&&O.setMeta("composition",o),n.dispatch(O)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof nt&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=u.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=u.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),Pi&&qs<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=u.doc.resolveNoCache(p.start-u.from),g=u.doc.resolveNoCache(p.endB-u.from),b=c.resolve(p.start),y=m.sameParent(g)&&m.parent.inlineContent&&b.end()>=p.endA,_;if((_u&&n.input.lastIOSEnter>Date.now()-225&&(!y||r.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!y&&m.pos<u.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(m.pos,g.pos,"",""))&&(_=lt.findFrom(u.doc.resolve(m.pos+1),1,!0))&&_.head>m.pos)&&n.someProp("handleKeyDown",I=>I(n,xl(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&dte(c,p.start,p.endA,m,g)&&n.someProp("handleKeyDown",I=>I(n,xl(8,"Backspace")))){Jo&&ai&&n.domObserver.suppressSelectionUpdates();return}ai&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),Jo&&!y&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,g=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{n.someProp("handleKeyDown",function(I){return I(n,xl(13,"Enter"))})},20));let M=p.start,w=p.endA,S=I=>{let O=I||n.state.tr.replace(M,w,u.doc.slice(p.start-u.from,p.endB-u.from));if(u.sel){let P=M4(n,O.doc,u.sel);P&&!(ai&&n.composing&&P.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(P.head==M||P.head==O.mapping.map(w)-1)||Pi&&P.empty&&P.head==M)&&O.setSelection(P)}return o&&O.setMeta("composition",o),O.scrollIntoView()},E;if(y){if(m.pos==g.pos){Pi&&qs<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Zo(n),20));let I=S(n.state.tr.delete(M,w)),O=c.resolve(p.start).marksAcross(c.resolve(p.endA));O&&I.ensureMarks(O),n.dispatch(I)}else if(p.endA==p.endB&&(E=hte(m.parent.content.cut(m.parentOffset,g.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start())))){let I=S(n.state.tr);E.type=="add"?I.addMark(M,w,E.mark):I.removeMark(M,w,E.mark),n.dispatch(I)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let I=m.parent.textBetween(m.parentOffset,g.parentOffset),O=()=>S(n.state.tr.insertText(I,M,w));n.someProp("handleTextInput",P=>P(n,M,w,I,O))||n.dispatch(O())}}else n.dispatch(S())}function M4(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Fb(n,e.resolve(t.anchor),e.resolve(t.head))}function hte(n,e){let t=n.firstChild.marks,i=e.firstChild.marks,r=t,o=i,s,l,a;for(let c=0;c<i.length;c++)r=i[c].removeFromSet(r);for(let c=0;c<t.length;c++)o=t[c].removeFromSet(o);if(r.length==1&&o.length==0)l=r[0],s="add",a=c=>c.mark(l.addToSet(c.marks));else if(r.length==0&&o.length==1)l=o[0],s="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(ye.from(u).eq(n))return{mark:l,type:s}}function dte(n,e,t,i,r){if(t-e<=r.pos-i.pos||Bm(i,!0,!1)<r.pos)return!1;let o=n.resolve(e);if(!i.parent.isTextblock){let l=o.nodeAfter;return l!=null&&t==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=n.resolve(Bm(o,!0,!0));return!s.parent.isTextblock||s.pos>t||Bm(s,!0,!1)<t?!1:i.parent.content.cut(i.parentOffset).eq(s.parent.content)}function Bm(n,e,t){let i=n.depth,r=e?n.end():n.pos;for(;i>0&&(e||n.indexAfter(i)==n.node(i).childCount);)i--,r++,e=!1;if(t){let o=n.node(i).maybeChild(n.indexAfter(i));for(;o&&!o.isLeaf;)o=o.firstChild,r++}return r}function pte(n,e,t,i,r){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:s,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);if(r=="end"){let a=Math.max(0,o-Math.min(s,l));i-=s+a-o}if(s<o&&n.size<e.size){let a=i<=o&&i>=s?o-i:0;o-=a,o&&o<e.size&&A4(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=i<=o&&i>=l?o-i:0;o-=a,o&&o<n.size&&A4(n.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function A4(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class sE{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ree,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(P4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=T4(this),O4(this),this.nodeViews=D4(this),this.docView=a4(this.state.doc,E4(this),Im(this),this.dom,this),this.domObserver=new rte(this,(i,r,o,s)=>fte(this,i,r,o,s)),this.domObserver.start(),Nee(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ug(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(P4),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let i in this._props)t[i]=this._props[i];t.state=this.state;for(let i in e)t[i]=e[i];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var i;let r=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&($A(this),s=!0),this.state=e;let l=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let d=D4(this);gte(d,this.nodeViews)&&(this.nodeViews=d,o=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ug(this),this.editable=T4(this),O4(this);let a=Im(this),u=E4(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,u,a);(f||!e.selection.eq(r.selection))&&(s=!0);let h=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&G$(this);if(s){this.domObserver.stop();let d=f&&(Pi||ai)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&mte(r.selection,e.selection);if(f){let p=ai?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Kee(this)),(o||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=a4(e.doc,u,a,this.dom,this)),p&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&yee(this))?Zo(this,d):(VA(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():h&&Q$(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ye){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&n4(this,t.getBoundingClientRect(),e)}else n4(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let i=this.directPlugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let i=this.state.plugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let i=this.pluginViews[t];i.update&&i.update(this,e)}}updateDraggedNode(e,t){let i=e.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let o=i.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==i.node&&(r=o)}this.dragging=new tE(e.slice,e.move,r<0?void 0:Ye.create(this.state.doc,r))}someProp(e,t){let i=this._props&&this._props[e],r;if(i!=null&&(r=t?t(i):i))return r;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(r=t?t(l):l))return r}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(r=t?t(l):l))return r}}hasFocus(){if(Pi){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&X$(this.dom),Zo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return tee(this,e)}coordsAtPos(e,t=1){return RA(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,i=-1){let r=this.docView.posFromDOM(e,t,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return see(this,t||this.state,e)}pasteHTML(e,t){return uf(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return uf(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return jb(this,e)}destroy(){this.docView&&(Iee(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Im(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,L$())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Lee(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ci&&this.root.nodeType===11&&H$(this.dom.ownerDocument)==this.dom&&ste(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}sE.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function E4(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let i in t)i=="class"?e.class+=" "+t[i]:i=="style"?e.style=(e.style?e.style+";":"")+t[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(t[i]))}),e.translate||(e.translate="no"),[ur.node(0,n.state.doc.content.size,e)]}function O4(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:ur.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function T4(n){return!n.someProp("editable",e=>e(n.state)===!1)}function mte(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function D4(n){let e=Object.create(null);function t(i){for(let r in i)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=i[r])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function gte(n,e){let t=0,i=0;for(let r in n){if(n[r]!=e[r])return!0;t++}for(let r in e)i++;return t!=i}function P4(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const bte=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),yte=typeof navigator<"u"&&/Win/.test(navigator.platform);function kte(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let i,r,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))bte?s=!0:r=!0;else throw new Error("Unrecognized modifier name: "+a)}return i&&(t="Alt-"+t),r&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function wte(n){let e=Object.create(null);for(let t in n)e[kte(t)]=n[t];return e}function Lm(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Cte(n){return new xi({props:{handleKeyDown:lE(n)}})}function lE(n){let e=wte(n);return function(t,i){let r=ox(i),o,s=e[Lm(r,i)];if(s&&s(t.state,t.dispatch,t))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let l=e[Lm(r,i,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((i.altKey||i.metaKey||i.ctrlKey)&&!(yte&&i.ctrlKey&&i.altKey)&&(o=ls[i.keyCode])&&o!=r){let l=e[Lm(o,i)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const _te=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function aE(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Ste=(n,e,t)=>{let i=aE(n,t);if(!i)return!1;let r=Ub(i);if(!r){let s=i.blockRange(),l=s&&Fu(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)}let o=r.nodeBefore;if(hE(n,r,e,-1))return!0;if(i.parent.content.size==0&&(Su(o,"end")||Ye.isSelectable(o)))for(let s=i.depth;;s--){let l=g0(n.doc,i.before(s),i.after(s),Re.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=n.tr.step(l);a.setSelection(Su(o,"end")?lt.findFrom(a.doc.resolve(a.mapping.map(r.pos,-1)),-1):Ye.create(a.doc,r.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||i.node(s-1).childCount>1)break}return o.isAtom&&r.depth==i.depth-1?(e&&e(n.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!1},vte=(n,e,t)=>{let i=aE(n,t);if(!i)return!1;let r=Ub(i);return r?uE(n,r,e):!1},xte=(n,e,t)=>{let i=cE(n,t);if(!i)return!1;let r=Jb(i);return r?uE(n,r,e):!1};function uE(n,e,t){let i=e.nodeBefore,r=i,o=e.pos-1;for(;!r.isTextblock;o--){if(r.type.spec.isolating)return!1;let c=r.lastChild;if(!c)return!1;r=c}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let c=l.firstChild;if(!c)return!1;l=c}let u=g0(n.doc,o,a,Re.empty);if(!u||u.from!=o||u instanceof Ln&&u.slice.size>=a-o)return!1;if(t){let c=n.tr.step(u);c.setSelection(nt.create(c.doc,o)),t(c.scrollIntoView())}return!0}function Su(n,e,t=!1){for(let i=n;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const Mte=(n,e,t)=>{let{$head:i,empty:r}=n.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):i.parentOffset>0)return!1;o=Ub(i)}let s=o&&o.nodeBefore;return!s||!Ye.isSelectable(s)?!1:(e&&e(n.tr.setSelection(Ye.create(n.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Ub(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function cE(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Ate=(n,e,t)=>{let i=cE(n,t);if(!i)return!1;let r=Jb(i);if(!r)return!1;let o=r.nodeAfter;if(hE(n,r,e,1))return!0;if(i.parent.content.size==0&&(Su(o,"start")||Ye.isSelectable(o))){let s=g0(n.doc,i.before(),i.after(),Re.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=n.tr.step(s);l.setSelection(Su(o,"start")?lt.findFrom(l.doc.resolve(l.mapping.map(r.pos)),1):Ye.create(l.doc,l.mapping.map(r.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&r.depth==i.depth-1?(e&&e(n.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0):!1},Ete=(n,e,t)=>{let{$head:i,empty:r}=n.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;o=Jb(i)}let s=o&&o.nodeAfter;return!s||!Ye.isSelectable(s)?!1:(e&&e(n.tr.setSelection(Ye.create(n.doc,o.pos)).scrollIntoView()),!0)};function Jb(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Ote=(n,e)=>{let t=n.selection,i=t instanceof Ye,r;if(i){if(t.node.isTextblock||!cl(n.doc,t.from))return!1;r=t.from}else if(r=m0(n.doc,t.from,-1),r==null)return!1;if(e){let o=n.tr.join(r);i&&o.setSelection(Ye.create(o.doc,r-n.doc.resolve(r).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Tte=(n,e)=>{let t=n.selection,i;if(t instanceof Ye){if(t.node.isTextblock||!cl(n.doc,t.to))return!1;i=t.to}else if(i=m0(n.doc,t.to,1),i==null)return!1;return e&&e(n.tr.join(i).scrollIntoView()),!0},Dte=(n,e)=>{let{$from:t,$to:i}=n.selection,r=t.blockRange(i),o=r&&Fu(r);return o==null?!1:(e&&e(n.tr.lift(r,o).scrollIntoView()),!0)},Pte=(n,e)=>{let{$head:t,$anchor:i}=n.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function fE(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Rte=(n,e)=>{let{$head:t,$anchor:i}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let r=t.node(-1),o=t.indexAfter(-1),s=fE(r.contentMatchAt(o));if(!s||!r.canReplaceWith(o,o,s))return!1;if(e){let l=t.after(),a=n.tr.replaceWith(l,l,s.createAndFill());a.setSelection(lt.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Nte=(n,e)=>{let t=n.selection,{$from:i,$to:r}=t;if(t instanceof mr||i.parent.inlineContent||r.parent.inlineContent)return!1;let o=fE(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,l=n.tr.insert(s,o.createAndFill());l.setSelection(nt.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},Ite=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Xa(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let i=t.blockRange(),r=i&&Fu(i);return r==null?!1:(e&&e(n.tr.lift(i,r).scrollIntoView()),!0)},Bte=(n,e)=>{let{$from:t,to:i}=n.selection,r,o=t.sharedDepth(i);return o==0?!1:(r=t.before(o),e&&e(n.tr.setSelection(Ye.create(n.doc,r))),!0)};function Lte(n,e,t){let i=e.nodeBefore,r=e.nodeAfter,o=e.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(r.isTextblock||cl(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function hE(n,e,t,i){let r=e.nodeBefore,o=e.nodeAfter,s,l,a=r.type.spec.isolating||o.type.spec.isolating;if(!a&&Lte(n,e,t))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(s=(l=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(t){let d=e.pos+o.nodeSize,p=ye.empty;for(let b=s.length-1;b>=0;b--)p=ye.from(s[b].create(null,p));p=ye.from(r.copy(p));let m=n.tr.step(new jn(e.pos-1,d,e.pos,d,new Re(p,1,0),s.length,!0)),g=m.doc.resolve(d+2*s.length);g.nodeAfter&&g.nodeAfter.type==r.type&&cl(m.doc,g.pos)&&m.join(g.pos),t(m.scrollIntoView())}return!0}let c=o.type.spec.isolating||i>0&&a?null:lt.findFrom(e,1),f=c&&c.$from.blockRange(c.$to),h=f&&Fu(f);if(h!=null&&h>=e.depth)return t&&t(n.tr.lift(f,h).scrollIntoView()),!0;if(u&&Su(o,"start",!0)&&Su(r,"end")){let d=r,p=[];for(;p.push(d),!d.isTextblock;)d=d.lastChild;let m=o,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(d.canReplace(d.childCount,d.childCount,m.content)){if(t){let b=ye.empty;for(let _=p.length-1;_>=0;_--)b=ye.from(p[_].copy(b));let y=n.tr.step(new jn(e.pos-p.length,e.pos+o.nodeSize,e.pos+g,e.pos+o.nodeSize-g,new Re(b,p.length,0),0,!0));t(y.scrollIntoView())}return!0}}return!1}function dE(n){return function(e,t){let i=e.selection,r=n<0?i.$from:i.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return r.node(o).isTextblock?(t&&t(e.tr.setSelection(nt.create(e.doc,n<0?r.start(o):r.end(o)))),!0):!1}}const Fte=dE(-1),jte=dE(1);function zte(n,e=null){return function(t,i){let{$from:r,$to:o}=t.selection,s=r.blockRange(o),l=s&&Nb(s,n,e);return l?(i&&i(t.tr.wrap(s,l).scrollIntoView()),!0):!1}}function R4(n,e=null){return function(t,i){let r=!1;for(let o=0;o<t.selection.ranges.length&&!r;o++){let{$from:{pos:s},$to:{pos:l}}=t.selection.ranges[o];t.doc.nodesBetween(s,l,(a,u)=>{if(r)return!1;if(!(!a.isTextblock||a.hasMarkup(n,e)))if(a.type==n)r=!0;else{let c=t.doc.resolve(u),f=c.index();r=c.parent.canReplaceWith(f,f+1,n)}})}if(!r)return!1;if(i){let o=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[s];o.setBlockType(l,a,n,e)}i(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Vte(n,e=null){return function(t,i){let{$from:r,$to:o}=t.selection,s=r.blockRange(o);if(!s)return!1;let l=i?t.tr:null;return Hte(l,s,n,e)?(i&&i(l.scrollIntoView()),!0):!1}}function Hte(n,e,t,i=null){let r=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new ap(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new ap(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),r=!0}let l=Nb(o,t,i,e);return l?(n&&qte(n,e,l,r,t),!0):!1}function qte(n,e,t,i,r){let o=ye.empty;for(let c=t.length-1;c>=0;c--)o=ye.from(t[c].type.create(t[c].attrs,o));n.step(new jn(e.start-(i?2:0),e.end,e.start,e.end,new Re(o,0,0),t.length,!0));let s=0;for(let c=0;c<t.length;c++)t[c].type==r&&(s=c+1);let l=t.length-s,a=e.start+t.length-(i?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,h=!0;c<f;c++,h=!1)!h&&Xa(n.doc,a,l)&&(n.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return n}function Wte(n){return function(e,t){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,s=>s.childCount>0&&s.firstChild.type==n);return o?t?i.node(o.depth-1).type==n?Ute(e,t,n,o):Jte(e,t,o):!0:!1}}function Ute(n,e,t,i){let r=n.tr,o=i.end,s=i.$to.end(i.depth);o<s&&(r.step(new jn(o-1,s,o,s,new Re(ye.from(t.create(null,i.parent.copy())),1,0),1,!0)),i=new ap(r.doc.resolve(i.$from.pos),r.doc.resolve(s),i.depth));const l=Fu(i);if(l==null)return!1;r.lift(i,l);let a=r.doc.resolve(r.mapping.map(o,-1)-1);return cl(r.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&r.join(a.pos),e(r.scrollIntoView()),!0}function Jte(n,e,t){let i=n.tr,r=t.parent;for(let d=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)d-=r.child(p).nodeSize,i.delete(d-1,d+1);let o=i.doc.resolve(t.start),s=o.nodeAfter;if(i.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,a=t.endIndex==r.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(l?0:1),c+1,s.content.append(a?ye.empty:ye.from(r))))return!1;let f=o.pos,h=f+s.nodeSize;return i.step(new jn(f-(l?1:0),h+(a?1:0),f+1,h-1,new Re((l?ye.empty:ye.from(r.copy(ye.empty))).append(a?ye.empty:ye.from(r.copy(ye.empty))),l?0:1,a?0:1),l?0:1)),e(i.scrollIntoView()),!0}function Kte(n){return function(e,t){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,u=>u.childCount>0&&u.firstChild.type==n);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=n)return!1;if(t){let u=a.lastChild&&a.lastChild.type==l.type,c=ye.from(u?n.create():null),f=new Re(ye.from(n.create(null,ye.from(l.type.create(null,c)))),u?3:1,0),h=o.start,d=o.end;t(e.tr.step(new jn(h-(u?3:1),d,h,d,f,1,!0)).scrollIntoView())}return!0}}function C0(n){const{state:e,transaction:t}=n;let{selection:i}=t,{doc:r}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return i},get doc(){return r},get tr(){return i=t.selection,r=t.doc,o=t.storedMarks,t}}}class _0{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:i}=this,{view:r}=t,{tr:o}=i,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const f=a(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:i,editor:r,state:o}=this,{view:s}=r,l=[],a=!!e,u=e||o.tr,c=()=>(!a&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),l.every(h=>h===!0)),f={...Object.fromEntries(Object.entries(i).map(([h,d])=>[h,(...m)=>{const g=this.buildProps(u,t),b=d(...m)(g);return l.push(b),f}])),run:c};return f}createCan(e){const{rawCommands:t,state:i}=this,r=!1,o=e||i.tr,s=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(t).map(([a,u])=>[a,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,r)}}buildProps(e,t=!0){const{rawCommands:i,editor:r,state:o}=this,{view:s}=r,l={tr:e,editor:r,view:s,state:C0({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(i).map(([a,u])=>[a,(...c)=>u(...c)(l)]))}};return l}}class Gte{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const i=this.callbacks[e];return i&&i.forEach(r=>r.apply(this,t)),this}off(e,t){const i=this.callbacks[e];return i&&(t?this.callbacks[e]=i.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const i=(...r)=>{this.off(e,i),t.apply(this,r)};return this.on(e,i)}removeAllListeners(){this.callbacks={}}}function qe(n,e,t){return n.config[e]===void 0&&n.parent?qe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?qe(n.parent,e,t):null}):n.config[e]}function S0(n){const e=n.filter(r=>r.type==="extension"),t=n.filter(r=>r.type==="node"),i=n.filter(r=>r.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:i}}function pE(n){const e=[],{nodeExtensions:t,markExtensions:i}=S0(n),r=[...t,...i],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:r},a=qe(s,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([h,d])=>{e.push({type:f,name:h,attribute:{...o,...d}})})})})}),r.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=qe(s,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,f])=>{const h={...o,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:s.name,name:c,attribute:h})})}),e}function Hn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function vi(...n){return n.filter(e=>!!e).reduce((e,t)=>{const i={...e};return Object.entries(t).forEach(([r,o])=>{if(!i[r]){i[r]=o;return}if(r==="class"){const l=o?String(o).split(" "):[],a=i[r]?i[r].split(" "):[],u=l.filter(c=>!a.includes(c));i[r]=[...a,...u].join(" ")}else if(r==="style"){const l=o?o.split(";").map(c=>c.trim()).filter(Boolean):[],a=i[r]?i[r].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;a.forEach(c=>{const[f,h]=c.split(":").map(d=>d.trim());u.set(f,h)}),l.forEach(c=>{const[f,h]=c.split(":").map(d=>d.trim());u.set(f,h)}),i[r]=Array.from(u.entries()).map(([c,f])=>`${c}: ${f}`).join("; ")}else i[r]=o}),i},{})}function Jg(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,i)=>vi(t,i),{})}function mE(n){return typeof n=="function"}function pt(n,e=void 0,...t){return mE(n)?e?n.bind(e)(...t):n(...t):n}function Qte(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Xte(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function N4(n,e){return"style"in n?n:{...n,getAttrs:t=>{const i=n.getAttrs?n.getAttrs(t):n.attrs;if(i===!1)return!1;const r=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(t):Xte(t.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...i,...r}}}}function I4(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Qte(t)?!1:t!=null))}function Yte(n,e){var t;const i=pE(n),{nodeExtensions:r,markExtensions:o}=S0(n),s=(t=r.find(u=>qe(u,"topNode")))===null||t===void 0?void 0:t.name,l=Object.fromEntries(r.map(u=>{const c=i.filter(b=>b.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},h=n.reduce((b,y)=>{const _=qe(y,"extendNodeSchema",f);return{...b,..._?_(u):{}}},{}),d=I4({...h,content:pt(qe(u,"content",f)),marks:pt(qe(u,"marks",f)),group:pt(qe(u,"group",f)),inline:pt(qe(u,"inline",f)),atom:pt(qe(u,"atom",f)),selectable:pt(qe(u,"selectable",f)),draggable:pt(qe(u,"draggable",f)),code:pt(qe(u,"code",f)),whitespace:pt(qe(u,"whitespace",f)),linebreakReplacement:pt(qe(u,"linebreakReplacement",f)),defining:pt(qe(u,"defining",f)),isolating:pt(qe(u,"isolating",f)),attrs:Object.fromEntries(c.map(b=>{var y;return[b.name,{default:(y=b==null?void 0:b.attribute)===null||y===void 0?void 0:y.default}]}))}),p=pt(qe(u,"parseHTML",f));p&&(d.parseDOM=p.map(b=>N4(b,c)));const m=qe(u,"renderHTML",f);m&&(d.toDOM=b=>m({node:b,HTMLAttributes:Jg(b,c)}));const g=qe(u,"renderText",f);return g&&(d.toText=g),[u.name,d]})),a=Object.fromEntries(o.map(u=>{const c=i.filter(g=>g.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},h=n.reduce((g,b)=>{const y=qe(b,"extendMarkSchema",f);return{...g,...y?y(u):{}}},{}),d=I4({...h,inclusive:pt(qe(u,"inclusive",f)),excludes:pt(qe(u,"excludes",f)),group:pt(qe(u,"group",f)),spanning:pt(qe(u,"spanning",f)),code:pt(qe(u,"code",f)),attrs:Object.fromEntries(c.map(g=>{var b;return[g.name,{default:(b=g==null?void 0:g.attribute)===null||b===void 0?void 0:b.default}]}))}),p=pt(qe(u,"parseHTML",f));p&&(d.parseDOM=p.map(g=>N4(g,c)));const m=qe(u,"renderHTML",f);return m&&(d.toDOM=g=>m({mark:g,HTMLAttributes:Jg(g,c)})),[u.name,d]}));return new Db({topNode:s,nodes:l,marks:a})}function Fm(n,e){return e.nodes[n]||e.marks[n]||null}function B4(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function zf(n,e){const t=ua.fromSchema(e).serializeFragment(n),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(t),r.innerHTML}const Zte=(n,e=500)=>{let t="";const i=n.parentOffset;return n.parent.nodesBetween(Math.max(0,i-e),i,(r,o,s,l)=>{var a,u;const c=((u=(a=r.type.spec).toText)===null||u===void 0?void 0:u.call(a,{node:r,pos:o,parent:s,index:l}))||r.textContent||"%leaf%";t+=r.isAtom&&!r.isText?c:c.slice(0,Math.max(0,i-o))}),t};function Kb(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class v0{constructor(e){this.find=e.find,this.handler=e.handler}}const $te=(n,e)=>{if(Kb(e))return e.exec(n);const t=e(n);if(!t)return null;const i=[t.text];return i.index=t.index,i.input=n,i.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(t.replaceWith)),i};function jh(n){var e;const{editor:t,from:i,to:r,text:o,rules:s,plugin:l}=n,{view:a}=t;if(a.composing)return!1;const u=a.state.doc.resolve(i);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let c=!1;const f=Zte(u)+o;return s.forEach(h=>{if(c)return;const d=$te(f,h.find);if(!d)return;const p=a.state.tr,m=C0({state:a.state,transaction:p}),g={from:i-(d[0].length-o.length),to:r},{commands:b,chain:y,can:_}=new _0({editor:t,state:m});h.handler({state:m,range:g,match:d,commands:b,chain:y,can:_})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:i,to:r,text:o}),a.dispatch(p),c=!0)}),c}function ene(n){const{editor:e,rules:t}=n,i=new xi({state:{init(){return null},apply(r,o,s){const l=r.getMeta(i);if(l)return l;const a=r.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:c}=a;typeof c=="string"?c=c:c=zf(ye.from(c),s.schema);const{from:f}=a,h=f+c.length;jh({editor:e,from:f,to:h,text:c,rules:t,plugin:i})}),r.selectionSet||r.docChanged?null:o}},props:{handleTextInput(r,o,s,l){return jh({editor:e,from:o,to:s,text:l,rules:t,plugin:i})},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:o}=r.state.selection;o&&jh({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:i})}),!1)},handleKeyDown(r,o){if(o.key!=="Enter")return!1;const{$cursor:s}=r.state.selection;return s?jh({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:i}):!1}},isInputRules:!0});return i}function tne(n){return Object.prototype.toString.call(n).slice(8,-1)}function zh(n){return tne(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function x0(n,e){const t={...n};return zh(n)&&zh(e)&&Object.keys(e).forEach(i=>{zh(e[i])&&zh(n[i])?t[i]=x0(n[i],e[i]):t[i]=e[i]}),t}class Ni{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pt(qe(this,"addOptions",{name:this.name}))),this.storage=pt(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ni(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>x0(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ni(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=pt(qe(t,"addOptions",{name:t.name})),t.storage=pt(qe(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:i}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const s=r.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===t.name))return!1;const a=s.find(u=>(u==null?void 0:u.type.name)===t.name);return a&&i.removeStoredMark(a),i.insertText(" ",r.pos),e.view.dispatch(i),!0}return!1}}function nne(n){return typeof n=="number"}class ine{constructor(e){this.find=e.find,this.handler=e.handler}}const rne=(n,e,t)=>{if(Kb(e))return[...n.matchAll(e)];const i=e(n,t);return i?i.map(r=>{const o=[r.text];return o.index=r.index,o.input=n,o.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(r.replaceWith)),o}):[]};function one(n){const{editor:e,state:t,from:i,to:r,rule:o,pasteEvent:s,dropEvent:l}=n,{commands:a,chain:u,can:c}=new _0({editor:e,state:t}),f=[];return t.doc.nodesBetween(i,r,(d,p)=>{if(!d.isTextblock||d.type.spec.code)return;const m=Math.max(i,p),g=Math.min(r,p+d.content.size),b=d.textBetween(m-p,g-p,void 0,"");rne(b,o.find,s).forEach(_=>{if(_.index===void 0)return;const M=m+_.index+1,w=M+_[0].length,S={from:t.tr.mapping.map(M),to:t.tr.mapping.map(w)},E=o.handler({state:t,range:S,match:_,commands:a,chain:u,can:c,pasteEvent:s,dropEvent:l});f.push(E)})}),f.every(d=>d!==null)}let Vh=null;const sne=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function lne(n){const{editor:e,rules:t}=n;let i=null,r=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:c,from:f,to:h,rule:d,pasteEvt:p})=>{const m=c.tr,g=C0({state:c,transaction:m});if(!(!one({editor:e,state:g,from:Math.max(f-1,0),to:h.b-1,rule:d,pasteEvent:p,dropEvent:l})||!m.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return t.map(c=>new xi({view(f){const h=p=>{var m;i=!((m=f.dom.parentElement)===null||m===void 0)&&m.contains(p.target)?f.dom.parentElement:null,i&&(Vh=e)},d=()=>{Vh&&(Vh=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",d),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",d)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(o=i===f.dom.parentElement,l=h,!o){const d=Vh;d&&setTimeout(()=>{const p=d.state.selection;p&&d.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(f,h)=>{var d;const p=(d=h.clipboardData)===null||d===void 0?void 0:d.getData("text/html");return s=h,r=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,d)=>{const p=f[0],m=p.getMeta("uiEvent")==="paste"&&!r,g=p.getMeta("uiEvent")==="drop"&&!o,b=p.getMeta("applyPasteRules"),y=!!b;if(!m&&!g&&!y)return;if(y){let{text:w}=b;typeof w=="string"?w=w:w=zf(ye.from(w),d.schema);const{from:S}=b,E=S+w.length,I=sne(w);return a({rule:c,state:d,from:S,to:{b:E},pasteEvt:I})}const _=h.doc.content.findDiffStart(d.doc.content),M=h.doc.content.findDiffEnd(d.doc.content);if(!(!nne(_)||!M||_===M.b))return a({rule:c,state:d,from:_,to:M,pasteEvt:s})}}))}function ane(n){const e=n.filter((t,i)=>n.indexOf(t)!==i);return Array.from(new Set(e))}class La{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=La.resolve(e),this.schema=Yte(this.extensions,t),this.setupExtensions()}static resolve(e){const t=La.sort(La.flatten(e)),i=ane(t.map(r=>r.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const i={name:t.name,options:t.options,storage:t.storage},r=qe(t,"addExtensions",i);return r?[t,...this.flatten(r())]:t}).flat(10)}static sort(e){return e.sort((i,r)=>{const o=qe(i,"priority")||100,s=qe(r,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const i={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Fm(t.name,this.schema)},r=qe(t,"addCommands",i);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this,t=La.sort([...this.extensions].reverse()),i=[],r=[],o=t.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Fm(s.name,this.schema)},a=[],u=qe(s,"addKeyboardShortcuts",l);let c={};if(s.type==="mark"&&qe(s,"exitable",l)&&(c.ArrowRight=()=>Ni.handleExit({editor:e,mark:s})),u){const m=Object.fromEntries(Object.entries(u()).map(([g,b])=>[g,()=>b({editor:e})]));c={...c,...m}}const f=Cte(c);a.push(f);const h=qe(s,"addInputRules",l);B4(s,e.options.enableInputRules)&&h&&i.push(...h());const d=qe(s,"addPasteRules",l);B4(s,e.options.enablePasteRules)&&d&&r.push(...d());const p=qe(s,"addProseMirrorPlugins",l);if(p){const m=p();a.push(...m)}return a}).flat();return[ene({editor:e,rules:i}),...lne({editor:e,rules:r}),...o]}get attributes(){return pE(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=S0(this.extensions);return Object.fromEntries(t.filter(i=>!!qe(i,"addNodeView")).map(i=>{const r=this.attributes.filter(a=>a.type===i.name),o={name:i.name,options:i.options,storage:i.storage,editor:e,type:Hn(i.name,this.schema)},s=qe(i,"addNodeView",o);if(!s)return[];const l=(a,u,c,f,h)=>{const d=Jg(a,r);return s()({node:a,view:u,getPos:c,decorations:f,innerDecorations:h,editor:e,extension:i,HTMLAttributes:d})};return[i.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const i={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Fm(e.name,this.schema)};e.type==="mark"&&(!((t=pt(qe(e,"keepOnSplit",i)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const r=qe(e,"onBeforeCreate",i),o=qe(e,"onCreate",i),s=qe(e,"onUpdate",i),l=qe(e,"onSelectionUpdate",i),a=qe(e,"onTransaction",i),u=qe(e,"onFocus",i),c=qe(e,"onBlur",i),f=qe(e,"onDestroy",i);r&&this.editor.on("beforeCreate",r),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),f&&this.editor.on("destroy",f)})}}class qn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pt(qe(this,"addOptions",{name:this.name}))),this.storage=pt(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new qn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>x0(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new qn({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=pt(qe(t,"addOptions",{name:t.name})),t.storage=pt(qe(t,"addStorage",{name:t.name,options:t.options})),t}}function gE(n,e,t){const{from:i,to:r}=e,{blockSeparator:o=`

`,textSerializers:s={}}=t||{};let l="";return n.nodesBetween(i,r,(a,u,c,f)=>{var h;a.isBlock&&u>i&&(l+=o);const d=s==null?void 0:s[a.type.name];if(d)return c&&(l+=d({node:a,pos:u,parent:c,index:f,range:e})),!1;a.isText&&(l+=(h=a==null?void 0:a.text)===null||h===void 0?void 0:h.slice(Math.max(i,u)-u,r-u))}),l}function bE(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const yE=qn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new xi({key:new Gr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:i,selection:r}=e,{ranges:o}=r,s=Math.min(...o.map(c=>c.$from.pos)),l=Math.max(...o.map(c=>c.$to.pos)),a=bE(t);return gE(i,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),une=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),cne=(n=!1)=>({commands:e})=>e.setContent("",n),fne=()=>({state:n,tr:e,dispatch:t})=>{const{selection:i}=e,{ranges:r}=i;return t&&r.forEach(({$from:o,$to:s})=>{n.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(a)),h=u.resolve(c.map(a+l.nodeSize)),d=f.blockRange(h);if(!d)return;const p=Fu(d);if(l.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(d.start,m)}(p||p===0)&&e.lift(d,p)})}),!0},hne=n=>e=>n(e),dne=()=>({state:n,dispatch:e})=>Nte(n,e),pne=(n,e)=>({editor:t,tr:i})=>{const{state:r}=t,o=r.doc.slice(n.from,n.to);i.deleteRange(n.from,n.to);const s=i.mapping.map(e);return i.insert(s,o.content),i.setSelection(new nt(i.doc.resolve(s-1))),!0},mne=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,i=t.$anchor.node();if(i.content.size>0)return!1;const r=n.selection.$anchor;for(let o=r.depth;o>0;o-=1)if(r.node(o).type===i.type){if(e){const l=r.before(o),a=r.after(o);n.delete(l,a).scrollIntoView()}return!0}return!1},gne=n=>({tr:e,state:t,dispatch:i})=>{const r=Hn(n,t.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r){if(i){const a=o.before(s),u=o.after(s);e.delete(a,u).scrollIntoView()}return!0}return!1},bne=n=>({tr:e,dispatch:t})=>{const{from:i,to:r}=n;return t&&e.delete(i,r),!0},yne=()=>({state:n,dispatch:e})=>_te(n,e),kne=()=>({commands:n})=>n.keyboardShortcut("Enter"),wne=()=>({state:n,dispatch:e})=>Rte(n,e);function mp(n,e,t={strict:!0}){const i=Object.keys(e);return i.length?i.every(r=>t.strict?e[r]===n[r]:Kb(e[r])?e[r].test(n[r]):e[r]===n[r]):!0}function kE(n,e,t={}){return n.find(i=>i.type===e&&mp(Object.fromEntries(Object.keys(t).map(r=>[r,i.attrs[r]])),t))}function L4(n,e,t={}){return!!kE(n,e,t)}function Gb(n,e,t){var i;if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if((!r.node||!r.node.marks.some(c=>c.type===e))&&(r=n.parent.childBefore(n.parentOffset)),!r.node||!r.node.marks.some(c=>c.type===e)||(t=t||((i=r.node.marks[0])===null||i===void 0?void 0:i.attrs),!kE([...r.node.marks],e,t)))return;let s=r.index,l=n.start()+r.offset,a=s+1,u=l+r.node.nodeSize;for(;s>0&&L4([...n.parent.child(s-1).marks],e,t);)s-=1,l-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&L4([...n.parent.child(a).marks],e,t);)u+=n.parent.child(a).nodeSize,a+=1;return{from:l,to:u}}function hl(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Cne=(n,e={})=>({tr:t,state:i,dispatch:r})=>{const o=hl(n,i.schema),{doc:s,selection:l}=t,{$from:a,from:u,to:c}=l;if(r){const f=Gb(a,o,e);if(f&&f.from<=u&&f.to>=c){const h=nt.create(s,f.from,f.to);t.setSelection(h)}}return!0},_ne=n=>e=>{const t=typeof n=="function"?n(e):n;for(let i=0;i<t.length;i+=1)if(t[i](e))return!0;return!1};function wE(n){return n instanceof nt}function Ko(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function CE(n,e=null){if(!e)return null;const t=lt.atStart(n),i=lt.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return i;const r=t.from,o=i.to;return e==="all"?nt.create(n,Ko(0,r,o),Ko(n.content.size,r,o)):nt.create(n,Ko(e,r,o),Ko(e,r,o))}function Sne(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Qb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const vne=(n=null,e={})=>({editor:t,view:i,tr:r,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(Qb()||Sne())&&i.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(i.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(i.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!wE(t.state.selection))return s(),!0;const l=CE(r.doc,n)||t.state.selection,a=t.state.selection.eq(l);return o&&(a||r.setSelection(l),a&&r.storedMarks&&r.setStoredMarks(r.storedMarks),s()),!0},xne=(n,e)=>t=>n.every((i,r)=>e(i,{...t,index:r})),Mne=(n,e)=>({tr:t,commands:i})=>i.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),_E=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const i=e[t];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?n.removeChild(i):i.nodeType===1&&_E(i)}return n};function Hh(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return _E(t)}function ff(n,e,t){if(n instanceof Hs||n instanceof ye)return n;t={slice:!0,parseOptions:{},...t};const i=typeof n=="object"&&n!==null,r=typeof n=="string";if(i)try{if(Array.isArray(n)&&n.length>0)return ye.fromArray(n.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(n);return t.errorOnInvalidContent&&s.check(),s}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),ff("",e,t)}if(r){if(t.errorOnInvalidContent){let s=!1,l="";const a=new Db({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(t.slice?Yo.fromSchema(a).parseSlice(Hh(n),t.parseOptions):Yo.fromSchema(a).parse(Hh(n),t.parseOptions),t.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=Yo.fromSchema(e);return t.slice?o.parseSlice(Hh(n),t.parseOptions).content:o.parse(Hh(n),t.parseOptions)}return ff("",e,t)}function Ane(n,e,t){const i=n.steps.length-1;if(i<e)return;const r=n.steps[i];if(!(r instanceof Ln||r instanceof jn))return;const o=n.mapping.maps[i];let s=0;o.forEach((l,a,u,c)=>{s===0&&(s=c)}),n.setSelection(lt.near(n.doc.resolve(s),t))}const Ene=n=>!("type"in n),One=(n,e,t)=>({tr:i,dispatch:r,editor:o})=>{var s;if(r){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let l;const a=g=>{o.emit("contentError",{editor:o,error:g,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{ff(e,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(g){a(g)}try{l=ff(e,o.schema,{parseOptions:u,errorOnInvalidContent:(s=t.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(g){return a(g),!1}let{from:c,to:f}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},h=!0,d=!0;if((Ene(l)?l:[l]).forEach(g=>{g.check(),h=h?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),c===f&&d){const{parent:g}=i.doc.resolve(c);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(c-=1,f+=1)}let m;if(h){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof ye){let g="";e.forEach(b=>{b.text&&(g+=b.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;i.insertText(m,c,f)}else m=l,i.replaceWith(c,f,m);t.updateSelection&&Ane(i,i.steps.length-1,-1),t.applyInputRules&&i.setMeta("applyInputRules",{from:c,text:m}),t.applyPasteRules&&i.setMeta("applyPasteRules",{from:c,text:m})}return!0},Tne=()=>({state:n,dispatch:e})=>Ote(n,e),Dne=()=>({state:n,dispatch:e})=>Tte(n,e),Pne=()=>({state:n,dispatch:e})=>Ste(n,e),Rne=()=>({state:n,dispatch:e})=>Ate(n,e),Nne=()=>({state:n,dispatch:e,tr:t})=>{try{const i=m0(n.doc,n.selection.$from.pos,-1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},Ine=()=>({state:n,dispatch:e,tr:t})=>{try{const i=m0(n.doc,n.selection.$from.pos,1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},Bne=()=>({state:n,dispatch:e})=>vte(n,e),Lne=()=>({state:n,dispatch:e})=>xte(n,e);function SE(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Fne(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let i,r,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Qb()||SE()?s=!0:r=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return i&&(t=`Alt-${t}`),r&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const jne=n=>({editor:e,view:t,tr:i,dispatch:r})=>{const o=Fne(n).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,l))});return a==null||a.steps.forEach(u=>{const c=u.map(i.mapping);c&&r&&i.maybeStep(c)}),!0};function hf(n,e,t={}){const{from:i,to:r,empty:o}=n.selection,s=e?Hn(e,n.schema):null,l=[];n.doc.nodesBetween(i,r,(f,h)=>{if(f.isText)return;const d=Math.max(i,h),p=Math.min(r,h+f.nodeSize);l.push({node:f,from:d,to:p})});const a=r-i,u=l.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>mp(f.node.attrs,t,{strict:!1}));return o?!!u.length:u.reduce((f,h)=>f+h.to-h.from,0)>=a}const zne=(n,e={})=>({state:t,dispatch:i})=>{const r=Hn(n,t.schema);return hf(t,r,e)?Dte(t,i):!1},Vne=()=>({state:n,dispatch:e})=>Ite(n,e),Hne=n=>({state:e,dispatch:t})=>{const i=Hn(n,e.schema);return Wte(i)(e,t)},qne=()=>({state:n,dispatch:e})=>Pte(n,e);function M0(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function F4(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((i,r)=>(t.includes(r)||(i[r]=n[r]),i),{})}const Wne=(n,e)=>({tr:t,state:i,dispatch:r})=>{let o=null,s=null;const l=M0(typeof n=="string"?n:n.name,i.schema);return l?(l==="node"&&(o=Hn(n,i.schema)),l==="mark"&&(s=hl(n,i.schema)),r&&t.selection.ranges.forEach(a=>{i.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{o&&o===u.type&&t.setNodeMarkup(c,void 0,F4(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&t.addMark(c,c+u.nodeSize,s.create(F4(f.attrs,e)))})})}),!0):!1},Une=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Jne=()=>({tr:n,dispatch:e})=>{if(e){const t=new mr(n.doc);n.setSelection(t)}return!0},Kne=()=>({state:n,dispatch:e})=>Mte(n,e),Gne=()=>({state:n,dispatch:e})=>Ete(n,e),Qne=()=>({state:n,dispatch:e})=>Bte(n,e),Xne=()=>({state:n,dispatch:e})=>jte(n,e),Yne=()=>({state:n,dispatch:e})=>Fte(n,e);function Kg(n,e,t={},i={}){return ff(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:i.errorOnInvalidContent})}const Zne=(n,e=!1,t={},i={})=>({editor:r,tr:o,dispatch:s,commands:l})=>{var a,u;const{doc:c}=o;if(t.preserveWhitespace!=="full"){const f=Kg(n,r.schema,t,{errorOnInvalidContent:(a=i.errorOnInvalidContent)!==null&&a!==void 0?a:r.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:c.content.size},n,{parseOptions:t,errorOnInvalidContent:(u=i.errorOnInvalidContent)!==null&&u!==void 0?u:r.options.enableContentCheck})};function vE(n,e){const t=hl(e,n.schema),{from:i,to:r,empty:o}=n.selection,s=[];o?(n.storedMarks&&s.push(...n.storedMarks),s.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,r,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===t.name);return l?{...l.attrs}:{}}function Kae(n,e){const t=new vA(n);return e.forEach(i=>{i.steps.forEach(r=>{t.step(r)})}),t}function $ne(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Gae(n,e,t){const i=[];return n.nodesBetween(e.from,e.to,(r,o)=>{t(r)&&i.push({node:r,pos:o})}),i}function eie(n,e){for(let t=n.depth;t>0;t-=1){const i=n.node(t);if(e(i))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:i}}}function Xb(n){return e=>eie(e.$from,n)}function tie(n,e){const t={from:0,to:n.content.size};return gE(n,t,e)}function nie(n,e){const t=Hn(e,n.schema),{from:i,to:r}=n.selection,o=[];n.doc.nodesBetween(i,r,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===t.name);return s?{...s.attrs}:{}}function iie(n,e){const t=M0(typeof e=="string"?e:e.name,n.schema);return t==="node"?nie(n,e):t==="mark"?vE(n,e):{}}function rie(n,e=JSON.stringify){const t={};return n.filter(i=>{const r=e(i);return Object.prototype.hasOwnProperty.call(t,r)?!1:t[r]=!0})}function oie(n){const e=rie(n);return e.length===1?e:e.filter((t,i)=>!e.filter((o,s)=>s!==i).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Qae(n){const{mapping:e,steps:t}=n,i=[];return e.maps.forEach((r,o)=>{const s=[];if(r.ranges.length)r.forEach((l,a)=>{s.push({from:l,to:a})});else{const{from:l,to:a}=t[o];if(l===void 0||a===void 0)return;s.push({from:l,to:a})}s.forEach(({from:l,to:a})=>{const u=e.slice(o).map(l,-1),c=e.slice(o).map(a),f=e.invert().map(u,-1),h=e.invert().map(c);i.push({oldRange:{from:f,to:h},newRange:{from:u,to:c}})})}),oie(i)}function xE(n,e,t){const i=[];return n===e?t.resolve(n).marks().forEach(r=>{const o=t.resolve(n),s=Gb(o,r.type);s&&i.push({mark:r,...s})}):t.nodesBetween(n,e,(r,o)=>{!r||(r==null?void 0:r.nodeSize)===void 0||i.push(...r.marks.map(s=>({from:o,to:o+r.nodeSize,mark:s})))}),i}function cd(n,e,t){return Object.fromEntries(Object.entries(t).filter(([i])=>{const r=n.find(o=>o.type===e&&o.name===i);return r?r.attribute.keepOnSplit:!1}))}function Gg(n,e,t={}){const{empty:i,ranges:r}=n.selection,o=e?hl(e,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>mp(f.attrs,t,{strict:!1}));let s=0;const l=[];if(r.forEach(({$from:f,$to:h})=>{const d=f.pos,p=h.pos;n.doc.nodesBetween(d,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const b=Math.max(d,g),y=Math.min(p,g+m.nodeSize),_=y-b;s+=_,l.push(...m.marks.map(M=>({mark:M,from:b,to:y})))})}),s===0)return!1;const a=l.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>mp(f.mark.attrs,t,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),u=l.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,h)=>f+h.to-h.from,0);return(a>0?a+u:a)>=s}function sie(n,e,t={}){if(!e)return hf(n,null,t)||Gg(n,null,t);const i=M0(e,n.schema);return i==="node"?hf(n,e,t):i==="mark"?Gg(n,e,t):!1}function j4(n,e){const{nodeExtensions:t}=S0(e),i=t.find(s=>s.name===n);if(!i)return!1;const r={name:i.name,options:i.options,storage:i.storage},o=pt(qe(i,"group",r));return typeof o!="string"?!1:o.split(" ").includes("list")}function Yb(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var i;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((i=n.text)!==null&&i!==void 0?i:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let r=!0;return n.content.forEach(o=>{r!==!1&&(Yb(o,{ignoreWhitespace:t,checkChildren:e})||(r=!1))}),r}return!1}function lie(n){return n instanceof Ye}function Xae(n,e,t){const r=n.state.doc.content.size,o=Ko(e,0,r),s=Ko(t,0,r),l=n.coordsAtPos(o),a=n.coordsAtPos(s,-1),u=Math.min(l.top,a.top),c=Math.max(l.bottom,a.bottom),f=Math.min(l.left,a.left),h=Math.max(l.right,a.right),d=h-f,p=c-u,b={top:u,bottom:c,left:f,right:h,width:d,height:p,x:f,y:u};return{...b,toJSON:()=>b}}function aie(n,e,t){var i;const{selection:r}=e;let o=null;if(wE(r)&&(o=r.$cursor),o){const l=(i=n.storedMarks)!==null&&i!==void 0?i:o.marks();return!!t.isInSet(l)||!l.some(a=>a.type.excludes(t))}const{ranges:s}=r;return s.some(({$from:l,$to:a})=>{let u=l.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(l.pos,a.pos,(c,f,h)=>{if(u)return!1;if(c.isInline){const d=!h||h.type.allowsMarkType(t),p=!!t.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(t));u=d&&p}return!u}),u})}const uie=(n,e={})=>({tr:t,state:i,dispatch:r})=>{const{selection:o}=t,{empty:s,ranges:l}=o,a=hl(n,i.schema);if(r)if(s){const u=vE(i,a);t.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;i.doc.nodesBetween(c,f,(h,d)=>{const p=Math.max(d,c),m=Math.min(d+h.nodeSize,f);h.marks.find(b=>b.type===a)?h.marks.forEach(b=>{a===b.type&&t.addMark(p,m,a.create({...b.attrs,...e}))}):t.addMark(p,m,a.create(e))})});return aie(i,t,a)},cie=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),fie=(n,e={})=>({state:t,dispatch:i,chain:r})=>{const o=Hn(n,t.schema);let s;return t.selection.$anchor.sameParent(t.selection.$head)&&(s=t.selection.$anchor.parent.attrs),o.isTextblock?r().command(({commands:l})=>R4(o,{...s,...e})(t)?!0:l.clearNodes()).command(({state:l})=>R4(o,{...s,...e})(l,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},hie=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,r=Ko(n,0,i.content.size),o=Ye.create(i,r);e.setSelection(o)}return!0},die=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,{from:r,to:o}=typeof n=="number"?{from:n,to:n}:n,s=nt.atStart(i).from,l=nt.atEnd(i).to,a=Ko(r,s,l),u=Ko(o,s,l),c=nt.create(i,a,u);e.setSelection(c)}return!0},pie=n=>({state:e,dispatch:t})=>{const i=Hn(n,e.schema);return Kte(i)(e,t)};function z4(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const i=t.filter(r=>e==null?void 0:e.includes(r.type.name));n.tr.ensureMarks(i)}}const mie=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:i,editor:r})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,u=r.extensionManager.attributes,c=cd(u,l.node().type.name,l.node().attrs);if(o instanceof Ye&&o.node.isBlock)return!l.parentOffset||!Xa(s,l.pos)?!1:(i&&(n&&z4(t,r.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=a.parentOffset===a.parent.content.size,h=l.depth===0?void 0:$ne(l.node(-1).contentMatchAt(l.indexAfter(-1)));let d=f&&h?[{type:h,attrs:c}]:void 0,p=Xa(e.doc,e.mapping.map(l.pos),1,d);if(!d&&!p&&Xa(e.doc,e.mapping.map(l.pos),1,h?[{type:h}]:void 0)&&(p=!0,d=h?[{type:h,attrs:c}]:void 0),i){if(p&&(o instanceof nt&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,d),h&&!f&&!l.parentOffset&&l.parent.type!==h)){const m=e.mapping.map(l.before()),g=e.doc.resolve(m);l.node(-1).canReplaceWith(g.index(),g.index()+1,h)&&e.setNodeMarkup(e.mapping.map(l.before()),h)}n&&z4(t,r.extensionManager.splittableMarks),e.scrollIntoView()}return p},gie=(n,e={})=>({tr:t,state:i,dispatch:r,editor:o})=>{var s;const l=Hn(n,i.schema),{$from:a,$to:u}=i.selection,c=i.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(u))return!1;const f=a.node(-1);if(f.type!==l)return!1;const h=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let b=ye.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let I=a.depth-y;I>=a.depth-3;I-=1)b=ye.from(a.node(I).copy(b));const _=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,M={...cd(h,a.node().type.name,a.node().attrs),...e},w=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(M))||void 0;b=b.append(ye.from(l.createAndFill(null,w)||void 0));const S=a.before(a.depth-(y-1));t.replace(S,a.after(-_),new Re(b,4-y,0));let E=-1;t.doc.nodesBetween(S,t.doc.content.size,(I,O)=>{if(E>-1)return!1;I.isTextblock&&I.content.size===0&&(E=O+1)}),E>-1&&t.setSelection(nt.near(t.doc.resolve(E))),t.scrollIntoView()}return!0}const d=u.pos===a.end()?f.contentMatchAt(0).defaultType:null,p={...cd(h,f.type.name,f.attrs),...e},m={...cd(h,a.node().type.name,a.node().attrs),...e};t.delete(a.pos,u.pos);const g=d?[{type:l,attrs:p},{type:d,attrs:m}]:[{type:l,attrs:p}];if(!Xa(t.doc,a.pos,2))return!1;if(r){const{selection:b,storedMarks:y}=i,{splittableMarks:_}=o.extensionManager,M=y||b.$to.parentOffset&&b.$from.marks();if(t.split(a.pos,2,g).scrollIntoView(),!M||!r)return!0;const w=M.filter(S=>_.includes(S.type.name));t.ensureMarks(w)}return!0},jm=(n,e)=>{const t=Xb(s=>s.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return t.node.type===(r==null?void 0:r.type)&&cl(n.doc,t.pos)&&n.join(t.pos),!0},zm=(n,e)=>{const t=Xb(s=>s.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(t.start).after(t.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return t.node.type===(r==null?void 0:r.type)&&cl(n.doc,i)&&n.join(i),!0},bie=(n,e,t,i={})=>({editor:r,tr:o,state:s,dispatch:l,chain:a,commands:u,can:c})=>{const{extensions:f,splittableMarks:h}=r.extensionManager,d=Hn(n,s.schema),p=Hn(e,s.schema),{selection:m,storedMarks:g}=s,{$from:b,$to:y}=m,_=b.blockRange(y),M=g||m.$to.parentOffset&&m.$from.marks();if(!_)return!1;const w=Xb(S=>j4(S.type.name,f))(m);if(_.depth>=1&&w&&_.depth-w.depth<=1){if(w.node.type===d)return u.liftListItem(p);if(j4(w.node.type.name,f)&&d.validContent(w.node.content)&&l)return a().command(()=>(o.setNodeMarkup(w.pos,d),!0)).command(()=>jm(o,d)).command(()=>zm(o,d)).run()}return!t||!M||!l?a().command(()=>c().wrapInList(d,i)?!0:u.clearNodes()).wrapInList(d,i).command(()=>jm(o,d)).command(()=>zm(o,d)).run():a().command(()=>{const S=c().wrapInList(d,i),E=M.filter(I=>h.includes(I.type.name));return o.ensureMarks(E),S?!0:u.clearNodes()}).wrapInList(d,i).command(()=>jm(o,d)).command(()=>zm(o,d)).run()},yie=(n,e={},t={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:o=!1}=t,s=hl(n,i.schema);return Gg(i,s,e)?r.unsetMark(s,{extendEmptyMarkRange:o}):r.setMark(s,e)},kie=(n,e,t={})=>({state:i,commands:r})=>{const o=Hn(n,i.schema),s=Hn(e,i.schema),l=hf(i,o,t);let a;return i.selection.$anchor.sameParent(i.selection.$head)&&(a=i.selection.$anchor.parent.attrs),l?r.setNode(s,a):r.setNode(o,{...a,...t})},wie=(n,e={})=>({state:t,commands:i})=>{const r=Hn(n,t.schema);return hf(t,r,e)?i.lift(r):i.wrapIn(r,e)},Cie=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let i=0;i<t.length;i+=1){const r=t[i];let o;if(r.spec.isInputRules&&(o=r.getState(n))){if(e){const s=n.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,n.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},_ie=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:i,ranges:r}=t;return i||e&&r.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},Sie=(n,e={})=>({tr:t,state:i,dispatch:r})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=t,a=hl(n,i.schema),{$from:u,empty:c,ranges:f}=l;if(!r)return!0;if(c&&s){let{from:h,to:d}=l;const p=(o=u.marks().find(g=>g.type===a))===null||o===void 0?void 0:o.attrs,m=Gb(u,a,p);m&&(h=m.from,d=m.to),t.removeMark(h,d,a)}else f.forEach(h=>{t.removeMark(h.$from.pos,h.$to.pos,a)});return t.removeStoredMark(a),!0},vie=(n,e={})=>({tr:t,state:i,dispatch:r})=>{let o=null,s=null;const l=M0(typeof n=="string"?n:n.name,i.schema);return l?(l==="node"&&(o=Hn(n,i.schema)),l==="mark"&&(s=hl(n,i.schema)),r&&t.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;let f,h,d,p;t.selection.empty?i.doc.nodesBetween(u,c,(m,g)=>{o&&o===m.type&&(d=Math.max(g,u),p=Math.min(g+m.nodeSize,c),f=g,h=m)}):i.doc.nodesBetween(u,c,(m,g)=>{g<u&&o&&o===m.type&&(d=Math.max(g,u),p=Math.min(g+m.nodeSize,c),f=g,h=m),g>=u&&g<=c&&(o&&o===m.type&&t.setNodeMarkup(g,void 0,{...m.attrs,...e}),s&&m.marks.length&&m.marks.forEach(b=>{if(s===b.type){const y=Math.max(g,u),_=Math.min(g+m.nodeSize,c);t.addMark(y,_,s.create({...b.attrs,...e}))}}))}),h&&(f!==void 0&&t.setNodeMarkup(f,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(m=>{s===m.type&&t.addMark(d,p,s.create({...m.attrs,...e}))}))}),!0):!1},xie=(n,e={})=>({state:t,dispatch:i})=>{const r=Hn(n,t.schema);return zte(r,e)(t,i)},Mie=(n,e={})=>({state:t,dispatch:i})=>{const r=Hn(n,t.schema);return Vte(r,e)(t,i)};var Aie=Object.freeze({__proto__:null,blur:une,clearContent:cne,clearNodes:fne,command:hne,createParagraphNear:dne,cut:pne,deleteCurrentNode:mne,deleteNode:gne,deleteRange:bne,deleteSelection:yne,enter:kne,exitCode:wne,extendMarkRange:Cne,first:_ne,focus:vne,forEach:xne,insertContent:Mne,insertContentAt:One,joinBackward:Pne,joinDown:Dne,joinForward:Rne,joinItemBackward:Nne,joinItemForward:Ine,joinTextblockBackward:Bne,joinTextblockForward:Lne,joinUp:Tne,keyboardShortcut:jne,lift:zne,liftEmptyBlock:Vne,liftListItem:Hne,newlineInCode:qne,resetAttributes:Wne,scrollIntoView:Une,selectAll:Jne,selectNodeBackward:Kne,selectNodeForward:Gne,selectParentNode:Qne,selectTextblockEnd:Xne,selectTextblockStart:Yne,setContent:Zne,setMark:uie,setMeta:cie,setNode:fie,setNodeSelection:hie,setTextSelection:die,sinkListItem:pie,splitBlock:mie,splitListItem:gie,toggleList:bie,toggleMark:yie,toggleNode:kie,toggleWrap:wie,undoInputRule:Cie,unsetAllMarks:_ie,unsetMark:Sie,updateAttributes:vie,wrapIn:xie,wrapInList:Mie});const ME=qn.create({name:"commands",addCommands(){return{...Aie}}}),AE=qn.create({name:"drop",addProseMirrorPlugins(){return[new xi({key:new Gr("tiptapDrop"),props:{handleDrop:(n,e,t,i)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:i})}}})]}}),EE=qn.create({name:"editable",addProseMirrorPlugins(){return[new xi({key:new Gr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),OE=new Gr("focusEvents"),TE=qn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new xi({key:OE,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,t)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),DE=qn.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:f}=a,{pos:h,parent:d}=f,p=f.parent.isTextblock&&h>0?l.doc.resolve(h-1):f,m=p.parent.type.spec.isolating,g=f.pos-f.parentOffset,b=m&&p.parent.childCount===1?g===f.pos:lt.atStart(u).from===h;return!c||!d.type.isTextblock||d.textContent.length||!b||b&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...i},o={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Qb()||SE()?o:r},addProseMirrorPlugins(){return[new xi({key:new Gr("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(m=>m.getMeta("composition")))return;const i=n.some(m=>m.docChanged)&&!e.doc.eq(t.doc),r=n.some(m=>m.getMeta("preventClearDocument"));if(!i||r)return;const{empty:o,from:s,to:l}=e.selection,a=lt.atStart(e.doc).from,u=lt.atEnd(e.doc).to;if(o||!(s===a&&l===u)||!Yb(t.doc))return;const h=t.tr,d=C0({state:t,transaction:h}),{commands:p}=new _0({editor:this.editor,state:d});if(p.clearNodes(),!!h.steps.length)return h}})]}}),PE=qn.create({name:"paste",addProseMirrorPlugins(){return[new xi({key:new Gr("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),RE=qn.create({name:"tabindex",addProseMirrorPlugins(){return[new xi({key:new Gr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Eie=Object.freeze({__proto__:null,ClipboardTextSerializer:yE,Commands:ME,Drop:AE,Editable:EE,FocusEvents:TE,Keymap:DE,Paste:PE,Tabindex:RE,focusEventsPluginKey:OE});class Ml{get name(){return this.node.type.name}constructor(e,t,i=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=e,this.editor=t,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:t,to:i},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Ml(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ml(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ml(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,i)=>{const r=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,s=this.pos+i+(o?0:1),l=this.resolvedPos.doc.resolve(s);if(!r&&l.depth<=this.depth)return;const a=new Ml(l,this.editor,r,r?t:null);r&&(a.actualDepth=this.depth+1),e.push(new Ml(l,this.editor,r,r?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let i=null,r=this.parent;for(;r&&!i;){if(r.node.type.name===e)if(Object.keys(t).length>0){const o=r.node.attrs,s=Object.keys(t);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==t[a])break}}else i=r;r=r.parent}return i}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},i=!1){let r=[];if(!this.children||this.children.length===0)return r;const o=Object.keys(t);return this.children.forEach(s=>{i&&r.length>0||(s.node.type.name===e&&o.every(a=>t[a]===s.node.attrs[a])&&r.push(s),!(i&&r.length>0)&&(r=r.concat(s.querySelectorAll(e,t,i))))}),r}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const Oie=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Tie(n,e,t){const i=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(i!==null)return i;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r),r}class Yae extends Gte{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:i,moved:r})=>this.options.onDrop(t,i,r)),this.on("paste",({event:t,slice:i})=>this.options.onPaste(t,i)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Tie(Oie,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const i=mE(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:i});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let i=t;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;i=i.filter(l=>!l.key.startsWith(s))}),t.length===i.length)return;const r=this.state.reconfigure({plugins:i});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[EE,yE.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),ME,TE,DE,RE,AE,PE].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new La(r,this)}createCommandManager(){this.commandManager=new _0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Kg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),t=Kg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const i=CE(t,this.options.autofocus);this.view=new sE(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ba.create({doc:t,selection:i||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const t=this.state.apply(e),i=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),i&&this.emit("selectionUpdate",{editor:this,transaction:e});const r=e.getMeta("focus"),o=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return iie(this.state,e)}isActive(e,t){const i=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return sie(this.state,i,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return zf(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:i={}}=e||{};return tie(this.state.doc,{blockSeparator:t,textSerializers:{...bE(this.schema),...i}})}get isEmpty(){return Yb(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelector(e,t))||null}$nodes(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Ml(t,this)}get $doc(){return this.$pos(0)}}function vu(n){return new v0({find:n.find,handler:({state:e,range:t,match:i})=>{const r=pt(n.getAttributes,void 0,i);if(r===!1||r===null)return null;const{tr:o}=e,s=i[i.length-1],l=i[0];if(s){const a=l.search(/\S/),u=t.from+l.indexOf(s),c=u+s.length;if(xE(t.from,t.to,e.doc).filter(d=>d.mark.type.excluded.find(m=>m===n.type&&m!==d.mark.type)).filter(d=>d.to>u).length)return null;c<t.to&&o.delete(c,t.to),u>t.from&&o.delete(t.from+a,u);const h=t.from+a+s.length;o.addMark(t.from+a,h,n.type.create(r||{})),o.removeStoredMark(n.type)}}})}function Die(n){return new v0({find:n.find,handler:({state:e,range:t,match:i})=>{const r=pt(n.getAttributes,void 0,i)||{},{tr:o}=e,s=t.from;let l=t.to;const a=n.type.create(r);if(i[1]){const u=i[0].lastIndexOf(i[1]);let c=s+u;c>l?c=l:l=c+i[1].length;const f=i[0][i[0].length-1];o.insertText(f,s+i[0].length-1),o.replaceWith(c,l,a)}else if(i[0]){const u=n.type.isInline?s:s-1;o.insert(u,n.type.create(r)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function Qg(n){return new v0({find:n.find,handler:({state:e,range:t,match:i})=>{const r=e.doc.resolve(t.from),o=pt(n.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function df(n){return new v0({find:n.find,handler:({state:e,range:t,match:i,chain:r})=>{const o=pt(n.getAttributes,void 0,i)||{},s=e.tr.delete(t.from,t.to),a=s.doc.resolve(t.from).blockRange(),u=a&&Nb(a,n.type,o);if(!u)return null;if(s.wrap(a,u),n.keepMarks&&n.editor){const{selection:f,storedMarks:h}=e,{splittableMarks:d}=n.editor.extensionManager,p=h||f.$to.parentOffset&&f.$from.marks();if(p){const m=p.filter(g=>d.includes(g.type.name));s.ensureMarks(m)}}if(n.keepAttributes){const f=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";r().updateAttributes(f,o).run()}const c=s.doc.resolve(t.from-1).nodeBefore;c&&c.type===n.type&&cl(s.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(i,c))&&s.join(t.from-1)}})}let Wt=class Xg{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pt(qe(this,"addOptions",{name:this.name}))),this.storage=pt(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Xg(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>x0(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Xg(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=pt(qe(t,"addOptions",{name:t.name})),t.storage=pt(qe(t,"addStorage",{name:t.name,options:t.options})),t}};function xu(n){return new ine({find:n.find,handler:({state:e,range:t,match:i,pasteEvent:r})=>{const o=pt(n.getAttributes,void 0,i,r);if(o===!1||o===null)return null;const{tr:s}=e,l=i[i.length-1],a=i[0];let u=t.to;if(l){const c=a.search(/\S/),f=t.from+a.indexOf(l),h=f+l.length;if(xE(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>f).length)return null;h<t.to&&s.delete(h,t.to),f>t.from&&s.delete(t.from+c,f),u=t.from+c+l.length,s.addMark(t.from+c,u,n.type.create(o||{})),s.removeStoredMark(n.type)}}})}function Zae(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}const Pie=Wt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",vi(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:i,$to:r}=t,o=n();return i.parentOffset===0?o.insertContentAt({from:Math.max(i.pos-1,0),to:r.pos},{type:this.name}):lie(t)?o.insertContentAt(r.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:u}=s.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(nt.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(Ye.create(s.doc,u.pos)):s.setSelection(nt.create(s.doc,u.pos));else{const f=(a=u.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();f&&(s.insert(c,f),s.setSelection(nt.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Die({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Rie=/^\s*>\s$/,Nie=Wt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",vi(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[df({find:Rie,type:this.type})]}}),Iie=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Bie=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Lie=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Fie=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,jie=Ni.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",vi(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[vu({find:Iie,type:this.type}),vu({find:Lie,type:this.type})]},addPasteRules(){return[xu({find:Bie,type:this.type}),xu({find:Fie,type:this.type})]}}),zie="listItem",V4="textStyle",H4=/^\s*([-+*])\s$/,Vie=Wt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",vi(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zie,this.editor.getAttributes(V4)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=df({find:H4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=df({find:H4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(V4),editor:this.editor})),[n]}}),Hie=/(^|[^`])`([^`]+)`(?!`)/,qie=/(^|[^`])`([^`]+)`(?!`)/g,Wie=Ni.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",vi(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[vu({find:Hie,type:this.type})]},addPasteRules(){return[xu({find:qie,type:this.type})]}}),Uie=/^```([a-z]+)?[\s\n]$/,Jie=/^~~~([a-z]+)?[\s\n]$/,Kie=Wt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",vi(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:i,empty:r}=t;if(!r||i.parent.type!==this.type)return!1;const o=i.parentOffset===i.parent.nodeSize-2,s=i.parent.textContent.endsWith(`

`);return!o||!s?!1:n.chain().command(({tr:l})=>(l.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:i}=e,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const l=r.after();return l===void 0?!1:i.nodeAt(l)?n.commands.command(({tr:u})=>(u.setSelection(lt.near(i.resolve(l))),!0)):n.commands.exitCode()}}},addInputRules(){return[Qg({find:Uie,type:this.type,getAttributes:n=>({language:n[1]})}),Qg({find:Jie,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new xi({key:new Gr("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),r=i?JSON.parse(i):void 0,o=r==null?void 0:r.mode;if(!t||!o)return!1;const{tr:s,schema:l}=n.state,a=l.text(t.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(nt.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),n.dispatch(s),!0}}})]}}),Gie=Wt.create({name:"doc",topNode:!0,content:"block+"});function Qie(n={}){return new xi({view(e){return new Xie(e,n)}})}class Xie{constructor(e,t){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=t.width)!==null&&i!==void 0?i:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let o=s=>{this[r](s)};return e.dom.addEventListener(r,o),{name:r,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,i,r=this.editorView.dom,o=r.getBoundingClientRect(),s=o.width/r.offsetWidth,l=o.height/r.offsetHeight;if(t){let f=e.nodeBefore,h=e.nodeAfter;if(f||h){let d=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(d){let p=d.getBoundingClientRect(),m=f?p.bottom:p.top;f&&h&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*l;i={left:p.left,right:p.right,top:m-g,bottom:m+g}}}}if(!i){let f=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*s;i={left:f.left-h,right:f.left+h,top:f.top,bottom:f.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let u,c;if(!a||a==document.body&&getComputedStyle(a).position=="static")u=-pageXOffset,c=-pageYOffset;else{let f=a.getBoundingClientRect(),h=f.width/a.offsetWidth,d=f.height/a.offsetHeight;u=f.left-a.scrollLeft*h,c=f.top-a.scrollTop*d}this.element.style.left=(i.left-u)/s+"px",this.element.style.top=(i.top-c)/l+"px",this.element.style.width=(i.right-i.left)/s+"px",this.element.style.height=(i.bottom-i.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=i&&i.type.spec.disableDropCursor,o=typeof r=="function"?r(this.editorView,t,e):r;if(t&&!o){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=kA(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const Yie=qn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Qie(this.options)]}});class dn extends lt{constructor(e){super(e,e)}map(e,t){let i=e.resolve(t.map(this.head));return dn.valid(i)?new dn(i):lt.near(i)}content(){return Re.empty}eq(e){return e instanceof dn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new dn(e.resolve(t.pos))}getBookmark(){return new Zb(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Zie(e)||!$ie(e))return!1;let i=t.type.spec.allowGapCursor;if(i!=null)return i;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,i=!1){e:for(;;){if(!i&&dn.valid(e))return e;let r=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(t>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;r+=t;let a=e.doc.resolve(r);if(dn.valid(a))return a}for(;;){let s=t>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!Ye.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*t),i=!1;continue e}break}o=s,r+=t;let l=e.doc.resolve(r);if(dn.valid(l))return l}return null}}}dn.prototype.visible=!1;dn.findFrom=dn.findGapCursorFrom;lt.jsonID("gapcursor",dn);class Zb{constructor(e){this.pos=e}map(e){return new Zb(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return dn.valid(t)?new dn(t):lt.near(t)}}function Zie(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),i=n.node(e);if(t==0){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(t-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function $ie(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),i=n.node(e);if(t==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(t);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function ere(){return new xi({props:{decorations:rre,createSelectionBetween(n,e,t){return e.pos==t.pos&&dn.valid(t)?new dn(t):null},handleClick:nre,handleKeyDown:tre,handleDOMEvents:{beforeinput:ire}}})}const tre=lE({ArrowLeft:qh("horiz",-1),ArrowRight:qh("horiz",1),ArrowUp:qh("vert",-1),ArrowDown:qh("vert",1)});function qh(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,r,o){let s=i.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof nt){if(!o.endOfTextblock(t)||l.depth==0)return!1;a=!1,l=i.doc.resolve(e>0?l.after():l.before())}let u=dn.findGapCursorFrom(l,e,a);return u?(r&&r(i.tr.setSelection(new dn(u))),!0):!1}}function nre(n,e,t){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(e);if(!dn.valid(i))return!1;let r=n.posAtCoords({left:t.clientX,top:t.clientY});return r&&r.inside>-1&&Ye.isSelectable(n.state.doc.nodeAt(r.inside))?!1:(n.dispatch(n.state.tr.setSelection(new dn(i))),!0)}function ire(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof dn))return!1;let{$from:t}=n.state.selection,i=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let r=ye.empty;for(let s=i.length-1;s>=0;s--)r=ye.from(i[s].createAndFill(null,r));let o=n.state.tr.replace(t.pos,t.pos,new Re(r,0,0));return o.setSelection(nt.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function rre(n){if(!(n.selection instanceof dn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",On.create(n.doc,[ur.widget(n.selection.head,e,{key:"gapcursor"})])}const ore=qn.create({name:"gapCursor",addProseMirrorPlugins(){return[ere()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=pt(qe(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),sre=Wt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",vi(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:i})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:r,storedMarks:o}=t;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=i.extensionManager,a=o||r.$to.parentOffset&&r.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&s){const f=a.filter(h=>l.includes(h.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),lre=Wt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,vi(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Qg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var gp=200,zn=function(){};zn.prototype.append=function(e){return e.length?(e=zn.from(e),!this.length&&e||e.length<gp&&this.leafAppend(e)||this.length<gp&&e.leafPrepend(this)||this.appendInner(e)):this};zn.prototype.prepend=function(e){return e.length?zn.from(e).append(this):this};zn.prototype.appendInner=function(e){return new are(this,e)};zn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?zn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};zn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};zn.prototype.forEach=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)};zn.prototype.map=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(o,s){return r.push(e(o,s))},t,i),r};zn.from=function(e){return e instanceof zn?e:e&&e.length?new NE(e):zn.empty};var NE=function(n){function e(i){n.call(this),this.values=i}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,s,l){for(var a=o;a<s;a++)if(r(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,l){for(var a=o-1;a>=s;a--)if(r(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=gp)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=gp)return new e(r.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(zn);zn.empty=new NE([]);var are=function(n){function e(t,i){n.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,r,o,s){var l=this.left.length;if(r<l&&this.left.forEachInner(i,r,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(i,Math.max(r-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,r,o,s){var l=this.left.length;if(r>l&&this.right.forEachInvertedInner(i,r-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(i,Math.min(r,l),o,s)===!1)return!1},e.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(i,r):i>=o?this.right.slice(i-o,r-o):this.left.slice(i,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new e(r,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(zn);const ure=500;class Rr{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,o;t&&(r=this.remapping(i,this.items.length),o=r.maps.length);let s=e.tr,l,a,u=[],c=[];return this.items.forEach((f,h)=>{if(!f.step){r||(r=this.remapping(i,h+1),o=r.maps.length),o--,c.push(f);return}if(r){c.push(new ro(f.map));let d=f.step.map(r.slice(o)),p;d&&s.maybeStep(d).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],u.push(new ro(p,void 0,void 0,u.length+c.length))),o--,p&&r.appendMap(p,o)}else s.maybeStep(f.step);if(f.selection)return l=r?f.selection.map(r.slice(o)):f.selection,a=new Rr(this.items.slice(0,i).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,t,i,r){let o=[],s=this.eventCount,l=this.items,a=!r&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),h=new ro(e.mapping.maps[c],f,t),d;(d=a&&a.merge(h))&&(h=d,c?o.pop():l=l.slice(0,l.length-1)),o.push(h),t&&(s++,t=void 0),r||(a=h)}let u=s-i.depth;return u>fre&&(l=cre(l,u),s-=u),new Rr(l.append(o),s)}remapping(e,t){let i=new sf;return this.items.forEach((r,o)=>{let s=r.mirrorOffset!=null&&o-r.mirrorOffset>=e?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,s)},e,t),i}addMaps(e){return this.eventCount==0?this:new Rr(this.items.append(e.map(t=>new ro(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-t),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(h=>{h.selection&&l--},r);let a=t;this.items.forEach(h=>{let d=o.getMirror(--a);if(d==null)return;s=Math.min(s,d);let p=o.maps[d];if(h.step){let m=e.steps[d].invert(e.docs[d]),g=h.selection&&h.selection.map(o.slice(a+1,d));g&&l++,i.push(new ro(p,m,g))}else i.push(new ro(p))},r);let u=[];for(let h=t;h<s;h++)u.push(new ro(o.maps[h]));let c=this.items.slice(0,r).append(u).append(i),f=new Rr(c,l);return f.emptyItemCount()>ure&&(f=f.compress(this.items.length-i.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),i=t.maps.length,r=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)r.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(t.slice(i)),u=a&&a.getMap();if(i--,u&&t.appendMap(u,i),a){let c=s.selection&&s.selection.map(t.slice(i));c&&o++;let f=new ro(u.invert(),a,c),h,d=r.length-1;(h=r.length&&r[d].merge(f))?r[d]=h:r.push(f)}}else s.map&&i--},this.items.length,0),new Rr(zn.from(r.reverse()),o)}}Rr.empty=new Rr(zn.empty,0);function cre(n,e){let t;return n.forEach((i,r)=>{if(i.selection&&e--==0)return t=r,!1}),n.slice(t)}class ro{constructor(e,t,i,r){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new ro(t.getMap().invert(),t,this.selection)}}}class _s{constructor(e,t,i,r,o){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=r,this.prevComposition=o}}const fre=20;function hre(n,e,t,i){let r=t.getMeta(Ll),o;if(r)return r.historyState;t.getMeta(mre)&&(n=new _s(n.done,n.undone,null,0,-1));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(s&&s.getMeta(Ll))return s.getMeta(Ll).redo?new _s(n.done.addTransform(t,void 0,i,fd(e)),n.undone,q4(t.mapping.maps),n.prevTime,n.prevComposition):new _s(n.done,n.undone.addTransform(t,void 0,i,fd(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=t.getMeta("composition"),a=n.prevTime==0||!s&&n.prevComposition!=l&&(n.prevTime<(t.time||0)-i.newGroupDelay||!dre(t,n.prevRanges)),u=s?Vm(n.prevRanges,t.mapping):q4(t.mapping.maps);return new _s(n.done.addTransform(t,a?e.selection.getBookmark():void 0,i,fd(e)),Rr.empty,u,t.time,l??n.prevComposition)}else return(o=t.getMeta("rebased"))?new _s(n.done.rebased(t,o),n.undone.rebased(t,o),Vm(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new _s(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Vm(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function dre(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((i,r)=>{for(let o=0;o<e.length;o+=2)i<=e[o+1]&&r>=e[o]&&(t=!0)}),t}function q4(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((i,r,o,s)=>e.push(o,s));return e}function Vm(n,e){if(!n)return null;let t=[];for(let i=0;i<n.length;i+=2){let r=e.map(n[i],1),o=e.map(n[i+1],-1);r<=o&&t.push(r,o)}return t}function pre(n,e,t){let i=fd(e),r=Ll.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,i);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),r,i),a=new _s(t?l:o.remaining,t?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(Ll,{redo:t,historyState:a})}let Hm=!1,W4=null;function fd(n){let e=n.plugins;if(W4!=e){Hm=!1,W4=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Hm=!0;break}}return Hm}const Ll=new Gr("history"),mre=new Gr("closeHistory");function gre(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new xi({key:Ll,state:{init(){return new _s(Rr.empty,Rr.empty,null,0,-1)},apply(e,t,i){return hre(t,i,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let i=t.inputType,r=i=="historyUndo"?BE:i=="historyRedo"?LE:null;return r?(t.preventDefault(),r(e.state,e.dispatch)):!1}}}})}function IE(n,e){return(t,i)=>{let r=Ll.getState(t);if(!r||(n?r.undone:r.done).eventCount==0)return!1;if(i){let o=pre(r,t,n);o&&i(e?o.scrollIntoView():o)}return!0}}const BE=IE(!1,!0),LE=IE(!0,!0),bre=qn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>BE(n,e),redo:()=>({state:n,dispatch:e})=>LE(n,e)}},addProseMirrorPlugins(){return[gre(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),yre=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,kre=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,wre=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Cre=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,_re=Ni.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",vi(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[vu({find:yre,type:this.type}),vu({find:wre,type:this.type})]},addPasteRules(){return[xu({find:kre,type:this.type}),xu({find:Cre,type:this.type})]}}),Sre=Wt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",vi(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),vre="listItem",U4="textStyle",J4=/^(\d+)\.\s$/,xre=Wt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",vi(this.options.HTMLAttributes,t),0]:["ol",vi(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(vre,this.editor.getAttributes(U4)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=df({find:J4,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=df({find:J4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(U4)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),Mre=Wt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",vi(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Are=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ere=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ore=Ni.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",vi(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[vu({find:Are,type:this.type})]},addPasteRules(){return[xu({find:Ere,type:this.type})]}}),Tre=Wt.create({name:"text",group:"inline"}),$ae=qn.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(jie.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(Nie.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(Vie.configure(this.options.bulletList)),this.options.code!==!1&&n.push(Wie.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(Kie.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(Gie.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(Yie.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(ore.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(sre.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(lre.configure(this.options.heading)),this.options.history!==!1&&n.push(bre.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(Pie.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(_re.configure(this.options.italic)),this.options.listItem!==!1&&n.push(Sre.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(xre.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(Mre.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(Ore.configure(this.options.strike)),this.options.text!==!1&&n.push(Tre.configure(this.options.text)),n}}),K4={};function Dre(n){let e=K4[n];if(e)return e;e=K4[n]=[];for(let t=0;t<128;t++){const i=String.fromCharCode(t);e.push(i)}for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);e[i]="%"+("0"+i.toString(16).toUpperCase()).slice(-2)}return e}function Mu(n,e){typeof e!="string"&&(e=Mu.defaultChars);const t=Dre(e);return n.replace(/(%[a-f0-9]{2})+/gi,function(i){let r="";for(let o=0,s=i.length;o<s;o+=3){const l=parseInt(i.slice(o+1,o+3),16);if(l<128){r+=t[l];continue}if((l&224)===192&&o+3<s){const a=parseInt(i.slice(o+4,o+6),16);if((a&192)===128){const u=l<<6&1984|a&63;u<128?r+="":r+=String.fromCharCode(u),o+=3;continue}}if((l&240)===224&&o+6<s){const a=parseInt(i.slice(o+4,o+6),16),u=parseInt(i.slice(o+7,o+9),16);if((a&192)===128&&(u&192)===128){const c=l<<12&61440|a<<6&4032|u&63;c<2048||c>=55296&&c<=57343?r+="":r+=String.fromCharCode(c),o+=6;continue}}if((l&248)===240&&o+9<s){const a=parseInt(i.slice(o+4,o+6),16),u=parseInt(i.slice(o+7,o+9),16),c=parseInt(i.slice(o+10,o+12),16);if((a&192)===128&&(u&192)===128&&(c&192)===128){let f=l<<18&1835008|a<<12&258048|u<<6&4032|c&63;f<65536||f>1114111?r+="":(f-=65536,r+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),o+=9;continue}}r+=""}return r})}Mu.defaultChars=";/?:@&=+$,#";Mu.componentChars="";const G4={};function Pre(n){let e=G4[n];if(e)return e;e=G4[n]=[];for(let t=0;t<128;t++){const i=String.fromCharCode(t);/^[0-9a-z]$/i.test(i)?e.push(i):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<n.length;t++)e[n.charCodeAt(t)]=n[t];return e}function Vf(n,e,t){typeof e!="string"&&(t=e,e=Vf.defaultChars),typeof t>"u"&&(t=!0);const i=Pre(e);let r="";for(let o=0,s=n.length;o<s;o++){const l=n.charCodeAt(o);if(t&&l===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(n.slice(o+1,o+3))){r+=n.slice(o,o+3),o+=2;continue}if(l<128){r+=i[l];continue}if(l>=55296&&l<=57343){if(l>=55296&&l<=56319&&o+1<s){const a=n.charCodeAt(o+1);if(a>=56320&&a<=57343){r+=encodeURIComponent(n[o]+n[o+1]),o++;continue}}r+="%EF%BF%BD";continue}r+=encodeURIComponent(n[o])}return r}Vf.defaultChars=";/?:@&=+$,-_.!~*'()#";Vf.componentChars="-_.!~*'()";function $b(n){let e="";return e+=n.protocol||"",e+=n.slashes?"//":"",e+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?e+="["+n.hostname+"]":e+=n.hostname||"",e+=n.port?":"+n.port:"",e+=n.pathname||"",e+=n.search||"",e+=n.hash||"",e}function bp(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Rre=/^([a-z0-9.+-]+:)/i,Nre=/:[0-9]*$/,Ire=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Bre=["<",">",'"',"`"," ","\r",`
`,"	"],Lre=["{","}","|","\\","^","`"].concat(Bre),Fre=["'"].concat(Lre),Q4=["%","/","?",";","#"].concat(Fre),X4=["/","?","#"],jre=255,Y4=/^[+a-z0-9A-Z_-]{0,63}$/,zre=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Z4={javascript:!0,"javascript:":!0},$4={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ey(n,e){if(n&&n instanceof bp)return n;const t=new bp;return t.parse(n,e),t}bp.prototype.parse=function(n,e){let t,i,r,o=n;if(o=o.trim(),!e&&n.split("#").length===1){const u=Ire.exec(o);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=Rre.exec(o);if(s&&(s=s[0],t=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(r=o.substr(0,2)==="//",r&&!(s&&Z4[s])&&(o=o.substr(2),this.slashes=!0)),!Z4[s]&&(r||s&&!$4[s])){let u=-1;for(let p=0;p<X4.length;p++)i=o.indexOf(X4[p]),i!==-1&&(u===-1||i<u)&&(u=i);let c,f;u===-1?f=o.lastIndexOf("@"):f=o.lastIndexOf("@",u),f!==-1&&(c=o.slice(0,f),o=o.slice(f+1),this.auth=c),u=-1;for(let p=0;p<Q4.length;p++)i=o.indexOf(Q4[p]),i!==-1&&(u===-1||i<u)&&(u=i);u===-1&&(u=o.length),o[u-1]===":"&&u--;const h=o.slice(0,u);o=o.slice(u),this.parseHost(h),this.hostname=this.hostname||"";const d=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!d){const p=this.hostname.split(/\./);for(let m=0,g=p.length;m<g;m++){const b=p[m];if(b&&!b.match(Y4)){let y="";for(let _=0,M=b.length;_<M;_++)b.charCodeAt(_)>127?y+="x":y+=b[_];if(!y.match(Y4)){const _=p.slice(0,m),M=p.slice(m+1),w=b.match(zre);w&&(_.push(w[1]),M.unshift(w[2])),M.length&&(o=M.join(".")+o),this.hostname=_.join(".");break}}}}this.hostname.length>jre&&(this.hostname=""),d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const l=o.indexOf("#");l!==-1&&(this.hash=o.substr(l),o=o.slice(0,l));const a=o.indexOf("?");return a!==-1&&(this.search=o.substr(a),o=o.slice(0,a)),o&&(this.pathname=o),$4[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};bp.prototype.parseHost=function(n){let e=Nre.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const Vre=Object.freeze(Object.defineProperty({__proto__:null,decode:Mu,encode:Vf,format:$b,parse:ey},Symbol.toStringTag,{value:"Module"})),FE=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,jE=/[\0-\x1F\x7F-\x9F]/,Hre=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,ty=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,zE=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,VE=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,qre=Object.freeze(Object.defineProperty({__proto__:null,Any:FE,Cc:jE,Cf:Hre,P:ty,S:zE,Z:VE},Symbol.toStringTag,{value:"Module"})),Wre=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(n=>n.charCodeAt(0))),Ure=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(n=>n.charCodeAt(0)));var qm;const Jre=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Kre=(qm=String.fromCodePoint)!==null&&qm!==void 0?qm:function(n){let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e};function Gre(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=Jre.get(n))!==null&&e!==void 0?e:n}var Fn;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(Fn||(Fn={}));const Qre=32;var Ls;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(Ls||(Ls={}));function Yg(n){return n>=Fn.ZERO&&n<=Fn.NINE}function Xre(n){return n>=Fn.UPPER_A&&n<=Fn.UPPER_F||n>=Fn.LOWER_A&&n<=Fn.LOWER_F}function Yre(n){return n>=Fn.UPPER_A&&n<=Fn.UPPER_Z||n>=Fn.LOWER_A&&n<=Fn.LOWER_Z||Yg(n)}function Zre(n){return n===Fn.EQUALS||Yre(n)}var In;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(In||(In={}));var Es;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(Es||(Es={}));class $re{constructor(e,t,i){this.decodeTree=e,this.emitCodePoint=t,this.errors=i,this.state=In.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Es.Strict}startEntity(e){this.decodeMode=e,this.state=In.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case In.EntityStart:return e.charCodeAt(t)===Fn.NUM?(this.state=In.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=In.NamedEntity,this.stateNamedEntity(e,t));case In.NumericStart:return this.stateNumericStart(e,t);case In.NumericDecimal:return this.stateNumericDecimal(e,t);case In.NumericHex:return this.stateNumericHex(e,t);case In.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|Qre)===Fn.LOWER_X?(this.state=In.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=In.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,i,r){if(t!==i){const o=i-t;this.result=this.result*Math.pow(r,o)+parseInt(e.substr(t,o),r),this.consumed+=o}}stateNumericHex(e,t){const i=t;for(;t<e.length;){const r=e.charCodeAt(t);if(Yg(r)||Xre(r))t+=1;else return this.addToNumericResult(e,i,t,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(e,i,t,16),-1}stateNumericDecimal(e,t){const i=t;for(;t<e.length;){const r=e.charCodeAt(t);if(Yg(r))t+=1;else return this.addToNumericResult(e,i,t,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(e,i,t,10),-1}emitNumericEntity(e,t){var i;if(this.consumed<=t)return(i=this.errors)===null||i===void 0||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Fn.SEMI)this.consumed+=1;else if(this.decodeMode===Es.Strict)return 0;return this.emitCodePoint(Gre(this.result),this.consumed),this.errors&&(e!==Fn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:i}=this;let r=i[this.treeIndex],o=(r&Ls.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const s=e.charCodeAt(t);if(this.treeIndex=eoe(i,r,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===Es.Attribute&&(o===0||Zre(s))?0:this.emitNotTerminatedNamedEntity();if(r=i[this.treeIndex],o=(r&Ls.VALUE_LENGTH)>>14,o!==0){if(s===Fn.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Es.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:i}=this,r=(i[t]&Ls.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,i){const{decodeTree:r}=this;return this.emitCodePoint(t===1?r[e]&~Ls.VALUE_LENGTH:r[e+1],i),t===3&&this.emitCodePoint(r[e+2],i),i}end(){var e;switch(this.state){case In.NamedEntity:return this.result!==0&&(this.decodeMode!==Es.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case In.NumericDecimal:return this.emitNumericEntity(0,2);case In.NumericHex:return this.emitNumericEntity(0,3);case In.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case In.EntityStart:return 0}}}function HE(n){let e="";const t=new $re(n,i=>e+=Kre(i));return function(r,o){let s=0,l=0;for(;(l=r.indexOf("&",l))>=0;){e+=r.slice(s,l),t.startEntity(o);const u=t.write(r,l+1);if(u<0){s=l+t.end();break}s=l+u,l=u===0?s+1:s}const a=e+r.slice(s);return e="",a}}function eoe(n,e,t,i){const r=(e&Ls.BRANCH_LENGTH)>>7,o=e&Ls.JUMP_TABLE;if(r===0)return o!==0&&i===o?t:-1;if(o){const a=i-o;return a<0||a>=r?-1:n[t+a]-1}let s=t,l=s+r-1;for(;s<=l;){const a=s+l>>>1,u=n[a];if(u<i)s=a+1;else if(u>i)l=a-1;else return n[a+r]}return-1}const toe=HE(Wre);HE(Ure);function qE(n,e=Es.Legacy){return toe(n,e)}function noe(n){return Object.prototype.toString.call(n)}function ny(n){return noe(n)==="[object String]"}const ioe=Object.prototype.hasOwnProperty;function roe(n,e){return ioe.call(n,e)}function A0(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(i){n[i]=t[i]})}}),n}function WE(n,e,t){return[].concat(n.slice(0,e),t,n.slice(e+1))}function iy(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function yp(n){if(n>65535){n-=65536;const e=55296+(n>>10),t=56320+(n&1023);return String.fromCharCode(e,t)}return String.fromCharCode(n)}const UE=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,ooe=/&([a-z#][a-z0-9]{1,31});/gi,soe=new RegExp(UE.source+"|"+ooe.source,"gi"),loe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function aoe(n,e){if(e.charCodeAt(0)===35&&loe.test(e)){const i=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return iy(i)?yp(i):n}const t=qE(n);return t!==n?t:n}function uoe(n){return n.indexOf("\\")<0?n:n.replace(UE,"$1")}function Au(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(soe,function(e,t,i){return t||aoe(e,i)})}const coe=/[&<>"]/,foe=/[&<>"]/g,hoe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function doe(n){return hoe[n]}function rl(n){return coe.test(n)?n.replace(foe,doe):n}const poe=/[.?*+^$[\]\\(){}|-]/g;function moe(n){return n.replace(poe,"\\$&")}function qt(n){switch(n){case 9:case 32:return!0}return!1}function pf(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function mf(n){return ty.test(n)||zE.test(n)}function gf(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function E0(n){return n=n.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(n=n.replace(//g,"")),n.toLowerCase().toUpperCase()}const goe={mdurl:Vre,ucmicro:qre},boe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:WE,assign:A0,escapeHtml:rl,escapeRE:moe,fromCodePoint:yp,has:roe,isMdAsciiPunct:gf,isPunctChar:mf,isSpace:qt,isString:ny,isValidEntityCode:iy,isWhiteSpace:pf,lib:goe,normalizeReference:E0,unescapeAll:Au,unescapeMd:uoe},Symbol.toStringTag,{value:"Module"}));function yoe(n,e,t){let i,r,o,s;const l=n.posMax,a=n.pos;for(n.pos=e+1,i=1;n.pos<l;){if(o=n.src.charCodeAt(n.pos),o===93&&(i--,i===0)){r=!0;break}if(s=n.pos,n.md.inline.skipToken(n),o===91){if(s===n.pos-1)i++;else if(t)return n.pos=a,-1}}let u=-1;return r&&(u=n.pos),n.pos=a,u}function koe(n,e,t){let i,r=e;const o={ok:!1,pos:0,str:""};if(n.charCodeAt(r)===60){for(r++;r<t;){if(i=n.charCodeAt(r),i===10||i===60)return o;if(i===62)return o.pos=r+1,o.str=Au(n.slice(e+1,r)),o.ok=!0,o;if(i===92&&r+1<t){r+=2;continue}r++}return o}let s=0;for(;r<t&&(i=n.charCodeAt(r),!(i===32||i<32||i===127));){if(i===92&&r+1<t){if(n.charCodeAt(r+1)===32)break;r+=2;continue}if(i===40&&(s++,s>32))return o;if(i===41){if(s===0)break;s--}r++}return e===r||s!==0||(o.str=Au(n.slice(e,r)),o.pos=r,o.ok=!0),o}function woe(n,e,t,i){let r,o=e;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(i)s.str=i.str,s.marker=i.marker;else{if(o>=t)return s;let l=n.charCodeAt(o);if(l!==34&&l!==39&&l!==40)return s;e++,o++,l===40&&(l=41),s.marker=l}for(;o<t;){if(r=n.charCodeAt(o),r===s.marker)return s.pos=o+1,s.str+=Au(n.slice(e,o)),s.ok=!0,s;if(r===40&&s.marker===41)return s;r===92&&o+1<t&&o++,o++}return s.can_continue=!0,s.str+=Au(n.slice(e,o)),s}const Coe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:koe,parseLinkLabel:yoe,parseLinkTitle:woe},Symbol.toStringTag,{value:"Module"})),Eo={};Eo.code_inline=function(n,e,t,i,r){const o=n[e];return"<code"+r.renderAttrs(o)+">"+rl(o.content)+"</code>"};Eo.code_block=function(n,e,t,i,r){const o=n[e];return"<pre"+r.renderAttrs(o)+"><code>"+rl(n[e].content)+`</code></pre>
`};Eo.fence=function(n,e,t,i,r){const o=n[e],s=o.info?Au(o.info).trim():"";let l="",a="";if(s){const c=s.split(/(\s+)/g);l=c[0],a=c.slice(2).join("")}let u;if(t.highlight?u=t.highlight(o.content,l,a)||rl(o.content):u=rl(o.content),u.indexOf("<pre")===0)return u+`
`;if(s){const c=o.attrIndex("class"),f=o.attrs?o.attrs.slice():[];c<0?f.push(["class",t.langPrefix+l]):(f[c]=f[c].slice(),f[c][1]+=" "+t.langPrefix+l);const h={attrs:f};return`<pre><code${r.renderAttrs(h)}>${u}</code></pre>
`}return`<pre><code${r.renderAttrs(o)}>${u}</code></pre>
`};Eo.image=function(n,e,t,i,r){const o=n[e];return o.attrs[o.attrIndex("alt")][1]=r.renderInlineAsText(o.children,t,i),r.renderToken(n,e,t)};Eo.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};Eo.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};Eo.text=function(n,e){return rl(n[e].content)};Eo.html_block=function(n,e){return n[e].content};Eo.html_inline=function(n,e){return n[e].content};function ju(){this.rules=A0({},Eo)}ju.prototype.renderAttrs=function(e){let t,i,r;if(!e.attrs)return"";for(r="",t=0,i=e.attrs.length;t<i;t++)r+=" "+rl(e.attrs[t][0])+'="'+rl(e.attrs[t][1])+'"';return r};ju.prototype.renderToken=function(e,t,i){const r=e[t];let o="";if(r.hidden)return"";r.block&&r.nesting!==-1&&t&&e[t-1].hidden&&(o+=`
`),o+=(r.nesting===-1?"</":"<")+r.tag,o+=this.renderAttrs(r),r.nesting===0&&i.xhtmlOut&&(o+=" /");let s=!1;if(r.block&&(s=!0,r.nesting===1&&t+1<e.length)){const l=e[t+1];(l.type==="inline"||l.hidden||l.nesting===-1&&l.tag===r.tag)&&(s=!1)}return o+=s?`>
`:">",o};ju.prototype.renderInline=function(n,e,t){let i="";const r=this.rules;for(let o=0,s=n.length;o<s;o++){const l=n[o].type;typeof r[l]<"u"?i+=r[l](n,o,e,t,this):i+=this.renderToken(n,o,e)}return i};ju.prototype.renderInlineAsText=function(n,e,t){let i="";for(let r=0,o=n.length;r<o;r++)switch(n[r].type){case"text":i+=n[r].content;break;case"image":i+=this.renderInlineAsText(n[r].children,e,t);break;case"html_inline":case"html_block":i+=n[r].content;break;case"softbreak":case"hardbreak":i+=`
`;break}return i};ju.prototype.render=function(n,e,t){let i="";const r=this.rules;for(let o=0,s=n.length;o<s;o++){const l=n[o].type;l==="inline"?i+=this.renderInline(n[o].children,e,t):typeof r[l]<"u"?i+=r[l](n,o,e,t,this):i+=this.renderToken(n,o,e,t)}return i};function Ii(){this.__rules__=[],this.__cache__=null}Ii.prototype.__find__=function(n){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};Ii.prototype.__compile__=function(){const n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(i){e.indexOf(i)<0&&e.push(i)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(i){i.enabled&&(t&&i.alt.indexOf(t)<0||n.__cache__[t].push(i.fn))})})};Ii.prototype.at=function(n,e,t){const i=this.__find__(n),r=t||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__[i].fn=e,this.__rules__[i].alt=r.alt||[],this.__cache__=null};Ii.prototype.before=function(n,e,t,i){const r=this.__find__(n),o=i||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(r,0,{name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};Ii.prototype.after=function(n,e,t,i){const r=this.__find__(n),o=i||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(r+1,0,{name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};Ii.prototype.push=function(n,e,t){const i=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:i.alt||[]}),this.__cache__=null};Ii.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(i){const r=this.__find__(i);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+i)}this.__rules__[r].enabled=!0,t.push(i)},this),this.__cache__=null,t};Ii.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};Ii.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(i){const r=this.__find__(i);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+i)}this.__rules__[r].enabled=!1,t.push(i)},this),this.__cache__=null,t};Ii.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};function Qr(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Qr.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let i=0,r=t.length;i<r;i++)if(t[i][0]===e)return i;return-1};Qr.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Qr.prototype.attrSet=function(e,t){const i=this.attrIndex(e),r=[e,t];i<0?this.attrPush(r):this.attrs[i]=r};Qr.prototype.attrGet=function(e){const t=this.attrIndex(e);let i=null;return t>=0&&(i=this.attrs[t][1]),i};Qr.prototype.attrJoin=function(e,t){const i=this.attrIndex(e);i<0?this.attrPush([e,t]):this.attrs[i][1]=this.attrs[i][1]+" "+t};function JE(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}JE.prototype.Token=Qr;const _oe=/\r\n?|\n/g,Soe=/\0/g;function voe(n){let e;e=n.src.replace(_oe,`
`),e=e.replace(Soe,""),n.src=e}function xoe(n){let e;n.inlineMode?(e=new n.Token("inline","",0),e.content=n.src,e.map=[0,1],e.children=[],n.tokens.push(e)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function Moe(n){const e=n.tokens;for(let t=0,i=e.length;t<i;t++){const r=e[t];r.type==="inline"&&n.md.inline.parse(r.content,n.md,n.env,r.children)}}function Aoe(n){return/^<a[>\s]/i.test(n)}function Eoe(n){return/^<\/a\s*>/i.test(n)}function Ooe(n){const e=n.tokens;if(n.md.options.linkify)for(let t=0,i=e.length;t<i;t++){if(e[t].type!=="inline"||!n.md.linkify.pretest(e[t].content))continue;let r=e[t].children,o=0;for(let s=r.length-1;s>=0;s--){const l=r[s];if(l.type==="link_close"){for(s--;r[s].level!==l.level&&r[s].type!=="link_open";)s--;continue}if(l.type==="html_inline"&&(Aoe(l.content)&&o>0&&o--,Eoe(l.content)&&o++),!(o>0)&&l.type==="text"&&n.md.linkify.test(l.content)){const a=l.content;let u=n.md.linkify.match(a);const c=[];let f=l.level,h=0;u.length>0&&u[0].index===0&&s>0&&r[s-1].type==="text_special"&&(u=u.slice(1));for(let d=0;d<u.length;d++){const p=u[d].url,m=n.md.normalizeLink(p);if(!n.md.validateLink(m))continue;let g=u[d].text;u[d].schema?u[d].schema==="mailto:"&&!/^mailto:/i.test(g)?g=n.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=n.md.normalizeLinkText(g):g=n.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");const b=u[d].index;if(b>h){const w=new n.Token("text","",0);w.content=a.slice(h,b),w.level=f,c.push(w)}const y=new n.Token("link_open","a",1);y.attrs=[["href",m]],y.level=f++,y.markup="linkify",y.info="auto",c.push(y);const _=new n.Token("text","",0);_.content=g,_.level=f,c.push(_);const M=new n.Token("link_close","a",-1);M.level=--f,M.markup="linkify",M.info="auto",c.push(M),h=u[d].lastIndex}if(h<a.length){const d=new n.Token("text","",0);d.content=a.slice(h),d.level=f,c.push(d)}e[t].children=r=WE(r,s,c)}}}}const KE=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Toe=/\((c|tm|r)\)/i,Doe=/\((c|tm|r)\)/ig,Poe={c:"",r:"",tm:""};function Roe(n,e){return Poe[e.toLowerCase()]}function Noe(n){let e=0;for(let t=n.length-1;t>=0;t--){const i=n[t];i.type==="text"&&!e&&(i.content=i.content.replace(Doe,Roe)),i.type==="link_open"&&i.info==="auto"&&e--,i.type==="link_close"&&i.info==="auto"&&e++}}function Ioe(n){let e=0;for(let t=n.length-1;t>=0;t--){const i=n[t];i.type==="text"&&!e&&KE.test(i.content)&&(i.content=i.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),i.type==="link_open"&&i.info==="auto"&&e--,i.type==="link_close"&&i.info==="auto"&&e++}}function Boe(n){let e;if(n.md.options.typographer)for(e=n.tokens.length-1;e>=0;e--)n.tokens[e].type==="inline"&&(Toe.test(n.tokens[e].content)&&Noe(n.tokens[e].children),KE.test(n.tokens[e].content)&&Ioe(n.tokens[e].children))}const Loe=/['"]/,eS=/['"]/g,tS="";function Wh(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function Foe(n,e){let t;const i=[];for(let r=0;r<n.length;r++){const o=n[r],s=n[r].level;for(t=i.length-1;t>=0&&!(i[t].level<=s);t--);if(i.length=t+1,o.type!=="text")continue;let l=o.content,a=0,u=l.length;e:for(;a<u;){eS.lastIndex=a;const c=eS.exec(l);if(!c)break;let f=!0,h=!0;a=c.index+1;const d=c[0]==="'";let p=32;if(c.index-1>=0)p=l.charCodeAt(c.index-1);else for(t=r-1;t>=0&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t--)if(n[t].content){p=n[t].content.charCodeAt(n[t].content.length-1);break}let m=32;if(a<u)m=l.charCodeAt(a);else for(t=r+1;t<n.length&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t++)if(n[t].content){m=n[t].content.charCodeAt(0);break}const g=gf(p)||mf(String.fromCharCode(p)),b=gf(m)||mf(String.fromCharCode(m)),y=pf(p),_=pf(m);if(_?f=!1:b&&(y||g||(f=!1)),y?h=!1:g&&(_||b||(h=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(h=f=!1),f&&h&&(f=g,h=b),!f&&!h){d&&(o.content=Wh(o.content,c.index,tS));continue}if(h)for(t=i.length-1;t>=0;t--){let M=i[t];if(i[t].level<s)break;if(M.single===d&&i[t].level===s){M=i[t];let w,S;d?(w=e.md.options.quotes[2],S=e.md.options.quotes[3]):(w=e.md.options.quotes[0],S=e.md.options.quotes[1]),o.content=Wh(o.content,c.index,S),n[M.token].content=Wh(n[M.token].content,M.pos,w),a+=S.length-1,M.token===r&&(a+=w.length-1),l=o.content,u=l.length,i.length=t;continue e}}f?i.push({token:r,pos:c.index,single:d,level:s}):h&&d&&(o.content=Wh(o.content,c.index,tS))}}}function joe(n){if(n.md.options.typographer)for(let e=n.tokens.length-1;e>=0;e--)n.tokens[e].type!=="inline"||!Loe.test(n.tokens[e].content)||Foe(n.tokens[e].children,n)}function zoe(n){let e,t;const i=n.tokens,r=i.length;for(let o=0;o<r;o++){if(i[o].type!=="inline")continue;const s=i[o].children,l=s.length;for(e=0;e<l;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=t=0;e<l;e++)s[e].type==="text"&&e+1<l&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==t&&(s[t]=s[e]),t++);e!==t&&(s.length=t)}}const Wm=[["normalize",voe],["block",xoe],["inline",Moe],["linkify",Ooe],["replacements",Boe],["smartquotes",joe],["text_join",zoe]];function ry(){this.ruler=new Ii;for(let n=0;n<Wm.length;n++)this.ruler.push(Wm[n][0],Wm[n][1])}ry.prototype.process=function(n){const e=this.ruler.getRules("");for(let t=0,i=e.length;t<i;t++)e[t](n)};ry.prototype.State=JE;function Oo(n,e,t,i){this.src=n,this.md=e,this.env=t,this.tokens=i,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const r=this.src;for(let o=0,s=0,l=0,a=0,u=r.length,c=!1;s<u;s++){const f=r.charCodeAt(s);if(!c)if(qt(f)){l++,f===9?a+=4-a%4:a++;continue}else c=!0;(f===10||s===u-1)&&(f!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(l),this.sCount.push(a),this.bsCount.push(0),c=!1,l=0,a=0,o=s+1)}this.bMarks.push(r.length),this.eMarks.push(r.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Oo.prototype.push=function(n,e,t){const i=new Qr(n,e,t);return i.block=!0,t<0&&this.level--,i.level=this.level,t>0&&this.level++,this.tokens.push(i),i};Oo.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Oo.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Oo.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const i=this.src.charCodeAt(e);if(!qt(i))break}return e};Oo.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!qt(this.src.charCodeAt(--e)))return e+1;return e};Oo.prototype.skipChars=function(e,t){for(let i=this.src.length;e<i&&this.src.charCodeAt(e)===t;e++);return e};Oo.prototype.skipCharsBack=function(e,t,i){if(e<=i)return e;for(;e>i;)if(t!==this.src.charCodeAt(--e))return e+1;return e};Oo.prototype.getLines=function(e,t,i,r){if(e>=t)return"";const o=new Array(t-e);for(let s=0,l=e;l<t;l++,s++){let a=0;const u=this.bMarks[l];let c=u,f;for(l+1<t||r?f=this.eMarks[l]+1:f=this.eMarks[l];c<f&&a<i;){const h=this.src.charCodeAt(c);if(qt(h))h===9?a+=4-(a+this.bsCount[l])%4:a++;else if(c-u<this.tShift[l])a++;else break;c++}a>i?o[s]=new Array(a-i+1).join(" ")+this.src.slice(c,f):o[s]=this.src.slice(c,f)}return o.join("")};Oo.prototype.Token=Qr;const Voe=65536;function Um(n,e){const t=n.bMarks[e]+n.tShift[e],i=n.eMarks[e];return n.src.slice(t,i)}function nS(n){const e=[],t=n.length;let i=0,r=n.charCodeAt(i),o=!1,s=0,l="";for(;i<t;)r===124&&(o?(l+=n.substring(s,i-1),s=i):(e.push(l+n.substring(s,i)),l="",s=i+1)),o=r===92,i++,r=n.charCodeAt(i);return e.push(l+n.substring(s)),e}function Hoe(n,e,t,i){if(e+2>t)return!1;let r=e+1;if(n.sCount[r]<n.blkIndent||n.sCount[r]-n.blkIndent>=4)return!1;let o=n.bMarks[r]+n.tShift[r];if(o>=n.eMarks[r])return!1;const s=n.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=n.eMarks[r])return!1;const l=n.src.charCodeAt(o++);if(l!==124&&l!==45&&l!==58&&!qt(l)||s===45&&qt(l))return!1;for(;o<n.eMarks[r];){const M=n.src.charCodeAt(o);if(M!==124&&M!==45&&M!==58&&!qt(M))return!1;o++}let a=Um(n,e+1),u=a.split("|");const c=[];for(let M=0;M<u.length;M++){const w=u[M].trim();if(!w){if(M===0||M===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(w))return!1;w.charCodeAt(w.length-1)===58?c.push(w.charCodeAt(0)===58?"center":"right"):w.charCodeAt(0)===58?c.push("left"):c.push("")}if(a=Um(n,e).trim(),a.indexOf("|")===-1||n.sCount[e]-n.blkIndent>=4)return!1;u=nS(a),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const f=u.length;if(f===0||f!==c.length)return!1;if(i)return!0;const h=n.parentType;n.parentType="table";const d=n.md.block.ruler.getRules("blockquote"),p=n.push("table_open","table",1),m=[e,0];p.map=m;const g=n.push("thead_open","thead",1);g.map=[e,e+1];const b=n.push("tr_open","tr",1);b.map=[e,e+1];for(let M=0;M<u.length;M++){const w=n.push("th_open","th",1);c[M]&&(w.attrs=[["style","text-align:"+c[M]]]);const S=n.push("inline","",0);S.content=u[M].trim(),S.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let y,_=0;for(r=e+2;r<t&&!(n.sCount[r]<n.blkIndent);r++){let M=!1;for(let S=0,E=d.length;S<E;S++)if(d[S](n,r,t,!0)){M=!0;break}if(M||(a=Um(n,r).trim(),!a)||n.sCount[r]-n.blkIndent>=4||(u=nS(a),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),_+=f-u.length,_>Voe))break;if(r===e+2){const S=n.push("tbody_open","tbody",1);S.map=y=[e+2,0]}const w=n.push("tr_open","tr",1);w.map=[r,r+1];for(let S=0;S<f;S++){const E=n.push("td_open","td",1);c[S]&&(E.attrs=[["style","text-align:"+c[S]]]);const I=n.push("inline","",0);I.content=u[S]?u[S].trim():"",I.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return y&&(n.push("tbody_close","tbody",-1),y[1]=r),n.push("table_close","table",-1),m[1]=r,n.parentType=h,n.line=r,!0}function qoe(n,e,t){if(n.sCount[e]-n.blkIndent<4)return!1;let i=e+1,r=i;for(;i<t;){if(n.isEmpty(i)){i++;continue}if(n.sCount[i]-n.blkIndent>=4){i++,r=i;continue}break}n.line=r;const o=n.push("code_block","code",0);return o.content=n.getLines(e,r,4+n.blkIndent,!1)+`
`,o.map=[e,n.line],!0}function Woe(n,e,t,i){let r=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||r+3>o)return!1;const s=n.src.charCodeAt(r);if(s!==126&&s!==96)return!1;let l=r;r=n.skipChars(r,s);let a=r-l;if(a<3)return!1;const u=n.src.slice(l,r),c=n.src.slice(r,o);if(s===96&&c.indexOf(String.fromCharCode(s))>=0)return!1;if(i)return!0;let f=e,h=!1;for(;f++,!(f>=t||(r=l=n.bMarks[f]+n.tShift[f],o=n.eMarks[f],r<o&&n.sCount[f]<n.blkIndent));)if(n.src.charCodeAt(r)===s&&!(n.sCount[f]-n.blkIndent>=4)&&(r=n.skipChars(r,s),!(r-l<a)&&(r=n.skipSpaces(r),!(r<o)))){h=!0;break}a=n.sCount[e],n.line=f+(h?1:0);const d=n.push("fence","code",0);return d.info=c,d.content=n.getLines(e+1,f,a,!0),d.markup=u,d.map=[e,n.line],!0}function Uoe(n,e,t,i){let r=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];const s=n.lineMax;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(r)!==62)return!1;if(i)return!0;const l=[],a=[],u=[],c=[],f=n.md.block.ruler.getRules("blockquote"),h=n.parentType;n.parentType="blockquote";let d=!1,p;for(p=e;p<t;p++){const _=n.sCount[p]<n.blkIndent;if(r=n.bMarks[p]+n.tShift[p],o=n.eMarks[p],r>=o)break;if(n.src.charCodeAt(r++)===62&&!_){let w=n.sCount[p]+1,S,E;n.src.charCodeAt(r)===32?(r++,w++,E=!1,S=!0):n.src.charCodeAt(r)===9?(S=!0,(n.bsCount[p]+w)%4===3?(r++,w++,E=!1):E=!0):S=!1;let I=w;for(l.push(n.bMarks[p]),n.bMarks[p]=r;r<o;){const O=n.src.charCodeAt(r);if(qt(O))O===9?I+=4-(I+n.bsCount[p]+(E?1:0))%4:I++;else break;r++}d=r>=o,a.push(n.bsCount[p]),n.bsCount[p]=n.sCount[p]+1+(S?1:0),u.push(n.sCount[p]),n.sCount[p]=I-w,c.push(n.tShift[p]),n.tShift[p]=r-n.bMarks[p];continue}if(d)break;let M=!1;for(let w=0,S=f.length;w<S;w++)if(f[w](n,p,t,!0)){M=!0;break}if(M){n.lineMax=p,n.blkIndent!==0&&(l.push(n.bMarks[p]),a.push(n.bsCount[p]),c.push(n.tShift[p]),u.push(n.sCount[p]),n.sCount[p]-=n.blkIndent);break}l.push(n.bMarks[p]),a.push(n.bsCount[p]),c.push(n.tShift[p]),u.push(n.sCount[p]),n.sCount[p]=-1}const m=n.blkIndent;n.blkIndent=0;const g=n.push("blockquote_open","blockquote",1);g.markup=">";const b=[e,0];g.map=b,n.md.block.tokenize(n,e,p);const y=n.push("blockquote_close","blockquote",-1);y.markup=">",n.lineMax=s,n.parentType=h,b[1]=n.line;for(let _=0;_<c.length;_++)n.bMarks[_+e]=l[_],n.tShift[_+e]=c[_],n.sCount[_+e]=u[_],n.bsCount[_+e]=a[_];return n.blkIndent=m,!0}function Joe(n,e,t,i){const r=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let o=n.bMarks[e]+n.tShift[e];const s=n.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let l=1;for(;o<r;){const u=n.src.charCodeAt(o++);if(u!==s&&!qt(u))return!1;u===s&&l++}if(l<3)return!1;if(i)return!0;n.line=e+1;const a=n.push("hr","hr",0);return a.map=[e,n.line],a.markup=Array(l+1).join(String.fromCharCode(s)),!0}function iS(n,e){const t=n.eMarks[e];let i=n.bMarks[e]+n.tShift[e];const r=n.src.charCodeAt(i++);if(r!==42&&r!==45&&r!==43)return-1;if(i<t){const o=n.src.charCodeAt(i);if(!qt(o))return-1}return i}function rS(n,e){const t=n.bMarks[e]+n.tShift[e],i=n.eMarks[e];let r=t;if(r+1>=i)return-1;let o=n.src.charCodeAt(r++);if(o<48||o>57)return-1;for(;;){if(r>=i)return-1;if(o=n.src.charCodeAt(r++),o>=48&&o<=57){if(r-t>=10)return-1;continue}if(o===41||o===46)break;return-1}return r<i&&(o=n.src.charCodeAt(r),!qt(o))?-1:r}function Koe(n,e){const t=n.level+2;for(let i=e+2,r=n.tokens.length-2;i<r;i++)n.tokens[i].level===t&&n.tokens[i].type==="paragraph_open"&&(n.tokens[i+2].hidden=!0,n.tokens[i].hidden=!0,i+=2)}function Goe(n,e,t,i){let r,o,s,l,a=e,u=!0;if(n.sCount[a]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[a]-n.listIndent>=4&&n.sCount[a]<n.blkIndent)return!1;let c=!1;i&&n.parentType==="paragraph"&&n.sCount[a]>=n.blkIndent&&(c=!0);let f,h,d;if((d=rS(n,a))>=0){if(f=!0,s=n.bMarks[a]+n.tShift[a],h=Number(n.src.slice(s,d-1)),c&&h!==1)return!1}else if((d=iS(n,a))>=0)f=!1;else return!1;if(c&&n.skipSpaces(d)>=n.eMarks[a])return!1;if(i)return!0;const p=n.src.charCodeAt(d-1),m=n.tokens.length;f?(l=n.push("ordered_list_open","ol",1),h!==1&&(l.attrs=[["start",h]])):l=n.push("bullet_list_open","ul",1);const g=[a,0];l.map=g,l.markup=String.fromCharCode(p);let b=!1;const y=n.md.block.ruler.getRules("list"),_=n.parentType;for(n.parentType="list";a<t;){o=d,r=n.eMarks[a];const M=n.sCount[a]+d-(n.bMarks[a]+n.tShift[a]);let w=M;for(;o<r;){const L=n.src.charCodeAt(o);if(L===9)w+=4-(w+n.bsCount[a])%4;else if(L===32)w++;else break;o++}const S=o;let E;S>=r?E=1:E=w-M,E>4&&(E=1);const I=M+E;l=n.push("list_item_open","li",1),l.markup=String.fromCharCode(p);const O=[a,0];l.map=O,f&&(l.info=n.src.slice(s,d-1));const P=n.tight,A=n.tShift[a],H=n.sCount[a],W=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=I,n.tight=!0,n.tShift[a]=S-n.bMarks[a],n.sCount[a]=w,S>=r&&n.isEmpty(a+1)?n.line=Math.min(n.line+2,t):n.md.block.tokenize(n,a,t,!0),(!n.tight||b)&&(u=!1),b=n.line-a>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=W,n.tShift[a]=A,n.sCount[a]=H,n.tight=P,l=n.push("list_item_close","li",-1),l.markup=String.fromCharCode(p),a=n.line,O[1]=a,a>=t||n.sCount[a]<n.blkIndent||n.sCount[a]-n.blkIndent>=4)break;let q=!1;for(let L=0,X=y.length;L<X;L++)if(y[L](n,a,t,!0)){q=!0;break}if(q)break;if(f){if(d=rS(n,a),d<0)break;s=n.bMarks[a]+n.tShift[a]}else if(d=iS(n,a),d<0)break;if(p!==n.src.charCodeAt(d-1))break}return f?l=n.push("ordered_list_close","ol",-1):l=n.push("bullet_list_close","ul",-1),l.markup=String.fromCharCode(p),g[1]=a,n.line=a,n.parentType=_,u&&Koe(n,m),!0}function Qoe(n,e,t,i){let r=n.bMarks[e]+n.tShift[e],o=n.eMarks[e],s=e+1;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(r)!==91)return!1;function l(y){const _=n.lineMax;if(y>=_||n.isEmpty(y))return null;let M=!1;if(n.sCount[y]-n.blkIndent>3&&(M=!0),n.sCount[y]<0&&(M=!0),!M){const E=n.md.block.ruler.getRules("reference"),I=n.parentType;n.parentType="reference";let O=!1;for(let P=0,A=E.length;P<A;P++)if(E[P](n,y,_,!0)){O=!0;break}if(n.parentType=I,O)return null}const w=n.bMarks[y]+n.tShift[y],S=n.eMarks[y];return n.src.slice(w,S+1)}let a=n.src.slice(r,o+1);o=a.length;let u=-1;for(r=1;r<o;r++){const y=a.charCodeAt(r);if(y===91)return!1;if(y===93){u=r;break}else if(y===10){const _=l(s);_!==null&&(a+=_,o=a.length,s++)}else if(y===92&&(r++,r<o&&a.charCodeAt(r)===10)){const _=l(s);_!==null&&(a+=_,o=a.length,s++)}}if(u<0||a.charCodeAt(u+1)!==58)return!1;for(r=u+2;r<o;r++){const y=a.charCodeAt(r);if(y===10){const _=l(s);_!==null&&(a+=_,o=a.length,s++)}else if(!qt(y))break}const c=n.md.helpers.parseLinkDestination(a,r,o);if(!c.ok)return!1;const f=n.md.normalizeLink(c.str);if(!n.md.validateLink(f))return!1;r=c.pos;const h=r,d=s,p=r;for(;r<o;r++){const y=a.charCodeAt(r);if(y===10){const _=l(s);_!==null&&(a+=_,o=a.length,s++)}else if(!qt(y))break}let m=n.md.helpers.parseLinkTitle(a,r,o);for(;m.can_continue;){const y=l(s);if(y===null)break;a+=y,r=o,o=a.length,s++,m=n.md.helpers.parseLinkTitle(a,r,o,m)}let g;for(r<o&&p!==r&&m.ok?(g=m.str,r=m.pos):(g="",r=h,s=d);r<o;){const y=a.charCodeAt(r);if(!qt(y))break;r++}if(r<o&&a.charCodeAt(r)!==10&&g)for(g="",r=h,s=d;r<o;){const y=a.charCodeAt(r);if(!qt(y))break;r++}if(r<o&&a.charCodeAt(r)!==10)return!1;const b=E0(a.slice(1,u));return b?(i||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[b]>"u"&&(n.env.references[b]={title:g,href:f}),n.line=s),!0):!1}const Xoe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Yoe="[a-zA-Z_:][a-zA-Z0-9:._-]*",Zoe="[^\"'=<>`\\x00-\\x20]+",$oe="'[^']*'",ese='"[^"]*"',tse="(?:"+Zoe+"|"+$oe+"|"+ese+")",nse="(?:\\s+"+Yoe+"(?:\\s*=\\s*"+tse+")?)",GE="<[A-Za-z][A-Za-z0-9\\-]*"+nse+"*\\s*\\/?>",QE="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",ise="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",rse="<[?][\\s\\S]*?[?]>",ose="<![A-Za-z][^>]*>",sse="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",lse=new RegExp("^(?:"+GE+"|"+QE+"|"+ise+"|"+rse+"|"+ose+"|"+sse+")"),ase=new RegExp("^(?:"+GE+"|"+QE+")"),ka=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Xoe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(ase.source+"\\s*$"),/^$/,!1]];function use(n,e,t,i){let r=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(r)!==60)return!1;let s=n.src.slice(r,o),l=0;for(;l<ka.length&&!ka[l][0].test(s);l++);if(l===ka.length)return!1;if(i)return ka[l][2];let a=e+1;if(!ka[l][1].test(s)){for(;a<t&&!(n.sCount[a]<n.blkIndent);a++)if(r=n.bMarks[a]+n.tShift[a],o=n.eMarks[a],s=n.src.slice(r,o),ka[l][1].test(s)){s.length!==0&&a++;break}}n.line=a;const u=n.push("html_block","",0);return u.map=[e,a],u.content=n.getLines(e,a,n.blkIndent,!0),!0}function cse(n,e,t,i){let r=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let s=n.src.charCodeAt(r);if(s!==35||r>=o)return!1;let l=1;for(s=n.src.charCodeAt(++r);s===35&&r<o&&l<=6;)l++,s=n.src.charCodeAt(++r);if(l>6||r<o&&!qt(s))return!1;if(i)return!0;o=n.skipSpacesBack(o,r);const a=n.skipCharsBack(o,35,r);a>r&&qt(n.src.charCodeAt(a-1))&&(o=a),n.line=e+1;const u=n.push("heading_open","h"+String(l),1);u.markup="########".slice(0,l),u.map=[e,n.line];const c=n.push("inline","",0);c.content=n.src.slice(r,o).trim(),c.map=[e,n.line],c.children=[];const f=n.push("heading_close","h"+String(l),-1);return f.markup="########".slice(0,l),!0}function fse(n,e,t){const i=n.md.block.ruler.getRules("paragraph");if(n.sCount[e]-n.blkIndent>=4)return!1;const r=n.parentType;n.parentType="paragraph";let o=0,s,l=e+1;for(;l<t&&!n.isEmpty(l);l++){if(n.sCount[l]-n.blkIndent>3)continue;if(n.sCount[l]>=n.blkIndent){let d=n.bMarks[l]+n.tShift[l];const p=n.eMarks[l];if(d<p&&(s=n.src.charCodeAt(d),(s===45||s===61)&&(d=n.skipChars(d,s),d=n.skipSpaces(d),d>=p))){o=s===61?1:2;break}}if(n.sCount[l]<0)continue;let h=!1;for(let d=0,p=i.length;d<p;d++)if(i[d](n,l,t,!0)){h=!0;break}if(h)break}if(!o)return!1;const a=n.getLines(e,l,n.blkIndent,!1).trim();n.line=l+1;const u=n.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(s),u.map=[e,n.line];const c=n.push("inline","",0);c.content=a,c.map=[e,n.line-1],c.children=[];const f=n.push("heading_close","h"+String(o),-1);return f.markup=String.fromCharCode(s),n.parentType=r,!0}function hse(n,e,t){const i=n.md.block.ruler.getRules("paragraph"),r=n.parentType;let o=e+1;for(n.parentType="paragraph";o<t&&!n.isEmpty(o);o++){if(n.sCount[o]-n.blkIndent>3||n.sCount[o]<0)continue;let u=!1;for(let c=0,f=i.length;c<f;c++)if(i[c](n,o,t,!0)){u=!0;break}if(u)break}const s=n.getLines(e,o,n.blkIndent,!1).trim();n.line=o;const l=n.push("paragraph_open","p",1);l.map=[e,n.line];const a=n.push("inline","",0);return a.content=s,a.map=[e,n.line],a.children=[],n.push("paragraph_close","p",-1),n.parentType=r,!0}const Uh=[["table",Hoe,["paragraph","reference"]],["code",qoe],["fence",Woe,["paragraph","reference","blockquote","list"]],["blockquote",Uoe,["paragraph","reference","blockquote","list"]],["hr",Joe,["paragraph","reference","blockquote","list"]],["list",Goe,["paragraph","reference","blockquote"]],["reference",Qoe],["html_block",use,["paragraph","reference","blockquote"]],["heading",cse,["paragraph","reference","blockquote"]],["lheading",fse],["paragraph",hse]];function O0(){this.ruler=new Ii;for(let n=0;n<Uh.length;n++)this.ruler.push(Uh[n][0],Uh[n][1],{alt:(Uh[n][2]||[]).slice()})}O0.prototype.tokenize=function(n,e,t){const i=this.ruler.getRules(""),r=i.length,o=n.md.options.maxNesting;let s=e,l=!1;for(;s<t&&(n.line=s=n.skipEmptyLines(s),!(s>=t||n.sCount[s]<n.blkIndent));){if(n.level>=o){n.line=t;break}const a=n.line;let u=!1;for(let c=0;c<r;c++)if(u=i[c](n,s,t,!1),u){if(a>=n.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");n.tight=!l,n.isEmpty(n.line-1)&&(l=!0),s=n.line,s<t&&n.isEmpty(s)&&(l=!0,s++,n.line=s)}};O0.prototype.parse=function(n,e,t,i){if(!n)return;const r=new this.State(n,e,t,i);this.tokenize(r,r.line,r.lineMax)};O0.prototype.State=Oo;function Hf(n,e,t,i){this.src=n,this.env=t,this.md=e,this.tokens=i,this.tokens_meta=Array(i.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Hf.prototype.pushPending=function(){const n=new Qr("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};Hf.prototype.push=function(n,e,t){this.pending&&this.pushPending();const i=new Qr(n,e,t);let r=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),i.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],r={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(i),this.tokens_meta.push(r),i};Hf.prototype.scanDelims=function(n,e){const t=this.posMax,i=this.src.charCodeAt(n),r=n>0?this.src.charCodeAt(n-1):32;let o=n;for(;o<t&&this.src.charCodeAt(o)===i;)o++;const s=o-n,l=o<t?this.src.charCodeAt(o):32,a=gf(r)||mf(String.fromCharCode(r)),u=gf(l)||mf(String.fromCharCode(l)),c=pf(r),f=pf(l),h=!f&&(!u||c||a),d=!c&&(!a||f||u);return{can_open:h&&(e||!d||a),can_close:d&&(e||!h||u),length:s}};Hf.prototype.Token=Qr;function dse(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function pse(n,e){let t=n.pos;for(;t<n.posMax&&!dse(n.src.charCodeAt(t));)t++;return t===n.pos?!1:(e||(n.pending+=n.src.slice(n.pos,t)),n.pos=t,!0)}const mse=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function gse(n,e){if(!n.md.options.linkify||n.linkLevel>0)return!1;const t=n.pos,i=n.posMax;if(t+3>i||n.src.charCodeAt(t)!==58||n.src.charCodeAt(t+1)!==47||n.src.charCodeAt(t+2)!==47)return!1;const r=n.pending.match(mse);if(!r)return!1;const o=r[1],s=n.md.linkify.matchAtStart(n.src.slice(t-o.length));if(!s)return!1;let l=s.url;if(l.length<=o.length)return!1;l=l.replace(/\*+$/,"");const a=n.md.normalizeLink(l);if(!n.md.validateLink(a))return!1;if(!e){n.pending=n.pending.slice(0,-o.length);const u=n.push("link_open","a",1);u.attrs=[["href",a]],u.markup="linkify",u.info="auto";const c=n.push("text","",0);c.content=n.md.normalizeLinkText(l);const f=n.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return n.pos+=l.length-o.length,!0}function bse(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==10)return!1;const i=n.pending.length-1,r=n.posMax;if(!e)if(i>=0&&n.pending.charCodeAt(i)===32)if(i>=1&&n.pending.charCodeAt(i-1)===32){let o=i-1;for(;o>=1&&n.pending.charCodeAt(o-1)===32;)o--;n.pending=n.pending.slice(0,o),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(t++;t<r&&qt(n.src.charCodeAt(t));)t++;return n.pos=t,!0}const oy=[];for(let n=0;n<256;n++)oy.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){oy[n.charCodeAt(0)]=1});function yse(n,e){let t=n.pos;const i=n.posMax;if(n.src.charCodeAt(t)!==92||(t++,t>=i))return!1;let r=n.src.charCodeAt(t);if(r===10){for(e||n.push("hardbreak","br",0),t++;t<i&&(r=n.src.charCodeAt(t),!!qt(r));)t++;return n.pos=t,!0}let o=n.src[t];if(r>=55296&&r<=56319&&t+1<i){const l=n.src.charCodeAt(t+1);l>=56320&&l<=57343&&(o+=n.src[t+1],t++)}const s="\\"+o;if(!e){const l=n.push("text_special","",0);r<256&&oy[r]!==0?l.content=o:l.content=s,l.markup=s,l.info="escape"}return n.pos=t+1,!0}function kse(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==96)return!1;const r=t;t++;const o=n.posMax;for(;t<o&&n.src.charCodeAt(t)===96;)t++;const s=n.src.slice(r,t),l=s.length;if(n.backticksScanned&&(n.backticks[l]||0)<=r)return e||(n.pending+=s),n.pos+=l,!0;let a=t,u;for(;(u=n.src.indexOf("`",a))!==-1;){for(a=u+1;a<o&&n.src.charCodeAt(a)===96;)a++;const c=a-u;if(c===l){if(!e){const f=n.push("code_inline","code",0);f.markup=s,f.content=n.src.slice(t,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=a,!0}n.backticks[c]=u}return n.backticksScanned=!0,e||(n.pending+=s),n.pos+=l,!0}function wse(n,e){const t=n.pos,i=n.src.charCodeAt(t);if(e||i!==126)return!1;const r=n.scanDelims(n.pos,!0);let o=r.length;const s=String.fromCharCode(i);if(o<2)return!1;let l;o%2&&(l=n.push("text","",0),l.content=s,o--);for(let a=0;a<o;a+=2)l=n.push("text","",0),l.content=s+s,n.delimiters.push({marker:i,length:0,token:n.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return n.pos+=r.length,!0}function oS(n,e){let t;const i=[],r=e.length;for(let o=0;o<r;o++){const s=e[o];if(s.marker!==126||s.end===-1)continue;const l=e[s.end];t=n.tokens[s.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=n.tokens[l.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",n.tokens[l.token-1].type==="text"&&n.tokens[l.token-1].content==="~"&&i.push(l.token-1)}for(;i.length;){const o=i.pop();let s=o+1;for(;s<n.tokens.length&&n.tokens[s].type==="s_close";)s++;s--,o!==s&&(t=n.tokens[s],n.tokens[s]=n.tokens[o],n.tokens[o]=t)}}function Cse(n){const e=n.tokens_meta,t=n.tokens_meta.length;oS(n,n.delimiters);for(let i=0;i<t;i++)e[i]&&e[i].delimiters&&oS(n,e[i].delimiters)}const XE={tokenize:wse,postProcess:Cse};function _se(n,e){const t=n.pos,i=n.src.charCodeAt(t);if(e||i!==95&&i!==42)return!1;const r=n.scanDelims(n.pos,i===42);for(let o=0;o<r.length;o++){const s=n.push("text","",0);s.content=String.fromCharCode(i),n.delimiters.push({marker:i,length:r.length,token:n.tokens.length-1,end:-1,open:r.can_open,close:r.can_close})}return n.pos+=r.length,!0}function sS(n,e){const t=e.length;for(let i=t-1;i>=0;i--){const r=e[i];if(r.marker!==95&&r.marker!==42||r.end===-1)continue;const o=e[r.end],s=i>0&&e[i-1].end===r.end+1&&e[i-1].marker===r.marker&&e[i-1].token===r.token-1&&e[r.end+1].token===o.token+1,l=String.fromCharCode(r.marker),a=n.tokens[r.token];a.type=s?"strong_open":"em_open",a.tag=s?"strong":"em",a.nesting=1,a.markup=s?l+l:l,a.content="";const u=n.tokens[o.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?l+l:l,u.content="",s&&(n.tokens[e[i-1].token].content="",n.tokens[e[r.end+1].token].content="",i--)}}function Sse(n){const e=n.tokens_meta,t=n.tokens_meta.length;sS(n,n.delimiters);for(let i=0;i<t;i++)e[i]&&e[i].delimiters&&sS(n,e[i].delimiters)}const YE={tokenize:_se,postProcess:Sse};function vse(n,e){let t,i,r,o,s="",l="",a=n.pos,u=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;const c=n.pos,f=n.posMax,h=n.pos+1,d=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(d<0)return!1;let p=d+1;if(p<f&&n.src.charCodeAt(p)===40){for(u=!1,p++;p<f&&(t=n.src.charCodeAt(p),!(!qt(t)&&t!==10));p++);if(p>=f)return!1;if(a=p,r=n.md.helpers.parseLinkDestination(n.src,p,n.posMax),r.ok){for(s=n.md.normalizeLink(r.str),n.md.validateLink(s)?p=r.pos:s="",a=p;p<f&&(t=n.src.charCodeAt(p),!(!qt(t)&&t!==10));p++);if(r=n.md.helpers.parseLinkTitle(n.src,p,n.posMax),p<f&&a!==p&&r.ok)for(l=r.str,p=r.pos;p<f&&(t=n.src.charCodeAt(p),!(!qt(t)&&t!==10));p++);}(p>=f||n.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof n.env.references>"u")return!1;if(p<f&&n.src.charCodeAt(p)===91?(a=p+1,p=n.md.helpers.parseLinkLabel(n,p),p>=0?i=n.src.slice(a,p++):p=d+1):p=d+1,i||(i=n.src.slice(h,d)),o=n.env.references[E0(i)],!o)return n.pos=c,!1;s=o.href,l=o.title}if(!e){n.pos=h,n.posMax=d;const m=n.push("link_open","a",1),g=[["href",s]];m.attrs=g,l&&g.push(["title",l]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=p,n.posMax=f,!0}function xse(n,e){let t,i,r,o,s,l,a,u,c="";const f=n.pos,h=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;const d=n.pos+2,p=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(p<0)return!1;if(o=p+1,o<h&&n.src.charCodeAt(o)===40){for(o++;o<h&&(t=n.src.charCodeAt(o),!(!qt(t)&&t!==10));o++);if(o>=h)return!1;for(u=o,l=n.md.helpers.parseLinkDestination(n.src,o,n.posMax),l.ok&&(c=n.md.normalizeLink(l.str),n.md.validateLink(c)?o=l.pos:c=""),u=o;o<h&&(t=n.src.charCodeAt(o),!(!qt(t)&&t!==10));o++);if(l=n.md.helpers.parseLinkTitle(n.src,o,n.posMax),o<h&&u!==o&&l.ok)for(a=l.str,o=l.pos;o<h&&(t=n.src.charCodeAt(o),!(!qt(t)&&t!==10));o++);else a="";if(o>=h||n.src.charCodeAt(o)!==41)return n.pos=f,!1;o++}else{if(typeof n.env.references>"u")return!1;if(o<h&&n.src.charCodeAt(o)===91?(u=o+1,o=n.md.helpers.parseLinkLabel(n,o),o>=0?r=n.src.slice(u,o++):o=p+1):o=p+1,r||(r=n.src.slice(d,p)),s=n.env.references[E0(r)],!s)return n.pos=f,!1;c=s.href,a=s.title}if(!e){i=n.src.slice(d,p);const m=[];n.md.inline.parse(i,n.md,n.env,m);const g=n.push("image","img",0),b=[["src",c],["alt",""]];g.attrs=b,g.children=m,g.content=i,a&&b.push(["title",a])}return n.pos=o,n.posMax=h,!0}const Mse=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Ase=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function Ese(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==60)return!1;const i=n.pos,r=n.posMax;for(;;){if(++t>=r)return!1;const s=n.src.charCodeAt(t);if(s===60)return!1;if(s===62)break}const o=n.src.slice(i+1,t);if(Ase.test(o)){const s=n.md.normalizeLink(o);if(!n.md.validateLink(s))return!1;if(!e){const l=n.push("link_open","a",1);l.attrs=[["href",s]],l.markup="autolink",l.info="auto";const a=n.push("text","",0);a.content=n.md.normalizeLinkText(o);const u=n.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return n.pos+=o.length+2,!0}if(Mse.test(o)){const s=n.md.normalizeLink("mailto:"+o);if(!n.md.validateLink(s))return!1;if(!e){const l=n.push("link_open","a",1);l.attrs=[["href",s]],l.markup="autolink",l.info="auto";const a=n.push("text","",0);a.content=n.md.normalizeLinkText(o);const u=n.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return n.pos+=o.length+2,!0}return!1}function Ose(n){return/^<a[>\s]/i.test(n)}function Tse(n){return/^<\/a\s*>/i.test(n)}function Dse(n){const e=n|32;return e>=97&&e<=122}function Pse(n,e){if(!n.md.options.html)return!1;const t=n.posMax,i=n.pos;if(n.src.charCodeAt(i)!==60||i+2>=t)return!1;const r=n.src.charCodeAt(i+1);if(r!==33&&r!==63&&r!==47&&!Dse(r))return!1;const o=n.src.slice(i).match(lse);if(!o)return!1;if(!e){const s=n.push("html_inline","",0);s.content=o[0],Ose(s.content)&&n.linkLevel++,Tse(s.content)&&n.linkLevel--}return n.pos+=o[0].length,!0}const Rse=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Nse=/^&([a-z][a-z0-9]{1,31});/i;function Ise(n,e){const t=n.pos,i=n.posMax;if(n.src.charCodeAt(t)!==38||t+1>=i)return!1;if(n.src.charCodeAt(t+1)===35){const o=n.src.slice(t).match(Rse);if(o){if(!e){const s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),l=n.push("text_special","",0);l.content=iy(s)?yp(s):yp(65533),l.markup=o[0],l.info="entity"}return n.pos+=o[0].length,!0}}else{const o=n.src.slice(t).match(Nse);if(o){const s=qE(o[0]);if(s!==o[0]){if(!e){const l=n.push("text_special","",0);l.content=s,l.markup=o[0],l.info="entity"}return n.pos+=o[0].length,!0}}}return!1}function lS(n){const e={},t=n.length;if(!t)return;let i=0,r=-2;const o=[];for(let s=0;s<t;s++){const l=n[s];if(o.push(0),(n[i].marker!==l.marker||r!==l.token-1)&&(i=s),r=l.token,l.length=l.length||0,!l.close)continue;e.hasOwnProperty(l.marker)||(e[l.marker]=[-1,-1,-1,-1,-1,-1]);const a=e[l.marker][(l.open?3:0)+l.length%3];let u=i-o[i]-1,c=u;for(;u>a;u-=o[u]+1){const f=n[u];if(f.marker===l.marker&&f.open&&f.end<0){let h=!1;if((f.close||l.open)&&(f.length+l.length)%3===0&&(f.length%3!==0||l.length%3!==0)&&(h=!0),!h){const d=u>0&&!n[u-1].open?o[u-1]+1:0;o[s]=s-u+d,o[u]=d,l.open=!1,f.end=s,f.close=!1,c=-1,r=-2;break}}}c!==-1&&(e[l.marker][(l.open?3:0)+(l.length||0)%3]=c)}}function Bse(n){const e=n.tokens_meta,t=n.tokens_meta.length;lS(n.delimiters);for(let i=0;i<t;i++)e[i]&&e[i].delimiters&&lS(e[i].delimiters)}function Lse(n){let e,t,i=0;const r=n.tokens,o=n.tokens.length;for(e=t=0;e<o;e++)r[e].nesting<0&&i--,r[e].level=i,r[e].nesting>0&&i++,r[e].type==="text"&&e+1<o&&r[e+1].type==="text"?r[e+1].content=r[e].content+r[e+1].content:(e!==t&&(r[t]=r[e]),t++);e!==t&&(r.length=t)}const Jm=[["text",pse],["linkify",gse],["newline",bse],["escape",yse],["backticks",kse],["strikethrough",XE.tokenize],["emphasis",YE.tokenize],["link",vse],["image",xse],["autolink",Ese],["html_inline",Pse],["entity",Ise]],Km=[["balance_pairs",Bse],["strikethrough",XE.postProcess],["emphasis",YE.postProcess],["fragments_join",Lse]];function qf(){this.ruler=new Ii;for(let n=0;n<Jm.length;n++)this.ruler.push(Jm[n][0],Jm[n][1]);this.ruler2=new Ii;for(let n=0;n<Km.length;n++)this.ruler2.push(Km[n][0],Km[n][1])}qf.prototype.skipToken=function(n){const e=n.pos,t=this.ruler.getRules(""),i=t.length,r=n.md.options.maxNesting,o=n.cache;if(typeof o[e]<"u"){n.pos=o[e];return}let s=!1;if(n.level<r){for(let l=0;l<i;l++)if(n.level++,s=t[l](n,!0),n.level--,s){if(e>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;s||n.pos++,o[e]=n.pos};qf.prototype.tokenize=function(n){const e=this.ruler.getRules(""),t=e.length,i=n.posMax,r=n.md.options.maxNesting;for(;n.pos<i;){const o=n.pos;let s=!1;if(n.level<r){for(let l=0;l<t;l++)if(s=e[l](n,!1),s){if(o>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(n.pos>=i)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};qf.prototype.parse=function(n,e,t,i){const r=new this.State(n,e,t,i);this.tokenize(r);const o=this.ruler2.getRules(""),s=o.length;for(let l=0;l<s;l++)o[l](r)};qf.prototype.State=Hf;function Fse(n){const e={};n=n||{},e.src_Any=FE.source,e.src_Cc=jE.source,e.src_Z=VE.source,e.src_P=ty.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function Zg(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(i){n[i]=t[i]})}),n}function T0(n){return Object.prototype.toString.call(n)}function jse(n){return T0(n)==="[object String]"}function zse(n){return T0(n)==="[object Object]"}function Vse(n){return T0(n)==="[object RegExp]"}function aS(n){return T0(n)==="[object Function]"}function Hse(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const ZE={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function qse(n){return Object.keys(n||{}).reduce(function(e,t){return e||ZE.hasOwnProperty(t)},!1)}const Wse={"http:":{validate:function(n,e,t){const i=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(i)?i.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){const i=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(i)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:i.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){const i=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(i)?i.match(t.re.mailto)[0].length:0}}},Use="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Jse="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Kse(n){n.__index__=-1,n.__text_cache__=""}function Gse(n){return function(e,t){const i=e.slice(t);return n.test(i)?i.match(n)[0].length:0}}function uS(){return function(n,e){e.normalize(n)}}function kp(n){const e=n.re=Fse(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(Use),t.push(e.src_xn),e.src_tlds=t.join("|");function i(l){return l.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(i(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(i(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(i(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(i(e.tpl_host_fuzzy_test),"i");const r=[];n.__compiled__={};function o(l,a){throw new Error('(LinkifyIt) Invalid schema "'+l+'": '+a)}Object.keys(n.__schemas__).forEach(function(l){const a=n.__schemas__[l];if(a===null)return;const u={validate:null,link:null};if(n.__compiled__[l]=u,zse(a)){Vse(a.validate)?u.validate=Gse(a.validate):aS(a.validate)?u.validate=a.validate:o(l,a),aS(a.normalize)?u.normalize=a.normalize:a.normalize?o(l,a):u.normalize=uS();return}if(jse(a)){r.push(l);return}o(l,a)}),r.forEach(function(l){n.__compiled__[n.__schemas__[l]]&&(n.__compiled__[l].validate=n.__compiled__[n.__schemas__[l]].validate,n.__compiled__[l].normalize=n.__compiled__[n.__schemas__[l]].normalize)}),n.__compiled__[""]={validate:null,normalize:uS()};const s=Object.keys(n.__compiled__).filter(function(l){return l.length>0&&n.__compiled__[l]}).map(Hse).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),Kse(n)}function Qse(n,e){const t=n.__index__,i=n.__last_index__,r=n.__text_cache__.slice(t,i);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=i+e,this.raw=r,this.text=r,this.url=r}function $g(n,e){const t=new Qse(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function Xi(n,e){if(!(this instanceof Xi))return new Xi(n,e);e||qse(n)&&(e=n,n={}),this.__opts__=Zg({},ZE,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Zg({},Wse,n),this.__compiled__={},this.__tlds__=Jse,this.__tlds_replaced__=!1,this.re={},kp(this)}Xi.prototype.add=function(e,t){return this.__schemas__[e]=t,kp(this),this};Xi.prototype.set=function(e){return this.__opts__=Zg(this.__opts__,e),this};Xi.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,i,r,o,s,l,a,u,c;if(this.re.schema_test.test(e)){for(a=this.re.schema_search,a.lastIndex=0;(t=a.exec(e))!==null;)if(o=this.testSchemaAt(e,t[2],a.lastIndex),o){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(i=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=i.index+i[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=i.index+i[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(r=e.match(this.re.email_fuzzy))!==null&&(s=r.index+r[1].length,l=r.index+r[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&l>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=l))),this.__index__>=0};Xi.prototype.pretest=function(e){return this.re.pretest.test(e)};Xi.prototype.testSchemaAt=function(e,t,i){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,i,this):0};Xi.prototype.match=function(e){const t=[];let i=0;this.__index__>=0&&this.__text_cache__===e&&(t.push($g(this,i)),i=this.__last_index__);let r=i?e.slice(i):e;for(;this.test(r);)t.push($g(this,i)),r=r.slice(this.__last_index__),i+=this.__last_index__;return t.length?t:null};Xi.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const i=this.testSchemaAt(e,t[2],t[0].length);return i?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i,$g(this,0)):null};Xi.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(i,r,o){return i!==o[r-1]}).reverse(),kp(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,kp(this),this)};Xi.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Xi.prototype.onCompile=function(){};const $a=2147483647,co=36,sy=1,bf=26,Xse=38,Yse=700,$E=72,eO=128,tO="-",Zse=/^xn--/,$se=/[^\0-\x7F]/,ele=/[\x2E\u3002\uFF0E\uFF61]/g,tle={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Gm=co-sy,fo=Math.floor,Qm=String.fromCharCode;function Ss(n){throw new RangeError(tle[n])}function nle(n,e){const t=[];let i=n.length;for(;i--;)t[i]=e(n[i]);return t}function nO(n,e){const t=n.split("@");let i="";t.length>1&&(i=t[0]+"@",n=t[1]),n=n.replace(ele,".");const r=n.split("."),o=nle(r,e).join(".");return i+o}function iO(n){const e=[];let t=0;const i=n.length;for(;t<i;){const r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){const o=n.charCodeAt(t++);(o&64512)==56320?e.push(((r&1023)<<10)+(o&1023)+65536):(e.push(r),t--)}else e.push(r)}return e}const ile=n=>String.fromCodePoint(...n),rle=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:co},cS=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},rO=function(n,e,t){let i=0;for(n=t?fo(n/Yse):n>>1,n+=fo(n/e);n>Gm*bf>>1;i+=co)n=fo(n/Gm);return fo(i+(Gm+1)*n/(n+Xse))},oO=function(n){const e=[],t=n.length;let i=0,r=eO,o=$E,s=n.lastIndexOf(tO);s<0&&(s=0);for(let l=0;l<s;++l)n.charCodeAt(l)>=128&&Ss("not-basic"),e.push(n.charCodeAt(l));for(let l=s>0?s+1:0;l<t;){const a=i;for(let c=1,f=co;;f+=co){l>=t&&Ss("invalid-input");const h=rle(n.charCodeAt(l++));h>=co&&Ss("invalid-input"),h>fo(($a-i)/c)&&Ss("overflow"),i+=h*c;const d=f<=o?sy:f>=o+bf?bf:f-o;if(h<d)break;const p=co-d;c>fo($a/p)&&Ss("overflow"),c*=p}const u=e.length+1;o=rO(i-a,u,a==0),fo(i/u)>$a-r&&Ss("overflow"),r+=fo(i/u),i%=u,e.splice(i++,0,r)}return String.fromCodePoint(...e)},sO=function(n){const e=[];n=iO(n);const t=n.length;let i=eO,r=0,o=$E;for(const a of n)a<128&&e.push(Qm(a));const s=e.length;let l=s;for(s&&e.push(tO);l<t;){let a=$a;for(const c of n)c>=i&&c<a&&(a=c);const u=l+1;a-i>fo(($a-r)/u)&&Ss("overflow"),r+=(a-i)*u,i=a;for(const c of n)if(c<i&&++r>$a&&Ss("overflow"),c===i){let f=r;for(let h=co;;h+=co){const d=h<=o?sy:h>=o+bf?bf:h-o;if(f<d)break;const p=f-d,m=co-d;e.push(Qm(cS(d+p%m,0))),f=fo(p/m)}e.push(Qm(cS(f,0))),o=rO(r,u,l===s),r=0,++l}++r,++i}return e.join("")},ole=function(n){return nO(n,function(e){return Zse.test(e)?oO(e.slice(4).toLowerCase()):e})},sle=function(n){return nO(n,function(e){return $se.test(e)?"xn--"+sO(e):e})},lO={version:"2.3.1",ucs2:{decode:iO,encode:ile},decode:oO,encode:sO,toASCII:sle,toUnicode:ole},lle={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},ale={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},ule={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},cle={default:lle,zero:ale,commonmark:ule},fle=/^(vbscript|javascript|file|data):/,hle=/^data:image\/(gif|png|jpeg|webp);/;function dle(n){const e=n.trim().toLowerCase();return fle.test(e)?hle.test(e):!0}const aO=["http:","https:","mailto:"];function ple(n){const e=ey(n,!0);if(e.hostname&&(!e.protocol||aO.indexOf(e.protocol)>=0))try{e.hostname=lO.toASCII(e.hostname)}catch{}return Vf($b(e))}function mle(n){const e=ey(n,!0);if(e.hostname&&(!e.protocol||aO.indexOf(e.protocol)>=0))try{e.hostname=lO.toUnicode(e.hostname)}catch{}return Mu($b(e),Mu.defaultChars+"%")}function Bi(n,e){if(!(this instanceof Bi))return new Bi(n,e);e||ny(n)||(e=n||{},n="default"),this.inline=new qf,this.block=new O0,this.core=new ry,this.renderer=new ju,this.linkify=new Xi,this.validateLink=dle,this.normalizeLink=ple,this.normalizeLinkText=mle,this.utils=boe,this.helpers=A0({},Coe),this.options={},this.configure(n),e&&this.set(e)}Bi.prototype.set=function(n){return A0(this.options,n),this};Bi.prototype.configure=function(n){const e=this;if(ny(n)){const t=n;if(n=cle[t],!n)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(t){n.components[t].rules&&e[t].ruler.enableOnly(n.components[t].rules),n.components[t].rules2&&e[t].ruler2.enableOnly(n.components[t].rules2)}),this};Bi.prototype.enable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(r){t=t.concat(this[r].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));const i=n.filter(function(r){return t.indexOf(r)<0});if(i.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+i);return this};Bi.prototype.disable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(r){t=t.concat(this[r].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));const i=n.filter(function(r){return t.indexOf(r)<0});if(i.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+i);return this};Bi.prototype.use=function(n){const e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};Bi.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");const t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};Bi.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};Bi.prototype.parseInline=function(n,e){const t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};Bi.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};const gle=new Db({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(n){return["h"+n.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:n=>({params:n.getAttribute("data-params")||""})}],toDOM(n){return["pre",n.attrs.params?{"data-params":n.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(n){return{order:n.hasAttribute("start")?+n.getAttribute("start"):1,tight:n.hasAttribute("data-tight")}}}],toDOM(n){return["ol",{start:n.attrs.order==1?null:n.attrs.order,"data-tight":n.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:n=>({tight:n.hasAttribute("data-tight")})}],toDOM(n){return["ul",{"data-tight":n.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(n){return{src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt")}}}],toDOM(n){return["img",n.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:n=>n.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name=="strong"},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(n){return{href:n.getAttribute("href"),title:n.getAttribute("title")}}}],toDOM(n){return["a",n.attrs]}},code:{code:!0,parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function ble(n,e){if(n.isText&&e.isText&&Pt.sameSet(n.marks,e.marks))return n.withText(n.text+e.text)}class yle{constructor(e,t){this.schema=e,this.tokenHandlers=t,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:Pt.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let t=this.top(),i=t.content,r=i[i.length-1],o=this.schema.text(e,t.marks),s;r&&(s=ble(r,o))?i[i.length-1]=s:i.push(o)}openMark(e){let t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){let t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){let i=e[t],r=this.tokenHandlers[i.type];if(!r)throw new Error("Token type `"+i.type+"` not supported by Markdown parser");r(this,i,e,t)}}addNode(e,t,i){let r=this.top(),o=e.createAndFill(t,i,r?r.marks:[]);return o?(this.push(o),o):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[],marks:Pt.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function ic(n,e,t,i){return n.getAttrs?n.getAttrs(e,t,i):n.attrs instanceof Function?n.attrs(e):n.attrs}function Xm(n,e){return n.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function fS(n){return n[n.length-1]==`
`?n.slice(0,n.length-1):n}function Ym(){}function kle(n,e){let t=Object.create(null);for(let i in e){let r=e[i];if(r.block){let o=n.nodeType(r.block);Xm(r,i)?t[i]=(s,l,a,u)=>{s.openNode(o,ic(r,l,a,u)),s.addText(fS(l.content)),s.closeNode()}:(t[i+"_open"]=(s,l,a,u)=>s.openNode(o,ic(r,l,a,u)),t[i+"_close"]=s=>s.closeNode())}else if(r.node){let o=n.nodeType(r.node);t[i]=(s,l,a,u)=>s.addNode(o,ic(r,l,a,u))}else if(r.mark){let o=n.marks[r.mark];Xm(r,i)?t[i]=(s,l,a,u)=>{s.openMark(o.create(ic(r,l,a,u))),s.addText(fS(l.content)),s.closeMark(o)}:(t[i+"_open"]=(s,l,a,u)=>s.openMark(o.create(ic(r,l,a,u))),t[i+"_close"]=s=>s.closeMark(o))}else if(r.ignore)Xm(r,i)?t[i]=Ym:(t[i+"_open"]=Ym,t[i+"_close"]=Ym);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(r))}return t.text=(i,r)=>i.addText(r.content),t.inline=(i,r)=>i.parseTokens(r.children),t.softbreak=t.softbreak||(i=>i.addText(" ")),t}let wle=class{constructor(e,t,i){this.schema=e,this.tokenizer=t,this.tokens=i,this.tokenHandlers=kle(e,i)}parse(e,t={}){let i=new yle(this.schema,this.tokenHandlers),r;i.parseTokens(this.tokenizer.parse(e,t));do r=i.closeNode();while(i.stack.length);return r||this.schema.topNodeType.createAndFill()}};function hS(n,e){for(;++e<n.length;)if(n[e].type!="list_item_open")return n[e].hidden;return!1}new wle(gle,Bi("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(n,e,t)=>({tight:hS(e,t)})},ordered_list:{block:"ordered_list",getAttrs:(n,e,t)=>({order:+n.attrGet("start")||1,tight:hS(e,t)})},heading:{block:"heading",getAttrs:n=>({level:+n.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:n=>({params:n.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:n=>({src:n.attrGet("src"),title:n.attrGet("title")||null,alt:n.children[0]&&n.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:n=>({href:n.attrGet("href"),title:n.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});const Cle={open:"",close:"",mixable:!0};let _le=class{constructor(e,t,i={}){this.nodes=e,this.marks=t,this.options=i}serialize(e,t={}){t=Object.assign({},this.options,t);let i=new uO(this.nodes,this.marks,t);return i.renderContent(e),i.out}};const To=new _le({blockquote(n,e){n.wrapBlock("> ",null,e,()=>n.renderContent(e))},code_block(n,e){const t=e.textContent.match(/`{3,}/gm),i=t?t.sort().slice(-1)[0]+"`":"```";n.write(i+(e.attrs.params||"")+`
`),n.text(e.textContent,!1),n.write(`
`),n.write(i),n.closeBlock(e)},heading(n,e){n.write(n.repeat("#",e.attrs.level)+" "),n.renderInline(e,!1),n.closeBlock(e)},horizontal_rule(n,e){n.write(e.attrs.markup||"---"),n.closeBlock(e)},bullet_list(n,e){n.renderList(e,"  ",()=>(e.attrs.bullet||"*")+" ")},ordered_list(n,e){let t=e.attrs.order||1,i=String(t+e.childCount-1).length,r=n.repeat(" ",i+2);n.renderList(e,r,o=>{let s=String(t+o);return n.repeat(" ",i-s.length)+s+". "})},list_item(n,e){n.renderContent(e)},paragraph(n,e){n.renderInline(e),n.closeBlock(e)},image(n,e){n.write("!["+n.esc(e.attrs.alt||"")+"]("+e.attrs.src.replace(/[\(\)]/g,"\\$&")+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(n,e,t,i){for(let r=i+1;r<t.childCount;r++)if(t.child(r).type!=e.type){n.write(`\\
`);return}},text(n,e){n.text(e.text,!n.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(n,e,t,i){return n.inAutolink=Sle(e,t,i),n.inAutolink?"<":"["},close(n,e,t,i){let{inAutolink:r}=n;return n.inAutolink=void 0,r?">":"]("+e.attrs.href.replace(/[\(\)"]/g,"\\$&")+(e.attrs.title?` "${e.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(n,e,t,i){return dS(t.child(i),-1)},close(n,e,t,i){return dS(t.child(i-1),1)},escape:!1}});function dS(n,e){let t=/`+/g,i,r=0;if(n.isText)for(;i=t.exec(n.text);)r=Math.max(r,i[0].length);let o=r>0&&e>0?" `":"`";for(let s=0;s<r;s++)o+="`";return r>0&&e<0&&(o+=" "),o}function Sle(n,e,t){if(n.attrs.title||!/^\w+:/.test(n.attrs.href))return!1;let i=e.child(t);return!i.isText||i.text!=n.attrs.href||i.marks[i.marks.length-1]!=n?!1:t==e.childCount-1||!n.isInSet(e.child(t+1).marks)}let uO=class{constructor(e,t,i){this.nodes=e,this.marks=t,this.options=i,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let t=this.delim,i=/\s+$/.exec(t);i&&(t=t.slice(0,t.length-i[0].length));for(let r=1;r<e;r++)this.out+=t+`
`}this.closed=null}}getMark(e){let t=this.marks[e];if(!t){if(this.options.strict!==!1)throw new Error(`Mark type \`${e}\` not supported by Markdown renderer`);t=Cle}return t}wrapBlock(e,t,i,r){let o=this.delim;this.write(t??e),this.delim+=e,r(),this.delim=o,this.closeBlock(i)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,t=!0){let i=e.split(`
`);for(let r=0;r<i.length;r++)this.write(),!t&&i[r][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(i[r],this.atBlockStart):i[r],r!=i.length-1&&(this.out+=`
`)}render(e,t,i){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,t,i);else{if(this.options.strict!==!1)throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");e.type.isLeaf||(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}}renderContent(e){e.forEach((t,i,r)=>this.render(t,e,r))}renderInline(e,t=!0){this.atBlockStart=t;let i=[],r="",o=(s,l,a)=>{let u=s?s.marks:[];s&&s.type.name===this.options.hardBreakNodeName&&(u=u.filter(m=>{if(a+1==e.childCount)return!1;let g=e.child(a+1);return m.isInSet(g.marks)&&(!g.isText||/\S/.test(g.text))}));let c=r;if(r="",s&&s.isText&&u.some(m=>{let g=this.getMark(m.type.name);return g&&g.expelEnclosingWhitespace&&!m.isInSet(i)})){let[m,g,b]=/^(\s*)(.*)$/m.exec(s.text);g&&(c+=g,s=b?s.withText(b):null,s||(u=i))}if(s&&s.isText&&u.some(m=>{let g=this.getMark(m.type.name);return g&&g.expelEnclosingWhitespace&&(a==e.childCount-1||!m.isInSet(e.child(a+1).marks))})){let[m,g,b]=/^(.*?)(\s*)$/m.exec(s.text);b&&(r=b,s=g?s.withText(g):null,s||(u=i))}let f=u.length?u[u.length-1]:null,h=f&&this.getMark(f.type.name).escape===!1,d=u.length-(h?1:0);e:for(let m=0;m<d;m++){let g=u[m];if(!this.getMark(g.type.name).mixable)break;for(let b=0;b<i.length;b++){let y=i[b];if(!this.getMark(y.type.name).mixable)break;if(g.eq(y)){m>b?u=u.slice(0,b).concat(g).concat(u.slice(b,m)).concat(u.slice(m+1,d)):b>m&&(u=u.slice(0,m).concat(u.slice(m+1,b)).concat(g).concat(u.slice(b,d)));continue e}}}let p=0;for(;p<Math.min(i.length,d)&&u[p].eq(i[p]);)++p;for(;p<i.length;)this.text(this.markString(i.pop(),!1,e,a),!1);if(c&&this.text(c),s){for(;i.length<d;){let m=u[i.length];i.push(m),this.text(this.markString(m,!0,e,a),!1),this.atBlockStart=!1}h&&s.isText?this.text(this.markString(f,!0,e,a)+s.text+this.markString(f,!1,e,a+1),!1):this.render(s,e,a),this.atBlockStart=!1}s!=null&&s.isText&&s.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(o),o(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,i){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let r=typeof e.attrs.tight<"u"?e.attrs.tight:this.options.tightLists,o=this.inTightList;this.inTightList=r,e.forEach((s,l,a)=>{a&&r&&this.flushClose(1),this.wrapBlock(t,i(a),e,()=>this.render(s,e,a))}),this.inTightList=o}esc(e,t=!1){return e=e.replace(/[`*\\~\[\]_]/g,(i,r)=>i=="_"&&r>0&&r+1<e.length&&e[r-1].match(/\w/)&&e[r+1].match(/\w/)?i:"\\"+i),t&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let t=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return t[0]+e+t[1]}repeat(e,t){let i="";for(let r=0;r<t;r++)i+=e;return i}markString(e,t,i,r){let o=this.getMark(e.type.name),s=t?o.open:o.close;return typeof s=="string"?s:s(this,e,i,r)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}};var e2=!0,cO=!1,fO=!1,vle=function(n,e){e&&(e2=!e.enabled,cO=!!e.label,fO=!!e.labelAfter),n.core.ruler.after("inline","github-task-lists",function(t){for(var i=t.tokens,r=2;r<i.length;r++)Mle(i,r)&&(Ale(i[r],t.Token),pS(i[r-2],"class","task-list-item"+(e2?"":" enabled")),pS(i[xle(i,r-2)],"class","contains-task-list"))})};function pS(n,e,t){var i=n.attrIndex(e),r=[e,t];i<0?n.attrPush(r):n.attrs[i]=r}function xle(n,e){for(var t=n[e].level-1,i=e-1;i>=0;i--)if(n[i].level===t)return i;return-1}function Mle(n,e){return Ple(n[e])&&Rle(n[e-1])&&Nle(n[e-2])&&Ile(n[e])}function Ale(n,e){if(n.children.unshift(Ele(n,e)),n.children[1].content=n.children[1].content.slice(3),n.content=n.content.slice(3),cO)if(fO){n.children.pop();var t="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);n.children[0].content=n.children[0].content.slice(0,-1)+' id="'+t+'">',n.children.push(Dle(n.content,t,e))}else n.children.unshift(Ole(e)),n.children.push(Tle(e))}function Ele(n,e){var t=new e("html_inline","",0),i=e2?' disabled="" ':"";return n.content.indexOf("[ ] ")===0?t.content='<input class="task-list-item-checkbox"'+i+'type="checkbox">':(n.content.indexOf("[x] ")===0||n.content.indexOf("[X] ")===0)&&(t.content='<input class="task-list-item-checkbox" checked=""'+i+'type="checkbox">'),t}function Ole(n){var e=new n("html_inline","",0);return e.content="<label>",e}function Tle(n){var e=new n("html_inline","",0);return e.content="</label>",e}function Dle(n,e,t){var i=new t("html_inline","",0);return i.content='<label class="task-list-item-label" for="'+e+'">'+n+"</label>",i.attrs=[{for:e}],i}function Ple(n){return n.type==="inline"}function Rle(n){return n.type==="paragraph_open"}function Nle(n){return n.type==="list_item_open"}function Ile(n){return n.content.indexOf("[ ] ")===0||n.content.indexOf("[x] ")===0||n.content.indexOf("[X] ")===0}const Ble=CS(vle);var Lle=Object.defineProperty,Fle=(n,e,t)=>e in n?Lle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wp=(n,e,t)=>(Fle(n,typeof e!="symbol"?e+"":e,t),t);const jle=qn.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:n=>n.getAttribute("data-tight")==="true"||!n.querySelector("p"),renderHTML:n=>({class:n.tight?this.options.tightClass:null,"data-tight":n.tight?"true":null})}}}]},addCommands(){var n=this;return{toggleTight:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t=>{let{editor:i,commands:r}=t;function o(s){if(!i.isActive(s))return!1;const l=i.getAttributes(s);return r.updateAttributes(s,{tight:e??!(l!=null&&l.tight)})}return n.options.listTypes.some(s=>o(s))}}}}}),mS=Bi();function hO(n,e){return mS.inline.State.prototype.scanDelims.call({src:n,posMax:n.length}),new mS.inline.State(n,null,null,[]).scanDelims(e,!0)}function dO(n,e,t,i){let r=n.substring(0,t)+n.substring(t+e.length);return r=r.substring(0,t+i)+e+r.substring(t+i),r}function zle(n,e,t,i){let r=t,o=n;for(;r<i&&!hO(o,r).can_open;)o=dO(o,e,r,1),r++;return{text:o,from:r,to:i}}function Vle(n,e,t,i){let r=i,o=n;for(;r>t&&!hO(o,r).can_close;)o=dO(o,e,r,-1),r--;return{text:o,from:t,to:r}}function Hle(n,e,t,i){let r={text:n,from:t,to:i};return r=zle(r.text,e,r.from,r.to),r=Vle(r.text,e,r.from,r.to),r.to-r.from<e.length+1&&(r.text=r.text.substring(0,r.from)+r.text.substring(r.to+e.length)),r.text}class qle extends uO{constructor(e,t,i){super(e,t,i??{}),wp(this,"inTable",!1),this.inlines=[]}render(e,t,i){super.render(e,t,i);const r=this.inlines[this.inlines.length-1];if(r!=null&&r.start&&r!==null&&r!==void 0&&r.end){const{delimiter:o,start:s,end:l}=this.normalizeInline(r);this.out=Hle(this.out,o,s,l),this.inlines.pop()}}markString(e,t,i,r){const o=this.marks[e.type.name];if(o.expelEnclosingWhitespace)if(t)this.inlines.push({start:this.out.length,delimiter:o.open});else{const s=this.inlines.pop();this.inlines.push({...s,end:this.out.length})}return super.markString(e,t,i,r)}normalizeInline(e){let{start:t,end:i}=e;for(;this.out.charAt(t).match(/\s/);)t++;return{...e,start:t}}}const pO=Ni.create({name:"markdownHTMLMark",addStorage(){return{markdown:{serialize:{open(n,e){var t,i;return this.editor.storage.markdown.options.html?(t=(i=gS(e))===null||i===void 0?void 0:i[0])!==null&&t!==void 0?t:"":(console.warn(`Tiptap Markdown: "${e.type.name}" mark is only available in html mode`),"")},close(n,e){var t,i;return this.editor.storage.markdown.options.html&&(t=(i=gS(e))===null||i===void 0?void 0:i[1])!==null&&t!==void 0?t:""}},parse:{}}}}});function gS(n){const e=n.type.schema,t=e.text(" ",[n]),r=zf(ye.from(t),e).match(/^(<.*?>) (<\/.*?>)$/);return r?[r[1],r[2]]:null}function ly(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function Wle(n){return n==null?void 0:n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ule(n){const e=n.parentElement,t=e.cloneNode();for(;e.firstChild&&e.firstChild!==n;)t.appendChild(e.firstChild);t.childNodes.length>0&&e.parentElement.insertBefore(t,e),e.parentElement.insertBefore(n,e),e.childNodes.length===0&&e.remove()}function Jle(n){const e=n.parentNode;for(;n.firstChild;)e.insertBefore(n.firstChild,n);e.removeChild(n)}const D0=Wt.create({name:"markdownHTMLNode",addStorage(){return{markdown:{serialize(n,e,t){this.editor.storage.markdown.options.html?n.write(Kle(e,t)):(console.warn(`Tiptap Markdown: "${e.type.name}" node is only available in html mode`),n.write(`[${e.type.name}]`)),e.isBlock&&n.closeBlock(e)},parse:{}}}}});function Kle(n,e){const t=n.type.schema,i=zf(ye.from(n),t);return n.isBlock&&(e instanceof ye||e.type.name===t.topNodeType.name)?Gle(i):i}function Gle(n){const t=ly(n).firstElementChild;return t.innerHTML=t.innerHTML.trim()?`
${t.innerHTML}
`:`
`,t.outerHTML}const Qle=Wt.create({name:"blockquote"}),Xle=Qle.extend({addStorage(){return{markdown:{serialize:To.nodes.blockquote,parse:{}}}}}),Yle=Wt.create({name:"bulletList"}),mO=Yle.extend({addStorage(){return{markdown:{serialize(n,e){return n.renderList(e,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}}}}),Zle=Wt.create({name:"codeBlock"}),$le=Zle.extend({addStorage(){return{markdown:{serialize(n,e){n.write("```"+(e.attrs.language||"")+`
`),n.text(e.textContent,!1),n.ensureNewLine(),n.write("```"),n.closeBlock(e)},parse:{setup(n){var e;n.set({langPrefix:(e=this.options.languageClassPrefix)!==null&&e!==void 0?e:"language-"})},updateDOM(n){n.innerHTML=n.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}}}),eae=Wt.create({name:"hardBreak"}),gO=eae.extend({addStorage(){return{markdown:{serialize(n,e,t,i){for(let r=i+1;r<t.childCount;r++)if(t.child(r).type!=e.type){n.write(n.inTable?D0.storage.markdown.serialize.call(this,n,e,t):`\\
`);return}},parse:{}}}}}),tae=Wt.create({name:"heading"}),nae=tae.extend({addStorage(){return{markdown:{serialize:To.nodes.heading,parse:{}}}}}),iae=Wt.create({name:"horizontalRule"}),rae=iae.extend({addStorage(){return{markdown:{serialize:To.nodes.horizontal_rule,parse:{}}}}}),oae=Wt.create({name:"image"}),sae=oae.extend({addStorage(){return{markdown:{serialize:To.nodes.image,parse:{}}}}}),lae=Wt.create({name:"listItem"}),aae=lae.extend({addStorage(){return{markdown:{serialize:To.nodes.list_item,parse:{}}}}}),uae=Wt.create({name:"orderedList"});function cae(n,e,t){let i=0;for(;t-i>0&&e.child(t-i-1).type.name===n.type.name;i++);return i}const fae=uae.extend({addStorage(){return{markdown:{serialize(n,e,t,i){const r=e.attrs.start||1,o=String(r+e.childCount-1).length,s=n.repeat(" ",o+2),a=cae(e,t,i)%2?") ":". ";n.renderList(e,s,u=>{const c=String(r+u);return n.repeat(" ",o-c.length)+c+a})},parse:{}}}}}),hae=Wt.create({name:"paragraph"}),dae=hae.extend({addStorage(){return{markdown:{serialize:To.nodes.paragraph,parse:{}}}}});function Zm(n){var e,t;return(e=n==null||(t=n.content)===null||t===void 0?void 0:t.content)!==null&&e!==void 0?e:[]}const pae=Wt.create({name:"table"}),mae=pae.extend({addStorage(){return{markdown:{serialize(n,e,t){if(!gae(e)){D0.storage.markdown.serialize.call(this,n,e,t);return}n.inTable=!0,e.forEach((i,r,o)=>{if(n.write("| "),i.forEach((s,l,a)=>{a&&n.write(" | ");const u=s.firstChild;u.textContent.trim()&&n.renderInline(u)}),n.write(" |"),n.ensureNewLine(),!o){const s=Array.from({length:i.childCount}).map(()=>"---").join(" | ");n.write(`| ${s} |`),n.ensureNewLine()}}),n.closeBlock(e),n.inTable=!1},parse:{}}}}});function bS(n){return n.attrs.colspan>1||n.attrs.rowspan>1}function gae(n){const e=Zm(n),t=e[0],i=e.slice(1);return!(Zm(t).some(r=>r.type.name!=="tableHeader"||bS(r)||r.childCount>1)||i.some(r=>Zm(r).some(o=>o.type.name==="tableHeader"||bS(o)||o.childCount>1)))}const bae=Wt.create({name:"taskItem"}),yae=bae.extend({addStorage(){return{markdown:{serialize(n,e){const t=e.attrs.checked?"[x]":"[ ]";n.write(`${t} `),n.renderContent(e)},parse:{updateDOM(n){[...n.querySelectorAll(".task-list-item")].forEach(e=>{const t=e.querySelector("input");e.setAttribute("data-type","taskItem"),t&&(e.setAttribute("data-checked",t.checked),t.remove())})}}}}}}),kae=Wt.create({name:"taskList"}),wae=kae.extend({addStorage(){return{markdown:{serialize:mO.storage.markdown.serialize,parse:{setup(n){n.use(Ble)},updateDOM(n){[...n.querySelectorAll(".contains-task-list")].forEach(e=>{e.setAttribute("data-type","taskList")})}}}}}}),Cae=Wt.create({name:"text"}),_ae=Cae.extend({addStorage(){return{markdown:{serialize(n,e){n.text(Wle(e.text))},parse:{}}}}}),Sae=Ni.create({name:"bold"}),vae=Sae.extend({addStorage(){return{markdown:{serialize:To.marks.strong,parse:{}}}}}),xae=Ni.create({name:"code"}),Mae=xae.extend({addStorage(){return{markdown:{serialize:To.marks.code,parse:{}}}}}),Aae=Ni.create({name:"italic"}),Eae=Aae.extend({addStorage(){return{markdown:{serialize:To.marks.em,parse:{}}}}}),Oae=Ni.create({name:"link"}),Tae=Oae.extend({addStorage(){return{markdown:{serialize:To.marks.link,parse:{}}}}}),Dae=Ni.create({name:"strike"}),Pae=Dae.extend({addStorage(){return{markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}}}}),Rae=[Xle,mO,$le,gO,nae,rae,D0,sae,aae,fae,dae,mae,yae,wae,_ae,vae,Mae,pO,Eae,Tae,Pae];function Cp(n){var e,t;const i=(e=n.storage)===null||e===void 0?void 0:e.markdown,r=(t=Rae.find(o=>o.name===n.name))===null||t===void 0?void 0:t.storage.markdown;return i||r?{...r,...i}:null}class Nae{constructor(e){wp(this,"editor",null),this.editor=e}serialize(e){const t=new qle(this.nodes,this.marks,{hardBreakNodeName:gO.name});return t.renderContent(e),t.out}get nodes(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(t=>[t,this.serializeNode(D0)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(t=>t.type==="node"&&this.serializeNode(t)).map(t=>[t.name,this.serializeNode(t)]))!==null&&e!==void 0?e:[])}}get marks(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(t=>[t,this.serializeMark(pO)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(t=>t.type==="mark"&&this.serializeMark(t)).map(t=>[t.name,this.serializeMark(t)]))!==null&&e!==void 0?e:[])}}serializeNode(e){var t;return(t=Cp(e))===null||t===void 0||(t=t.serialize)===null||t===void 0?void 0:t.bind({editor:this.editor,options:e.options})}serializeMark(e){var t;const i=(t=Cp(e))===null||t===void 0?void 0:t.serialize;return i?{...i,open:typeof i.open=="function"?i.open.bind({editor:this.editor,options:e.options}):i.open,close:typeof i.close=="function"?i.close.bind({editor:this.editor,options:e.options}):i.close}:null}}class Iae{constructor(e,t){wp(this,"editor",null),wp(this,"md",null);let{html:i,linkify:r,breaks:o}=t;this.editor=e,this.md=this.withPatchedRenderer(Bi({html:i,linkify:r,breaks:o}))}parse(e){let{inline:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){this.editor.extensionManager.extensions.forEach(o=>{var s;return(s=Cp(o))===null||s===void 0||(s=s.parse)===null||s===void 0||(s=s.setup)===null||s===void 0?void 0:s.call({editor:this.editor,options:o.options},this.md)});const i=this.md.render(e),r=ly(i);return this.editor.extensionManager.extensions.forEach(o=>{var s;return(s=Cp(o))===null||s===void 0||(s=s.parse)===null||s===void 0||(s=s.updateDOM)===null||s===void 0?void 0:s.call({editor:this.editor,options:o.options},r)}),this.normalizeDOM(r,{inline:t,content:e}),r.innerHTML}return e}normalizeDOM(e,t){let{inline:i,content:r}=t;return this.normalizeBlocks(e),e.querySelectorAll("*").forEach(o=>{var s;((s=o.nextSibling)===null||s===void 0?void 0:s.nodeType)===Node.TEXT_NODE&&!o.closest("pre")&&(o.nextSibling.textContent=o.nextSibling.textContent.replace(/^\n/,""))}),i&&this.normalizeInline(e,r),e}normalizeBlocks(e){const i=Object.values(this.editor.schema.nodes).filter(r=>r.isBlock).map(r=>{var o;return(o=r.spec.parseDOM)===null||o===void 0?void 0:o.map(s=>s.tag)}).flat().filter(Boolean).join(",");i&&[...e.querySelectorAll(i)].forEach(r=>{r.parentElement.matches("p")&&Ule(r)})}normalizeInline(e,t){var i;if((i=e.firstElementChild)!==null&&i!==void 0&&i.matches("p")){var r,o,s,l;const a=e.firstElementChild,{nextElementSibling:u}=a,c=(r=(o=t.match(/^\s+/))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"",f=u?"":(s=(l=t.match(/\s+$/))===null||l===void 0?void 0:l[0])!==null&&s!==void 0?s:"";if(t.match(/^\n\n/)){a.innerHTML=`${a.innerHTML}${f}`;return}Jle(a),e.innerHTML=`${c}${e.innerHTML}${f}`}}withPatchedRenderer(e){const t=i=>function(){const r=i(...arguments);return r===`
`?r:r[r.length-1]===`
`?r.slice(0,-1):r};return e.renderer.rules.hardbreak=t(e.renderer.rules.hardbreak),e.renderer.rules.softbreak=t(e.renderer.rules.softbreak),e.renderer.rules.fence=t(e.renderer.rules.fence),e.renderer.rules.code_block=t(e.renderer.rules.code_block),e.renderer.renderToken=t(e.renderer.renderToken.bind(e.renderer)),e}}const Bae=qn.create({name:"markdownClipboard",addOptions(){return{transformPastedText:!1,transformCopiedText:!1}},addProseMirrorPlugins(){return[new xi({key:new Gr("markdownClipboard"),props:{clipboardTextParser:(n,e,t)=>{if(t||!this.options.transformPastedText)return null;const i=this.editor.storage.markdown.parser.parse(n,{inline:!0});return Yo.fromSchema(this.editor.schema).parseSlice(ly(i),{preserveWhitespace:!0,context:e})},clipboardTextSerializer:n=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(n.content):null}})]}}),iue=qn.create({name:"markdown",priority:50,addOptions(){return{html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}},addCommands(){const n=Eie.Commands.config.addCommands();return{setContent:(e,t,i)=>r=>n.setContent(r.editor.storage.markdown.parser.parse(e),t,i)(r),insertContentAt:(e,t,i)=>r=>n.insertContentAt(e,r.editor.storage.markdown.parser.parse(t,{inline:!0}),i)(r)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new Iae(this.editor,this.options),serializer:new Nae(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage(){return{}},addExtensions(){return[jle.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),Bae.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}});export{ur as D,qn as E,Pie as H,v0 as I,Jae as J,Ni as M,Wt as N,xi as P,$ae as S,DO as _,vu as a,xu as b,Fae as c,Gr as d,Kae as e,Qae as f,CS as g,Gae as h,xE as i,iie as j,On as k,Zae as l,vi as m,Die as n,iue as o,wE as p,lie as q,Xae as r,Yae as s,df as w};
