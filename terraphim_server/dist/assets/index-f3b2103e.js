import{aa as Oe,S as De,i as Ue,s as Ee,q as _,Y as le,b as L,y as u,Z as he,I as de,j as C,ak as fe,au as ze,r as B,a as w,v as c,z as J,t as E,d as D,B as V,av as xl,aw as dt,H as $e,U as Ce,V as Le,ax as Ml,ay as en,F as Je,g as Se,e as Te,O as Ve,az as Al,l as z,E as Me,aA as je,aB as Pl,C as et,D as yt,G as St,aC as jl,a2 as tn,aD as ln,x as Ct,ac as nn,m as At,af as at,aE as Tt,W as Xe,a7 as on,a9 as sn,a1 as pe,n as rn,w as Qt}from"./vendor-ui-9d42ca49.js";import{R as He,S as Pt}from"./vendor-utils-9430c5aa.js";import{J as Kl,_ as an,o as cn}from"./vendor-editor-1278af61.js";import{P as Il,T as Lt,u as Fl,y as un,A as fn,S as dn,q as pn}from"./vendor-atomic-756de3e6.js";import{E as _n}from"./novel-editor-7c40b83e.js";import{s as Et,z as mn,a as hn,l as gn,m as vn,c as bn,b as kn,B as $n,d as wn}from"./vendor-charts-e6a4a6c9.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();const Be={ServerURL:location.protocol+"//"+window.location.host||"/"},Dt=Oe([]),yn={id:"Desktop",global_shortcut:"",roles:{},default_role:{original:"",lowercase:""},selected_role:{original:"",lowercase:""}},ft=Oe("spacelab"),xe=Oe("selected"),Ne=Oe(!1),Sn=Oe(`${Be.ServerURL}/documents/search`),Ke=Oe(yn),Xt=Oe([]);let Ot=Oe("");const ut=Oe(!1);let Qe=null;function Tn(l){if(typeof document>"u")return;const e=`/assets/bulmaswatch/${l}/bulmaswatch.min.css`;if(Qe!=null&&Qe.href.endsWith(e))return;const t=document.createElement("link");t.rel="stylesheet",t.href=e,t.id="bulma-theme",t.onload=()=>{Qe&&Qe!==t&&Qe.remove(),Qe=t},document.head.appendChild(t);const n=document.head.querySelector('meta[name="color-scheme"]');n&&n.setAttribute("content",l)}ft.subscribe(Tn);function Rn(l){let e,t;return{c(){e=_("option"),t=le(l[1]),e.__value=l[0],e.value=e.__value},m(n,o){L(n,e,o),u(e,t)},p(n,[o]){o&2&&he(t,n[1]),o&1&&(e.__value=n[0],e.value=e.__value)},i:de,o:de,d(n){n&&C(e)}}}function Cn(l,e,t){let n,{subject:o}=e;const r=Il(o),s=Lt(r,Fl.properties.name);return fe(l,s,a=>t(1,n=a)),Lt(r,"http://localhost:9883/property/theme"),l.$$set=a=>{"subject"in a&&t(0,o=a.subject)},[o,n,s]}class Ln extends De{constructor(e){super(),Ue(this,e,Cn,Rn,Ee,{subject:0})}}function Nn(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function Ut(l,e=!1){const t=Nn(),n=`_${t}`;return Object.defineProperty(window,n,{value:o=>(e&&Reflect.deleteProperty(window,n),l==null?void 0:l(o)),writable:!1,configurable:!0}),t}async function ke(l,e={}){return new Promise((t,n)=>{const o=Ut(s=>{t(s),Reflect.deleteProperty(window,`_${r}`)},!0),r=Ut(s=>{n(s),Reflect.deleteProperty(window,`_${o}`)},!0);window.__TAURI_IPC__({cmd:l,callback:o,error:r,...e})})}function xt(l,e,t){const n=l.slice();return n[25]=e[t],n}function En(l){let e,t,n;function o(s){l[13](s)}let r={};return l[5]!==void 0&&(r.value=l[5]),e=new dt({props:r}),$e.push(()=>Ce(e,"value",o)),{c(){B(e.$$.fragment)},m(s,a){J(e,s,a),n=!0},p(s,a){const i={};!t&&a&32&&(t=!0,i.value=s[5],Le(()=>t=!1)),e.$set(i)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function On(l){let e,t,n;function o(s){l[14](s)}let r={type:"password",placeholder:"secret",icon:"fas fa-lock",expanded:!0};return l[6]!==void 0&&(r.value=l[6]),e=new dt({props:r}),$e.push(()=>Ce(e,"value",o)),{c(){B(e.$$.fragment)},m(s,a){J(e,s,a),n=!0},p(s,a){const i={};!t&&a&64&&(t=!0,i.value=s[6],Le(()=>t=!1)),e.$set(i)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function Dn(l){let e;return{c(){e=le("Save")},m(t,n){L(t,e,n)},d(t){t&&C(e)}}}function Un(l){let e,t;return e=new Ml({props:{type:"is-success",class:"is-right",iconPack:"fa",iconLeft:"check",$$slots:{default:[Dn]},$$scope:{ctx:l}}}),e.$on("click",l[8]),e.$on("submit",l[8]),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},p(n,o){const r={};o&268435456&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Mn(l){let e,t,n,o,r,s;return e=new ze({props:{$$slots:{default:[En]},$$scope:{ctx:l}}}),n=new ze({props:{grouped:!0,$$slots:{default:[On]},$$scope:{ctx:l}}}),r=new ze({props:{grouped:!0,$$slots:{default:[Un]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment),t=w(),B(n.$$.fragment),o=w(),B(r.$$.fragment)},m(a,i){J(e,a,i),L(a,t,i),J(n,a,i),L(a,o,i),J(r,a,i),s=!0},p(a,i){const d={};i&268435488&&(d.$$scope={dirty:i,ctx:a}),e.$set(d);const m={};i&268435520&&(m.$$scope={dirty:i,ctx:a}),n.$set(m);const p={};i&268435456&&(p.$$scope={dirty:i,ctx:a}),r.$set(p)},i(a){s||(E(e.$$.fragment,a),E(n.$$.fragment,a),E(r.$$.fragment,a),s=!0)},o(a){D(e.$$.fragment,a),D(n.$$.fragment,a),D(r.$$.fragment,a),s=!1},d(a){V(e,a),a&&C(t),V(n,a),a&&C(o),V(r,a)}}}function An(l){let e,t,n;function o(s){l[15](s)}let r={type:"search",placeholder:"Fetch JSON",icon:"search"};return l[3]!==void 0&&(r.value=l[3]),e=new dt({props:r}),$e.push(()=>Ce(e,"value",o)),{c(){B(e.$$.fragment)},m(s,a){J(e,s,a),n=!0},p(s,a){const i={};!t&&a&8&&(t=!0,i.value=s[3],Le(()=>t=!1)),e.$set(i)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function Pn(l){let e;return{c(){e=le("WikiPage")},m(t,n){L(t,e,n)},d(t){t&&C(e)}}}function jn(l){let e,t,n,o,r,s;function a(p){l[16](p)}let i={type:"search",placeholder:"Post JSON",icon:"search"};l[4]!==void 0&&(i.value=l[4]),e=new dt({props:i}),$e.push(()=>Ce(e,"value",a));function d(p){l[17](p)}let m={$$slots:{default:[Pn]},$$scope:{ctx:l}};return l[2]!==void 0&&(m.checked=l[2]),o=new en({props:m}),$e.push(()=>Ce(o,"checked",d)),{c(){B(e.$$.fragment),n=w(),B(o.$$.fragment)},m(p,f){J(e,p,f),L(p,n,f),J(o,p,f),s=!0},p(p,f){const g={};!t&&f&16&&(t=!0,g.value=p[4],Le(()=>t=!1)),e.$set(g);const h={};f&268435456&&(h.$$scope={dirty:f,ctx:p}),!r&&f&4&&(r=!0,h.checked=p[2],Le(()=>r=!1)),o.$set(h)},i(p){s||(E(e.$$.fragment,p),E(o.$$.fragment,p),s=!0)},o(p){D(e.$$.fragment,p),D(o.$$.fragment,p),s=!1},d(p){V(e,p),p&&C(n),V(o,p)}}}function Kn(l){let e;return{c(){e=le("Fetch")},m(t,n){L(t,e,n)},d(t){t&&C(e)}}}function In(l){let e,t;return e=new Ml({props:{type:"is-primary",$$slots:{default:[Kn]},$$scope:{ctx:l}}}),e.$on("click",l[9]),e.$on("submit",l[9]),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},p(n,o){const r={};o&268435456&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Fn(l){let e,t,n,o,r,s;return e=new ze({props:{grouped:!0,$$slots:{default:[An]},$$scope:{ctx:l}}}),n=new ze({props:{grouped:!0,$$slots:{default:[jn]},$$scope:{ctx:l}}}),r=new ze({props:{grouped:!0,$$slots:{default:[In]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment),t=w(),B(n.$$.fragment),o=w(),B(r.$$.fragment)},m(a,i){J(e,a,i),L(a,t,i),J(n,a,i),L(a,o,i),J(r,a,i),s=!0},p(a,i){const d={};i&268435464&&(d.$$scope={dirty:i,ctx:a}),e.$set(d);const m={};i&268435476&&(m.$$scope={dirty:i,ctx:a}),n.$set(m);const p={};i&268435456&&(p.$$scope={dirty:i,ctx:a}),r.$set(p)},i(a){s||(E(e.$$.fragment,a),E(n.$$.fragment,a),E(r.$$.fragment,a),s=!0)},o(a){D(e.$$.fragment,a),D(n.$$.fragment,a),D(r.$$.fragment,a),s=!1},d(a){V(e,a),a&&C(t),V(n,a),a&&C(o),V(r,a)}}}function Gn(l){let e,t,n,o,r;return o=new Kl({props:{content:l[1],onChange:l[7]}}),{c(){e=_("p"),e.innerHTML=`<i>The best editing experience is to configure Atomic Server, in the
        meantime use editor below. You will need to refresh page via Command R
        or Ctrl-R to see changes</i>`,t=w(),n=_("div"),B(o.$$.fragment),c(n,"class","editor")},m(s,a){L(s,e,a),L(s,t,a),L(s,n,a),J(o,n,null),r=!0},p(s,a){const i={};a&2&&(i.content=s[1]),o.$set(i)},i(s){r||(E(o.$$.fragment,s),r=!0)},o(s){D(o.$$.fragment,s),r=!1},d(s){s&&C(e),s&&C(t),s&&C(n),V(o)}}}function el(l){let e,t;return e=new Ln({props:{subject:l[25]}}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},p(n,o){const r={};o&1&&(r.subject=n[25]),e.$set(r)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Hn(l){let e,t,n=l[0]??[],o=[];for(let s=0;s<n.length;s+=1)o[s]=el(xt(l,n,s));const r=s=>D(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=Je()},m(s,a){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(s,a);L(s,e,a),t=!0},p(s,a){if(a&1){n=s[0]??[];let i;for(i=0;i<n.length;i+=1){const d=xt(s,n,i);o[i]?(o[i].p(d,a),E(o[i],1)):(o[i]=el(d),o[i].c(),E(o[i],1),o[i].m(e.parentNode,e))}for(Se(),i=n.length;i<o.length;i+=1)r(i);Te()}},i(s){if(!t){for(let a=0;a<n.length;a+=1)E(o[a]);t=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)D(o[a]);t=!1},d(s){Ve(o,s),s&&C(e)}}}function Wn(l){let e,t;return e=new xl({props:{$$slots:{default:[Hn]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},p(n,o){const r={};o&268435457&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function qn(l){let e,t,n,o,r,s,a,i,d,m,p,f,g;return t=new He({props:{path:"/atomic",$$slots:{default:[Mn]},$$scope:{ctx:l}}}),o=new He({props:{path:"/json",$$slots:{default:[Fn]},$$scope:{ctx:l}}}),s=new He({props:{path:"/editor",$$slots:{default:[Gn]},$$scope:{ctx:l}}}),m=new ze({props:{grouped:!0,position:"is-right",$$slots:{default:[Wn]},$$scope:{ctx:l}}}),{c(){e=_("div"),B(t.$$.fragment),n=w(),B(o.$$.fragment),r=w(),B(s.$$.fragment),a=w(),i=_("hr"),d=w(),B(m.$$.fragment),p=w(),f=_("nav"),f.innerHTML=`<div class="navbar-brand"><a class="navbar-item" href="/"><span class="icon" style="color: #333;"><i class="fas fa-home"></i></span></a> 
    <a class="navbar-item" href="/fetch/json">Fetch JSON Data</a> 
    <a class="navbar-item" href="/fetch/atomic">Set Atomic Server</a> 
    <a class="navbar-item" href="/fetch/editor">Edit JSON config</a></div>`,c(e,"class","box"),c(f,"class","navbar")},m(h,k){L(h,e,k),J(t,e,null),u(e,n),J(o,e,null),u(e,r),J(s,e,null),L(h,a,k),L(h,i,k),L(h,d,k),J(m,h,k),L(h,p,k),L(h,f,k),g=!0},p(h,[k]){const $={};k&268435552&&($.$$scope={dirty:k,ctx:h}),t.$set($);const v={};k&268435484&&(v.$$scope={dirty:k,ctx:h}),o.$set(v);const b={};k&268435458&&(b.$$scope={dirty:k,ctx:h}),s.$set(b);const U={};k&268435457&&(U.$$scope={dirty:k,ctx:h}),m.$set(U)},i(h){g||(E(t.$$.fragment,h),E(o.$$.fragment,h),E(s.$$.fragment,h),E(m.$$.fragment,h),g=!0)},o(h){D(t.$$.fragment,h),D(o.$$.fragment,h),D(s.$$.fragment,h),D(m.$$.fragment,h),g=!1},d(h){h&&C(e),V(t),V(o),V(s),h&&C(a),h&&C(i),h&&C(d),V(m,h),h&&C(p),h&&C(f)}}}function zn(l,e,t){let n,o,r,s,a;fe(l,un,O=>t(19,r=O)),fe(l,Ne,O=>t(20,s=O)),fe(l,Ke,O=>t(21,a=O));let i={json:a};function d(O){if(console.log("contents changed:",O),console.log("is tauri",s),Ke.update(y=>(y=O.json,y)),Ne)console.log("Updating config on server"),ke("update_config",{configNew:O.json}).then(y=>{console.log(`Message: ${y}`)}).catch(y=>console.error(y));else{let y=`${Be.ServerURL}/config/`;fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O.json)})}t(1,i=O)}let m=!1,p="https://raw.githubusercontent.com/terraphim/terraphim-cloud-fastapi/main/data/ref_arch.json",f="http://localhost:8000/documents/",g="http://localhost:9883/",h;const k=async()=>{console.log("Updating atomic server configuration");const O=fn.fromSecret(h);r.setServerUrl(g),console.log("Server set.Setting agent"),r.setAgent(O)},$=async()=>{U()},v=({data:{msg:O,data:y}})=>{console.log(O,y)};let b;const U=async()=>{const O=await an(()=>import("./fetcher.worker-7e58969a.js"),[]);b=new O.default,b.onmessage=v;const y={msg:"fetcher",data:{url:p,postUrl:f,isWiki:m}};b.postMessage(y)},I=Il("http://localhost:9883/config/y3zx5wtm0bq"),W=Lt(I,Fl.properties.name);fe(l,W,O=>t(12,o=O));const T=Lt(I,"http://localhost:9883/property/role");fe(l,T,O=>t(0,n=O));function R(O){g=O,t(5,g)}function F(O){h=O,t(6,h)}function q(O){p=O,t(3,p)}function Y(O){f=O,t(4,f)}function G(O){m=O,t(2,m)}return l.$$.update=()=>{l.$$.dirty&4096&&console.log("Print name",o),l.$$.dirty&1&&console.log("Print roles",n)},[n,i,m,p,f,g,h,d,k,$,W,T,o,R,F,q,Y,G]}class Bn extends De{constructor(e){super(),Ue(this,e,zn,qn,Ee,{})}}function Jn(l){let e,t;return e=new _n({props:{defaultValue:l[0],isEditable:!l[1],disableLocalStorage:!0,onUpdate:l[2],extensions:[cn]}}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},p(n,[o]){const r={};o&1&&(r.defaultValue=n[0]),o&2&&(r.isEditable=!n[1]),e.$set(r)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Vn(l,e,t){let{html:n=""}=e,{readOnly:o=!1}=e,{outputFormat:r="html"}=e;const s=a=>{r==="markdown"?t(0,n=a.storage.markdown.getMarkdown()):t(0,n=a.getHTML())};return l.$$set=a=>{"html"in a&&t(0,n=a.html),"readOnly"in a&&t(1,o=a.readOnly),"outputFormat"in a&&t(3,r=a.outputFormat)},[n,o,s,r]}class Yn extends De{constructor(e){super(),Ue(this,e,Vn,Jn,Ee,{html:0,readOnly:1,outputFormat:3})}}function tl(l){let e,t,n,o,r,s,a,i,d,m,p;return{c(){e=_("div"),t=_("h3"),n=_("span"),n.textContent="Knowledge Graph",o=le(`
          Term: `),r=_("strong"),s=le(l[2]),a=le(" | Rank: "),i=_("strong"),d=le(l[3]),m=w(),p=_("hr"),c(n,"class","tag is-info svelte-329px1"),c(t,"class","subtitle is-6 svelte-329px1"),c(p,"class","svelte-329px1"),c(e,"class","kg-context svelte-329px1")},m(f,g){L(f,e,g),u(e,t),u(t,n),u(t,o),u(t,r),u(r,s),u(t,a),u(t,i),u(i,d),u(e,m),u(e,p)},p(f,g){g&4&&he(s,f[2]),g&8&&he(d,f[3])},d(f){f&&C(e)}}}function Zn(l){let e,t,n,o,r,s,a,i;const d=[xn,Xn],m=[];function p(f,g){return f[5]?0:1}return t=p(l),n=m[t]=d[t](l),{c(){e=_("div"),n.c(),o=w(),r=_("div"),r.innerHTML='<span class="hint-text svelte-329px1">Double-click to edit â€¢ Ctrl+E to edit â€¢ Ctrl+S to save â€¢ Click KG links to explore</span>',c(r,"class","edit-hint svelte-329px1"),c(e,"class","content-viewer svelte-329px1"),c(e,"tabindex","0"),c(e,"role","button"),c(e,"aria-label","Double-click to edit article content")},m(f,g){L(f,e,g),m[t].m(e,null),u(e,o),u(e,r),l[20](e),s=!0,a||(i=[z(e,"dblclick",l[14]),z(e,"keydown",l[15]),z(e,"click",l[13])],a=!0)},p(f,g){let h=t;t=p(f),t===h?m[t].p(f,g):(Se(),D(m[h],1,1,()=>{m[h]=null}),Te(),n=m[t],n?n.p(f,g):(n=m[t]=d[t](f),n.c()),E(n,1),n.m(e,o))},i(f){s||(E(n),s=!0)},o(f){D(n),s=!1},d(f){f&&C(e),m[t].d(),l[20](null),a=!1,Me(i)}}}function Qn(l){let e,t,n,o,r,s,a,i,d,m;function p(g){l[18](g)}let f={outputFormat:l[11]};return l[1].body!==void 0&&(f.html=l[1].body),e=new Yn({props:f}),$e.push(()=>Ce(e,"html",p)),{c(){B(e.$$.fragment),n=w(),o=_("div"),r=_("button"),r.textContent="Save",s=w(),a=_("button"),a.textContent="Cancel",c(r,"class","button is-primary"),c(a,"class","button is-light"),c(o,"class","edit-controls svelte-329px1")},m(g,h){J(e,g,h),L(g,n,h),L(g,o,h),u(o,r),u(o,s),u(o,a),i=!0,d||(m=[z(r,"click",l[12]),z(a,"click",l[19])],d=!0)},p(g,h){const k={};h&2048&&(k.outputFormat=g[11]),!t&&h&2&&(t=!0,k.html=g[1].body,Le(()=>t=!1)),e.$set(k)},i(g){i||(E(e.$$.fragment,g),i=!0)},o(g){D(e.$$.fragment,g),i=!1},d(g){V(e,g),g&&C(n),g&&C(o),d=!1,Me(m)}}}function Xn(l){let e,t,n;return t=new Pt({props:{source:l[1].body}}),{c(){e=_("div"),B(t.$$.fragment),c(e,"class","markdown-content svelte-329px1")},m(o,r){L(o,e,r),J(t,e,null),n=!0},p(o,r){const s={};r&2&&(s.source=o[1].body),t.$set(s)},i(o){n||(E(t.$$.fragment,o),n=!0)},o(o){D(t.$$.fragment,o),n=!1},d(o){o&&C(e),V(t)}}}function xn(l){let e,t=l[1].body+"";return{c(){e=_("div"),c(e,"class","prose svelte-329px1")},m(n,o){L(n,e,o),e.innerHTML=t},p(n,o){o&2&&t!==(t=n[1].body+"")&&(e.innerHTML=t)},i:de,o:de,d(n){n&&C(e)}}}function eo(l){let e,t,n,o,r,s=l[1].title+"",a,i,d,m,p,f,g,h=l[2]&&l[3]!==null&&tl(l);const k=[Qn,Zn],$=[];function v(b,U){return b[4]?0:1}return d=v(l),m=$[d]=k[d](l),{c(){e=_("div"),t=_("button"),n=w(),h&&h.c(),o=w(),r=_("h2"),a=le(s),i=w(),m.c(),c(t,"class","delete is-large modal-close-btn svelte-329px1"),c(t,"aria-label","close"),c(r,"class","svelte-329px1"),c(e,"class","box wrapper svelte-329px1")},m(b,U){L(b,e,U),u(e,t),u(e,n),h&&h.m(e,null),u(e,o),u(e,r),u(r,a),u(e,i),$[d].m(e,null),p=!0,f||(g=z(t,"click",l[17]),f=!0)},p(b,U){b[2]&&b[3]!==null?h?h.p(b,U):(h=tl(b),h.c(),h.m(e,o)):h&&(h.d(1),h=null),(!p||U&2)&&s!==(s=b[1].title+"")&&he(a,s);let I=d;d=v(b),d===I?$[d].p(b,U):(Se(),D($[I],1,1,()=>{$[I]=null}),Te(),m=$[d],m?m.p(b,U):(m=$[d]=k[d](b),m.c()),E(m,1),m.m(e,null))},i(b){p||(E(m),p=!0)},o(b){D(m),p=!1},d(b){b&&C(e),h&&h.d(),$[d].d(),f=!1,g()}}}function ll(l){let e,t,n;function o(s){l[23](s)}let r={$$slots:{default:[no]},$$scope:{ctx:l}};return l[7]!==void 0&&(r.active=l[7]),e=new Al({props:r}),$e.push(()=>Ce(e,"active",o)),{c(){B(e.$$.fragment)},m(s,a){J(e,s,a),n=!0},p(s,a){const i={};a&536872832&&(i.$$scope={dirty:a,ctx:s}),!t&&a&128&&(t=!0,i.active=s[7],Le(()=>t=!1)),e.$set(i)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function nl(l){let e,t,n,o,r,s,a,i,d,m,p;return{c(){e=_("div"),t=_("h3"),n=_("span"),n.textContent="Knowledge Graph",o=le(`
            Term: `),r=_("strong"),s=le(l[9]),a=le(" | Rank: "),i=_("strong"),d=le(l[10]),m=w(),p=_("hr"),c(n,"class","tag is-info svelte-329px1"),c(t,"class","subtitle is-6 svelte-329px1"),c(p,"class","svelte-329px1"),c(e,"class","kg-context svelte-329px1")},m(f,g){L(f,e,g),u(e,t),u(t,n),u(t,o),u(t,r),u(r,s),u(t,a),u(t,i),u(i,d),u(e,m),u(e,p)},p(f,g){g&512&&he(s,f[9]),g&1024&&he(d,f[10])},d(f){f&&C(e)}}}function to(l){let e,t,n;return t=new Pt({props:{source:l[8].body}}),{c(){e=_("div"),B(t.$$.fragment),c(e,"class","markdown-content svelte-329px1")},m(o,r){L(o,e,r),J(t,e,null),n=!0},p(o,r){const s={};r&256&&(s.source=o[8].body),t.$set(s)},i(o){n||(E(t.$$.fragment,o),n=!0)},o(o){D(t.$$.fragment,o),n=!1},d(o){o&&C(e),V(t)}}}function lo(l){let e,t=l[8].body+"";return{c(){e=_("div"),c(e,"class","prose svelte-329px1")},m(n,o){L(n,e,o),e.innerHTML=t},p(n,o){o&256&&t!==(t=n[8].body+"")&&(e.innerHTML=t)},i:de,o:de,d(n){n&&C(e)}}}function no(l){let e,t,n,o,r,s=l[8].title+"",a,i,d,m,p,f,g,h,k,$,v,b=l[9]&&l[10]!==null&&nl(l);const U=[lo,to],I=[];function W(T,R){return R&256&&(m=null),m==null&&(m=!!(T[8].body&&(/<html/i.test(T[8].body)||/<body/i.test(T[8].body)||/<head/i.test(T[8].body)))),m?0:1}return p=W(l,-1),f=I[p]=U[p](l),{c(){e=_("div"),t=_("button"),n=w(),b&&b.c(),o=w(),r=_("h2"),a=le(s),i=w(),d=_("div"),f.c(),g=w(),h=_("div"),h.innerHTML='<span class="hint-text svelte-329px1">Knowledge Graph document â€¢ Click KG links to explore further</span>',c(t,"class","delete is-large modal-close-btn svelte-329px1"),c(t,"aria-label","close"),c(r,"class","svelte-329px1"),c(h,"class","edit-hint svelte-329px1"),c(d,"class","content-viewer svelte-329px1"),c(d,"tabindex","0"),c(d,"role","button"),c(d,"aria-label","KG document content - click KG links to explore further"),c(e,"class","box wrapper svelte-329px1")},m(T,R){L(T,e,R),u(e,t),u(e,n),b&&b.m(e,null),u(e,o),u(e,r),u(r,a),u(e,i),u(e,d),I[p].m(d,null),u(d,g),u(d,h),k=!0,$||(v=[z(t,"click",l[22]),z(d,"click",l[13])],$=!0)},p(T,R){T[9]&&T[10]!==null?b?b.p(T,R):(b=nl(T),b.c(),b.m(e,o)):b&&(b.d(1),b=null),(!k||R&256)&&s!==(s=T[8].title+"")&&he(a,s);let F=p;p=W(T,R),p===F?I[p].p(T,R):(Se(),D(I[F],1,1,()=>{I[F]=null}),Te(),f=I[p],f?f.p(T,R):(f=I[p]=U[p](T),f.c()),E(f,1),f.m(d,g))},i(T){k||(E(f),k=!0)},o(T){D(f),k=!1},d(T){T&&C(e),b&&b.d(),I[p].d(),$=!1,Me(v)}}}function oo(l){let e,t,n,o,r;function s(d){l[21](d)}let a={$$slots:{default:[eo]},$$scope:{ctx:l}};l[0]!==void 0&&(a.active=l[0]),e=new Al({props:a}),$e.push(()=>Ce(e,"active",s));let i=l[8]&&ll(l);return{c(){B(e.$$.fragment),n=w(),i&&i.c(),o=Je()},m(d,m){J(e,d,m),L(d,n,m),i&&i.m(d,m),L(d,o,m),r=!0},p(d,[m]){const p={};m&536873087&&(p.$$scope={dirty:m,ctx:d}),!t&&m&1&&(t=!0,p.active=d[0],Le(()=>t=!1)),e.$set(p),d[8]?i?(i.p(d,m),m&256&&E(i,1)):(i=ll(d),i.c(),E(i,1),i.m(o.parentNode,o)):i&&(Se(),D(i,1,1,()=>{i=null}),Te())},i(d){r||(E(e.$$.fragment,d),E(i),r=!0)},o(d){D(e.$$.fragment,d),D(i),r=!1},d(d){V(e,d),d&&C(n),i&&i.d(d),d&&C(o)}}}function so(l,e,t){let n,o,r,s;fe(l,Ne,N=>t(25,r=N)),fe(l,xe,N=>t(26,s=N));let{active:a=!1}=e,{item:i}=e,{initialEdit:d=!1}=e,{kgTerm:m=null}=e,{kgRank:p=null}=e,f=!1,g,h=!1,k=null,$=null,v=null;async function b(){if(r)try{const N=await ke("get_document",{document_id:i.id});N!=null&&N.document&&t(1,i=N.document)}catch(N){console.error("Failed to load document",N)}}async function U(){if(!r){t(4,f=!1);return}try{await ke("create_document",{document:i}),t(4,f=!1)}catch(N){console.error("Failed to save document",N)}}async function I(N){var Z,j,ne,Q,ae;t(9,$=N),console.log("ðŸ” KG Link Click Debug Info:"),console.log("  Term clicked:",N),console.log("  Current role:",s),console.log("  Is Tauri mode:",r);try{if(r){console.log("  Making Tauri invoke call..."),console.log("  Tauri command: find_documents_for_kg_term"),console.log("  Tauri params:",{roleName:s,term:N});const oe=await ke("find_documents_for_kg_term",{roleName:s,term:N});console.log("  ðŸ“¥ Tauri response received:"),console.log("    Status:",oe.status),console.log("    Results count:",((Z=oe.results)==null?void 0:Z.length)||0),console.log("    Total:",oe.total||0),console.log("    Full response:",JSON.stringify(oe,null,2)),oe.status==="success"&&oe.results&&oe.results.length>0?(t(8,k=oe.results[0]),t(10,v=k.rank||0),console.log("  âœ… Found KG document:"),console.log("    Title:",k.title),console.log("    Rank:",v),console.log("    Body length:",((j=k.body)==null?void 0:j.length)||0,"characters"),t(7,h=!0)):(console.warn(`  âš ï¸  No KG documents found for term: "${N}" in role: "${s}"`),console.warn("    This could indicate:"),console.warn("    1. Knowledge graph not built for this role"),console.warn("    2. Term not found in knowledge graph"),console.warn("    3. Role not configured with TerraphimGraph relevance function"),console.warn("    Suggestion: Check server logs for KG building status"))}else{console.log("  Making HTTP fetch call...");const oe=Be.ServerURL,_e=encodeURIComponent(s),P=encodeURIComponent(N),ee=`${oe}/roles/${_e}/kg_search?term=${P}`;console.log("  ðŸ“¤ HTTP Request details:"),console.log("    Base URL:",oe),console.log("    Role (encoded):",_e),console.log("    Term (encoded):",P),console.log("    Full URL:",ee);const X=await fetch(ee);if(console.log("  ðŸ“¥ HTTP Response received:"),console.log("    Status code:",X.status),console.log("    Status text:",X.statusText),console.log("    Headers:",Object.fromEntries(X.headers.entries())),!X.ok)throw new Error(`HTTP error! Status: ${X.status} - ${X.statusText}`);const te=await X.json();console.log("  ðŸ“„ Response data:"),console.log("    Status:",te.status),console.log("    Results count:",((ne=te.results)==null?void 0:ne.length)||0),console.log("    Total:",te.total||0),console.log("    Full response:",JSON.stringify(te,null,2)),te.status==="success"&&te.results&&te.results.length>0?(t(8,k=te.results[0]),t(10,v=k.rank||0),console.log("  âœ… Found KG document:"),console.log("    Title:",k.title),console.log("    Rank:",v),console.log("    Body length:",((Q=k.body)==null?void 0:Q.length)||0,"characters"),t(7,h=!0)):(console.warn(`  âš ï¸  No KG documents found for term: "${N}" in role: "${s}"`),console.warn("    This could indicate:"),console.warn("    1. Server not configured with Terraphim Engineer role"),console.warn("    2. Knowledge graph not built on server"),console.warn("    3. Term not found in knowledge graph"),console.warn("    Suggestion: Check server logs at startup for KG building status"),console.warn("    API URL tested:",ee))}}catch(oe){console.error("âŒ Error fetching KG document:"),console.error("  Error type:",oe.constructor.name),console.error("  Error message:",oe.message||oe),console.error("  Request details:",{term:N,role:s,isTauri:r,timestamp:new Date().toISOString()}),!r&&((ae=oe.message)!=null&&ae.includes("Failed to fetch"))&&(console.error("  ðŸ’¡ Network error suggestions:"),console.error("    1. Check if server is running on expected port"),console.error("    2. Check CORS configuration"),console.error("    3. Verify server URL in CONFIG.ServerURL"))}finally{}}function W(N){const Z=N.target;if(Z.tagName==="A"){const j=Z.getAttribute("href");if(j&&j.startsWith("kg:")){N.preventDefault();const ne=j.substring(3);I(ne)}}}function T(){t(4,f=!0)}function R(N){N.type!=="dblclick"&&((N.ctrlKey||N.metaKey)&&N.key==="e"&&(N.preventDefault(),t(4,f=!0)),f&&(N.ctrlKey||N.metaKey)&&N.key==="s"&&(N.preventDefault(),U()),N.key==="Escape"&&(N.preventDefault(),f?t(4,f=!1):t(0,a=!1)))}const F=()=>t(0,a=!1);function q(N){l.$$.not_equal(i.body,N)&&(i.body=N,t(1,i))}const Y=()=>t(4,f=!1);function G(N){$e[N?"unshift":"push"](()=>{g=N,t(6,g)})}function O(N){a=N,t(0,a)}const y=()=>t(7,h=!1);function H(N){h=N,t(7,h)}return l.$$set=N=>{"active"in N&&t(0,a=N.active),"item"in N&&t(1,i=N.item),"initialEdit"in N&&t(16,d=N.initialEdit),"kgTerm"in N&&t(2,m=N.kgTerm),"kgRank"in N&&t(3,p=N.kgRank)},l.$$.update=()=>{l.$$.dirty&65537&&a&&d&&t(4,f=!0),l.$$.dirty&19&&a&&i&&!f&&b(),l.$$.dirty&2&&t(5,n=i!=null&&i.body?/<html/i.test(i.body)||/<body/i.test(i.body)||/<head/i.test(i.body)||/^\s*<(!DOCTYPE|html|head|body|div|p|span)/i.test(i.body.trim()):!1),l.$$.dirty&32&&t(11,o=n?"html":"markdown")},[a,i,m,p,f,n,g,h,k,$,v,o,U,W,T,R,d,F,q,Y,G,O,y,H]}class jt extends De{constructor(e){super(),Ue(this,e,so,oo,Ee,{active:0,item:1,initialEdit:16,kgTerm:2,kgRank:3})}}async function Gl(l){return ke("tauri",l)}async function ro(l,e){return Gl({__tauriModule:"Event",message:{cmd:"unlisten",event:l,eventId:e}})}async function ao(l,e,t){return Gl({__tauriModule:"Event",message:{cmd:"listen",event:l,windowLabel:e,handler:Ut(t)}}).then(n=>async()=>ro(l,n))}var ol;(function(l){l.WINDOW_RESIZED="tauri://resize",l.WINDOW_MOVED="tauri://move",l.WINDOW_CLOSE_REQUESTED="tauri://close-requested",l.WINDOW_CREATED="tauri://window-created",l.WINDOW_DESTROYED="tauri://destroyed",l.WINDOW_FOCUS="tauri://focus",l.WINDOW_BLUR="tauri://blur",l.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",l.WINDOW_THEME_CHANGED="tauri://theme-changed",l.WINDOW_FILE_DROP="tauri://file-drop",l.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",l.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",l.MENU="tauri://menu",l.CHECK_UPDATE="tauri://update",l.UPDATE_AVAILABLE="tauri://update-available",l.INSTALL_UPDATE="tauri://update-install",l.STATUS_UPDATE="tauri://update-status",l.DOWNLOAD_PROGRESS="tauri://update-download-progress"})(ol||(ol={}));async function io(l,e){return ao(l,null,e)}function sl(l,e,t){const n=l.slice();return n[9]=e[t],n}function rl(l){let e,t=l[9].name+"",n,o;return{c(){e=_("option"),n=le(t),e.__value=o=l[9].name,e.value=e.__value},m(r,s){L(r,e,s),u(e,n)},p(r,s){s&1&&t!==(t=r[9].name+"")&&he(n,t),s&1&&o!==(o=r[9].name)&&(e.__value=o,e.value=e.__value)},d(r){r&&C(e)}}}function co(l){let e,t,n,o,r,s,a=l[0],i=[];for(let d=0;d<a.length;d+=1)i[d]=rl(sl(l,a,d));return{c(){e=_("div"),t=_("div"),n=_("div"),o=_("select");for(let d=0;d<i.length;d+=1)i[d].c();c(n,"class","select"),c(t,"class","control"),c(e,"class","field is-grouped is-grouped-right")},m(d,m){L(d,e,m),u(e,t),u(t,n),u(n,o);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(o,null);je(o,l[1]),r||(s=z(o,"change",l[2]),r=!0)},p(d,[m]){if(m&1){a=d[0];let p;for(p=0;p<a.length;p+=1){const f=sl(d,a,p);i[p]?i[p].p(f,m):(i[p]=rl(f),i[p].c(),i[p].m(o,null))}for(;p<i.length;p+=1)i[p].d(1);i.length=a.length}m&3&&je(o,d[1])},i:de,o:de,d(d){d&&C(e),Ve(i,d),r=!1,s()}}}function uo(l,e,t){let n,o,r,s;fe(l,Ke,f=>t(5,n=f)),fe(l,Ne,f=>t(6,o=f)),fe(l,Xt,f=>t(0,r=f)),fe(l,xe,f=>t(1,s=f));let a="";async function i(){try{Ne.set(window.__TAURI__!==void 0),o?(console.log("Loading config from Tauri"),ke("get_config").then(f=>{console.log("get_config response",f),f&&f.status==="success"&&d(f.config)}).catch(f=>console.error("Error fetching config in Tauri:",f))):(console.log("Loading config from server"),a=`${Be.ServerURL}/config/`,fetch(a).then(f=>f.json()).then(f=>{console.log("Config received",f),f&&f.status==="success"&&d(f.config)}).catch(f=>console.error("Error fetching config:",f)))}catch(f){console.error("Unhandled error in loadConfig:",f)}}function d(f){var $;console.log("Updating stores from config:",f);const g={default_role:f.selected_role,...f};Ke.set(g);const h=Object.entries(f.roles).map(([v,b])=>({name:v,...b}));Xt.set(h),xe.set(f.selected_role);const k=f.roles[f.selected_role];if(console.log("Selected role settings:",k),k){const v=k.theme||"spacelab";console.log("Setting theme to:",v),ft.set(v),($=k.kg)!=null&&$.publish?o&&ke("publish_thesaurus",{roleName:f.selected_role}).then(b=>{console.log("publish_thesaurus response",b),Dt.set(b),ut.set(!0)}):ut.set(!1)}else console.warn("No role settings found for:",f.selected_role),ft.set("spacelab")}typeof window<"u"&&window.__TAURI__&&io("role_changed",f=>{console.log("Role changed event received from backend:",f.payload),d(f.payload)});async function m(){await i()}m(),console.log("Using Terraphim Server URL:",Be.ServerURL);function p(f){var v;const h=f.target.value;console.log("Role change requested:",h),xe.set(h);const k=r.find(b=>b.name===h);if(!k){console.error(`No role settings found for role: ${h}.`);return}const $=k.theme||"spacelab";ft.set($),console.log(`Theme changed to ${$}`),Ke.update(b=>(b.selected_role=h,b)),o?(ke("select_role",{roleName:h}).catch(b=>console.error("Error selecting role:",b)),(v=k.kg)!=null&&v.publish?(console.log("Publishing thesaurus for role",h),ke("publish_thesaurus",{roleName:h}).then(b=>{Dt.set(b),ut.set(!0)})):ut.set(!1)):fetch(`${Be.ServerURL}/config/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).catch(b=>console.error("Error updating config on server:",b))}return[r,s,p,i]}class Rt extends De{constructor(e){super(),Ue(this,e,uo,co,Ee,{loadConfig:3})}get loadConfig(){return this.$$.ctx[3]}}function al(l,e,t){const n=l.slice();return n[14]=e[t],n}function il(l){let e,t;return e=new Pl({props:{$$slots:{default:[po]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},p(n,o){const r={};o&131137&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function fo(l){let e=l[14]+"",t;return{c(){t=le(e)},m(n,o){L(n,t,o)},p(n,o){o&1&&e!==(e=n[14]+"")&&he(t,e)},d(n){n&&C(t)}}}function cl(l){let e,t,n,o,r,s;t=new jl({props:{rounded:!0,$$slots:{default:[fo]},$$scope:{ctx:l}}});function a(){return l[9](l[14])}return{c(){e=_("button"),B(t.$$.fragment),n=w(),c(e,"class","tag-button svelte-1m2cvhr"),e.disabled=l[6],c(e,"title","Click to view knowledge graph document")},m(i,d){L(i,e,d),J(t,e,null),u(e,n),o=!0,r||(s=z(e,"click",a),r=!0)},p(i,d){l=i;const m={};d&131073&&(m.$$scope={dirty:d,ctx:l}),t.$set(m),(!o||d&64)&&(e.disabled=l[6])},i(i){o||(E(t.$$.fragment,i),o=!0)},o(i){D(t.$$.fragment,i),o=!1},d(i){i&&C(e),V(t),r=!1,s()}}}function po(l){let e,t,n=l[0].tags,o=[];for(let s=0;s<n.length;s+=1)o[s]=cl(al(l,n,s));const r=s=>D(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=Je()},m(s,a){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(s,a);L(s,e,a),t=!0},p(s,a){if(a&321){n=s[0].tags;let i;for(i=0;i<n.length;i+=1){const d=al(s,n,i);o[i]?(o[i].p(d,a),E(o[i],1)):(o[i]=cl(d),o[i].c(),E(o[i],1),o[i].m(e.parentNode,e))}for(Se(),i=n.length;i<o.length;i+=1)r(i);Te()}},i(s){if(!t){for(let a=0;a<n.length;a+=1)E(o[a]);t=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)D(o[a]);t=!1},d(s){Ve(o,s),s&&C(e)}}}function _o(l){let e,t=l[0].rank+"",n;return{c(){e=le("Rank "),n=le(t)},m(o,r){L(o,e,r),L(o,n,r)},p(o,r){r&1&&t!==(t=o[0].rank+"")&&he(n,t)},d(o){o&&C(e),o&&C(n)}}}function mo(l){let e,t;return e=new jl({props:{rounded:!0,$$slots:{default:[_o]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},p(n,o){const r={};o&131073&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function ho(l){let e;return{c(){e=_("small"),e.textContent="No description available",c(e,"class","no-description svelte-1m2cvhr")},m(t,n){L(t,e,n)},p:de,i:de,o:de,d(t){t&&C(e)}}}function go(l){let e,t;return e=new Pt({props:{source:l[0].description}}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},p(n,o){const r={};o&1&&(r.source=n[0].description),e.$set(r)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function ul(l){let e,t,n;return{c(){e=_("a"),t=_("span"),t.innerHTML='<i class="fas fa-link"></i>',c(t,"class","icon is-medium"),c(e,"href",n=l[0].url),c(e,"target","_blank"),c(e,"class","level-item"),c(e,"aria-label","URL")},m(o,r){L(o,e,r),u(e,t)},p(o,r){r&1&&n!==(n=o[0].url)&&c(e,"href",n)},d(o){o&&C(e)}}}function fl(l){let e,t,n;function o(s){l[11](s)}let r={item:l[3],kgTerm:l[4],kgRank:l[5]};return l[2]!==void 0&&(r.active=l[2]),e=new jt({props:r}),$e.push(()=>Ce(e,"active",o)),{c(){B(e.$$.fragment)},m(s,a){J(e,s,a),n=!0},p(s,a){const i={};a&8&&(i.item=s[3]),a&16&&(i.kgTerm=s[4]),a&32&&(i.kgRank=s[5]),!t&&a&4&&(t=!0,i.active=s[2],Le(()=>t=!1)),e.$set(i)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function vo(l){let e,t,n,o,r,s,a,i,d,m,p,f,g=l[0].title+"",h,k,$,v,b,U,I,W,T,R,F,q,Y,G,O,y,H,N,Z,j,ne,Q,ae,oe,_e,P,ee,X,te,We,S=l[0].tags&&il(l);i=new Pl({props:{$$slots:{default:[mo]},$$scope:{ctx:l}}});const A=[go,ho],M=[];function ie(K,re){return K[0].description?0:1}I=ie(l),W=M[I]=A[I](l);let x="url"in l[0]&&ul(l);function se(K){l[10](K)}let Ae={item:l[0]};l[1]!==void 0&&(Ae.active=l[1]),oe=new jt({props:Ae}),$e.push(()=>Ce(oe,"active",se));let ue=l[3]&&fl(l);return{c(){e=_("div"),t=_("article"),n=_("div"),o=_("div"),r=_("div"),S&&S.c(),s=w(),a=_("div"),B(i.$$.fragment),d=w(),m=_("div"),p=_("button"),f=_("h2"),h=le(g),k=w(),$=_("div"),v=_("small"),v.textContent="Description:",b=w(),U=_("div"),W.c(),T=w(),R=_("br"),q=w(),Y=_("div"),G=_("nav"),O=_("div"),x&&x.c(),y=w(),H=_("button"),H.innerHTML='<span class="icon is-medium"><i class="fas fa-plus" aria-hidden="true"></i></span>',N=w(),Z=_("a"),j=_("span"),j.innerHTML='<i class="fas fa-code" aria-hidden="true"></i>',ae=w(),B(oe.$$.fragment),P=w(),ue&&ue.c(),ee=Je(),c(r,"class","level-right"),c(a,"class","level-right"),c(f,"class","title svelte-1m2cvhr"),c(p,"class","svelte-1m2cvhr"),c(v,"class","description-label svelte-1m2cvhr"),c(U,"class","description-content svelte-1m2cvhr"),c($,"class","description svelte-1m2cvhr"),c(o,"class","content"),c(H,"type","button"),c(H,"class","level-item button is-ghost svelte-1m2cvhr"),c(H,"aria-label","Add to favorites"),c(j,"class","icon is-medium"),c(Z,"href",ne=`vscode://${encodeURIComponent(l[0].title)}.md?${encodeURIComponent(l[0].body)}`),c(Z,"class","level-item"),c(Z,"aria-label","Open in VSCode"),c(O,"class","level-right"),c(G,"class","level is-mobile"),c(Y,"class","level-right"),c(n,"class","media-content"),c(t,"class","media"),c(e,"class","box")},m(K,re){L(K,e,re),u(e,t),u(t,n),u(n,o),u(o,r),S&&S.m(r,null),u(o,s),u(o,a),J(i,a,null),u(o,d),u(o,m),u(m,p),u(p,f),u(f,h),u(m,k),u(m,$),u($,v),u($,b),u($,U),M[I].m(U,null),u(m,T),u(m,R),u(n,q),u(n,Y),u(Y,G),u(G,O),x&&x.m(O,null),u(O,y),u(O,H),u(O,N),u(O,Z),u(Z,j),L(K,ae,re),J(oe,K,re),L(K,P,re),ue&&ue.m(K,re),L(K,ee,re),X=!0,te||(We=[z(p,"click",l[7]),z(H,"click",bo)],te=!0)},p(K,[re]){K[0].tags?S?(S.p(K,re),re&1&&E(S,1)):(S=il(K),S.c(),E(S,1),S.m(r,null)):S&&(Se(),D(S,1,1,()=>{S=null}),Te());const ge={};re&131073&&(ge.$$scope={dirty:re,ctx:K}),i.$set(ge),(!X||re&1)&&g!==(g=K[0].title+"")&&he(h,g);let we=I;I=ie(K),I===we?M[I].p(K,re):(Se(),D(M[we],1,1,()=>{M[we]=null}),Te(),W=M[I],W?W.p(K,re):(W=M[I]=A[I](K),W.c()),E(W,1),W.m(U,null)),"url"in K[0]?x?x.p(K,re):(x=ul(K),x.c(),x.m(O,y)):x&&(x.d(1),x=null),(!X||re&1&&ne!==(ne=`vscode://${encodeURIComponent(K[0].title)}.md?${encodeURIComponent(K[0].body)}`))&&c(Z,"href",ne);const ye={};re&1&&(ye.item=K[0]),!_e&&re&2&&(_e=!0,ye.active=K[1],Le(()=>_e=!1)),oe.$set(ye),K[3]?ue?(ue.p(K,re),re&8&&E(ue,1)):(ue=fl(K),ue.c(),E(ue,1),ue.m(ee.parentNode,ee)):ue&&(Se(),D(ue,1,1,()=>{ue=null}),Te())},i(K){X||(E(S),E(i.$$.fragment,K),E(W),et(()=>{X&&(F||(F=yt(m,St,{},!0)),F.run(1))}),et(()=>{X&&(Q||(Q=yt(G,St,{},!0)),Q.run(1))}),E(oe.$$.fragment,K),E(ue),X=!0)},o(K){D(S),D(i.$$.fragment,K),D(W),F||(F=yt(m,St,{},!1)),F.run(0),Q||(Q=yt(G,St,{},!1)),Q.run(0),D(oe.$$.fragment,K),D(ue),X=!1},d(K){K&&C(e),S&&S.d(),V(i),M[I].d(),K&&F&&F.end(),x&&x.d(),K&&Q&&Q.end(),K&&C(ae),V(oe,K),K&&C(P),ue&&ue.d(K),K&&C(ee),te=!1,Me(We)}}}const bo=()=>{};function ko(l,e,t){let n,o;fe(l,xe,v=>t(12,n=v)),fe(l,Ne,v=>t(13,o=v));let{document:r}=e,s=!1,a=!1,i=null,d=null,m=null,p=!1;const f=()=>{t(1,s=!0)};async function g(v){var b,U,I,W,T;t(6,p=!0),t(4,d=v),console.log("ðŸ” KG Search Debug Info:"),console.log("  Tag clicked:",v),console.log("  Current role:",n),console.log("  Is Tauri mode:",o);try{if(o){console.log("  Making Tauri invoke call..."),console.log("  Tauri command: find_documents_for_kg_term"),console.log("  Tauri params:",{roleName:n,term:v});const R=await ke("find_documents_for_kg_term",{roleName:n,term:v});console.log("  ðŸ“¥ Tauri response received:"),console.log("    Status:",R.status),console.log("    Results count:",((b=R.results)==null?void 0:b.length)||0),console.log("    Total:",R.total||0),console.log("    Full response:",JSON.stringify(R,null,2)),R.status==="success"&&R.results&&R.results.length>0?(t(3,i=R.results[0]),t(5,m=i.rank||0),console.log("  âœ… Found KG document:"),console.log("    Title:",i.title),console.log("    Rank:",m),console.log("    Body length:",((U=i.body)==null?void 0:U.length)||0,"characters"),t(2,a=!0)):(console.warn(`  âš ï¸  No KG documents found for term: "${v}" in role: "${n}"`),console.warn("    This could indicate:"),console.warn("    1. Knowledge graph not built for this role"),console.warn("    2. Term not found in knowledge graph"),console.warn("    3. Role not configured with TerraphimGraph relevance function"),console.warn("    Suggestion: Check server logs for KG building status"))}else{console.log("  Making HTTP fetch call...");const R=Be.ServerURL,F=encodeURIComponent(n),q=encodeURIComponent(v),Y=`${R}/roles/${F}/kg_search?term=${q}`;console.log("  ðŸ“¤ HTTP Request details:"),console.log("    Base URL:",R),console.log("    Role (encoded):",F),console.log("    Term (encoded):",q),console.log("    Full URL:",Y);const G=await fetch(Y);if(console.log("  ðŸ“¥ HTTP Response received:"),console.log("    Status code:",G.status),console.log("    Status text:",G.statusText),console.log("    Headers:",Object.fromEntries(G.headers.entries())),!G.ok)throw new Error(`HTTP error! Status: ${G.status} - ${G.statusText}`);const O=await G.json();console.log("  ðŸ“„ Response data:"),console.log("    Status:",O.status),console.log("    Results count:",((I=O.results)==null?void 0:I.length)||0),console.log("    Total:",O.total||0),console.log("    Full response:",JSON.stringify(O,null,2)),O.status==="success"&&O.results&&O.results.length>0?(t(3,i=O.results[0]),t(5,m=i.rank||0),console.log("  âœ… Found KG document:"),console.log("    Title:",i.title),console.log("    Rank:",m),console.log("    Body length:",((W=i.body)==null?void 0:W.length)||0,"characters"),t(2,a=!0)):(console.warn(`  âš ï¸  No KG documents found for term: "${v}" in role: "${n}"`),console.warn("    This could indicate:"),console.warn("    1. Server not configured with Terraphim Engineer role"),console.warn("    2. Knowledge graph not built on server"),console.warn("    3. Term not found in knowledge graph"),console.warn("    Suggestion: Check server logs at startup for KG building status"),console.warn("    API URL tested:",Y))}}catch(R){console.error("âŒ Error fetching KG document:"),console.error("  Error type:",R.constructor.name),console.error("  Error message:",R.message||R),console.error("  Request details:",{tag:v,role:n,isTauri:o,timestamp:new Date().toISOString()}),!o&&((T=R.message)!=null&&T.includes("Failed to fetch"))&&(console.error("  ðŸ’¡ Network error suggestions:"),console.error("    1. Check if server is running on expected port"),console.error("    2. Check CORS configuration"),console.error("    3. Verify server URL in CONFIG.ServerURL"))}finally{t(6,p=!1)}}Rt[n]!==void 0&&(console.log("Have attribute",Rt[n]),Rt[n].hasOwnProperty("enableLogseq")?console.log("enable logseq True"):console.log("Didn't make it"));const h=v=>g(v);function k(v){s=v,t(1,s)}function $(v){a=v,t(2,a)}return l.$$set=v=>{"document"in v&&t(0,r=v.document)},[r,s,a,i,d,m,p,f,g,h,k,$]}class $o extends De{constructor(e){super(),Ue(this,e,ko,vo,Ee,{document:0})}}const wo="/assets/terraphim_gray.png";function dl(l,e,t){const n=l.slice();return n[19]=e[t],n}function pl(l,e,t){const n=l.slice();return n[22]=e[t],n[24]=t,n}function _l(l){let e,t=l[2],n=[];for(let o=0;o<t.length;o+=1)n[o]=ml(pl(l,t,o));return{c(){e=_("ul");for(let o=0;o<n.length;o+=1)n[o].c();c(e,"class","suggestions svelte-13t09eu")},m(o,r){L(o,e,r);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(o,r){if(r&524){t=o[2];let s;for(s=0;s<t.length;s+=1){const a=pl(o,t,s);n[s]?n[s].p(a,r):(n[s]=ml(a),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(o){o&&C(e),Ve(n,o)}}}function ml(l){let e,t=l[22]+"",n,o,r,s,a,i;function d(){return l[13](l[22])}function m(...p){return l[14](l[22],...p)}return{c(){e=_("li"),n=le(t),o=w(),c(e,"tabindex","0"),c(e,"role","option"),c(e,"aria-selected",r=l[24]===l[3]),c(e,"aria-label",s=`Apply suggestion: ${l[22]}`),c(e,"class","svelte-13t09eu"),Ct(e,"active",l[24]===l[3])},m(p,f){L(p,e,f),u(e,n),u(e,o),a||(i=[z(e,"click",d),z(e,"keydown",m)],a=!0)},p(p,f){l=p,f&4&&t!==(t=l[22]+"")&&he(n,t),f&8&&r!==(r=l[24]===l[3])&&c(e,"aria-selected",r),f&4&&s!==(s=`Apply suggestion: ${l[22]}`)&&c(e,"aria-label",s),f&8&&Ct(e,"active",l[24]===l[3])},d(p){p&&C(e),a=!1,Me(i)}}}function yo(l){let e,t,n,o,r;function s(d){l[12](d)}let a={type:"search",placeholder:l[6]?`Search over Knowledge graph for ${l[4]}`:"Search",icon:"search",expanded:!0,autofocus:!0};l[5]!==void 0&&(a.value=l[5]),t=new dt({props:a}),$e.push(()=>Ce(t,"value",s)),t.$on("click",l[10]),t.$on("submit",l[10]),t.$on("keydown",l[8]),t.$on("input",l[7]);let i=l[2].length>0&&_l(l);return{c(){e=_("div"),B(t.$$.fragment),o=w(),i&&i.c(),c(e,"class","input-wrapper svelte-13t09eu")},m(d,m){L(d,e,m),J(t,e,null),u(e,o),i&&i.m(e,null),r=!0},p(d,m){const p={};m&80&&(p.placeholder=d[6]?`Search over Knowledge graph for ${d[4]}`:"Search"),!n&&m&32&&(n=!0,p.value=d[5],Le(()=>n=!1)),t.$set(p),d[2].length>0?i?i.p(d,m):(i=_l(d),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i(d){r||(E(t.$$.fragment,d),r=!0)},o(d){D(t.$$.fragment,d),r=!1},d(d){d&&C(e),V(t),i&&i.d()}}}function So(l){let e,t,n,o,r,s;return{c(){e=_("section"),t=_("div"),n=_("img"),r=w(),s=_("p"),s.textContent="I am Terraphim, your personal assistant.",nn(n.src,o=wo)||c(n,"src",o),c(n,"alt","Terraphim Logo"),c(n,"class","svelte-13t09eu"),c(t,"class","content has-text-grey has-text-centered svelte-13t09eu"),c(e,"class","section")},m(a,i){L(a,e,i),u(e,t),u(t,n),u(t,r),u(t,s)},p:de,i:de,o:de,d(a){a&&C(e)}}}function To(l){let e,t,n=l[0],o=[];for(let s=0;s<n.length;s+=1)o[s]=hl(dl(l,n,s));const r=s=>D(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=Je()},m(s,a){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(s,a);L(s,e,a),t=!0},p(s,a){if(a&1){n=s[0];let i;for(i=0;i<n.length;i+=1){const d=dl(s,n,i);o[i]?(o[i].p(d,a),E(o[i],1)):(o[i]=hl(d),o[i].c(),E(o[i],1),o[i].m(e.parentNode,e))}for(Se(),i=n.length;i<o.length;i+=1)r(i);Te()}},i(s){if(!t){for(let a=0;a<n.length;a+=1)E(o[a]);t=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)D(o[a]);t=!1},d(s){Ve(o,s),s&&C(e)}}}function Ro(l){let e,t;return{c(){e=_("p"),t=le(l[1]),c(e,"class","error svelte-13t09eu")},m(n,o){L(n,e,o),u(e,t)},p(n,o){o&2&&he(t,n[1])},i:de,o:de,d(n){n&&C(e)}}}function hl(l){let e,t;return e=new $o({props:{document:l[19]}}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},p(n,o){const r={};o&1&&(r.document=n[19]),e.$set(r)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Co(l){let e,t,n,o,r,s,a,i,d;t=new ze({props:{$$slots:{default:[yo]},$$scope:{ctx:l}}});const m=[Ro,To,So],p=[];function f(g,h){return g[1]?0:g[0].length?1:2}return o=f(l),r=p[o]=m[o](l),{c(){e=_("form"),B(t.$$.fragment),n=w(),r.c(),s=Je()},m(g,h){L(g,e,h),J(t,e,null),L(g,n,h),p[o].m(g,h),L(g,s,h),a=!0,i||(d=z(e,"submit",tn(l[10])),i=!0)},p(g,[h]){const k={};h&33554556&&(k.$$scope={dirty:h,ctx:g}),t.$set(k);let $=o;o=f(g),o===$?p[o].p(g,h):(Se(),D(p[$],1,1,()=>{p[$]=null}),Te(),r=p[o],r?r.p(g,h):(r=p[o]=m[o](g),r.c()),E(r,1),r.m(s.parentNode,s))},i(g){a||(E(t.$$.fragment,g),E(r),a=!0)},o(g){D(t.$$.fragment,g),D(r),a=!1},d(g){g&&C(e),V(t),g&&C(n),p[o].d(g),g&&C(s),i=!1,d()}}}function Lo(l,e,t){let n,o,r,s,a,i,d;fe(l,Sn,T=>t(16,o=T)),fe(l,xe,T=>t(4,r=T)),fe(l,Ot,T=>t(5,s=T)),fe(l,Ne,T=>t(17,a=T)),fe(l,Dt,T=>t(11,i=T)),fe(l,ut,T=>t(6,d=T));let m=[],p=null,f=[],g=-1;function h(T){const R=T.trim().toLowerCase();return R.length===0?[]:n.filter(([q])=>q.toLowerCase().includes(R)).map(([q])=>q).slice(0,5)}function k(T){const R=T.target;if(!R||R.selectionStart==null)return;const F=R.selectionStart,Y=s.slice(0,F).split(/\s+/),G=Y[Y.length-1];t(2,f=h(G)),t(3,g=-1)}function $(T){f.length!==0&&(T.key==="ArrowDown"?(T.preventDefault(),t(3,g=(g+1)%f.length)):T.key==="ArrowUp"?(T.preventDefault(),t(3,g=(g-1+f.length)%f.length)):(T.key==="Enter"||T.key==="Tab")&&g!==-1&&(T.preventDefault(),v(f[g])))}function v(T){var O;const R=document.querySelector('input[type="search"]'),F=(R==null?void 0:R.selectionStart)??0,q=s.slice(0,F),Y=s.slice(F),G=q.split(/\s+/);G[G.length-1]=T,ln(Ot,s=[...G,Y].join(" "),s),(O=R==null?void 0:R.setSelectionRange)==null||O.call(R,F+T.length,F+T.length),t(2,f=[]),t(3,g=-1)}async function b(){if(t(1,p=null),a)try{const T=await ke("search",{searchQuery:{search_term:s,skip:0,limit:10,role:r}});T.status==="success"?(t(0,m=T.results),console.log("Response results"),console.log(m)):(t(1,p=`Search failed: ${T.status}`),console.error("Search failed:",T))}catch(T){t(1,p=`Error in Tauri search: ${T}`),console.error("Error in Tauri search:",T)}else{if(!s.trim())return;const T=JSON.stringify({search_term:s,skip:0,limit:10,role:r});try{const R=await fetch(o,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:T}),F=await R.json();if(!R.ok)throw new Error(`HTTP error! Status: ${R.status}`);t(0,m=F.results)}catch(R){console.error("Error fetching data:",R),t(1,p=`Error fetching data: ${R}`)}}}function U(T){s=T,Ot.set(s)}const I=T=>v(T),W=(T,R)=>{(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),v(T))};return l.$$.update=()=>{l.$$.dirty&2048&&(n=Object.entries(i))},[m,p,f,g,r,s,d,k,$,v,b,i,U,I,W]}class No extends De{constructor(e){super(),Ue(this,e,Lo,Co,Ee,{})}}function gl(l,e,t){const n=l.slice();return n[44]=e[t],n[45]=e,n[46]=t,n}function vl(l,e,t){const n=l.slice();return n[47]=e[t],n[48]=e,n[49]=t,n}function bl(l,e,t){const n=l.slice();return n[50]=e[t][0],n[51]=e[t][1],n[52]=e,n[53]=t,n}function kl(l,e,t){const n=l.slice();return n[41]=e[t],n}function Eo(l){let e,t,n,o=JSON.stringify(l[1],null,2)+"",r;return{c(){e=_("h4"),e.textContent="Review",t=w(),n=_("pre"),r=le(o),c(e,"class","title is-5"),Xe(n,"max-height","300px"),Xe(n,"overflow","auto")},m(s,a){L(s,e,a),L(s,t,a),L(s,n,a),u(n,r)},p(s,a){a[0]&2&&o!==(o=JSON.stringify(s[1],null,2)+"")&&he(r,o)},d(s){s&&C(e),s&&C(t),s&&C(n)}}}function Oo(l){let e,t,n=[],o=new Map,r,s,a,i,d=l[1].roles;const m=p=>p[44].name;for(let p=0;p<d.length;p+=1){let f=gl(l,d,p),g=m(f);o.set(g,n[p]=Tl(g,f))}return{c(){e=_("h4"),e.textContent="Roles",t=w();for(let p=0;p<n.length;p+=1)n[p].c();r=w(),s=_("button"),s.textContent="Add Role",c(e,"class","title is-5"),c(s,"class","button is-link is-light")},m(p,f){L(p,e,f),L(p,t,f);for(let g=0;g<n.length;g+=1)n[g]&&n[g].m(p,f);L(p,r,f),L(p,s,f),a||(i=z(s,"click",l[5]),a=!0)},p(p,f){f[0]&4034&&(d=p[1].roles,n=on(n,f,m,1,p,d,o,r.parentNode,sn,Tl,r,gl))},d(p){p&&C(e),p&&C(t);for(let f=0;f<n.length;f+=1)n[f].d(p);p&&C(r),p&&C(s),a=!1,i()}}}function Do(l){let e,t,n,o,r,s,a,i,d,m,p,f,g,h,k,$,v,b,U,I,W,T,R,F,q,Y,G,O,y,H,N=l[1].roles,Z=[];for(let j=0;j<N.length;j+=1)Z[j]=Rl(kl(l,N,j));return{c(){e=_("div"),t=_("label"),t.textContent="Configuration ID",n=w(),o=_("div"),r=_("div"),s=_("select"),a=_("option"),a.textContent="Desktop",i=_("option"),i.textContent="Server",d=_("option"),d.textContent="Embedded",m=w(),p=_("div"),f=_("label"),f.textContent="Global shortcut",g=w(),h=_("div"),k=_("input"),$=w(),v=_("div"),b=_("label"),b.textContent="Default theme",U=w(),I=_("div"),W=_("input"),T=w(),R=_("div"),F=_("label"),F.textContent="Default Role",q=w(),Y=_("div"),G=_("div"),O=_("select");for(let j=0;j<Z.length;j+=1)Z[j].c();c(t,"class","label"),c(t,"for","config-id"),a.__value="Desktop",a.value=a.__value,i.__value="Server",i.value=i.__value,d.__value="Embedded",d.value=d.__value,c(s,"id","config-id"),l[1].id===void 0&&et(()=>l[13].call(s)),c(r,"class","select"),c(o,"class","control"),c(e,"class","field"),c(f,"class","label"),c(f,"for","global-shortcut"),c(k,"class","input"),c(k,"id","global-shortcut"),c(k,"type","text"),c(h,"class","control"),c(p,"class","field"),c(b,"class","label"),c(b,"for","default-theme"),c(W,"class","input"),c(W,"id","default-theme"),c(W,"type","text"),c(I,"class","control"),c(v,"class","field"),c(F,"class","label"),c(F,"for","default-role"),c(O,"id","default-role"),l[1].default_role===void 0&&et(()=>l[16].call(O)),c(G,"class","select"),c(Y,"class","control"),c(R,"class","field")},m(j,ne){L(j,e,ne),u(e,t),u(e,n),u(e,o),u(o,r),u(r,s),u(s,a),u(s,i),u(s,d),je(s,l[1].id,!0),L(j,m,ne),L(j,p,ne),u(p,f),u(p,g),u(p,h),u(h,k),pe(k,l[1].global_shortcut),L(j,$,ne),L(j,v,ne),u(v,b),u(v,U),u(v,I),u(I,W),pe(W,l[1].default_theme),L(j,T,ne),L(j,R,ne),u(R,F),u(R,q),u(R,Y),u(Y,G),u(G,O);for(let Q=0;Q<Z.length;Q+=1)Z[Q]&&Z[Q].m(O,null);je(O,l[1].default_role,!0),y||(H=[z(s,"change",l[13]),z(k,"input",l[14]),z(W,"input",l[15]),z(O,"change",l[16])],y=!0)},p(j,ne){if(ne[0]&2&&je(s,j[1].id),ne[0]&2&&k.value!==j[1].global_shortcut&&pe(k,j[1].global_shortcut),ne[0]&2&&W.value!==j[1].default_theme&&pe(W,j[1].default_theme),ne[0]&2){N=j[1].roles;let Q;for(Q=0;Q<N.length;Q+=1){const ae=kl(j,N,Q);Z[Q]?Z[Q].p(ae,ne):(Z[Q]=Rl(ae),Z[Q].c(),Z[Q].m(O,null))}for(;Q<Z.length;Q+=1)Z[Q].d(1);Z.length=N.length}ne[0]&2&&je(O,j[1].default_role)},d(j){j&&C(e),j&&C(m),j&&C(p),j&&C($),j&&C(v),j&&C(T),j&&C(R),Ve(Z,j),y=!1,Me(H)}}}function Uo(l){let e;return{c(){e=le("Directory Path")},m(t,n){L(t,e,n)},d(t){t&&C(e)}}}function Mo(l){let e;return{c(){e=le("Server URL")},m(t,n){L(t,e,n)},d(t){t&&C(e)}}}function $l(l){let e,t,n,o,r,s,a,i,d,m,p,f;function g(){l[23].call(a,l[46],l[49])}return{c(){e=_("div"),t=_("label"),n=le("Atomic Server Secret"),r=w(),s=_("div"),a=_("input"),d=w(),m=_("p"),m.textContent="Leave empty for anonymous access",c(t,"class","label"),c(t,"for",o=`haystack-secret-${l[46]}-${l[49]}`),c(a,"class","input"),c(a,"id",i=`haystack-secret-${l[46]}-${l[49]}`),c(a,"type","password"),c(a,"placeholder","Base64 encoded secret (optional)"),c(s,"class","control"),c(m,"class","help"),c(e,"class","field")},m(h,k){L(h,e,k),u(e,t),u(t,n),u(e,r),u(e,s),u(s,a),pe(a,l[1].roles[l[46]].haystacks[l[49]].atomic_server_secret),u(e,d),u(e,m),p||(f=z(a,"input",g),p=!0)},p(h,k){l=h,k[0]&2&&o!==(o=`haystack-secret-${l[46]}-${l[49]}`)&&c(t,"for",o),k[0]&2&&i!==(i=`haystack-secret-${l[46]}-${l[49]}`)&&c(a,"id",i),k[0]&2&&a.value!==l[1].roles[l[46]].haystacks[l[49]].atomic_server_secret&&pe(a,l[1].roles[l[46]].haystacks[l[49]].atomic_server_secret)},d(h){h&&C(e),p=!1,f()}}}function wl(l){let e,t,n,o,r,s,a,i,d,m,p,f,g,h,k,$,v,b=Object.entries(l[1].roles[l[46]].haystacks[l[49]].extra_parameters||{}),U=[];for(let R=0;R<b.length;R+=1)U[R]=yl(bl(l,b,R));function I(){return l[27](l[46],l[49])}function W(){return l[28](l[46],l[49])}function T(){return l[29](l[46],l[49])}return{c(){e=_("div"),t=_("label"),t.textContent="Extra Parameters (for filtering)",n=w();for(let R=0;R<U.length;R+=1)U[R].c();o=w(),r=_("div"),s=_("div"),a=_("button"),a.textContent="+ Tag Filter",i=w(),d=_("div"),m=_("button"),m.textContent="+ Max Results",p=w(),f=_("div"),g=_("button"),g.textContent="+ Custom Parameter",h=w(),k=_("p"),k.innerHTML=`Common parameters: <code>tag</code> (e.g., &quot;#rust&quot;), <code>glob</code> (e.g., &quot;*.md&quot;), 
                  <code>max_count</code> (e.g., &quot;10&quot;), <code>context</code> (e.g., &quot;5&quot;)`,c(t,"class","label"),c(a,"class","button is-small is-link is-light"),c(s,"class","control"),c(m,"class","button is-small is-link is-light"),c(d,"class","control"),c(g,"class","button is-small is-link is-light"),c(f,"class","control"),c(r,"class","field is-grouped"),c(k,"class","help"),c(e,"class","field")},m(R,F){L(R,e,F),u(e,t),u(e,n);for(let q=0;q<U.length;q+=1)U[q]&&U[q].m(e,null);u(e,o),u(e,r),u(r,s),u(s,a),u(r,i),u(r,d),u(d,m),u(r,p),u(r,f),u(f,g),u(e,h),u(e,k),$||(v=[z(a,"click",I),z(m,"click",W),z(g,"click",T)],$=!0)},p(R,F){if(l=R,F[0]&3074){b=Object.entries(l[1].roles[l[46]].haystacks[l[49]].extra_parameters||{});let q;for(q=0;q<b.length;q+=1){const Y=bl(l,b,q);U[q]?U[q].p(Y,F):(U[q]=yl(Y),U[q].c(),U[q].m(e,o))}for(;q<U.length;q+=1)U[q].d(1);U.length=b.length}},d(R){R&&C(e),Ve(U,R),$=!1,Me(v)}}}function yl(l){let e,t,n,o,r,s,a,i,d,m,p,f,g;function h(...v){return l[24](l[46],l[49],l[50],...v)}function k(){l[25].call(a,l[46],l[49],l[50])}function $(){return l[26](l[46],l[49],l[50])}return{c(){e=_("div"),t=_("div"),n=_("input"),r=w(),s=_("div"),a=_("input"),i=w(),d=_("div"),m=_("button"),m.textContent="Ã—",p=w(),c(n,"class","input"),c(n,"type","text"),c(n,"placeholder","Parameter name"),n.value=o=l[50],c(t,"class","control"),c(a,"class","input"),c(a,"type","text"),c(a,"placeholder","Parameter value"),c(s,"class","control is-expanded"),c(m,"class","button is-small is-danger"),c(d,"class","control"),c(e,"class","field is-grouped")},m(v,b){L(v,e,b),u(e,t),u(t,n),u(e,r),u(e,s),u(s,a),pe(a,l[1].roles[l[46]].haystacks[l[49]].extra_parameters[l[50]]),u(e,i),u(e,d),u(d,m),u(e,p),f||(g=[z(n,"blur",h),z(a,"input",k),z(m,"click",$)],f=!0)},p(v,b){l=v,b[0]&2&&o!==(o=l[50])&&n.value!==o&&(n.value=o),b[0]&2&&a.value!==l[1].roles[l[46]].haystacks[l[49]].extra_parameters[l[50]]&&pe(a,l[1].roles[l[46]].haystacks[l[49]].extra_parameters[l[50]])},d(v){v&&C(e),f=!1,Me(g)}}}function Sl(l){let e,t,n,o,r,s,a,i,d,m,p,f,g,h,k,$,v,b,U,I,W,T,R,F,q,Y,G,O,y,H,N,Z,j,ne,Q;function ae(){l[21].call(d,l[46],l[49])}function oe(A,M){return A[1].roles[A[46]].haystacks[A[49]].service==="Atomic"?Mo:Uo}let _e=oe(l),P=_e(l);function ee(){l[22].call(U,l[46],l[49])}let X=l[1].roles[l[46]].haystacks[l[49]].service==="Atomic"&&$l(l),te=l[1].roles[l[46]].haystacks[l[49]].service==="Ripgrep"&&wl(l);function We(){l[30].call(G,l[46],l[49])}function S(){return l[31](l[46],l[49])}return{c(){e=_("div"),t=_("div"),n=_("label"),o=le("Service Type"),s=w(),a=_("div"),i=_("div"),d=_("select"),m=_("option"),m.textContent="Ripgrep (File Search)",p=_("option"),p.textContent="Atomic Server",g=w(),h=_("div"),k=_("label"),P.c(),v=w(),b=_("div"),U=_("input"),T=w(),X&&X.c(),R=w(),te&&te.c(),F=w(),q=_("div"),Y=_("label"),G=_("input"),y=le(`
                Â Read-only`),N=w(),Z=_("div"),j=_("button"),j.textContent="Remove Haystack",c(n,"class","label"),c(n,"for",r=`haystack-service-${l[46]}-${l[49]}`),m.__value="Ripgrep",m.value=m.__value,p.__value="Atomic",p.value=p.__value,c(d,"id",f=`haystack-service-${l[46]}-${l[49]}`),l[1].roles[l[46]].haystacks[l[49]].service===void 0&&et(ae),c(i,"class","select"),c(a,"class","control"),c(t,"class","field"),c(k,"class","label"),c(k,"for",$=`haystack-path-${l[46]}-${l[49]}`),c(U,"class","input"),c(U,"id",I=`haystack-path-${l[46]}-${l[49]}`),c(U,"type","text"),c(U,"placeholder",W=l[1].roles[l[46]].haystacks[l[49]].service==="Atomic"?"https://localhost:9883":"/path/to/documents"),c(b,"class","control"),c(h,"class","field"),c(G,"id",O=`haystack-readonly-${l[46]}-${l[49]}`),c(G,"type","checkbox"),c(Y,"class","checkbox"),c(Y,"for",H=`haystack-readonly-${l[46]}-${l[49]}`),c(q,"class","field"),c(j,"class","button is-small is-danger"),c(Z,"class","field"),c(e,"class","box is-light")},m(A,M){L(A,e,M),u(e,t),u(t,n),u(n,o),u(t,s),u(t,a),u(a,i),u(i,d),u(d,m),u(d,p),je(d,l[1].roles[l[46]].haystacks[l[49]].service,!0),u(e,g),u(e,h),u(h,k),P.m(k,null),u(h,v),u(h,b),u(b,U),pe(U,l[1].roles[l[46]].haystacks[l[49]].path),u(e,T),X&&X.m(e,null),u(e,R),te&&te.m(e,null),u(e,F),u(e,q),u(q,Y),u(Y,G),G.checked=l[1].roles[l[46]].haystacks[l[49]].read_only,u(Y,y),u(e,N),u(e,Z),u(Z,j),ne||(Q=[z(d,"change",ae),z(U,"input",ee),z(G,"change",We),z(j,"click",S)],ne=!0)},p(A,M){l=A,M[0]&2&&r!==(r=`haystack-service-${l[46]}-${l[49]}`)&&c(n,"for",r),M[0]&2&&f!==(f=`haystack-service-${l[46]}-${l[49]}`)&&c(d,"id",f),M[0]&2&&je(d,l[1].roles[l[46]].haystacks[l[49]].service),_e!==(_e=oe(l))&&(P.d(1),P=_e(l),P&&(P.c(),P.m(k,null))),M[0]&2&&$!==($=`haystack-path-${l[46]}-${l[49]}`)&&c(k,"for",$),M[0]&2&&I!==(I=`haystack-path-${l[46]}-${l[49]}`)&&c(U,"id",I),M[0]&2&&W!==(W=l[1].roles[l[46]].haystacks[l[49]].service==="Atomic"?"https://localhost:9883":"/path/to/documents")&&c(U,"placeholder",W),M[0]&2&&U.value!==l[1].roles[l[46]].haystacks[l[49]].path&&pe(U,l[1].roles[l[46]].haystacks[l[49]].path),l[1].roles[l[46]].haystacks[l[49]].service==="Atomic"?X?X.p(l,M):(X=$l(l),X.c(),X.m(e,R)):X&&(X.d(1),X=null),l[1].roles[l[46]].haystacks[l[49]].service==="Ripgrep"?te?te.p(l,M):(te=wl(l),te.c(),te.m(e,F)):te&&(te.d(1),te=null),M[0]&2&&O!==(O=`haystack-readonly-${l[46]}-${l[49]}`)&&c(G,"id",O),M[0]&2&&(G.checked=l[1].roles[l[46]].haystacks[l[49]].read_only),M[0]&2&&H!==(H=`haystack-readonly-${l[46]}-${l[49]}`)&&c(Y,"for",H)},d(A){A&&C(e),P.d(),X&&X.d(),te&&te.d(),ne=!1,Me(Q)}}}function Tl(l,e){let t,n,o,r,s,a,i,d,m,p,f,g,h,k,$,v,b,U,I,W,T,R,F,q,Y,G,O,y,H,N,Z,j,ne,Q,ae,oe,_e,P,ee,X,te,We,S,A,M,ie,x,se,Ae,ue,K,re,ge,we,ye,it,Ye,Ie,pt,Re,_t,Kt,mt,tt,lt,It,ht,Ft,gt,Pe,nt,ot,vt,Gt,st,qe,Fe,bt,Ht,kt,Wt,Ze,Ge,$t,qt,wt,zt,Bt,Jt,ct,Nt,Vt;function Wl(){e[17].call(d,e[46])}function ql(){e[18].call(b,e[46])}function zl(){e[19].call(G,e[46])}function Bl(){e[20].call(ae,e[46])}let rt=e[44].haystacks,ve=[];for(let be=0;be<rt.length;be+=1)ve[be]=Sl(vl(e,rt,be));function Jl(){return e[32](e[46])}function Vl(){e[33].call(K,e[46])}function Yl(){e[34].call(Re,e[46])}function Yt(){e[35].call(Pe,e[46])}function Zl(){e[36].call(Fe,e[46])}function Ql(){e[37].call(Ge,e[46])}function Xl(){return e[38](e[46])}return{key:l,first:null,c(){t=_("div"),n=_("div"),o=_("label"),r=le("Role name"),a=w(),i=_("div"),d=_("input"),p=w(),f=_("div"),g=_("label"),h=le("Short name"),$=w(),v=_("div"),b=_("input"),I=w(),W=_("div"),T=_("label"),R=le("Theme"),q=w(),Y=_("div"),G=_("input"),y=w(),H=_("div"),N=_("label"),Z=le("Relevance function"),ne=w(),Q=_("div"),ae=_("input"),_e=w(),P=_("h5"),P.textContent="Haystacks",ee=w();for(let be=0;be<ve.length;be+=1)ve[be].c();X=w(),te=_("button"),te.textContent="Add Haystack",We=w(),S=_("h5"),S.textContent="Knowledge Graph",A=w(),M=_("div"),ie=_("label"),x=le("Remote automata URL"),Ae=w(),ue=_("div"),K=_("input"),ge=w(),we=_("div"),ye=_("label"),it=le("Local KG path"),Ie=w(),pt=_("div"),Re=_("input"),Kt=w(),mt=_("div"),tt=_("div"),lt=_("label"),It=le("Local KG type"),Ft=w(),gt=_("div"),Pe=_("select"),nt=_("option"),nt.textContent="markdown",ot=_("option"),ot.textContent="json",Gt=w(),st=_("div"),qe=_("label"),Fe=_("input"),Ht=le(`
            Â Public`),Wt=w(),Ze=_("label"),Ge=_("input"),qt=le(`
            Â Publish`),zt=w(),Bt=_("hr"),Jt=w(),ct=_("button"),ct.textContent="Remove Role",c(o,"class","label"),c(o,"for",s=`role-name-${e[46]}`),c(d,"class","input"),c(d,"id",m=`role-name-${e[46]}`),c(d,"type","text"),c(i,"class","control"),c(n,"class","field"),c(g,"class","label"),c(g,"for",k=`role-shortname-${e[46]}`),c(b,"class","input"),c(b,"id",U=`role-shortname-${e[46]}`),c(b,"type","text"),c(v,"class","control"),c(f,"class","field"),c(T,"class","label"),c(T,"for",F=`role-theme-${e[46]}`),c(G,"class","input"),c(G,"id",O=`role-theme-${e[46]}`),c(G,"type","text"),c(Y,"class","control"),c(W,"class","field"),c(N,"class","label"),c(N,"for",j=`role-relevance-${e[46]}`),c(ae,"class","input"),c(ae,"id",oe=`role-relevance-${e[46]}`),c(ae,"type","text"),c(Q,"class","control"),c(H,"class","field"),c(P,"class","title is-6"),c(te,"class","button is-small"),c(S,"class","title is-6"),c(ie,"class","label"),c(ie,"for",se=`kg-url-${e[46]}`),c(K,"class","input"),c(K,"id",re=`kg-url-${e[46]}`),c(K,"type","text"),c(K,"placeholder","https://example.com/thesaurus.json"),c(ue,"class","control"),c(M,"class","field"),c(ye,"class","label"),c(ye,"for",Ye=`kg-local-path-${e[46]}`),c(Re,"class","input"),c(Re,"id",_t=`kg-local-path-${e[46]}`),c(Re,"type","text"),c(Re,"placeholder","/path/to/markdown"),c(pt,"class","control"),c(we,"class","field"),c(lt,"class","label"),c(lt,"for",ht=`kg-local-type-${e[46]}`),nt.__value="markdown",nt.value=nt.__value,ot.__value="json",ot.value=ot.__value,c(Pe,"id",vt=`kg-local-type-${e[46]}`),e[1].roles[e[46]].kg.local_type===void 0&&et(Yt),c(gt,"class","select"),c(tt,"class","control"),c(mt,"class","field is-grouped"),c(Fe,"id",bt=`kg-public-${e[46]}`),c(Fe,"type","checkbox"),c(qe,"class","checkbox"),c(qe,"for",kt=`kg-public-${e[46]}`),Xe(qe,"margin-right","1rem"),c(Ge,"id",$t=`kg-publish-${e[46]}`),c(Ge,"type","checkbox"),c(Ze,"class","checkbox"),c(Ze,"for",wt=`kg-publish-${e[46]}`),c(st,"class","field is-grouped"),c(ct,"class","button is-small is-danger"),c(t,"class","box"),this.first=t},m(be,ce){L(be,t,ce),u(t,n),u(n,o),u(o,r),u(n,a),u(n,i),u(i,d),pe(d,e[1].roles[e[46]].name),u(t,p),u(t,f),u(f,g),u(g,h),u(f,$),u(f,v),u(v,b),pe(b,e[1].roles[e[46]].shortname),u(t,I),u(t,W),u(W,T),u(T,R),u(W,q),u(W,Y),u(Y,G),pe(G,e[1].roles[e[46]].theme),u(t,y),u(t,H),u(H,N),u(N,Z),u(H,ne),u(H,Q),u(Q,ae),pe(ae,e[1].roles[e[46]].relevance_function),u(t,_e),u(t,P),u(t,ee);for(let me=0;me<ve.length;me+=1)ve[me]&&ve[me].m(t,null);u(t,X),u(t,te),u(t,We),u(t,S),u(t,A),u(t,M),u(M,ie),u(ie,x),u(M,Ae),u(M,ue),u(ue,K),pe(K,e[1].roles[e[46]].kg.url),u(t,ge),u(t,we),u(we,ye),u(ye,it),u(we,Ie),u(we,pt),u(pt,Re),pe(Re,e[1].roles[e[46]].kg.local_path),u(t,Kt),u(t,mt),u(mt,tt),u(tt,lt),u(lt,It),u(tt,Ft),u(tt,gt),u(gt,Pe),u(Pe,nt),u(Pe,ot),je(Pe,e[1].roles[e[46]].kg.local_type,!0),u(t,Gt),u(t,st),u(st,qe),u(qe,Fe),Fe.checked=e[1].roles[e[46]].kg.public,u(qe,Ht),u(st,Wt),u(st,Ze),u(Ze,Ge),Ge.checked=e[1].roles[e[46]].kg.publish,u(Ze,qt),u(t,zt),u(t,Bt),u(t,Jt),u(t,ct),Nt||(Vt=[z(d,"input",Wl),z(b,"input",ql),z(G,"input",zl),z(ae,"input",Bl),z(te,"click",Jl),z(K,"input",Vl),z(Re,"input",Yl),z(Pe,"change",Yt),z(Fe,"change",Zl),z(Ge,"change",Ql),z(ct,"click",Xl)],Nt=!0)},p(be,ce){if(e=be,ce[0]&2&&s!==(s=`role-name-${e[46]}`)&&c(o,"for",s),ce[0]&2&&m!==(m=`role-name-${e[46]}`)&&c(d,"id",m),ce[0]&2&&d.value!==e[1].roles[e[46]].name&&pe(d,e[1].roles[e[46]].name),ce[0]&2&&k!==(k=`role-shortname-${e[46]}`)&&c(g,"for",k),ce[0]&2&&U!==(U=`role-shortname-${e[46]}`)&&c(b,"id",U),ce[0]&2&&b.value!==e[1].roles[e[46]].shortname&&pe(b,e[1].roles[e[46]].shortname),ce[0]&2&&F!==(F=`role-theme-${e[46]}`)&&c(T,"for",F),ce[0]&2&&O!==(O=`role-theme-${e[46]}`)&&c(G,"id",O),ce[0]&2&&G.value!==e[1].roles[e[46]].theme&&pe(G,e[1].roles[e[46]].theme),ce[0]&2&&j!==(j=`role-relevance-${e[46]}`)&&c(N,"for",j),ce[0]&2&&oe!==(oe=`role-relevance-${e[46]}`)&&c(ae,"id",oe),ce[0]&2&&ae.value!==e[1].roles[e[46]].relevance_function&&pe(ae,e[1].roles[e[46]].relevance_function),ce[0]&3842){rt=e[44].haystacks;let me;for(me=0;me<rt.length;me+=1){const Zt=vl(e,rt,me);ve[me]?ve[me].p(Zt,ce):(ve[me]=Sl(Zt),ve[me].c(),ve[me].m(t,X))}for(;me<ve.length;me+=1)ve[me].d(1);ve.length=rt.length}ce[0]&2&&se!==(se=`kg-url-${e[46]}`)&&c(ie,"for",se),ce[0]&2&&re!==(re=`kg-url-${e[46]}`)&&c(K,"id",re),ce[0]&2&&K.value!==e[1].roles[e[46]].kg.url&&pe(K,e[1].roles[e[46]].kg.url),ce[0]&2&&Ye!==(Ye=`kg-local-path-${e[46]}`)&&c(ye,"for",Ye),ce[0]&2&&_t!==(_t=`kg-local-path-${e[46]}`)&&c(Re,"id",_t),ce[0]&2&&Re.value!==e[1].roles[e[46]].kg.local_path&&pe(Re,e[1].roles[e[46]].kg.local_path),ce[0]&2&&ht!==(ht=`kg-local-type-${e[46]}`)&&c(lt,"for",ht),ce[0]&2&&vt!==(vt=`kg-local-type-${e[46]}`)&&c(Pe,"id",vt),ce[0]&2&&je(Pe,e[1].roles[e[46]].kg.local_type),ce[0]&2&&bt!==(bt=`kg-public-${e[46]}`)&&c(Fe,"id",bt),ce[0]&2&&(Fe.checked=e[1].roles[e[46]].kg.public),ce[0]&2&&kt!==(kt=`kg-public-${e[46]}`)&&c(qe,"for",kt),ce[0]&2&&$t!==($t=`kg-publish-${e[46]}`)&&c(Ge,"id",$t),ce[0]&2&&(Ge.checked=e[1].roles[e[46]].kg.publish),ce[0]&2&&wt!==(wt=`kg-publish-${e[46]}`)&&c(Ze,"for",wt)},d(be){be&&C(t),Ve(ve,be),Nt=!1,Me(Vt)}}}function Rl(l){let e,t=l[41].name+"",n,o;return{c(){e=_("option"),n=le(t),e.__value=o=l[41].name,e.value=e.__value},m(r,s){L(r,e,s),u(e,n)},p(r,s){s[0]&2&&t!==(t=r[41].name+"")&&he(n,t),s[0]&2&&o!==(o=r[41].name)&&(e.__value=o,e.value=e.__value)},d(r){r&&C(e)}}}function Cl(l){let e,t,n;return{c(){e=_("button"),e.textContent="Back",c(e,"class","button")},m(o,r){L(o,e,r),t||(n=z(e,"click",l[4]),t=!0)},p:de,d(o){o&&C(e),t=!1,n()}}}function Ao(l){let e,t,n;return{c(){e=_("button"),e.textContent="Save",c(e,"class","button is-success")},m(o,r){L(o,e,r),t||(n=z(e,"click",l[12]),t=!0)},p:de,d(o){o&&C(e),t=!1,n()}}}function Po(l){let e,t,n;return{c(){e=_("button"),e.textContent="Next",c(e,"class","button is-primary")},m(o,r){L(o,e,r),t||(n=z(e,"click",l[3]),t=!0)},p:de,d(o){o&&C(e),t=!1,n()}}}function jo(l){let e,t,n,o,r,s,a,i;function d($,v){return $[0]===1?Do:$[0]===2?Oo:Eo}let m=d(l),p=m(l),f=l[0]>1&&Cl(l);function g($,v){return $[0]<Hl?Po:Ao}let h=g(l),k=h(l);return{c(){e=_("div"),t=_("h3"),t.textContent="Configuration Wizard",n=w(),p.c(),o=w(),r=_("nav"),s=_("div"),f&&f.c(),a=w(),i=_("div"),k.c(),c(t,"class","title is-4"),c(s,"class","level-left"),c(i,"class","level-right"),c(r,"class","level"),c(e,"class","box")},m($,v){L($,e,v),u(e,t),u(e,n),p.m(e,null),u(e,o),u(e,r),u(r,s),f&&f.m(s,null),u(r,a),u(r,i),k.m(i,null)},p($,v){m===(m=d($))&&p?p.p($,v):(p.d(1),p=m($),p&&(p.c(),p.m(e,o))),$[0]>1?f?f.p($,v):(f=Cl($),f.c(),f.m(s,null)):f&&(f.d(1),f=null),h===(h=g($))&&k?k.p($,v):(k.d(1),k=h($),k&&(k.c(),k.m(i,null)))},i:de,o:de,d($){$&&C(e),p.d(),f&&f.d(),k.d()}}}const Hl=3;function Ko(l,e,t){let n;const o=Oe(null),r=Oe({id:"Desktop",global_shortcut:"Ctrl+X",default_theme:"spacelab",default_role:"Default",roles:[]});fe(l,r,S=>t(1,n=S)),At(async()=>{try{let S;at(Ne)?S=await ke("get_config_schema"):S=await(await fetch("/config/schema")).json(),o.set(S);const A=at(Ke);A&&A.id&&r.update(M=>{var ie;return{...M,id:A.id,global_shortcut:A.global_shortcut,default_theme:((ie=A.roles[A.default_role])==null?void 0:ie.theme)??"spacelab",default_role:A.default_role,roles:Object.values(A.roles).map(x=>{var K,re,ge,we,ye,it,Ye;const se=(K=x.kg)==null?void 0:K.automata_path,Ae=(se==null?void 0:se.Remote)??"",ue=((ge=(re=x.kg)==null?void 0:re.knowledge_graph_local)==null?void 0:ge.path)??"";return{name:x.name,shortname:x.shortname,relevance_function:x.relevance_function,theme:x.theme,haystacks:(x.haystacks??[]).map(Ie=>({path:Ie.location||Ie.path||"",read_only:Ie.read_only??!1,service:Ie.service||"Ripgrep",atomic_server_secret:Ie.atomic_server_secret||"",extra_parameters:Ie.extra_parameters||{}})),kg:{url:Ae,local_path:ue,local_type:((ye=(we=x.kg)==null?void 0:we.knowledge_graph_local)==null?void 0:ye.input_type)??"markdown",public:((it=x.kg)==null?void 0:it.public)??!1,publish:((Ye=x.kg)==null?void 0:Ye.publish)??!1}}})}})}catch(S){console.error("Failed to load schema",S)}});let s=1;function a(){s<Hl&&t(0,s+=1)}function i(){s>1&&t(0,s-=1)}function d(){r.update(S=>({...S,roles:[...S.roles,{name:"New Role",shortname:"new",relevance_function:"title-scorer",theme:"spacelab",haystacks:[],kg:{url:"",local_path:"",local_type:"markdown",public:!1,publish:!1}}]}))}function m(S){r.update(A=>({...A,roles:A.roles.filter((M,ie)=>ie!==S)}))}function p(S){r.update(A=>(A.roles[S].haystacks.push({path:"",read_only:!1,service:"Ripgrep",atomic_server_secret:"",extra_parameters:{}}),A))}function f(S,A){r.update(M=>(M.roles[S].haystacks=M.roles[S].haystacks.filter((ie,x)=>x!==A),M))}function g(S,A,M="",ie=""){r.update(x=>{x.roles[S].haystacks[A].extra_parameters||(x.roles[S].haystacks[A].extra_parameters={});const se=M||`param_${Date.now()}`;return x.roles[S].haystacks[A].extra_parameters[se]=ie,x})}function h(S,A,M){r.update(ie=>(delete ie.roles[S].haystacks[A].extra_parameters[M],ie))}function k(S,A,M,ie){r.update(x=>{const se=x.roles[S].haystacks[A].extra_parameters;return se[M]!==void 0&&M!==ie&&(se[ie]=se[M],delete se[M]),x})}function $(S,A,M,ie){const x=ie.target.value;k(S,A,M,x)}async function v(){var x;const S=at(r),A=at(Ke);let M={...A};M.id=S.id,M.global_shortcut=S.global_shortcut,M.default_role=S.default_role;const ie={};S.roles.forEach(se=>{var K,re;const Ae=se.name,ue=Ae.replace(/^"|"$/g,"");ie[ue]={extra:((re=(K=A.roles)==null?void 0:K[Ae])==null?void 0:re.extra)??{},name:se.name,shortname:se.shortname,theme:se.theme,relevance_function:se.relevance_function,haystacks:se.haystacks.map(ge=>({location:ge.path,service:ge.service,read_only:ge.read_only,atomic_server_secret:ge.service==="Atomic"?ge.atomic_server_secret:void 0,extra_parameters:ge.extra_parameters||{}})),kg:se.kg.url||se.kg.local_path?{automata_path:se.kg.url?{Remote:se.kg.url}:null,knowledge_graph_local:se.kg.local_path?{input_type:se.kg.local_type,path:se.kg.local_path}:null,public:se.kg.public,publish:se.kg.publish}:null}}),M.roles=ie,(!M.default_role||!ie[M.default_role])&&(M.default_role=((x=S.roles[0])==null?void 0:x.name)??"Default"),M.selected_role=M.default_role;try{at(Ne)?await ke("update_config",{configNew:M}):await fetch("/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)}),Ke.set(M),alert("Configuration saved")}catch(se){console.error(se),alert("Failed to save config")}}function b(){n.id=Tt(this),r.set(n)}function U(){n.global_shortcut=this.value,r.set(n)}function I(){n.default_theme=this.value,r.set(n)}function W(){n.default_role=Tt(this),r.set(n)}function T(S){n.roles[S].name=this.value,r.set(n)}function R(S){n.roles[S].shortname=this.value,r.set(n)}function F(S){n.roles[S].theme=this.value,r.set(n)}function q(S){n.roles[S].relevance_function=this.value,r.set(n)}function Y(S,A){n.roles[S].haystacks[A].service=Tt(this),r.set(n)}function G(S,A){n.roles[S].haystacks[A].path=this.value,r.set(n)}function O(S,A){n.roles[S].haystacks[A].atomic_server_secret=this.value,r.set(n)}const y=(S,A,M,ie)=>$(S,A,M,ie);function H(S,A,M){n.roles[S].haystacks[A].extra_parameters[M]=this.value,r.set(n)}const N=(S,A,M)=>h(S,A,M),Z=(S,A)=>g(S,A,"tag","#rust"),j=(S,A)=>g(S,A,"max_count","10"),ne=(S,A)=>g(S,A,"","");function Q(S,A){n.roles[S].haystacks[A].read_only=this.checked,r.set(n)}const ae=(S,A)=>f(S,A),oe=S=>p(S);function _e(S){n.roles[S].kg.url=this.value,r.set(n)}function P(S){n.roles[S].kg.local_path=this.value,r.set(n)}function ee(S){n.roles[S].kg.local_type=Tt(this),r.set(n)}function X(S){n.roles[S].kg.public=this.checked,r.set(n)}function te(S){n.roles[S].kg.publish=this.checked,r.set(n)}return[s,n,r,a,i,d,m,p,f,g,h,$,v,b,U,I,W,T,R,F,q,Y,G,O,y,H,N,Z,j,ne,Q,ae,oe,_e,P,ee,X,te,S=>m(S)]}class Io extends De{constructor(e){super(),Ue(this,e,Ko,jo,Ee,{},null,[-1,-1])}}function Fo(l){let e,t,n,o,r,s;return r=new Kl({props:{content:l[0],onChange:l[1]}}),{c(){e=_("div"),t=_("p"),t.innerHTML="<i>The best editing experience is to configure Atomic Server, in the meantime use editor below. You will need to refresh page via Command R or Ctrl-R to see changes</i>",n=w(),o=_("div"),B(r.$$.fragment),c(o,"class","editor"),c(e,"class","box")},m(a,i){L(a,e,i),u(e,t),u(e,n),u(e,o),J(r,o,null),s=!0},p(a,[i]){const d={};i&1&&(d.content=a[0]),r.$set(d)},i(a){s||(E(r.$$.fragment,a),s=!0)},o(a){D(r.$$.fragment,a),s=!1},d(a){a&&C(e),V(r)}}}function Go(l,e,t){let n,o;fe(l,Ke,a=>t(2,n=a)),fe(l,Ne,a=>t(3,o=a));let r={json:n};function s(a){if(console.log("contents changed:",a),console.log("is tauri",o),Ke.update(i=>(i=a.json,i)),at(Ne))console.log("Updating config on server"),ke("update_config",{configNew:a.json}).then(i=>{console.log(`Message: ${i}`)}).catch(i=>console.error(i));else{let i=`${Be.ServerURL}/config/`;fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.json)})}t(0,r=a)}return At(()=>{t(0,r={json:n})}),[r,s]}class Ho extends De{constructor(e){super(),Ue(this,e,Go,Fo,Ee,{})}}const{window:Mt}=rn;function Wo(l){let e,t,n,o,r,s,a,i,d,m;return{c(){e=_("div"),t=_("div"),n=_("h3"),n.textContent="Error loading graph",o=w(),r=_("p"),s=le(l[3]),a=w(),i=_("button"),i.textContent="Retry",c(i,"class","button is-primary"),c(t,"class","error-content svelte-1ry9pkl"),c(e,"class","error-overlay svelte-1ry9pkl")},m(p,f){L(p,e,f),u(e,t),u(t,n),u(t,o),u(t,r),u(r,s),u(t,a),u(t,i),d||(m=z(i,"click",l[11]),d=!0)},p(p,f){f&8&&he(s,p[3])},d(p){p&&C(e),d=!1,m()}}}function qo(l){let e;return{c(){e=_("div"),e.innerHTML=`<div class="loading-content svelte-1ry9pkl"><div class="loader svelte-1ry9pkl"></div> 
        <p>Loading knowledge graph...</p></div>`,c(e,"class","loading-overlay svelte-1ry9pkl")},m(t,n){L(t,e,n)},p:de,d(t){t&&C(e)}}}function Ll(l){let e,t,n;return{c(){e=_("button"),e.innerHTML='<i class="fas fa-times svelte-1ry9pkl"></i>',c(e,"class","close-button svelte-1ry9pkl"),c(e,"title","Close Graph")},m(o,r){L(o,e,r),t||(n=z(e,"click",l[17]),t=!0)},p:de,d(o){o&&C(e),t=!1,n()}}}function Nl(l){let e;return{c(){e=_("div"),e.innerHTML="<span><strong>Left-click:</strong> View node â€¢ <strong>Right-click:</strong> Edit node â€¢ <strong>Drag:</strong> Move â€¢ <strong>Scroll:</strong> Zoom</span>",c(e,"class","controls-info svelte-1ry9pkl")},m(t,n){L(t,e,n)},d(t){t&&C(e)}}}function El(l){let e,t;return{c(){e=_("div"),t=le(l[8]),c(e,"class","debug-message svelte-1ry9pkl")},m(n,o){L(n,e,o),u(e,t)},p(n,o){o&256&&he(t,n[8])},d(n){n&&C(e)}}}function Ol(l){let e=l[5].id,t,n,o=Dl(l);return{c(){o.c(),t=Je()},m(r,s){o.m(r,s),L(r,t,s),n=!0},p(r,s){s&32&&Ee(e,e=r[5].id)?(Se(),D(o,1,1,de),Te(),o=Dl(r),o.c(),E(o,1),o.m(t.parentNode,t)):o.p(r,s)},i(r){n||(E(o),n=!0)},o(r){D(o),n=!1},d(r){r&&C(t),o.d(r)}}}function Dl(l){let e,t,n;function o(s){l[18](s)}let r={item:l[5],initialEdit:l[7]};return l[6]!==void 0&&(r.active=l[6]),e=new jt({props:r}),$e.push(()=>Ce(e,"active",o)),e.$on("close",l[12]),e.$on("save",l[13]),{c(){B(e.$$.fragment)},m(s,a){J(e,s,a),n=!0},p(s,a){const i={};a&32&&(i.item=s[5]),a&128&&(i.initialEdit=s[7]),!t&&a&64&&(t=!0,i.active=s[6],Le(()=>t=!1)),e.$set(i)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function zo(l){let e,t,n,o,r,s,a,i,d;et(l[15]);function m(v,b){if(v[2])return qo;if(v[3])return Wo}let p=m(l),f=p&&p(l),g=l[0]&&Ll(l),h=!l[2]&&!l[3]&&l[4].length>0&&Nl(),k=l[8]&&El(l),$=l[5]&&Ol(l);return{c(){e=_("div"),f&&f.c(),t=w(),g&&g.c(),n=w(),h&&h.c(),o=w(),k&&k.c(),r=w(),$&&$.c(),s=Je(),c(e,"class","graph-container svelte-1ry9pkl"),Xe(e,"width",l[0]?"100vw":"600px"),Xe(e,"height",l[0]?"100vh":"400px"),Ct(e,"fullscreen",l[0])},m(v,b){L(v,e,b),f&&f.m(e,null),l[16](e),L(v,t,b),g&&g.m(v,b),L(v,n,b),h&&h.m(v,b),L(v,o,b),k&&k.m(v,b),L(v,r,b),$&&$.m(v,b),L(v,s,b),a=!0,i||(d=z(Mt,"resize",l[15]),i=!0)},p(v,[b]){p===(p=m(v))&&f?f.p(v,b):(f&&f.d(1),f=p&&p(v),f&&(f.c(),f.m(e,null))),(!a||b&1)&&Xe(e,"width",v[0]?"100vw":"600px"),(!a||b&1)&&Xe(e,"height",v[0]?"100vh":"400px"),(!a||b&1)&&Ct(e,"fullscreen",v[0]),v[0]?g?g.p(v,b):(g=Ll(v),g.c(),g.m(n.parentNode,n)):g&&(g.d(1),g=null),!v[2]&&!v[3]&&v[4].length>0?h||(h=Nl(),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null),v[8]?k?k.p(v,b):(k=El(v),k.c(),k.m(r.parentNode,r)):k&&(k.d(1),k=null),v[5]?$?($.p(v,b),b&32&&E($,1)):($=Ol(v),$.c(),E($,1),$.m(s.parentNode,s)):$&&(Se(),D($,1,1,()=>{$=null}),Te())},i(v){a||(E($),a=!0)},o(v){D($),a=!1},d(v){v&&C(e),f&&f.d(),l[16](null),v&&C(t),g&&g.d(v),v&&C(n),h&&h.d(v),v&&C(o),k&&k.d(v),v&&C(r),$&&$.d(v),v&&C(s),i=!1,d()}}}function Ul(l){return{id:`kg-node-${l.id}`,url:`#/graph/node/${l.id}`,title:l.label,body:`# ${l.label}

**Knowledge Graph Node**

ID: ${l.id}
Rank: ${l.rank}

This is a concept node from the knowledge graph. You can edit this content to add more information about "${l.label}".`,description:`Knowledge graph concept: ${l.label}`,tags:["knowledge-graph","concept"],rank:l.rank,stub:`Knowledge graph concept: ${l.label}`}}function Bo(l,e,t){let n,o;fe(l,xe,y=>t(20,n=y)),fe(l,Ne,y=>t(21,o=y));let{apiUrl:r="/rolegraph"}=e,{fullscreen:s=!0}=e,a,i=!0,d=null,m=[],p=[],f=null,g=!1,h=!1,k="",$=window.innerWidth,v=window.innerHeight;function b(){t(9,$=window.innerWidth),t(10,v=window.innerHeight),!i&&!d&&F()}async function U(){t(2,i=!0),t(3,d=null);try{if(o){console.log("Loading rolegraph from Tauri");const y=await ke("get_rolegraph",{roleName:n||void 0});if(y&&y.status==="success")t(4,m=y.nodes),p=y.edges;else throw new Error(`Tauri rolegraph fetch failed: ${(y==null?void 0:y.status)||"unknown error"}`)}else{console.log("Loading rolegraph from server");const y=n?`${r}?role=${encodeURIComponent(n)}`:r,H=await fetch(y);if(!H.ok)throw new Error(`Failed to fetch: ${H.status}`);const N=await H.json();t(4,m=N.nodes),p=N.edges}}catch(y){t(3,d=y.message),console.error("Error fetching rolegraph:",y)}finally{t(2,i=!1)}}function I(y,H){y.stopPropagation(),console.log("Node clicked:",H.label),t(5,f=Ul(H)),t(7,h=!1),t(6,g=!0)}function W(y,H){y.preventDefault(),y.stopPropagation(),console.log("Node right-clicked:",H.label),t(8,k=`Right-clicked: ${H.label}`),t(5,f=Ul(H)),t(7,h=!0),t(6,g=!0),setTimeout(()=>{t(8,k="")},2e3)}function T(){t(6,g=!1),t(5,f=null),t(7,h=!1)}async function R(){if(f)try{const y=await fetch("/documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});y.ok?console.log("Successfully saved KG record:",f.id):console.error("Failed to save KG record:",y.statusText)}catch(y){console.error("Error saving KG record:",y)}finally{t(6,g=!1),t(5,f=null),t(7,h=!1)}}function F(){if(!a)return;t(1,a.innerHTML="",a);const y=Et(a).append("svg").attr("width",$).attr("height",v),H=mn().scaleExtent([.1,10]).on("zoom",P=>{N.attr("transform",P.transform)});y.call(H);const N=y.append("g"),Z=hn(m).force("link",gn(p).id(P=>P.id).distance(100)).force("charge",vn().strength(-200)).force("center",bn($/2,v/2)).force("collision",kn().radius(20)),j=N.append("g").attr("class","links").selectAll("line").data(p).enter().append("line").attr("stroke","#666").attr("stroke-opacity",.7).attr("stroke-width",P=>{const ee=P.weight||P.rank||1;return Math.max(1,Math.min(8,ee*2))}),ne=N.append("g").attr("class","nodes").selectAll("circle").data(m).enter().append("circle").attr("r",P=>{const ee=P.rank||1;return Math.max(6,Math.min(20,ee*2))}).attr("fill",P=>{const ee=P.rank||1,X=Math.min(ee/10,1);return $n(.2+X*.6)}).attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer").on("click",(P,ee)=>I(P,ee)).on("contextmenu",(P,ee)=>W(P,ee)).on("mouseover",function(P,ee){Et(this).transition().duration(150).attr("stroke-width",3).attr("r",X=>{const te=X.rank||1;return Math.max(8,Math.min(24,te*2.5))})}).on("mouseout",function(P,ee){Et(this).transition().duration(150).attr("stroke-width",2).attr("r",X=>{const te=X.rank||1;return Math.max(6,Math.min(20,te*2))})}).call(wn().on("start",ae).on("drag",oe).on("end",_e)),Q=N.append("g").attr("class","labels").selectAll("text").data(m).enter().append("text").attr("text-anchor","middle").attr("dy",".35em").attr("font-size","11px").attr("font-family","Arial, sans-serif").attr("fill","#333").attr("pointer-events","none").text(P=>P.label.length>12?P.label.substring(0,12)+"...":P.label);Z.on("tick",()=>{j.attr("x1",P=>P.source.x).attr("y1",P=>P.source.y).attr("x2",P=>P.target.x).attr("y2",P=>P.target.y),ne.attr("cx",P=>P.x).attr("cy",P=>P.y),Q.attr("x",P=>P.x).attr("y",P=>P.y)});function ae(P,ee){P.active||Z.alphaTarget(.3).restart(),ee.fx=ee.x,ee.fy=ee.y}function oe(P,ee){ee.fx=P.x,ee.fy=P.y}function _e(P,ee){P.active||Z.alphaTarget(0),ee.fx=null,ee.fy=null}}At(()=>{U().then(()=>{d||F()});const y=H=>{H.preventDefault()};return a&&a.addEventListener("contextmenu",y),window.addEventListener("resize",b),()=>{a&&a.removeEventListener("contextmenu",y),window.removeEventListener("resize",b)}});function q(){t(9,$=Mt.innerWidth),t(10,v=Mt.innerHeight)}function Y(y){$e[y?"unshift":"push"](()=>{a=y,t(1,a)})}const G=()=>history.back();function O(y){g=y,t(6,g)}return l.$$set=y=>{"apiUrl"in y&&t(14,r=y.apiUrl),"fullscreen"in y&&t(0,s=y.fullscreen)},[s,a,i,d,m,f,g,h,k,$,v,U,T,R,r,q,Y,G,O]}class Jo extends De{constructor(e){super(),Ue(this,e,Bo,zo,Ee,{apiUrl:14,fullscreen:0})}}function Vo(l){let e,t;return e=new No({}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Yo(l){let e,t;return e=new Bn({}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Zo(l){let e,t;return e=new Io({}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Qo(l){let e,t;return e=new Ho({}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Xo(l){let e,t;return e=new Jo({}),{c(){B(e.$$.fragment)},m(n,o){J(e,n,o),t=!0},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function xo(l){let e;return{c(){e=_("nav"),e.innerHTML=`<div class="navbar-brand"><a class="navbar-item" href="/"><span class="icon" style="color: #333;"><i class="fas fa-home"></i></span></a> 
            <a class="navbar-item" href="/config/wizard">Wizard</a> 
            <a class="navbar-item" href="/config/json">JSONÂ Editor</a> 
            <a class="navbar-item" href="/graph">Graph</a></div>`,c(e,"class","navbar")},m(t,n){L(t,e,n)},p:de,d(t){t&&C(e)}}}function es(l){let e,t,n,o,r,s,a,i,d,m,p,f,g,h,k,$,v,b,U,I,W,T,R,F,q,Y,G,O;return a=new Rt({}),m=new He({props:{path:"/",$$slots:{default:[Vo]},$$scope:{ctx:l}}}),h=new He({props:{path:"/fetch/*",$$slots:{default:[Yo]},$$scope:{ctx:l}}}),$=new He({props:{path:"/config/wizard",$$slots:{default:[Zo]},$$scope:{ctx:l}}}),b=new He({props:{path:"/config/json",$$slots:{default:[Qo]},$$scope:{ctx:l}}}),I=new He({props:{path:"/graph",$$slots:{default:[Xo]},$$scope:{ctx:l}}}),F=new He({props:{path:"/",$$slots:{default:[xo]},$$scope:{ctx:l}}}),{c(){e=_("meta"),t=w(),n=_("div"),o=_("main"),r=_("div"),s=_("div"),B(a.$$.fragment),i=w(),d=_("div"),B(m.$$.fragment),p=w(),f=_("br"),g=w(),B(h.$$.fragment),k=w(),B($.$$.fragment),v=w(),B(b.$$.fragment),U=w(),B(I.$$.fragment),W=w(),T=_("footer"),R=_("div"),B(F.$$.fragment),c(e,"name","color-scheme"),c(e,"content",l[1]),document.title="Terraphim",c(s,"class","role-selector svelte-1bfpta4"),c(r,"class","top-controls svelte-1bfpta4"),c(d,"class","search-area svelte-1bfpta4"),c(o,"class","main-content svelte-1bfpta4"),c(R,"class",q=Qt(l[0])+" svelte-1bfpta4"),c(T,"class","svelte-1bfpta4"),c(n,"class","is-full-height svelte-1bfpta4")},m(y,H){u(document.head,e),L(y,t,H),L(y,n,H),u(n,o),u(o,r),u(r,s),J(a,s,null),u(o,i),u(o,d),J(m,d,null),u(o,p),u(o,f),u(o,g),J(h,o,null),u(o,k),J($,o,null),u(o,v),J(b,o,null),u(o,U),J(I,o,null),u(n,W),u(n,T),u(T,R),J(F,R,null),Y=!0,G||(O=[z(T,"mouseover",l[2]),z(T,"focus",l[2])],G=!0)},p(y,[H]){(!Y||H&2)&&c(e,"content",y[1]);const N={};H&8&&(N.$$scope={dirty:H,ctx:y}),m.$set(N);const Z={};H&8&&(Z.$$scope={dirty:H,ctx:y}),h.$set(Z);const j={};H&8&&(j.$$scope={dirty:H,ctx:y}),$.$set(j);const ne={};H&8&&(ne.$$scope={dirty:H,ctx:y}),b.$set(ne);const Q={};H&8&&(Q.$$scope={dirty:H,ctx:y}),I.$set(Q);const ae={};H&8&&(ae.$$scope={dirty:H,ctx:y}),F.$set(ae),(!Y||H&1&&q!==(q=Qt(y[0])+" svelte-1bfpta4"))&&c(R,"class",q)},i(y){Y||(E(a.$$.fragment,y),E(m.$$.fragment,y),E(h.$$.fragment,y),E($.$$.fragment,y),E(b.$$.fragment,y),E(I.$$.fragment,y),E(F.$$.fragment,y),Y=!0)},o(y){D(a.$$.fragment,y),D(m.$$.fragment,y),D(h.$$.fragment,y),D($.$$.fragment,y),D(b.$$.fragment,y),D(I.$$.fragment,y),D(F.$$.fragment,y),Y=!1},d(y){C(e),y&&C(t),y&&C(n),V(a),V(m),V(h),V($),V(b),V(I),V(F),G=!1,Me(O)}}}function ts(l,e,t){let n;fe(l,ft,s=>t(1,n=s));let o="is-hidden";function r(){t(0,o="")}return[o,n,r]}class ls extends De{constructor(e){super(),Ue(this,e,ts,es,Ee,{})}}const ns=new dn;pn(ns);new ls({target:document.getElementById("app")});
