
            <!DOCTYPE html>
            <html lang="en">
            <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>Splash Screen</title>
              <style>.startup-screen.svelte-1v50vlg{display:flex;align-items:center;justify-content:center;height:100vh}.container.svelte-1v50vlg{max-width:500px}</style>
            </head>
            <body>
              <script>/* generated by Svelte v3.59.2 */
import {
	SvelteComponent,
	append,
	append_styles,
	attr,
	detach,
	element,
	init,
	insert,
	listen,
	noop,
	run_all,
	safe_not_equal,
	set_data,
	set_input_value,
	space,
	text
} from "svelte/internal";

import { invoke } from "@tauri-apps/api/tauri";
import { open } from "@tauri-apps/api/dialog";
import { onMount } from "svelte";
import { readDir } from "@tauri-apps/api/fs";
import { resolve, appDir, appDataDir } from "@tauri-apps/api/path";

function add_css(target) {
	append_styles(target, "svelte-1v50vlg", ".startup-screen.svelte-1v50vlg{display:flex;align-items:center;justify-content:center;height:100vh}.container.svelte-1v50vlg{max-width:500px}");
}

// (115:4) {#if error}
function create_if_block(ctx) {
	let p;
	let t;

	return {
		c() {
			p = element("p");
			t = text(/*error*/ ctx[2]);
			attr(p, "class", "help is-danger");
		},
		m(target, anchor) {
			insert(target, p, anchor);
			append(p, t);
		},
		p(ctx, dirty) {
			if (dirty & /*error*/ 4) set_data(t, /*error*/ ctx[2]);
		},
		d(detaching) {
			if (detaching) detach(p);
		}
	};
}

function create_fragment(ctx) {
	let div9;
	let div8;
	let h1;
	let t1;
	let p;
	let t3;
	let div1;
	let label0;
	let t5;
	let div0;
	let input0;
	let t6;
	let div3;
	let div2;
	let button0;
	let t8;
	let div5;
	let label1;
	let t10;
	let div4;
	let input1;
	let t11;
	let t12;
	let div7;
	let div6;
	let button1;
	let mounted;
	let dispose;
	let if_block = /*error*/ ctx[2] && create_if_block(ctx);

	return {
		c() {
			div9 = element("div");
			div8 = element("div");
			h1 = element("h1");
			h1.textContent = "Welcome to Terraphim AI";
			t1 = space();
			p = element("p");
			p.textContent = "Please set up your initial settings:";
			t3 = space();
			div1 = element("div");
			label0 = element("label");
			label0.textContent = "Data Folder Path:";
			t5 = space();
			div0 = element("div");
			input0 = element("input");
			t6 = space();
			div3 = element("div");
			div2 = element("div");
			button0 = element("button");
			button0.textContent = "Browse";
			t8 = space();
			div5 = element("div");
			label1 = element("label");
			label1.textContent = "Global Shortcut:";
			t10 = space();
			div4 = element("div");
			input1 = element("input");
			t11 = space();
			if (if_block) if_block.c();
			t12 = space();
			div7 = element("div");
			div6 = element("div");
			button1 = element("button");
			button1.textContent = "Save Settings";
			attr(h1, "class", "title is-2");
			attr(p, "class", "subtitle");
			attr(label0, "class", "label");
			attr(label0, "for", "data-folder");
			attr(input0, "class", "input");
			attr(input0, "id", "data-folder");
			attr(input0, "type", "file");
			attr(input0, "webkitdirectory", "true");
			attr(input0, "directory", "");
			attr(div0, "class", "control");
			attr(div1, "class", "field");
			attr(button0, "class", "button is-primary");
			attr(div2, "class", "control");
			attr(div3, "class", "field");
			attr(label1, "class", "label");
			attr(label1, "for", "global-shortcut");
			attr(input1, "class", "input");
			attr(input1, "id", "global-shortcut");
			attr(input1, "type", "text");
			input1.readOnly = true;
			attr(input1, "placeholder", "Click to set shortcut");
			attr(div4, "class", "control");
			attr(div5, "class", "field");
			attr(button1, "class", "button is-success");
			attr(div6, "class", "control");
			attr(div7, "class", "field");
			attr(div8, "class", "container svelte-1v50vlg");
			attr(div9, "class", "startup-screen section svelte-1v50vlg");
		},
		m(target, anchor) {
			insert(target, div9, anchor);
			append(div9, div8);
			append(div8, h1);
			append(div8, t1);
			append(div8, p);
			append(div8, t3);
			append(div8, div1);
			append(div1, label0);
			append(div1, t5);
			append(div1, div0);
			append(div0, input0);
			append(div8, t6);
			append(div8, div3);
			append(div3, div2);
			append(div2, button0);
			append(div8, t8);
			append(div8, div5);
			append(div5, label1);
			append(div5, t10);
			append(div5, div4);
			append(div4, input1);
			set_input_value(input1, /*globalShortcut*/ ctx[1]);
			append(div8, t11);
			if (if_block) if_block.m(div8, null);
			append(div8, t12);
			append(div8, div7);
			append(div7, div6);
			append(div6, button1);

			if (!mounted) {
				dispose = [
					listen(input0, "change", /*input0_change_handler*/ ctx[6]),
					listen(button0, "click", /*selectFolder*/ ctx[3]),
					listen(input1, "input", /*input1_input_handler*/ ctx[7]),
					listen(input1, "click", /*startCapturingShortcut*/ ctx[4]),
					listen(button1, "click", /*saveSettings*/ ctx[5])
				];

				mounted = true;
			}
		},
		p(ctx, [dirty]) {
			if (dirty & /*globalShortcut*/ 2 && input1.value !== /*globalShortcut*/ ctx[1]) {
				set_input_value(input1, /*globalShortcut*/ ctx[1]);
			}

			if (/*error*/ ctx[2]) {
				if (if_block) {
					if_block.p(ctx, dirty);
				} else {
					if_block = create_if_block(ctx);
					if_block.c();
					if_block.m(div8, t12);
				}
			} else if (if_block) {
				if_block.d(1);
				if_block = null;
			}
		},
		i: noop,
		o: noop,
		d(detaching) {
			if (detaching) detach(div9);
			if (if_block) if_block.d();
			mounted = false;
			run_all(dispose);
		}
	};
}

function instance($$self, $$props, $$invalidate) {
	let dataFolder = "";
	let globalShortcut = "";
	let error = "";
	let isCapturingShortcut = false;

	async function selectFolder() {
		try {
			const selected = await open({
				directory: true,
				multiple: false,
				defaultPath: await appDir()
			});

			console.log(selected);
			console.log(typeof selected);

			if (selected && typeof selected === "string") {
				$$invalidate(0, dataFolder = selected);
			} else {
				$$invalidate(2, error = "No folder selected or invalid selection");
			}
		} catch(err) {
			console.error("Failed to open folder selector:", err);
			$$invalidate(2, error = `Failed to open folder selector: ${err.message}`);
		}
	}

	function startCapturingShortcut() {
		isCapturingShortcut = true;
		$$invalidate(1, globalShortcut = "Press your desired shortcut...");
	}

	function handleKeyDown(event) {
		if (!isCapturingShortcut) return;
		event.preventDefault();
		const key = event.key.toUpperCase();
		const modifiers = [];
		if (event.ctrlKey) modifiers.push("Ctrl");
		if (event.altKey) modifiers.push("Alt");
		if (event.shiftKey) modifiers.push("Shift");
		if (event.metaKey) modifiers.push("Cmd");

		if (key !== "CONTROL" && key !== "ALT" && key !== "SHIFT" && key !== "META") {
			$$invalidate(1, globalShortcut = [...modifiers, key].join("+"));
			isCapturingShortcut = false;
		}
	}

	async function saveSettings() {
		if (!dataFolder || !globalShortcut) {
			$$invalidate(2, error = "Please fill in both fields");
			return;
		}

		try {
			await invoke("save_initial_settings", {
				settings: {
					data_folder: dataFolder,
					global_shortcut: globalShortcut
				}
			});

			window.location.reload();
		} catch(e) {
			$$invalidate(2, error = "Failed to save settings");
			console.error(e);
		} finally {
			// set initial setup complete to true
			isInitialSetupComplete = true;
		}
	}

	onMount(() => {
		document.addEventListener("keydown", handleKeyDown);

		return () => {
			document.removeEventListener("keydown", handleKeyDown);
		};
	});

	function input0_change_handler() {
		dataFolder = this.value;
		$$invalidate(0, dataFolder);
	}

	function input1_input_handler() {
		globalShortcut = this.value;
		$$invalidate(1, globalShortcut);
	}

	return [
		dataFolder,
		globalShortcut,
		error,
		selectFolder,
		startCapturingShortcut,
		saveSettings,
		input0_change_handler,
		input1_input_handler
	];
}

class Component extends SvelteComponent {
	constructor(options) {
		super();
		init(this, options, instance, create_fragment, safe_not_equal, {}, add_css);
	}
}

export default Component;</script>
            </body>
            </html>
          