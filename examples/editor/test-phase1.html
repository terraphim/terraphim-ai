<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phase 1 Test - Terraphim Editor</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: #f5f5f5;
    }

    h1 {
      color: #0066cc;
    }

    .status {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-weight: bold;
    }

    .status.success {
      background: #d4edda;
      color: #155724;
    }

    .status.error {
      background: #f8d7da;
      color: #721c24;
    }

    terraphim-editor {
      min-height: 300px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <h1>Phase 1 Test - Core Tier Editor</h1>

  <div id="status-loading" class="status">Loading editor...</div>
  <div id="status-success" class="status success" style="display:none;">
    Editor loaded successfully! Tier: <span id="tier-value"></span>
  </div>
  <div id="status-error" class="status error" style="display:none;">
    Error loading editor. Check console for details.
  </div>

  <terraphim-editor
    id="test-editor"
    content="# Phase 1 Test

This is a **test** of the *core tier* editor.

Try editing this content!"
    output-format="markdown">
  </terraphim-editor>

  <script type="module">
    try {
      // Import the editor component
      await import('../../components/editor/terraphim-editor.js');

      const editor = document.getElementById('test-editor');

      // Wait for tier detection
      editor.addEventListener('tier-detected', (event) => {
        const tier = event.detail.tier;

        document.getElementById('status-loading').style.display = 'none';
        document.getElementById('status-success').style.display = 'block';
        document.getElementById('tier-value').textContent = tier;

        console.log('✓ Editor loaded successfully');
        console.log('✓ Tier detected:', tier);
      });

      // Listen for content changes
      editor.addEventListener('content-changed', (event) => {
        console.log('✓ Content changed:', event.detail.content.substring(0, 50) + '...');
      });

      // Test API methods after a short delay
      setTimeout(() => {
        console.log('Testing API methods...');

        const tier = editor.getEditorTier();
        console.log('✓ getEditorTier():', tier);

        const content = editor.getContent('markdown');
        console.log('✓ getContent():', content.substring(0, 50) + '...');

        console.log('✓ All tests passed!');
      }, 1000);

    } catch (error) {
      console.error('Error loading editor:', error);
      document.getElementById('status-loading').style.display = 'none';
      document.getElementById('status-error').style.display = 'block';
    }
  </script>
</body>
</html>
