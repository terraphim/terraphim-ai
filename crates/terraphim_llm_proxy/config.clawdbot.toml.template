# Terraphim LLM Proxy Configuration for Clawdbot
# Uses Groq for fastest, DeepSeek for thinking, Groq (small) for cheapest
# Includes OpenRouter for specialty models and xAI for unified routing

[proxy]
host = "127.0.0.1"
port = 3456
api_key = "$PROXY_API_KEY"
timeout_ms = 600000

[router]
# FASTEST: Groq for ultra-low latency (100+ tokens/sec)
default = "groq,llama-3.3-70b-versatile"

# FASTEST (alternative): Cerebras for batch/background tasks
background = "cerebras,llama3.1-8b"

# THINKING: DeepSeek Reasoner for complex reasoning
think = "deepseek,deepseek-reasoner"

# CHEAPEST: Groq with smaller model (llama-3.1-8b-instant)
long_context = "groq,llama-3.1-8b-instant"
long_context_threshold = 60000

# Web search via OpenRouter -> Perplexity
web_search = "openrouter,perplexity/llama-3.1-sonar-large-128k-online"

# Image via OpenRouter -> Anthropic
image = "openrouter,anthropic/claude-3.5-sonnet"

strategy = "fill_first"

[security.rate_limiting]
enabled = false
requests_per_minute = 600
concurrent_requests = 100

[security.ssrf_protection]
enabled = true
allow_localhost = true
allow_private_ips = true

# Groq - Primary provider for fastest and cheapest
[[providers]]
name = "groq"
api_base_url = "https://api.groq.com/openai/v1"
api_key = "$GROQ_API_KEY"
models = [
    "llama-3.3-70b-versatile",
    "llama-3.1-8b-instant",
    "mixtral-8x7b-32768"
]
transformers = ["openai"]

# Cerebras - Secondary fast provider for background tasks
[[providers]]
name = "cerebras"
api_base_url = "https://api.cerebras.ai/v1"
api_key = "$CEREBRAS_API_KEY"
models = [
    "llama3.1-8b",
    "llama3.1-70b"
]
transformers = ["openai"]

# DeepSeek - Provider for thinking/reasoning
[[providers]]
name = "deepseek"
api_base_url = "https://api.deepseek.com/chat/completions"
api_key = "$DEEPSEEK_API_KEY"
models = ["deepseek-chat", "deepseek-reasoner"]
transformers = ["deepseek", "tooluse"]

# OpenRouter - Provider for specialty models (Claude, Perplexity)
[[providers]]
name = "openrouter"
api_base_url = "https://openrouter.ai/api/v1/chat/completions"
api_key = "$OPENROUTER_API_KEY"
models = [
    "anthropic/claude-3.5-sonnet",
    "perplexity/llama-3.1-sonar-large-128k-online"
]
transformers = ["openrouter"]

# xAI - Provider for Grok models (unified routing)
[[providers]]
name = "xai"
api_base_url = "https://api.x.ai/v1"
api_key = "$XAI_API_KEY"
models = ["grok-3", "grok-2"]
transformers = ["openai"]
