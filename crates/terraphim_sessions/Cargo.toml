[package]
name = "terraphim_sessions"
version.workspace = true
edition.workspace = true
description = "Session management for AI coding assistant history - search across Claude Code, Cursor, Aider sessions"
license = "Apache-2.0"
authors = ["Terraphim Contributors"]
documentation = "https://terraphim.ai"
homepage = "https://terraphim.ai"
repository = "https://github.com/terraphim/terraphim-ai"
keywords = ["sessions", "ai", "search", "claude", "cursor"]
readme = "../../README.md"

[features]
default = []

# Enable terraphim-session-analyzer integration for enhanced parsing
terraphim-session-analyzer = ["dep:terraphim-session-analyzer"]

# Enable full TSA features including Cursor support
tsa-full = ["terraphim-session-analyzer", "terraphim-session-analyzer/connectors"]

# Enable terraphim knowledge graph enrichment
enrichment = ["terraphim_automata", "terraphim_rolegraph", "terraphim_types"]

# All features
full = ["tsa-full", "enrichment"]

[dependencies]
# Core dependencies
tokio = { workspace = true, features = ["full"] }
async-trait = { workspace = true }
serde = { workspace = true, features = ["derive"] }
serde_json = { workspace = true }
chrono = { workspace = true, features = ["serde"] }
uuid = { workspace = true }
thiserror = { workspace = true }
anyhow = { workspace = true }
tracing = "0.1"

# Time handling (same as CLA)
jiff = { version = "0.1", features = ["serde"] }

# File system
walkdir = "2.4"
dirs = "5.0"

# Feature-gated: Terraphim Session Analyzer
terraphim-session-analyzer = { version = "1.6.0", path = "../terraphim-session-analyzer", optional = true }

# Shared session connectors (with optional connector implementations)
terraphim_session_connectors = { path = "../terraphim_session_connectors", default-features = false, optional = true }

# Feature-gated: Terraphim enrichment (uses published crates.io versions)
terraphim_automata = { version = ">=1.4.10", path = "../terraphim_automata", optional = true }
terraphim_rolegraph = { version = ">=1.4.10", path = "../terraphim_rolegraph", optional = true }
terraphim_types = { version = ">=1.4.10", path = "../terraphim_types", optional = true }

[dev-dependencies]
tempfile = "3.10"
tokio-test = "0.4"
